<!DOCTYPE html>
<html lang="en">
<head>
    <title>
A couple of nice Tuple use cases - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="A couple of nice Tuple use cases - linksfor.dev(s)"/>
    <meta property="og:description" content="A couple of nice Tuple use cases"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://josephwoodward.co.uk/2020/03/couple-nice-tuple-use-cases"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - A couple of nice Tuple use cases</title>
<div class="readable">
        <h1>A couple of nice Tuple use cases</h1>
            <div>Reading time: 10-12 minutes</div>
        <div>Posted here: 16 Mar 2020</div>
        <p><a href="http://josephwoodward.co.uk/2020/03/couple-nice-tuple-use-cases">http://josephwoodward.co.uk/2020/03/couple-nice-tuple-use-cases</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
            <p>C# has had a Tuple type (<code>System.Tuple</code>) for sometime now, however a re-occuring theme was it generally lacked the utility that tuples in languages with native support had. This partly due to the fact that it was really just a class utilising generics with no real language or runtime support, resulting in its adoption being rather limited.</p>
<p>Since C# 7 and the introduction of the <code>ValueTuple</code> type (freeing up some GC cycles) and <a href="https://docs.microsoft.com/en-us/dotnet/csharp/deconstruct#deconstructing-a-tuple">tuple deconstruction</a>, things seem to have changed and I've noticed more and more libraries and developers utilising them, myself included.</p>
<p>With that in mind I'd like to highlight a couple of creative use cases I've seen people using that I'd never considered before:</p>
<h2>Tuple constructors</h2>
<p>I first learned about this pattern at a recent <a href="https://twitter.com/jonskeet">Jon Skeet</a> talk I attended at the <a href="https://www.meetup.com/dotnetsouthwest/events/267685744/">.NET South West</a> meet up I co-organise. Jon was demoing some new C# 8 language features and stopped to talk about how he'd adopted this particular pattern.</p>
<p>Given the following constructor we can make this a little shorter without losing much readability using tuples:</p>
<div id="gist101824417">
    <div>
      <div>
        <div>
  <div id="file-before-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-before-cs-L1" data-line-number="1"></td>
        <td id="file-before-cs-LC1"><span><span>//</span> Before</span></td>
      </tr>
      <tr>
        <td id="file-before-cs-L2" data-line-number="2"></td>
        <td id="file-before-cs-LC2">
</td>
      </tr>
      <tr>
        <td id="file-before-cs-L3" data-line-number="3"></td>
        <td id="file-before-cs-LC3"><span>public</span> <span>class</span> <span>Person</span></td>
      </tr>
      <tr>
        <td id="file-before-cs-L4" data-line-number="4"></td>
        <td id="file-before-cs-LC4">{</td>
      </tr>
      <tr>
        <td id="file-before-cs-L5" data-line-number="5"></td>
        <td id="file-before-cs-LC5">    <span>private</span> <span>readonly</span> <span>string</span> <span>_firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L6" data-line-number="6"></td>
        <td id="file-before-cs-LC6">    <span>private</span> <span>readonly</span> <span>string</span> <span>_surname</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L7" data-line-number="7"></td>
        <td id="file-before-cs-LC7">    <span>private</span> <span>readonly</span> <span>int</span> <span>_age</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L8" data-line-number="8"></td>
        <td id="file-before-cs-LC8">
</td>
      </tr>
      <tr>
        <td id="file-before-cs-L9" data-line-number="9"></td>
        <td id="file-before-cs-LC9">    <span>public</span> <span>Person</span>(<span>string</span> <span>firstName</span>, <span>string</span> <span>surname</span>, <span>int</span> <span>age</span>)</td>
      </tr>
      <tr>
        <td id="file-before-cs-L10" data-line-number="10"></td>
        <td id="file-before-cs-LC10">    {</td>
      </tr>
      <tr>
        <td id="file-before-cs-L11" data-line-number="11"></td>
        <td id="file-before-cs-LC11">        <span>_firstName</span> <span>=</span> <span>firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L12" data-line-number="12"></td>
        <td id="file-before-cs-LC12">        <span>_surname</span> <span>=</span> <span>surname</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L13" data-line-number="13"></td>
        <td id="file-before-cs-LC13">        <span>_age</span> <span>=</span> <span>age</span>;</td>
      </tr>
      <tr>
        <td id="file-before-cs-L14" data-line-number="14"></td>
        <td id="file-before-cs-LC14">    }</td>
      </tr>
      <tr>
        <td id="file-before-cs-L15" data-line-number="15"></td>
        <td id="file-before-cs-LC15">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<div id="gist101824425">
    <div>
      <div>
        <div>
  <div id="file-after-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-after-cs-L1" data-line-number="1"></td>
        <td id="file-after-cs-LC1"><span><span>//</span> After</span></td>
      </tr>
      <tr>
        <td id="file-after-cs-L2" data-line-number="2"></td>
        <td id="file-after-cs-LC2">
</td>
      </tr>
      <tr>
        <td id="file-after-cs-L3" data-line-number="3"></td>
        <td id="file-after-cs-LC3"><span>public</span> <span>class</span> <span>Person</span></td>
      </tr>
      <tr>
        <td id="file-after-cs-L4" data-line-number="4"></td>
        <td id="file-after-cs-LC4">{</td>
      </tr>
      <tr>
        <td id="file-after-cs-L5" data-line-number="5"></td>
        <td id="file-after-cs-LC5">    <span>private</span> <span>readonly</span> <span>string</span> <span>_firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-after-cs-L6" data-line-number="6"></td>
        <td id="file-after-cs-LC6">    <span>private</span> <span>readonly</span> <span>string</span> <span>_surname</span>;</td>
      </tr>
      <tr>
        <td id="file-after-cs-L7" data-line-number="7"></td>
        <td id="file-after-cs-LC7">    <span>private</span> <span>readonly</span> <span>int</span> <span>_age</span>;</td>
      </tr>
      <tr>
        <td id="file-after-cs-L8" data-line-number="8"></td>
        <td id="file-after-cs-LC8">
</td>
      </tr>
      <tr>
        <td id="file-after-cs-L9" data-line-number="9"></td>
        <td id="file-after-cs-LC9">    <span>public</span> <span>Person</span>(<span>string</span> <span>firstName</span>, <span>string</span> <span>surname</span>, <span>int</span> <span>age</span>)</td>
      </tr>
      <tr>
        <td id="file-after-cs-L10" data-line-number="10"></td>
        <td id="file-after-cs-LC10">        <span>=&gt;</span> (<span>_firstName</span>, <span>_surname</span>, <span>_age</span>) <span>=</span> (<span>firstName</span>, <span>surname</span>, <span>age</span>);</td>
      </tr>
      <tr>
        <td id="file-after-cs-L11" data-line-number="11"></td>
        <td id="file-after-cs-LC11">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<p>When we look at the lowered version of the code using a tool such as <a href="https://sharplab.io/">SharpLab</a>, we can see that the Tupled version is lowered to exactly the same syntax as the version before which means there's no cost in using such a pattern.</p>
<div id="gist101824430">
    <div>
      <div>
        <div>
  <div id="file-lowered-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-lowered-cs-L1" data-line-number="1"></td>
        <td id="file-lowered-cs-LC1">[<span>assembly</span>: <span>CompilationRelaxations</span>(<span>8</span>)]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L2" data-line-number="2"></td>
        <td id="file-lowered-cs-LC2">[<span>assembly</span>: <span>RuntimeCompatibility</span>(<span>WrapNonExceptionThrows</span> <span>=</span> <span>true</span>)]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L3" data-line-number="3"></td>
        <td id="file-lowered-cs-LC3">[<span>assembly</span>: <span>Debuggable</span>(<span>DebuggableAttribute</span>.<span>DebuggingModes</span>.<span>IgnoreSymbolStoreSequencePoints</span>)]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L4" data-line-number="4"></td>
        <td id="file-lowered-cs-LC4">[<span>assembly</span>: <span>SecurityPermission</span>(<span>SecurityAction</span>.<span>RequestMinimum</span>, <span>SkipVerification</span> <span>=</span> <span>true</span>)]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L5" data-line-number="5"></td>
        <td id="file-lowered-cs-LC5">[<span>assembly</span>: <span>AssemblyVersion</span>(<span><span>"</span>0.0.0.0<span>"</span></span>)]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L6" data-line-number="6"></td>
        <td id="file-lowered-cs-LC6">[<span>module</span>: <span>UnverifiableCode</span>]</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L7" data-line-number="7"></td>
        <td id="file-lowered-cs-LC7"><span>public</span> <span>class</span> <span>Person</span></td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L8" data-line-number="8"></td>
        <td id="file-lowered-cs-LC8">{</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L9" data-line-number="9"></td>
        <td id="file-lowered-cs-LC9">    <span>private</span> <span>readonly</span> <span>string</span> <span>_firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L10" data-line-number="10"></td>
        <td id="file-lowered-cs-LC10">
</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L11" data-line-number="11"></td>
        <td id="file-lowered-cs-LC11">    <span>private</span> <span>readonly</span> <span>string</span> <span>_surname</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L12" data-line-number="12"></td>
        <td id="file-lowered-cs-LC12">
</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L13" data-line-number="13"></td>
        <td id="file-lowered-cs-LC13">    <span>private</span> <span>readonly</span> <span>int</span> <span>_age</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L14" data-line-number="14"></td>
        <td id="file-lowered-cs-LC14">
</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L15" data-line-number="15"></td>
        <td id="file-lowered-cs-LC15">    <span>public</span> <span>Person</span>(<span>string</span> <span>firstName</span>, <span>string</span> <span>surname</span>, <span>int</span> <span>age</span>)</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L16" data-line-number="16"></td>
        <td id="file-lowered-cs-LC16">    {</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L17" data-line-number="17"></td>
        <td id="file-lowered-cs-LC17">        <span>_firstName</span> <span>=</span> <span>firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L18" data-line-number="18"></td>
        <td id="file-lowered-cs-LC18">        <span>_surname</span> <span>=</span> <span>surname</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L19" data-line-number="19"></td>
        <td id="file-lowered-cs-LC19">        <span>_age</span> <span>=</span> <span>age</span>;</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L20" data-line-number="20"></td>
        <td id="file-lowered-cs-LC20">    }</td>
      </tr>
      <tr>
        <td id="file-lowered-cs-L21" data-line-number="21"></td>
        <td id="file-lowered-cs-LC21">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<h2>Tuple Methods</h2>
<p>As you might expect, you can also use the same approach for methods. Again this incurs no additional cost:</p>
<div id="gist101824435">
    <div>
      <div>
        <div>
  <div id="file-person-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-person-cs-L1" data-line-number="1"></td>
        <td id="file-person-cs-LC1"><span>public</span> <span>class</span> <span>Person</span></td>
      </tr>
      <tr>
        <td id="file-person-cs-L2" data-line-number="2"></td>
        <td id="file-person-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-person-cs-L3" data-line-number="3"></td>
        <td id="file-person-cs-LC3">    <span>private</span> <span>string</span> <span>_firstName</span>;</td>
      </tr>
      <tr>
        <td id="file-person-cs-L4" data-line-number="4"></td>
        <td id="file-person-cs-LC4">    <span>private</span> <span>string</span> <span>_surname</span>;</td>
      </tr>
      <tr>
        <td id="file-person-cs-L5" data-line-number="5"></td>
        <td id="file-person-cs-LC5">    <span>private</span> <span>int</span> <span>_age</span>;</td>
      </tr>
      <tr>
        <td id="file-person-cs-L6" data-line-number="6"></td>
        <td id="file-person-cs-LC6">
</td>
      </tr>
      <tr>
        <td id="file-person-cs-L7" data-line-number="7"></td>
        <td id="file-person-cs-LC7">    <span>public</span> <span>void</span> <span>SetPerson</span>(<span>string</span> <span>firstName</span>, <span>string</span> <span>surname</span>, <span>int</span> <span>age</span>)</td>
      </tr>
      <tr>
        <td id="file-person-cs-L8" data-line-number="8"></td>
        <td id="file-person-cs-LC8">        <span>=&gt;</span> (<span>_firstName</span>, <span>_surname</span>, <span>_age</span>) <span>=</span> (<span>firstName</span>, <span>surname</span>, <span>age</span>);</td>
      </tr>
      <tr>
        <td id="file-person-cs-L9" data-line-number="9"></td>
        <td id="file-person-cs-LC9">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<h2>Tuple / Deconstructor loops</h2>
<p>Another pattern I stumbled upon is using tuples within a loop. For instance given the following dictionary of people, due to <code>KeyValuePair</code> now <a href="https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/Collections/Generic/KeyValuePair.cs#L75">featuring a Deconstruct method</a>, we can unpack the contents in a few ways.</p>
<p>Traditionally we'd have done this:</p>
<div id="gist101824482">
    <div>
      <div>
        <div>
  <div id="file-tuplepatterns1-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-tuplepatterns1-cs-L1" data-line-number="1"></td>
        <td id="file-tuplepatterns1-cs-LC1"><span>var</span> <span>people</span> <span>=</span> <span>new</span> <span>Dictionary</span>&lt;<span>string</span>, <span>Person</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L2" data-line-number="2"></td>
        <td id="file-tuplepatterns1-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L3" data-line-number="3"></td>
        <td id="file-tuplepatterns1-cs-LC3">    [<span><span>"</span>item0<span>"</span></span>] <span>=</span> <span>new</span> <span>Person</span> {<span>Surname</span> <span>=</span> <span><span>"</span>Dylan<span>"</span></span>, <span>FirstName</span> <span>=</span> <span><span>"</span>Bob<span>"</span></span>},</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L4" data-line-number="4"></td>
        <td id="file-tuplepatterns1-cs-LC4">    [<span><span>"</span>item1<span>"</span></span>] <span>=</span> <span>new</span> <span>Person</span> {<span>FirstName</span> <span>=</span> <span><span>"</span>Jimi<span>"</span></span>, <span>Surname</span> <span>=</span> <span><span>"</span>Hendrix<span>"</span></span>}</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L5" data-line-number="5"></td>
        <td id="file-tuplepatterns1-cs-LC5">};</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L6" data-line-number="6"></td>
        <td id="file-tuplepatterns1-cs-LC6">
</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L7" data-line-number="7"></td>
        <td id="file-tuplepatterns1-cs-LC7"><span>foreach</span> (<span>var</span> <span>person</span> <span>in</span> <span>people</span>)</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L8" data-line-number="8"></td>
        <td id="file-tuplepatterns1-cs-LC8">{</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L9" data-line-number="9"></td>
        <td id="file-tuplepatterns1-cs-LC9">    <span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>{<span>person</span>.<span>Key</span>} {<span>person</span>.<span>Value</span>.<span>FirstName</span>} {<span>person</span>.<span>Value</span>.<span>Surname</span>}<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-tuplepatterns1-cs-L10" data-line-number="10"></td>
        <td id="file-tuplepatterns1-cs-LC10">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<p>With the cost efficiently of the <code>ValueTuple</code> type we can start to get creative:</p>
<div id="gist101824495">
    <div>
      <div>
        <div>
  <div id="file-tupleloop-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-tupleloop-cs-L1" data-line-number="1"></td>
        <td id="file-tupleloop-cs-LC1"><span>foreach</span> (<span>var</span> (<span>key</span>, <span>person</span>) <span>in</span> <span>people</span>)</td>
      </tr>
      <tr>
        <td id="file-tupleloop-cs-L2" data-line-number="2"></td>
        <td id="file-tupleloop-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-tupleloop-cs-L3" data-line-number="3"></td>
        <td id="file-tupleloop-cs-LC3">    <span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>{<span>key</span>} {<span>person</span>.<span>FirstName</span>} {<span>person</span>.<span>Surname</span>}<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-tupleloop-cs-L4" data-line-number="4"></td>
        <td id="file-tupleloop-cs-LC4">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<p>At this point we can go one further by adding a Deconstruct method in our <code>Person</code> class, allowing us to deconstruct the properties into a tuple:</p>
<div id="gist101824505">
    <div>
      <div>
        <div>
  <div id="file-tupleloop1-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-tupleloop1-cs-L1" data-line-number="1"></td>
        <td id="file-tupleloop1-cs-LC1"><span>public</span> <span>class</span> <span>Person</span></td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L2" data-line-number="2"></td>
        <td id="file-tupleloop1-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L3" data-line-number="3"></td>
        <td id="file-tupleloop1-cs-LC3">    ...</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L4" data-line-number="4"></td>
        <td id="file-tupleloop1-cs-LC4">    </td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L5" data-line-number="5"></td>
        <td id="file-tupleloop1-cs-LC5">    <span>public</span> <span>void</span> <span>Deconstruct</span>(<span>out</span> <span>string</span> <span>firstName</span>, <span>out</span> <span>string</span> <span>surname</span>)</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L6" data-line-number="6"></td>
        <td id="file-tupleloop1-cs-LC6">    {</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L7" data-line-number="7"></td>
        <td id="file-tupleloop1-cs-LC7">        <span>firstName</span> <span>=</span> <span>FirstName</span>;</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L8" data-line-number="8"></td>
        <td id="file-tupleloop1-cs-LC8">        <span>surname</span> <span>=</span> <span>Surname</span>;</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L9" data-line-number="9"></td>
        <td id="file-tupleloop1-cs-LC9">    }</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L10" data-line-number="10"></td>
        <td id="file-tupleloop1-cs-LC10">}</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L11" data-line-number="11"></td>
        <td id="file-tupleloop1-cs-LC11">
</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L12" data-line-number="12"></td>
        <td id="file-tupleloop1-cs-LC12">...</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L13" data-line-number="13"></td>
        <td id="file-tupleloop1-cs-LC13">
</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L14" data-line-number="14"></td>
        <td id="file-tupleloop1-cs-LC14"><span>foreach</span> (<span>var</span> (<span>key</span>, (<span>firstName</span>, <span>surname</span>)) <span>in</span> <span>people</span>)</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L15" data-line-number="15"></td>
        <td id="file-tupleloop1-cs-LC15">{</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L16" data-line-number="16"></td>
        <td id="file-tupleloop1-cs-LC16">    <span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>{<span>key</span>} {<span>firstName</span>} {<span>surname</span>}<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-tupleloop1-cs-L17" data-line-number="17"></td>
        <td id="file-tupleloop1-cs-LC17">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<h3>Benchmarking the above patterns</h3>
<p>For peace of mind, let's benchmark the aforementioned patterns with <a href="https://benchmarkdotnet.org/">BenchmarkDotNet</a> to see what impact it has:</p>
<div id="gist101824514">
    <div>
      <div>
        <div>
  <div id="file-tupleloop_benchmark-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-tupleloop_benchmark-cs-L1" data-line-number="1"></td>
        <td id="file-tupleloop_benchmark-cs-LC1">[<span>MemoryDiagnoser</span>]</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L2" data-line-number="2"></td>
        <td id="file-tupleloop_benchmark-cs-LC2"><span>public</span> <span>class</span> <span>TupleBenchmark</span></td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L3" data-line-number="3"></td>
        <td id="file-tupleloop_benchmark-cs-LC3">{</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L4" data-line-number="4"></td>
        <td id="file-tupleloop_benchmark-cs-LC4">    <span>private</span> <span>IDictionary</span>&lt;<span>string</span>, <span>Person</span>&gt; <span>_people</span>;</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L5" data-line-number="5"></td>
        <td id="file-tupleloop_benchmark-cs-LC5">    </td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L6" data-line-number="6"></td>
        <td id="file-tupleloop_benchmark-cs-LC6">    [<span>GlobalSetup</span>]</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L7" data-line-number="7"></td>
        <td id="file-tupleloop_benchmark-cs-LC7">    <span>public</span> <span>void</span> <span>Setup</span>()</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L8" data-line-number="8"></td>
        <td id="file-tupleloop_benchmark-cs-LC8">    {</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L9" data-line-number="9"></td>
        <td id="file-tupleloop_benchmark-cs-LC9">        <span>_people</span> <span>=</span> <span>new</span> <span>Dictionary</span>&lt;<span>string</span>, <span>Person</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L10" data-line-number="10"></td>
        <td id="file-tupleloop_benchmark-cs-LC10">        {</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L11" data-line-number="11"></td>
        <td id="file-tupleloop_benchmark-cs-LC11">            [<span><span>"</span>person0<span>"</span></span>] <span>=</span> <span>new</span> <span>Person</span> {<span>FirstName</span> <span>=</span> <span><span>"</span>Jimi<span>"</span></span>, <span>Surname</span> <span>=</span> <span><span>"</span>Hendrix<span>"</span></span>}</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L12" data-line-number="12"></td>
        <td id="file-tupleloop_benchmark-cs-LC12">        };</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L13" data-line-number="13"></td>
        <td id="file-tupleloop_benchmark-cs-LC13">    }</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L14" data-line-number="14"></td>
        <td id="file-tupleloop_benchmark-cs-LC14">    </td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L15" data-line-number="15"></td>
        <td id="file-tupleloop_benchmark-cs-LC15">    [<span>Benchmark</span>]</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L16" data-line-number="16"></td>
        <td id="file-tupleloop_benchmark-cs-LC16">    <span>public</span> <span>string</span> <span>List</span>()</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L17" data-line-number="17"></td>
        <td id="file-tupleloop_benchmark-cs-LC17">    {</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L18" data-line-number="18"></td>
        <td id="file-tupleloop_benchmark-cs-LC18">        <span>KeyValuePair</span>&lt;<span>string</span>, <span>Person</span>&gt; <span>person</span> <span>=</span> <span>_people</span>.<span>First</span>();</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L19" data-line-number="19"></td>
        <td id="file-tupleloop_benchmark-cs-LC19">        <span>return</span> <span><span>$"</span>{<span>person</span>.<span>Key</span>} {<span>person</span>.<span>Value</span>.<span>FirstName</span>} {<span>person</span>.<span>Value</span>.<span>Surname</span>}<span>"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L20" data-line-number="20"></td>
        <td id="file-tupleloop_benchmark-cs-LC20">    }</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L21" data-line-number="21"></td>
        <td id="file-tupleloop_benchmark-cs-LC21">
</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L22" data-line-number="22"></td>
        <td id="file-tupleloop_benchmark-cs-LC22">    [<span>Benchmark</span>]</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L23" data-line-number="23"></td>
        <td id="file-tupleloop_benchmark-cs-LC23">    <span>public</span> <span>string</span> <span>DeconstructionToTuple</span>()</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L24" data-line-number="24"></td>
        <td id="file-tupleloop_benchmark-cs-LC24">    {</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L25" data-line-number="25"></td>
        <td id="file-tupleloop_benchmark-cs-LC25">        (<span>string</span> <span>key</span>, (<span>string</span> <span>firstName</span>, <span>string</span> <span>surname</span>)) <span>=</span> <span>_people</span>.<span>First</span>();</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L26" data-line-number="26"></td>
        <td id="file-tupleloop_benchmark-cs-LC26">        <span>return</span> <span><span>$"</span>{<span>key</span>} {<span>firstName</span>} {<span>surname</span>}<span>"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L27" data-line-number="27"></td>
        <td id="file-tupleloop_benchmark-cs-LC27">    }</td>
      </tr>
      <tr>
        <td id="file-tupleloop_benchmark-cs-L28" data-line-number="28"></td>
        <td id="file-tupleloop_benchmark-cs-LC28">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<pre><code>|                Method |     Mean |   Error |  StdDev |  Gen 0 | Gen 1 | Gen 2 | Allocated |
|---------------------- |---------:|--------:|--------:|-------:|------:|------:|----------:|
|                  List | 142.9 ns | 2.92 ns | 6.17 ns | 0.0439 |     - |     - |     184 B |
| DeconstructionToTuple | 138.8 ns | 2.21 ns | 2.07 ns | 0.0439 |     - |     - |     184 B |
</code></pre>
<p>As you can see they're pretty much equal in terms of cost, with the added benefit of a more expressive syntax.</p>
<h3>Conclusion</h3>
<p>Hopefully the patterns highlighted above are as new to you as they were to me, and sparked some more interest in the utility of the <code>ValueTuple</code> type, especially when used in conjunction with <code>KeyValuePair</code> and/or the <code>Deconstruct</code> method. I can only assume we'll start to see more patterns like this emerge in time as <a href="https://github.com/dotnet/csharplang/blob/master/proposals/records.md">Record types</a> make their way into C#.</p>

        </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>