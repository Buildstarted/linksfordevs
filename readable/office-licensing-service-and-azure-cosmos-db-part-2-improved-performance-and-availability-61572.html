<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Office Licensing Service and Azure Cosmos DB part 2: Improved performance and availability - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Office Licensing Service and Azure Cosmos DB part 2: Improved performance and availability - linksfor.dev(s)"/>
    <meta property="article:author" content="Parul Matah&#xA;            Azure Cosmos DB"/>
    <meta property="og:description" content="This post is part 2 of a two-part series about how organizations use Azure Cosmos DB to meet real world needs, and the difference it&#x2019;s making to them."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://azure.microsoft.com/en-us/blog/office-licensing-service-and-azure-cosmos-db-part-2-improved-performance-and-availability/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Office Licensing Service and Azure Cosmos DB part 2: Improved performance and availability</title>
<div class="readable">
        <h1>Office Licensing Service and Azure Cosmos DB part 2: Improved performance and availability</h1>
            <div>by Parul Matah&#xA;            Azure Cosmos DB</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 12 May 2020</div>
        <p><a href="https://azure.microsoft.com/en-us/blog/office-licensing-service-and-azure-cosmos-db-part-2-improved-performance-and-availability/">https://azure.microsoft.com/en-us/blog/office-licensing-service-and-azure-cosmos-db-part-2-improved-performance-and-availability/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div lang="en">
                        <p><i>This post is part 2 of a two-part series about how organizations use Azure Cosmos DB to meet real world needs, and the difference it’s making to them. In <a href="https://azure.microsoft.com/blog/office-licensing-service-and-azure-cosmos-db-part-1-migrating-the-production-workload" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">part 1</a>, we explored the challenges that led the Microsoft Office Licensing Service team to move from Azure Table storage to Azure Cosmos DB, and how it migrated its production workload to the new service. In part 2, we examine the outcomes resulting from the team’s efforts.</i></p>

<h2>Strong benefits with minimal effort</h2>

<p>The Microsoft Office Licensing Service (OLS) team’s migration from Azure Table storage to <a href="https://azure.microsoft.com/en-us/services/cosmos-db/" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">Azure Cosmos DB</a> was simple and straightforward, enabling the team to meet all its needs with minimal effort.</p>

<h3>An easy migration</h3>

<p>In moving to Azure Cosmos DB, thanks to its Table API, the OLS team was able to reuse most of its data access code, and the migration engine they wrote to avoid any downtime was fast and easy to build.</p>

<p>Danny Cheng, a software engineer at Microsoft, who leads the OLS development team explains:</p>

<p><em>“The migration engine was the only real ‘new code’ we had to write. And the code samples for all three parts are publicly available, so it’s not like we had to start from scratch. All in all, the migration tooling we developed took three developers about four weeks each.”</em></p>

<h3>Virtually unlimited throughput</h3>

<p>Today, database throughput is no longer an issue for the OLS team. With Table storage, the team faced a throughput limit of 20,000 operations per second per storage account, which forced them to maintain each of their 18 tables in a different storage account to achieve maximum throughput. The team now maintains one Azure Cosmos DB account, which has no upper limit on throughput and can support more than 10 million operations per second per table—all <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/request-units" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">dedicated and backed by SLAs</a>.</p>

<h3>Guaranteed high availability</h3>

<p>Azure Cosmos DB gives the OLS team <a href="https://azure.microsoft.com/en-us/support/legal/sla/cosmos-db/v1_3/" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">a 99.999 percent read availability SLA for all multi-region accounts</a>. This has led to a significant increase in storage quality-of-service (QoS), as illustrated in the following metrics captured using internally developed tooling.</p>

<p><em>“During peak traffic hours, Azure Cosmos DB delivers much better storage QoS than we were seeing with Table storage,” says Cheng. “Today we’re seeing five nines, when in the past we were at about three nines.”</em></p>

<p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ec665eb0-2809-4d86-8a09-70ec17df67a5.jpg" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined"><img alt="Graph of Azure Cosmos DB health vs Azure Table storage health.  " height="333" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/18e09e81-d4de-4303-aefb-701694d996ed.jpg" title="Graph of Azure Cosmos DB health vs Azure Table storage health.  " width="1024"></a></p>

<p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e9bc7e13-21a0-4046-b9d6-a61889c500c1.jpg" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined"><img alt="Average Azure Cosmos DB health vs Azure Table storage health. " height="168" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2c066ba3-cace-4746-bba7-71f309990f71.jpg" title="Average Azure Cosmos DB health vs Azure Table storage health." width="856"></a></p>

<h3>Automatic failover</h3>

<p>The OLS team can now configure <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/high-availability" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">automatic or manual failovers</a> to help protect against the unlikely event of a regional outage, with all SLAs maintained. The team can also prioritize failover order for its multi-region accounts and can manually trigger failover to test the end-to-end availability of OLS.</p>

<p><em>“We’ve configured automatic failover, but the service is so reliable that we haven’t needed it yet,” says Cheng.</em></p>

<h3>Lower latency</h3>

<p>Table storage provided the OLS team with no upper bounds on latency. In contrast, Azure Cosmos DB provides single-digit latency for reads and writes, backed with a guarantee of &lt;10 millisecond latency for reads and writes at the 99th percentile, at any scale, anywhere in the world. The following metrics illustrate the differences in latency that the OLS service is seeing between Table storage and Azure Cosmos DB. (DbTable is Azure Table storage and CosmosDbTable is the Azure Cosmos DB Table API.)</p>

<p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7de62ddd-9918-42fc-9b94-3977b38ad87d.jpg" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined"><img alt="Difference in latency: Azure Cosmos DB versus Azure Table storage." height="247" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2e4a9658-d476-4845-aae6-ac59a0d7b2d8.jpg" title="Difference in latency: Azure Cosmos DB versus Azure Table storage." width="640"></a></p>

<h3>Turnkey data distribution</h3>

<p>With Table storage, options for global distribution were limited. What’s more, the OLS team couldn’t implement failover on its own. With Azure Cosmos DB, the team now enjoys distribution&nbsp; to any number of regions—including <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/how-to-multi-master" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">multi-master capabilities</a>, which when enabled will let any regions accept write operation.</p>

<p><em>“Just by clicking on the map, data can be automatically replicated to any Azure region in the world,” says Cheng. “This feature is very convenient, and we plan to put it to use soon.”</em></p>

<h2>Other technical benefits</h2>

<p>In addition to the above, Azure Cosmos DB provides the OLS team with some additional advantages over Table storage:</p>

<p><b>Automatic indexing.</b> With Table storage, primary indexes are limited to PartitionKey and RowKey, and there are no secondary indexes. Azure Cosmos DB provides automatic and complete indexing on all properties by default, with no index management.</p>

<p><b>Faster query times.</b> With Table storage, query execution uses the index for the primary key and scans otherwise. With Azure Cosmos DB, queries can take advantage of automatic indexing on all properties for faster query times.</p>

<p><b>Consistency.</b> With Table storage, the OLS team was limited to strong consistency within the primary region and eventual consistency within the secondary region. With Azure Cosmos DB, they can choose from <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/consistency-levels" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">well-defined consistency levels</a>, enabling them to optimize tradeoffs between read consistency and latency, availability, and throughput while they were designing the solution.</p>

<h2>Get started with Azure Cosmos DB today</h2>

<ul>
	<li>Visit <u><a href="https://azure.microsoft.com/en-us/services/cosmos-db/" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">Azure Cosmos DB</a></u>.</li>
	<li>See <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-introduction" target="_blank" data-event="page-clicked-link" data-bi-id="page-clicked-link" data-bi-area="undefined" data-bi-view="undefined">Introduction to Azure Cosmos DB Table API</a>.</li>
</ul>

                    </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>