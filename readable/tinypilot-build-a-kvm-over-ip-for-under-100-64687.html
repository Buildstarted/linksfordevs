<!DOCTYPE html>
<html lang="en">
<head>
    <title>
TinyPilot: Build a KVM Over IP for Under $100 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="TinyPilot: Build a KVM Over IP for Under $100 - linksfor.dev(s)"/>
    <meta property="article:author" content="Michael Lynch"/>
    <meta property="og:description" content="Using only a Raspberry Pi and an $11 video capture dongle, you can create your own KVM over IP device, allowing you to send keyboard input to a remote computer and capture its display."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://mtlynch.io/tinypilot/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - TinyPilot: Build a KVM Over IP for Under $100</title>
<div class="readable">
        <h1>TinyPilot: Build a KVM Over IP for Under $100</h1>
            <div>by Michael Lynch</div>
            <div>Reading time: 17-21 minutes</div>
        <div>Posted here: 23 Jul 2020</div>
        <p><a href="https://mtlynch.io/tinypilot/">https://mtlynch.io/tinypilot/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <p>TinyPilot is my inexpensive, open-source device for controlling computers remotely. It works even before the operating system boots, so I use TinyPilot to install new OSes and debug boot failures on my <a href="https://mtlynch.io/building-a-vm-homelab/">bare metal homelab servers</a>.</p>
<p>This post details my experience creating TinyPilot and shows how you can build your own for under $100 using a Raspberry Pi.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/win-ubuntu.jpg">
    <img sizes="(min-width: 768px) 800px, 98vw" srcset="
                  
                  /tinypilot/win-ubuntu_hue125486ed665e41847ca90a91bedb8e9_382227_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/win-ubuntu_hue125486ed665e41847ca90a91bedb8e9_382227_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/win-ubuntu_hue125486ed665e41847ca90a91bedb8e9_382227_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/win-ubuntu_hue125486ed665e41847ca90a91bedb8e9_382227_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/win-ubuntu.jpg 1600w" src="https://mtlynch.io/tinypilot/win-ubuntu.jpg" alt="Photo of TinyPilot connecting two computers">
  </a>



<figcaption><p>Using TinyPilot to control my Ubuntu laptop from Chrome on my Microsoft Surface</p></figcaption>
</figure>


<h2 id="i-dont-want-your-life-story-just-tell-me-how-to-build-it">I don’t want your life story; just tell me how to build it<a href="#i-dont-want-your-life-story-just-tell-me-how-to-build-it" arialabel="Anchor"> 🔗︎</a> </h2>
<p>If you’re a grinch who wants to skip my fascinating tale of triumph and despair in developing TinyPilot, jump directly to the section, <a href="#how-to-build-your-own-tinypilot">“How to Build Your Own TinyPilot."</a></p>
<h2 id="demo">Demo<a href="#demo" arialabel="Anchor"> 🔗︎</a> </h2>

<p>
  <iframe src="https://www.youtube.com/embed/IF-AyHJ8DOI" allowfullscreen="" title="YouTube Video"></iframe>
</p>

<h2 id="why-tinypilot">Why TinyPilot?<a href="#why-tinypilot" arialabel="Anchor"> 🔗︎</a> </h2>
<p>A few years ago, I built my own home server for testing software. It’s been a valuable investment, and I use it every day.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/homelab-server.jpg">
    <img sizes="(min-width: 768px) 650px, 98vw" srcset="
                  
                  /tinypilot/homelab-server_huf4489e09bc66769ad748ecb49d039df9_310452_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/homelab-server_huf4489e09bc66769ad748ecb49d039df9_310452_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/homelab-server_huf4489e09bc66769ad748ecb49d039df9_310452_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/homelab-server_huf4489e09bc66769ad748ecb49d039df9_310452_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/homelab-server.jpg 1600w" src="https://mtlynch.io/tinypilot/homelab-server.jpg" alt="Photo of my homelab VM server">
  </a>



<figcaption><p>The homelab server I built in 2017 to host my virtual machines</p></figcaption>
</figure>


<p>The server has no keyboard or monitor attached because I access it over ssh or a web interface. This is a convenient setup, but it also turns small issues into a colossal pain.</p>
<p>Every few months, I’ll screw something up and prevent the server from booting or joining the network, effectively locking me out of the machine. To get things running again, I have to disconnect everything, drag the server over to my desk, and juggle cables around to connect the server to the keyboard and monitor at my desktop.</p>
<h2 id="commercial-solutions">Commercial solutions<a href="#commercial-solutions" arialabel="Anchor"> 🔗︎</a> </h2>
<p>Friends have raved to me about their experience with iDRAC. It’s a chip in Dell servers that provides a virtual console from the moment the system powers on. I briefly considered an iDRAC for my next home server, but its hefty price tag quickly put an end to that. The license alone costs $300, and it requires expensive custom hardware.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/idrac-price.png">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/idrac-price_hub0074bac6d11c9a6cbee65b24fd186bd_138079_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/idrac-price_hub0074bac6d11c9a6cbee65b24fd186bd_138079_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/idrac-price_hub0074bac6d11c9a6cbee65b24fd186bd_138079_800x0_resize_lanczos_2.png 800w,
                
              
              
              /tinypilot/idrac-price.png 1083w" src="https://mtlynch.io/tinypilot/idrac-price.png" alt="Screenshot of $300 price for iDRAC 9 Enterprise license">
  </a>



<figcaption><p>A license for Dell’s iDRAC technology costs $300 per machine plus the cost of hardware</p></figcaption>
</figure>


<p>Next, I looked at commercial KVM over IP solutions. They provide similar functionality to Dell’s iDRAC, but they’re external devices that connect to a computer’s keyboard, video, and mouse ports (hence the name KVM). Sadly, they’re even more expensive, ranging in price from $500 to $1000 per unit.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/raritan-kvm.png">
    <img sizes="(min-width: 768px) 800px, 98vw" srcset="
                  
                  /tinypilot/raritan-kvm_hu8001e8cf9999b2ec1a0c050db8c00444_159803_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/raritan-kvm_hu8001e8cf9999b2ec1a0c050db8c00444_159803_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/raritan-kvm_hu8001e8cf9999b2ec1a0c050db8c00444_159803_800x0_resize_lanczos_2.png 800w,
                
              
              
              /tinypilot/raritan-kvm.png 1157w" src="https://mtlynch.io/tinypilot/raritan-kvm.png" alt="Screenshot of purchsase page for Raritan Dominion KVM over IP">
  </a>



<figcaption><p>Commercial KVM over IP devices cost between $500 and $1,000.</p></figcaption>
</figure>


<p>As lazy as I am about dragging servers around, I couldn’t justify spending $500 to save myself the trouble of swapping cables around a few times per year.</p>
<p>So, I did what any appropriately irrational programmer would do: spend several hundred hours building my own KVM over IP.</p>
<h2 id="building-a-kvm-over-ip-with-raspberry-pi">Building a KVM over IP with Raspberry Pi<a href="#building-a-kvm-over-ip-with-raspberry-pi" arialabel="Anchor"> 🔗︎</a> </h2>
<p>The <a href="https://www.raspberrypi.org/">Raspberry Pi</a> is a small, inexpensive single-board computer. The devices are powerful enough to run a full desktop operating system, so their $30-60 price point makes them a popular tool among hobbyists and programmers.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/pi-in-hand.jpg">
    <img sizes="(min-width: 768px) 600px, 98vw" srcset="
                  
                  /tinypilot/pi-in-hand_hu0483a5ca04256b630e295ae7d06469c0_216502_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/pi-in-hand_hu0483a5ca04256b630e295ae7d06469c0_216502_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/pi-in-hand_hu0483a5ca04256b630e295ae7d06469c0_216502_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/pi-in-hand_hu0483a5ca04256b630e295ae7d06469c0_216502_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/pi-in-hand.jpg 1600w" src="https://mtlynch.io/tinypilot/pi-in-hand.jpg" alt="Raspberry Pi in the palm of my hand">
  </a>



<figcaption><p>The Raspberry Pi is a fully-functional computer that fits on a single chip and costs only $30-60.</p></figcaption>
</figure>


<p>Recent versions of the Pi <a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/usb/README.md#overview_pi4">support USB on-the-go (USB OTG)</a>, which allows the Pi to impersonate USB devices such as keyboards, thumb drives, and microphones.</p>
<p>As a proof of concept of my Pi-as-KVM idea, I created a simple web app called <a href="https://mtlynch.io/key-mime-pi">Key Mime Pi</a>.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/key-mime-pi-interface.png">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/key-mime-pi-interface_hue6937802635af04a8025c87b4bafac50_43995_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/key-mime-pi-interface_hue6937802635af04a8025c87b4bafac50_43995_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/key-mime-pi-interface_hue6937802635af04a8025c87b4bafac50_43995_800x0_resize_lanczos_2.png 800w,
                
              
              
              /tinypilot/key-mime-pi-interface.png 1182w" src="https://mtlynch.io/tinypilot/key-mime-pi-interface.png" alt="Screenshot of Key Mime Pi web interface">
  </a>



<figcaption><p><a href="https://mtlynch.io/key-mime-pi">Key Mime Pi</a>, my early precursor to TinyPilot that only supported keyboard forwarding.</p></figcaption>
</figure>


<p>Key Mime Pi connects to another computer via USB and registers as a USB keyboard. It also presents a web page and listens for JavaScript key events. As the user types, Key Mime Pi captures the key events and translates them into keystrokes through its fake USB keyboard. This causes the keystrokes to appear on the target computer. I described this behavior in depth in <a href="https://mtlynch.io/key-mime-pi#how-it-works">my previous post</a>.</p>
<h2 id="the-challenge-of-capturing-video">The challenge of capturing video<a href="#the-challenge-of-capturing-video" arialabel="Anchor"> 🔗︎</a> </h2>
<p>Keyboard forwarding isn’t so useful if you can’t see what’s happening on the screen. My obvious next step was to find a way to capture my server’s display output in the Pi and render it in the browser.</p>
<p>My first attempt at video capture was to use the <a href="https://amzn.to/3cxrYfI">Lenkeng LKV373A HDMI extender</a>. Daniel Kučera (aka <a href="https://blog.danman.eu/">danman</a>) did an excellent job <a href="https://blog.danman.eu/new-version-of-lenkeng-hdmi-over-ip-extender-lkv373a/">reverse engineering</a> this device. It was available from Chinese merchants on eBay for around $40, so it seemed like my best option.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/lkv373a.jpg">
    <img sizes="(min-width: 768px) 600px, 98vw" srcset="
                  
                  /tinypilot/lkv373a_hu7bdbd95c9cff56e72a06bde200ec990d_291108_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/lkv373a_hu7bdbd95c9cff56e72a06bde200ec990d_291108_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/lkv373a_hu7bdbd95c9cff56e72a06bde200ec990d_291108_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/lkv373a_hu7bdbd95c9cff56e72a06bde200ec990d_291108_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/lkv373a.jpg 1600w" src="https://mtlynch.io/tinypilot/lkv373a.jpg" alt="Photo of Lenkeng LKV373A HDMI extender">
  </a>



<figcaption><p>The <a href="https://amzn.to/3cxrYfI">Lenkeng LKV373A HDMI extender</a> was my first attempt at HDMI video capture.</p></figcaption>
</figure>


<p>Capturing video was tricky because the LKV373A transmitter isn’t a video capture device. Its intended purpose is to pair with an LKV373A receiver that converts the network stream back to HDMI output. In danman’s investigation, he discovered a way to intercept and capture the video stream, but the LKV373A speaks a non-standard variant of the RTP protocol that few video tools understand.</p>
<p>Fortunately, danman <a href="https://ffmpeg.org/pipermail/ffmpeg-devel/2017-May/211607.html">contributed a patch to ffmpeg</a> that handles the LKV377A’s goofy behavior, so I was able to render the stream using ffmpeg’s video player:</p>
<div><pre><code data-lang="bash">ffplay -i udp://239.255.42.42:5004
</code></pre></div>












  





<figure>



  <a href="https://mtlynch.io/tinypilot/ffplay-screenshot.jpg">
    <img sizes="(min-width: 768px) 800px, 98vw" srcset="
                  
                  /tinypilot/ffplay-screenshot_hu5eb055ca33555da674843bfd929ec95c_529921_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/ffplay-screenshot_hu5eb055ca33555da674843bfd929ec95c_529921_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/ffplay-screenshot_hu5eb055ca33555da674843bfd929ec95c_529921_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/ffplay-screenshot_hu5eb055ca33555da674843bfd929ec95c_529921_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/ffplay-screenshot.jpg 3440w" src="https://mtlynch.io/tinypilot/ffplay-screenshot.jpg" alt="Screenshot of ffplay rendering video stream from LKV373A">
  </a>



<figcaption><p>Rendering the video stream from the LKV373A with ffplay</p></figcaption>
</figure>


<p>It was here that I received my first taste of a problem that dogged me throughout the project: latency. There was almost a one-second delay between the target computer and the video playback on my desktop.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/lkv373a-latency.jpg">
    <img sizes="(min-width: 768px) 600px, 98vw" srcset="
                  
                  /tinypilot/lkv373a-latency_huf5a4b8b025a27a03ab14dd8d1e51a39b_331792_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/lkv373a-latency_huf5a4b8b025a27a03ab14dd8d1e51a39b_331792_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/lkv373a-latency_huf5a4b8b025a27a03ab14dd8d1e51a39b_331792_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/lkv373a-latency_huf5a4b8b025a27a03ab14dd8d1e51a39b_331792_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/lkv373a-latency.jpg 1600w" src="https://mtlynch.io/tinypilot/lkv373a-latency.jpg" alt="Photo of Lenkeng LKV373A HDMI extender">
  </a>



<figcaption><p>The LKV373A introduced 838 milliseconds of latency before any re-encoding.</p></figcaption>
</figure>


<p>I tried playing around with ffplay’s many command-line flags to speed up the stream, but I never pushed past 800 milliseconds. And that was on my desktop with its high-end GPU and CPU. It didn’t bode well performance-wise for my scrappy little Raspberry Pi.</p>
<p>Fortunately, I found a better solution by complete coincidence.</p>
<h3 id="hdmi-to-usb-dongle">HDMI to USB dongle<a href="#hdmi-to-usb-dongle" arialabel="Anchor"> 🔗︎</a> </h3>
<p>While mindlessly scrolling through Twitter, I happened to see <a href="https://twitter.com/Ascii211/status/1268631069051453448">a tweet by Arsenio Dev</a> about a <a href="https://amzn.to/2YHEvJN">low-cost HDMI to USB dongle</a> he had just purchased:</p>

















<figure>



  <a href="https://twitter.com/Ascii211/status/1268631069051453448">
    <img sizes="(min-width: 768px) 616px, 98vw" srcset="
                  
                  /tinypilot/arsenio-dev-tweet_hu499339bd55545c29bd8367483d3c0c99_54968_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/arsenio-dev-tweet_hu499339bd55545c29bd8367483d3c0c99_54968_600x0_resize_q90_lanczos.jpg 600w,
                
              
              
              
              /tinypilot/arsenio-dev-tweet.jpg 616w" src="https://mtlynch.io/tinypilot/arsenio-dev-tweet.jpg" alt="Screenshot of Rufus">
  </a>



<figcaption><p>A <a href="https://twitter.com/Ascii211/status/1268631069051453448">tweet from Arsenio Dev</a> tipped me off to a better video capture solution.</p></figcaption>
</figure>


<p>Capturing video at 1080p resolution and 30 frames per second seemed a little too good to be true, so I ordered one from eBay. It was only $11, including shipping. I don’t even know what you call it — it has no brand name, so I’ll just call it “the HDMI dongle.”</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/hdmi-ebay.png">
    <img sizes="(min-width: 768px) 750px, 98vw" srcset="
                  
                  /tinypilot/hdmi-ebay_huce81604e6792c704ab8bfc601ce05ff2_308459_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/hdmi-ebay_huce81604e6792c704ab8bfc601ce05ff2_308459_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/hdmi-ebay_huce81604e6792c704ab8bfc601ce05ff2_308459_800x0_resize_lanczos_2.png 800w,
                
              
                  
                  /tinypilot/hdmi-ebay_huce81604e6792c704ab8bfc601ce05ff2_308459_1200x0_resize_lanczos_2.png 1200w,
                
              
              /tinypilot/hdmi-ebay.png 1497w" src="https://mtlynch.io/tinypilot/hdmi-ebay.png" alt="Screenshot of HDMI for sale on eBay for $11.20">
  </a>



<figcaption><p>HDMI to USB dongle available on eBay for $11.20 with free shipping</p></figcaption>
</figure>


<p>When the device arrived a few days later, it blew me away. Without any tinkering, it showed up as a UVC video capture device as soon as I plugged it in to the Raspberry Pi.</p>
<div><pre><code data-lang="bash">$ sudo v4l2-ctl --list-devices
bcm2835-codec-decode (platform:bcm2835-codec):
        /dev/video10
        /dev/video11
        /dev/video12

<span>UVC Camera (534d:2109): USB Vid (usb-0000:01:00.0-1.4): &lt;&lt;&lt; HDMI capture dongle
</span><span>        /dev/video0
</span><span>        /dev/video1
</span></code></pre></div><p>Within minutes, I was able to capture and restream HDMI video:</p>
<div><pre><code data-lang="bash"><span># On the Pi</span>
ffmpeg <span>
</span><span></span>  -re <span>
</span><span></span>  -f v4l2 <span>
</span><span></span>  -i /dev/video0 <span>
</span><span></span>  -vcodec libx264 <span>
</span><span></span>  -f mpegts udp://10.0.0.100:1234/stream

<span># On my Windows desktop</span>
ffplay.exe -i udp://@10.0.0.100:1234/stream
</code></pre></div><p>It was so darn convenient, too. The LKV373A was nearly brick-sized and required its own power source and Ethernet cable. The HDMI dongle was as small as a thumb drive and required nothing more than a USB port.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/lkv373a-vs-dongle.jpg">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/lkv373a-vs-dongle_hu40e2cccf1bcf5bf83b5779b019db630b_378411_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/lkv373a-vs-dongle_hu40e2cccf1bcf5bf83b5779b019db630b_378411_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/lkv373a-vs-dongle_hu40e2cccf1bcf5bf83b5779b019db630b_378411_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/lkv373a-vs-dongle_hu40e2cccf1bcf5bf83b5779b019db630b_378411_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/lkv373a-vs-dongle.jpg 1600w" src="https://mtlynch.io/tinypilot/lkv373a-vs-dongle.jpg" alt="Comparison of Lenkeng LKV373A with HDMI dongle">
  </a>



<figcaption><p>The <a href="https://amzn.to/3cxrYfI">Lenkeng LKV373A HDMI extender</a> (left) was larger and required more connections than the <a href="https://amzn.to/2YHEvJN">HDMI dongle</a> (right).</p></figcaption>
</figure>


<p>The only problem was, again, latency. The Pi’s rebroadcast of the video stream lagged the source computer by 7-10 seconds.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/dongle-ffmpeg.jpg">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/dongle-ffmpeg_hu2d9fdf379e1fcab8f739763e819f36ad_380166_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/dongle-ffmpeg_hu2d9fdf379e1fcab8f739763e819f36ad_380166_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/dongle-ffmpeg_hu2d9fdf379e1fcab8f739763e819f36ad_380166_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/dongle-ffmpeg_hu2d9fdf379e1fcab8f739763e819f36ad_380166_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/dongle-ffmpeg.jpg 1600w" src="https://mtlynch.io/tinypilot/dongle-ffmpeg.jpg" alt="Comparison of Lenkeng LKV373A with HDMI dongle">
  </a>



<figcaption><p>Using ffmpeg to stream video from my Pi, there was a delay in the video of up to 10 seconds.</p></figcaption>
</figure>


<p>I wasn’t sure if this delay came from dongle itself, ffmpeg on the Pi, or ffplay on my desktop. Arsenio Dev reported latency of 20 ms, so it seemed like faster performance was possible if I delved into <a href="https://ffmpeg.org/ffmpeg.html">ffmpeg’s arcane and mysterious command-line flags</a>.</p>
<p>Another stroke of luck spared me from that miserable task.</p>
<h3 id="borrowing-from-a-similar-project">Borrowing from a similar project<a href="#borrowing-from-a-similar-project" arialabel="Anchor"> 🔗︎</a> </h3>
<p>When I published <a href="https://mtlynch.io/key-mime-pi/">my previous blog post</a> about Key Mime Pi, I received a comment from Max Devaev, who encouraged me to check out his project, <a href="https://github.com/pikvm/pikvm">Pi-KVM</a>.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/maxim-comment.png">
    <img sizes="(min-width: 768px) 866px, 98vw" srcset="
                  
                  /tinypilot/maxim-comment_hu7ed47b6628c35c72e3d6c0d6ee97ad4c_11588_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/maxim-comment_hu7ed47b6628c35c72e3d6c0d6ee97ad4c_11588_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/maxim-comment_hu7ed47b6628c35c72e3d6c0d6ee97ad4c_11588_800x0_resize_lanczos_2.png 800w,
                
              
              
              /tinypilot/maxim-comment.png 864w" src="https://mtlynch.io/tinypilot/maxim-comment.png" alt="Max's comment: Hi:) Take a look at this project: https://github.com/pikvm/pikvm We have already done and debugged many things">
  </a>



<figcaption><p>Max Devaev pointed me to his existing <a href="https://github.com/pikvm/pikvm">Pi-KVM</a> project.</p></figcaption>
</figure>















  





<figure>



  <a href="https://mtlynch.io/tinypilot/melty-breadboard.jpg">
    <img sizes="(min-width: 768px) 500px, 98vw" srcset="
                  
                  /tinypilot/melty-breadboard_hufdcb201116af6aa52123409c8ff59968_163861_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/melty-breadboard_hufdcb201116af6aa52123409c8ff59968_163861_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/melty-breadboard_hufdcb201116af6aa52123409c8ff59968_163861_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/melty-breadboard_hufdcb201116af6aa52123409c8ff59968_163861_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/melty-breadboard.jpg 2048w" src="https://mtlynch.io/tinypilot/melty-breadboard.jpg" alt="GPIO pins">
  </a>



<figcaption><p>My previous experience with breadboards involved <a href="https://mtlynch.io/greenpithumb/#why-make-another-raspberry-pi-gardening-bot">accidentally melting them</a>.</p></figcaption>
</figure>


<p>I had looked at Pi-KVM briefly, but its <a href="https://github.com/pikvm/pikvm#v2-diagram">requirements of breadboards and soldering</a> scared me off.</p>
<p>At Max’s suggestion, I gave Pi-KVM a second look, particularly interested in how he solved the video latency issue. I noticed that he captured video through a tool called <a href="https://github.com/pikvm/ustreamer">uStreamer</a>.</p>
<p><strong>Note</strong>: From further discussions with Max, I’ve learned that Pi-KVM does support builds without soldering or breadboards.
</p>

<h3 id="ustreamer-a-super-fast-video-streamer">uStreamer: a super-fast video streamer<a href="#ustreamer-a-super-fast-video-streamer" arialabel="Anchor"> 🔗︎</a> </h3>
<p>Have you ever found a tool that’s so good, it solves problems you hadn’t even anticipated?</p>
<p>Right out of the box, uStreamer reduced my latency from 8 seconds to 500-600 milliseconds. But it also eliminated a whole chain of extra work.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/ustreamer-1.jpg">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/ustreamer-1_hu286e60bb77a45e22c551ff98fbfa7c15_387842_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/ustreamer-1_hu286e60bb77a45e22c551ff98fbfa7c15_387842_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/ustreamer-1_hu286e60bb77a45e22c551ff98fbfa7c15_387842_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/ustreamer-1_hu286e60bb77a45e22c551ff98fbfa7c15_387842_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/ustreamer-1.jpg 1600w" src="https://mtlynch.io/tinypilot/ustreamer-1.jpg" alt="500 ms latency with uStreamer and the HDMI dongle">
  </a>



<figcaption><p>uStreamer reduced my latency by a factor of 15.</p></figcaption>
</figure>


<p>Prior to uStreamer, I wasn’t sure how to get video from ffmpeg into the user’s browser, but I knew it was possible somehow. I tested this <a href="https://docs.peer5.com/guides/setting-up-hls-live-streaming-server-using-nginx/">mostly-accurate tutorial</a> for piping video from ffmpeg to nginx using HLS, but it added even more latency. And it still left open problems like how to start and stop streaming on HDMI cable connects and disconnects and how to translate the video to a browser-friendly format.</p>
<p>uStreamer solved all of this. It ran its own minimal HTTP server that served video in <a href="https://en.wikipedia.org/wiki/Motion_JPEG">Motion JPEG</a>, a format browsers play natively. I didn’t have to bother with HLS streams or getting ffmpeg and nginx to talk to each other.</p>
<p>The tool was so fully-featured that I assumed Max simply forked it from a more mature project, but I was mistaken. This maniac <a href="https://github.com/pikvm/ustreamer">wrote his own video encoder</a> in C just to squeeze the maximum performance out of Pi hardware. I quickly <a href="https://www.paypal.me/mdevaev">donated to Max</a> and invite anyone who uses his software to do the same.</p>
<h2 id="improving-video-latency">Improving video latency<a href="#improving-video-latency" arialabel="Anchor"> 🔗︎</a> </h2>
<p>uStreamer reduced my latency from 10 seconds down to ~600 milliseconds. That was a huge leap forward but still a noticeable delay. I told Max I was interested in funding uStreamer further if he could find ways to improve performance, so we got to chatting.</p>
<p>Max was interested in the HDMI dongle I was using since he’d never seen that particular device. He invited me to create a shared shell session using <a href="https://tmate.io/">tmate</a> so that he could access my Pi remotely.</p>

















<figure>



  <a href="https://mtlynch.io/tinypilot/maxim-tmate.png">
    <img sizes="(min-width: 768px) 680px, 98vw" srcset="
                  
                  /tinypilot/maxim-tmate_huba1b6ea293c591400729591f9f171db9_61377_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/maxim-tmate_huba1b6ea293c591400729591f9f171db9_61377_600x0_resize_lanczos_2.png 600w,
                
              
              
              
              /tinypilot/maxim-tmate.png 680w" src="https://mtlynch.io/tinypilot/maxim-tmate.png" alt="Screenshot of conversation where Max ofers to help me via tmate">
  </a>



<figcaption><p>Max offered to either help improve latency or frame me for a federal crime. Fortunately, he ended up doing the former.</p></figcaption>
</figure>


<p>After a few minutes of testing how uStreamer ran on my hardware, Max ran the <a href="https://www.mankier.com/1/v4l2-ctl"><code>v4l2-ctl</code> utility</a> and saw a line that fascinated him but totally went over my head:</p>
<div><pre><code data-lang="bash">$ sudo v4l2-ctl --all
Driver Info:
        Driver name      : uvcvideo
        Card <span>type</span>        : UVC Camera (534d:2109): USB Vid
...
Format Video Capture:
        Width/Height      : 1280/720
<span>        Pixel Format      : <span>'MJPG'</span> (Motion-JPEG)
</span>...
Streaming Parameters Video Capture:
        Capabilities     : timeperframe
        Frames per second: 30.000 (30/1)
</code></pre></div><p>The HDMI dongle was delivering the video stream in Motion JPEG format! uStreamer’s hardware-assisted encoding was fast, but it was totally unnecessary, as modern browsers play Motion JPEG natively.</p>
<p>We configured uStreamer to skip re-encoding and just pass through the video stream as-is.</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/tinypilot-latency.jpg">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/tinypilot-latency_huef12f71288690234720a7c079f2234e1_250026_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/tinypilot-latency_huef12f71288690234720a7c079f2234e1_250026_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/tinypilot-latency_huef12f71288690234720a7c079f2234e1_250026_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/tinypilot-latency_huef12f71288690234720a7c079f2234e1_250026_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/tinypilot-latency.jpg 1600w" src="https://mtlynch.io/tinypilot/tinypilot-latency.jpg" alt="Photo showing 200ms of latency after eliminating re-encode step">
  </a>



<figcaption><p>Skipping the extra re-encode step on the Pi reduced latency from 600 ms down to 200 ms.</p></figcaption>
</figure>


<p>Latency went from 600 milliseconds all the way down to 200 ms. It’s not instantaneous, but it’s low enough to forget the delay after using it for a few minutes.</p>
<h2 id="tinypilot-in-action">TinyPilot in action<a href="#tinypilot-in-action" arialabel="Anchor"> 🔗︎</a> </h2>
<p>Remember way back at the beginning of this post when I said I wanted TinyPilot so that I could access my headless VM server before it boots? Well, it works and I do!</p>
<p>I iterated on Key Mime Pi to make a new web interface that integrates the video capture functionality:</p>
<p><img src="https://mtlynch.io/tinypilot/tinypilot-bios.gif"></p><p>I built a new headless VM server this year and used TinyPilot to install <a href="https://www.proxmox.com/en/">Proxmox</a>, an open-source hypervisor and web interface for managing VMs.</p>
<p>TinyPilot allowed me to manage the entire install from my browser. It was definitely more pleasant than my old process of dragging computers around and swapping cables back and forth.</p>
<h2 id="how-to-build-your-own-tinypilot">How to build your own TinyPilot<a href="#how-to-build-your-own-tinypilot" arialabel="Anchor"> 🔗︎</a> </h2>
<h3 id="parts-list">Parts list<a href="#parts-list" arialabel="Anchor"> 🔗︎</a> </h3>
<div>
<h4>Want an all-in-one TinyPilot kit?</h4>
<p>Support TinyPilot’s development by purchasing <a href="https://tinypilotkvm.com/">an official TinyPilot kit</a>. It includes all the parts you need to build TinyPilot and guarantees access to premium versions of TinyPilot software I may release in the future.</p>

</div>
<ul>
<li><a href="https://amzn.to/3fdarLM">Raspberry Pi 4</a> (all variants work)</li>
<li><a href="https://www.amazon.com/AmazonBasics-Type-C-USB-Male-Cable/dp/B01GGKYN0A/" data-amzn-asin="B01GGKYN0A">USB-C to USB-A cable</a> (Male/Male)</li>
<li><a href="https://amzn.to/2YHEvJN">HDMI to USB capture dongle</a>
<ul>
<li>Strangely, these don’t have a brand name, but you can recognize them <a href="https://mtlynch.io/tinypilot/hdmi-dongle.jpg">by their appearance</a>.</li>
<li>They’re generally available on eBay for $11-15.</li>
</ul>
</li>
<li><a href="https://amzn.to/2VH0RcL">microSD card</a> (Class 10, 8 GB or larger)</li>
<li><a href="https://amzn.to/3gnlZwj">HDMI to HDMI cable</a>
<ul>
<li>Or [other] to HDMI, depending on how your target machine displays output.</li>
</ul>
</li>
<li>(Optional) <a href="https://amzn.to/3cVkuTT">USB to TTL serial cable</a></li>
<li>(Optional) <a href="https://amzn.to/3hal8Ax">3 Amp USB wall charger</a></li>
<li>(Optional) A cooling case, heat sink, or fan
<ul>
<li>Choose a case that provides access to the Pi’s GPIO pins.</li>
<li>I use <a href="https://amzn.to/3fG1fAa">this minimalist, passive cooling case</a>.</li>
</ul>
</li>
</ul>
<h3 id="install-raspberry-pi-os-lite">Install Raspberry Pi OS Lite<a href="#install-raspberry-pi-os-lite" arialabel="Anchor"> 🔗︎</a> </h3>
<p>To begin, install <a href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS lite</a> (formerly known as Raspbian) on a microSD card.</p>

















<figure>



  <a href="https://mtlynch.io/tinypilot/rufus-install.png">
    <img sizes="(min-width: 768px) 418px, 98vw" srcset="
                  
                  /tinypilot/rufus-install_hu60172022de5ac1ffb7eb3c0c69f994fa_21143_300x0_resize_lanczos_2.png 300w,
                
              
              
              
              
              /tinypilot/rufus-install.png 418w" src="https://mtlynch.io/tinypilot/rufus-install.png" alt="Screenshot of Rufus">
  </a>



<figcaption><p>I use <a href="https://rufus.ie/">Rufus</a> to write my Pi micro SD cards, but any whole disk imaging tool will work.</p></figcaption>
</figure>


<p>Enable SSH access by placing a file called <code>ssh</code> on the microSD’s boot partition. If you’re connecting over wireless, you also need a <a href="https://www.raspberrypi.org/documentation/configuration/wireless/headless.md"><code>wpa_supplicant.conf</code> file</a>.</p>
<p>When you finish preparing the microSD card, insert it into your Pi device.</p>
<h3 id="install-a-case-optional">Install a case (optional)<a href="#install-a-case-optional" arialabel="Anchor"> 🔗︎</a> </h3>
<p>The Raspberry Pi 4 famously <a href="https://www.jeffgeerling.com/blog/2019/best-way-keep-your-cool-running-raspberry-pi-4">generates a lot of heat</a>. You can run it fine without cooling, but you’ll likely hit stability issues over time.</p>
<p>I like <a href="https://amzn.to/3fG1fAa">this minimalist case</a> because it’s inexpensive and passively cools the Pi without the complexity of a powered fan:</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/minimal-case.jpg">
    <img sizes="(min-width: 768px) 600px, 98vw" srcset="
                  
                  /tinypilot/minimal-case_hua438df68fef1fc84d4b0d3ae06841464_270100_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/minimal-case_hua438df68fef1fc84d4b0d3ae06841464_270100_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/minimal-case_hua438df68fef1fc84d4b0d3ae06841464_270100_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/minimal-case_hua438df68fef1fc84d4b0d3ae06841464_270100_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/minimal-case.jpg 1600w" src="https://mtlynch.io/tinypilot/minimal-case.jpg" alt="Minimal aluminum case for Raspberry Pi">
  </a>



<figcaption><p>This <a href="https://amzn.to/3fG1fAa">minimalist aluminum case</a> cools your Pi well without the complexity of a fan.</p></figcaption>
</figure>


<h3 id="power-your-pi-via-gpio-optional">Power your Pi via GPIO (optional)<a href="#power-your-pi-via-gpio-optional" arialabel="Anchor"> 🔗︎</a> </h3>
<p>The Pi draws enough power from the  target computer’s USB port to boot up and run, but it needs 3 Amps of power for stable operation. A computer’s USB port outputs <a href="https://mtlynch.io/key-mime-pi/#solving-the-power-problem">less than 1 Amp</a>.</p>
<p>To give the Pi enough power, use a <a href="https://amzn.to/2YitxsN">3 Amp USB wall charger</a> and a <a href="https://amzn.to/2Yk1CIX">USB to TTL serial cable</a>. The USB to TTL cable plugs into the Pi’s outer row of GPIO pins just before the end of the row:</p>


<figure>
  <div>
    
  












  





<p><a href="https://mtlynch.io/tinypilot/power-pins-top.jpg">
    <img sizes="(min-width: 768px) 400px, 98vw" srcset="
                  
                  /tinypilot/power-pins-top_hu39bc30211357fb690bc1490b346c430d_3575630_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/power-pins-top_hu39bc30211357fb690bc1490b346c430d_3575630_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/power-pins-top_hu39bc30211357fb690bc1490b346c430d_3575630_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/power-pins-top_hu39bc30211357fb690bc1490b346c430d_3575630_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/power-pins-top.jpg 4032w" src="https://mtlynch.io/tinypilot/power-pins-top.jpg" alt="Top view of USB to TTL connection">
  </a>



</p>


  












  





<p><a href="https://mtlynch.io/tinypilot/power-pins-side.jpg">
    <img sizes="(min-width: 768px) 400px, 98vw" srcset="
                  
                  /tinypilot/power-pins-side_huf8249863b16f70c021f1c1e4691f42e3_1395781_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/power-pins-side_huf8249863b16f70c021f1c1e4691f42e3_1395781_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/power-pins-side_huf8249863b16f70c021f1c1e4691f42e3_1395781_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/power-pins-side_huf8249863b16f70c021f1c1e4691f42e3_1395781_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/power-pins-side.jpg 3375w" src="https://mtlynch.io/tinypilot/power-pins-side.jpg" alt="Side view of USB to TTL connection">
  </a>



</p>



  </div>
  <figcaption><p>To power the Pi, connect a <a href="https://amzn.to/3cVkuTT">USB to TTL cable</a> to the power pins on the GPIO.</p></figcaption>
</figure>

<p>To power on your Pi, plug the wall charger into an outlet, and connect the USB-A end of your power cable to the AC adaptor:</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/ac-adaptor.jpg">
    <img sizes="(min-width: 768px) 600px, 98vw" srcset="
                  
                  /tinypilot/ac-adaptor_hub9466dffa9e705ade24803d5ec45ccc4_636076_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/ac-adaptor_hub9466dffa9e705ade24803d5ec45ccc4_636076_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/ac-adaptor_hub9466dffa9e705ade24803d5ec45ccc4_636076_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/ac-adaptor_hub9466dffa9e705ade24803d5ec45ccc4_636076_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/ac-adaptor.jpg 1600w" src="https://mtlynch.io/tinypilot/ac-adaptor.jpg" alt="Photo of USB cable plugged into AC adaptor">
  </a>



<figcaption><p>Power the Pi by connecting the USB to TTL cable to a 3 Amp AC adaptor.</p></figcaption>
</figure>


<h3 id="connect-to-the-machine-via-usb">Connect to the machine via USB<a href="#connect-to-the-machine-via-usb" arialabel="Anchor"> 🔗︎</a> </h3>
<p>To enable TinyPilot to function as a virtual keyboard, connect your Pi’s USB-C port to a USB-A port on the target machine:</p>


<figure>
  <div>
    
  












  





<p><a href="https://mtlynch.io/tinypilot/usb-cable.jpg">
    <img sizes="(min-width: 768px) 500px, 98vw" srcset="
                  
                  /tinypilot/usb-cable_hu4863da9f6072b464c16d91f69f10096d_1990331_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/usb-cable_hu4863da9f6072b464c16d91f69f10096d_1990331_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/usb-cable_hu4863da9f6072b464c16d91f69f10096d_1990331_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/usb-cable_hu4863da9f6072b464c16d91f69f10096d_1990331_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/usb-cable.jpg 4032w" src="https://mtlynch.io/tinypilot/usb-cable.jpg" alt="USB connection to Raspberry Pi">
  </a>



</p>


  












  





<p><a href="https://mtlynch.io/tinypilot/usb-server.jpg">
    <img sizes="(min-width: 768px) 500px, 98vw" srcset="
                  
                  /tinypilot/usb-server_hu6ab11ea439ee0e109dc59366ab4f75aa_1453972_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/usb-server_hu6ab11ea439ee0e109dc59366ab4f75aa_1453972_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/usb-server_hu6ab11ea439ee0e109dc59366ab4f75aa_1453972_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/usb-server_hu6ab11ea439ee0e109dc59366ab4f75aa_1453972_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/usb-server.jpg 3024w" src="https://mtlynch.io/tinypilot/usb-server.jpg" alt="USB connection to target computer">
  </a>



</p>



  </div>
  <figcaption><p>With a USB-C to USB-A cable, connect the USB-C end to the Pi’s USB-C port and the USB-A end to the target computer.</p></figcaption>
</figure>

<h3 id="attach-the-hdmi-capture-dongle">Attach the HDMI capture dongle<a href="#attach-the-hdmi-capture-dongle" arialabel="Anchor"> 🔗︎</a> </h3>
<p>To complete the physical assembly, insert the HDMI dongle into one of the Pi’s USB ports. Then, connect an HDMI cable to the dongle, and plug the other end into the display output of your target computer.</p>


<figure>
  <div>
    
  












  





<p><a href="https://mtlynch.io/tinypilot/hdmi-insert.jpg">
    <img sizes="(min-width: 768px) 500px, 98vw" srcset="
                  
                  /tinypilot/hdmi-insert_hu76267895028deaf8b7b81c0562d53f3e_277334_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/hdmi-insert_hu76267895028deaf8b7b81c0562d53f3e_277334_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/hdmi-insert_hu76267895028deaf8b7b81c0562d53f3e_277334_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/hdmi-insert_hu76267895028deaf8b7b81c0562d53f3e_277334_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/hdmi-insert.jpg 1600w" src="https://mtlynch.io/tinypilot/hdmi-insert.jpg" alt="HDMI input connection to Raspberry Pi">
  </a>



</p>


  












  





<p><a href="https://mtlynch.io/tinypilot/hdmi-server.jpg">
    <img sizes="(min-width: 768px) 500px, 98vw" srcset="
                  
                  /tinypilot/hdmi-server_hu741b3e39f48a88d45fdb7f208c154364_328768_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/hdmi-server_hu741b3e39f48a88d45fdb7f208c154364_328768_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/hdmi-server_hu741b3e39f48a88d45fdb7f208c154364_328768_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/hdmi-server_hu741b3e39f48a88d45fdb7f208c154364_328768_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/hdmi-server.jpg 1600w" src="https://mtlynch.io/tinypilot/hdmi-server.jpg" alt="HDMI output connection from target computer">
  </a>



</p>



  </div>
  <figcaption><p>Connect the display output of the target computer to the HDMI dongle and insert it into the Pi’s USB port.</p></figcaption>
</figure>

<p><strong>Note</strong>: If the computer you’re connecting to has no HDMI output, you should be able to use a <a href="https://amzn.to/2Oy2Con">DisplayPort to HDMI cable</a> or a <a href="https://amzn.to/2WyWrFg">DVI to HDMI cable</a>, though I haven’t tested these personally.
</p>

<h3 id="connect-an-ethernet-cable-optional">Connect an Ethernet cable (optional)<a href="#connect-an-ethernet-cable-optional" arialabel="Anchor"> 🔗︎</a> </h3>
<p>If you’re connecting to your Pi over wired LAN, attach a network cable to your Pi’s Ethernet port:</p>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/ethernet-cable.jpg">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/ethernet-cable_hub4210f958186ca9fda68c0ecab9a1559_987319_300x0_resize_q90_lanczos.jpg 300w,
                
              
                  
                  /tinypilot/ethernet-cable_hub4210f958186ca9fda68c0ecab9a1559_987319_600x0_resize_q90_lanczos.jpg 600w,
                
              
                  
                  /tinypilot/ethernet-cable_hub4210f958186ca9fda68c0ecab9a1559_987319_800x0_resize_q90_lanczos.jpg 800w,
                
              
                  
                  /tinypilot/ethernet-cable_hub4210f958186ca9fda68c0ecab9a1559_987319_1200x0_resize_q90_lanczos.jpg 1200w,
                
              
              /tinypilot/ethernet-cable.jpg 3000w" src="https://mtlynch.io/tinypilot/ethernet-cable.jpg" alt="Photo of Ethernet cable connected to Pi device">
  </a>



<figcaption><p>Connect an Ethernet cable to your Pi.</p></figcaption>
</figure>


<h3 id="install-the-tinypilot-software">Install the TinyPilot software<a href="#install-the-tinypilot-software" arialabel="Anchor"> 🔗︎</a> </h3>
<p>SSH into your Pi device (default credentials for Raspberry Pi OS are <code>pi</code> / <code>raspberry</code>), and run the following commands:</p>
<div><pre><code data-lang="bash">curl -sS https://raw.githubusercontent.com/mtlynch/tinypilot/master/quick-install <span>
</span><span></span>  | bash -
sudo reboot
</code></pre></div><p>If you’re appropriately suspicious of piping a random web script into your shell, I encourage you to inspect <a href="https://github.com/mtlynch/tinypilot/blob/master/quick-install">the source</a>.</p>
<p>The script bootstraps a self-contained <a href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a> environment with my <a href="https://github.com/mtlynch/ansible-role-tinypilot">TinyPilot Ansible role</a>. It installs four services that run on every boot:</p>
<ul>
<li><a href="https://nginx.org/">nginx</a>: a popular open-source web server</li>
<li><a href="https://github.com/pikvm/ustreamer">ustreamer</a>: a lightweight HTTP video streaming server</li>
<li><a href="https://github.com/mtlynch/tinypilot/blob/master/enable-usb-hid">usb-gadget</a>: a script enabling Pi’s “USB gadget mode,” which allows the Pi to impersonate USB devices</li>
<li><a href="https://github.com/mtlynch/tinypilot">tinypilot</a>: the web interface I created for TinyPilot</li>
</ul>
<h2 id="using-tinypilot">Using TinyPilot<a href="#using-tinypilot" arialabel="Anchor"> 🔗︎</a> </h2>
<p>After you run the install script, TinyPilot will be available at:</p>
<ul>
<li><a href="http://raspberrypi/">http://raspberrypi/</a></li>
</ul>













  





<figure>



  <a href="https://mtlynch.io/tinypilot/tinypilot-hello-world.png">
    <img sizes="(min-width: 768px) 700px, 98vw" srcset="
                  
                  /tinypilot/tinypilot-hello-world_huf6287690c831d8d6627dbf385b91ea43_161094_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/tinypilot-hello-world_huf6287690c831d8d6627dbf385b91ea43_161094_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/tinypilot-hello-world_huf6287690c831d8d6627dbf385b91ea43_161094_800x0_resize_lanczos_2.png 800w,
                
              
                  
                  /tinypilot/tinypilot-hello-world_huf6287690c831d8d6627dbf385b91ea43_161094_1200x0_resize_lanczos_2.png 1200w,
                
              
              /tinypilot/tinypilot-hello-world.png 1541w" src="https://mtlynch.io/tinypilot/tinypilot-hello-world.png" alt="Screenshot of TinyPilot web interface">
  </a>



<figcaption><p>When setup is complete, you can access TinyPilot’s web interface at <a href="http://raspberrypi/">http://raspberrypi/</a> on your local network.</p></figcaption>
</figure>


<h2 id="tinypilot-kits">TinyPilot kits<a href="#tinypilot-kits" arialabel="Anchor"> 🔗︎</a> </h2>
<p>If you’d like to support further development of this software, consider <a href="https://paypal.me/mtlynchio">donating</a> or <a href="https://tinypilotkvm.com/">purchasing a TinyPilot kit</a>. Kits include all the equipment you need to build your own TinyPilot. It comes with a preformatted microSD card, so you don’t need to configure any software.</p>













  





<figure>



  <a href="https://tinypilotkvm.com/order">
    <img sizes="(min-width: 768px) 1332px, 98vw" srcset="
                  
                  /tinypilot/tinypilot-order_hu11a896c37dfa31cdd2c751bc9dc7db7e_45447_300x0_resize_lanczos_2.png 300w,
                
              
                  
                  /tinypilot/tinypilot-order_hu11a896c37dfa31cdd2c751bc9dc7db7e_45447_600x0_resize_lanczos_2.png 600w,
                
              
                  
                  /tinypilot/tinypilot-order_hu11a896c37dfa31cdd2c751bc9dc7db7e_45447_800x0_resize_lanczos_2.png 800w,
                
              
                  
                  /tinypilot/tinypilot-order_hu11a896c37dfa31cdd2c751bc9dc7db7e_45447_1200x0_resize_lanczos_2.png 1200w,
                
              
              /tinypilot/tinypilot-order.png 1330w" src="https://mtlynch.io/tinypilot/tinypilot-order.png" alt="Screenshot of TinyPilot order page">
  </a>



<figcaption><p>Purchasing a <a href="https://tinypilotkvm.com/order">TinyPilot kit</a> supports future development of TinyPilot and guarantees you access to premium features I may add in the future.</p></figcaption>
</figure>


<h2 id="source-code">Source code<a href="#source-code" arialabel="Anchor"> 🔗︎</a> </h2>
<p>All TinyPilot software is open-source under the permissive <a href="https://opensource.org/licenses/MIT">MIT license</a>:</p>
<ul>
<li><a href="https://github.com/mtlynch/tinypilot.git">tinypilot</a>: The TinyPilot web interface and backend.</li>
<li><a href="https://github.com/mtlynch/ansible-role-tinypilot">ansible-role-tinypilot</a>: The Ansible role for installing TinyPilot and its dependencies as systemd services.</li>
</ul>
<hr>
<p><em>Special thanks to Max Devaev for his incredible work on <a href="https://github.com/pikvm/ustreamer">uStreamer</a> and his contributions to TinyPilot.</em></p>

      </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>