<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Using GitHub Actions to deploy a .Net Web App - Azure Greg - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Using GitHub Actions to deploy a .Net Web App - Azure Greg - linksfor.dev(s)"/>
    <meta property="article:author" content="by Gregor Suttie"/>
    <meta property="og:description" content="So I wanted to take a look into GitHub Action&#x2019;s and deploy a .Net Web App, this is my first real look into them and will be blogging about them a lot more in the future, below are the steps I took to do this. Create a basic .Net MVC Web App using .Net Core...Read More"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://gregorsuttie.com/2020/03/22/using-github-actions-to-deploy-a-net-web-app/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Using GitHub Actions to deploy a .Net Web App - Azure Greg</title>
<div class="readable">
        <h1>Using GitHub Actions to deploy a .Net Web App - Azure Greg</h1>
            <div>by by Gregor Suttie</div>
            <div>Reading time: 3-4 minutes</div>
        <div>Posted here: 22 Mar 2020</div>
        <p><a href="https://gregorsuttie.com/2020/03/22/using-github-actions-to-deploy-a-net-web-app/">https://gregorsuttie.com/2020/03/22/using-github-actions-to-deploy-a-net-web-app/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="post-4407"><div><p><a rel="prettyPhoto" href="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?fit=366%2C124&amp;ssl=1"><img width="366" height="124" src="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?fit=366%2C124&amp;ssl=1" alt="" data-attachment-id="4418" data-permalink="https://gregorsuttie.com/2020/03/22/using-github-actions-to-deploy-a-net-web-app/ga/" data-orig-file="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?fit=366%2C124&amp;ssl=1" data-orig-size="366,124" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ga" data-image-description="" data-medium-file="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?fit=300%2C102&amp;ssl=1" data-large-file="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?fit=366%2C124&amp;ssl=1" srcset="https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?w=366&amp;ssl=1 366w, https://i2.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga.png?resize=300%2C102&amp;ssl=1 300w" data-lazy-loaded="1" sizes="(max-width: 366px) 100vw, 366px"></a></p>
<figure><img data-attachment-id="4419" data-permalink="https://gregorsuttie.com/2020/03/22/using-github-actions-to-deploy-a-net-web-app/ga-1/" data-orig-file="https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?fit=366%2C124&amp;ssl=1" data-orig-size="366,124" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ga-1" data-image-description="" data-medium-file="https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?fit=300%2C102&amp;ssl=1" data-large-file="https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?fit=366%2C124&amp;ssl=1" src="https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?fit=366%2C124&amp;ssl=1" alt="" data-recalc-dims="1" srcset="https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?w=366&amp;ssl=1 366w, https://i0.wp.com/gregorsuttie.com/wp-content/uploads/2020/03/ga-1.png?resize=300%2C102&amp;ssl=1 300w" data-lazy-loaded="1" sizes="(max-width: 366px) 100vw, 366px"></figure>



<p>So I wanted to take a look into GitHub Action’s and deploy a .Net Web App, this is my first real look into them and will be blogging about them a lot more in the future, below are the steps I took to do this.</p>



<ul><li>Create a basic .Net MVC Web App using .Net Core 3.1</li><li> Run the app and make sure all is working as expected.</li><li>Deploy this to Azure web app to Azure and check it runs ok.</li><li>I then go into my Resource Group, locate the app service and from the click on ‘<strong>Get publish profile</strong>‘ – download the file and keep handy.</li><li>Then I added the code to GitHub in a new repo which you can find here: – <a href="https://github.com/gsuttie/GHActionsWebApp1">https://github.com/gsuttie/GHActionsWebApp1</a> </li><li>Next, I need to create a <strong>secret </strong>from within GitHub, so once you have your code in a new repository within Github go click on <strong>Settings </strong>and then <strong>Security </strong>and click Add a new secret, call it <strong>azureWebAppPublishProfile</strong> if you want to use the YAML below.</li><li>Then I click on Actions and create my first workflow, I chose, Setup a workflow yourself.</li><li>And then from here – <a href="https://github.com/actions/setup-dotnet">https://github.com/actions/setup-dotnet</a> I used the YAML and pasted in so that my main.yaml file looks like this</li></ul>



<pre><code>name: Deploy ASP.NET Core app to Azure Web App

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - '*'
# CONFIGURATION
# For help, go to https://github.com/Azure/Actions
#
# 1. Set up the following secrets in your repository:
#   AZURE_WEBAPP_PUBLISH_PROFILE
#
# 2. Change these variables for your configuration:
env:
  AZURE_WEBAPP_NAME: dummywebsite     # set this to your application's name
  AZURE_WEBAPP_PACKAGE_PATH: '.'      # set this to the path to your web app project, defaults to the repository root
  DOTNET_VERSION: '3.1.100'           # set this to the dot net version to use

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:

      # Checkout the repo
      - uses: actions/checkout@master
      
      # Setup .NET Core SDK
      - name: Setup .NET Core
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }} 
      
      # Run dotnet build and publish
      - name: dotnet build and publish
        run: |
          dotnet build --configuration Release
          dotnet publish -c Release -o '${{ env.AZURE_WEBAPP_PACKAGE_PATH }}/myapp' 
          
      # Deploy to Azure Web apps
      - name: 'Run Azure webapp deploy action using publish profile credentials'
        uses: azure/webapps-deploy@v2
        with: 
          app-name: ${{ env.AZURE_WEBAPP_NAME }} # Replace with your app name
          publish-profile: ${{ secrets.azureWebAppPublishProfile }} # Define secret variable in repository settings as per action documentation
          package: '${{ env.AZURE_WEBAPP_PACKAGE_PATH }}/myapp'

# For more samples to get started with GitHub Action workflows to deploy to Azure, refer to https://github.com/Azure/actions-workflow-samples
</code></pre>



<ul><li>If you plan to use the Yaml from the above, mind and change the one setting which is <strong>AZURE_WEBAPP_NAME</strong> – I set this to <strong>dummywebsite </strong>so rename that to whatever your app service is called.</li><li>Save that, and then start your new GitHub workflow. </li><li>If all is well then your good to go, push a change to the web app and it should build and deploy automatically using your new GitHub Action.</li></ul>
</div><br></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>