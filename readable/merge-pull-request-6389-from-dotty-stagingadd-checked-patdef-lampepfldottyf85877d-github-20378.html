<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Merge pull request #6389 from dotty-staging/add-checked-patdef &#xB7; lampepfl/dotty@f85877d - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Merge pull request #6389 from dotty-staging/add-checked-patdef &#xB7; lampepfl/dotty@f85877d - linksfor.dev(s)"/>
    <meta property="article:author" content="odersky"/>
    <meta property="og:description" content="Fix #2578 Part 1: Tighten type checking of pattern bindings"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/lampepfl/dotty/commit/f85877d79d5bc6806c71239ef955865e753940f4"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Merge pull request #6389 from dotty-staging/add-checked-patdef &#xB7; lampepfl/dotty@f85877d</title>
<div class="readable">
        <h1>Merge pull request #6389 from dotty-staging/add-checked-patdef &#xB7; lampepfl/dotty@f85877d</h1>
        <p>
by odersky <br/>Reading time: 7-9 minutes        </p>
        <p><a href="https://github.com/lampepfl/dotty/commit/f85877d79d5bc6806c71239ef955865e753940f4">https://github.com/lampepfl/dotty/commit/f85877d79d5bc6806c71239ef955865e753940f4</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-hydro-view="{&quot;event_type&quot;:&quot;pull_request.select_diff_range&quot;,&quot;payload&quot;:{&quot;actor_id&quot;:null,&quot;pull_request_id&quot;:null,&quot;repository_id&quot;:null,&quot;diff_type&quot;:&quot;UNIFIED&quot;,&quot;whitespace_ignored&quot;:false,&quot;originating_url&quot;:&quot;https://github.com/lampepfl/dotty/commit/f85877d79d5bc6806c71239ef955865e753940f4&quot;,&quot;user_id&quot;:null}}" data-hydro-view-hmac="2ab4ed6379b04626f0bf5767a83792d4fc725d1d0071cff518647561ce1e2a67">
        <div>
          <table data-tab-size="8" data-diff-anchor="diff-b171853db82e3d147044c8af7d368593">

                
      <tbody><tr data-position="0">
    <td colspan="2">
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Up" aria-label="Expand Up" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=1200&amp;left_hunk_size=14&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=1200&amp;right_hunk_size=15" data-left-range="1-1199" data-right-range="1-1199">
            
          </a>
    </td>
    <td>@@ -1200,14 +1200,15 @@ object Parsers {</td>
  </tr>

    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1200" data-line-number="1200"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1200" data-line-number="1200"></td>

  <td>
    <span data-code-marker=" "><span>     *                      |  ForExpr</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1201" data-line-number="1201"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1201" data-line-number="1201"></td>

  <td>
    <span data-code-marker=" "><span>     *                      |  [SimpleExpr `.'] id `=' Expr</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1202" data-line-number="1202"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1202" data-line-number="1202"></td>

  <td>
    <span data-code-marker=" "><span>     *                      |  SimpleExpr1 ArgumentExprs `=' Expr</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1203" data-line-number="1203"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *                      |  <span>PostfixExpr [Ascription]</span></span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1204" data-line-number="1204"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *                      |  [â€˜inlineâ€™] <span>PostfixExpr</span> `match' `{' CaseClauses `}'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1203" data-line-number="1203"></td>

  <td>
    <span data-code-marker="+"><span>     *                      |  <span>Expr2</span></span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1204" data-line-number="1204"></td>

  <td>
    <span data-code-marker="+"><span>     *                      |  [â€˜inlineâ€™] <span>Expr2</span> `match' `{' CaseClauses `}'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1205" data-line-number="1205"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1205" data-line-number="1205"></td>

  <td>
    <span data-code-marker=" "><span>     *                      |  `implicit' `match' `{' ImplicitCaseClauses `}'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1206" data-line-number="1206"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  Bindings          ::= `(' [Binding {`,' Binding}] `)'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1207" data-line-number="1207"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  Binding           ::= (id | `_') [`:' Type]</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1208" data-line-number="1208"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  Ascription        ::= `:' CompoundType</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1209" data-line-number="1209"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *                      | `:' Annotation {Annotation}</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1210" data-line-number="1210"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *                      | `:' `_' `*'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1206" data-line-number="1206"></td>

  <td>
    <span data-code-marker="+"><span>     *  Bindings          ::=  `(' [Binding {`,' Binding}] `)'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1207" data-line-number="1207"></td>

  <td>
    <span data-code-marker="+"><span>     *  Binding           ::=  (id | `_') [`:' Type]</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1208" data-line-number="1208"></td>

  <td>
    <span data-code-marker="+"><span>     *  Expr2             ::=  PostfixExpr [Ascription]</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1209" data-line-number="1209"></td>

  <td>
    <span data-code-marker="+"><span>     *  Ascription        ::=  `:' InfixType</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1210" data-line-number="1210"></td>

  <td>
    <span data-code-marker="+"><span>     *                      |  `:' Annotation {Annotation}</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1211" data-line-number="1211"></td>

  <td>
    <span data-code-marker="+"><span>     *                      |  `:' `_' `*'</span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1211" data-line-number="1211"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1212" data-line-number="1212"></td>

  <td>
    <span data-code-marker=" "><span>     <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1212" data-line-number="1212"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1213" data-line-number="1213"></td>

  <td>
    <span data-code-marker=" ">    <span>val</span> <span>exprInParens</span><span>:</span> () <span>=&gt;</span> <span>Tree</span> <span>=</span> () <span>=&gt;</span> expr(<span>Location</span>.<span>InParens</span>)</span></td>
</tr>



    <tr data-hunk="74b1e446d6e377451b8bf2c2e6400415">
    <td id="diff-b171853db82e3d147044c8af7d368593L1213" data-line-number="1213"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1214" data-line-number="1214"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



      <tr data-position="23">
    <td colspan="2">
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Down" aria-label="Expand Down" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=1213&amp;last_right=1214&amp;left=1324&amp;left_hunk_size=15&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=1325&amp;right_hunk_size=16" data-left-range="1214-1267" data-right-range="1215-1268">
            
          </a>
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Up" aria-label="Expand Up" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=1213&amp;last_right=1214&amp;left=1324&amp;left_hunk_size=15&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=1325&amp;right_hunk_size=16" data-left-range="1268-1323" data-right-range="1269-1324">
            
          </a>
    </td>
    <td>@@ -1324,15 +1325,16 @@ object Parsers {</td>
  </tr>

    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1324" data-line-number="1324"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1325" data-line-number="1325"></td>

  <td>
    <span data-code-marker=" ">             t</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1325" data-line-number="1325"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1326" data-line-number="1326"></td>

  <td>
    <span data-code-marker=" ">         }</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1326" data-line-number="1326"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1327" data-line-number="1327"></td>

  <td>
    <span data-code-marker=" ">      <span>case</span> <span>COLON</span> <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1327" data-line-number="1327"></td>

    <td></td>

  <td>
    <span data-code-marker="-">        ascription(t, location)</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1328" data-line-number="1328"></td>

  <td>
    <span data-code-marker="+">        in.nextToken()</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1329" data-line-number="1329"></td>

  <td>
    <span data-code-marker="+">        <span>val</span> <span>t1</span> <span>=</span> ascription(t, location)</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1330" data-line-number="1330"></td>

  <td>
    <span data-code-marker="+">        <span>if</span> (in.token <span>==</span> <span>MATCH</span>) expr1Rest(t1, location) <span>else</span> t1</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1328" data-line-number="1328"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1331" data-line-number="1331"></td>

  <td>
    <span data-code-marker=" ">      <span>case</span> <span>MATCH</span> <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1329" data-line-number="1329"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1332" data-line-number="1332"></td>

  <td>
    <span data-code-marker=" ">        matchExpr(t, startOffset(t), <span>Match</span>)</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1330" data-line-number="1330"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1333" data-line-number="1333"></td>

  <td>
    <span data-code-marker=" ">      <span>case</span> _ <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1331" data-line-number="1331"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1334" data-line-number="1334"></td>

  <td>
    <span data-code-marker=" ">        t</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1332" data-line-number="1332"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1335" data-line-number="1335"></td>

  <td>
    <span data-code-marker=" ">    }</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1333" data-line-number="1333"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1336" data-line-number="1336"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1334" data-line-number="1334"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1337" data-line-number="1337"></td>

  <td>
    <span data-code-marker=" ">    <span>def</span> <span>ascription</span>(<span>t</span>: <span>Tree</span>, <span>location</span>: <span>Location</span>.<span>Value</span>)<span>:</span> <span>Tree</span> <span>=</span> atSpan(startOffset(t)) {</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1335" data-line-number="1335"></td>

    <td></td>

  <td>
    <span data-code-marker="-">      in.skipToken()</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1336" data-line-number="1336"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1338" data-line-number="1338"></td>

  <td>
    <span data-code-marker=" ">      in.token <span>match</span> {</span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1337" data-line-number="1337"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1339" data-line-number="1339"></td>

  <td>
    <span data-code-marker=" ">        <span>case</span> <span>USCORE</span> <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="9309415cefe84a42869add080017b05a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1338" data-line-number="1338"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1340" data-line-number="1340"></td>

  <td>
    <span data-code-marker=" ">          <span>val</span> <span>uscoreStart</span> <span>=</span> in.skipToken()</span></td>
</tr>



      <tr data-position="42">
    <td colspan="2">
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Down" aria-label="Expand Down" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=1338&amp;last_right=1340&amp;left=1801&amp;left_hunk_size=7&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=1803&amp;right_hunk_size=10" data-left-range="1339-1568" data-right-range="1341-1570">
            
          </a>
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Up" aria-label="Expand Up" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=1338&amp;last_right=1340&amp;left=1801&amp;left_hunk_size=7&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=1803&amp;right_hunk_size=10" data-left-range="1569-1800" data-right-range="1571-1802">
            
          </a>
    </td>
    <td>@@ -1801,7 +1803,10 @@ object Parsers {</td>
  </tr>

    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1801" data-line-number="1801"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1803" data-line-number="1803"></td>

  <td>
    <span data-code-marker=" "><span>     <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1802" data-line-number="1802"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1804" data-line-number="1804"></td>

  <td>
    <span data-code-marker=" ">    <span>def</span> <span>pattern1</span>()<span>:</span> <span>Tree</span> <span>=</span> {</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1803" data-line-number="1803"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1805" data-line-number="1805"></td>

  <td>
    <span data-code-marker=" ">      <span>val</span> <span>p</span> <span>=</span> pattern2()</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1804" data-line-number="1804"></td>

    <td></td>

  <td>
    <span data-code-marker="-">      <span>if</span> (isVarPattern(p) <span>&amp;&amp;</span> in.token <span>==</span> <span>COLON</span>) ascription(p, <span>Location</span>.<span>InPattern</span>)</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1806" data-line-number="1806"></td>

  <td>
    <span data-code-marker="+">      <span>if</span> (isVarPattern(p) <span>&amp;&amp;</span> in.token <span>==</span> <span>COLON</span>) {</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1807" data-line-number="1807"></td>

  <td>
    <span data-code-marker="+">        in.nextToken()</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1808" data-line-number="1808"></td>

  <td>
    <span data-code-marker="+">        ascription(p, <span>Location</span>.<span>InPattern</span>)</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1809" data-line-number="1809"></td>

  <td>
    <span data-code-marker="+">      }</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1805" data-line-number="1805"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1810" data-line-number="1810"></td>

  <td>
    <span data-code-marker=" ">      <span>else</span> p</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1806" data-line-number="1806"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1811" data-line-number="1811"></td>

  <td>
    <span data-code-marker=" ">    }</span></td>
</tr>



    <tr data-hunk="e8e90aff9278a4115a08c17d98b0875a">
    <td id="diff-b171853db82e3d147044c8af7d368593L1807" data-line-number="1807"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R1812" data-line-number="1812"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



      <tr data-position="54">
    <td colspan="2">
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Down" aria-label="Expand Down" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=1807&amp;last_right=1812&amp;left=2353&amp;left_hunk_size=14&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=2358&amp;right_hunk_size=32" data-left-range="1808-2079" data-right-range="1813-2084">
            
          </a>
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Up" aria-label="Expand Up" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=1807&amp;last_right=1812&amp;left=2353&amp;left_hunk_size=14&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=2358&amp;right_hunk_size=32" data-left-range="2080-2352" data-right-range="2085-2357">
            
          </a>
    </td>
    <td>@@ -2353,14 +2358,32 @@ object Parsers {</td>
  </tr>

    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2353" data-line-number="2353"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2358" data-line-number="2358"></td>

  <td>
    <span data-code-marker=" ">        tmplDef(start, mods)</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2354" data-line-number="2354"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2359" data-line-number="2359"></td>

  <td>
    <span data-code-marker=" ">    }</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2355" data-line-number="2355"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2360" data-line-number="2360"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2356" data-line-number="2356"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>    <span>/**</span> PatDef ::= Pattern2 {`,' Pattern2} [`:' Type] `=' Expr</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2357" data-line-number="2357"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  VarDef ::= PatDef | id {`,' id} `:' Type `=' `_'</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2358" data-line-number="2358"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  ValDcl ::= id {`,' id} `:' Type</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2359" data-line-number="2359"></td>

    <td></td>

  <td>
    <span data-code-marker="-"><span>     *  VarDcl ::= id {`,' id} `:' Type</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2361" data-line-number="2361"></td>

  <td>
    <span data-code-marker="+"><span>    <span>/**</span> PatDef  ::=  ids [â€˜:â€™ Type] â€˜=â€™ Expr</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2362" data-line-number="2362"></td>

  <td>
    <span data-code-marker="+"><span>     *            |  Pattern2 [â€˜:â€™ Type | Ascription] â€˜=â€™ Expr</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2363" data-line-number="2363"></td>

  <td>
    <span data-code-marker="+"><span>     *  VarDef  ::=  PatDef | id {`,' id} `:' Type `=' `_'</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2364" data-line-number="2364"></td>

  <td>
    <span data-code-marker="+"><span>     *  ValDcl  ::=  id {`,' id} `:' Type</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2365" data-line-number="2365"></td>

  <td>
    <span data-code-marker="+"><span>     *  VarDcl  ::=  id {`,' id} `:' Type</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2360" data-line-number="2360"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2366" data-line-number="2366"></td>

  <td>
    <span data-code-marker=" "><span>     <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2361" data-line-number="2361"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2367" data-line-number="2367"></td>

  <td>
    <span data-code-marker=" ">    <span>def</span> <span>patDefOrDcl</span>(<span>start</span>: <span>Offset</span>, <span>mods</span>: <span>Modifiers</span>)<span>:</span> <span>Tree</span> <span>=</span> atSpan(start, nameStart) {</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2362" data-line-number="2362"></td>

    <td></td>

  <td>
    <span data-code-marker="-">      <span>val</span> <span>lhs</span> <span>=</span> commaSeparated(pattern2)</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2363" data-line-number="2363"></td>

    <td></td>

  <td>
    <span data-code-marker="-">      <span>val</span> <span>tpt</span> <span>=</span> typedOpt()</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2368" data-line-number="2368"></td>

  <td>
    <span data-code-marker="+">      <span>val</span> <span>first</span> <span>=</span> pattern2()</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2369" data-line-number="2369"></td>

  <td>
    <span data-code-marker="+">      <span>var</span> <span>lhs</span> <span>=</span> first <span>match</span> {</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2370" data-line-number="2370"></td>

  <td>
    <span data-code-marker="+">        <span>case</span> <span>id</span>: <span>Ident</span> <span>if</span> in.token <span>==</span> <span>COMMA</span> <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2371" data-line-number="2371"></td>

  <td>
    <span data-code-marker="+">          in.nextToken()</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2372" data-line-number="2372"></td>

  <td>
    <span data-code-marker="+">          id <span>::</span> commaSeparated(() <span>=&gt;</span> termIdent())</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2373" data-line-number="2373"></td>

  <td>
    <span data-code-marker="+">        <span>case</span> _ <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2374" data-line-number="2374"></td>

  <td>
    <span data-code-marker="+">          first <span>::</span> <span>Nil</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2375" data-line-number="2375"></td>

  <td>
    <span data-code-marker="+">      }</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2376" data-line-number="2376"></td>

  <td>
    <span data-code-marker="+">      <span>def</span> <span>emptyType</span> <span>=</span> <span>TypeTree</span>().withSpan(<span>Span</span>(in.lastOffset))</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2377" data-line-number="2377"></td>

  <td>
    <span data-code-marker="+">      <span>val</span> <span>tpt</span> <span>=</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2378" data-line-number="2378"></td>

  <td>
    <span data-code-marker="+">        <span>if</span> (in.token <span>==</span> <span>COLON</span>) {</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2379" data-line-number="2379"></td>

  <td>
    <span data-code-marker="+">          in.nextToken()</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2380" data-line-number="2380"></td>

  <td>
    <span data-code-marker="+">          <span>if</span> (in.token <span>==</span> <span>AT</span> <span>&amp;&amp;</span> lhs.tail.isEmpty) {</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2381" data-line-number="2381"></td>

  <td>
    <span data-code-marker="+">            lhs <span>=</span> ascription(first, <span>Location</span>.<span>ElseWhere</span>) <span>::</span> <span>Nil</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2382" data-line-number="2382"></td>

  <td>
    <span data-code-marker="+">            emptyType</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2383" data-line-number="2383"></td>

  <td>
    <span data-code-marker="+">          }</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2384" data-line-number="2384"></td>

  <td>
    <span data-code-marker="+">          <span>else</span> toplevelTyp()</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2385" data-line-number="2385"></td>

  <td>
    <span data-code-marker="+">        }</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2386" data-line-number="2386"></td>

  <td>
    <span data-code-marker="+">        <span>else</span> emptyType</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2364" data-line-number="2364"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2387" data-line-number="2387"></td>

  <td>
    <span data-code-marker=" ">      <span>val</span> <span>rhs</span> <span>=</span></span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2365" data-line-number="2365"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2388" data-line-number="2388"></td>

  <td>
    <span data-code-marker=" ">        <span>if</span> (tpt.isEmpty <span>||</span> in.token <span>==</span> <span>EQUALS</span>) {</span></td>
</tr>



    <tr data-hunk="41942bf6d491b0162b97ee9b836b4830">
    <td id="diff-b171853db82e3d147044c8af7d368593L2366" data-line-number="2366"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2389" data-line-number="2389"></td>

  <td>
    <span data-code-marker=" ">          accept(<span>EQUALS</span>)</span></td>
</tr>



      <tr data-position="93">
    <td colspan="2">
        <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand All" aria-label="Expand All" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;in_wiki_context=&amp;last_left=2366&amp;last_right=2389&amp;left=2374&amp;left_hunk_size=9&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=2397&amp;right_hunk_size=9" data-left-range="2367-2369" data-right-range="2390-2392">
          
        </a>
    </td>
    <td>@@ -2374,9 +2397,9 @@ object Parsers {</td>
  </tr>

    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2374" data-line-number="2374"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2397" data-line-number="2397"></td>

  <td>
    <span data-code-marker=" ">      lhs <span>match</span> {</span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2375" data-line-number="2375"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2398" data-line-number="2398"></td>

  <td>
    <span data-code-marker=" ">        <span>case</span> (<span>id</span>: <span>BackquotedIdent</span>) <span>::</span> <span>Nil</span> <span>if</span> id.name.isTermName <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2376" data-line-number="2376"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2399" data-line-number="2399"></td>

  <td>
    <span data-code-marker=" ">          finalizeDef(<span>BackquotedValDef</span>(id.name.asTermName, tpt, rhs), mods, start)</span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2377" data-line-number="2377"></td>

    <td></td>

  <td>
    <span data-code-marker="-">        <span>case</span> <span>Ident</span>(<span>name</span>: <span>TermName</span>) <span>::</span> <span>Nil</span> <span>=&gt;</span><span> {</span></span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2400" data-line-number="2400"></td>

  <td>
    <span data-code-marker="+">        <span>case</span> <span>Ident</span>(<span>name</span>: <span>TermName</span>) <span>::</span> <span>Nil</span> <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2378" data-line-number="2378"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2401" data-line-number="2401"></td>

  <td>
    <span data-code-marker=" ">          finalizeDef(<span>ValDef</span>(name, tpt, rhs), mods, start)</span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2379" data-line-number="2379"></td>

    <td></td>

  <td>
    <span data-code-marker="-">        <span>} </span><span>case</span> _ <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2402" data-line-number="2402"></td>

  <td>
    <span data-code-marker="+">        <span>case</span> _ <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2380" data-line-number="2380"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2403" data-line-number="2403"></td>

  <td>
    <span data-code-marker=" ">          <span>PatDef</span>(mods, lhs, tpt, rhs)</span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2381" data-line-number="2381"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2404" data-line-number="2404"></td>

  <td>
    <span data-code-marker=" ">      }</span></td>
</tr>



    <tr data-hunk="41048781dae3d9acb0f11d25b738867a">
    <td id="diff-b171853db82e3d147044c8af7d368593L2382" data-line-number="2382"></td>

    <td id="diff-b171853db82e3d147044c8af7d368593R2405" data-line-number="2405"></td>

  <td>
    <span data-code-marker=" ">    }</span></td>
</tr>



  <tr data-position="">
    <td colspan="2">
          <a href="#diff-b171853db82e3d147044c8af7d368593" title="Expand Down" aria-label="Expand Down" data-url="/lampepfl/dotty/blob_excerpt/a3f99b32fc9492d760389129e04c8277fa2580f5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=2382&amp;last_right=2405&amp;left=3036&amp;left_hunk_size=&amp;mode=100644&amp;path=compiler%2Fsrc%2Fdotty%2Ftools%2Fdotc%2Fparsing%2FParsers.scala&amp;right=3036&amp;right_hunk_size=" data-left-range="2383-3035" data-right-range="2406-3035">
            
          </a>
    </td>
    <td></td>
  </tr>


          </tbody></table>
        </div>

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>