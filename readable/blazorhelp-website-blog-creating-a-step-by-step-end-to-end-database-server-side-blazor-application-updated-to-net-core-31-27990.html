<!DOCTYPE html>
<html lang="en">
<head>
    <title>
BlazorHelp Website &gt; Blog - Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1) - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="BlazorHelp Website &gt; Blog - Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1) - linksfor.dev(s)"/>
    <meta property="article:author" content="Written by:&#xA;   Michael Washington"/>
    <meta property="og:description" content="Microsoft Visual Studio Blazor"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/4318/Server-Side-Blazor-Reading-And-Inserting-Data-Into-A-Database-End-To-End.aspx"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - BlazorHelp Website &gt; Blog - Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</title>
<div class="readable">
        <h1>BlazorHelp Website &gt; Blog - Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</h1>
            <div>by Written by:&#xA;   Michael Washington</div>
            <div>Reading time: 34-43 minutes</div>
        <div>Posted here: 30 Jun 2019</div>
        <p><a href="http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/4318/Server-Side-Blazor-Reading-And-Inserting-Data-Into-A-Database-End-To-End.aspx">http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/4318/Server-Side-Blazor-Reading-And-Inserting-Data-Into-A-Database-End-To-End.aspx</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
 <!-- Begin Blog Entry Title -->
 
 <!-- End Blog Entry Title -->
 <!-- Begin Blog Sub Head -->
 <acronym title="12/29/2019 1:03 PM"><span>
  <span id="dnn_ctr382_MainView_ViewEntry_lblEntryMonth">Dec</span>
 </span><span>
  <span id="dnn_ctr382_MainView_ViewEntry_lblEntryDay">29</span>
 </span></acronym>
 <p>
  
  <br>
  <span id="dnn_ctr382_MainView_ViewEntry_lblDateTime">12/29/2019 1:03 PM</span>&nbsp;
  <a id="dnn_ctr382_MainView_ViewEntry_lnkRss" href="http://blazorhelpwebsite.com/Blog/tabid/61/rssid/1/Default.aspx" target="_blank"><img id="dnn_ctr382_MainView_ViewEntry_lnkRssIcon" src="http://blazorhelpwebsite.com/desktopmodules/Blog/Images/feed-icon-12x12.gif" alt="RssIcon"></a>
 </p>
 <!-- End Blog Sub Head -->
 
 <!-- Begin Blog Entry -->
 
   <p><img src="http://blazorhelpwebsite.com/images/BlazorDatabaseInsert.gif"></p>  <p>The primary benefit we have when using <strong>server-side Blazor</strong> is that we do not have to make <em>web</em> <em>http</em> calls from the client code to the server code. This reduces the code we need to write and eliminates many security concerns.</p>  <p>In this article, we will demonstrate how a list of <strong>Weather forecasts</strong> can be added to the database by each user. A user will only have the ability to see their own forecasts. </p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_84d054ed-1e4f-44f1-9969-d5612e352f74.png" width="543" height="311"></p>  <p>You can watch the <strong>YouTube</strong> video for this tutorial at the following link:</p>  <p><a href="https://www.youtube.com/watch?v=dSW23gkQLP4">https://www.youtube.com/watch?v=dSW23gkQLP4</a></p>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_5f59e509-7ea2-4e32-9e71-02f82dbe6a5d.png" width="478" height="320"></p>  <p>The new project template in <strong>Visual Studio</strong> will allow you to create a database using <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/working-with-sql?view=aspnetcore-2.2&amp;tabs=visual-studio#sql-server-express-localdb">SQL Server Express LocalDB</a>. However, it can be problematic to install and configure. Using the free <strong>SQL Server 2019 Developer server</strong> (or the full <strong>SQL Server</strong>) is recommended. </p>  <p>Download and install <strong>SQL Server 2019 Developer Edition</strong> from the following link:</p>  <p><a href="https://www.microsoft.com/en-us/sql-server/sql-server-downloads">https://www.microsoft.com/en-us/sql-server/sql-server-downloads</a></p>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_18e1bccf-ca38-4bc8-8ec8-b9fb323eb44c.png" width="84" height="95"></p>  <p>Open <a href="https://visualstudio.microsoft.com/">Visual Studio</a>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_6a2c6e1a-ebb3-44ca-a9eb-8eabfb94ad64.png" width="360" height="106"></p>  <p>Select <strong>Create a new Project</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_f6857cb1-d388-4b22-97e3-15ae0482acb3.png" width="567" height="316"></p>  <p>Select <strong>Blazor App </strong>and click <strong>Next</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_66e15eb6-af12-4904-96df-034a194cb720.png" width="638" height="453"></p>  <p>Name it <strong>EndToEnd</strong> and click <strong>Create</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_0eecdf96-67f9-4746-8d15-cd500506b95b.png" width="663" height="288"></p>  <p>Select <strong>Blazor Server App</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_b9437063-60ce-42a4-b909-683b91599613.png" width="160" height="122"></p>  <p>Click the <strong>Change</strong> link under <strong>Authentication</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_fbe5f892-39cb-4306-bf60-9c826d93f942.png" width="718" height="279"></p>  <p>Select <strong>Individual User Accounts</strong> and <strong>Store user accounts in-app</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_b3c3730a-a8ac-4e5a-8b1b-39156b85c95a.png" width="654" height="436"></p>  <p>Click <strong>Create</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_327c5531-6f38-42d8-be2b-a43aad5e2eab.png" width="277" height="449"></p>  <p>The <strong>project</strong> will be created.</p>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_6ac202f8-3a01-44b4-8f87-c83b8385346c.png" width="458" height="228"></p>  <p>Open the <strong>SQL Server Object Explorer</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_8ECB-image_507a6eb3-48ff-42f3-9656-386a241c76e0.png" width="204" height="216"></p>  <p>Add a connection to your<strong> local database server</strong> if you donâ€™t already have it in the <strong>SQL Server</strong> list.</p>  <p>For this tutorial, we do not want to use the <strong>SQL Express server</strong> on<strong> (localdb)</strong> that you may already see in the list.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_8ECB-image_d21e60b7-b00b-4d70-a121-91864b62fdc4.png" width="411" height="425"></p>  <p>You will specify just the server and <strong>Connect</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_e04852ff-6c2c-4624-9b35-54dc0421d6ce.png" width="288" height="221"></p>  <p>Expand the tree under the local <strong>SQL server</strong>, <em>right-click</em> on the <strong>Databases</strong> folder and select <strong>Add New Database</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_84d0fd01-430b-46c9-89a6-9f0bea53b6bc.png" width="315" height="310"></p>  <p>Give the <strong>database</strong> a name and press <strong>Enter</strong>.</p>  <p>The <strong>database</strong> will be created.</p>  <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_8b18d889-a1bf-42ba-a08b-aa4c34e12730.png" width="243" height="384"></p>  <p><strong><em>Right-Click</em></strong> on the <strong>Database</strong> node and select <strong>Properties</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_3e7e80bf-8431-45fb-9d4e-93d1d6ddbc47.png" width="320" height="504"></p>  <p>Open the <strong>Properties</strong> window if it is not already opened.</p>  <p>The <strong>Properties</strong> window for the <strong>database</strong> will display.</p>  <p><em><strong>Copy</strong></em> the <strong>Connection string</strong> for the <strong>database</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_f2414871-5f87-4514-89c3-f0f57f68a96f.png" width="248" height="353"></p>  <p>Open the <strong>appsettings.json</strong> file.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_f437be5c-77f3-4b6d-9779-15071950da93.png" width="556" height="154"></p>  <p><strong><em>Paste</em></strong> in the <strong>connection string</strong> for the <strong>DefaultConnection</strong> and <strong>save</strong> the file.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_209df61f-0a45-485c-bad8-82123e0e96f4.png" width="626" height="301"></p>  <p>Hit <strong>F5</strong> to run the application.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_3657eff1-3532-4b19-8732-38a637fd1668.png" width="620" height="285"></p>  <p>The application will open in your <strong>web browser</strong>.</p>  <p><strong><em>Click</em></strong> the <strong>Register</strong> link.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_582a708d-7ee0-427b-85a4-a3b017e24d54.png" width="619" height="503"></p>  <p>Enter the information to create a <strong>new account</strong>.</p>  <p>Click the <strong>Register</strong> button.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_84024e48-4707-4934-ae39-7c4df875fbb6.png" width="520" height="363"></p>  <p>Because this is the first time the database is being used, you will see a message asking you to run the <strong>migration scripts</strong> that will create the database objects needed to support the user membership code.</p>  <p><em><strong>Click</strong></em> the <strong>Apply Migrations</strong> button.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_7ee1d578-fea7-49c4-a21c-a31e4b360c06.png" width="623" height="361"></p>  <p>After the message changes to <em>Migrations Applied</em>, <em>refresh</em> the page in the web browser.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_bc7be7e8-b04d-4fac-8dea-34baddaeabb1.png" width="704" height="274"></p>  <p>After clicking <em>refresh</em> in your web browser, a popup will require you to click <strong>Continue</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_9ca04f02-b5f0-4602-a111-9ceda9ad3fb5.png" width="697" height="154"></p>  <p>Click the <strong>Click here to confirm your account</strong> link.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_916be2c4-e6ff-4d91-b37a-98954902b43a.png" width="699" height="218"></p>  <p>On the <strong>Confirm email</strong> page, <em>click</em> the name of the application to <em>navigate</em> to the home page.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_4b96f11d-e326-414a-8b47-c33e8c851375.png" width="660" height="219"></p>  <p>Now you can click the <strong>Log in</strong> link to <em>log in</em> using the account you just created.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_a72e0c22-ce4e-40df-9e12-b9caf5a18323.png" width="624" height="270"></p>  <p>You will now be <em>logged into</em> the application.</p>  <p>You can click around the application and see that it works.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_118bcc82-889b-4aef-8529-95d3faefbbbb.png" width="623" height="447"></p>  <p>The <strong>Fetch data</strong> page currently shows random data. We will alter the application to allow us to <strong>add</strong>, <strong>update</strong>, and <strong>delete</strong> this data in the database.</p>  <p><strong><em>Close</em></strong> the <strong>web browser</strong> to <strong>stop</strong> the application.</p>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_1aa99e7b-2f8f-4bfe-81a5-74720bdc93d0.png" width="242" height="360"></p>  <p>If we do not intend to configure <strong>email account verification</strong> (using the directions at this link: <a title="https://bit.ly/2tf2ym4" href="https://bit.ly/2tf2ym4">https://bit.ly/2tf2ym4</a>), we can open the <strong>Startup.cs</strong> file and change the following line:</p>    <pre><pre>            services.AddDefaultIdentity&lt;IdentityUser&gt;(
</pre><pre>                options =&gt; options.SignIn.RequireConfirmedAccount = <span>true</span>)
</pre><pre>                .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();</pre></pre>



<p>To:</p>



<pre><pre>            services.AddDefaultIdentity&lt;IdentityUser&gt;(
</pre><pre>                options =&gt; options.SignIn.RequireConfirmedAccount = <span><span>false</span></span>)
</pre><pre>                .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();</pre></pre>









<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_290bfb5a-5fc5-4844-82d5-cae20c4f82ad.png" width="307" height="644"></p>

<p>In the <strong>SQL Server Object Explorer</strong> window, in <strong>Visual Studio</strong>, we see the <strong>tables</strong> that the <em>migration scripts</em> added.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_7da54785-27d1-4104-9ff0-fe0f20d68bc8.png" width="267" height="167"></p>

<p><em>Right-click</em> on the <strong>Tables</strong> node and select <strong>Add New Table</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_0c2169c0-b3c1-41c2-ba71-493f2387f576.png" width="586" height="451"></p>

<p>Paste the following script in the<strong> T-SQL</strong> window and then click the <strong>Update</strong> button:</p>



<pre><pre><a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=CREATE&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">CREATE</a> <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=TABLE&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">TABLE</a> [dbo].[WeatherForecast] (
</pre><pre>    [Id]           <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=INT&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">INT</a>           <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=IDENTITY&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">IDENTITY</a> (1, 1) <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NOT&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NOT</a> <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    [<a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=Date&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">Date</a>]         <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=DATETIME&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">DATETIME</a>      <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    [TemperatureC] <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=INT&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">INT</a>           <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    [TemperatureF] <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=INT&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">INT</a>           <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    [Summary]      <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NVARCHAR&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NVARCHAR</a> (50) <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    [UserName]     <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NVARCHAR&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NVARCHAR</a> (50) <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=NULL&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">NULL</a>,
</pre><pre>    <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=PRIMARY&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">PRIMARY</a> <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=KEY&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">KEY</a> <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=CLUSTERED&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">CLUSTERED</a> ([Id] <a href="http://search.microsoft.com/default.asp?so=RECCNT&amp;siteid=us%2Fdev&amp;p=1&amp;nq=NEW&amp;qu=ASC&amp;IntlSearch=&amp;boolean=PHRASE&amp;ig=01&amp;i=09&amp;i=99">ASC</a>)
</pre><pre>);
</pre><pre></pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_5227d88b-3471-418f-9af7-453162af4686.png" width="527" height="405"></p>

<p>The script will <em>prepare</em>.</p>

<p>Click the <strong>Update Database</strong> button.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_46429e52-62aa-4ee2-9dbb-dcb6240a4e47.png" width="253" height="165"></p>

<p>Back in the <strong>Server Explorer</strong> window, <em>right-click</em> on <strong>Tables</strong> and select <strong>Refresh</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_41ec55ec-f22f-4f81-ad86-1254c879a10b.png" width="250" height="398"></p>

<p>The <strong>WeatherForecast</strong> table will display.</p>

<p><em>Right-click</em> on the table and select <strong>Show Table Data</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_38ff4a22-f194-4024-9e3c-f12a174bce3e.png" width="697" height="191"></p>

<p>We will enter some <strong>sample data</strong> so that we will be able to <strong>test</strong> the data connection in the next steps.</p>

<p>Set the <strong>UserName</strong> field to the <strong>username</strong> of the <strong>user</strong> that we <strong>registered</strong> an account for earlier.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_336a15e6-2f12-4d44-9786-27a140f713cd.png" width="637" height="282"></p>

<p>If you do not already have it installed, install <strong>EF Core Power Tools</strong> from:</p>

<p><a title="https://marketplace.visualstudio.com/items?itemName=ErikEJ.EFCorePowerTools" href="https://marketplace.visualstudio.com/items?itemName=ErikEJ.EFCorePowerTools">https://marketplace.visualstudio.com/items?itemName=ErikEJ.EFCorePowerTools</a></p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_ddd054ef-ce76-42ae-9835-a42e5b1842a1.png" width="434" height="331"></p>

<p>(<span>Note:</span> Before installing, close <strong>Visual Studio</strong>)</p>

<p>(<span>Note:</span> Please give this project a <strong>5</strong> star review on <strong>marketplace.visualstudio.com</strong>!)</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_af37a487-41e7-4df0-b3b0-06a1c951bc15.png" width="571" height="503"></p>

<p><em>Right-click</em> on the <strong>project</strong> node in the <strong>Solution Explorer</strong> and select <strong>EF Core Power Tools</strong> then <strong>Reverse Engineer</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_7d87759a-c832-43c3-85da-c0f64764efd4.png" width="405" height="192"></p>

<p>Click the <strong>Add</strong> button.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_eea986ab-86a6-46d6-a51c-2c02444cd221.png" width="493" height="584"></p>

<p><em>Connect</em> to the database.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_320aa101-4f70-4079-af7a-995f4ad03975.png" width="402" height="190"></p>

<p>Select the database connection in the <strong>dropdown</strong> and click <strong>OK</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_76eac5b7-96bb-4350-bd03-a252534d89ee.png" width="405" height="444"></p>

<p>Select the <strong>WeatherForecast</strong> table and click <strong>OK</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_343b3e9f-59bc-4a95-af72-2e709833a8cb.png" width="360" height="618"></p>

<p>Set the values and click <strong>OK</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_8862c8db-31b1-476f-86fb-5a915069cbe9.png" width="507" height="460"></p>

<p>In the <strong>Solution Explorer</strong>, you will see the <strong>Data Context</strong> has been created.</p>

<p>Click the <strong>OK</strong> button to <em>close</em> the popup.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_e88c004f-2c44-42b8-99f9-0197ae1b231c.png" width="279" height="497"></p>

<p>Open the<strong> Startup.cs</strong> file.</p>

<p>Add the following code to the <strong>ConfigureServices</strong> section:</p>



<pre><pre>    <span>// Read the connection string from the appsettings.json file</span>
</pre><pre>    <span>// Set the database connection for the EndtoEndContext</span>
</pre><pre>    services.AddDbContext&lt;EndToEndDB.Data.EndToEnd.EndtoEndContext&gt;(options =&gt;
</pre><pre>    options.UseSqlServer(
</pre><pre>        Configuration.GetConnectionString("<span>DefaultConnection</span>")));</pre></pre>



<p>Also, change this line:</p>



<pre><pre>            services.AddSingleton&lt;WeatherForecastService&gt;();</pre></pre>



<p>to this:</p>



<pre><pre>            <span>// Scoped creates an instance for each user</span>
</pre><pre>            services.AddScoped&lt;WeatherForecastService&gt;();</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_cf32e85d-6380-4e85-a18b-5e3764b4108b.png" width="294" height="107"></p>

<p><strong>Save</strong> the file.</p>

<p>Select <strong>Build</strong>, then <strong>Rebuild Solution</strong>.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_15bed65c-8b50-4075-9394-9c369650fc8f.png" width="238" height="350"></p>

<p><strong>Delete</strong> the <strong>Data/WeatherForecast.cs</strong> file in the project.</p>

<p>We will use the <strong>Data/EndToEnd/WeatherForcast.cs</strong> class file created by the <strong>EF Core Tools</strong> instead.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_9b46dbfd-bb3c-4612-b65f-a223f01eaf6d.png" width="255" height="478"></p>

<p>Open the <strong>WeatherForecastService.cs</strong> file.</p>

<p>Replace <strong>all</strong> the code with the following code:</p>



<pre><pre><span>using</span> EndToEndDB.Data.EndToEnd;
</pre><pre><span>using</span> Microsoft.EntityFrameworkCore;
</pre><pre><span>using</span> System.Collections.Generic;
</pre><pre><span>using</span> System.Linq;
</pre><pre><span>using</span> System.Threading.Tasks;
</pre><pre></pre><pre><span>namespace</span> EndToEnd.Data
</pre><pre>{
</pre><pre>    <span>public</span> <span>class</span> WeatherForecastService
</pre><pre>    {
</pre><pre>        <span>private</span> <span>readonly</span> EndtoEndContext _context;
</pre><pre></pre><pre>        <span>public</span> WeatherForecastService(EndtoEndContext context)
</pre><pre>        {
</pre><pre>            _context = context;
</pre><pre>        }
</pre><pre></pre><pre>        <span>public</span> async Task&lt;List&lt;WeatherForecast&gt;&gt;
</pre><pre>            GetForecastAsync(<span>string</span> strCurrentUser)
</pre><pre>        {
</pre><pre>            <span>// Get Weather Forecasts  </span>
</pre><pre>            <span>return</span> await _context.WeatherForecast
</pre><pre>                 <span>// Only get entries for the current logged in user</span>
</pre><pre>                 .Where(x =&gt; x.UserName == strCurrentUser)
</pre><pre>                 <span>// Use AsNoTracking to disable EF change tracking</span>
</pre><pre>                 <span>// Use ToListAsync to avoid blocking a thread</span>
</pre><pre>                 .AsNoTracking().ToListAsync();
</pre><pre>        }
</pre><pre>    }
</pre><pre>}</pre></pre>



<p>This:</p>



<pre><pre>        <span>private</span> <span>readonly</span> EndtoEndContext _context;
</pre><pre>        <span>public</span> WeatherForecastService(EndtoEndContext context)
</pre><pre>        {
</pre><pre>            _context = context;
</pre><pre>        }</pre></pre>





<p>Connects to the database using the <em>datacontext</em> we created with the <strong>EF Core tools</strong>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_d2d4e04b-a77b-4475-855e-025f5be57a37.png" width="282" height="463"></p>

<p>Finally, open the <strong>FetchData.razor </strong>file.</p>

<p>Replace all the code with the following code:</p>



<pre><pre>@page "/fetchdata"
</pre><pre>@using EndToEnd.Data
</pre><pre>@using EndToEndDB.Data.EndToEnd
</pre><pre>@inject AuthenticationStateProvider AuthenticationStateProvider
</pre><pre>@*
</pre><pre>    Using OwningComponentBase ensures that the service and related services
</pre><pre>    that share its scope are disposed with the component.
</pre><pre>    Otherwise DbContext in ForecastService will live for the life of the
</pre><pre>    connection, which may be problematic if clients stay
</pre><pre>    connected for a long time.
</pre><pre></pre><pre>    We access WeatherForecastService using @Service
</pre><pre>*@
</pre><pre>@inherits OwningComponentBase<span>&lt;</span><span>WeatherForecastService</span><span>&gt;</span>
</pre><pre></pre><pre><span>&lt;</span><span>h1</span><span>&gt;</span>Weather forecast<span>&lt;/</span><span>h1</span><span>&gt;</span>
</pre><pre><span>&lt;!-- AuthorizeView allows us to only show sections of the page --&gt;</span>
</pre><pre><span>&lt;!-- based on the security on the current user --&gt;</span>
</pre><pre><span>&lt;</span><span>AuthorizeView</span><span>&gt;</span>
</pre><pre>    <span>&lt;!-- Show this section if the user is logged in --&gt;</span>
</pre><pre>    <span>&lt;</span><span>Authorized</span><span>&gt;</span>
</pre><pre>        <span>&lt;</span><span>h4</span><span>&gt;</span>Hello, @context.User.Identity.Name!<span>&lt;/</span><span>h4</span><span>&gt;</span>
</pre><pre>        @if (forecasts == null)
</pre><pre>        {
</pre><pre>            <span>&lt;!-- Show this if the current user has no data... yet... --&gt;</span>
</pre><pre>            <span>&lt;</span><span>p</span><span>&gt;</span><span>&lt;</span><span>em</span><span>&gt;</span>Loading...<span>&lt;/</span><span>em</span><span>&gt;</span><span>&lt;/</span><span>p</span><span>&gt;</span>
</pre><pre>        }
</pre><pre>        else
</pre><pre>        {
</pre><pre>            <span>&lt;!-- Show the forecasts for the current user --&gt;</span>
</pre><pre>            <span>&lt;</span><span>table</span> <span>class</span>=<span>"table"</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>thead</span><span>&gt;</span>
</pre><pre>                    <span>&lt;</span><span>tr</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Date<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Temp. (C)<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Temp. (F)<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Summary<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                    <span>&lt;/</span><span>tr</span><span>&gt;</span>
</pre><pre>                <span>&lt;/</span><span>thead</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>tbody</span><span>&gt;</span>
</pre><pre>                    @foreach (var forecast in forecasts)
</pre><pre>                    {
</pre><pre>                        <span>&lt;</span><span>tr</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.Date.Value.ToShortDateString()<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.TemperatureC<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.TemperatureF<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.Summary<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                        <span>&lt;/</span><span>tr</span><span>&gt;</span>
</pre><pre>                    }
</pre><pre>                <span>&lt;/</span><span>tbody</span><span>&gt;</span>
</pre><pre>            <span>&lt;/</span><span>table</span><span>&gt;</span>
</pre><pre>        }
</pre><pre>    <span>&lt;/</span><span>Authorized</span><span>&gt;</span>
</pre><pre>    <span>&lt;!-- Show this section if the user is not logged in --&gt;</span>
</pre><pre>    <span>&lt;</span><span>NotAuthorized</span><span>&gt;</span>
</pre><pre>        <span>&lt;</span><span>p</span><span>&gt;</span>You're not signed in.<span>&lt;/</span><span>p</span><span>&gt;</span>
</pre><pre>    <span>&lt;/</span><span>NotAuthorized</span><span>&gt;</span>
</pre><pre><span>&lt;/</span><span>AuthorizeView</span><span>&gt;</span></pre></pre>

<pre><pre>@code {
</pre><pre>    <span>// AuthenticationState is available as a CascadingParameter</span>
</pre><pre>    [CascadingParameter]
</pre><pre>    <span>private</span> Task&lt;AuthenticationState&gt; authenticationStateTask { <span>get</span>; <span>set</span>; }
</pre><pre>    List&lt;WeatherForecast&gt; forecasts;
</pre><pre></pre><pre>    <span>protected</span> <span>override</span> async Task OnInitializedAsync()
</pre><pre>    {
</pre><pre>        <span>// Get the current user</span>
</pre><pre>        var user = (await authenticationStateTask).User;
</pre><pre></pre><pre>        <span>// Get the forecasts for the current user</span>
</pre><pre>        <span>// We access WeatherForecastService using @Service</span>
</pre><pre>        forecasts = await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>    }
</pre><pre>}</pre></pre>



<p>This code simply calls the <strong>GetForecastAsync</strong> method we created in the previous step, passing the <strong>username</strong> of the currently <em>logged in user</em>.</p>

<p>In a normal web application we would have to make a <em>http web</em> call from this <em>client code</em> to the code that connects to the database.</p>

<p>With server-side <strong>Blazor</strong> we donâ€™t have to do that, yet the call is still secure because the pages are rendered on the server.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_e58e1c69-7b89-4b63-820f-0c94e793be49.png" width="619" height="213"></p>

<p><strong>Build</strong> and run the project.</p>

<p>If we are not logged in, and we go to the <strong>Fetch data</strong> page, we will see a message indicating we are <em>not signed in</em>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_64131f1c-888d-413f-b6f2-52f95225ea62.png" width="611" height="200"></p>

<p>Click the <strong>Login</strong> button.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_90debf96-d04a-436a-8558-00032a0c0914.png" width="585" height="390"></p>

<p><em>Log in</em> as the user we created data for earlier.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_2a0aa7ab-ba84-49c6-aef2-52bde2692765.png" width="612" height="213"></p>

<p>After you are logged in, switch to the <strong>Fetch data</strong> page and you will see the data for the user we entered earlier.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_2dc778ca-de66-4ba2-bde3-3d5a4bd54915.png" width="274" height="447"></p>

<p>Open the <strong>WeatherForecastService.cs</strong> file and <strong><em>add</em></strong> the following method:</p>



<pre><pre>        <span>public</span> Task&lt;WeatherForecast&gt;
</pre><pre>            CreateForecastAsync(WeatherForecast objWeatherForecast)
</pre><pre>        {
</pre><pre>            _context.WeatherForecast.Add(objWeatherForecast);
</pre><pre>            _context.SaveChanges();
</pre><pre></pre><pre>            <span>return</span> Task.FromResult(objWeatherForecast);
</pre><pre>        }</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_d9e0e948-654a-4c55-9536-3e0b78f16101.png" width="273" height="464"></p>

<p>Open the <strong>FetchData.razor </strong>file.</p>

<p>Add the following <strong>HTML markup</strong> directly under the existing <strong><em>table</em></strong> element:</p>



<pre><pre>            <span>&lt;</span><span>p</span><span>&gt;</span>
</pre><pre>                <span>&lt;!-- Add a new forecast --&gt;</span>
</pre><pre>                <span>&lt;</span><span>button</span> <span>class</span>=<span>"btn btn-primary"</span>
</pre><pre>                        @<span>onclick</span>=<span>"AddNewForecast"</span><span>&gt;</span>
</pre><pre>                    Add New Forecast
</pre><pre>                <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>            <span>&lt;/</span><span>p</span><span>&gt;</span></pre></pre>



<p>This adds a <strong>button</strong> to allow a new <em>forecast</em> to be added.</p>

<p>Add the following code below the previous code:</p>



<pre><pre>   @if (ShowPopup)
</pre><pre>            {
</pre><pre>                <span>&lt;!-- This is the popup to create or edit a forecast --&gt;</span>
</pre><pre>                <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal"</span> <span>tabindex</span>=<span>"-1"</span> <span>style</span>=<span>"display:block"</span> <span>role</span>=<span>"dialog"</span><span>&gt;</span>
</pre><pre>                    <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-dialog"</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-content"</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-header"</span><span>&gt;</span>
</pre><pre>                                <span>&lt;</span><span>h3</span> <span>class</span>=<span>"modal-title"</span><span>&gt;</span>Edit Forecast<span>&lt;/</span><span>h3</span><span>&gt;</span>
</pre><pre>                                <span>&lt;!-- Button to close the popup --&gt;</span>
</pre><pre>                                <span>&lt;</span><span>button</span> <span>type</span>=<span>"button"</span> <span>class</span>=<span>"close"</span>
</pre><pre>                                        @<span>onclick</span>=<span>"ClosePopup"</span><span>&gt;</span>
</pre><pre>                                    <span>&lt;</span><span>span</span> <span>aria</span>-<span>hidden</span>=<span>"true"</span><span>&gt;</span>X<span>&lt;/</span><span>span</span><span>&gt;</span>
</pre><pre>                                <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>                            <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>                            <span>&lt;!-- Edit form for the current forecast --&gt;</span>
</pre><pre>                            <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-body"</span><span>&gt;</span>
</pre><pre>                                <span>&lt;</span><span>input</span> <span>class</span>=<span>"form-control"</span> <span>type</span>=<span>"text"</span>
</pre><pre>                                       <span>placeholder</span>=<span>"Celsius forecast"</span>
</pre><pre>                                       @<span>bind</span>=<span>"objWeatherForecast.TemperatureC"</span> <span>/&gt;</span>
</pre><pre>                                <span>&lt;</span><span>input</span> <span>class</span>=<span>"form-control"</span> <span>type</span>=<span>"text"</span>
</pre><pre>                                       <span>placeholder</span>=<span>"Fahrenheit forecast"</span>
</pre><pre>                                       @<span>bind</span>=<span>"objWeatherForecast.TemperatureF"</span> <span>/&gt;</span>
</pre><pre>                                <span>&lt;</span><span>input</span> <span>class</span>=<span>"form-control"</span> <span>type</span>=<span>"text"</span>
</pre><pre>                                       <span>placeholder</span>=<span>"Summary"</span>
</pre><pre>                                       @<span>bind</span>=<span>"objWeatherForecast.Summary"</span> <span>/&gt;</span>
</pre><pre>                                <span>&lt;</span><span>br</span> <span>/&gt;</span>
</pre><pre>                                <span>&lt;!-- Button to save the forecast --&gt;</span>
</pre><pre>                                <span>&lt;</span><span>button</span> <span>class</span>=<span>"btn btn-primary"</span>
</pre><pre>                                        @<span>onclick</span>=<span>"SaveForecast"</span><span>&gt;</span>
</pre><pre>                                    Save
</pre><pre>                                <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>                            <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>                        <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>                    <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>                <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>            }</pre></pre>



<p>This adds a form (that will be displayed a <em>popup</em> because the class for the DIV is <em>modal</em>), that allows the user to enter (and later <em>edit</em>) data for a forecast. </p>

<p>We do not need <em>JavaScript</em> to make this <strong>popup</strong> show. We only need to wrap this code with:</p>



<pre><pre><pre>            @<span>if</span> (ShowPopup)
</pre><pre>            {
</pre><pre>                ...
</pre><pre>            }</pre></pre></pre>



<p>When the <strong>ShowPopup</strong> value is <em>true</em> the <strong>popup</strong> will show. When the value is <em>false</em>, the <strong>popup</strong> will disappear.</p>

<p>Add the following code to the <span>@code</span> section:</p>



<pre><pre>    WeatherForecast objWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre></pre><pre>    <span>bool</span> ShowPopup = <span>false</span>;
</pre><pre>    <span>void</span> ClosePopup()
</pre><pre>    {
</pre><pre>        <span>// Close the Popup</span>
</pre><pre>        ShowPopup = <span>false</span>;
</pre><pre>    }
</pre><pre>    <span>void</span> AddNewForecast()
</pre><pre>    {
</pre><pre>        <span>// Make new forecast</span>
</pre><pre>        objWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>        <span>// Set Id to 0 so we know it is a new record</span>
</pre><pre>        objWeatherForecast.Id = 0;
</pre><pre>        <span>// Open the Popup</span>
</pre><pre>        ShowPopup = <span>true</span>;
</pre><pre>    }
</pre><pre>    async Task SaveForecast()
</pre><pre>    {
</pre><pre>        <span>// Close the Popup</span>
</pre><pre>        ShowPopup = <span>false</span>;
</pre><pre>        <span>// Get the current user</span>
</pre><pre>        var user = (await authenticationStateTask).User;
</pre><pre>        <span>// A new forecast will have the Id set to 0</span>
</pre><pre>        <span>if</span> (objWeatherForecast.Id == 0)
</pre><pre>        {
</pre><pre>            <span>// Create new forecast</span>
</pre><pre>            WeatherForecast objNewWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>            objNewWeatherForecast.Date = System.DateTime.Now;
</pre><pre>            objNewWeatherForecast.Summary = objWeatherForecast.Summary;
</pre><pre>            objNewWeatherForecast.TemperatureC =
</pre><pre>            Convert.ToInt32(objWeatherForecast.TemperatureC);
</pre><pre>            objNewWeatherForecast.TemperatureF =
</pre><pre>            Convert.ToInt32(objWeatherForecast.TemperatureF);
</pre><pre>            objNewWeatherForecast.UserName = user.Identity.Name;
</pre><pre>            <span>// Save the result</span>
</pre><pre>            var result =
</pre><pre>            @Service.CreateForecastAsync(objNewWeatherForecast);
</pre><pre>        }
</pre><pre>        <span>else</span>
</pre><pre>        {
</pre><pre>            <span>// This is an update</span>
</pre><pre>        }
</pre><pre>        <span>// Get the forecasts for the current user</span>
</pre><pre>        forecasts =
</pre><pre>        await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>    }</pre></pre>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_35910a25-4b9d-4d9b-a507-78e662266c5f.png" width="610" height="268"></p>

<p>When you run the project, you can click the <strong>Add New Forecast</strong> button to <em>add</em> an entry.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_9c2cf8c4-c2c4-4f2a-b320-05438674af44.png" width="602" height="275"></p>

<p>The form only requires a <strong>Fahrenheit</strong>, <strong>Celsius</strong>, and a <strong>summary</strong>, because the other values (<strong>date</strong> and <strong>username</strong>), will be set by the code. </p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_191ab6be-f04f-402e-954f-3879de936191.png" width="606" height="304"></p>

<p>After clicking the <strong>Save </strong>button, the entry is <em>saved</em> to the database and displayed.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_461e8588-0405-4e84-839e-1959c3f1da88.png" width="274" height="447"></p>

<p>Open the <strong>WeatherForecastService.cs</strong> file and <strong><em>add</em></strong> the following method:</p>



<pre><pre>     <span>public</span> Task&lt;<span>bool</span>&gt;
</pre><pre>            UpdateForecastAsync(WeatherForecast objWeatherForecast)
</pre><pre>        {
</pre><pre>            var ExistingWeatherForecast =
</pre><pre>                _context.WeatherForecast
</pre><pre>                .Where(x =&gt; x.Id == objWeatherForecast.Id)
</pre><pre>                .FirstOrDefault();
</pre><pre></pre><pre>            <span>if</span> (ExistingWeatherForecast != <span>null</span>)
</pre><pre>            {
</pre><pre>                ExistingWeatherForecast.Date =
</pre><pre>                    objWeatherForecast.Date;
</pre><pre></pre><pre>                ExistingWeatherForecast.Summary =
</pre><pre>                    objWeatherForecast.Summary;
</pre><pre></pre><pre>                ExistingWeatherForecast.TemperatureC =
</pre><pre>                    objWeatherForecast.TemperatureC;
</pre><pre></pre><pre>                ExistingWeatherForecast.TemperatureF =
</pre><pre>                    objWeatherForecast.TemperatureF;
</pre><pre></pre><pre>                _context.SaveChanges();
</pre><pre>            }
</pre><pre>            <span>else</span>
</pre><pre>            {
</pre><pre>                <span>return</span> Task.FromResult(<span>false</span>);
</pre><pre>            }
</pre><pre></pre><pre>            <span>return</span> Task.FromResult(<span>true</span>);
</pre><pre>        }</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_872fc765-4179-4cd2-acb8-4b53b06a8f97.png" width="273" height="464"></p>

<p>Open the <strong>FetchData.razor </strong>file.</p>

<p>Replace the existing <strong><em>table</em></strong> element with the following markup that adds an <strong>edit</strong> button in the last column (that calls the <strong>EditForecast</strong> method we will add in the next step):</p>



<pre><pre>           <span>&lt;</span><span>table</span> <span>class</span>=<span>"table"</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>thead</span><span>&gt;</span>
</pre><pre>                    <span>&lt;</span><span>tr</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Date<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Temp. (C)<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Temp. (F)<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span>Summary<span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>th</span><span>&gt;</span><span>&lt;/</span><span>th</span><span>&gt;</span>
</pre><pre>                    <span>&lt;/</span><span>tr</span><span>&gt;</span>
</pre><pre>                <span>&lt;/</span><span>thead</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>tbody</span><span>&gt;</span>
</pre><pre>                    @foreach (var forecast in forecasts)
</pre><pre>                    {
</pre><pre>                        <span>&lt;</span><span>tr</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.Date.Value.ToShortDateString()<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.TemperatureC<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.TemperatureF<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>@forecast.Summary<span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                            <span>&lt;</span><span>td</span><span>&gt;</span>
</pre><pre>                                <span>&lt;!-- Edit the current forecast --&gt;</span>
</pre><pre>                                <span>&lt;</span><span>button</span> <span>class</span>=<span>"btn btn-primary"</span>
</pre><pre>                                        @<span>onclick</span>=<span>"(() =&gt; EditForecast(forecast))"</span><span>&gt;</span>
</pre><pre>                                    Edit
</pre><pre>                                <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>                            <span>&lt;/</span><span>td</span><span>&gt;</span>
</pre><pre>                        <span>&lt;/</span><span>tr</span><span>&gt;</span>
</pre><pre>                    }
</pre><pre>                <span>&lt;/</span><span>tbody</span><span>&gt;</span>
</pre><pre>            <span>&lt;/</span><span>table</span><span>&gt;</span></pre></pre>



<p>Add the following code to the <span>@code</span> section:</p>



<pre><pre>    <span>void</span> EditForecast(WeatherForecast weatherForecast)
</pre><pre>    {
</pre><pre>        <span>// Set the selected forecast</span>
</pre><pre>        <span>// as the current forecast</span>
</pre><pre>        objWeatherForecast = weatherForecast;
</pre><pre></pre><pre>        <span>// Open the Popup</span>
</pre><pre>        ShowPopup = <span>true</span>;
</pre><pre>    }</pre></pre>



<p>This sets the current record to the <strong>objWeatherForecast</strong> object that the <strong>popup</strong> is bound to, and opens the <strong>popup</strong>.</p>

<p>Finally, change the existing <strong>SaveForecast</strong> method to the following:</p>



<pre><pre>    async Task SaveForecast()
</pre><pre>    {
</pre><pre>        <span>// Close the Popup</span>
</pre><pre>        ShowPopup = <span>false</span>;
</pre><pre>        <span>// Get the current user</span>
</pre><pre>        var user = (await authenticationStateTask).User;
</pre><pre>        <span>// A new forecast will have the Id set to 0</span>
</pre><pre>        <span>if</span> (objWeatherForecast.Id == 0)
</pre><pre>        {
</pre><pre>            <span>// Create new forecast</span>
</pre><pre>            WeatherForecast objNewWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>            objNewWeatherForecast.Date = System.DateTime.Now;
</pre><pre>            objNewWeatherForecast.Summary = objWeatherForecast.Summary;
</pre><pre>            objNewWeatherForecast.TemperatureC =
</pre><pre>            Convert.ToInt32(objWeatherForecast.TemperatureC);
</pre><pre>            objNewWeatherForecast.TemperatureF =
</pre><pre>            Convert.ToInt32(objWeatherForecast.TemperatureF);
</pre><pre>            objNewWeatherForecast.UserName = user.Identity.Name;
</pre><pre>            <span>// Save the result</span>
</pre><pre>            var result =
</pre><pre>            @Service.CreateForecastAsync(objNewWeatherForecast);
</pre><pre>        }
</pre><pre>        <span>else</span>
</pre><pre>        {
</pre><pre>            <span>// This is an update</span>
</pre><pre>            var result =
</pre><pre>            @Service.UpdateForecastAsync(objWeatherForecast);
</pre><pre>        }
</pre><pre>        <span>// Get the forecasts for the current user</span>
</pre><pre>        forecasts =
</pre><pre>        await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>    }</pre></pre>



<p>This simply adds one line: </p>



<pre><pre>            <span>// This is an update</span>
</pre><pre>            var result =
</pre><pre>            @Service.UpdateForecastAsync(objWeatherForecast);</pre></pre>



<p>To the existing method to handle an <em>update</em> rather than an <em>insert</em>.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_ce0c6145-3bc3-418b-bfb6-27a628e3e56d.png" width="608" height="342"></p>

<p>When we run the application, we now have an <strong>Edit</strong> button to <em>edit</em> the existing record.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_b846a9de-3655-4672-a6db-03802e7806d7.png" width="596" height="345"></p>

<p>The existing record will display in the <strong>popup</strong>, allowing us to <em>edit</em> the data and <em>save</em> it.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_38142246-f68e-49e8-b19b-7f6cdfb5ac06.png" width="611" height="343"></p>

<p>The updated record is then displayed in the table.</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_8a177dfc-72f2-4df9-ae59-35547fb39dac.png" width="274" height="447"></p>

<p>Open the <strong>WeatherForecastService.cs</strong> file and <strong><em>add</em></strong> the following method:</p>



<pre><pre>        <span>public</span> Task&lt;<span>bool</span>&gt;
</pre><pre>            DeleteForecastAsync(WeatherForecast objWeatherForecast)
</pre><pre>        {
</pre><pre>            var ExistingWeatherForecast =
</pre><pre>                _context.WeatherForecast
</pre><pre>                .Where(x =&gt; x.Id == objWeatherForecast.Id)
</pre><pre>                .FirstOrDefault();
</pre><pre></pre><pre>            <span>if</span> (ExistingWeatherForecast != <span>null</span>)
</pre><pre>            {
</pre><pre>                _context.WeatherForecast.Remove(ExistingWeatherForecast);
</pre><pre>                _context.SaveChanges();
</pre><pre>            }
</pre><pre>            <span>else</span>
</pre><pre>            {
</pre><pre>                <span>return</span> Task.FromResult(<span>false</span>);
</pre><pre>            }
</pre><pre></pre><pre>            <span>return</span> Task.FromResult(<span>true</span>);
</pre><pre>        }</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_c7cdf057-57b2-482e-a179-2a662639eb26.png" width="273" height="464"></p>

<p>Open the <strong>FetchData.razor </strong>file.</p>

<p>Add code markup for a <strong>Delete</strong> button under the code markup for the current <strong>Save</strong> button in the <strong>popup</strong>:</p>



<pre><pre>            <span>&lt;!-- Only show delete button if not a new record --&gt;</span>
</pre><pre>            @if (objWeatherForecast.Id &gt; 0)
</pre><pre>            {
</pre><pre>                <span>&lt;!-- Button to delete the forecast --&gt;</span>
</pre><pre>                <span>&lt;</span><span>button</span> <span>class</span>=<span>"btn btn-primary"</span>
</pre><pre>                        @<span>onclick</span>=<span>"DeleteForecast"</span><span>&gt;</span>
</pre><pre>                    Delete
</pre><pre>                <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>            }</pre></pre>



<p>Add the following code to the <span>@code</span> section:</p>



<pre><pre>    async Task DeleteForecast()
</pre><pre>    {
</pre><pre>        <span>// Close the Popup</span>
</pre><pre>        ShowPopup = <span>false</span>;
</pre><pre></pre><pre>        <span>// Get the current user</span>
</pre><pre>        var user = (await authenticationStateTask).User;
</pre><pre></pre><pre>        <span>// Delete the forecast</span>
</pre><pre>        var result = @Service.DeleteForecastAsync(objWeatherForecast);
</pre><pre></pre><pre>        <span>// Get the forecasts for the current user</span>
</pre><pre>        forecasts =
</pre><pre>        await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>    }</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_87d60762-3045-47fa-b01e-4f7e260efbc5.png" width="611" height="343"></p>

<p>When we run the code and click the <strong>Edit</strong> buttonâ€¦</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_229bb6e8-2333-471e-9dc0-ff71e05cd276.png" width="608" height="338"></p>

<p>â€¦ we now see a <strong>Delete</strong> button that will <em>delete</em> the record.</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_6ee1cf07-f060-4798-863b-4447699d85ae.png" width="612" height="344"></p>

<p>However, when we <em>click</em> the <strong>Add New Forecast</strong> button that opens the same <strong>popup</strong>â€¦</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-80d4843c2355_E94F-image_7de0960a-2eb1-415a-9499-6eec4f1614b8.png" width="595" height="338"></p>

<p>The <strong>delete button</strong> does not display (because there is no record to delete at this point).</p>





<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4318/Windows-Live-Writer-Creating-A-Step-By-Step-End-To-End-Datab_A1B5-image_c0fa60f5-7f75-4965-ba61-fb738c1abb1f.png" width="243" height="482"></p>

<p>We can code our<strong> .razor</strong> pages using an <span>@code</span> block with <strong>HTML markup</strong> in a single file, or with the <strong>C#</strong> code placed in a <em>code-behind</em> file defined as a <strong>partial class</strong>.</p>

<p>Create a new class called <strong>FetchData.razor.cs</strong> using the following code:</p>



<pre><pre><span>using</span> EndToEndDB.Data.EndToEnd;
</pre><pre><span>using</span> Microsoft.AspNetCore.Components;
</pre><pre><span>using</span> Microsoft.AspNetCore.Components.Authorization;
</pre><pre><span>using</span> System;
</pre><pre><span>using</span> System.Collections.Generic;
</pre><pre><span>using</span> System.Threading.Tasks;
</pre><pre></pre><pre><span>namespace</span> EndToEnd.Pages
</pre><pre>{
</pre><pre>    <span>public</span> partial <span>class</span> FetchData
</pre><pre>    {
</pre><pre>        <span>// AuthenticationState is available as a CascadingParameter</span>
</pre><pre>        [CascadingParameter]
</pre><pre>        <span>private</span> Task&lt;AuthenticationState&gt; authenticationStateTask { <span>get</span>; <span>set</span>; }
</pre><pre>        List&lt;WeatherForecast&gt; forecasts;
</pre><pre></pre><pre>        <span>protected</span> <span>override</span> async Task OnInitializedAsync()
</pre><pre>        {
</pre><pre>            <span>// Get the current user</span>
</pre><pre>            var user = (await authenticationStateTask).User;
</pre><pre>            <span>// Get the forecasts for the current user</span>
</pre><pre>            <span>// We access WeatherForecastService using @Service</span>
</pre><pre>            forecasts = await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>        }
</pre><pre></pre><pre>        WeatherForecast objWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>        <span>bool</span> ShowPopup = <span>false</span>;
</pre><pre></pre><pre>        <span>void</span> ClosePopup()
</pre><pre>        {
</pre><pre>            <span>// Close the Popup</span>
</pre><pre>            ShowPopup = <span>false</span>;
</pre><pre>        }
</pre><pre>        <span>void</span> AddNewForecast()
</pre><pre>        {
</pre><pre>            <span>// Make new forecast</span>
</pre><pre>            objWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>            <span>// Set Id to 0 so we know it is a new record</span>
</pre><pre>            objWeatherForecast.Id = 0;
</pre><pre>            <span>// Open the Popup</span>
</pre><pre>            ShowPopup = <span>true</span>;
</pre><pre>        }
</pre><pre></pre><pre>        async Task SaveForecast()
</pre><pre>        {
</pre><pre>            <span>// Close the Popup</span>
</pre><pre>            ShowPopup = <span>false</span>;
</pre><pre>            <span>// Get the current user</span>
</pre><pre>            var user = (await authenticationStateTask).User;
</pre><pre>            <span>// A new forecast will have the Id set to 0</span>
</pre><pre>            <span>if</span> (objWeatherForecast.Id == 0)
</pre><pre>            {
</pre><pre>                <span>// Create new forecast</span>
</pre><pre>                WeatherForecast objNewWeatherForecast = <span>new</span> WeatherForecast();
</pre><pre>                objNewWeatherForecast.Date = System.DateTime.Now;
</pre><pre>                objNewWeatherForecast.Summary = objWeatherForecast.Summary;
</pre><pre>                objNewWeatherForecast.TemperatureC =
</pre><pre>                Convert.ToInt32(objWeatherForecast.TemperatureC);
</pre><pre>                objNewWeatherForecast.TemperatureF =
</pre><pre>                Convert.ToInt32(objWeatherForecast.TemperatureF);
</pre><pre>                objNewWeatherForecast.UserName = user.Identity.Name;
</pre><pre>                <span>// Save the result</span>
</pre><pre>                var result =
</pre><pre>                @Service.CreateForecastAsync(objNewWeatherForecast);
</pre><pre>            }
</pre><pre>            <span>else</span>
</pre><pre>            {
</pre><pre>                <span>// This is an update</span>
</pre><pre>                var result =
</pre><pre>                @Service.UpdateForecastAsync(objWeatherForecast);
</pre><pre>            }
</pre><pre>            <span>// Get the forecasts for the current user</span>
</pre><pre>            forecasts =
</pre><pre>            await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>        }
</pre><pre></pre><pre>        <span>void</span> EditForecast(WeatherForecast weatherForecast)
</pre><pre>        {
</pre><pre>            <span>// Set the selected forecast</span>
</pre><pre>            <span>// as the current forecast</span>
</pre><pre>            objWeatherForecast = weatherForecast;
</pre><pre>            <span>// Open the Popup</span>
</pre><pre>            ShowPopup = <span>true</span>;
</pre><pre>        }
</pre><pre></pre><pre>        async Task DeleteForecast()
</pre><pre>        {
</pre><pre>            <span>// Close the Popup</span>
</pre><pre>            ShowPopup = <span>false</span>;
</pre><pre>            <span>// Get the current user</span>
</pre><pre>            var user = (await authenticationStateTask).User;
</pre><pre>            <span>// Delete the forecast</span>
</pre><pre>            var result = @Service.DeleteForecastAsync(objWeatherForecast);
</pre><pre>            <span>// Get the forecasts for the current user</span>
</pre><pre>            forecasts =
</pre><pre>            await @Service.GetForecastAsync(user.Identity.Name);
</pre><pre>        }
</pre><pre>    }
</pre><pre>}
</pre><pre></pre></pre><p>
Remove the <em>entire</em> <span>@code</span> bock from the <strong>FetchData.razor</strong> page. 

</p><p>The application will still behave the same.</p>





<p><strong><a href="https://blazor.net/">Blazor.net</a></strong></p>

<p><a href="https://docs.microsoft.com/en-us/aspnet/core/security/blazor/?view=aspnetcore-3.0&amp;tabs=visual-studio">ASP.NET Core Blazor authentication and authorization</a></p>

<p><a href="https://marketplace.visualstudio.com/items?itemName=ErikEJ.EFCorePowerTools">EF Core Power Tools</a></p>

<p><a href="https://github.com/aspnet/AspNetCore/issues/5496">OwningComponentBase (background)</a></p>





<p>The project is available at <a href="http://blazorhelpwebsite.com/Downloads.aspx">http://BlazorHelpWebsite.com/Downloads.aspx</a></p>

<p>You must have <strong>Visual Studio 2019 Version 16.3 </strong>(or higher) installed to run the code.</p>
 
 <!-- End Blog Entry -->
 <!-- Blog Entry Footer Section -->
 
 
 
 <!-- Comments Section -->
 <div id="dnn_ctr382_MainView_ViewEntry_pnlComments">
		
  <p>
   <a id="Comments" name="Comments"></a>
   <a href="#AddComment"><span id="dnn_ctr382_MainView_ViewEntry_lblComments">17 comment(s) so far...</span></a>
  </p>
  
  <br>
  <table id="dnn_ctr382_MainView_ViewEntry_lstComments">
			<tbody><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_0">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_0" src="http://www.gravatar.com/avatar/e74f016b5e3efae5abc959464a5f0083?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_0">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <div><p>
       Great work.</p><p>Everyone should use your project as a template, for any business web app.</p><p>Cheers
      </p></div>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_0">By kalvin on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_0">12/29/2019 2:20 PM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_1">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_1" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_1">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @kalvin  - Thank you for the support!
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_1">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_1">12/29/2019 2:20 PM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_2">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_2" src="http://www.gravatar.com/avatar/d29d897f011fba012cfa759b1b5e0313?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_2">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       Hi, many, many thanks for this tutorial. Very helpful.<br>But how can I use an own loging page or can change the default? (I don't find it in project).<br>Greetings <br>Andy
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_2">By Andy on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_2">12/30/2019 5:30 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_3">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_3" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_3">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Andy - See this link to scaffold identity pages so you can customize them: https://docs.microsoft.com/en-us/aspnet/core/security/authentication/scaffold-identity?view=aspnetcore-3.1&amp;tabs=visual-studio
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_3">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_3">12/30/2019 5:31 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_4">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_4" src="http://www.gravatar.com/avatar/d29d897f011fba012cfa759b1b5e0313?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_4">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       Thanks you!!! :)
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_4">By Andy on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_4">12/31/2019 4:36 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_5">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_5" src="http://www.gravatar.com/avatar/86ef3ddf8a7aeead5f80657004beac74?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_5">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <div><p>
       Hi Michael, <br>thank you for the article! It is very useful.</p><p>To the sample: how to replace Identity functionality (Register, Login) with PostgreSQL identity implementation :<br>https://github.com/Robynhu/AspNetCore.Identity.PostgreSQL</p><p>It uses PG as a Storage, it does not use EF, and it is light and comfortable.</p></div>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_5">By Oleg on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_5">1/3/2020 4:28 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_6">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_6" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_6">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Oleg - I have no way of trying it myself because I don't use PostgreSQL, but, it should work. 
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_6">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_6">1/3/2020 4:29 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_7">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_7" src="http://www.gravatar.com/avatar/4d62c6565ab379750f991943c49b0bf8?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_7">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <div><p>
       Great example .. thank you.</p><p>Have enjoy your work for years back to the DNN days.</p><p>However download link for this article seems to be broken.  - I got the Blazor Cookie download instead ??</p><p>Thanks <br>Paul.
      </p></div>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_7">By Paul Scarlett on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_7">1/6/2020 12:52 PM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_8">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_8" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_8">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Paul Scarlett - "BlazorCookieAuthInsertDatabase.zip" is the correct version :)
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_8">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_8">1/6/2020 12:54 PM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_9">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_9" src="http://www.gravatar.com/avatar/bcc6e0c81e5df7e50eff309ac94fc7ad?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_9">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <div><p>
       Muchas gracias, me ayudo bastante.</p><p>Te mando saludos desde Lima - Peru.
      </p></div>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_9">By Fredy Gonzales on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_9">1/7/2020 4:57 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_10">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_10" src="http://www.gravatar.com/avatar/6956dde8eb7f8208a433106bea75aee9?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_10">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <div><p>
       Tried a few times, but got Error..</p><p>An unhandled exception occurred while processing the request.<br>SqlException: Invalid object name 'WeatherForecast'.<br>Microsoft.Data.SqlClient.SqlCommand+c.b__164_0(Task result)<br>....<br> + 22  return await _context.WeatherForecast<br>...<br>  +23        forecasts = await @Service.GetForecastAsync(user.Identity.Name);</p><p>Any help?<br>ty.
      </p></div>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_10">By Mabaega on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_10">1/26/2020 8:56 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_11">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_11" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_11">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Mabaega  - It appears you did not create the database table properly, or your database connection string is incorrect.
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_11">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_11">1/26/2020 8:57 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_12">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_12" src="http://www.gravatar.com/avatar/ec96a0e7dcbcfb6ad1e6d33c84107f17?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_12">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       Hi, Michael, thank you for your post. I start to use "OwningComponentBase", but I have some problems related to db context. When I start the app and use different SignalR connections (two different browser tabs) when I change data from the one tab and retrieve it in another, there is no change, if I retrieve it in the first tab, data is changed. With your app, I don`t have this problem. Could be the problem found in that you use two db context one for "Identity" and one for data - EndToEndContext and the context is partial or in mixing async-await methods like you and return "Task.FromResult()", instead of using await and async versions of methods. Thank you for your time, again :)!
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_12">By Sashko on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_12">2/5/2020 8:48 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_13">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_13" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_13">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Sashko - I think the difference is not in OwningComponentBase, but that the .razor page code is not holding the Entity Framework DataContext change tracking using code like "AsNoTracking". This 'breaks' the connection between what the person is doing and the particular SignalR connection and the database operations.
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_13">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_13">2/5/2020 8:53 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_14">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_14" src="http://www.gravatar.com/avatar/ec96a0e7dcbcfb6ad1e6d33c84107f17?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_14">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Michael - Thank you for your answer, I try already with this approach in my project and everything is working fine. I don`t need to create different scopes for every request to get new data. Thank you very much :)!
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_14">By Sashko on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_14">2/6/2020 4:32 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_15">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_15" src="http://www.gravatar.com/avatar/25be44b046609b116476cbf5c822bccc?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_15">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       Hi Michael:I bought your book and now I'm going through the tutorial for .Net Core 3.1. I am getting an error after I update the FetchData.razor File and run the solution. Here is the message I am getting with the error:Message=Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: ...
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_15">By Dan  on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_15">2/8/2020 5:10 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr><tr>
				<td>
    <div id="dnn_ctr382_MainView_ViewEntry_lstComments_divBlogBubble_16">
					
     <blockquote>
      <p><img id="dnn_ctr382_MainView_ViewEntry_lstComments_imgGravatar_16" src="http://www.gravatar.com/avatar/7127d88b22518f086edc3f3edc6c24db?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar">
      
					</p>
      <p>
       
       
       
       
       
       
       <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblTitle_16">Re: Creating A Step-By-Step End-To-End Database Server-Side Blazor Application (updated to .Net Core 3.1)</span>
      </p>
      <p>
       @Dan - Your startup.cs file does not seem to have all needed elements. You will want to download the sample project from this site and compare the code to your own.
      </p>
     </blockquote>
     <p><cite>
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblUserName_16">By Michael Washington on </span>
      &nbsp;
      <span id="dnn_ctr382_MainView_ViewEntry_lstComments_lblCommentDate_16">2/8/2020 5:12 AM</span>
     </cite>
    
				</p></div>
   </td>
			</tr>
		</tbody></table>
 
	</div>
 
 <div id="dnn_ctr382_MainView_ViewEntry_pnlAddComment">
		
  <table>
   <tbody><tr>
    <td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblAuthor">Your name:</span>
    </td>
    <td id="dnn_ctr382_MainView_ViewEntry_tdAuthor" colspan="1">
     
    </td>
		
    <td id="dnn_ctr382_MainView_ViewEntry_tdGravatarPreview" rowspan="2">
     <p><img id="dnn_ctr382_MainView_ViewEntry_imgGravatarPreview" src="http://www.gravatar.com/avatar/108eeb4a0bc2c8c85cad9dde10e1319e?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar Preview">
     </p>
    </td>
		
   </tr>
   <tr id="dnn_ctr382_MainView_ViewEntry_trGravatarEmail">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblEmail">Your email:</span>
    </td>
			<td>
     
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trUseGravatar">
			<td>
    </td>
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblEmailExplanation">(Optional) Email used only to show <a href="http://www.gravatar.com/" target="_new">Gravatar</a>.</span>
    </td>
			<td>
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trCommentWebsite">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblWebsite">Your website:</span>
    </td>
			<td colspan="2">
     
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trCommentTitle">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblCommentTitle">Title:</span>
    </td>
			<td colspan="2">
     
    </td>
		</tr>
		
   <tr>
    <td colspan="3">
     <span id="dnn_ctr382_MainView_ViewEntry_lblComment">Comment:</span>
    </td>
   </tr>
   <tr>
    <td colspan="3">
     
    </td>
   </tr>
   <tr id="dnn_ctr382_MainView_ViewEntry_rowCaptcha">
			<td colspan="3">
     <span id="dnn_ctr382_MainView_ViewEntry_lblCaptcha">Security Code</span>
     <div>
				<p><img src="http://blazorhelpwebsite.com/DesktopModules/Blog/ImageChallenge.captcha.aspx?captcha=CFFBA9F017E426BDFEED565C0C2D3CAEFA21189F2A5B6CE7F2AFFD3140FA72EDB541D6AFB1DDBE792F77C5D358521EF0510F61F57A1D10BD6E234BDD7AF0D106D25298833CF7A31F73549B5101A4004F52CEFF702910327420F2C8F1279DED6ABB68F5130F28F8D04165EE2B767FE6DB6C97719D0620E4A68CE97BE5&amp;alias=blazorhelpwebsite.com" alt="CAPTCHA image"></p><p>
					Enter the code shown above in the box below
				</p></div>
    </td>
		</tr>
		
   <tr>
    <td colspan="3">
     Add Comment&nbsp;&nbsp;
     Cancel&nbsp;
     
    </td>
   </tr>
  </tbody></table>
  
 
	</div>
</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>