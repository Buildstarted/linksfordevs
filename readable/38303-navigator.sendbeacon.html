<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Navigator.sendBeacon() -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Navigator.sendBeacon()</h1>
    <p id="content" class="article"><article id="wikiArticle"> <p>The <code><strong>navigator.sendBeacon()</strong></code> method can be used to asynchronously transfer a small amount of data over <a class="glossaryLink" href="/en-US/docs/Glossary/HTTP">HTTP</a> to a web server.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">navigator.sendBeacon(<var>url</var>, <var>data</var>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code><var>url</var></code></dt> <dd>The <var>url</var> parameter indicates the resolved URL to which the <var>data</var> is to be transmitted.</dd> <dt><code><var>data</var></code></dt> <dd>The <var>data</var> parameter is an <a href="/en-US/docs/Web/API/ArrayBuffer"><code>ArrayBuffer</code></a>, <a href="/en-US/docs/Web/API/ArrayBufferView"><code>ArrayBufferView</code></a>, <a href="/en-US/docs/Web/API/Blob"><code>Blob</code></a>, <a href="/en-US/docs/Web/API/DOMString"><code>DOMString</code></a>, <a href="/en-US/docs/Web/API/FormData"><code>FormData</code></a>, <a href="/en-US/docs/Web/API/ReadableStream"><code>ReadableStream</code></a>, or <a href="/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a> object containing the data to be transmitted.</dd>
</dl> <h3 id="Return_values">Return values</h3> <p>The <code><strong>sendBeacon()</strong></code> method returns <code>true</code> if the user agent is able to successfully queue the <code>data</code> for transfer, Otherwise it returns <code>false</code>.</p> <h2 id="Description">Description</h2> <p>This method addresses the needs of analytics and diagnostics code that typically attempts to send data to a web server prior to the unloading of the document. Sending the data any sooner may result in a missed opportunity to gather data. However, ensuring that the data has been sent during the unloading of a document is something that has traditionally been difficult for developers, because user agents typically ignore asynchronous <a href="/en-US/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a>s made in an <code><a href="/en-US/docs/Web/Events/unload">unload</a></code> handler.</p> <p>To solve this problem, analytics and diagnostics code have historically made a synchronous <code>XMLHttpRequest</code> call in an <code>unload</code> or <code><a href="/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event handler to submit the data. The synchronous <code>XMLHttpRequest</code> blocks the process of unloading the document, which in turn causes the next navigation appear to be slower. There is nothing the next page can do to avoid this perception of poor page load performance, and the result is that the user perceives that the new web page is slow to load, even though the true issue is with the previous page.</p> <p>There are other workaround techniques which have been used to ensure that this kind of data is submitted. One such technique is to delay the unload in order to submit data by creating an <a href="/en-US/docs/Web/HTML/Element/img"><code>&lt;img&gt;</code></a> element and setting its <code>src</code> attribute within the unload handler. As most user agents will delay the unload to complete the pending image load, data can be submitted during the unload. Another technique is to create a no-op loop for several seconds within the unload handler to delay the unload and submit data to a server.</p> <p>Not only do these techniques represent poor coding patterns, some of them are unreliable and all of them result in the perception of poor page load performance for the next navigation.</p> <p>The following example shows a theoretical analytics code that attempts to submit data to a server by using a synchronous <code>XMLHttpRequest</code> in an unload handler. This results in the unload of the page to be delayed.</p> <pre class="brush: js">window.addEventListener(&quot;unload&quot;, logData, false);

function logData() {
  var client = new XMLHttpRequest();
  client.open(&quot;POST&quot;, &quot;/log&quot;, false); // third parameter indicates sync xhr
  client.setRequestHeader(&quot;Content-Type&quot;, &quot;text/plain;charset=UTF-8&quot;);
  client.send(analyticsData);
}
</pre> <p>This is where <code><strong>sendBeacon()</strong></code> comes in. By using the <code>sendBeacon()</code> method, the data is transmitted asynchronously to the web server when the User Agent has an opportunity to do so, without delaying the unload or affecting the performance of the next navigation. This solves all of the problems with submission of analytics data: the data is sent reliably, it&apos;s sent asynchronously, and it doesn&apos;t impact the loading of the next page. In addition, the code is actually simpler to write than any of these other techniques!</p> <p>The following example shows a theoretical analytics code pattern that submits data to a server using the <code>sendBeacon()</code> method.</p> <pre class="brush: js">window.addEventListener(&quot;unload&quot;, logData, false);

function logData() {
  navigator.sendBeacon(&quot;/log&quot;, analyticsData);
}
</pre> <p>As with XHR, the beacon request will be sent with all relevant cookies available at the time <code><strong>sendBeacon()</strong></code> is called.</p> <h2 id="Specifications">Specifications</h2> <h2 id="Browser_compatibility">Browser compatibility</h2> <div class="bc-data"><a class="bc-github-link external" href="https://github.com/mdn/browser-compat-data">Update compatibility data on GitHub</a><table class="bc-table bc-table-web"><thead><tr class="bc-platforms"><td></td><th class="bc-platform-desktop"><span>Desktop</span></th><th class="bc-platform-mobile"><span>Mobile</span></th></tr><tr class="bc-browsers"><td></td><th class="bc-browser-chrome"><span class="bc-head-txt-label bc-head-icon-chrome">Chrome</span></th><th class="bc-browser-edge"><span class="bc-head-txt-label bc-head-icon-edge">Edge</span></th><th class="bc-browser-firefox"><span class="bc-head-txt-label bc-head-icon-firefox">Firefox</span></th><th class="bc-browser-ie"><span class="bc-head-txt-label bc-head-icon-ie">Internet Explorer</span></th><th class="bc-browser-opera"><span class="bc-head-txt-label bc-head-icon-opera">Opera</span></th><th class="bc-browser-safari"><span class="bc-head-txt-label bc-head-icon-safari">Safari</span></th><th class="bc-browser-webview_android"><span class="bc-head-txt-label bc-head-icon-webview_android">Android webview</span></th><th class="bc-browser-chrome_android"><span class="bc-head-txt-label bc-head-icon-chrome_android">Chrome for Android</span></th><th class="bc-browser-firefox_android"><span class="bc-head-txt-label bc-head-icon-firefox_android">Firefox for Android</span></th><th class="bc-browser-opera_android"><span class="bc-head-txt-label bc-head-icon-opera_android">Opera for Android</span></th><th class="bc-browser-safari_ios"><span class="bc-head-txt-label bc-head-icon-safari_ios">Safari on iOS</span></th><th class="bc-browser-samsunginternet_android"><span class="bc-head-txt-label bc-head-icon-samsunginternet_android">Samsung Internet</span></th></tr></thead><tbody><tr><th><code>sendBeacon</code></th><td class="bc-supports-yes bc-browser-chrome bc-has-history"><span class="bc-browser-name">Chrome</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 39<section class="bc-history" id="sect1"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 39</dt><dd><abbr class="only-icon"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-edge"><span class="bc-browser-name">Edge</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 14</td><td class="bc-supports-yes bc-browser-firefox"><span class="bc-browser-name">Firefox</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 31</td><td class="bc-supports-no bc-browser-ie"><span class="bc-browser-name">IE</span><abbr class="bc-level-no only-icon"> <span>No support</span> </abbr> No</td><td class="bc-supports-yes bc-browser-opera bc-has-history"><span class="bc-browser-name">Opera</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 26<section class="bc-history" id="sect2"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 26</dt><dd><abbr class="only-icon"><span>Notes</span></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-safari"><span class="bc-browser-name">Safari</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 11.1</td><td class="bc-supports-yes bc-browser-webview_android bc-has-history"><span class="bc-browser-name">WebView Android</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 40<section class="bc-history" id="sect3"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 40</dt><dd><abbr class="only-icon"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-chrome_android bc-has-history"><span class="bc-browser-name">Chrome Android</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 42<section class="bc-history" id="sect4"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 42</dt><dd><abbr class="only-icon"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-firefox_android"><span class="bc-browser-name">Firefox Android</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 31</td><td class="bc-supports-yes bc-browser-opera_android bc-has-history"><span class="bc-browser-name">Opera Android</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 26<section class="bc-history" id="sect5"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 26</dt><dd><abbr class="only-icon"><span>Notes</span></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-safari_ios"><span class="bc-browser-name">Safari iOS</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> 11.1</td><td class="bc-supports-yes bc-browser-samsunginternet_android"><span class="bc-browser-name">Samsung Internet Android</span><abbr class="bc-level-yes only-icon"> <span>Full support</span> </abbr> Yes</td></tr></tbody></table><section class="bc-legend" id="sect6"><dl><dt><span class="bc-supports-yes bc-supports"> <abbr class="bc-level bc-level-yes only-icon"> <span>Full support</span> &#xA0; </abbr></span></dt><dd>Full support</dd><dt><span class="bc-supports-no bc-supports"> <abbr class="bc-level bc-level-no only-icon"> <span>No support</span> &#xA0; </abbr></span></dt><dd>No support</dd><dt><abbr class="only-icon"><span>See implementation notes.</span></abbr></dt><dd>See implementation notes.</dd></dl></section></div> <h2 id="See_also">See also</h2> </article></p>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>