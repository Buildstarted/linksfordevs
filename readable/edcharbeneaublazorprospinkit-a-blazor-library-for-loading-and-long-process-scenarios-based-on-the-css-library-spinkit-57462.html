<!DOCTYPE html>
<html lang="en">
<head>
    <title>
EdCharbeneau/BlazorPro.Spinkit - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="EdCharbeneau/BlazorPro.Spinkit - linksfor.dev(s)"/>
    <meta property="article:author" content="EdCharbeneau"/>
    <meta property="og:description" content="A Blazor library for loading and long process scenarios based on the CSS library Spinkit - EdCharbeneau/BlazorPro.Spinkit"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/EdCharbeneau/BlazorPro.Spinkit/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - EdCharbeneau/BlazorPro.Spinkit</title>
<div class="readable">
        <h1>EdCharbeneau/BlazorPro.Spinkit</h1>
            <div>by EdCharbeneau</div>
            <div>Reading time: 11-14 minutes</div>
        <div>Posted here: 10 Feb 2020</div>
        <p><a href="https://github.com/EdCharbeneau/BlazorPro.Spinkit/">https://github.com/EdCharbeneau/BlazorPro.Spinkit/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text">
<p>A collection of loading indicators animated with CSS for Blazor. Spinkit also includes the SpinLoader component with templates for handling null values during async operations. Spinkit includes CSS from the Spinkit project by <a href="https://tobiasahlin.com/spinkit/" rel="nofollow">Tobias Ahlin</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/EdCharbeneau/BlazorPro.Spinkit/master/src/BlazorPro.Spinkit/_resources/demo.gif"><img src="https://raw.githubusercontent.com/EdCharbeneau/BlazorPro.Spinkit/master/src/BlazorPro.Spinkit/_resources/demo.gif" alt="Screenshot of the component in action"></a></p>
<h2>Getting Setup</h2>
<p>You can install the package via the nuget package manager just search for <em>BlazorPro.Spinkit</em>. You can also install via powershell using the following command.</p>
<div><pre><span>Install-Package</span> BlazorPro.Spinkit</pre></div>
<p>Or via the dotnet CLI.</p>
<div><pre>dotnet add package BlazorPro.Spinkit</pre></div>
<h3>1. Add Imports</h3>
<p>Add the following to your <em>_Imports.razor</em></p>

<h3>2. Add a spinner component</h3>
<p>Add one of the following components to your index page.</p>
<pre><code>&lt;Chase /&gt;
&lt;Circle /&gt;
&lt;CircleFade /&gt;
&lt;Flow /&gt;
&lt;Grid /&gt;
&lt;Plane /&gt;
&lt;Pulse /&gt;
&lt;Swing /&gt;
&lt;Wander /&gt;
&lt;Wave /&gt;
&lt;Bounce /&gt;
</code></pre>
<h3>3. Add reference to style sheet</h3>
<p>Add the following line to the <code>head</code> tag of your <code>_Host.cshtml</code> (Blazor Server) or <code>index.html</code> (Blazor WebAssembly).</p>
<div><pre>    &lt;<span>link</span> <span>href</span>=<span><span>"</span>_content/BlazorPro.Spinkit/spinkit.min.css<span>"</span></span> <span>rel</span>=<span><span>"</span>stylesheet<span>"</span></span> /&gt;</pre></div>
<h2>Usage</h2>
<h3>Displaying a conditional spinner</h3>
<p>Spinners are best used with some long running task. Simply create a flag to indicate the process is running and display a spinner with an <code>if</code> statement.</p>
<div><pre>@page "/"

if (IsLoading) {
	&lt;<span>Pulse</span> /&gt;
}
</pre></div>
<h3>Displaying an integrated loading experience with the SpinLoader Component</h3>
<p>Instead of writing common boilerplate code with if statements you may use the SpinLoader Component. With SpinLoader there is no need to write <code>if</code> statements and check the data source for null values.</p>
<p><strong>Before SpinLoader</strong></p>
<p>In the following example we can remove the statement <code>@if (forecasts == null)</code> and replace it with the SpinLoader Component.</p>
<pre><code>@page "/fetchdata"
@inject HttpClient Http

&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;

@if (forecasts == null)
{
    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;
}
else
{
    &lt;table class="table"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Date&lt;/th&gt;
                &lt;th&gt;Temp. (C)&lt;/th&gt;
                &lt;th&gt;Temp. (F)&lt;/th&gt;
                &lt;th&gt;Summary&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            @foreach (var forecast in forecasts)
            {
                &lt;tr&gt;
                    &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                    &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                    &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                    &lt;td&gt;@forecast.Summary&lt;/td&gt;
                &lt;/tr&gt;
            }
        &lt;/tbody&gt;
    &lt;/table&gt;
}

@code {
    private WeatherForecast[] forecasts;

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre>
<p><strong>After SpinLoader</strong></p>
<p>In the following example the loading predicate <code>forecast == null</code> is moved to the IsLoading property of the SpinLoader Component. This eliminates the need for an <code>if</code> statement. A default loading indicator (aka spinner) will be shown or one can be chosen by setting the <code>Spinner</code> property, Ex: <code>Spinner="SpinnerType.Plane"</code>.</p>
<pre><code>@page "/fetchdata"
&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;
&lt;p&gt;An artificial delay of 3000ms is used to show a &amp;lt;SpinLoader&amp;gt; component.&lt;/p&gt;

&lt;SpinLoader IsLoading="@(forecasts == null)"&gt;
    &lt;ContentTemplate&gt;
        &lt;table class="table"&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;Date&lt;/th&gt;
                    &lt;th&gt;Temp. (C)&lt;/th&gt;
                    &lt;th&gt;Temp. (F)&lt;/th&gt;
                    &lt;th&gt;Summary&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                @foreach (var forecast in forecasts)
                {
                    &lt;tr&gt;
                        &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                        &lt;td&gt;@forecast.Summary&lt;/td&gt;
                    &lt;/tr&gt;
                }
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/ContentTemplate&gt;
&lt;/SpinLoader&gt;

@code {

    private WeatherForecast[] forecasts;

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre>
<h2>Customiztion</h2>
<h3>Spinner Customization</h3>
<p>Spinners have three parameters that are used to control their properties: Color (string), Size (string), and Center (bool).</p>
<p><strong>Color:</strong> Any valid CSS color value.</p>
<pre><code>All Black
&lt;Circle Color="#000000" /&gt;

Green with Opacity
&lt;Circle Color="rgba(0,255,0,0.3)"/&gt;
</code></pre>
<p><strong>Size:</strong> Any valid CSS size value. <code>[ px | em | rem | % ]</code></p>
<pre><code>Pixels
&lt;Circle Size="100px" /&gt;
</code></pre>
<p><strong>Center:</strong> When set to true the spinner renders with <code>margin: auto</code></p>
<h3>SpinLoader Customization</h3>
<p>The SpinLoader Component has the same properties as a Spinner: Color (string), Size (string), and Cetner (bool). These values will be passed to the SpinLoader's internal spinner if <strong>no LoadingTemplate</strong> is specified.</p>
<p>
    The &lt;SpinLoader&gt; component supports three template regions:
    </p><ul>
        <li>LoadingTemplate (optional) - content to display while the IsLoading property is <b>true</b>.</li>
        <li>ContentTemplate - content to display when the IsLoading is <b>false</b></li>
        <li>FaultedTemplate - content to display when IsFaulted is <b>true</b> and IsLoading is <b>false</b></li>
    </ul>

<hr>
<h3>Advanced Customization</h3>
<p>Spinners can be globally styled using CSS through the <code>--sk-color</code> and <code>--sk-size</code> CSS variables.</p>
<pre><code>:root {
    --sk-size: 40px;
    --sk-color: #333;
}
</code></pre>
<p>A more targeted approach is to use a CSS selector with a greater specificity.</p>
<pre><code>site.css
.my-spinner {
    --sk-size: 48px;
    --sk-color: #003366;
}

Component.razor
&lt;Circle css="my-spinner" /&gt;
</code></pre>
<h3>Advanced: App Loader</h3>
<p>Even though we don't have access to Razor Components in our index.html, we can still make use of the component's HTML/CSS because it is based on the popular CSS library Spinkit by <a href="https://tobiasahlin.com/spinkit/" rel="nofollow">Tobias Ahlin</a>.</p>
<p>Note: This feature is not useful for Blazor Server apps since they are pre-rendered.</p>
<ol>
<li>Inside the index.html replace the <code>&lt;app&gt;</code> element with the following snippet.</li>
</ol>
<pre><code>&lt;app&gt;
    &lt;div class="modal-overlay"&gt;
        &lt;div class="sk-wave"&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/app&gt;
</code></pre>
<ol start="2">
<li>Add the <code>modal-overlay</code> style to your site.css.</li>
</ol>
<pre><code>.modal-overlay {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(0,0,0,0.5);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    --sk-color: white;
}
</code></pre>
<p>To choose the spinner type refer to the <a href="https://github.com/tobiasahlin/SpinKit">HTML/CSS project's documentation</a>.</p>
<h2>Full Featured Example</h2>
<p>The following example shows the full extent of what SpinLoader can do. This example includes all possible templates and pattern for handling exceptions.</p>
<pre><code>@page "/fetchdata"
@inject HttpClient Http

&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;
&lt;p&gt;
    The &amp;lt;SpinLoader&amp;gt; component supports three template regions:
    &lt;ul&gt;
        &lt;li&gt;LoadingTemplate (optional) - content to display while the IsLoading property is &lt;b&gt;true&lt;/b&gt;.&lt;/li&gt;
        &lt;li&gt;ContentTemplate - content to display when the IsLoading is &lt;b&gt;false&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;FaultedTemplate - content to display when IsFaulted is &lt;b&gt;true&lt;/b&gt; and IsLoading is &lt;b&gt;false&lt;/b&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/p&gt;
&lt;div class="form-row align-items-center"&gt;
    &lt;div class="col-auto"&gt;
        &lt;div class="form-check mb-2"&gt;
            &lt;input id="forceException" type="checkbox" @bind="forceException" class="form-check-input" /&gt;
            &lt;label class="form-check-label" for="forceException"&gt;Force exception&lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-auto"&gt;
        &lt;button class="btn btn-primary mb-2" @onclick="LoadData"&gt;Retry&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;table class="table"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Date&lt;/th&gt;
            &lt;th&gt;Temp. (C)&lt;/th&gt;
            &lt;th&gt;Temp. (F)&lt;/th&gt;
            &lt;th&gt;Summary&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;SpinLoader IsLoading="isLoading" IsFaulted="isFaulted"&gt;
            &lt;LoadingTemplate&gt;
                &lt;tr&gt;
                    &lt;td colspan="4" style="vertical-align: middle;background-color: rgb(0, 0, 0, .2); height:300px;"&gt;
                        &lt;Circle Color="#e67e22" Size="60px" Center="true" /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/LoadingTemplate&gt;
            &lt;ContentTemplate&gt;
                @foreach (var forecast in forecasts)
                {
                    &lt;tr&gt;
                        &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                        &lt;td&gt;@forecast.Summary&lt;/td&gt;
                    &lt;/tr&gt;
                }
            &lt;/ContentTemplate&gt;
            &lt;FaultedContentTemplate&gt;
                &lt;tr&gt;
                    &lt;td colspan="4"&gt;
                        &lt;div class="alert alert-danger"&gt;Fail&lt;/div&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/FaultedContentTemplate&gt;
        &lt;/SpinLoader&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

@code {

    WeatherForecast[] forecasts;
    bool isFaulted = false;
    bool isLoading = true;
    int delay = 2000;
    bool forceException = false;

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
    }

    async Task LoadData()
    {
        await TryLoadingData(
            onSuccess: SuccessPath,
            onFaulted: FaultedPath
            );
    }

    void SuccessPath(WeatherForecast[] data)
    {
        // do work
        forecasts = data;
    }

    void FaultedPath(Exception e)
    {
        // log message, don't share it with the user
        var fakeLog = e.Message;
    }

    async Task TryLoadingData(Action&lt;WeatherForecast[]&gt; onSuccess, Action&lt;Exception&gt; onFaulted)
    {
        isLoading = true;
        await Task.Delay(delay);
        try
        {
            if (forceException)
            {
                throw new NotSupportedException();
            }
            var data = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
            isFaulted = false;
            onSuccess(data);
        }
        catch (Exception e)
        {
            isFaulted = true;
            onFaulted(e);
        }
        finally
        {
            isLoading = false;
        }
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre>
<h2>Server Operation</h2>
<p>Because Blazor Server apps use pre-rendering to show the spinner the long operation must be done in OnAfterRunder.</p>
<div><pre>    <span><span>//</span> Don't do this</span>
    <span><span>//</span>protected override async Task OnInitializedAsync()</span>
    <span><span>//</span>{</span>
    <span><span>//</span>    await LongOperation();</span>
    <span><span>//</span>}</span>

    <span>protected</span> <span>override</span> <span>async</span> <span>Task</span> <span>OnAfterRenderAsync</span>(<span>bool</span> <span>firstRender</span>)
    {
        <span>if</span> (<span>firstRender</span>)
        {
            <span>await</span> <span>LongOperation</span>();
            <span>StateHasChanged</span>();
        }
    }</pre></div>
<p>Synchronous long operations may need to be wrapped in Task.Run to invoke the operation from an async context.</p>
<div><pre><span><span>//</span> Invoked from button or AfterRenderAsync etc.</span>
<span>async</span> <span>Task</span> <span>LoadData</span>() {
    <span>await</span> <span>Task</span>.<span>Run</span>(() <span>=&gt;</span> <span>LongRunningSync</span>());
}</pre></div>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>