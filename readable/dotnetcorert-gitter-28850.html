<!DOCTYPE html>
<html lang="en">
<head>
    <title>
dotnet/corert - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="dotnet/corert - linksfor.dev(s)"/>
    <meta property="og:description" content="@MichalStrehovsky: Emulating Win32 APIs was the fastest way to get CLR running on OSX back in the Silverlight days (CoreCLR is what became of the Silverlight runtime)"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://gitter.im/dotnet/corert?at=5d20fc1298a9ec58b6c93ef4"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - dotnet/corert</title>
<div class="readable">
        <h1>dotnet/corert</h1>
            <div>Reading time: 12-15 minutes</div>
        <div>Posted here: 08 Jul 2019</div>
        <p><a href="https://gitter.im/dotnet/corert?at=5d20fc1298a9ec58b6c93ef4">https://gitter.im/dotnet/corert?at=5d20fc1298a9ec58b6c93ef4</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <div data-v-44ebcb1a=""><header data-v-44ebcb1a=""><section data-v-44ebcb1a=""><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 18 25" data-v-44ebcb1a=""><rect x="15" y="5" width="2" height="10" data-v-44ebcb1a=""></rect> <rect x="10" y="5" width="2" height="20" data-v-44ebcb1a=""></rect> <rect x="5" y="5" width="2" height="20" data-v-44ebcb1a=""></rect> <rect width="2" height="15" data-v-44ebcb1a=""></rect></svg></section> <section data-v-44ebcb1a=""><span data-v-44ebcb1a=""><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 98.7 16.3" style="enable-background:new 0 0 98.7 16.3;" xml:space="preserve">

<g id="XMLID_43_">
	<path id="XMLID_62_" d="M20.9,0.3h2.6v15.8h-2.6V0.3z"></path>
	<path id="XMLID_60_" d="M34.8,2.9h-4V0.3h11.8v2.6h-5.2v13.2h-2.6V2.9z"></path>
	<path id="XMLID_58_" d="M51.9,2.9h-4V0.3h11.8v2.6h-5.2v13.2h-2.6V2.9z"></path>
	<path id="XMLID_56_" d="M66.4,0.3h11.8v2.6H69v3.9h7.9v2.6H69v4h9.2v2.6H66.4V0.3z"></path>
	<path id="XMLID_53_" d="M98.7,16.1l-4.2-5.9c1.7-0.9,2.8-2.5,2.8-4.6c0-3.1-2.5-5.3-5.7-5.3l-6.2,0v15.8h2.6l0-5.3
		c0,0,3.6,0,3.6,0l3.8,5.3H98.7z M88.1,8.2l0-5.3l3.5,0c1.7,0,3,1,3,2.6c0,1.7-1.4,2.6-3,2.6L88.1,8.2z"></path>
	<path id="XMLID_52_" d="M7.9,7.1v2.6l3.9,0c0,0,0,1.4,0,2.3c-0.1,0.2-0.4,1.8-3.8,1.8c-0.2,0-0.3,0-0.5,0
		c-0.1,0-0.2,0-0.2,0c-0.1,0-0.2,0-0.2,0c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.1,0-0.2-0.1c0,0-0.1,0-0.1,0c-2.1-0.7-3.5-2.8-3.5-5.3
		l0,0v0v0c0-0.3,0-0.5,0.1-0.8C3.3,4.7,5.4,2.5,8,2.5c0.9,0,2.5,0.3,3.6,1.5l1.5-2.2c0,0-1.3-1.9-5-1.9C3.7,0,0.4,3.3,0,7.3
		c0,0.3,0,0.6,0,0.8l0,0l0,0c0,4.3,3.2,7.9,7.7,8.1c0.2,0,0.3,0,0.5,0c0,0,0.1,0,0.1,0c0.3,0,0.5,0,0.7,0c0.1,0,0.2,0,0.3,0
		c0.2,0,0.3,0,0.5-0.1c2.7-0.1,4.7-2.3,4.7-3.4c0-5,0-5.7,0-5.7H7.9z"></path>
</g>
</svg>
</span></section></header> <section data-v-44ebcb1a=""><h2 data-v-44ebcb1a="">Where communities thrive</h2> <br data-v-44ebcb1a=""> <ul data-v-44ebcb1a=""><li data-v-44ebcb1a="">Join over <strong data-v-44ebcb1a="">1.5M+ people</strong></li> <li data-v-44ebcb1a="">Join over <strong data-v-44ebcb1a="">100K+ communities</strong></li> <li data-v-44ebcb1a="">Free <strong data-v-44ebcb1a="">without limits</strong></li> <li data-v-44ebcb1a="">Create <strong data-v-44ebcb1a="">your own community</strong></li></ul> <ul data-v-44ebcb1a=""><li data-v-44ebcb1a=""><a href="https://gitter.im/explore" data-v-44ebcb1a="">Explore more communities</a></li></ul></section></div>

      <div>
        
<div>
  <header id="header-wrapper"><div id="header">
    



<div>
  
  <div tabindex="0">
    <p>This repo contains CoreRT, a .NET Core runtime optimized for AOT (ahead of time compilation) scenarios, with the accompanying .NET Native compiler toolchain.</p>
  </div>
</div>




  </div></header>
  <div>
    <div id="right-toolbar-layout"><div>

    <div id="toolbar-top-content">
      

      <div id="activity-region"><div>


<ul id="activity-list"><li>
</li><li><div>
  <p>Jan 31 2019 22:00</p>

  <p><span data-link-type="mention" data-screen-name="MichalStrehovsky">MichalStrehovsky</span> commented <span data-link-type="issue" data-issue="6919" data-issue-repo="dotnet/corert">#6919</span></p>

</div>
</li><li><div>
  <p>Jan 31 2019 21:59</p>

  <p><span data-link-type="mention" data-screen-name="MichalStrehovsky">MichalStrehovsky</span> opened <a href="https://github.com/dotnet/corert/pull/6928" target="_blank" data-link-type="issue" data-issue="6928" data-issue-repo="dotnet/corert">#6928</a></p>
</div>
</li><li>
</li><li><div>
  <p>Jan 31 2019 19:57</p>

  <p><span data-link-type="mention" data-screen-name="kouvel">kouvel</span> commented <span data-link-type="issue" data-issue="6880" data-issue-repo="dotnet/corert">#6880</span></p>

</div>
</li><li><div>
  <p>Jan 31 2019 19:45</p>

  <p><span data-link-type="mention" data-screen-name="filipnavara">filipnavara</span> commented <span data-link-type="issue" data-issue="6880" data-issue-repo="dotnet/corert">#6880</span></p>

</div>
</li><li><div>
  <p>Jan 31 2019 19:44</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="jkotas">jkotas</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="6846016496d2bfb991434b01501ca5dbc8f42b94" data-commit-repo="dotnet/corert">Merge pull request #6815 from d…</span> <span data-link-type="commit" data-commit-sha="0bb1894ce322731a6a718ad915e325712c67974b" data-commit-repo="dotnet/corert">Merge pull request #6839 from d…</span> <span data-link-type="commit" data-commit-sha="66050c52492b59e423bb67714e1740c469cd7562" data-commit-repo="dotnet/corert">Merge pull request #6859 from d…</span> and 8 more <a href="https://github.com/dotnet/corert/compare/8985aa34449d...64e556fa2320" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li>
</li><li><div>
  <p>Jan 31 2019 19:43</p>

  <p><span data-link-type="mention" data-screen-name="kouvel">kouvel</span> commented <span data-link-type="issue" data-issue="6880" data-issue-repo="dotnet/corert">#6880</span></p>

</div>
</li><li><div>
  <p>Jan 31 2019 19:26</p>

  <p><span data-link-type="mention" data-screen-name="kouvel">kouvel</span> commented <span data-link-type="issue" data-issue="6880" data-issue-repo="dotnet/corert">#6880</span></p>

</div>
</li><li><div>
  <p>Jan 31 2019 19:19</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="trylek">trylek</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="8985aa34449d22594ce41c0163f3315d4264ff5f" data-commit-repo="dotnet/corert">Pointer size and ARM64 fixes in…</span> <a href="https://github.com/dotnet/corert/compare/89b8bcee2ce5...8985aa34449d" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li>
</li><li><div>
  <p>Jan 31 2019 18:40</p>

  <p><span data-link-type="mention" data-screen-name="jkotas">jkotas</span> synchronize <a href="https://github.com/dotnet/corert/pull/6926" target="_blank" data-link-type="issue" data-issue="6926" data-issue-repo="dotnet/corert">#6926</a></p>
</div>
</li><li><div>
  <p>Jan 31 2019 18:40</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="jkotas">jkotas</span> on nmirror
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="2835c40deff4a09939f10657fe3b92c58eb49dd9" data-commit-repo="dotnet/corert">MethodOnStruct - Fixing Project…</span> <span data-link-type="commit" data-commit-sha="f5a59ac833d83e392f29755fcd0dbea25c908730" data-commit-repo="dotnet/corert">Merge pull request #6927 from d…</span> <a href="https://github.com/dotnet/corert/compare/b3897832dc0d...f5a59ac833d8" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li>
</li><li><div>
  <p>Jan 31 2019 18:32</p>

  <p><span data-link-type="mention" data-screen-name="dotnet-bot">dotnet-bot</span> opened <a href="https://github.com/dotnet/corert/pull/6927" target="_blank" data-link-type="issue" data-issue="6927" data-issue-repo="dotnet/corert">#6927</a></p>
</div>
</li><li><div>
  <p>Jan 31 2019 17:19</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="jkotas">jkotas</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="b1f5ebc282bd3e85fff723532047ca3040b06c08" data-commit-repo="dotnet/corert">Reverting "Fixing up the UTF8Fo…</span> <span data-link-type="commit" data-commit-sha="89b8bcee2ce56b5919e4f9d8c385525f6a98b005" data-commit-repo="dotnet/corert">Add managed implementation of G…</span> <a href="https://github.com/dotnet/corert/compare/8be34273e287...89b8bcee2ce5" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li>
</li><li><div>
  <p>Jan 31 2019 17:18</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="jkotas">jkotas</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="8be34273e2873139d8f67ba00169f0cd3fef4c93" data-commit-repo="dotnet/corert">Fix ProjectN build breaks (#692…</span> <a href="https://github.com/dotnet/corert/compare/6bd279ea72b0...8be34273e287" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li>
</li></ul>
</div></div>
    </div>

    

  </div></div>
    
    <div>
      
      <div id="content-wrapper"><div>
    <div>

      
      

      <div id="content-frame" role="log" aria-live="polite" aria-atomic="false" aria-relevant="additions text">
        <div id="chat-container"><div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      Otherwise it goes through LoadLibrary/GetProcAddress/dlopen/dlsym to be compatible with dynamic runtimes (and with code that declares p/invokes for multiple platforms, but only uses one at runtime)
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p><span data-link-type="mention" data-screen-name="Alan-FGR">@Alan-FGR</span> stick to using primitive types/pointers in the p/invoke signature and it will be as fast as it can get. there's always the p/invoke transition tax, but that's mandated by the GC
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      thanks for answering all these questions :+1: 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Yeah, I echo that. Support here's awesome. thumbs up
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Maybe I was being too hopeful :p
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      I'm just glad there's audience that wants to hear more about CoreRT :)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      makes me wonder how big the transition cost is, is there more to do than to just switch to preemptive mode?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      You guys are doing an awesome job :)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      there's this fancy pinvoke tunnel hack thing
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p><span data-link-type="mention" data-screen-name="MichalStrehovsky">@MichalStrehovsky</span> btw. if i were to try to complete the GCToOS interface methods in the future, is there a reason why they're implemented differently or not at all compared to CoreCLR? 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      I don't think the transition is that terrible, unless the called method is really short (like... p/invoking into GetLastError or something). then it hurts. I think the transition just needs to set up a structure on the stack so that the stack walker knows how to skip over the native frames when it needs to enumerate GC roots on the stack
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      I've tried that call I thing but I don't think it's worth it. Last I tried it wasn't faster than just normal platform invoke with suppressed security.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  
</div>
</div>
                <div><div>
    
  <div>
    <p>
      ah call I, you're typing with autocorrect :wink:?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      the GCToOS methods probably depend on which one are we talking about. I don't know too much about that
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      all things numa, cpu groups, for example
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="Suchiman">@Suchiman</span> yep, I'm on cellphone... Alexander mutel wrote an article back in the day comparing some alternatives. But I believe they're all obsolete at this point.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      btw. do you know what FEATURE_PAL (coreclr) means? from what i've guessed, it means not windows
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      CoreRT using PalWindows and PalUnix seems more intuitive than how things are glued together in CoreCLR
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p><span data-link-type="mention" data-screen-name="MichalStrehovsky">@MichalStrehovsky</span> or in other words, will all things fall apart if i start copying the GCToOS implementations from coreclr?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      they probably won't fall apart. do it slowly :)
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      The platform abstraction layer (PAL) in CoreCLR is a Win32 API emulator. In the CoreCLR codebase, you can call Win32 <code>TerminateProcess</code> or <code>RaiseFailFastException</code> and it will do the right thing on Linux too. FEATURE_PAL is defined when this Win32 API emulator platform "abstraction" layer is in use. usually, there will be code under #if FEATURE_PAL when this abstraction doesn't quite work
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      CoreRT has a more formal platform abstraction layer
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      ah now it makes sense, thanks
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
      
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      Emulating Win32 APIs was the fastest way to get CLR running on OSX back in the Silverlight days (CoreCLR is what became of the Silverlight runtime)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      did CoreCLR exist before?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      there was a stripped down build of CLR that was used for silverlight that later became coreclr. I mostly know these things from stories. I joined the team in 2012 when the .NET Native project was starting
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      was corert built from scratch or stripped down from coreclr?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p>
      CLR team has a long history of technology reuse so it's really hard to say
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      if you try diffing the C/C++ files in CoreRT, a lot of them will match with files on the CoreCLR side
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      from the looks of it, it could have been both, copying back a few things from coreclr that were useful
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      yeah eventtrace for example, although eventually implemented differently (lots ifdef'd out, then some implemented in gcrhenv.cpp)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Silverlight was second shot, and reused and cleaned up a lot of it.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      CoreRT started as project Redhawk. The original Redhawk was really lightweight AOT-only C# runtime and class library (just the GC, no reflection, no dynamic loading, etc.). A few device drivers and other low-level OS components were written using it in Windows 8 as an experiment (that was discontinued since then): <a href="https://www.zdnet.com/article/microsoft-codename-redhawk-lives-in-windows-8/" rel="nofollow noopener noreferrer" target="_blank">https://www.zdnet.com/article/microsoft-codename-redhawk-lives-in-windows-8/</a>
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      aw, everytime microsoft does something with C# like and OS (Longhorn, Midori, Redhawk) it ends up discontinued
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars1.githubusercontent.com/u/1930559?v=4&amp;s=30" srcset="https://avatars1.githubusercontent.com/u/1930559?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  
</div>
</div>
                
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/8399299?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Yeah that's sad but still interesting trivia... Long term I think C# and some kind of aot is here to stay, even if not corert maybe llvm which IMHO is the best choice for that purpose if I were to start from zero. Still, for my purposes corert is already pretty great just need some battle testing and maybe more platform support, but llvm will certainly allow them to achieve much more ambitious goals, but then again, corert is 80% there (for my needs) while llvm isn't even testable yet, not to mention they don't overlap on the most important points
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars1.githubusercontent.com/u/1930559?v=4&amp;s=30" srcset="https://avatars1.githubusercontent.com/u/1930559?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="MichalStrehovsky">@MichalStrehovsky</span> Thanks. I guess I want to add a mode where I can go from an EEType to reflection metadata when say the PDB is available but not have reflection metadata actually turned on. Then my freeze tool just knows to find the info in the PDB if it's available. Talking about dumping rich information when reflection and other metadata is disabled, I also wanted to get the MVIDs and timestamps of the assemblies somewhere in the PDB plus the function names having the metadata tokens stuffed at the end, so let's say when an exception is thrown and it gets logged to ETW, the stack trace can be richer than what we have in the PDB if the monitoring tool would like to open up the PDB and go fetch the assemblies, etc.
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Maybe also a mode where we dump RVA-&gt;IL mapping for those who care to go from EPI to IL, instead of C# (which of course sounds counter intuitive, but it can be helpful for analysis).
    </p>

  </div>
</div>
</div>
                
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="jkotas">@jkotas</span> i'm working on <a href="https://github.com/dotnet/coreclr/commit/c7d12d2b91f79802a12484d4d56c41ba355b7058" target="_blank" data-link-type="commit" data-provider="github" data-commit-sha="c7d12d2b91f79802a12484d4d56c41ba355b7058" data-commit-repo="dotnet/coreclr">dotnet/coreclr@c7d12d2</a> and am wondering, could CoreRT just use <code>gc\windows\gcenv.windows.cpp</code> instead of copying the implementation to <code>PalRedhawkMinWin.cpp</code> essentially?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/6668460?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <div>
      <blockquote>
<p>could CoreRT just use <code>gc\windows\gcenv.windows.cpp</code></p></blockquote>
<p>Yes, that would be ideal. (And CoreCLR should use this file eventually as well.)</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      that was easier than expected... i wonder what will break
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/7110884?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      ofc unix build is broken :P <em>sigh</em> lets see how to bend cmake
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      (after getting some sleep)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars1.githubusercontent.com/u/7650031?v=4&amp;s=30" srcset="https://avatars1.githubusercontent.com/u/7650031?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>masonwheeler</p>
      <p>@masonwheeler</p>
      </div>
    <div>
      <blockquote>
<p> lets see how to bend cmake</p></blockquote>
<p>...but everything changed when the Unix Nation attacked.</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/13110571?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Michal Strehovský</p>
      <p>@MichalStrehovsky</p>
      </div>
    <p><span data-link-type="mention" data-screen-name="mjsabby">@mjsabby</span> It sounds like what you want is the richer PDB output that we do in .NET Native. In .NET Native, the PDB includes a bunch of extra records that let the debugger find the original IL tokens and stuff. We even embed the source IL into the PDB so that the debugger can do func eval using a debugger-built-in IL interpreter. I think the generation of all of this is out in the open (<code>src\ILCompiler.Compiler\src\Compiler\DependencyAnalysis\WindowsDebug*.cs</code>), but it's not hooked up into CoreRT because the actual debugger bits are missing. I'm also not sure if the LLVM-based obj file writer can emit this or if we need new features there too. The most unfortunate thing about it is that it's Windows-specific so going with that would still require a ELF/Mach-O solution
    </p>

  </div>
</div>
</div>
            </div></div>
      </div>
    </div>
    
  </div></div>
      
    </div>
  </div>
</div>



      </div>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>