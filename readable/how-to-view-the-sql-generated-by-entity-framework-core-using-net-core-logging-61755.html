<!DOCTYPE html>
<html lang="en">
<head>
    <title>
How to View the SQL Generated by Entity Framework Core using .NET Core Logging - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="How to View the SQL Generated by Entity Framework Core using .NET Core Logging - linksfor.dev(s)"/>
    <meta property="article:author" content="https://www.facebook.com/EamoKeane"/>
    <meta property="og:description" content="This post shows you how to intercept and view the SQL generated by Entity Framework Core. This method takes advantage of Microsoft&#x27;s built in logging for .NET core. Only 2 lines of code required."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://eamonkeane.dev/how-to-view-sql-generated-by-entity-framework-core-using-logging/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - How to View the SQL Generated by Entity Framework Core using .NET Core Logging</title>
<div class="readable">
        <h1>How to View the SQL Generated by Entity Framework Core using .NET Core Logging</h1>
            <div>by https://www.facebook.com/EamoKeane</div>
            <div>Reading time: 4 minutes</div>
        <div>Posted here: 17 May 2020</div>
        <p><a href="https://eamonkeane.dev/how-to-view-sql-generated-by-entity-framework-core-using-logging/">https://eamonkeane.dev/how-to-view-sql-generated-by-entity-framework-core-using-logging/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="page">
		
<!-- .site-header -->

<div id="content">
	<main id="main">


		<article>

			<!-- .post-header -->

			<p><img srcset="/content/images/size/w300/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png 300w, /content/images/size/w600/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png 600w, /content/images/size/w800/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png 800w, /content/images/size/w1100/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png 1100w, /content/images/size/w1600/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png 1600w" sizes="(max-width: 1140px) 94vw, 1100px" src="https://eamonkeane.dev/content/images/size/w1100/2020/05/View-the-SQL-in-Entity-Framework-Core-using-Logging-2.png" alt="How to View the SQL Generated by Entity Framework Core using .NET Core's built in Logging"></p>


			<div>
				<p>Today I'm going to show you how to intercept and view the SQL generated by Entity Framework Core. This method takes advantage of Microsoft's built in logging for .NET core. </p><p>This is something I wish i knew about starting off. I hope it is of use to somebody else. </p><p>This method is an alternative to profiling the SQL using something like SQL Server Management Studio. This will work with an ASP.NET Core application which should cover the vast majority of use cases!</p><p>By default, .NET core outputs logs to the following locations when you call HostCreateDefaultBuilder(args) within <strong>Program.cs</strong>:</p><!--kg-card-begin: markdown--><ul>
<li>Console</li>
<li>Debug</li>
<li>Event Source</li>
<li>EventLog (Windows Only)</li>
</ul>
<!--kg-card-end: markdown--><figure><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/logging/"><div><p>Logging in .NET Core and ASP.NET Core</p><p>Learn how to use the logging framework provided by the Microsoft.Extensions.Logging NuGet package.</p><p><img src="https://docs.microsoft.com/favicon.ico"><span>Microsoft Docs</span></p></div><p><img src="https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png"></p></a><figcaption>Default providers for logging in .Net Core</figcaption></figure><figure><img src="https://eamonkeane.dev/content/images/2020/05/default-logging-providers-for-asp-net-core-application.png"><figcaption>Default Logging providers for ASP.NET Core application as of 14 May 2020</figcaption></figure><h2 id="1-enable-sensitive-data-logging">1. Enable Sensitive Data Logging</h2><p>Navigate to your startup file for your .NET Core project (Startup.cs). Now find where you've configured your application to use Entity Framework Core. This should be in the ConfigureServices method.</p><figure><img src="https://eamonkeane.dev/content/images/2020/05/configure-services-method-before-enabling-sensitive-data-logging.png"><figcaption>My ConfigureServices method before enabling sensitive data logging</figcaption></figure><p>Enable sensitive data logging by calling the EnableSensitiveDataLogging method.</p><!--kg-card-begin: markdown--><pre><code> services.AddDbContext&lt;DutchContext&gt;(
                cfg =&gt;
                {
                    cfg.UseSqlServer(_config.GetConnectionString("DutchConnectionString")).EnableSensitiveDataLogging();
                }
                );
</code></pre>
<!--kg-card-end: markdown--><figure><img src="https://eamonkeane.dev/content/images/2020/05/image-19.png"><figcaption>My ConfigureServices method after enabling sensitive data logging</figcaption></figure><p>Enabling Sensitive Data Logging allows you to view the parameters being passed into the SQL Queries in the logs.</p><h2 id="2-configure-the-logging">2. Configure the Logging</h2><p>The next step is to tell your ASP.NET Core App to log Entity Framework Core commands.</p><p>For this step, go to your config file. Typically this is named 'Appsettings.json'. It's likely you configured the connection string for your application here.</p><p>This is what mine looks like:</p><figure><img src="https://eamonkeane.dev/content/images/2020/05/config-file-for-asp-net-core-application-appsettings-json.png"><figcaption>Configuration file for my application before configuring the logging for Entity Framework Core Database commands.</figcaption></figure><p>Add a new line &nbsp;to "Logging" .=&gt; "LogLevel"</p><!--kg-card-begin: markdown--><pre><code>"Microsoft.EntityFrameworkCore.Database.Command": "Information"
</code></pre>
<!--kg-card-end: markdown--><p>The logging config should now look something like this: </p><!--kg-card-begin: markdown--><pre><code>"Logging": {
		"LogLevel": {
			"Default": "Information",
			"Microsoft": "Warning",
			"Microsoft.EntityFrameworkCore.Database.Command": "Information"
		}
	}</code></pre>
<!--kg-card-end: markdown--><p>My final configuration file:</p><figure><img src="https://eamonkeane.dev/content/images/2020/05/config-file-for-asp-net-core-application-appsettings-json-after-adding-logging-for-entity-framework-core.png"><figcaption>Configuration file after adding logging for Entity Framework Core Database Commands</figcaption></figure><p> That's it!</p><p>You can now run your application and see the SQL generated by Entity Framework Core in any of the default providers mentioned earlier.</p><p>Here I'm using the output window in Visual Studio 2019 and showing the output from ASP.NET Core Web Server.</p><figure><img src="https://eamonkeane.dev/content/images/2020/05/output-window-for-visual-studio-code-showing-sql-commands-generated-by-entity-framework-core.png"><figcaption>Output window in Visual Studio Code showing the SQL commands generated by Entity Framework Core</figcaption></figure><p>If you can't see the output window just use 'Ctrl + Alt + O' to bring it up or find it in the V<em>iew </em>menu at the top of visual studio. </p><p>That's it for today. As always, if you have any questions on this or want to reach out to me you can find me on twitter <a href="https://twitter.com/eamokeane">@eamokeane</a> . You can also leave a comment here if you prefer :)</p>
			</div><!-- .post-content -->

			<!-- .post-footer -->

			<div>
				<p><img src="https://eamonkeane.dev/content/images/size/w150/2019/12/headshot-3.jpg" alt="Eamon Keane"></p>
				<div>
					<h2>About Eamon Keane</h2>
					<p>Eamon is a software developer working in Storm Technology Ltd. </p>
				</div>
			</div><!-- .author-box -->

			<!-- Begin Mailchimp Signup Form -->
			

			<!--End mc_embed_signup-->


			<!-- .comments-area -->




		</article><!-- .post -->

				<section>
					<h2>Read Next</h2>
					<article>
						<!-- .post-header -->
						<a href="https://eamonkeane.dev/computed-columns-in-entity-framework-core/"><img srcset="/content/images/size/w150/2020/05/EF-Core-computed-columns-2.png, /content/images/size/w300/2020/05/EF-Core-computed-columns-2.png 2x" src="https://eamonkeane.dev/content/images/size/w150/2020/05/EF-Core-computed-columns-2.png" alt="How to Create Computed Columns in Entity Framework Core"></a>
					</article><!-- .post -->
				</section><!-- .read-next -->


	</main><!-- .site-main -->
</div><!-- .site-content -->

		<!-- .site-footer -->
	</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>