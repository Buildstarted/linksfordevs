<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Getting started with cross-platform development using .NET on Ubuntu on WSL | Ubuntu - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Getting started with cross-platform development using .NET on Ubuntu on WSL | Ubuntu - linksfor.dev(s)"/>
    <meta property="og:description" content=".NET is an open source software framework for building cross-platform applications on Linux, Windows, and macOS. Ubuntu on WSL allows you to build and test applications for Ubuntu and Windows simultaneously. What happens when we mix these together? This blog will demonstrate how to install a .NET development stack on WSL, build a simple O [&#x2026;]"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://ubuntu.com/blog/creating-cross-platform-applications-with-net-on-ubuntu-on-wsl"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Getting started with cross-platform development using .NET on Ubuntu on WSL | Ubuntu</title>
<div class="readable">
        <h1>Getting started with cross-platform development using .NET on Ubuntu on WSL | Ubuntu</h1>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 08 Jul 2020</div>
        <p><a href="https://ubuntu.com/blog/creating-cross-platform-applications-with-net-on-ubuntu-on-wsl">https://ubuntu.com/blog/creating-cross-platform-applications-with-net-on-ubuntu-on-wsl</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <div>
          
<p>.NET is an open source software framework for building cross-platform applications on Linux, Windows, and macOS. <a href="https://ubuntu.com/wsl">Ubuntu on WSL</a> allows you to build and test applications for Ubuntu and Windows simultaneously. What happens when we mix these together? This blog will demonstrate how to install a .NET development stack on WSL, build a simple OS-aware application, and then test it on both Linux and Windows.</p>



<figure><a href="https://dotnetfoundation.org/" target="_blank" rel="noreferrer noopener"><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a89b/image.png" alt=""></a></figure>



<h4>Enable WSL 1</h4>



<p>In PowerShell as Administrator run:</p>



<pre><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</code></pre>







<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/9b70/image.png" alt=""></figure>



<p>If you are installing just WSL 1, you can restart and skip the next step.</p>



<pre><code>Restart-Computer</code></pre>



<p>If you are installing WSL 2, do not restart, continue to the next step:</p>



<h4>Enable WSL 2 (Windows 10 2004+)</h4>



<p>See “<a href="https://ubuntu.com/blog/ubuntu-on-wsl-2-is-generally-available">Ubuntu on WSL 2 Is Generally Available</a>” for more details on Ubuntu on WSL 2.</p>



<p>In PowerShell as Administrator run: </p>



<pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/227d/image.png" alt=""></figure>



<p>and then restart Windows:</p>



<pre><code>Restart-Computer</code></pre>



<h4>Install Ubuntu on WSL</h4>



<p>Download Ubuntu from the <a href="https://www.microsoft.com/store/productId/9NBLGGH4MSV6">Microsoft Store</a>:</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/4c95/image.png" alt=""></figure>



<p>For more ways to install Ubuntu on WSL, see the <a href="https://wiki.ubuntu.com/WSL">Ubuntu on WSL wiki page</a>.</p>



<h4>Install Windows Terminal</h4>



<p>Download the Windows Terminal from the <a href="https://www.microsoft.com/store/productId/9N0DX20HK701">Microsoft Store</a>:</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/9ee4/image.png" alt="" width="581" height="401"></figure>



<p>Windows Terminal can also be downloaded from <a href="https://github.com/microsoft/terminal/releases">GitHub</a>.</p>



<h4>Run Ubuntu on WSL</h4>



<p>Open Windows Terminal in PowerShell and run:</p>



<pre><code>ubuntu.exe</code></pre>



<p>When you run Ubuntu on WSL for the first time it will install and then you will create a Linux user. This is separate from your Windows user.</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/aa27/image.png" alt=""></figure>



<p>Exit and re-open Windows Terminal and you will find Ubuntu on the drop-down:</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/1baa/image.png" alt=""></figure>



<p>You can set Ubuntu as the default and configure Windows Terminal in <a href="https://docs.microsoft.com/en-us/windows/terminal/get-started#configuration">settings.json</a>. </p>



<h4>Update Ubuntu on WSL</h4>



<p>You should periodically check for updates and run upgrades on Ubuntu on WSL. We do this with apt, the Ubuntu package manager.</p>



<p>To check for updates run:</p>



<pre><code>sudo apt update</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a264/image.png" alt=""></figure>



<p>To get upgrades run:</p>



<pre><code>sudo apt upgrade</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/91f7/image.png" alt=""></figure>



<p>You can automatically update and apply any available upgrades in the same line by joining them with $&amp; and adding the -y flag:</p>



<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code></pre>



<h4>Add Microsoft’s .NET repository and signing key</h4>



<p>We need to add Microsoft’s .NET repository and signing key to apt. We will download and install a package from Microsoft that will do this.</p>



<p>Make sure you are installing the correct repo for your version of Ubuntu. You can check your current version of Ubuntu with:</p>



<pre><code>cat /etc/os-release</code></pre>



<p>The example below uses Ubuntu 20.04, the latest LTS release from Canonical. If you are still using Ubuntu 16.04, 18.04, or 19.10, you can find the corresponding repos in the <a href="https://docs.microsoft.com/en-us/dotnet/core/install/linux-ubuntu">Microsoft docs</a>. To learn more about the differences between LTS and interim releases, we have a <a href="https://ubuntu.com/about/release-cycle">release cycle page</a>.</p>



<p>Download the Microsoft repository and key package for 20.04:</p>



<pre><code>wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/0d80/image.png" alt=""></figure>



<p>Install the Microsoft repo package manually using dpg -i:</p>



<pre><code>sudo dpkg -i packages-microsoft-prod.deb</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/d3e6/image.png" alt=""><figcaption><br></figcaption></figure>



<p>Now when you update apt you will see the Microsoft repository is checked for upgrades:</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a958/image.png" alt=""></figure>



<h4>Install the .NET SDK</h4>



<p>Install the .NET and related dependencies using apt from the Microsoft repository:</p>



<pre><code>sudo apt-get install dotnet-sdk-3.1 -y</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/cb1d/image.png" alt=""></figure>



<h4>Create a workspace</h4>



<p>Create a new directory for to work in and change to that directory:</p>



<pre><code>mkdir dotnetproject
cd dotnetproject/</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/3325/image.png" alt=""></figure>



<h4>Create a new .NET project</h4>



<p>Create a new .NET console project using dotnet new. This will create a file called Program.cs and other necessary folders and files:</p>



<pre><code>dotnet new console</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/77aa/image.png" alt=""><figcaption><br></figcaption></figure>



<h4>Explore our .NET app</h4>



<p>List the files in your new .NET project:</p>



<pre><code>ls</code></pre>



<p>View the contents of Program.cs:</p>



<pre><code>cat Program.cs</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/6282/image.png" alt=""></figure>



<p>Run the sample program:</p>



<pre><code>dotnet run</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/bd7d/image.png" alt=""></figure>



<h4>Customize our .NET app</h4>



<p>Open Program.cs in your favorite editor: vi, nano, emacs, or <a href="https://code.visualstudio.com/">Code</a> with the remote WSL extension:</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a1f6/image.png" alt=""></figure>



<p>For our purposes, we will use nano, which is included with Ubuntu on WSL:</p>



<pre><code>nano Program.cs</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/bff3/image.png" alt=""></figure>



<p>First we add the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices?view=netcore-3.1">Interop services namespace</a>:</p>



<pre><code>using System.Runtime.InteropServices;</code></pre>



<p>Then replace:</p>



<pre><code>Console.WriteLine("Hello World!");</code></pre>



<p>With:</p>



<pre><code>Console.WriteLine($"Hello {System.Environment.GetEnvironmentVariable("USER")}");

if (RuntimeInformation.IsOSPlatform(OSPlatform.Linux))
 {
  Console.WriteLine("We're on Linux!");
 }

if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows))
 {
  Console.WriteLine("We're on Windows!");
 }

Console.WriteLine("Version {0}", Environment.OSVersion.Version);</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a050/image.png" alt=""></figure>



<p>This code is also <a href="https://pastebin.ubuntu.com/p/swbPxXXSKD/">available here</a>.</p>



<p>This application tells us our current user, checks if we are on Windows or Linux, and then gives the OS kernel version.</p>



<p>Exit and save and run with:</p>



<pre><code>dotnet run</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/3588/image.png" alt=""></figure>



<h4>Make our .NET application cross-platform</h4>



<p>We need to update our .NET project file, dotnetproject.csproj, to tell .NET to build for both Linux and Windows.</p>



<p>Open dotnetproject.csproj in our editor and add:</p>



<pre><code> &lt;PropertyGroup&gt;
    &lt;RuntimeIdentifiers&gt;win10-x64;linux-x64&lt;/RuntimeIdentifiers&gt;
 &lt;/PropertyGroup&gt;</code></pre>



<p>This directs .NET to build self-contained binaries for both Windows 10 x64 and Linux x64.</p>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/dd3c/image.png" alt=""></figure>



<h4>Build our cross-platform application</h4>



<p>Once our project is properly configured, building our .NET application is as simple as:</p>



<pre><code>dotnet publish -r win10-x64
dotnet publish -r linux-x64</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/580f/image.png" alt=""></figure>



<p>Self-contained binaries for each platform with all required libraries can be found in the project’s /bin/ folder:</p>



<pre><code>ls bin/Debug/netcoreapp3.1/</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/408e/image.png" alt=""></figure>



<h4>Test Linux build</h4>



<p>You can run your Linux binary direct as follows:</p>



<pre><code>./bin/Debug/netcoreapp3.1/linux-x64/publish/dotnetproject</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/0f8a/image.png" alt=""></figure>



<h4>Test Windows build</h4>



<p>To run the Windows build, copy it to your Windows file system:</p>



<pre><code>cp -r ~/dotnetproject/bin/Debug/netcoreapp3.1/win10-x64/publish /mnt/c/Users/Hayden/OneDrive/Desktop/</code></pre>



<p>Then run:</p>



<pre><code>/mnt/c/Users/Hayden/OneDrive/Desktop/publish/dotnetproject.exe</code></pre>



<figure><img src="https://admin.insights.ubuntu.com/wp-content/uploads/a679/image.png" alt=""></figure>



<p>We have built and run the same application for both Linux and Windows. We can test them both simultaneously using WSL.</p>



<h4>More Resources for .NET</h4>



<ul><li><a href="https://docs.microsoft.com/en-us/dotnet/standard/get-started">Get started with .NET</a></li><li><a href="https://github.com/dotnet">.NET on GitHub</a></li><li><a href="https://docs.microsoft.com/en-us/dotnet/core/">.NET documentation</a></li><li>Watch <a href="https://www.youtube.com/watch?v=eIHKZfgddLM">.NET Core 101</a>:</li></ul>



<figure><a href="https://www.youtube.com/watch?v=eIHKZfgddLM" target="_blank" rel="noreferrer noopener"><img src="https://admin.insights.ubuntu.com/wp-content/uploads/0da9/Annotation-2020-06-03-171145.png" alt=""></a></figure>

        </div>
      </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>