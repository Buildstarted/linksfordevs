<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1 - linksfor.dev(s)"/>
    <meta property="article:author" content="Daniel RothPrincipal Program Manager,&#xA0;ASP.NETFollow Daniel"/>
    <meta property="og:description" content=".NET Core 3.1 Preview 1 is now available. This release is primarily focused on bug fixes, but it contains a few new features as well.&#xA;Here&#x2019;s what&#x2019;s new in this release for ASP.NET Core:&#xA;&#xA;Partial class support for Razor components&#xA;Pass parameters to top-level components&#xA;Support for shared queues in HttpSysServer&#xA;Breaking changes for SameSite cookies&#xA;&#xA;Alongside this .NET Core 3.1 Preview 1 release,"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-1/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1</title>
<div class="readable">
        <h1>ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1</h1>
            <div>by Daniel RothPrincipal Program Manager,&#xA0;ASP.NETFollow Daniel</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 16 Oct 2019</div>
        <p><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-1/">https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-1/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured">

	<div>
                
         <div><div><div><p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/02/DaniethRothPhoto-150x150.jpeg" width="58" height="58" alt="Daniel Roth"></p><p>Daniel</p></div></div></div>     
        <p>October 15th, 2019</p><!-- .entry-meta -->

		<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1-preview-1/">.NET Core 3.1 Preview 1 is now available</a>. This release is primarily focused on bug fixes, but it contains a few new features as well.</p>
<p>Hereâ€™s whatâ€™s new in this release for ASP.NET Core:</p>
<ul>
<li>Partial class support for Razor components</li>
<li>Pass parameters to top-level components</li>
<li>Support for shared queues in HttpSysServer</li>
<li>Breaking changes for SameSite cookies</li>
</ul>
<p>Alongside this .NET Core 3.1 Preview 1 release, weâ€™ve also released a Blazor WebAssembly update, which now requires .NET Core 3.1. To use Blazor WebAssembly you will need to install .NET Core 3.1 Preview 1 as well as the latest preview of Visual Studio.</p>
<p>See the <a href="https://github.com/dotnet/core/blob/master/release-notes/3.1" target="_blank">release notes</a> for additional details and known issues.</p>
<h2>Get started</h2>
<p>To get started with ASP.NET Core in .NET Core 3.1 Preview 1 <a href="https://dotnet.microsoft.com/download/dotnet-core/3.1" target="_blank">install the .NET Core 3.1 Preview 1 SDK</a>.</p>
<p>If youâ€™re on Windows using Visual Studio, for the best experience we recommend <a href="https://visualstudio.com/preview" target="_blank">installing the latest preview of Visual Studio 2019 16.4</a>. Installing Visual Studio 2019 16.4 will also install .NET Core 3.1 Preview 1, so you donâ€™t need to separately install it. For Blazor development with .NET Core 3.1, Visual Studio 2019 16.4 is <em>required</em>.</p>
<p>To install the latest Blazor WebAssembly template run the following command:</p>
<pre><code><span>dotnet </span><span>new</span><span> </span><span>-</span><span>i </span><span>Microsoft</span><span>.</span><span>AspNetCore</span><span>.</span><span>Blazor</span><span>.</span><span>Templates</span><span>::</span><span>3.1</span><span>.</span><span>0</span><span>-</span><span>preview1</span><span>.</span><span>19508.20</span></code></pre>
<h2>Upgrade an existing project</h2>
<p>To upgrade an existing ASP.NET Core 3.0 project to 3.1 Preview 1:</p>
<ul>
<li>Update any projects targeting netcoreapp3.0 to target netcoreapp3.1</li>
<li>Update all Microsoft.AspNetCore.* package references to 3.1.0-preview1.19506.1</li>
</ul>
<p>See also the full list of <a href="https://github.com/aspnet/announcements/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+label%3A3.1.0+label%3A%22Breaking+change%22" target="_blank">breaking changes</a> in ASP.NET Core 3.1.</p>
<p>Thatâ€™s it! You should now be all set to use .NET Core 3.1 Preview 1!</p>
<h2>Partial class support for Razor components</h2>
<p>Razor components are now generated as partial classes. You can author the code for a Razor component using a code-behind file defined as a partial class instead of defining all the code for the component in a single file.</p>
<p>For example, instead of defining the default <code>Counter</code> component with an <code>@code</code> block, like this:</p>
<p><em>Counter.razor</em></p>
<pre><code><span>@page</span><span> </span><span>"/counter"</span><span>

</span><span>&lt;h1&gt;</span><span>Counter</span><span>&lt;/</span><span>h1</span><span>&gt;</span><span>

</span><span>&lt;p&gt;</span><span>Current</span><span> count</span><span>:</span><span> </span><span>@currentCount</span><span>&lt;/</span><span>p</span><span>&gt;</span><span>

</span><span>&lt;</span><span>button </span><span>class</span><span>=</span><span>"btn btn-primary"</span><span> </span><span>@onclick</span><span>=</span><span>"IncrementCount"</span><span>&gt;</span><span>Click</span><span> me</span><span>&lt;/</span><span>button</span><span>&gt;</span><span>

</span><span>@code</span><span> </span><span>{</span><span>
    </span><span>int</span><span> currentCount </span><span>=</span><span> </span><span>0</span><span>;</span><span>

    </span><span>void</span><span> </span><span>IncrementCount</span><span>()</span><span>
    </span><span>{</span><span>
        currentCount</span><span>++;</span><span>
    </span><span>}</span><span>
</span><span>}</span></code></pre>
<p>You can now separate out the code into a code-behind file using a partial class like this:</p>
<p><em>Counter.razor</em></p>
<pre><code><span>@page</span><span> </span><span>"/counter"</span><span>

</span><span>&lt;h1&gt;</span><span>Counter</span><span>&lt;/</span><span>h1</span><span>&gt;</span><span>

</span><span>&lt;p&gt;</span><span>Current</span><span> count</span><span>:</span><span> </span><span>@currentCount</span><span>&lt;/</span><span>p</span><span>&gt;</span><span>

</span><span>&lt;</span><span>button </span><span>class</span><span>=</span><span>"btn btn-primary"</span><span> </span><span>@onclick</span><span>=</span><span>"IncrementCount"</span><span>&gt;</span><span>Click</span><span> me</span><span>&lt;/</span><span>button</span><span>&gt;</span></code></pre>
<p><em>Counter.razor.cs</em></p>
<pre><code><span>namespace</span><span> </span><span>BlazorApp1</span><span>.</span><span>Pages</span><span>
</span><span>{</span><span>
    </span><span>public</span><span> </span><span>partial</span><span> </span><span>class</span><span> </span><span>Counter</span><span>
    </span><span>{</span><span>
        </span><span>int</span><span> currentCount </span><span>=</span><span> </span><span>0</span><span>;</span><span>

        </span><span>void</span><span> </span><span>IncrementCount</span><span>()</span><span>
        </span><span>{</span><span>
            currentCount</span><span>++;</span><span>
        </span><span>}</span><span>
    </span><span>}</span><span>
</span><span>}</span></code></pre>
<h2>Pass parameters to top-level components</h2>
<p>Blazor Server apps can now pass parameters to top-level components during the initial render. Previously you could only pass parameters to a top-level component with <code>RenderMode.Static</code>. With this release, both <code>RenderMode.Server</code> and <code>RenderModel.ServerPrerendered</code> are now supported. Any specified parameter values are serialized as JSON and included in the initial response.</p>
<p>For example, you could prerender a <code>Counter</code> component with a specific current count like this:</p>
<pre><code><span>@(</span><span>await </span><span>Html</span><span>.</span><span>RenderComponentAsync</span><span>&lt;</span><span>Counter</span><span>&gt;(</span><span>RenderMode</span><span>.</span><span>ServerPrerendered</span><span>,</span><span> </span><span>new</span><span> </span><span>{</span><span> </span><span>CurrentCount</span><span> </span><span>=</span><span> </span><span>123</span><span> </span><span>}))</span></code></pre>
<h2>Support for shared queues in HttpSysServer</h2>
<p>In addition to the existing behavior where HttpSysServer created anonymous request queues, weâ€™ve added to ability to create or attach to an existing named HTTP.sys request queue.<br>
This should enable scenarios where the HTTP.Sys controller process that owns the queue is independent to the listener process making it possible to preserve existing connections and enqueued requests between across listener process restarts.</p>
<pre><code><span>public</span><span> </span><span>static</span><span> </span><span>IHostBuilder</span><span> </span><span>CreateHostBuilder</span><span>(</span><span>string</span><span>[]</span><span> args</span><span>)</span><span> </span><span>=&gt;</span><span>
    </span><span>Host</span><span>.</span><span>CreateDefaultBuilder</span><span>(</span><span>args</span><span>)</span><span>
        </span><span>.</span><span>ConfigureWebHostDefaults</span><span>(</span><span>webBuilder </span><span>=&gt;</span><span>
        </span><span>{</span><span>
            </span><span>// ...</span><span>
            webBuilder</span><span>.</span><span>UseHttpSys</span><span>(</span><span>options </span><span>=&gt;</span><span>
            </span><span>{</span><span>
                options</span><span>.</span><span>RequestQueueName</span><span> </span><span>=</span><span> </span><span>"MyExistingQueue"</span><span>,</span><span>
                options</span><span>.</span><span>RequestQueueMode</span><span> </span><span>=</span><span> </span><span>RequestQueueMode</span><span>.</span><span>CreateOrAttach</span><span>
            </span><span>})</span><span>
        </span><span>});</span></code></pre>
<h2>Breaking changes for SameSite cookies</h2>
<p>This release updates the behavior of SameSite cookies in ASP.NET Core to conform to the latest standards being enforced by browsers. For details on these changes and their impact on existing apps see https://github.com/aspnet/Announcements/issues/390.</p>
<h2>Give feedback</h2>
<p>We hope you enjoy the new features in this preview release of ASP.NET Core! Please let us know what you think by filing issues on <a href="https://github.com/aspnet/aspnetcore/issues" target="_blank">GitHub</a>.</p>
<p>Thanks for trying out ASP.NET Core!</p>
        
        
        
        

		        
        
        
	</div><!-- .entry-content -->
    
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>