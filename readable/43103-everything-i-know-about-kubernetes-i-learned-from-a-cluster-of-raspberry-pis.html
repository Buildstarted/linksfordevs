<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Everything I know about Kubernetes I learned from a cluster of Raspberry Pis -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Everything I know about Kubernetes I learned from a cluster of Raspberry Pis</h1><div><div class="field-item even" property="content:encoded"><p>I realized I haven't posted about my DrupalCon Seattle 2019 session titled <a href="https://events.drupal.org/seattle2019/sessions/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis">Everything I know about Kubernetes I learned from a cluster of Raspberry Pis</a>, so I thought I'd remedy that. First, here's a video of the recorded session:</p><p><img src="//www.jeffgeerling.com/sites/jeffgeerling.com/files/images/pi-dramble-original.jpeg" width="390" height="589" alt="The original Raspberry Pi Dramble Cluster" class="insert-image"><br><em>The original Pi Dramble 6-node cluster, running the LAMP stack.</em></p><p>I started running the <a href="https://www.pidramble.com">Raspberry Pi Dramble</a> in 2014, after I realized I could automate the setup of everything in a LAMP stack on a set of Raspberry Pi 2s using Ansible (one Pi for an HTTP load balancer/reverse proxy, two for PHP app backends, and two for MySQL redundancy. Kubernetes was the logical next step, so I moved things towards Kubernetes in 2017, but running Kubernetes was a lesson in pain due to the Pi's limited memory (1 GB maximum) at the time.</p><p>When the Raspberry Pi 4 came around, I acquired some 2 GB models as quickly as I could, and redeployed onto them. Gone were the restrictions that were causing Kubernetes' API to be flaky with the older Pis, and now the Pi 4 cluster is extremely reliable. Early on, <a href="//www.jeffgeerling.com/blog/2019/raspberry-pi-4-needs-fan-heres-why-and-how-you-can-add-one">cooling was an issue</a>, but the recent firmware update has made that less problematic. I now power the cluster using the official PoE HAT, which means I only have one plug for each Pi, and everything fits nicely into a small travel case (if I want to bring the cluster with me anywhere).</p><p><img src="//www.jeffgeerling.com/sites/jeffgeerling.com/files/images/pi-dramble-4-k8s-edition.jpeg" width="650" height="432" alt="Raspberry Pi Dramble 4 Kubernetes edition cluster" class="insert-image"><br><em>The current Pi Dramble, running Kubernetes and sporting <a href="https://www.blinkstick.com/products/blinkstick-nano">BlinkStick Nanos</a>.</em></p><p>I even got it all to run off a 10,000 mAh battery pack with a bunch of USB splitters... but it did not stay powered long, and kept giving low power warningsâ€”so I'll have to consider other options for a highly-mobile four-node Kubernetes bare-metal cluster.</p><p>I've continually updated the cluster so it is tested in a <a href="https://github.com/geerlingguy/raspberry-pi-dramble/tree/master/testing/docker">Docker-based Kubernetes environment</a>, a <a href="https://github.com/geerlingguy/raspberry-pi-dramble/tree/master/testing/vagrant">Vagrant-based Kubernetes local development environment</a>, and of course, the Pi environment. The latter environment causes much consternation, as many common container images are not maintained in an <code>armv6</code> or <code>linux/arm</code> format, which is required when running on the 32-bit ARM OS the Pi uses, Raspbian. But the Pi Dramble abides, and it quietly goes on, serving up traffic for <a href="https://www.pidramble.com">https://www.pidramble.com</a> through the years.</p><p>The official <a href="https://www.pidramble.com/wiki">Pi Dramble Wiki</a> has all the instructions for building your own Pi Kubernetes cluster, with links to buy all the parts I have, along with every step to get it running using open source Ansible roles to install Kubernetes and Docker for ARM, then configure a new four-node cluster.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>