<!DOCTYPE html>
<html lang="en">
<head>
    <title>
propjockey/css-sweeper - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="propjockey/css-sweeper - linksfor.dev(s)"/>
    <meta property="article:author" content="propjockey"/>
    <meta property="og:description" content="MineSweeper implemented in CSS &#x2B; HTML using the Space Toggle trick (no JavaScript!) - propjockey/css-sweeper"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/propjockey/css-sweeper#readme"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - propjockey/css-sweeper</title>
<div class="readable">
        <h1>propjockey/css-sweeper</h1>
            <div>by propjockey</div>
            <div>Reading time: 4-6 minutes</div>
        <div>Posted here: 23 Jul 2020</div>
        <p><a href="https://github.com/propjockey/css-sweeper#readme">https://github.com/propjockey/css-sweeper#readme</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
      <div>
        <article itemprop="text"><p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/0b118771568227413cd55dbb58e56746ad3c58c5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a616d6573307835372532302546302539462539312542442d492532306d616465253230612532307468696e67212d626c756576696f6c65742e7376673f6c6162656c436f6c6f723d323232323232"><img src="https://camo.githubusercontent.com/0b118771568227413cd55dbb58e56746ad3c58c5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a616d6573307835372532302546302539462539312542442d492532306d616465253230612532307468696e67212d626c756576696f6c65742e7376673f6c6162656c436f6c6f723d323232323232" alt="James0x57" data-canonical-src="https://img.shields.io/badge/James0x57%20%F0%9F%91%BD-I%20made%20a%20thing!-blueviolet.svg?labelColor=222222"></a></p>

<p>MineSweeper implemented in CSS + HTML using the Space Toggle trick (no JavaScript!)</p>
<p><a href="https://propjockey.github.io/css-sweeper/" rel="nofollow">PLAY IT HERE!</a></p>
<p>NOTE: this is <a href="https://github.com/propjockey/DOMinion-build-demo">another stress test</a>, expect lag for the next several years of average computer advancement!</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/ab920ca11fd9026a6566f578a24ae5f7884d3400/68747470733a2f2f70726f706a6f636b65792e6769746875622e696f2f6373732d737765657065722f6373732d737765657065722e676966"><img src="https://camo.githubusercontent.com/ab920ca11fd9026a6566f578a24ae5f7884d3400/68747470733a2f2f70726f706a6f636b65792e6769746875622e696f2f6373732d737765657065722f6373732d737765657065722e676966" data-canonical-src="https://propjockey.github.io/css-sweeper/css-sweeper.gif"></a></p>
<h2>Win Condition</h2>
<p>Since it's not practical to clear all the spaces when you expose an empty area (without loops or causing cyclic references), the win condition has been reduced to:</p>
<ol>
<li>Flag all the bombs</li>
<li>Do not flag non-bombs</li>
<li><del>Clear all non-bomb spaces</del></li>
</ol>
<p>This also allows you to win when it comes down to a forced-guess since you can flag without consequence. If you pick right and haven't flagged any non-bombs, you win.</p>
<h2>Mine Field Generation</h2>
<p>The fields are only defined by where the bombs are (and that those spaces are not not-bombs).</p>
<p>The rest of the game, counter, numbers, etc flow from there, so the bombs can be placed anywhere, and in any number.</p>
<p>This is the (lazy/inefficient) script I ran before hand to generate the 16 included Fields:</p>
<div><pre><span>var</span> <span>levels</span> <span>=</span> <span>[</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>,</span><span>{</span><span>}</span><span>]</span>
<span>var</span> <span>genlvl</span> <span>=</span> <span>(</span><span>lvl</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>var</span> <span>y</span> <span>=</span> ~~<span>(</span><span>Math</span><span>.</span><span>random</span><span>(</span><span>)</span> * <span>16</span><span>)</span>
  <span>var</span> <span>x</span> <span>=</span> ~~<span>(</span><span>Math</span><span>.</span><span>random</span><span>(</span><span>)</span> * <span>30</span><span>)</span>
  <span>var</span> <span>key</span> <span>=</span> <span>`bomb-<span><span>${</span><span>y</span><span>}</span></span>-<span><span>${</span><span>x</span><span>}</span></span>`</span>
  <span>lvl</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>`--<span><span>${</span><span>key</span><span>}</span></span>: ; --not-<span><span>${</span><span>key</span><span>}</span></span>: initial;`</span>
<span>}</span>
<span>levels</span><span>.</span><span>forEach</span><span>(</span><span>lvl</span> <span>=&gt;</span> <span>{</span>
  <span>while</span> <span>(</span><span>Object</span><span>.</span><span>keys</span><span>(</span><span>lvl</span><span>)</span><span>.</span><span>length</span> <span>&lt;</span> <span>99</span><span>)</span> <span>{</span> <span>genlvl</span><span>(</span><span>lvl</span><span>)</span> <span>}</span>
<span>}</span><span>)</span>
<span>var</span> <span>cssoutput</span> <span>=</span> <span>""</span>
<span>levels</span><span>.</span><span>forEach</span><span>(</span><span>(</span><span>lvl</span><span>,</span> <span>i</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>var</span> <span>out</span> <span>=</span> <span>`    #level-<span><span>${</span> <span>i</span><span>.</span><span>toString</span><span>(</span><span>10</span><span>)</span><span>.</span><span>padStart</span><span>(</span><span>2</span><span>,</span> <span>"0"</span><span>)</span> <span>}</span></span>:checked ~ #ram {</span>
<span>      --level: "<span><span>${</span> <span>(</span><span>i</span> <span>+</span> <span>1</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>10</span><span>)</span><span>.</span><span>padStart</span><span>(</span><span>2</span><span>,</span> <span>"0"</span><span>)</span> <span>}</span></span>";</span>
<span>      <span><span>${</span><span>Object</span><span>.</span><span>values</span><span>(</span><span>lvl</span><span>)</span><span>.</span><span>join</span><span>(</span><span>"
      "</span><span>)</span><span>}</span></span></span>
<span>    }</span>
<span>`</span>
  <span>cssoutput</span> <span>+=</span> <span>out</span>
<span>}</span><span>)</span>
<span>// cssoutput is the only css necessary to create new fields</span></pre></div>
<h2>CSS is a programming language thanks to the Space Toggle trick</h2>
<h3>Basics of Space Toggle:</h3>
<ul>
<li>if your --css-var holds a space <code>--toggler: ;</code>, then it can be added to anything (any number of times) without changing the value
<div><pre>  <span>--toggler</span>:<span></span> ;
  <span>--red-if-toggler</span>: <span>var</span>(<span>--toggler</span>) red;
  <span>background</span>: <span>var</span>(<span>--red-if-toggler</span><span>,</span> green); <span>/* will be red! */</span></pre></div>
</li>
<li>if your --css-var holds <code>initial</code> <code>--toggler: initial;</code> (or was never defined), then it can be added to anything to force-fallback when referenced
<div><pre>  <span>--toggler</span>: initial;
  <span>--red-if-toggler</span>: <span>var</span>(<span>--toggler</span>) red;
  <span>background</span>: <span>var</span>(<span>--red-if-toggler</span><span>,</span> green); <span>/* will be green! */</span></pre></div>
</li>
<li>Space Toggles can be combined for AND logic: <code>--red-if-togglersalltrue: var(--tog1) var(--tog2) var(--tog3) red;</code></li>
<li>Space Toggles can be combined for OR logic: <code>--red-if-anytogglertrue: var(--tog1, var(--tog2, var(--tog3))) red;</code></li>
<li>Checkboxes (and radio buttons) make a great source for space toggles (shout out to <a href="https://twitter.com/RockStarwind" rel="nofollow">@RockStarwind</a> for that idea)
<div><pre>  <span>#</span><span>common-css-var-area</span> { <span>/* default any "not" values to truthy */</span> <span>--not-flagged</span>:<span></span> ; }
  <span>#</span><span>mycheckbox</span>:<span>checked</span> <span>~</span> <span>#</span><span>common-css-var-area</span> { <span>--flagged</span>:<span></span> ; <span>--not-flagged</span>: initial; }
  <span>#</span><span>anotherbox</span>:<span>checked</span> <span>~</span> <span>#</span><span>common-css-var-area</span> { <span>--open</span>:<span></span> ; }
  <span>#</span><span>common-css-var-area</span> {
    <span>--yellow-if-flagged-and-open</span>: <span>var</span>(<span>--open</span>) <span>var</span>(<span>--flagged</span>) yellow;
    <span>--white-if-not-flagged-and-open</span>: <span>var</span>(<span>--open</span>) <span>var</span>(<span>--not-flagged</span>) white;
    <span>--red-if-flagged</span>: <span>var</span>(<span>--flagged</span>) red;
    <span>color</span>: <span>var</span>(<span>--yellow-if-flagged-and-open</span><span>,</span> <span>var</span>(<span>--white-if-not-flagged-and-open</span><span>,</span> <span>var</span>(<span>--red-if-flagged</span><span>,</span> black)))
  }
  <span>/* color will be black if not flagged and not open */</span></pre></div>
</li>
</ul>
<h3>For reference, here's where Space Toggle has been discussed recently:</h3>
<ul>
<li><a href="https://twitter.com/James0x57/status/1282303255826046977" rel="nofollow">https://twitter.com/James0x57/status/1282303255826046977</a> - introductory tweet (somewhat complex)</li>
<li><a href="https://twitter.com/James0x57/status/1283596399196680192" rel="nofollow">https://twitter.com/James0x57/status/1283596399196680192</a> - Tweet with a relatively simple example.</li>
<li><a href="https://github.com/propjockey/css-media-vars">https://github.com/propjockey/css-media-vars</a> - a library that provides space toggles to use anywhere based on @ media query state</li>
<li><a href="https://twitter.com/James0x57/status/1283906181031960576" rel="nofollow">https://twitter.com/James0x57/status/1283906181031960576</a> - Tweet introducing css-media-vars, with discussion on how Space Toggle is per spec and not relying on bugs/hacks.</li>
<li><a href="https://propjockey.github.io/bcd7sdd/" rel="nofollow">https://propjockey.github.io/bcd7sdd/</a> - Uses Space Toggles to create a circuit board, using checkboxes to mantain state between inputs.</li>
</ul>
<h3>Space Toggle has been independently discoverd a handful of times:</h3>
<ul>
<li><a href="https://twitter.com/anatudor" rel="nofollow">@anatudor</a> probably the first to discover it - about 3 years ago!</li>
<li><a href="https://twitter.com/James0x57" rel="nofollow">@JamesOx57</a> in April 2020 which kickstarted development of augmented-ui v2 because it allows augs to be equipped without extra class names.</li>
<li><a href="https://twitter.com/DavidKPiano" rel="nofollow">@DavidKPiano</a> in June 2020 and instead of just space, he includes an empty comment <code>--pnl: /**/;</code> and calls it <code>prop-and-lock</code></li>
</ul>
<h2>Socials</h2>
<p><a href="https://twitter.com/James0x57" rel="nofollow">Follow me on Twitter for more web dev insanity!</a>
(and feel free to ask questions!)</p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>