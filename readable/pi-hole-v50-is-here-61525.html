<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Pi-hole v5.0 is here! - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Pi-hole v5.0 is here! - linksfor.dev(s)"/>
    <meta property="article:author" content="Adam Warner"/>
    <meta property="og:description" content="After a successful beta testing and development period (many thanks to the beta testers!), we are pleased to announce the release of 5.0 for general availabilit"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://pi-hole.net/2020/05/10/pi-hole-v5-0-is-here/#page-content"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Pi-hole v5.0 is here!</title>
<div class="readable">
        <h1>Pi-hole v5.0 is here!</h1>
            <div>by Adam Warner</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 11 May 2020</div>
        <p><a href="https://pi-hole.net/2020/05/10/pi-hole-v5-0-is-here/#page-content">https://pi-hole.net/2020/05/10/pi-hole-v5-0-is-here/#page-content</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><p>After a successful beta testing and development period (many thanks to the beta testers!), we are pleased to announce the release of 5.0 for general availability!</p><h2><span><strong>Important notice</strong></span></h2><p>There are many fundamental changes between Pi-hole 4.x and 5.0 – as such, <strong>this is strictly a one way operation</strong>. &nbsp;Once you move from 4.x to 5.0, there is no way to go back; you will need to restore from a backup. &nbsp;<span><strong>Read all the notes before you make the jump, and make a backup!</strong></span></p><h3><strong>What’s new?</strong></h3><p>Quite a lot, actually, but we’ll go over the bigger things briefly here.</p><h3>Per-client blocking</h3><p>This is something that users have been asking for for a long time, and we are proud to be finally able to offer this awesome feature. &nbsp;Groups can be created and block lists, blacklist, and whitelist can be applied to groups. &nbsp;Blocklists, blacklist and whitelist can all be individually enabled/disabled.</p><p>To support this new functionality, we migrated the list storage from individual files in&nbsp;<code>/etc/pihole</code>&nbsp;to a new gravity database in the same directory. This allows control over enabling and disabling items in the lists, and even the ability to add comments to remind you why you black/whitelisted something! Furthermore, the database will store when you initially added a domain and when you last changed it (or disabled it). &nbsp;You may notice that updating <code>gravity</code>&nbsp;(<code>pihole -g</code>) takes a little longer to run than previously, however this process normally happens in the background once a week in the early morning hours and should not disrupt your DNS service. The longer run time comes due to generating an efficient&nbsp;<a href="https://www.geeksforgeeks.org/introduction-of-b-tree-2/">B-tree index</a>&nbsp;that allows fast lookups in the database.</p><p>We added a dashboard interface (Group Management) to be able to easily use this powerful new functionality, however, there is currently no CLI interface through the&nbsp;<code>pihole</code>&nbsp;command. If you want to manage groups from the CLI, you’ll have to directly interact with the database. We prepared an extensive example in our official documentation showing some possible configurations once through the web interface but also how to achieve the same thing through the CLI.</p><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/Groups-1-1024x601.png" alt="" width="1024" height="601" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/Groups-1-1024x601.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/Groups-1-300x176.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/Groups-1-768x451.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/Groups-1.png 1474w" sizes="(max-width: 1024px) 100vw, 1024px"><br> <img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/GroupMgt-1-1024x601.png" alt="" width="1024" height="601" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/GroupMgt-1-1024x601.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/GroupMgt-1-300x176.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/GroupMgt-1-768x451.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/GroupMgt-1.png 1474w" sizes="(max-width: 1024px) 100vw, 1024px"></p><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1-1024x510.png" alt="" width="1024" height="510" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1-1024x510.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1-300x149.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1-768x382.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1-1536x764.png 1536w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/domainmgt-1.png 1859w" sizes="(max-width: 1024px) 100vw, 1024px"></p><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Adlistgroupmgt-1024x653.png" alt="" width="1024" height="653" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Adlistgroupmgt-1024x653.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Adlistgroupmgt-300x191.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Adlistgroupmgt-768x490.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Adlistgroupmgt.png 1381w" sizes="(max-width: 1024px) 100vw, 1024px"></p><p>Custom user scripts that rely on manipulating files such as&nbsp;<code>gravity.list</code>,<code>black.list</code>,<code>whitelist.txt</code>&nbsp;etc. will need to be changed to interacting with the database. &nbsp;There is so much power in this new database, it’s worth it! &nbsp; And, we’re here to help, just open a discussion on our Discourse platform and we can assist with advice on how to use the new gravity database for your custom scripts. The bonus is that you will learn how to interact with a database system that is also heavily used in widespread applications such as Android (yes, the smartphone operating system!), Google’s Chrome, Firefox, many content management systems, and a lot more. You can even add this to your CV for your next letter of application, if you like.</p><h3>Deep CNAME inspection</h3><p>This has been a covered in a&nbsp;<a href="https://discourse.pi-hole.net/t/apply-pi-hole-blocking-to-cnames/25445">broadly discussed feature request</a>&nbsp; for the ability to deeply analyze CNAME queries. This will allow Pi-hole to find whether any domain in the CNAME chain is known to be blocked. If one is found, Pi-hole can now block the original query. &nbsp;The feature defaults to being enabled but can be disabled with an FTL config option (<code>CNAME_DEEP_INSPECT=false</code>). &nbsp;Note that if you explicitly whitelist a domain, the domain will be retrieved regardless of whether the CNAME trail leads to a blocked domain (whitelist always takes precedence).</p><h3>Other notable new features</h3><ul><li>Improved graphics on the dashboard (bar charts for the 24 hour history, vs the previous smoothed curves).</li></ul><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard-1024x437.png" alt="" width="1024" height="437" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard-1024x437.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard-300x128.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard-768x328.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard-1536x656.png 1536w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/Dashboard.png 1851w" sizes="(max-width: 1024px) 100vw, 1024px"></p><ul><li>Regex/wildcard support for the whitelist</li><li>Additional information on why a domain was blocked on the query log page. &nbsp;For example, if a query was blocked by a regex, clicking on that status block will take you to the blocklist entry that blocked it.</li></ul><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog-1024x494.png" alt="" width="1024" height="494" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog-1024x494.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog-300x145.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog-768x371.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog-1536x741.png 1536w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/QueryLog.png 1852w" sizes="(max-width: 1024px) 100vw, 1024px"></p><ul><li>Improved parsing of imported blocklists. &nbsp;The gravity script will now show how many domains were not able to be imported, and provide some examples of why</li></ul><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/gravity-update.png" alt="" width="778" height="774" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/gravity-update.png 778w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/gravity-update-300x298.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/gravity-update-150x150.png 150w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/gravity-update-768x764.png 768w" sizes="(max-width: 778px) 100vw, 778px"></p><ul><li><span>Much more efficient memory use.</span></li></ul><ul><li>Custom host names from the web GUI through the “Local DNS Records” tab. &nbsp;This assigns host names to IP addresses, similarly to what can be done in the /etc/hosts file using the CLI. &nbsp;The mapping is stored in /etc/pihole/custom.list. &nbsp;Along with this change, the previous <code>pihole -a hostrecord</code>command is removed.</li></ul><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/LocalDNSRecords-1024x581.png" alt="" width="1024" height="581" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/04/LocalDNSRecords-1024x581.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/LocalDNSRecords-300x170.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/LocalDNSRecords-768x436.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/04/LocalDNSRecords.png 1320w" sizes="(max-width: 1024px) 100vw, 1024px"></p><ul><li>Improved debug log that shows your blocklists and groups in a tabular format, including comments and enable/disable status.</li></ul><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1-1024x165.png" alt="" width="1321" height="213" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1-1024x165.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1-300x48.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1-768x124.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1-1536x247.png 1536w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-1.png 1796w" sizes="(max-width: 1321px) 100vw, 1321px"></p><p><img src="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2-1024x173.png" alt="" width="1321" height="223" srcset="https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2-1024x173.png 1024w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2-300x51.png 300w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2-768x129.png 768w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2-1536x259.png 1536w, https://piholenet.b-cdn.net/wp-content/uploads/2020/05/debug-2.png 1555w" sizes="(max-width: 1321px) 100vw, 1321px"></p><ul><li>Slightly changed order of precedence in blocking. &nbsp;The precedence is now:<ul><li>Exact Whitelist</li><li>Regex Whitelist</li><li>Exact Blacklist</li><li>Blocklist domains (AKA <code>gravity</code>)</li><li>Regex Blacklist</li></ul></li><li>Improved teleporter function. &nbsp;More settings are exported, and there are additional options for import from a teleporter file.</li><li>Pi-hole no longer changes the nameserver assigned to the Pi (in /etc/resolv.conf). &nbsp;The existing nameserver settings for the Pi-hole host are respected and unchanged.</li><li>IPv6 support added to the network table. Note: this network overview is intended as a quick look at the clients on your network using available information, to help you determine if clients on the network are using Pi-hole for DNS. It is <strong>not</strong> intended to be a network management tool.</li><li>Network table can be flushed from the admin GUI.</li><li>Additional FTL configuration options to reflect the new database capabilities.</li><li>Changed the blocklists offered at initial install (some of the previous blocklists are no longer maintained).</li><li>Embedded <code>dnsmasq</code> version has been updated to <code>2.81</code>. See <a href="https://pi-hole.net/2020/04/12/pi-hole-covid-19-and-a-special-easter-gift/">here for details on that.</a></li><li>Add an FTL variant for Raspberry Pi 1 and 0 editions using a&nbsp;<code>qemu</code>&nbsp;armel docker image.</li><li>Add a self-contained FTL variant using musl on Alpine Linux. This binary does not depend on&nbsp;<code>glibc</code>&nbsp;in any way.</li></ul><p>And, of course, also a larger number of small tweaks, improvements and some fixed bugs.</p><p><strong>To update to this new version</strong> from version 4.x, &nbsp;run <code>pihole -up</code>. &nbsp;If you have been running the 5.0 beta release, run <code>pihole checkout master</code> to move from the beta to the master branch.</p></div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>