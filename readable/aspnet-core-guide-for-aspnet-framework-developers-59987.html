<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Core Guide for ASP.NET Framework Developers - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ASP.NET Core Guide for ASP.NET Framework Developers - linksfor.dev(s)"/>
    <meta property="article:author" content="Matthew Jones"/>
    <meta property="og:description" content="ASP.NET Core is here to stay. Let&#x27;s see what has changed from the ASP.NET you&#x27;ve known for years"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://exceptionnotfound.net/asp-net-core-guide-for-asp-net-framework-developers/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ASP.NET Core Guide for ASP.NET Framework Developers</title>
<div class="readable">
        <h1>ASP.NET Core Guide for ASP.NET Framework Developers</h1>
            <div>by Matthew Jones</div>
            <div>Reading time: 7-9 minutes</div>
        <div>Posted here: 24 Mar 2020</div>
        <p><a href="https://exceptionnotfound.net/asp-net-core-guide-for-asp-net-framework-developers/">https://exceptionnotfound.net/asp-net-core-guide-for-asp-net-framework-developers/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="site-main">
<div>
<article>

<section>
<div>
<p>If you are a C# developer, chances are you have heard about this new .NET Core thing and the new version of the ASP.NET framework. You can continue to work with ASP.NET Web API or any other framework from the old ASP.NET you've known for years. But, ASP.NET Core is here to stay.</p><p>In case you missed it, "<a href="https://docs.microsoft.com/en-us/aspnet/core/?view=aspnetcore-3.1">ASP.NET Core</a> is a cross-platform, high-performance, open-source framework for building modern, cloud-based, Internet-connected applications". "ASP.NET Core is a redesign of ASP.NET 4.x, with architectural changes that result in a leaner, more modular framework".</p><p>ASP.NET Core has brought a lot of new features. For example, cross-platform development and deployment, built-in dependency injection, middlewares, health checks, out-of-the-box logging providers, hosted services, API versioning and much more.</p><p>Don't worry if you haven't started to work with ASP.NET Core yet. This is a new framework with lots of new features, but it has brought many other features from the previous version. So, you will feel like home.</p><blockquote>
<p>TL;DR</p>
<ol>
<li>You can create projects from the command line.</li>
<li>NuGet packages are listed on the <code>csproj</code> files.</li>
<li><code>csproj</code> files don't list <code>.cs</code> files anymore.</li>
<li>There's no <code>Web.config</code>, you have a json file instead.</li>
<li>There's no <code>Global.asax</code>, you have <code>Startup.cs</code> instead.</li>
<li>You have a brand new dependency injection (DI) container.</li>
</ol>
</blockquote>
<h2 id="every-journey-begins-with-the-first-step">Every journey begins with the first step</h2><figure><img src="https://images.unsplash.com/photo-1502101872923-d48509bff386?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ" alt="Step up"><figcaption>Photo by <a href="https://unsplash.com/@tateisimikito?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Jukan Tateisi</a> / <a href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Unsplash</a></figcaption></figure><p>If you are adventurous, download and install the ASP.NET Core <a href="https://dotnet.microsoft.com/download">developer (SDK)</a> and create a new empty web project from Visual Studio. These are the files that you get from it.</p><pre><code>|____appsettings.Development.json
|____appsettings.json
|____Program.cs
|____Properties
| |____launchSettings.json
|____&lt;YourProjectName&gt;.csproj
|____Startup.cs
</code></pre><p>ASP.NET Core has been created with other operating systems and IDEs in mind. Now you can create a project, compile it, and run the tests from the command line. For example, to create a new empty Web project, you can use <code>$ dotnet new web</code></p><h2 id="where-is-the-packages-config-file">Where is the packages.config file?</h2><p>If you installed a NuGet package into your brand new ASP.NET Core project, one thing you could notice is the missing <code>packages.config</code> file. If you remember, it is an xml file that holds the packages installed. But, where in the world are those packages referenced now? In the csproj file of your project.</p><p>Now, a csproj file looks like this:</p><pre><code><span><span><span>&lt;</span>Project</span> <span>Sdk</span><span><span>=</span><span>"</span>Microsoft.NET.Sdk.Web<span>"</span></span><span>&gt;</span></span>

  <span><span><span>&lt;</span>PropertyGroup</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>TargetFramework</span><span>&gt;</span></span>netcoreapp3.1<span><span><span>&lt;/</span>TargetFramework</span><span>&gt;</span></span>
  <span><span><span>&lt;/</span>PropertyGroup</span><span>&gt;</span></span>

  <span><span><span>&lt;</span>ItemGroup</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>PackageReference</span> <span>Include</span><span><span>=</span><span>"</span>Newtonsoft.Json<span>"</span></span> <span>Version</span><span><span>=</span><span>"</span>12.0.3<span>"</span></span> <span>/&gt;</span></span>
  <span><span><span>&lt;/</span>ItemGroup</span><span>&gt;</span></span>

<span><span><span>&lt;/</span>Project</span><span>&gt;</span></span>
</code></pre><p>Nuget packages are referenced under <code>ItemGroup</code> in a <code>PackageReference</code> node. There you are <a href="https://www.newtonsoft.com/json">Newtonsoft.Json</a>! <em>Goodbye, <code>packages.config</code>!</em></p><h2 id="wait-what-happened-to-the-csproj-file">Wait! What happened to the csproj file?</h2><p>Csproj files have been simplified. Before, a csproj file listed every single file in the project. All your files with <code>.cs</code> extension were in it. Now, every <code>.cs</code> file within the folder structure of the project is part of it.</p><p>Before, things started to get complicated as time went by and the number of files increased. Sometimes, merge conflicts were a nightmare. There were files under version control not included in the csproj file. Were they meant to be excluded because they didn't apply anymore? Or somebody tried to solve a merge conflict and forgot to include them? <em>This problem is no more!</em></p><h2 id="where-is-the-web-config-file">Where is the Web.config file?</h2><p>Another missing file is the <code>Web.config</code> file. Instead you have a Json file: the <code>appsettings.json</code> file. You can use strings, integers and booleans in your config file. There is even support for sections and subsections. Before, if you wanted to achieve that, you had to come up with a naming convention for your keys. For example, prepending the section and subsection name in every key name.</p><p>Probably, you have used <code>ConfigurationManager</code> all over the place in your code to read configuration values. Now, you can have a class with properties mapped to a section or subsection of your config file. And you can inject it into your services.</p><pre><code>
<span>{</span>
    <span>"MySettings"</span><span>:</span> <span>{</span>
        <span>"ASetting"</span><span>:</span> <span>"ASP.NET Core rocks"</span><span>,</span>
        <span>"AnotherSetting"</span><span>:</span> <span>true</span>
    <span>}</span>
<span>}</span>
</code></pre><pre><code><span>public</span> <span>class</span> <span>MySettings</span>
<span>{</span>
    <span>public</span> <span>string</span> ASetting <span>{</span> <span>get</span><span>;</span> <span>set</span><span>;</span> <span>}</span>
    <span>public</span> <span>bool</span> AnotherSetting <span>{</span> <span>get</span><span>;</span> <span>set</span><span>;</span> <span>}</span>
<span>}</span>

<span>public</span> <span>class</span> <span>YourService</span>
<span>{</span>
    <span>public</span> <span>YourService</span><span>(</span>IOptions<span>&lt;</span>MySettings<span>&gt;</span> settings<span>)</span>
    <span>{</span>
        
    <span>}</span>
<span>}</span>
</code></pre><p><em>You still need to register that configuration into the dependency container! More on that later.</em></p><p>Additionally, you can override keys per environment. You can use the name of your environment in the file name. For example, <code>appsettings.Development.json</code> or <code>appsettings.QA.json</code>. You can specify the current environment with an environment variable or in the <code>launchSettings.json</code> file.</p><p>There's even support for sensitive settings that you don't want to version control: <code>secrets.json</code> file. You can manage this file from the command line too.</p><h2 id="where-is-the-global-asax">Where is the Global.asax?</h2><p>Yet another missing file: <a href="https://stackoverflow.com/questions/2340572/what-is-the-purpose-of-global-asax-in-asp-net"><code>Global.asax</code></a>. You used it to perform actions on application or session events. For example, when application started or ended. It was the place to do one-time setups, register filters or define routes.</p><p>But now we use the <code>Startup.cs</code> file instead. It contains the initialization and all the settings needed to run the application. A <code>Startup.cs</code> file looks like this:</p><pre><code><span>public</span> <span>class</span> <span>Startup</span>
<span>{</span>
    <span>public</span> <span>Startup</span><span>(</span><span>IConfiguration</span> configuration<span>)</span>
    <span>{</span>
        Configuration <span>=</span> configuration<span>;</span>
    <span>}</span>

    <span>public</span> <span>IConfiguration</span> Configuration <span>{</span> <span>get</span><span>;</span> <span>}</span>
    
    <span>public</span> <span>void</span> <span>ConfigureServices</span><span>(</span><span>IServiceCollection</span> services<span>)</span>
    <span>{</span>
    <span>}</span>

    <span>public</span> <span>void</span> <span>Configure</span><span>(</span><span>IApplicationBuilder</span> app<span>,</span> <span>IWebHostEnvironment</span> env<span>)</span>
    <span>{</span>
    <span>}</span>
<span>}</span>
</code></pre><p>It has <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/startup?view=aspnetcore-3.1#the-startup-class">two methods</a>: <code>ConfigureServices</code> and <code>Configure</code>. The <code>Configure</code> method replaces the <code>Global.asax</code> file. It creates the app's request processing pipeline. This is the place to register a filter or a default route for your controllers. And the <code>ConfigureServices</code> is to configure the services to be injected into the dependency container...<em>Wait, what?</em></p><h2 id="a-brand-new-dependency-container">A brand new dependency container</h2><p>Prior to ASP.NET Core, if you wanted to apply dependency injection, you had to bring a container and roll the discovery of services for your controllers. For example, you had an xml file to map your interfaces to your classes or did some assembly scanning to do it automatically.</p><p>Now, a brand new dependency container is included out-of-the-box. You can inject dependencies into your services, filters, middlewares and controllers. It lacks some of the features from your favorite dependency container, but it is meant to suit "90% of the scenarios".</p><p>If you are familiar with the vocabulary from another containers, <code>AddTransient</code>, <code>AddScoped</code> and <code>AddSingleton</code> ring a bell. These are <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-3.1#service-lifetimes">the lifetimes</a> of the injected services, ranging from the shortest to the largest.</p><p>More specifically, a transient service is created every time a new instance is requested. An scoped service is created once per request. Plus, a singleton service is created only once per the application lifetime.</p><p>To register your services, you have to do it inside of the <code>ConfigureServices</code> method of the <code>Startup</code> class. Also, you bind your classes to a section or subsection of the config file here.</p><pre><code><span>public</span> <span>void</span> <span>ConfigureServices</span><span>(</span><span>IServiceCollection</span> services<span>)</span>
<span>{</span>
    services<span>.</span><span><span>AddTransient</span><span>&lt;</span><span>IMyService</span><span>,</span> <span>MyService</span><span>&gt;</span></span><span>(</span><span>)</span><span>;</span>
    
    <span>var</span> section <span>=</span> Configuration<span>.</span><span>GetSection</span><span>(</span><span>"MySettings"</span><span>)</span>
    services<span>.</span><span><span>Configure</span><span>&lt;</span><span>MySettings</span><span>&gt;</span></span><span>(</span>section<span>)</span><span>;</span>
<span>}</span>
</code></pre><h2 id="conclusion">Conclusion</h2><p>You have only scratched the surface of ASP.Net Core. You have learned about some of the changes AspNet Core has brought. But, if you haven't started with ASP.NET Core, go and try it. You may be surprised<strong> </strong>by how things are done now.</p>
</div>
</section>

<hr>

 <hr>
 <hr>

 </article>
</div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>