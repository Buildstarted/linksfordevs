<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Containerize an app with Docker tutorial - .NET Core - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Containerize an app with Docker tutorial - .NET Core - linksfor.dev(s)"/>
    <meta property="article:author" content="IEvangelist"/>
    <meta property="og:description" content="In this tutorial, you&#x27;ll learn how to containerize a .NET Core application with Docker."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://docs.microsoft.com/en-us/dotnet/core/docker/build-container"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Containerize an app with Docker tutorial - .NET Core</title>
<div class="readable">
        <h1>Containerize an app with Docker tutorial - .NET Core</h1>
            <div>by IEvangelist</div>
            <div>Reading time: 17-21 minutes</div>
        <div>Posted here: 01 Jul 2020</div>
        <p><a href="https://docs.microsoft.com/en-us/dotnet/core/docker/build-container">https://docs.microsoft.com/en-us/dotnet/core/docker/build-container</a></p>
        <hr/>
<div id="readability-page-1" class="page">


	<div data-bi-name="body">

		<div>

			

			<section>
				<div>


				<div id="main-column">

					<main id="main" role="main" data-bi-name="content" lang="en-us" dir="ltr">



						

						<ul data-bi-name="page info" lang="en-us" dir="ltr">
							<li>
								<time data-article-date="" aria-label="Article review date" datetime="2020-04-27T00:00:00.000Z" data-article-date-source="ms.date">04/27/2020</time>
							</li>
								<li>11 minutes to read</li>
								<li>
									<a href="https://github.com/dotnet/docs/blob/master/docs/core/docker/build-container.md" title="11 Contributors" aria-label="11 Contributors">
										
									</a>
								</li>
						</ul>

						<nav id="center-doc-outline" data-bi-name="intopic toc" role="navigation" aria-label="Article Outline">
							<h3>In this article</h3>
						<ol><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#create-net-core-app">Create .NET Core app</a></li><li><a href="#publish-net-core-app">Publish .NET Core app</a></li><li><a href="#create-the-dockerfile">Create the Dockerfile</a></li><li><a href="#create-a-container">Create a container</a></li><li><a href="#essential-commands">Essential commands</a></li><li><a href="#clean-up-resources">Clean up resources</a></li><li><a href="#next-steps">Next steps</a></li></ol></nav>

						<!-- <content> -->
							<p>In this tutorial, you'll learn how to containerize a .NET Core application with Docker. Containers have many features and benefits, such as being an immutable infrastructure, providing a portable architecture, and enabling scalability. The image can be used to create containers for your local development environment, private cloud, or public cloud.</p>
<p>In this tutorial, you:</p>
<div>
<ul>
<li>Create and publish a simple .NET Core app</li>
<li>Create and configure a Dockerfile for .NET Core</li>
<li>Build a Docker image</li>
<li>Create and run a Docker container</li>
</ul>
</div>
<p>You'll understand the Docker container build and deploy tasks for a .NET Core application. The <em>Docker platform</em> uses the <em>Docker engine</em> to quickly build and package apps as <em>Docker images</em>. These images are written in the <em>Dockerfile</em> format to be deployed and run in a layered container.</p>

<h2 id="prerequisites"><a href="#prerequisites" aria-labelledby="prerequisites"></a>Prerequisites</h2>
<p>Install the following prerequisites:</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download" data-linktype="external">.NET Core 3.1 SDK</a><br>
If you have .NET Core installed, use the <code>dotnet --info</code> command to determine which SDK you're using.</li>
<li><a href="https://www.docker.com/products/docker-desktop" data-linktype="external">Docker Community Edition</a></li>
<li>A temporary working folder for the <em>Dockerfile</em> and .NET Core example app. In this tutorial, the name <em>docker-working</em> is used as the working folder.</li>
</ul>
<h2 id="create-net-core-app"><a href="#create-net-core-app" aria-labelledby="create-net-core-app"></a>Create .NET Core app</h2>
<p>You need a .NET Core app that the Docker container will run. Open your terminal, create a working folder if you haven't already, and enter it. In the working folder, run the following command to create a new project in a subdirectory named <em>app</em>:</p>
<pre tabindex="0"><code data-author-content="dotnet new console -o App -n NetCore.Docker
"><span><span>dotnet</span> <span>new</span> console<span> -o</span> App<span> -n</span> NetCore.Docker
</span></code></pre>
<p>Your folder tree will look like the following:</p>
<pre tabindex="0"><code data-author-content="docker-working
    └──App
        ├──NetCore.Docker.csproj
        ├──Program.cs
        └──obj
            ├──NetCore.Docker.csproj.nuget.dgspec.json
            ├──NetCore.Docker.csproj.nuget.g.props
            ├──NetCore.Docker.csproj.nuget.g.targets
            ├──project.assets.json
            └──project.nuget.cache
">docker-working
    └──App
        ├──NetCore.Docker.csproj
        ├──Program.cs
        └──obj
            ├──NetCore.Docker.csproj.nuget.dgspec.json
            ├──NetCore.Docker.csproj.nuget.g.props
            ├──NetCore.Docker.csproj.nuget.g.targets
            ├──project.assets.json
            └──project.nuget.cache
</code></pre>
<p>The <code>dotnet new</code> command creates a new folder named <em>App</em> and generates a "Hello World" console application. Change directories and navigate into the <em>App</em> folder, from your terminal session. Use the <code>dotnet run</code> command to start the app. The application will run, and print <code>Hello World!</code> below the command:</p>
<pre tabindex="0"><code data-author-content="dotnet run
Hello World!
"><span><span>dotnet</span> <span>run</span>
Hello World!
</span></code></pre>
<p>The default template creates an app that prints to the terminal and then immediately terminates. For this tutorial, you'll use an app that loops indefinitely. Open the <em>Program.cs</em> file in a text editor.</p>
<div>
<p><span aria-hidden="true"></span> Tip</p>
<p>If you're using Visual Studio Code, from the previous terminal session type the following command:</p>
<pre tabindex="0"><code data-author-content="code .
">code .
</code></pre>
<p>This will open the <em>App</em> folder that contains the project in Visual Studio Code.</p>
</div>
<p>The <em>Program.cs</em> should look like the following C# code:</p>
<pre tabindex="0"><code data-author-content="using System;

namespace NetCore.Docker
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(&quot;Hello World!&quot;);
        }
    }
}
"><span><span>using</span> System;

<span>namespace</span> <span>NetCore.Docker</span>
{
    <span>class</span> <span>Program</span>
    {
        <span><span>static</span> <span>void</span> <span>Main</span>(<span><span>string</span>[] args</span>)</span>
        {
            Console.WriteLine(<span>"Hello World!"</span>);
        }
    }
}
</span></code></pre>
<p>Replace the file with the following code that counts numbers every second:</p>
<pre tabindex="0"><code data-author-content="using System;
using System.Threading.Tasks;

namespace NetCore.Docker
{
    class Program
    {
        static async Task Main(string[] args)
        {
            var counter = 0;
            var max = args.Length != 0 ? Convert.ToInt32(args[0]) : -1;
            while (max == -1 || counter < max)
            {
                Console.WriteLine($&quot;Counter: {++counter}&quot;);
                await Task.Delay(1000);
            }
        }
    }
}
"><span><span>using</span> System;
<span>using</span> System.Threading.Tasks;

<span>namespace</span> <span>NetCore.Docker</span>
{
    <span>class</span> <span>Program</span>
    {
        <span><span>static</span> <span>async</span> Task <span>Main</span>(<span><span>string</span>[] args</span>)</span>
        {
            <span>var</span> counter = <span>0</span>;
            <span>var</span> max = args.Length != <span>0</span> ? Convert.ToInt32(args[<span>0</span>]) : <span>-1</span>;
            <span>while</span> (max == <span>-1</span> || counter &lt; max)
            {
                Console.WriteLine(<span>$"Counter: <span>{++counter}</span>"</span>);
                <span>await</span> Task.Delay(<span>1000</span>);
            }
        }
    }
}
</span></code></pre>
<p>Save the file and test the program again with <code>dotnet run</code>. Remember that this app runs indefinitely. Use the cancel command <kbd>Ctrl+C</kbd> to stop it. The following is an example output:</p>
<pre tabindex="0"><code data-author-content="dotnet run
Counter: 1
Counter: 2
Counter: 3
Counter: 4
^C
"><span><span>dotnet</span> <span>run</span>
Counter: <span>1</span>
Counter: <span>2</span>
Counter: <span>3</span>
Counter: <span>4</span>
^C
</span></code></pre>
<p>If you pass a number on the command line to the app, it will only count up to that amount and then exit. Try it with <code>dotnet run -- 5</code> to count to five.</p>
<div>
<p><span aria-hidden="true"></span> Important</p>
<p>Any parameters after <code>--</code> are not passed to the <code>dotnet run</code> command and instead are passed to your application.</p>
</div>
<h2 id="publish-net-core-app"><a href="#publish-net-core-app" aria-labelledby="publish-net-core-app"></a>Publish .NET Core app</h2>
<p>Before adding the .NET Core app to the Docker image, first it must be published. It is best to have the container run the published version of the app. To publish the app, run the following command:</p>
<pre tabindex="0"><code data-author-content="dotnet publish -c Release
"><span><span>dotnet</span> <span>publish</span><span> -c</span> Release
</span></code></pre>
<p>This command compiles your app to the <em>publish</em> folder. The path to the <em>publish</em> folder from the working folder should be <code>.\App\bin\Release\netcoreapp3.1\publish\</code></p>
<div id="tabgroup_CeZOj-G++Q" data-bi-name="tab-group">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_CeZOj-G++Q_windows" role="tab" aria-controls="tabpanel_CeZOj-G++Q_windows" data-tab="windows" tabindex="0" aria-selected="true" data-linktype="self-bookmark" data-bi-name="tab">Windows</a>
</li>
<li role="presentation">
<a href="#tabpanel_CeZOj-G++Q_linux" role="tab" aria-controls="tabpanel_CeZOj-G++Q_linux" data-tab="linux" tabindex="-1" data-linktype="self-bookmark" data-bi-name="tab" aria-selected="false">Linux</a>
</li>
</ul>
<section id="tabpanel_CeZOj-G++Q_windows" role="tabpanel" data-tab="windows">

<p>From the <em>App</em> folder, get a directory listing of the publish folder to verify that the <em>NetCore.Docker.dll</em> file was created.</p>
<pre tabindex="0"><code data-author-content="dir .\bin\Release\netcoreapp3.1\publish\

    Directory: C:\Users\dapine\App\bin\Release\netcoreapp3.1\publish

Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----        4/27/2020   8:27 AM            434 NetCore.Docker.deps.json
-a----        4/27/2020   8:27 AM           6144 NetCore.Docker.dll
-a----        4/27/2020   8:27 AM         171520 NetCore.Docker.exe
-a----        4/27/2020   8:27 AM            860 NetCore.Docker.pdb
-a----        4/27/2020   8:27 AM            154 NetCore.Docker.runtimeconfig.json
"><span>dir .\bin\Release\netcoreapp3.<span>1</span>\publish\

    Directory: C:\Users\dapine\App\bin\Release\netcoreapp3.<span>1</span>\publish

Mode                LastWriteTime         Length Name
----                -------------         ------ ----<span>
-a----</span>        <span>4</span>/<span>27</span>/<span>2020</span>   <span>8</span>:<span>27</span> AM            <span>434</span> NetCore.Docker.deps.json<span>
-a----</span>        <span>4</span>/<span>27</span>/<span>2020</span>   <span>8</span>:<span>27</span> AM           <span>6144</span> NetCore.Docker.dll<span>
-a----</span>        <span>4</span>/<span>27</span>/<span>2020</span>   <span>8</span>:<span>27</span> AM         <span>171520</span> NetCore.Docker.exe<span>
-a----</span>        <span>4</span>/<span>27</span>/<span>2020</span>   <span>8</span>:<span>27</span> AM            <span>860</span> NetCore.Docker.pdb<span>
-a----</span>        <span>4</span>/<span>27</span>/<span>2020</span>   <span>8</span>:<span>27</span> AM            <span>154</span> NetCore.Docker.runtimeconfig.json
</span></code></pre>
</section>
<section id="tabpanel_CeZOj-G++Q_linux" role="tabpanel" data-tab="linux" aria-hidden="true" hidden="hidden">

<p>Use the <code>ls</code> command to get a directory listing and verify that the <em>NetCore.Docker.dll</em> file was created.</p>
<pre tabindex="0"><code data-author-content="me@DESKTOP:/docker-working/app$ ls bin/Release/netcoreapp3.1/publish
NetCore.Docker.deps.json  NetCore.Docker.dll  NetCore.Docker.pdb  NetCore.Docker.runtimeconfig.json
"><span>me@DESKTOP:/docker-working/app$ ls bin/Release/netcoreapp3.1/publish
NetCore.Docker.deps.json  NetCore.Docker.dll  NetCore.Docker.pdb  NetCore.Docker.runtimeconfig.json
</span></code></pre>
</section>
</div>
<h2 id="create-the-dockerfile"><a href="#create-the-dockerfile" aria-labelledby="create-the-dockerfile"></a>Create the Dockerfile</h2>
<p>The <em>Dockerfile</em> file is used by the <code>docker build</code> command to create a container image. This file is a text file named <em>Dockerfile</em> that doesn't have an extension.</p>
<p>Create a file named <em>Dockerfile</em> in directory containing the <em>.csproj</em> and open it in a text editor. This tutorial will use the ASP.NET Core runtime image (which contains the .NET Core runtime image) and corresponds with the .NET Core console application.</p>
<pre tabindex="0"><code data-author-content="FROM mcr.microsoft.com/dotnet/core/aspnet:3.1
"><span><span>FROM</span> mcr.microsoft.com/dotnet/core/aspnet:<span>3.1</span>
</span></code></pre>
<div>
<p><span aria-hidden="true"></span> Note</p>
<p>The ASP.NET Core runtime image is used intentionally here, although the <code>mcr.microsoft.com/dotnet/core/runtime:3.1</code> image could have been used.</p>
</div>
<p>The <code>FROM</code> keyword requires a fully qualified Docker container image name. The Microsoft Container Registry (MCR, mcr.microsoft.com) is a syndicate of Docker Hub - which hosts publicly accessible containers. The <code>dotnet/core</code> segment is the container repository, where as the <code>aspnet</code> segment is the container image name. The image is tagged with <code>3.1</code>, which is used for versioning. Thus, <code>mcr.microsoft.com/dotnet/core/aspnet:3.1</code> is the .NET Core 3.1 runtime. Make sure that you pull the runtime version that matches the runtime targeted by your SDK. For example, the app created in the previous section used the .NET Core 3.1 SDK and the base image referred to in the <em>Dockerfile</em> is tagged with <strong>3.1</strong>.</p>
<p>Save the <em>Dockerfile</em> file. The directory structure of the working folder should look like the following. Some of the deeper-level files and folders have been omitted to save space in the article:</p>
<pre tabindex="0"><code data-author-content="docker-working
    └──App
        ├──Dockerfile
        ├──NetCore.Docker.csproj
        ├──Program.cs
        ├──bin
        │   └──Release
        │       └──netcoreapp3.1
        │           └──publish
        │               ├──NetCore.Docker.deps.json
        │               ├──NetCore.Docker.exe
        │               ├──NetCore.Docker.dll
        │               ├──NetCore.Docker.pdb
        │               └──NetCore.Docker.runtimeconfig.json
        └──obj
            └──...
">docker-working
    └──App
        ├──Dockerfile
        ├──NetCore.Docker.csproj
        ├──Program.cs
        ├──bin
        │   └──Release
        │       └──netcoreapp3.1
        │           └──publish
        │               ├──NetCore.Docker.deps.json
        │               ├──NetCore.Docker.exe
        │               ├──NetCore.Docker.dll
        │               ├──NetCore.Docker.pdb
        │               └──NetCore.Docker.runtimeconfig.json
        └──obj
            └──...
</code></pre>
<p>From your terminal, run the following command:</p>
<pre tabindex="0"><code data-author-content="docker build -t counter-image -f Dockerfile .
"><span>docker build -t counter-image -f Dockerfile .
</span></code></pre>
<p>Docker will process each line in the <em>Dockerfile</em>. The <code>.</code> in the <code>docker build</code> command tells Docker to use the current folder to find a <em>Dockerfile</em>. This command builds the image and creates a local repository named <strong>counter-image</strong> that points to that image. After this command finishes, run <code>docker images</code> to see a list of images installed:</p>
<pre tabindex="0"><code data-author-content="docker images
REPOSITORY                              TAG                 IMAGE ID            CREATED             SIZE
counter-image                           latest              e6780479db63        4 days ago          190MB
mcr.microsoft.com/dotnet/core/aspnet    3.1                 e6780479db63        4 days ago          190MB
"><span>docker images
REPOSITORY                              TAG                 IMAGE ID            CREATED             SIZE
counter-image                           latest              e6780479db63        <span>4</span> days ago          <span>190</span>MB
mcr.microsoft.com/dotnet/core/aspnet    <span>3.1</span>                 e6780479db63        <span>4</span> days ago          <span>190</span>MB
</span></code></pre>
<p>Notice that the two images share the same <strong>IMAGE ID</strong> value. The value is the same between both images because the only command in the <em>Dockerfile</em> was to base the new image on an existing image. Let's add three commands to the <em>Dockerfile</em>. Each command creates a new image layer with the final command representing the <strong>counter-image</strong> repository entry points to.</p>
<pre tabindex="0"><code data-author-content="COPY bin/Release/netcoreapp3.1/publish/ App/
WORKDIR /App
ENTRYPOINT [&quot;dotnet&quot;, &quot;NetCore.Docker.dll&quot;]
"><span><span>COPY</span><span> bin/Release/netcoreapp3.1/publish/ App/</span>
<span>WORKDIR</span><span> /App</span>
<span>ENTRYPOINT</span><span> [<span>"dotnet"</span>, <span>"NetCore.Docker.dll"</span>]</span>
</span></code></pre>
<p>The <code>COPY</code> command tells Docker to copy the specified folder on your computer to a folder in the container. In this example, the <em>publish</em> folder is copied to a folder named <em>App</em> in the container.</p>
<p>The <code>WORKDIR</code> command changes the <strong>current directory</strong> inside of the container to <em>App</em>.</p>
<p>The next command, <code>ENTRYPOINT</code>, tells Docker to configure the container to run as an executable. When the container starts, the <code>ENTRYPOINT</code> command runs. When this command ends, the container will automatically stop.</p>
<p>From your terminal, run <code>docker build -t counter-image -f Dockerfile .</code> and when that command finishes, run <code>docker images</code>.</p>
<pre tabindex="0"><code data-author-content="docker build -t counter-image -f Dockerfile .
Sending build context to Docker daemon  1.117MB
Step 1/4 : FROM mcr.microsoft.com/dotnet/core/aspnet:3.1
 ---> e6780479db63
Step 2/4 : COPY bin/Release/netcoreapp3.1/publish/ App/
 ---> d1732740eed2
Step 3/4 : WORKDIR /App
 ---> Running in b1701a42f3ff
Removing intermediate container b1701a42f3ff
 ---> 919aab5b95e3
Step 4/4 : ENTRYPOINT [&quot;dotnet&quot;, &quot;NetCore.Docker.dll&quot;]
 ---> Running in c12aebd26ced
Removing intermediate container c12aebd26ced
 ---> cd11c3df9b19
Successfully built cd11c3df9b19
Successfully tagged counter-image:latest

docker images
REPOSITORY                              TAG                 IMAGE ID            CREATED             SIZE
counter-image                           latest              cd11c3df9b19        41 seconds ago      190MB
mcr.microsoft.com/dotnet/core/aspnet    3.1                 e6780479db63        4 days ago          190MB
"><span>docker build -t counter-image -f Dockerfile .
Sending build context to Docker daemon  <span>1.117</span>MB
Step <span>1</span>/<span>4</span> : <span>FROM</span> mcr.microsoft.com/dotnet/core/aspnet:<span>3.1</span>
 ---&gt; e6780479db63
Step <span>2</span>/<span>4</span> : <span>COPY</span><span> bin/Release/netcoreapp3.1/publish/ App/</span>
 ---&gt; d1732740eed2
Step <span>3</span>/<span>4</span> : <span>WORKDIR</span><span> /App</span>
 ---&gt; Running in b1701a42f3ff
Removing intermediate container b1701a42f3ff
 ---&gt; <span>919</span>aab5b95e3
Step <span>4</span>/<span>4</span> : <span>ENTRYPOINT</span><span> [<span>"dotnet"</span>, <span>"NetCore.Docker.dll"</span>]</span>
 ---&gt; Running in c12aebd26ced
Removing intermediate container c12aebd26ced
 ---&gt; cd11c3df9b19
Successfully built cd11c3df9b19
Successfully tagged counter-image:latest

docker images
REPOSITORY                              TAG                 IMAGE ID            CREATED             SIZE
counter-image                           latest              cd11c3df9b19        <span>41</span> seconds ago      <span>190</span>MB
mcr.microsoft.com/dotnet/core/aspnet    <span>3.1</span>                 e6780479db63        <span>4</span> days ago          <span>190</span>MB
</span></code></pre>
<p>Each command in the <em>Dockerfile</em> generated a layer and created an <strong>IMAGE ID</strong>. The final <strong>IMAGE ID</strong> (yours will be different) is <strong>cd11c3df9b19</strong> and next you'll create a container based on this image.</p>
<h2 id="create-a-container"><a href="#create-a-container" aria-labelledby="create-a-container"></a>Create a container</h2>
<p>Now that you have an image that contains your app, you can create a container. You can create a container in two ways. First, create a new container that is stopped.</p>
<pre tabindex="0"><code data-author-content="docker create --name core-counter counter-image
0f281cb3af994fba5d962cc7d482828484ea14ead6bfe386a35e5088c0058851
"><span>docker create --name core-counter counter-image
<span>0</span>f281cb3af994fba5d962cc7d482828484ea14ead6bfe386a35e5088c0058851
</span></code></pre>
<p>The <code>docker create</code> command from above will create a container based on the <strong>counter-image</strong> image. The output of that command shows you the <strong>CONTAINER ID</strong> (yours will be different) of the created container. To see a list of <em>all</em> containers, use the <code>docker ps -a</code> command:</p>
<pre tabindex="0"><code data-author-content="docker ps -a
CONTAINER ID    IMAGE            COMMAND                   CREATED           STATUS     PORTS    NAMES
0f281cb3af99    counter-image    &quot;dotnet NetCore.Dock…&quot;    40 seconds ago    Created             core-counter
"><span>docker ps -a
CONTAINER ID    IMAGE            COMMAND                   CREATED           STATUS     PORTS    NAMES
<span>0</span>f281cb3af99    counter-image    <span>"dotnet NetCore.Dock…"</span>    <span>40</span> seconds ago    Created             core-counter
</span></code></pre>
<h3 id="manage-the-container"><a href="#manage-the-container" aria-labelledby="manage-the-container"></a>Manage the container</h3>
<p>The container was created with a specific name <code>core-counter</code>, this name is used to manage the container. The following example uses the <code>docker start</code> command to start the container, and then uses the <code>docker ps</code> command to only show containers that are running:</p>
<pre tabindex="0"><code data-author-content="docker start core-counter
core-counter

docker ps
CONTAINER ID    IMAGE            COMMAND                   CREATED          STATUS          PORTS    NAMES
2f6424a7ddce    counter-image    &quot;dotnet NetCore.Dock…&quot;    2 minutes ago    Up 11 seconds            core-counter
"><span>docker start core-counter
core-counter

docker ps
CONTAINER ID    IMAGE            COMMAND                   CREATED          STATUS          PORTS    NAMES
<span>2</span>f6424a7ddce    counter-image    <span>"dotnet NetCore.Dock…"</span>    <span>2</span> minutes ago    Up <span>11</span> seconds            core-counter
</span></code></pre>
<p>Similarly, the <code>docker stop</code> command will stop the container. The following example uses the <code>docker stop</code> command to stop the container, and then uses the <code>docker ps</code> command to show that no containers are running:</p>
<pre tabindex="0"><code data-author-content="docker stop core-counter
core-counter

docker ps
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
"><span>docker stop core-counter
core-counter

docker ps
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
</span></code></pre>
<h3 id="connect-to-a-container"><a href="#connect-to-a-container" aria-labelledby="connect-to-a-container"></a>Connect to a container</h3>
<p>After a container is running, you can connect to it to see the output. Use the <code>docker start</code> and <code>docker attach</code> commands to start the container and peek at the output stream. In this example, the <kbd>Ctrl+C</kbd> keystroke is used to detach from the running container. This keystroke will end the process in the container unless otherwise specified, which would stop the container. The <code>--sig-proxy=false</code> parameter ensures that <kbd>Ctrl+C</kbd> will not stop the process in the container.</p>
<p>After you detach from the container, reattach to verify that it's still running and counting.</p>
<pre tabindex="0"><code data-author-content="docker start core-counter
core-counter

docker attach --sig-proxy=false core-counter
Counter: 7
Counter: 8
Counter: 9
^C

docker attach --sig-proxy=false core-counter
Counter: 17
Counter: 18
Counter: 19
^C
"><span>docker start core-counter
core-counter

docker attach --sig-proxy=false core-counter
Counter: <span>7</span>
Counter: <span>8</span>
Counter: <span>9</span>
^C

docker attach --sig-proxy=false core-counter
Counter: <span>17</span>
Counter: <span>18</span>
Counter: <span>19</span>
^C
</span></code></pre>
<h3 id="delete-a-container"><a href="#delete-a-container" aria-labelledby="delete-a-container"></a>Delete a container</h3>
<p>For the purposes of this article you don't want containers just hanging around doing nothing. Delete the container you previously created. If the container is running, stop it.</p>
<pre tabindex="0"><code data-author-content="docker stop core-counter
"><span>docker stop core-counter
</span></code></pre>
<p>The following example lists all containers. It then uses the <code>docker rm</code> command to delete the container, and then checks a second time for any running containers.</p>
<pre tabindex="0"><code data-author-content="docker ps -a
CONTAINER ID    IMAGE            COMMAND                   CREATED          STATUS                        PORTS    NAMES
2f6424a7ddce    counter-image    &quot;dotnet NetCore.Dock…&quot;    7 minutes ago    Exited (143) 20 seconds ago            core-counter

docker rm core-counter
core-counter

docker ps -a
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
"><span>docker ps -a
CONTAINER ID    IMAGE            COMMAND                   CREATED          STATUS                        PORTS    NAMES
<span>2</span>f6424a7ddce    counter-image    <span>"dotnet NetCore.Dock…"</span>    <span>7</span> minutes ago    Exited (<span>143</span>) <span>20</span> seconds ago            core-counter

docker rm core-counter
core-counter

docker ps -a
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
</span></code></pre>
<h3 id="single-run"><a href="#single-run" aria-labelledby="single-run"></a>Single run</h3>
<p>Docker provides the <code>docker run</code> command to create and run the container as a single command. This command eliminates the need to run <code>docker create</code> and then <code>docker start</code>. You can also set this command to automatically delete the container when the container stops. For example, use <code>docker run -it --rm</code> to do two things, first, automatically use the current terminal to connect to the container, and then when the container finishes, remove it:</p>
<pre tabindex="0"><code data-author-content="docker run -it --rm counter-image
Counter: 1
Counter: 2
Counter: 3
Counter: 4
Counter: 5
^C
"><span>docker <span>run</span><span> -it --rm counter-image</span>
Counter: <span>1</span>
Counter: <span>2</span>
Counter: <span>3</span>
Counter: <span>4</span>
Counter: <span>5</span>
^C
</span></code></pre>
<p>The container also passes parameters into the execution of the .NET Core app. To instruct the .NET Core app to count only to 3 pass in 3.</p>
<pre tabindex="0"><code data-author-content="docker run -it --rm counter-image 3
Counter: 1
Counter: 2
Counter: 3
"><span>docker <span>run</span><span> -it --rm counter-image 3</span>
Counter: <span>1</span>
Counter: <span>2</span>
Counter: <span>3</span>
</span></code></pre>
<p>With <code>docker run -it</code>, the <kbd>Ctrl+C</kbd> command will stop process that is running in the container, which in turn, stops the container. Since the <code>--rm</code> parameter was provided, the container is automatically deleted when the process is stopped. Verify that it doesn't exist:</p>
<pre tabindex="0"><code data-author-content="docker ps -a
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
"><span>docker ps -a
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
</span></code></pre>
<h3 id="change-the-entrypoint"><a href="#change-the-entrypoint" aria-labelledby="change-the-entrypoint"></a>Change the ENTRYPOINT</h3>
<p>The <code>docker run</code> command also lets you modify the <code>ENTRYPOINT</code> command from the <em>Dockerfile</em> and run something else, but only for that container. For example, use the following command to run <code>bash</code> or <code>cmd.exe</code>. Edit the command as necessary.</p>
<div id="tabgroup_CeZOj-G++Q-1" data-bi-name="tab-group">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_CeZOj-G++Q-1_windows" role="tab" aria-controls="tabpanel_CeZOj-G++Q-1_windows" data-tab="windows" tabindex="0" aria-selected="true" data-linktype="self-bookmark" data-bi-name="tab">Windows</a>
</li>
<li role="presentation">
<a href="#tabpanel_CeZOj-G++Q-1_linux" role="tab" aria-controls="tabpanel_CeZOj-G++Q-1_linux" data-tab="linux" tabindex="-1" data-linktype="self-bookmark" data-bi-name="tab" aria-selected="false">Linux</a>
</li>
</ul>
<section id="tabpanel_CeZOj-G++Q-1_windows" role="tabpanel" data-tab="windows">

<p>In this example, <code>ENTRYPOINT</code> is changed to <code>cmd.exe</code>. <kbd>Ctrl+C</kbd> is pressed to end the process and stop the container.</p>
<pre tabindex="0"><code data-author-content="docker run -it --rm --entrypoint &quot;cmd.exe&quot; counter-image

Microsoft Windows [Version 10.0.17763.379]
(c) 2018 Microsoft Corporation. All rights reserved.

C:\>dir
 Volume in drive C has no label.
 Volume Serial Number is 3005-1E84

 Directory of C:\

04/09/2019  08:46 AM    <DIR>          app
03/07/2019  10:25 AM             5,510 License.txt
04/02/2019  01:35 PM    <DIR>          Program Files
04/09/2019  01:06 PM    <DIR>          Users
04/02/2019  01:35 PM    <DIR>          Windows
               1 File(s)          5,510 bytes
               4 Dir(s)  21,246,517,248 bytes free

C:\>^C
"><span>docker <span>run</span><span> -it --rm --entrypoint <span>"cmd.exe"</span> counter-image</span>

Microsoft Windows [Version <span>10.0</span>.<span>17763.379</span>]
(c) <span>2018</span> Microsoft Corporation. All rights reserved.

C:\&gt;dir
 <span>Volume</span><span> <span>in</span> drive C has no label.</span>
 <span>Volume</span><span> Serial Number is 3005-1E84</span>

 Directory of C:\

<span>04</span>/<span>09</span>/<span>2019</span>  <span>08</span>:<span>46</span> AM    &lt;DIR&gt;          app
<span>03</span>/<span>07</span>/<span>2019</span>  <span>10</span>:<span>25</span> AM             <span>5</span>,<span>510</span> License.txt
<span>04</span>/<span>02</span>/<span>2019</span>  <span>01</span>:<span>35</span> PM    &lt;DIR&gt;          Program Files
<span>04</span>/<span>09</span>/<span>2019</span>  <span>01</span>:<span>06</span> PM    &lt;DIR&gt;          Users
<span>04</span>/<span>02</span>/<span>2019</span>  <span>01</span>:<span>35</span> PM    &lt;DIR&gt;          Windows
               <span>1</span> File(s)          <span>5</span>,<span>510</span> bytes
               <span>4</span> Dir(s)  <span>21</span>,<span>246</span>,<span>517</span>,<span>248</span> bytes free

C:\&gt;^C
</span></code></pre>
</section>
<section id="tabpanel_CeZOj-G++Q-1_linux" role="tabpanel" data-tab="linux" aria-hidden="true" hidden="hidden">

<p>In this example, <code>ENTRYPOINT</code> is changed to <code>bash</code>. The <code>exit</code> command is run which ends the process and stop the container.</p>
<pre tabindex="0"><code data-author-content="docker run -it --rm --entrypoint &quot;bash&quot; counter-image
root@b735b9799abf:/App# ls
NetCore.Docker.deps.json  NetCore.Docker.dll  NetCore.Docker.exe  NetCore.Docker.pdb  NetCore.Docker.runtimeconfig.json
root@b735b9799abf:/App# dotnet NetCore.Docker.dll 3
Counter: 1
Counter: 2
Counter: 3
root@b735b9799abf:/App# exit
exit
"><span>docker run -it --rm --entrypoint <span>"bash"</span> counter-image
root@b735b9799abf:/App<span># ls</span>
NetCore.Docker.deps.json  NetCore.Docker.dll  NetCore.Docker.exe  NetCore.Docker.pdb  NetCore.Docker.runtimeconfig.json
root@b735b9799abf:/App<span># dotnet NetCore.Docker.dll 3</span>
Counter: 1
Counter: 2
Counter: 3
root@b735b9799abf:/App<span># exit</span>
<span>exit</span>
</span></code></pre>
</section>
</div>
<h2 id="essential-commands"><a href="#essential-commands" aria-labelledby="essential-commands"></a>Essential commands</h2>
<p>Docker has many different commands that create, manage, and interact with containers and images. These Docker commands are essential to managing your containers:</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/commandline/build/" data-linktype="external">docker build</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/run/" data-linktype="external">docker run</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/ps/" data-linktype="external">docker ps</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/stop/" data-linktype="external">docker stop</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/rm/" data-linktype="external">docker rm</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/rmi/" data-linktype="external">docker rmi</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/image/" data-linktype="external">docker image</a></li>
</ul>
<h2 id="clean-up-resources"><a href="#clean-up-resources" aria-labelledby="clean-up-resources"></a>Clean up resources</h2>
<p>During this tutorial, you created containers and images. If you want, delete these resources. Use the following commands to</p>
<ol>
<li><p>List all containers</p>
<pre tabindex="0"><code data-author-content="docker ps -a
"><span>docker ps -a
</span></code></pre>
</li>
<li><p>Stop containers that are running by their name.</p>
<pre tabindex="0"><code data-author-content="docker stop counter-image
"><span>docker stop counter-image
</span></code></pre>
</li>
<li><p>Delete the container</p>
<pre tabindex="0"><code data-author-content="docker rm counter-image
"><span>docker rm counter-image
</span></code></pre>
</li>
</ol>
<p>Next, delete any images that you no longer want on your machine. Delete the image created by your <em>Dockerfile</em> and then delete the .NET Core image the <em>Dockerfile</em> was based on. You can use the <strong>IMAGE ID</strong> or the <strong>REPOSITORY:TAG</strong> formatted string.</p>
<pre tabindex="0"><code data-author-content="docker rmi counter-image:latest
docker rmi mcr.microsoft.com/dotnet/core/aspnet:3.1
"><span>docker rmi counter-image:latest
docker rmi mcr.microsoft.com/dotnet/core/aspnet:<span>3.1</span>
</span></code></pre>
<p>Use the <code>docker images</code> command to see a list of images installed.</p>
<div>
<p><span aria-hidden="true"></span> Tip</p>
<p>Image files can be large. Typically, you would remove temporary containers you created while testing and developing your app. You usually keep the base images with the runtime installed if you plan on building other images based on that runtime.</p>
</div>
<h2 id="next-steps"><a href="#next-steps" aria-labelledby="next-steps"></a>Next steps</h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/docker/building-net-docker-images" data-linktype="absolute-path">Learn how to containerize an ASP.NET Core application.</a></li>
<li><a href="https://dotnet.microsoft.com/learn/web/aspnet-microservice-tutorial/intro" data-linktype="external">Try the ASP.NET Core Microservice Tutorial.</a></li>
<li><a href="https://azure.microsoft.com/overview/containers/" data-linktype="external">Review the Azure services that support containers.</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/" data-linktype="external">Read about Dockerfile commands.</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/containers/overview" data-linktype="absolute-path">Explore the Container Tools for Visual Studio</a></li>
</ul>

						<!-- </content> -->

						</main>

						<!-- recommended content page section -->

							<nav data-bi-name="recommendation-bottom" hidden="" id="recommended-content-center" aria-labelledby="recommended-content-center-title">
								<h3 id="recommended-content-center-title">Related Articles</h3>
							</nav>

						<!-- end recommended content page section -->

						<!-- page rating section -->
								
						<!-- end page rating section -->


						<!-- feedback section -->
<section data-bi-name="feedback-section">

    <h2 id="feedback">Feedback</h2>

    <div>
        <p aria-hidden="true" id="send-feedback-about">Submit and view feedback for</p>

        
    </div>

    
</section>

						<!-- end feedback section -->

						<!-- feedback report section -->
						<!-- end feedback report section -->

						
					</div>

					

					<!--end of div.columns -->
				</div>

			<!--end of .primary-holder -->
			</section>

			
		</div>

		<!--end of .mainContainer -->
	</div>

	

	

		
		
	
	<span id="adobe-target-experiment-container" hidden=""></span>


</div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>