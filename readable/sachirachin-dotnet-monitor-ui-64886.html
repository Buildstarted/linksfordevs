<!DOCTYPE html>
<html lang="en">
<head>
    <title>
SachiraChin/dotnet-monitor-ui - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="SachiraChin/dotnet-monitor-ui - linksfor.dev(s)"/>
    <meta property="article:author" content="SachiraChin"/>
    <meta property="og:description" content="Contribute to SachiraChin/dotnet-monitor-ui development by creating an account on GitHub."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/SachiraChin/dotnet-monitor-ui#demo"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - SachiraChin/dotnet-monitor-ui</title>
<div class="readable">
        <h1>SachiraChin/dotnet-monitor-ui</h1>
            <div>by SachiraChin</div>
            <div>Reading time: 8-10 minutes</div>
        <div>Posted here: 28 Jul 2020</div>
        <p><a href="https://github.com/SachiraChin/dotnet-monitor-ui#demo">https://github.com/SachiraChin/dotnet-monitor-ui#demo</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text">
<p>This project is created as an easy to access user experience for <code>dotnet-monitor</code> tool which can be found <a href="https://github.com/dotnet/diagnostics">here</a>. If you haven't read original article about this, please read <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/" rel="nofollow">this</a> to get better understanding about features available in this tool.</p>
<h2>Updates</h2>
<h3>2020-07-23</h3>
<ul>
<li>Updated landing page UI to show full details of single app when API returns only one process.</li>
<li>Added UI for <code>/metrics</code> endpoint to show graph of returned metrics. Details <a href="#metrics">here</a>.</li>
<li>Updated how to run the project with the support to CORS rules in source repository. Details <a href="#i-want-to-try-it-out">here</a>.</li>
<li>Added better error handling for <code>trace</code> POST endpoint access.</li>
<li>Increased width of views so user has more visibility on content.</li>
<li>Added thanking note. Read <a href="#thank-you">here</a>.</li>
</ul>
<h3>2020-07-27</h3>
<ul>
<li>Added <code>text/event-stream</code> support for <code>/logs</code> endpoint.</li>
<li>Added dark theme (experimental).</li>
<li>Improvements for <code>/metrics</code> endpoint access.</li>
<li>Demo app is now available for use: <a href="https://dotnet-monitor-ui.dev/" rel="nofollow">https://dotnet-monitor-ui.dev/</a></li>
</ul>
<h2>Demo</h2>
<p>Now you can use the latest version of <code>dotnet-monitor ui</code> online from <a href="https://dotnet-monitor-ui.dev/" rel="nofollow">https://dotnet-monitor-ui.dev/</a>. Please follow below instruction to use this site to access <code>dotnet-monitor</code> endpoints accessible to your machine. For now, you have to build the solution from the repo to make it work with UI. More details why can be found <a href="#i-want-to-build-it">here</a>.</p>
<ol>
<li>Clone official <code>dotnet diagnostics</code> repository from this url. <a href="https://github.com/dotnet/diagnostics">https://github.com/dotnet/diagnostics</a></li>
<li>Navigate to <code>\src\Tools\dotnet-monitor</code> from your favorite command line tool.</li>
<li>Run <code>dotnet build</code></li>
<li>Open <code>\artifacts\bin\dotnet-monitor\Debug\netcoreapp2.1\appsettings.json</code> and add below section to the end.</li>
</ol>
<div><pre>  <span><span>"</span>CorsConfiguration<span>"</span></span>: {
    <span><span>"</span>AllowedOrigins<span>"</span></span>: <span><span>"</span>https://dotnet-monitor-ui.dev<span>"</span></span>
  }</pre></div>
<ol start="5">
<li>Goto <code>\artifacts\bin\dotnet-monitor\Debug\netcoreapp2.1\</code> using command line tool said above.</li>
<li>Run <code>dotnet exec dotnet-monitor.dll collect</code></li>
<li>Now you can goto <a href="https://dotnet-monitor-ui.dev/" rel="nofollow">https://dotnet-monitor-ui.dev/</a> and enjoy full experience of <code>dotnet-monitor</code></li>
</ol>
<hr>
<p><strong>NOTE</strong></p>
<p><a href="https://dotnet-monitor-ui.dev/" rel="nofollow">https://dotnet-monitor-ui.dev/</a> does not collect any details from your browser nor collect any response received from <code>dotnet-monitor</code> tool. It does not have tracking integrated and does not contain any library or tool to collect your personal information. Site hosted here is pure build from the code you can find in this repository.</p>
<hr>
<h2>Features</h2>
<p>In the landing page, user can setup endpoints of the <code>dotnet-monitor</code> tool and after clicking <code>Reload</code> (application will try to access default endpoint urls on load and show processes if it's available), all available processes from <code>dotnet-monitor</code> will be shown in list like this. In the list, user can use <code>Download</code> button to download dumps, gcdumps or traces with default parameters. But if user wants to fine-tune input for each endpoint, user can click <code>More</code> button to goto process page.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/home.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/home.png?raw=true" alt="Landing page" title="Landing page"></a></p>
<p>Process page has expansion panes to each available endpoint from <code>dotnet-monitor</code>. Those functions are <code>dump</code>, <code>gcdump</code>, <code>trace</code> and <code>logs</code>.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/process-home.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/process-home.png?raw=true" alt="Alt text" title="Title"></a></p>
<h3>dump</h3>
<p><code>/dump</code> endpoint supports one parameter called <code>type</code>. From the UI, user can select supported types and click download to download dump file.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#dump" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#dump</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/dump.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/dump.png?raw=true" alt="dump UI" title="dump UI"></a></p>
<h3>gcdump</h3>
<p><code>/gcdump</code> does not support any input parameters for download the file. Download button has added here so that user can see it as an option, but downloading gcdump from landing page and from here doesn't make any difference.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#gc-dump" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#gc-dump</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/gcdump.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/gcdump.png?raw=true" alt="gcdump UI" title="gcdump UI"></a></p>
<h3>trace (GET)</h3>
<p><code>/trace</code> endpoint supports both GET and POST requests which used for different types of inputs. GET endpoint supports 3 parameters, <code>durationSeconds</code>, <code>profile</code> and <code>metricsIntervalSeconds</code>. Values for each of these parameters can be entered/selected from the UI and clicking download button will download trace file with selected parameters.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#traces" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#traces</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/trace-get.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/trace-get.png?raw=true" alt="Trace UI" title="Trace UI"></a></p>
<h3>trace (POST)</h3>
<p><code>/trace</code> POST endpoint supports more advanced input which can be entered in UI. This endpoint supports <code>durationSeconds</code>, <code>requestRundown</code>, <code>providers</code> and <code>bufferSizeInMB</code>. User can enter multiple providers using table and can configure different parameters for each provider. I want to add here that, my knowledge about providers in this context is very low, I will update content here once I know more about it.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#traces" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#traces</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/trace-post.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/trace-post.png?raw=true" alt="Trace UI" title="Trace UI"></a></p>
<h3>logs</h3>
<p>This is the endpoint I enjoyed the most making. <code>/logs</code> endpoint gives stream of logs from given process. This endpoint supports <code>durationSeconds</code> and <code>level</code> parameters. <code>durationSeconds</code> is the duration it will stream logs, <code>level</code> parameter allows users to get logs in even higher level even if application is configured to write logs in low level. When user start the stream, it will update the table below with logs received from the endpoint.</p>
<p>Apart from inputs for API endpoint, I've added few more features in UI so user can navigate through logs easily. User can filter logs by log level, event id, category or input text. Dropdown values for filters gets automatically updated while stream is going on, for example, if new category is found in the stream, it will be added to the categories filter. These values can be changed while stream is running, but be warned that there can be lags when these are edited while stream is on.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#logs" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#logs</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/logs.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/logs.png?raw=true" alt="Logs UI" title="Logs UI"></a></p>
<h3>metrics</h3>
<p>Metrics endpoint when there's one application running to gather metrics. When there's one application is running, it returns set of metrics depends on the application type. This endpoint returns logs from prometheus exposition format. Using client UI, user can query <code>/metrics</code> endpoint for defined amount of time, graph of results will drawn below for user to analyze.</p>
<p>More info: <a href="https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#metrics" rel="nofollow">https://devblogs.microsoft.com/dotnet/introducing-dotnet-monitor/#metrics</a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/SachiraChin/dotnet-monitor-ui/blob/main/documentation/images/metrics.png?raw=true"><img src="https://github.com/SachiraChin/dotnet-monitor-ui/raw/main/documentation/images/metrics.png?raw=true" alt="Metrics UI" title="Metrics UI"></a></p>
<h2>I want to build it</h2>
<p>With quick response for my <a href="https://github.com/dotnet/diagnostics/issues/1346">issue</a>, now we have support for CORS rules within <code>dotnet-monitor</code>. Thank you <a href="https://github.com/wiktork">@wiktork</a> for quick turnaround for this! <g-emoji alias="blush" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png">😊</g-emoji></p>
<p>Until we see this in next release build, you still have to checkout the repo and build the <code>dotnet-monitor</code>. Once I have details of the build, I will update it here. Until that, please check below steps to run the latest build.</p>
<h3>Visual Studio 2019</h3>
<ol>
<li>Clone official <code>dotnet diagnostics</code> repository from this url. <a href="https://github.com/dotnet/diagnostics">https://github.com/dotnet/diagnostics</a></li>
<li>Open the solution(<code>diagnostics.sln</code>) in Visual Studio and navigate to <code>src -&gt; Microsoft.Diagnostics.Monitoring.RestServer -&gt; appsettings.json</code></li>
<li>Add below section to it.</li>
</ol>
<div><pre>  <span><span>"</span>CorsConfiguration<span>"</span></span>: {
     <span><span>"</span>AllowedOrigins<span>"</span></span>: <span><span>"</span>http://localhost:4200<span>"</span></span>
  }</pre></div>
<ol start="4">
<li>Now set <code>src -&gt; Microsoft.Diagnostics.Monitoring.RestServer -&gt; Tools -&gt; dotnet-monitor</code> as start up project</li>
<li>Start debugging</li>
<li>Clone this repository</li>
<li>Run <code>ng serve</code> for a dev server. Navigate to <code>http://localhost:4200/</code>.</li>
</ol>
<h3>Command-line</h3>
<ol>
<li>Clone official <code>dotnet diagnostics</code> repository from this url. <a href="https://github.com/dotnet/diagnostics">https://github.com/dotnet/diagnostics</a></li>
<li>Navigate to <code>\src\Tools\dotnet-monitor</code> from your favorite command line tool.</li>
<li>Run <code>dotnet build</code></li>
<li>Open <code>\artifacts\bin\dotnet-monitor\Debug\netcoreapp2.1\appsettings.json</code> and add below section to the end.</li>
</ol>
<div><pre>  <span><span>"</span>CorsConfiguration<span>"</span></span>: {
     <span><span>"</span>AllowedOrigins<span>"</span></span>: <span><span>"</span>http://localhost:4200<span>"</span></span>
  }</pre></div>
<ol start="5">
<li>Goto <code>\artifacts\bin\dotnet-monitor\Debug\netcoreapp2.1\</code> using command line tool said above.</li>
<li>Run <code>dotnet exec dotnet-monitor.dll collect</code></li>
<li>Clone this repository</li>
<li>Run <code>ng serve</code> for a dev server. Navigate to <code>http://localhost:4200/</code>.</li>
</ol>
<h2>Further work</h2>
<ul>
<li><strong>DONE!!</strong> Added support for <code>/metrics</code> endpoint. <del>This tool does not support <code>/metrics</code> endpoint available in <code>dotnet-monitor</code> tool. Next steps would be get integration for that.</del></li>
<li><strong>DONE!!</strong> Added text stream support for <code>logs</code> endpoint.</li>
<li>Prepare POC for integrating UI to <code>dotnet-monitor</code> itself.</li>
</ul>
<h2>Conclusion</h2>
<p>I thought this is a nice addition to awesome features provided in <code>dotnet-monitor</code>. You are open to check this out, make changes and ask me questions. Please note that effort I put here is nothing compared to original <code>dotnet-monitor</code> tool. If anything, because they implemented it so nicely that I was able to query and get results without having lots of troubles in my side.</p>
<p>Thanks for checking out this tool!</p>
<h2>Thank you</h2>
<p>Huge thanks goes to</p>
<ul>
<li><a href="https://github.com/shirhatti">@shirhatti</a> for being so kind and giving answers for all questions I've asked.</li>
<li><a href="https://github.com/wiktork">@wiktork</a> for adding CORS feature to source repo. I would be stuck with my small <em>hacks</em> without that.</li>
<li><a href="https://github.com/noahfalk">@noahfalk</a>, <a href="https://github.com/loic-sharma">@loic-sharma</a>, <a href="https://github.com/MaximRouiller">@MaximRouiller</a> for kind words, it really encouraged me to keep pushing. <g-emoji alias="blush" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png">😊</g-emoji></li>
</ul>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>