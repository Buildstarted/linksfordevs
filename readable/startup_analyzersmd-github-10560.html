<!DOCTYPE html>
<html lang="en">
<head>
    <title>
startup_analyzers.md - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="startup_analyzers.md - linksfor.dev(s)"/>
    <meta property="og:description" content="GitHub Gist: instantly share code, notes, and snippets."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://gist.github.com/rynowak/921e1f9f8a0d6778e9a1006cc0b6c59f"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">üéâ</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - startup_analyzers.md</title>
<div class="readable">
        <h1>startup_analyzers.md</h1>
            <div>Reading time: 3 minutes</div>
        <div>Posted here: 25 Mar 2019</div>
        <p><a href="https://gist.github.com/rynowak/921e1f9f8a0d6778e9a1006cc0b6c59f">https://gist.github.com/rynowak/921e1f9f8a0d6778e9a1006cc0b6c59f</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
  <div id="file-startup_analyzers-md">
      
    
  <div id="file-startup_analyzers-md-readme">
    <article itemprop="text">
<p>ASP.NET Core startup code follows regular patterns that are suitable for code analysis and enhancements to the coding experience through analyzers, code fixes, and smarter scaffolding.</p>
<p>What things that analyzers could provide would be most valuable?</p>
<p>Things that analyzers can easily understand:</p>
<ul>
<li>What services are registered? (ex: <code>AddMvc()</code> includes <code>AddRouting()</code>)</li>
<li>What options are set? (ex: <code>AddMvcOptions(options =&gt; options.EnableEndpointRouting = false)</code></li>
<li>What middleware do you have? (ex: <code>UseHealthChecks()</code>)</li>
<li>What order are middleware in? (ex: is <code>UseStaticFiles()</code> before routing?)</li>
<li>What routes/endpoints are registered? (ex: <code>MapHealthChecks()</code>)</li>
</ul>
<h2>Examples</h2>
<p>Here are some examples of the kinds of things we can do.</p>
<p>I did actually implement these - they aren't canned demos - it's prototype status. They don't yet have code fixes, but you could image that as well.</p>
<h3>Find Missing AddXyz() Calls</h3>
<p>Have you ever forgotten to register something in DI?</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/16f1f1e2d833e83592133464a74c6b9898e1fa8e/68747470733a2f2f692e696d6775722e636f6d2f434864677937702e676966"><img src="https://camo.githubusercontent.com/16f1f1e2d833e83592133464a74c6b9898e1fa8e/68747470733a2f2f692e696d6775722e636f6d2f434864677937702e676966" alt="image" data-canonical-src="https://i.imgur.com/CHdgy7p.gif"></a></p>
<p>This is generic functionality and can be driven from attributes or a text file shipped with the analyzer/SDK. If based on attributes, it can be extensible.</p>
<h3>Recommended Middleware Ordering</h3>
<p>Middleware try to be flexible, but there are some cases that are always a mistake.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/bba62d635756d22b54e33e9cbfb535df0a0c1046/68747470733a2f2f692e696d6775722e636f6d2f547851756952472e676966"><img src="https://camo.githubusercontent.com/bba62d635756d22b54e33e9cbfb535df0a0c1046/68747470733a2f2f692e696d6775722e636f6d2f547851756952472e676966" alt="image" data-canonical-src="https://i.imgur.com/TxQuiRG.gif"></a></p>
<p>This is generic functionality and can be driven from attributes or a text file shipped with the analyzer/SDK. If based on attributes, it can be extensible.</p>
<h3>Migration Guidance / Fixes</h3>
<p>What happens when things change?</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/afebe3afba8703fe6c321a880bd3df0ff695b865/68747470733a2f2f692e696d6775722e636f6d2f6b705359597a322e676966"><img src="https://camo.githubusercontent.com/afebe3afba8703fe6c321a880bd3df0ff695b865/68747470733a2f2f692e696d6775722e636f6d2f6b705359597a322e676966" alt="image" data-canonical-src="https://i.imgur.com/kpSYYz2.gif"></a></p>
<p>This is an example of something highly tailored. If we deliver migration guidance and code fixes we recommend the <em>more modern</em> way to using the framework without the need for breaking compatibility and breaking APIs. This is a softer/nicer way to evolve ASP.NET Core.</p>
<h2>Feedback?</h2>
<p>Leave a comment here, open an issue at <a href="https://github.com/aspnet/AspNetCore">https://github.com/aspnet/AspNetCore</a> or tweet @aVerySpicyBoi. The POWER IS YOURS!</p>
<p>Things I've heard so far that I like:</p>
<ul>
<li>Validating DI config at build-time is valuable, anything we can do here would help.</li>
<li>Provide the same level of support for generic-host or the Program.cs equivalents of Startup code.</li>
<li>Analyze all of my code! Not just startup.</li>
<li>The other way around would be nice: ‚ÄúAuthentication was added using AddAuthentication but no authentication middleware is invoked‚Äù.</li>
<li>Calling app inside a lamda declared for another app call is probably a bug: app.MyBranchHelper(a=&gt;app.BadCall());</li>
</ul>
</article>
  </div>

  </div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>