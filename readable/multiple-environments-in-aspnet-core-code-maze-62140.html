<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Multiple Environments in ASP.NET Core - Code Maze - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Multiple Environments in ASP.NET Core - Code Maze - linksfor.dev(s)"/>
    <meta property="og:description" content="In this article, we&#x2019;re going to cover how to set up and manage multiple environments in ASP.NET Core through different examples."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://code-maze.com/multiple-environments-in-asp-net-core/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Multiple Environments in ASP.NET Core - Code Maze</title>
<div class="readable">
        <h1>Multiple Environments in ASP.NET Core - Code Maze</h1>
            <div>Reading time: 20-26 minutes</div>
        <div>Posted here: 27 May 2020</div>
        <p><a href="https://code-maze.com/multiple-environments-in-asp-net-core/">https://code-maze.com/multiple-environments-in-asp-net-core/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
																<article id="post-52075">
														
							
														
							
														
							<div>
															<div>
									<p><div><p><a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/?topb=true" target="_blank"><img src="https://code-maze.com/wp-content/uploads/2020/01/Code-Maze-Book-Collection-V3-1024x483.png" data-lazy-type="image" data-src="https://code-maze.com/wp-content/uploads/2020/01/Code-Maze-Book-Collection-V3-1024x483.png" alt="Code Maze Book Collection V3" width="775" height="366" data-pagespeed-url-hash="2051067523" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"></a></p><p>Looking to learn how to build <strong>great APIs</strong>? Or become <strong>even better</strong> at it? Check our newest book <strong><a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/?topb=true" target="_blank" rel="noopener">Ultimate ASP.NET Core 3 Web API</a>.</strong> Learn how to create a full production-ready ASP.NET Core API using only the <strong>latest and greatest technologies</strong>. Bonus materials awaiting inside!</p></div><span>In this article, we’re going to cover how to set up and manage multiple environments in <a href="https://code-maze.com/net-core-series/" target="_blank" rel="noopener noreferrer">ASP.NET Core.</a> If we expect our project to become large and complex, it is a good idea for us to separate our environments. </span><span>For example, we don’t want to develop software on the same server that hosts our live application. Similarly, we don’t want to run tests on our live application. These bad practices could cause our users to see debugging pages, dummy data, altered data, etc. </span><span>To help us avoid these issues, we’ll look at how to set up multiple environments to manage what kind of error page is displayed for an ASP.NET Core application.</span></p>
<p>To download the source code, visit our&nbsp;<a href="https://github.com/CodeMazeBlog/multiple-env-netcore" target="_blank" rel="nofollow noopener noreferrer">Multiple Environments repository</a>.</p>
<p><span>This post is divided into the following parts:</span></p>
<ul>
<li><a href="#creatingaproject"><span>Creating a Project</span></a></li>
<li><a href="#environments"><span>The Environments</span></a></li>
<li><a href="#environmentvariables"><span>The Environment Variables</span></a></li>
<li><a href="#settingwithunix"><span>Setting the Environment Variable with UNIX&nbsp;</span></a></li>
<li><a href="#settingwithcli"><span>Using CLI Arguments to Set the Environment Variable</span></a></li>
<li><a href="#launchsettings"><span>Using Launch Settings to Set the Environment Variable</span></a></li>
<li><a href="#instartup"><span>Accessing the Environment in the Startup Class</span></a></li>
<li><a href="#withtags"><span>Accessing the Environment with the Tag Helper</span></a></li>
</ul>
<p><span>Let’s dive in.</span></p>
<h2 id="creatingaproject">Creating a Project</h2>
<p><span>Before we continue, let’s create a new <a href="https://code-maze.com/asp-net-core-mvc-series/" target="_blank" rel="noopener noreferrer">MVC project</a> using the ASP.NET Core CLI. This command will create a project with all the basic project and frontend files we are going to use in this example:</span></p>
<p><span><code>dotnet new mvc</code></span></p>
<p><span>Our project should now have the following project structure:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/structure.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/structure-268x300.png" alt="The default project structure of a new ASP.NET Core MVC Project - Environments" width="268" height="300" srcset="https://code-maze.com/wp-content/uploads/2020/04/structure-268x300.png 268w, https://code-maze.com/wp-content/uploads/2020/04/structure.png 291w" sizes="(max-width: 268px) 100vw, 268px"></a></p>
<p><span>Now that we’ve created the project, let’s go through some of the key files that we are going to visit in this article.</span></p>
<p><span>The <code>Program.cs</code> file is the starting point of the ASP.NET Core application. We are going to modify this file later, but for now, let’s make sure that this is the code that was generated:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b09b035887193" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>public</span><span> </span><span>class</span><span> </span><span>Program</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>static</span><span> </span><span>void</span><span> </span><span>Main</span><span>(</span><span>string</span><span>[</span><span>]</span><span> </span><span>args</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>CreateHostBuilder</span><span>(</span><span>args</span><span>)</span><span>.</span><span>Build</span><span>(</span><span>)</span><span>.</span><span>Run</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>static</span><span> </span><span>IHostBuilder </span><span>CreateHostBuilder</span><span>(</span><span>string</span><span>[</span><span>]</span><span> </span><span>args</span><span>)</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>Host</span><span>.</span><span>CreateDefaultBuilder</span><span>(</span><span>args</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>.</span><span>ConfigureWebHostDefaults</span><span>(</span><span>webBuilder</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>webBuilder</span><span>.</span><span>UseStartup</span><span>&lt;</span><span>Startup</span><span>&gt;</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p><span>The <code>Program</code> class uses the <code>Startup.cs</code> file to configure the application. To configure the application, let’s modify the <code>Configure</code> method inside <code>Startup.cs</code>.</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0a8885567507" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p></div>
				</td>
						<td><div><p><span>public</span><span> </span><span>class</span><span> </span><span>Startup</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>Startup</span><span>(</span><span>IConfiguration </span><span>configuration</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>Configuration</span><span> </span>=<span> </span><span>configuration</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>IConfiguration</span><span> </span><span>Configuration</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>ConfigureServices</span><span>(</span><span>IServiceCollection </span><span>services</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>services</span><span>.</span><span>AddControllersWithViews</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>Configure</span><span>(</span><span>IApplicationBuilder </span><span>app</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseDeveloperExceptionPage</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseHttpsRedirection</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseStaticFiles</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseRouting</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseAuthorization</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseEndpoints</span><span>(</span><span>endpoints</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>endpoints</span><span>.</span><span>MapControllerRoute</span><span>(</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>name</span><span>:</span><span> </span><span>"default"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>pattern</span><span>:</span><span> </span><span>"{controller=Home}/{action=Index}/{id?}"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p><span>The <code>UseDeveloperExceptionPage</code> method configures the application to call the debugging page whenever an error occurs.</span></p>
<p><span>To test this feature out we are going to modify the Privacy action inside the <code>HomeController</code> class:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0af418951360" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p></div>
				</td>
						<td><div><p><span>public</span><span> </span><span>class</span><span> </span><span>HomeController</span><span> </span><span>:</span><span> </span><span>Controller</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>private</span><span> </span><span>readonly</span><span> </span><span>ILogger</span><span>&lt;</span><span>HomeController</span><span>&gt;</span><span> </span><span>_logger</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>HomeController</span><span>(</span><span>ILogger</span><span>&lt;</span><span>HomeController</span><span>&gt;</span><span> </span><span>logger</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>_logger</span><span> </span>=<span> </span><span>logger</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>IActionResult </span><span>Index</span><span>(</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>View</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>IActionResult </span><span>Privacy</span><span>(</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>throw</span><span> </span><span>new</span><span> </span><span>Exception</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p><span>Whenever we attempt to go to the privacy page, our controller will simulate an error by throwing an exception.</span></p>
<p><span>Before we do a test run, let’s modify the launchSettings.json file inside the Properties directory. We are going to remove all the <code>environmentVariables</code></span><span>&nbsp;key-value pairs under all the profiles. Later, we will talk about what those lines of code do, but for now, let’s remove them:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0b4239272738" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p></div>
				</td>
						<td><div><p><span>{</span></p><p><span>&nbsp;&nbsp;</span><span>"iisSettings"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"windowsAuthentication"</span><span>:</span><span> </span><span>false</span><span>,</span><span> </span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"anonymousAuthentication"</span><span>:</span><span> </span><span>true</span><span>,</span><span> </span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"iisExpress"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"http://localhost:34078"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"sslPort"</span><span>:</span><span> </span><span>44321</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;</span><span>}</span><span>,</span></p><p><span>&nbsp;&nbsp;</span><span>"profiles"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"IIS Express"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"IISExpress"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"MultipleEnvsExample"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"Project"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"https://localhost:5001;http://localhost:5000"</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p><span>Let’s run it to make sure it works:</span></p>
<p><code><span>dotnet run</span></code></p>
<p><span>As soon as we navigate to </span><code><span>https://localhost:5001/Home/Privacy</span></code><span>, we are going to see the debugging page:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/error.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/error-1024x506.png" alt="Error page with debugging information - ASP.NET Core Environments" width="1024" height="506" srcset="https://code-maze.com/wp-content/uploads/2020/04/error-1024x506.png 1024w, https://code-maze.com/wp-content/uploads/2020/04/error-300x148.png 300w, https://code-maze.com/wp-content/uploads/2020/04/error-768x379.png 768w, https://code-maze.com/wp-content/uploads/2020/04/error-1080x534.png 1080w, https://code-maze.com/wp-content/uploads/2020/04/error.png 1429w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p><span>Of course, this is a great resource when we need to know what went wrong. However, we don’t want our users to see this page.</span></p>
<p><span>So, how do we deal with this problem?</span></p>
<p><span>We are going to solve this problem by using multiple environments.</span></p>
<h2 id="environments">The Environments</h2>
<p><span>A hosting environment consists of OS-level definitions that the application uses to determine how it’s going to run. Let’s take a look at the three most common environments:</span></p>
<ul>
<li><b>Development</b><span> – We can use this environment to write code, commit code, fix bugs, etc. For example, we want our error page to give us some debugging information to help us write code.</span></li>
<li><b>Production</b><span> – We can use this environment to publish our application to our end users. For example, instead of debugging information, we want our error to display generic error information to alert our user that something went wrong.</span></li>
<li><b>Staging</b> – We can use this environment to test our application using automated or manual tests. Staging environments are often very similar to the production environment. For example, if a test fails while requesting a page, we want the tester to see the same generic error information that a user would see. Because it a staging environment, we may also want an additional message displaying the name of the failed test.</li>
</ul>
<h2 id="environmentvariables">The Environment Variables</h2>
<p><span>The way we are going to control which environment we want to use is through the environment variables. All modern operating systems offer a way to define environment variables.</span></p>
<p><span>So, what exactly is an environment variable?</span></p>
<p><span>An environment variable is a variable whose value is set outside of the application, hence the term “environment.” <a href="https://code-maze.com/net-core-series/" target="_blank" rel="noopener noreferrer">ASP.NET Core</a> relies on several environment variables, but the one we are going to look at in this article is </span><code><span>ASPNETCORE_ENVIRONMENT</span></code><span>. ASP.NET Core reads this environment variable at startup and stores the value to allow us to write code that is dependent on this value.</span></p>
<p><span>Now, let’s talk about case sensitivity:</span></p>
<p><span>Environment variable values are not case sensitive on Windows and macOS but are case sensitive on Linux. This means that on Linux the value of </span><code><span>Development</span></code><span> would not be the same as </span><span>development</span><span>. It is good practice to keep all references to environment values consistent throughout the project. For the sake of this project, we are going to use the following values: </span><code><span>Development</span></code><span> and </span><code><span>Production</span></code><span>.</span></p>
<h2 id="settingenvironments">Setting the Environment Variable</h2>
<p><span>There are multiple ways of setting a value to the environment variable that may vary by the operating system. For the sake of this project, we are going to work on a UNIX-based operating system.</span></p>
<h3 id="settingwithunix">Setting the Environment Variable with UNIX</h3>
<p><span>We are going to open a terminal window and run:</span></p>
<p><code><span>export ASPNETCORE_ENVIRONMENT=Development</span></code></p>
<p><span>To see if it worked, we are going to run:</span></p>
<p><code><span>echo $ASPNETCORE_ENVIRONMENT</span></code></p>
<p><span>When we run the command we should see the value stored in that variable:</span></p>
<p><code><span>Development</span></code></p>
<p><span>When we run the application we are going to see that the application is running on the development environment:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png" alt="Hosting environment: Development - ASP.NET Core Environments" width="546" height="181" srcset="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png 546w, https://code-maze.com/wp-content/uploads/2020/04/hosting-dev-300x99.png 300w" sizes="(max-width: 546px) 100vw, 546px"></a></p>
<p><span>However, it’s important to note that the default environment in ASP.NET Core is </span><code><span>Development</span></code><span>. So, now we are going to change it to </span><code><span>Production</span></code><span>:</span></p>
<p><code><span>export ASPNETCORE_ENVIRONMENT=Production</span></code></p>
<p><code><span>dotnet run</span></code><!-- <span id="ezoic-pub-ad-placeholder-176" class="ezoic-adpicker-ad" data-ezadblocked='true'></span> --><!-- placeholder 176 blocked.  Reason : no sizes --></p>
<p><span>When we run the application we are going to see that application is running on the production environment:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png" alt="Hosting environment: Production - ASP.NET Core Environments" width="540" height="179" srcset="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png 540w, https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1-300x99.png 300w" sizes="(max-width: 540px) 100vw, 540px"></a></p>
<p><span>Now we know how to set the environment variable through the OS!</span></p>
<h3 id="settingwithcli">Using CLI Arguments to Set the Environment Variable</h3>
<p><span>Another way to set the environment variable is by feeding the value directly to the </span><code><span>dotnet run</span></code><span> command as an argument.</span></p>
<p><span>To set this up, let’s modify <code>Program.cs</code>:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0ba224127931" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>public</span><span> </span><span>static</span><span> </span><span>IHostBuilder </span><span>CreateHostBuilder</span><span>(</span><span>string</span><span>[</span><span>]</span><span> </span><span>args</span><span>)</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>Host</span><span>.</span><span>CreateDefaultBuilder</span><span>(</span><span>args</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>.</span><span>ConfigureHostConfiguration</span><span>(</span><span>configHost</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>configHost</span><span>.</span><span>AddCommandLine</span><span>(</span><span>args</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>.</span><span>ConfigureWebHostDefaults</span><span>(</span><span>webBuilder</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>webBuilder</span><span>.</span><span>UseStartup</span><span>&lt;</span><span>Startup</span><span>&gt;</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p><span>In the <code>CreateHostBuilder</code> method, we are setting up the builder’s configuration using <code>ConfigureHostConfiguration</code>. We are configuring the configuration with the <code>AddCommandLine</code> method to allow it to read configuration values from the command line.</span></p>
<p><span>By default, the host builder will add the </span><code><span>ASPNETCORE_</span></code><span> prefix to the argument key that is provided. For example, if we run </span><code><span>dotnet run --environment Development</span></code><span> then the application will set </span><code><span>ASPNETCORE_ENVIRONMENT</span></code><span> to </span><code><span>Development</span></code><span>. When we try it out we are going to see that the application will override the variable’s previous value (</span><code><span>Production</span></code><span>) with </span><code><span>Development</span></code><span>:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png" alt="Hosting environment: Development - ASP.NET Core Environments" width="546" height="181" srcset="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png 546w, https://code-maze.com/wp-content/uploads/2020/04/hosting-dev-300x99.png 300w" sizes="(max-width: 546px) 100vw, 546px"></a></p>
<h3 id="launchsettings">Using Launch Settings to Set the Environment Variable</h3>
<p><span>Now that we know how to set the environment variable through the OS and through CLI arguments, let’s take a look at another way. In this section, we are going to set it through the <code>launchSettings.json</code> file. This method will override every other configuration.</span></p>
<p><span>This is a useful way of setting environments because it allows us to organize multiple profiles with their respective project settings and environment variables.</span></p>
<p><span>Now, we are going to define profiles that can be used when we run our application. Let’s begin by modifying the profiles section of <code>launchSettings.json</code>:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0c3849305270" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p></div>
				</td>
						<td><div><p><span>{</span></p><p><span>&nbsp;&nbsp;</span><span>"iisSettings"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"windowsAuthentication"</span><span>:</span><span> </span><span>false</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"anonymousAuthentication"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"iisExpress"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"http://localhost:34078"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"sslPort"</span><span>:</span><span> </span><span>44321</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;</span><span>}</span><span>,</span></p><p><span>&nbsp;&nbsp;</span><span>"profiles"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"IIS Express"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"IISExpress"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"Development"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"Project"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"https://localhost:5001;http://localhost:5000"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"environmentVariables"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"ASPNETCORE_ENVIRONMENT"</span><span>:</span><span> </span><span>"Development"</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"Production"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"Project"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"https://localhost:5001;http://localhost:5000"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"environmentVariables"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"ASPNETCORE_ENVIRONMENT"</span><span>:</span><span> </span><span>"Production"</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p><span>Within the </span><span>Development</span><span> profile, we are defining the </span><code><span>ASPNETCORE_ENVIRONMENT</span></code><span> with a value of </span><code><span>Development</span></code><span>. When we execute the </span><code><span>dotnet run</span></code><span> command, the value in the launch profile will overwrite the environment variable we define through the terminal. By default, the command will launch the first profile it finds with a </span><code><span>commandName</span></code><span> value of </span><code><span>Project</span></code><span>.</span></p>
<p><span>So we are expecting the application to run in the </span><code><span>Development</span></code><span> environment when we execute the </span><code><span>dotnet run</span></code><span> command:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png" alt="Hosting environment: Development - ASP.NET Core Environments" width="546" height="181" srcset="https://code-maze.com/wp-content/uploads/2020/04/hosting-dev.png 546w, https://code-maze.com/wp-content/uploads/2020/04/hosting-dev-300x99.png 300w" sizes="(max-width: 546px) 100vw, 546px"></a></p>
<p><span>To run the application in the production environment, we are going to add an argument </span><code><span>--launch-profile Production</span></code><span>.</span></p>
<p><span>Now, let’s try to run the application in the production environment:</span></p>
<p><code><span>dotnet run --launch-profile Production</span></code></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png" alt="Hosting environment: Production - ASP.NET Core Environments" width="540" height="179" srcset="https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1.png 540w, https://code-maze.com/wp-content/uploads/2020/04/hosting-prod-1-300x99.png 300w" sizes="(max-width: 540px) 100vw, 540px"></a></p>
<p><span>On Visual Studio for Mac, we are going to see that modifying the launchSettings.json file will give us the option to choose between our launch profiles:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/vs-mac.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/vs-mac.png" alt="Options to run in Production or Development - ASP.NET Core Environments" width="697" height="95" srcset="https://code-maze.com/wp-content/uploads/2020/04/vs-mac.png 697w, https://code-maze.com/wp-content/uploads/2020/04/vs-mac-300x41.png 300w" sizes="(max-width: 697px) 100vw, 697px"></a></p>
<p><span>Additionally, we can define the value of the environment by navigating to the “Project” menu and selecting “MultipeEnvsExample Options”:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-2.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-2.png" alt="Project > MultipleEnvsExample Options - ASP.NET Core Environments" width="555" height="388" srcset="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-2.png 555w, https://code-maze.com/wp-content/uploads/2020/04/vs-mac-2-300x210.png 300w" sizes="(max-width: 555px) 100vw, 555px"></a></p>
<p><span>Then, under the “Configurations” menu, we can choose the profile we want to configure:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-3.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-3.png" alt="Run > Configuration > Production > Environment Variables - ASP.NET Core Environments" width="945" height="521" srcset="https://code-maze.com/wp-content/uploads/2020/04/vs-mac-3.png 945w, https://code-maze.com/wp-content/uploads/2020/04/vs-mac-3-300x165.png 300w, https://code-maze.com/wp-content/uploads/2020/04/vs-mac-3-768x423.png 768w" sizes="(max-width: 945px) 100vw, 945px"></a></p>
<p><span>Now, we know how to define and organize multiple environments!</span></p>
<p><span>So far, so good!</span></p>
<h2 id="instartup">Accessing the Environment in the Startup Class</h2>
<p><span>Now, we are going to see how to use our environments to manipulate our application. Currently, our application displays a debugging page whenever there is an error. This is great while we’re working in the development environment.</span></p>
<p><span>But, what about the production environment?</span></p>
<p><span>For the production environment, we want to display a custom error page. To do this, we are going to explore two methods: dependency injection and method conventions in the <code>Startup</code> class.</span></p>
<p><span>But first, we are going to create our custom error page.</span></p>
<p><span>Let’s create the <code>ErrorViewModel</code> class under the Models directory if we don’t already have one:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0ca162238268" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>public</span><span> </span><span>class</span><span> </span><span>ErrorViewModel</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>string</span><span> </span><span>RequestId</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>bool</span><span> </span><span>ShowRequestId</span><span> </span>=<span>&gt;</span><span> </span><span>!</span><span>string</span><span>.</span><span>IsNullOrEmpty</span><span>(</span><span>RequestId</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p><span>We are defining the </span><code><span>ErrorViewModel</span></code><span> with a property of type string and a property of type boolean. We are going to use this model in our error page.</span></p>
<p><span>Let’s create the <code>Error.cshtml</code> file under the Views/Shared directory if we don’t already have one:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0d0815477813" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>@</span>model<span> </span>ErrorViewModel</p><p><span>@</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>ViewData<span>[</span><span>"Title"</span><span>]</span><span> </span>=<span> </span><span>"Error"</span><span>;</span></p><p><span>}</span></p><p><span>&lt;h1 </span><span>class</span>=<span>"text-danger"</span><span>&gt;</span><span>Error.</span><span>&lt;/h1&gt;</span></p><p><span>&lt;h2 </span><span>class</span>=<span>"text-danger"</span><span>&gt;</span><span>An error occurred while processing your request.</span><span>&lt;/h2&gt;</span></p><p><span>@if (Model.ShowRequestId)</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;p&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;strong&gt;</span><span>Request ID:</span><span>&lt;/strong&gt;</span><span> </span><span>&lt;code&gt;</span><span>@Model.RequestId</span><span>&lt;/code&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/p&gt;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p><span>When the error view is requested, we are going to see a generic message and the id associated with that request.</span></p>
<p><span>Now, let’s create an action method that returns the error view by adding a new action to the <code>HomeController.cs</code>:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0d6084566218" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>public</span><span> </span><span>IActionResult </span><span>Error</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>View</span><span>(</span><span>new</span><span> </span><span>ErrorViewModel</span><span> </span><span>{</span><span> </span><span>RequestId</span><span> </span>=<span> </span><span>Activity</span><span>.</span><span>Current</span><span>?</span><span>.</span><span>Id</span><span> </span><span>?</span><span>?</span><span> </span><span>HttpContext</span><span>.</span><span>TraceIdentifier</span><span> </span><span>}</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p><span>After we start our application and navigate to </span><code><span>https://localhost5001/</span></code><span><code>Home/Error</code> and we should see our error page:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/error-page-e1586112548225.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/error-page-e1586112548225.png" alt="Home/Error - Error: An error occurred while processing your request - ASP.NET Core Environments" width="734" height="280" srcset="https://code-maze.com/wp-content/uploads/2020/04/error-page-e1586112548225.png 734w, https://code-maze.com/wp-content/uploads/2020/04/error-page-e1586112548225-300x114.png 300w" sizes="(max-width: 734px) 100vw, 734px"></a></p>
<h3 id="dependencyinjection">By Dependency Injection in the Startup Class</h3>
<p><span>However, we want our error page to display when an error occurs in the production environment. The simplest way to do this by taking advantage of dependency injection in the <code>Startup</code> class.</span></p>
<p><span>Let’s go ahead and modify <code>Startup.cs</code>:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0db031476536" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>public</span><span> </span><span>void</span><span> </span><span>Configure</span><span>(</span><span>IApplicationBuilder </span><span>app</span><span>,</span><span> </span><span>IHostEnvironment </span><span>env</span><span>)</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>env</span><span>.</span><span>IsEnvironment</span><span>(</span><span>"Development"</span><span>)</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseDeveloperExceptionPage</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>else</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseExceptionHandler</span><span>(</span><span>"/Home/Error"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseHsts</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// more code below</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p><span>Using the DI we supply an argument of type <code>IHostEnvironment</code> into the <code>Configure</code> method. Then we use a simple if-else structure to determine which page is displayed by using the </span><code><span>IsEnvironment</span></code><span> method. This method checks which environment we are using. If it is set to </span><code><span>Development</span></code><span> then we use the developer exception page. For any other environment, we use an exception handler pointing to the custom error page.</span></p>
<p><span>After starting the application in the production environment and clicking on Privacy, an error is simulated and we see our custom error page:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/error-page-2-e1586112605653.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/error-page-2-e1586112605653.png" alt="Home/Privacy - Error: An error occurred while processing your request. - ASP.NET Core Environments" width="731" height="264" srcset="https://code-maze.com/wp-content/uploads/2020/04/error-page-2-e1586112605653.png 731w, https://code-maze.com/wp-content/uploads/2020/04/error-page-2-e1586112605653-300x108.png 300w" sizes="(max-width: 731px) 100vw, 731px"></a></p>
<p><span>It’s also possible to use the DI in the <code>Startup</code> class itself rather than just in the <code>Configure</code> method for a wider-scoped </span><code><span>IHostEnvironment</span></code><span> variable:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0e1381738833" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>private</span><span> </span><span>readonly</span><span> </span><span>IHostEnvironment </span><span>_env</span><span>;</span></p><p><span>public</span><span> </span><span>Startup</span><span>(</span><span>IConfiguration </span><span>configuration</span><span>,</span><span> </span><span>IHostEnvironment </span><span>env</span><span>)</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>Configuration</span><span> </span>=<span> </span><span>configuration</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>_env</span><span> </span>=<span> </span><span>env</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p><span>Now, it’s accessible throughout the entire class!</span></p>
<h3 id="startupconvention">By Startup Method Conventions</h3>
<p><span>As our project gets more complicated our if-else structure will get bloated and difficult to maintain. To avoid this, we are going to use the <code>Startup</code> method conventions.</span></p>
<p><span>How does this convention work?</span></p>
<p><span>There are two key methods in the <code>Startup</code> class: </span><code><span>Configure</span></code><span> and </span><code><span>ConfigureServices</span></code><span>. However, in the <code>Startup</code> class, these methods support environment-specific versions. For example, in the development environment, ASP.NET Core would look for the </span><code><span>ConfigureDevelopment</span></code><span> and the </span><code><span>ConfigureDevelopmentServices</span></code><span> methods before the default </span><code><span>Configure</span></code><span> and </span><code><span>ConfigureServices</span></code><span> methods.</span></p>
<p><span>Let’s try to implement this convention by rewriting <code>Startup.cs</code>:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0e6241197403" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p></div>
				</td>
						<td><div><p><span>public</span><span> </span><span>class</span><span> </span><span>Startup</span></p><p><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>Startup</span><span>(</span><span>IConfiguration </span><span>configuration</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>Configuration</span><span> </span>=<span> </span><span>configuration</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>IConfiguration</span><span> </span><span>Configuration</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>SharedConfigureServices</span><span>(</span><span>IServiceCollection </span><span>services</span><span>)</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>services</span><span>.</span><span>AddControllersWithViews</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>ConfigureDevelopmentServices</span><span>(</span><span>IServiceCollection </span><span>services</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>SharedConfigureServices</span><span>(</span><span>services</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>ConfigureServices</span><span>(</span><span>IServiceCollection </span><span>services</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>SharedConfigureServices</span><span>(</span><span>services</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>SharedConfigure</span><span>(</span><span>IApplicationBuilder </span><span>app</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseHttpsRedirection</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseStaticFiles</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseRouting</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseAuthorization</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseEndpoints</span><span>(</span><span>endpoints</span><span> </span>=<span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>endpoints</span><span>.</span><span>MapControllerRoute</span><span>(</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>name</span><span>:</span><span> </span><span>"default"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>pattern</span><span>:</span><span> </span><span>"{controller=Home}/{action=Index}/{id?}"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>ConfigureDevelopment</span><span>(</span><span>IApplicationBuilder </span><span>app</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>app</span><span>.</span><span>UseDeveloperExceptionPage</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>SharedConfigure</span><span>(</span><span>app</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>public</span><span> </span><span>void</span><span> </span><span>Configure</span><span>(</span><span>IApplicationBuilder </span><span>app</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>app</span><span>.</span><span>UseExceptionHandler</span><span>(</span><span>"/Home/Error"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>app</span><span>.</span><span>UseHsts</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>SharedConfigure</span><span>(</span><span>app</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p><span>There’s a lot of changes that were made, but we are going to work our way through them slowly.</span></p>
<p><span>First, we define the </span><code><span>SharedConfigureServices</span></code><span> method. This method contains the common configuration related to the application’s services across all environments. The application calls the </span><code><span>ConfigureDevelopmentServices</span></code><span> method when we are in the </span><span>development</span><span> environment. In any other environment, the application calls the </span><code><span>ConfigureServices</span></code><span> method.</span></p>
<p><span>Next, we define the </span><code><span>SharedConfigure</span></code><span> method. This method contains the common configurations related to the application’s request pipeline across all environments. The application calls the </span><code><span>ConfigureDevelopment</span></code><span> method when it is set to </span><span>development</span><span>. In any other environment, the application calls the </span><code><span>Configure</span></code><span> method. The default </span><code><span>Configure</span></code><span> method configures the application with the custom error page. The </span><code><span>ConfigureDevelopment</span></code><span> method configures the application with the debugging page.</span></p>
<p><span>When we run the application in the production environment and navigate to the privacy page, we are going to see our custom error page:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/error-page-5-e1586112675277.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/error-page-5-e1586112675277.png" alt="Home/Privacy: Error: An error has occurred while processing your request. - ASP.NET Core Environments" width="738" height="272" srcset="https://code-maze.com/wp-content/uploads/2020/04/error-page-5-e1586112675277.png 738w, https://code-maze.com/wp-content/uploads/2020/04/error-page-5-e1586112675277-300x111.png 300w" sizes="(max-width: 738px) 100vw, 738px"></a></p>
<p><span>When we run the application in the development environment and navigate to the privacy page, we are going to see the debugging page:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370-1024x539.png" alt="Error page with debugging information - ASP.NET Core Environments" width="1024" height="539" srcset="https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370-1024x539.png 1024w, https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370-300x158.png 300w, https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370-768x404.png 768w, https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370-1080x568.png 1080w, https://code-maze.com/wp-content/uploads/2020/04/debug-page-5-e1586112416370.png 1428w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>

<p><span>There’s one more way to use our environments. Using them in the </span><code><span>Startup</span></code><span> class is great for making project-wide changes.</span></p>
<p><span>But what if we only want to make small changes?</span></p>
<p><span>Now, we come to the tag helper.</span></p>
<p><span>This is a great way to take advantage of our environment to make small changes to our code. For example, we want to display a little extra information on the error page when the environment is set to </span><code><span>Testing</span></code><span>.</span></p>
<p><span>To do this, let’s modify Error.cshtml by adding this code to the bottom of the file:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0ed804892951" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>&lt;environment </span><span>names</span>=<span>"Testing,"</span><span>&gt;</span></p><p><span>&lt;h3&gt;</span><span>Testing Mode</span><span>&lt;/h3&gt;</span></p><p><span>&lt;p&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;Swapping to </span><span>&lt;strong&gt;</span><span>Development</span><span>&lt;/strong&gt;</span><span> environment will display more detailed information about the error that occurred.</span></p><p><span>&lt;/p&gt;</span></p><p><span>&lt;p&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;strong&gt;</span><span>The Development environment shouldn't be enabled for deployed applications.</span><span>&lt;/strong&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;It can result in displaying sensitive information from exceptions to end-users.</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;For local debugging, enable the </span><span>&lt;strong&gt;</span><span>Development</span><span>&lt;/strong&gt;</span><span> environment by setting the </span><span>&lt;strong&gt;</span><span>ASPNETCORE_ENVIRONMENT</span><span>&lt;/strong&gt;</span><span> environment variable to </span><span>&lt;strong&gt;</span><span>Development</span><span>&lt;/strong&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;and restarting the app.</span></p><p><span>&lt;/p&gt;</span></p><p><span>&lt;/environment&gt;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p><span>The </span><code><span>environment</span></code><span> tag checks if the environment variable is set to one of the values in the </span><code><span>names</span></code><span> attribute. When we are in the </span><span>testing</span><span> environment all the content within the tag is going to be rendered.</span></p>
<p><span>To test this, let’s go ahead and add a testing profile to launchSetting.json:</span></p><!-- Urvanov Syntax Highlighter v2.8.8 -->

		<div id="urvanov-syntax-highlighter-5ece02808b0f3024821729" data-settings=" minimize scroll-mouseover">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>"Testing"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"commandName"</span><span>:</span><span> </span><span>"Project"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"launchBrowser"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"applicationUrl"</span><span>:</span><span> </span><span>"https://localhost:5001;http://localhost:5000"</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"environmentVariables"</span><span>:</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>"ASPNETCORE_ENVIRONMENT"</span><span>:</span><span> </span><span>"Testing"</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p><span>And that’s it!</span></p>
<p><span>After we start our application with the testing profile and navigate to the privacy page, we should see our custom error page with the additional content unique to the testing environment:</span></p>
<p><a href="https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403.png"><img src="https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403.png" alt="Home/Privacy - Error: Testing Mode - ASP.NET Core Environments" width="1162" height="465" srcset="https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403.png 1162w, https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403-300x120.png 300w, https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403-1024x410.png 1024w, https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403-768x307.png 768w, https://code-maze.com/wp-content/uploads/2020/04/error-page-6-e1586020276403-1080x432.png 1080w" sizes="(max-width: 1162px) 100vw, 1162px"></a></p>
<h2 id="conclusion">Conclusion</h2>
<p><span>We have successfully defined, organized, and implemented environments in our ASP.NET Core application. These are useful tools when you start deploying your application to testing, staging, or production servers. Remember, you can define as many environments as needed and name them whatever you think is most convenient.</span></p>
<p><span>In summary, we have covered how to use:</span></p>
<ul>
<li><span>Environments</span></li>
<li><span>Environment variables</span></li>
<li><span>CLI arguments to read environments at runtime</span></li>
<li><span>Environments via the Startup class</span></li>
<li><span>Environments via tag helpers</span></li>
</ul>

</div>
														</div>
														

																				</article>

						
						
												
										
				
			</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>