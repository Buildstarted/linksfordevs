<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ZIO/Core - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ZIO/Core - linksfor.dev(s)"/>
    <meta property="og:description" content="!! ATTENTION --&gt; Please join us on Discord: https://discord.gg/2ccFBr4"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://gitter.im/ZIO/Core"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ZIO/Core</title>
<div class="readable">
        <h1>ZIO/Core</h1>
            <div>Reading time: 14-18 minutes</div>
        <div>Posted here: 14 May 2019</div>
        <p><a href="https://gitter.im/ZIO/Core">https://gitter.im/ZIO/Core</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <div data-v-44ebcb1a=""><header data-v-44ebcb1a=""><section data-v-44ebcb1a=""><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 18 25" data-v-44ebcb1a=""><rect x="15" y="5" width="2" height="10" data-v-44ebcb1a=""></rect> <rect x="10" y="5" width="2" height="20" data-v-44ebcb1a=""></rect> <rect x="5" y="5" width="2" height="20" data-v-44ebcb1a=""></rect> <rect width="2" height="15" data-v-44ebcb1a=""></rect></svg></section> <section data-v-44ebcb1a=""><span data-v-44ebcb1a=""><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 98.7 16.3" style="enable-background:new 0 0 98.7 16.3;" xml:space="preserve">

<g id="XMLID_43_">
	<path id="XMLID_62_" d="M20.9,0.3h2.6v15.8h-2.6V0.3z"></path>
	<path id="XMLID_60_" d="M34.8,2.9h-4V0.3h11.8v2.6h-5.2v13.2h-2.6V2.9z"></path>
	<path id="XMLID_58_" d="M51.9,2.9h-4V0.3h11.8v2.6h-5.2v13.2h-2.6V2.9z"></path>
	<path id="XMLID_56_" d="M66.4,0.3h11.8v2.6H69v3.9h7.9v2.6H69v4h9.2v2.6H66.4V0.3z"></path>
	<path id="XMLID_53_" d="M98.7,16.1l-4.2-5.9c1.7-0.9,2.8-2.5,2.8-4.6c0-3.1-2.5-5.3-5.7-5.3l-6.2,0v15.8h2.6l0-5.3
		c0,0,3.6,0,3.6,0l3.8,5.3H98.7z M88.1,8.2l0-5.3l3.5,0c1.7,0,3,1,3,2.6c0,1.7-1.4,2.6-3,2.6L88.1,8.2z"></path>
	<path id="XMLID_52_" d="M7.9,7.1v2.6l3.9,0c0,0,0,1.4,0,2.3c-0.1,0.2-0.4,1.8-3.8,1.8c-0.2,0-0.3,0-0.5,0
		c-0.1,0-0.2,0-0.2,0c-0.1,0-0.2,0-0.2,0c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.1,0-0.2-0.1c0,0-0.1,0-0.1,0c-2.1-0.7-3.5-2.8-3.5-5.3
		l0,0v0v0c0-0.3,0-0.5,0.1-0.8C3.3,4.7,5.4,2.5,8,2.5c0.9,0,2.5,0.3,3.6,1.5l1.5-2.2c0,0-1.3-1.9-5-1.9C3.7,0,0.4,3.3,0,7.3
		c0,0.3,0,0.6,0,0.8l0,0l0,0c0,4.3,3.2,7.9,7.7,8.1c0.2,0,0.3,0,0.5,0c0,0,0.1,0,0.1,0c0.3,0,0.5,0,0.7,0c0.1,0,0.2,0,0.3,0
		c0.2,0,0.3,0,0.5-0.1c2.7-0.1,4.7-2.3,4.7-3.4c0-5,0-5.7,0-5.7H7.9z"></path>
</g>
</svg>
</span></section></header> <section data-v-44ebcb1a=""><h2 data-v-44ebcb1a="">Where communities thrive</h2> <br data-v-44ebcb1a=""> <ul data-v-44ebcb1a=""><li data-v-44ebcb1a="">Join over <strong data-v-44ebcb1a="">1.5M+ people</strong></li> <li data-v-44ebcb1a="">Join over <strong data-v-44ebcb1a="">100K+ communities</strong></li> <li data-v-44ebcb1a="">Free <strong data-v-44ebcb1a="">without limits</strong></li> <li data-v-44ebcb1a="">Create <strong data-v-44ebcb1a="">your own community</strong></li></ul> <ul data-v-44ebcb1a=""><li data-v-44ebcb1a=""><a href="https://gitter.im/explore" data-v-44ebcb1a="">Explore more communities</a></li></ul></section></div>

      <div>
        
<div>
  <header id="header-wrapper"></header>
  <div>
    <div id="right-toolbar-layout"><div>

    <div id="toolbar-top-content">
      

      <div id="activity-region"><div>


<ul id="activity-list"><li><div>
  <p>03:09</p>

  <p><span data-link-type="mention" data-screen-name="sken77">sken77</span> synchronize <a href="https://github.com/zio/zio/pull/2920" target="_blank" data-link-type="issue" data-issue="2920" data-issue-repo="zio/zio">#2920</a></p>
</div>
</li><li><div>
  <p>02:21</p>

  <p><span data-link-type="mention" data-screen-name="neko-kai">neko-kai</span> commented <span data-link-type="issue" data-issue="2911" data-issue-repo="zio/zio">#2911</span></p>

</div>
</li><li><div>
  <p>02:20</p>

  <p><span data-link-type="mention" data-screen-name="neko-kai">neko-kai</span> commented <span data-link-type="issue" data-issue="2911" data-issue-repo="zio/zio">#2911</span></p>

</div>
</li><li><div>
  <p>00:26</p>

  <p><span data-link-type="mention" data-screen-name="sken77">sken77</span> synchronize <a href="https://github.com/zio/zio/pull/2920" target="_blank" data-link-type="issue" data-issue="2920" data-issue-repo="zio/zio">#2920</a></p>
</div>
</li><li>
</li><li><div>
  <p>00:11</p>

  <p><span data-link-type="mention" data-screen-name="sken77">sken77</span> closed <span data-link-type="issue" data-issue="2918" data-issue-repo="zio/zio">#2918</span></p>
</div>
</li><li><div>
  <p>00:09</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="adamgfraser">adamgfraser</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="a5a548fc9201f30dd11d3b3df5ecf05ee2516cc7" data-commit-repo="zio/zio">refactor zip().map() with zipWi‚Ä¶</span> <a href="https://github.com/zio/zio/compare/7f27c8baac99...a5a548fc9201" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li><div>
  <p>00:09</p>

  <p><span data-link-type="mention" data-screen-name="adamgfraser">adamgfraser</span> closed <a href="https://github.com/zio/zio/pull/2919" target="_blank" data-link-type="issue" data-issue="2919" data-issue-repo="zio/zio">#2919</a></p>
</div>
</li><li><div>
  <p>Feb 16 23:49</p>

  <p><span data-link-type="mention" data-screen-name="sken77">sken77</span> commented <span data-link-type="issue" data-issue="2802" data-issue-repo="zio/zio">#2802</span></p>

</div>
</li><li>
</li><li><div>
  <p>Feb 16 23:43</p>

  <p><span data-link-type="mention" data-screen-name="adamgfraser">adamgfraser</span> commented <span data-link-type="issue" data-issue="2911" data-issue-repo="zio/zio">#2911</span></p>

</div>
</li><li><div>
  <p>Feb 16 23:03</p>

  <div>
    <p>
      <span data-link-type="mention" data-screen-name="adamgfraser">adamgfraser</span> on master
    </p>
    <p>
      <span data-link-type="commit" data-commit-sha="7f27c8baac99ad91aa8642101df451663c92ebd9" data-commit-repo="zio/zio">add reduceAll to (Z)STM compani‚Ä¶</span> <a href="https://github.com/zio/zio/compare/13ace38d4047...7f27c8baac99" target="_blank">(compare)</a>
    </p>
  </div>
</div>
</li><li><div>
  <p>Feb 16 23:03</p>

  <p><span data-link-type="mention" data-screen-name="adamgfraser">adamgfraser</span> closed <a href="https://github.com/zio/zio/pull/2910" target="_blank" data-link-type="issue" data-issue="2910" data-issue-repo="zio/zio">#2910</a></p>
</div>
</li><li><div>
  <p>Feb 16 22:15</p>

  <p><span data-link-type="mention" data-screen-name="sken77">sken77</span> opened <span data-link-type="issue" data-issue="2918" data-issue-repo="zio/zio">#2918</span></p>
</div>
</li><li><div>
  <p>Feb 16 21:51</p>

  <p><span data-link-type="mention" data-screen-name="neko-kai">neko-kai</span> commented <span data-link-type="issue" data-issue="2911" data-issue-repo="zio/zio">#2911</span></p>

</div>
</li><li>
</li><li><div>
  <p>Feb 16 21:44</p>

  <p><span data-link-type="mention" data-screen-name="LGLO">LGLO</span> commented <span data-link-type="issue" data-issue="1937" data-issue-repo="zio/zio">#1937</span></p>

</div>
</li><li><div>
  <p>Feb 16 21:43</p>

  <p><span data-link-type="mention" data-screen-name="neko-kai">neko-kai</span> commented <span data-link-type="issue" data-issue="2911" data-issue-repo="zio/zio">#2911</span></p>

</div>
</li><li><div>
  <p>Feb 16 21:33</p>

  <p><span data-link-type="mention" data-screen-name="pshirshov">pshirshov</span> edited <span data-link-type="issue" data-issue="2917" data-issue-repo="zio/zio">#2917</span></p>
</div>
</li><li><div>
  <p>Feb 16 21:33</p>

  <p><span data-link-type="mention" data-screen-name="pshirshov">pshirshov</span> edited <span data-link-type="issue" data-issue="2917" data-issue-repo="zio/zio">#2917</span></p>
</div>
</li></ul>
</div></div>
    </div>

    

  </div></div>
    
    <div>
      
      <div id="content-wrapper"><div>
    <div>

      
      

      <div id="content-frame" role="log" aria-live="polite" aria-atomic="false" aria-relevant="additions text">
        <div id="chat-container"><div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><code>toxicafunk (@_discord_469151026751209483:t2bot.io)</code> what is zio-shield?
    </p>

  </div>
</div>
</div>
                
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><code>toxicafunk (@_discord_469151026751209483:t2bot.io)</code> nice!
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p><code>toxicafunk (@_discord_469151026751209483:t2bot.io)</code> mmm i use doom editor, so lets see how to enable this üòÑ
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><code>via</code> Thanks, I will copy my message to the new channel! I didn't know that it might not be usable yet üôÇ
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/10127976?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><code>dccorona</code> Does anyone know if there's a way to have <code>FiberRef</code> automatically NOT propagate to Daemon fibers? My testing suggests that it always still does
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://secure.gravatar.com/avatar/c594d6b1df5460a2e8c7222b0d3691a6?s=30&amp;d=identicon" srcset="https://secure.gravatar.com/avatar/c594d6b1df5460a2e8c7222b0d3691a6?s=60&amp;d=identicon 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Hi guys.<br>Am I the only one who prefers to NOT use "module pattern"?<br>I find it more convenient to only use ZIO environment for a dynamic things like "HTTP request context" and use plain-old-constructor-based-DI for module dependencies.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      I think that isfine. We are working on some things to make it much easier to modules that depend on other modules so our goal would be to get to a point where you say wow this is amazing I really want to use this, but there‚Äôs nothing wrong with doing it that way if it works for you.
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Also come on over to Discord. You are probably going to get a lot more responses there.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <div>
      <p>Hi! I'm just starting out with ZIO and have been just hacking around for a couple of days trying to familiarise myself with the library and the paradigm (I've used Monix previously, but the majority of my Scala experience has been FP "in the small")</p><p>I'm currently struggling to find an idiomatic way, in zio-test, to run assertions verifying expected errors. I've seen an example on Stack Overflow[1] (from <span data-link-type="mention" data-screen-name="adamgfraser">@adamgfraser</span> I believe), but that doesn't compile for me, and I'm not sure how the <code>yield</code> could ever be executed based on the example. I know of a couple of workarounds to this, namely getting an <code>either</code> out of ZIO or flipping the fail/success channels.</p><p>Am I missing something obvious? It looks like the <code>fails</code> assertion is what I should be using. Could somebody set me on the correct path please? </p><p>[1] <a href="https://stackoverflow.com/questions/58662285/how-to-test-an-exception-case-with-zio-test" rel="nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/58662285/how-to-test-an-exception-case-with-zio-test</a></p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <p>
      ok, please disregard all of the above. I obviously didn't read any of the other SO comments properly. I needed to append <code>.run</code> to the effect in order to be able to use the <code>fails</code> assertion
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/1193670?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/1193670?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="stevebakh">@stevebakh</span> there‚Äôs a Discord now dedicated to zio. You‚Äôll receive more help there ;)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <p>
      true - will jump in there next time I have a question :thumbsup: 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="stevebakh">@stevebakh</span> Sorry I didn't see this until now. Feel free to reach out on Discord if you need any more help.
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/1839427?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/1839427?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Probably a common question, but: I want to create a managed HTTP-server instance that terminates gracefully when the java process is killed. Right now I'm wrapping the acquisition and release in a <code>ZManaged</code>, but when the process is terminated the error message <code>Exception in thread "main"</code> is logged.
    </p>

  </div>
</div>
</div>
                
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Yakushev Aleksey</p>
      <p>@AlexGruPerm</p>
      </div>
    <p>
      Hello. I am looking for simple example of how to running longtime impure effect. For example I have code like this 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Yakushev Aleksey</p>
      <p>@AlexGruPerm</p>
      </div>
    <div><p>
      For example </p><pre><code><span>import</span> zio._
<span>import</span> zio.blocking.effectBlocking

/**
 * For example akka-http request-response cycle.
 */
<span><span>def</span> <span>longExecutedImpureCode</span> :</span>Int = {
  println(<span>"before"</span>)
  Thread.sleep(<span>5000</span>)
  println(<span>"after"</span>)
  <span>1</span>
}

val interruptedEffect =
  <span>for</span> {
    fiber &lt;- effectBlocking(longExecutedImpureCode).fork
    res     &lt;- fiber.interrupt
  } <span>yield</span> res

val runtime = new DefaultRuntime {}
runtime.unsafeRun(interruptedEffect)
  .fold(f =&gt; {
    println(s<span>"Fail $f"</span>)
    f.defects.foreach(println)
  },
    s=&gt;{println(<span>"Success"</span>)}
  )</code></pre>
    </div>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <div><p>
      More real example of my long running task is </p><pre><code>  def startRequestHandler(conf :Config, actorSystem: ActorSystem) :Task[<span>Int</span>] = {
    <span>implicit</span> val system = actorSystem
    <span>implicit</span> val timeout: Timeout = Timeout(<span>10</span> seconds)
    <span>implicit</span> val executionContext = system.dispatcher
    val <span>log</span> = Logging(system,<span>"WsDb"</span>)
    <span>log</span>.info(s<span>"[4]Endpoint from config file address = ${conf.api.endpoint} port = ${conf.api.port}"</span>)
    val serverSource = Http(actorSystem).<span>bind</span>(<span>interface</span> = <span>"127.0.0.1"</span>, port = <span>8080</span>)

    val reqHandler: HttpRequest =&gt; Future[HttpResponse] = {
      <span>case</span> request@HttpRequest(HttpMethods.GET, Uri.Path (<span>"/"</span>), httpHeader, requestEntity, requestProtocol)
      =&gt; logRequest(<span>log</span>,request)
        Future.successful {
        val resJson: Json = s<span>"SimpleTestString ${request.uri}"</span>.asJson
        HttpResponse (
          StatusCodes.OK,
          entity = HttpEntity (`application/json`, Printer.noSpaces.<span>print</span> (resJson))
        )
      }
      <span>case</span> r: HttpRequest =&gt;
        logRequest(<span>log</span>,r)
        r.discardEntityBytes() // important to drain incoming HTTP Entity stream
        Future.successful{HttpResponse(<span>404</span>, entity = <span>"Unknown resource!"</span>)}
    }

    serverSource.to(Sink.foreach { connection =&gt;
      connection.handleWithAsyncHandler(reqHandler)
    }).run

    <span>log</span>.info(<span>"[5]Step before return Task(1) from startRequestHandler."</span>)
    Task(<span>1</span>)
  }</code></pre>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/15244468?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/15244468?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Artur Sukhenko</p>
      <p>@Devian-ua</p>
      </div>
    <p>
      Hello guys, can't find fallback method. Where did it go or was renamed?
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/1193670?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/1193670?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="Devian-ua">@Devian-ua</span> We‚Äôre now on Discord
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/15244468?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/15244468?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Artur Sukhenko</p>
      <p>@Devian-ua</p>
      </div>
    <p><span data-link-type="mention" data-screen-name="guizmaii">@guizmaii</span> Yeah, joined it)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <div>
      <p>Hi guys,<br>I am working code very similar to this one from docs:</p><p><a href="https://zio.dev/docs/howto/howto_mock_services#scrapping-the-boilerplate" rel="nofollow noopener noreferrer" target="_blank">https://zio.dev/docs/howto/howto_mock_services#scrapping-the-boilerplate</a></p><p>what if in AccountObserverLive I would like to access environment ( like config ) by <code>ZIO.access[Config]</code>.<br>Then it changes result of those methods into <code>ZIO[Config, T, RES]</code> of course.</p><p>In docs we have:</p><pre><code><span>// dependency on Console module</span>
<span><span>val</span> console</span>: Console.Service[Any]</code></pre><p>so I can and I am doing here val config: Config,<br>but then well I am not sure if its right, as we have this Environment in ZIO Monad :)</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      if I will change <code>Console.Service[Any]</code> into <code>Console.Service[Config</code>] then macro annonations does not work, hmm maybe its just a those macros issue 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <div>
      <p>Hi <span data-link-type="mention" data-screen-name="maciejbak85">@maciejbak85</span> - take what I say with a pinch of salt, as I'm a ZIO newbie, but I've been through exactly the same thing recently, but in reverse.</p><p>I ended up settling on using <code>val config: Config</code> and providing this when wiring up my application. That's explicitly documented on the ZIO website as the way to provide such dependencies. I initially started out by doing module interdependencies using the ZIO environment, but came to the realisation that I would save that approach for when I wanted to communicate clearly to clients of my code that they need to provide such dependencies. </p><p>i.e. decide on a case by case basis. In my example, I write a module that makes HTTP requests to some API. The service's URI and other relevant config is provided when wiring up the application, and can be easily replaced when writing tests. I didn't feel it necessary to get that config directly from the environment.</p>
    </div>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <div><p>
      If you <em>want</em> to provide the dependency via the ZIO env instead, when I was experimenting, I had to use the underscore in the generic type param to make it compile. There's a long and complicated explanation about why <code>Any</code> won't work here if you want to read it.</p><pre><code><span><span>trait</span> <span>Foo</span> {</span>
  <span>val</span> foo: <span>Foo</span>.<span>Service</span>[_]
}

<span><span>object</span> <span>Foo</span> {</span>
  <span><span>trait</span> <span>Service</span>[</span><span>R</span>] {
    <span><span>def</span> <span>bar</span>(</span>request: <span>Baz</span>): <span>ZIO</span>[<span>R</span>, <span>Throwable</span>, <span>Unit</span>]
  }
}

<span><span>trait</span> <span>FooLive</span> <span><span>extends</span></span> <span>Foo</span> {</span>
  <span>override</span> <span>val</span> foo: <span>Foo</span>.<span>Service</span>[<span>Config</span>] = <span>new</span> <span>Foo</span>.<span>Service</span>[<span>Config</span>] { ... }
}</code></pre>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="stevebakh">@stevebakh</span> hmm interesting, I will try , thanks a lot !
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <div>
      <p>So with config used would be:<br>```package com.neuraldsp.ncc.services.cognito</p><p>import zio.ZIO<br>import com.neuraldsp.ncc.services.cognito.model.AwsKeysConfig</p><p>trait Foo {<br>  val foo: Foo.Service[_]<br>}</p><p>object Foo {<br>  trait Service[R] {<br>    def bar(request: String): ZIO[R, Throwable, Unit]<br>  }<br>}</p><p>trait FooLive extends Foo {<br>  override val foo: Foo.Service[AwsKeysConfig] = new Foo.Service[AwsKeysConfig] {<br>    def bar(request: String): zio.ZIO[AwsKeysConfig, Throwable, Unit] =<br>      for {<br>        config &lt;- ZIO.environment[AwsKeysConfig]<br>        _      &lt;- ZIO.effect(())<br>      } yield ()<br>  }<br>}<br>```</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <p>
      looks right to me :)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      but then macros does not work :D ok but probably this is zio-test-macro issue
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      and well anyway in test code I can create module with dummy service instead of mocking
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/912963?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Steven Bakhtiari</p>
      <p>@stevebakh</p>
      </div>
    <p>
      I think this gitter channel is mostly dead, you may get more help on discord  (see link at the top)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/2299049?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      I will try there, thanks ;)
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/4439335?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/4439335?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      :wave: hi there. Question regarding scheduling : say I have a computation that yields an absolute TTL (time to live, as a <code>java.time.Instant</code>), and I want to repeat this computation forever, every time the TTL expires. What'd be the most idiomatic way to do that ? 
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Oh guess I'll ask on the discord
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/3371635?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/3371635?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Salar Rahmanian</p>
      <p>@softinio</p>
      </div>
    <p><span data-link-type="mention" data-screen-name="Baccata">@Baccata</span> zio project has moved to discord best if you ask your question there .... invite link at top
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/74843?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/74843?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Nils Kilden-Pedersen</p>
      <p>@nilskp</p>
      </div>
    <p>
      "Invite invalid"
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Yakushev Aleksey</p>
      <p>@AlexGruPerm</p>
      </div>
    <div>
      <p>Hello. Could you help me please output list of String with putStrLn inside for-comprehension</p><pre><code> <span>for</span> {
...
 <span>_</span> &lt;- putStrLn(<span>"  ---------- HEADER ---------"</span>)
<span>_</span> &lt;- request.headers.zipWithIndex(hdr =&gt; putStrLn(s<span>"<span>$hdr</span>._1 <span>$hdr</span>._2"</span>))
 <span>_</span> &lt;- putStrLn(<span>"  ---------------------------"</span>)
...</code></pre><p>Thanks.</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  
</div>
</div>
                <div><div>
    
  <div>
    <p><code>ZIO.collectAll</code> or <code>ZIO.foreach</code> are you friends there.
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p><code>ZIO.foreach(request.headers)(console.putStrLn)</code> 
    </p>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      Also come on over to Discord. There are a lot more people there who can answer your questions!
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/33136423?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    <div>
      <p>Yakushev Aleksey</p>
      <p>@AlexGruPerm</p>
      </div>
    <div>
      <p>Thanks.</p><pre><code> _ &lt;- ZIO.<span><span>foreach</span><span>(request.headers.zipWithIndex)</span><span>(hdr =&gt; console.putStrLn(s<span>"   #${hdr._2} : ${hdr._1.toString}"</span>)</span></span>)</code></pre><p>And thanks about Discord, I will try.</p>
    </div>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/421971?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/421971?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Hello<br>I have a question about zio.Test<br>How to program a Expection which may not be called?<br>Because the testee may not call the mock service in some condition 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars1.githubusercontent.com/u/9111792?v=4&amp;s=30" srcset="https://avatars1.githubusercontent.com/u/9111792?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <div><p>
      Hey. I‚Äôm not seeing zio.console.putStrLn(‚Äúthing‚Äù) what am I missing ? heres is the code </p><pre><code><span>for</span> {
    result &lt;- interpreter.execute(query)
      s = result.<span><span>data</span>.toString</span>
      _ &lt;- zio.console.putStrLn(s)
  } yield ()</code></pre>
    </div>

  </div>
</div>
</div>
                <div><div>
    
  <div>
    <p>
      for reference I‚Äôm lookin into Caliban for functional GraphQL ‚Ä¶ 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars2.githubusercontent.com/u/8796793?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/8796793?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p><span data-link-type="mention" data-screen-name="8bitreid">@8bitreid</span> are you sure <code>interpreter.execute(query)</code> isn't failing?
    </p>

  </div>
</div>
</div>
                
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars1.githubusercontent.com/u/9111792?v=4&amp;s=30" srcset="https://avatars1.githubusercontent.com/u/9111792?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      I‚Äôm not getting an error‚Ä¶ let try something else ‚Ä¶ 
    </p>

  </div>
</div>
</div>
                <div><div>
  <div>
    <div>
      <p><img src="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/20825463?v=4&amp;s=60 2x" height="30" width="30" alt="">
  
</p>

    </div>
  </div>
    
  <div>
    
    <p>
      Do you mind coming over to Discord? There are a lot more people there who can help answer your questions.
    </p>

  </div>
</div>
</div>
            </div></div>
          
      </div>
    </div>
    
  </div></div>
      
    </div>
  </div>
</div>



      </div>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>