<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2 -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2</h1>
    <div class="entry-content col-12 sharepostcontent"> <div class="row justify-content-center"><div class="col-md-4"><div><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/02/DaniethRothPhoto-150x150.jpeg" width="58" alt="Daniel Roth" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 alignnone photo"><p>Daniel</p></div></div></div> <p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1-preview-2/">.NET Core 3.1 Preview 2 is now available</a>. This release is primarily focused on bug fixes, but it contains a few new features as well.</p>
<p>Here&#x2019;s what&#x2019;s new in this release for ASP.NET Core:</p>
<ul>
<li>New component tag helper</li>
<li>Prevent default actions for events in Blazor apps</li>
<li>Stop event propagation in Blazor apps</li>
<li>Validation of nested models in Blazor forms</li>
<li>Detailed errors during Blazor app development</li>
</ul>
<p>See the <a href="https://github.com/dotnet/core/blob/master/release-notes/3.1">release notes</a> for additional details and known issues.</p>
<h2>Get started</h2>
<p>To get started with ASP.NET Core in .NET Core 3.1 Preview 2 <a href="https://dotnet.microsoft.com/download/dotnet-core/3.1">install the .NET Core 3.1 Preview 2 SDK</a>.</p>
<p>If you&#x2019;re on Windows using Visual Studio, for the best experience we recommend <a href="https://visualstudio.com/preview">installing the latest preview of Visual Studio 2019 16.4</a>. Installing Visual Studio 2019 16.4 will also install .NET Core 3.1 Preview 2, so you don&#x2019;t need to separately install it. For Blazor development with .NET Core 3.1, Visual Studio 2019 16.4 is <em>required</em>.</p>
<p>Alongside this .NET Core 3.1 Preview 2 release, we&#x2019;ve also released a Blazor WebAssembly update. To install the latest Blazor WebAssembly template also run the following command:</p>
<pre><code>dotnet new -i Microsoft.AspNetCore.Blazor.Templates::3.1.0-preview2.19528.8
</code></pre>
<h2>Upgrade an existing project</h2>
<p>To upgrade an existing ASP.NET Core 3.1 Preview 1 project to 3.1 Preview 2:</p>
<ul>
<li>Update all Microsoft.AspNetCore.* package references to 3.1.0-preview2.19528.8</li>
</ul>
<p>See also the full list of <a href="https://github.com/aspnet/announcements/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+label%3A3.1.0+label%3A%22Breaking+change%22">breaking changes</a> in ASP.NET Core 3.1.</p>
<p>That&#x2019;s it! You should now be all set to use .NET Core 3.1 Preview 2!</p>
<h2>New component tag helper</h2>
<p>Using Razor components from views and pages is now more convenient with the new component tag helper.</p>
<p>Previously, rendering a component from a view or page involved using the <code>RenderComponentAsync</code> HTML helper.</p>
<pre><code class="cshtml">@(await Html.RenderComponentAsync&lt;Counter&gt;(RenderMode.ServerPrerendered, new { IncrementAmount = 10 }))
</code></pre>
<p>The new component tag helper simplifies the syntax for rendering components from pages and views. Simply specify the type of the component you wish to render as well as the desired render mode. You can also specify component parameters using attributes prefixed with <code>param-</code>.</p>
<pre><code class="cshtml">&lt;component type=&quot;typeof(Counter)&quot; render-mode=&quot;ServerPrerendered&quot; param-IncrementAmount=&quot;10&quot; /&gt;
</code></pre>
<p>The different render modes allow you to control how the component is rendered:</p>
<table>
<thead>
<tr>
<th>RenderMode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Static</td>
<td>Renders the component into static HTML.</td>
</tr>
<tr>
<td>Server</td>
<td>Renders a marker for a Blazor Server application. This doesn&#x2019;t include any output from the component. When the user-agent starts, it uses this marker to bootstrap the Blazor app.</td>
</tr>
<tr>
<td>ServerPrerendered</td>
<td>Renders the component into static HTML and includes a marker for a Blazor Server app. When the user-agent starts, it uses this marker to bootstrap the Blazor app.</td>
</tr>
</tbody>
</table>
<h2>Prevent default actions for events in Blazor apps</h2>
<p>You can now prevent the default action for events in Blazor apps using the new <code>@oneventname:preventDefault</code> directive attribute. For example, the following component displays a count in a text box that can be changed by pressing the &#x201C;+&#x201D; or &#x201C;-&#x201D; keys:</p>
<pre><code class="razor">&lt;p&gt;Press &quot;+&quot; or &quot;-&quot; in change the count.&lt;/p&gt;
&lt;input value=&quot;@count&quot; @onkeypress=&quot;@KeyHandler&quot; @onkeypress:preventDefault /&gt;

@code {
    int count = 0;

    void KeyHandler(KeyboardEventArgs ev)
    {
        if (ev.Key == &quot;+&quot;)
        {
            count++;
        }
        else if (ev.Key == &quot;-&quot;)
        {
            count--;
        }
    }
}
</code></pre>
<p>The <code>@onkeypress:preventDefault</code> directive attribute prevents the default action of showing the text typed by the user in the text box. Specifying this attribute without a value is equivalent to <code>@onkeypress:preventDefault=&quot;true&quot;</code>. The value of the attribute can also be an expression: <code>@onkeypress:preventDefault=&quot;shouldPreventDefault&quot;</code>. You don&#x2019;t have to define an event handler to prevent the default action; both features can be used independently.</p>
<h2>Stop event propagation in Blazor apps</h2>
<p>Use the new <code>@oneventname:stopPropagation</code> directive attribute to stop event propagation in Blazor apps.</p>
<p>In the following example, checking the checkbox prevents click events from the child <code>div</code> from propagating to the parent <code>div</code>:</p>
<pre><code class="razor">&lt;input @bind=&quot;stopPropagation&quot; type=&quot;checkbox&quot; /&gt;
&lt;div @onclick=&quot;OnClickParentDiv&quot;&gt;
    Parent div
    &lt;div @onclick=&quot;OnClickChildDiv&quot; @onclick:stopPropagation=&quot;stopPropagation&quot;&gt;
        Child div
    &lt;/div&gt;
&lt;/div&gt;

&lt;button @onclick=&quot;OnClick&quot;&gt;Click me!&lt;/button&gt;

@code {
    bool stopPropagation;

    void OnClickParentDiv() =&gt; Console.WriteLine(&quot;Parent div clicked.&quot;);
    void OnClickChildDiv() =&gt; Console.WriteLine(&quot;Child div clicked.&quot;);
}
</code></pre>
<h2>Detailed errors during Blazor app development</h2>
<p>When your Blazor app isn&#x2019;t functioning properly during development, it&#x2019;s important to get detailed error information so that you can troubleshoot and fix the issues. Blazor apps now display a gold bar at the bottom of the screen when an error occurs.</p>
<p>During development, in Blazor Server apps, the gold bar will direct you to the browser console where you can see the exception that has occurred.</p>
<p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/11/blazor-detailed-errors-dev.png" alt="Blazor detailed errors in development"></p>
<p>In production, the gold bar notifies the user that something has gone wrong, and recommends the user to refresh the browser.</p>
<p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/11/blazor-detailed-errors-prod.png" alt="Blazor detailed errors in production"></p>
<p>The UI for this error handling experience is part of the updated Blazor project templates so that it can be easily customized:</p>
<p><em>_Host.cshtml</em></p>
<pre><code class="cshtml">&lt;div id=&quot;blazor-error-ui&quot;&gt;
    &lt;environment include=&quot;Staging,Production&quot;&gt;
        An error has occurred. This application may no longer respond until reloaded.
    &lt;/environment&gt;
    &lt;environment include=&quot;Development&quot;&gt;
        An unhandled exception has occurred. See browser dev tools for details.
    &lt;/environment&gt;
    &lt;a href=&quot;&quot; class=&quot;reload&quot;&gt;Reload&lt;/a&gt;
    &lt;a class=&quot;dismiss&quot;&gt;&#x1F5D9;&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<h2>Validation of nested models in Blazor forms</h2>
<p>Blazor provides support for validating form input using data annotations with the built-in <code>DataAnnotationsValidator</code>. However, the <code>DataAnnotationsValidator</code> only validates top-level properties of the model bound to the form.</p>
<p>To validate the entire object graph of the bound model, try out the new <code>ObjectGraphDataAnnotationsValidator</code> available in the experimental Microsoft.AspNetCore.Blazor.DataAnnotations.Validation package:</p>
<pre><code class="razor">&lt;EditForm Model=&quot;@model&quot; OnValidSubmit=&quot;@HandleValidSubmit&quot;&gt;
    &lt;ObjectGraphDataAnnotationsValidator /&gt;
    ...
&lt;/EditForm&gt;
</code></pre>
<p>The Microsoft.AspNetCore.Blazor.DataAnnotations.Validation is not slated to ship with .NET Core 3.1, but is provided as an experimental package to get early feedback.</p>
<h2>Give feedback</h2>
<p>We hope you enjoy the new features in this preview release of ASP.NET Core! Please let us know what you think by filing issues on <a href="https://github.com/aspnet/aspnetcore/issues">GitHub</a>.</p>
<p>Thanks for trying out ASP.NET Core!</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>