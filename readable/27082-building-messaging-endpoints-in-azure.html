<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Building Messaging Endpoints in Azure -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Building Messaging Endpoints in Azure</h1><div><div class="post-content"><p>Posts in this series:</p><p>When looking at moving traditional on-prem solutions to the cloud, I try as much as possible to avoid any kind of lift-and-shift strategy and instead leverage as many platform-as-a-service (PaaS) offerings as possible. Since our systems mainly consist of web applications backed by some sort of database, it's often a fairly straightforward transition. Web applications become hosted as Azure App Services, and our databases become Azure SQL.</p><p>One component that isn't nearly as easy to understand how to move are <a href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/MessageEndpoint.html">messaging endpoints</a>. A messaging endpoint is some sort of autonomous background process that sends and receives messages. There's no user interface for these types of applications, only processing messages completely in the background.</p><p>Typically, our on-prem solution for messaging endpoints is a Windows Service - usually built with something like <a href="http://topshelf-project.com/">TopShelf</a> and <a href="https://particular.net/nservicebus">NServiceBus</a>. It's been our solution for quite a few years now, since Windows has a built-in concept of a background process that can be started, stopped, and well-established APIs for installing and controlling them.</p><p>The story, unfortunately, is quite a bit muddier when looking at moving these services to Azure. There's no direct analog to Windows Services in Azure like there is with moving an IIS application, so we have to carefully evaluate our choices to see what makes the most sense.</p><p>First, we need to understand what our <em>possible</em> options are before looking at what can be a <em>reasonable</em> option. Messaging endpoints can be run in anything can run a .NET (Core) process, so while it can be run in almost any Azure service, some are more geared towards background autonomous processes than others.</p><h3 id="ourmanypossibleservices">Our Many Possible Services</h3><p>Even getting a list of Azure services can be a challenge, the best we can do is pull from the availability list and <a href="https://azure.microsoft.com/en-us/global-infrastructure/services/?products=all">select "All Products"</a>. The list is looooooong but we can start to narrow down our overall possible options:</p><p>And inside of Azure App Service, we have more sub-options:</p><p>A few of these we can try to eliminate out-of-the-box, as either highly proprietary or more or less deprecated solutions:</p><ul><li>Cloud Service</li><li>Service Fabric</li></ul><p>Or ones that would be difficult/impossible to migrate existing code into:</p><p>Or ones that are a lift-and-shift strategy:</p><p>That leaves us with:</p><ul><li>App Service (and its many options)</li><li>Container Instances</li><li>Azure Functions</li><li>AKS</li></ul><p>Unfortunately, none of these options are truly analogous to a Windows Service, but we do have a spectrum from Serverless to Infrastructure as a Service. If we look at a web application, we have many options along the spectrum:</p><p><img src="https://jimmybogardsblog.blob.core.windows.net/jimmybogardsblog/5/2019/Picture0070.png" alt=""></p><p>It becomes more difficult to evaluate messaging endpoint options, there's nothing in our list that is in that "PaaS" solution spot. There's really no right-click-deploy solution for a messaging endpoint, which as demoware as it is, highlights how Microsoft wants to make it super easy to deploy a web application to the cloud. There's just nothing like an App Service for Windows Services. It all assumes you're deploying a web application.</p><p>In this series, we'll look at the different tooling and deployment options for delivering messaging endpoints to Azure, benefits and drawbacks and each, and see while there are strides being made, the story still won't be quite as nice as re-platforming a web application.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>