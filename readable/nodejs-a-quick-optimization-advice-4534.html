<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <div class="readable">
        <h1>#NodeJS : A quick optimization advice</h1>
        <p>
by Julien CROUZET <br/>Reading time: 1 minute        </p>
        <p><a href="https://top.fse.guru/nodejs-a-quick-optimization-advice-7353b820c92e?gi=c2817e14e008">https://top.fse.guru/nodejs-a-quick-optimization-advice-7353b820c92e?gi=c2817e14e008</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section><div><div><figure><div><div><div><div><p><img src="https://miro.medium.com/max/30/1*hDPuAN6PLjuYLK1BOceBkA.jpeg?q=20" width="5616" height="3744" role="presentation"></p><p><img width="5616" height="3744" role="presentation" src="https://miro.medium.com/max/5616/1*hDPuAN6PLjuYLK1BOceBkA.jpeg"></p></div></div></div></div></figure><div><div><div><div><p><a href="https://top.fse.guru/@c2c?source=post_page-----7353b820c92e----------------------" rel="noopener"><img alt="Julien CROUZET" src="https://miro.medium.com/fit/c/48/48/1*-Dy-bEjt6mWu9yvHP29wvw.jpeg" width="48" height="48"></a></p><div><div><div><p><span><div><p><span><a href="https://top.fse.guru/@c2c?source=post_page-----7353b820c92e----------------------" rel="noopener">Julien CROUZET</a></span></p><div><p><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftop.fse.guru%2Fnodejs-a-quick-optimization-advice-7353b820c92e&amp;source=-677072ea6c99-------------------------follow_byline-" rel="noopener">Follow</a></p></div></div></span></p></div></div><p><span><span><div><p><a rel="noopener" href="https://top.fse.guru/nodejs-a-quick-optimization-advice-7353b820c92e?source=post_page-----7353b820c92e----------------------">Oct 7, 2015</a> Â· 2 min read</p></div></span></span></p></div></div><div><div><div><a href="https://medium.com/p/7353b820c92e/share/twitter?source=post_actions_header---------------------------" target="_blank" rel="noopener nofollow"><svg width="29" height="29"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div><a href="https://medium.com/p/7353b820c92e/share/facebook?source=post_actions_header---------------------------" target="_blank" rel="noopener nofollow"><svg width="29" height="29"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftop.fse.guru%2Fnodejs-a-quick-optimization-advice-7353b820c92e&amp;source=post_actions_header--------------------------bookmark_sidebar-" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div><p id="2231" data-selectable-paragraph="">Can you spot the difference between these two files :</p><figure><div></div></figure><figure><div></div></figure><p id="b14a" data-selectable-paragraph="">that can explain a 50% performance gain :</p><figure><div><div><div><p><img src="https://miro.medium.com/max/30/1*ChsE-NhZBpnhZR0MwEXtgw.png?q=20" width="504" height="76" role="presentation"></p><p><img width="504" height="76" role="presentation" src="https://miro.medium.com/max/504/1*ChsE-NhZBpnhZR0MwEXtgw.png"></p></div></div></div></figure><p id="3b82" data-selectable-paragraph="">If you donâ€™t, itâ€™s normal, you try to read the code abstracting the comment ; it was slightly changed :</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/30/1*1SdiNDRyhwh2cKcZBDzEJA.png?q=20" width="873" height="149" role="presentation"></p><p><img width="873" height="149" role="presentation" src="https://miro.medium.com/max/873/1*1SdiNDRyhwh2cKcZBDzEJA.png"></p></div></div></div></div></figure><p id="fb3e" data-selectable-paragraph="">The small changes made the function body of <em>add()</em> growing over 600 character. <mark>v8 optimizer (</mark><mark><a href="http://jayconrod.com/posts/54/a-tour-of-v8-crankshaft-the-optimizing-compiler" target="_blank" rel="noopener">crankshaft</a></mark><mark>) </mark><mark><a href="https://en.wikipedia.org/wiki/Inline_expansion" target="_blank" rel="noopener">inlines </a></mark><mark>the functions whose body length, including the comments, is less than 600 characters.</mark></p><p id="cd93" data-selectable-paragraph="">The 600 character limit can be tweaked via the <em>max-inlined-source-size</em> of the node command :</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/30/1*YI9hSksfkonTciB8ghWKBA.png?q=20" width="741" height="72" role="presentation"></p><p><img width="741" height="72" role="presentation" src="https://miro.medium.com/max/741/1*YI9hSksfkonTciB8ghWKBA.png"></p></div></div></div></div></figure></div></div></section></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>