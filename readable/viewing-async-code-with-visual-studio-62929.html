<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Viewing async code with Visual Studio - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Viewing async code with Visual Studio - linksfor.dev(s)"/>
    <meta property="article:author" content="admin@poppastring.com"/>
    <meta property="og:description" content="The debugger team have been working really hard on the improving the ways in ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.poppastring.com/blog/viewing-async-code-with-visual-studio"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Viewing async code with Visual Studio</title>
<div class="readable">
        <h1>Viewing async code with Visual Studio</h1>
            <div>by admin@poppastring.com</div>
            <div>Reading time: 2 minutes</div>
        <div>Posted here: 16 Jun 2020</div>
        <p><a href="https://www.poppastring.com/blog/viewing-async-code-with-visual-studio">https://www.poppastring.com/blog/viewing-async-code-with-visual-studio</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <div>
            <div><p>The debugger team have been working really hard on the improving the ways in which you can visualize <a href="https://www.poppastring.com/blog/looking-back-at-async" target="_blank">asynchronous code</a>! The <a href="https://docs.microsoft.com/en-us/visualstudio/debugger/using-the-parallel-stacks-window?view=vs-2019">Parallel Stacks window</a> for Tasks (or Parallel Tasks) provides and improved graphical representation of the actual and virtual call stacks. You can now see whether you are waiting on a lock that might be held by another thread, or visualize a virtually stitched stack where your code is waiting on an async operation.</p><p><a href="https://www.poppastring.com/blog/content/binary/Open-Live-Writer/042a4b68bb9a_13275/parallel-stack-window_2.jpg"><img width="1479" height="502" title="Parallel Stack Window" alt="Parallel Stack Window" src="https://www.poppastring.com/blog/content/binary/Open-Live-Writer/042a4b68bb9a_13275/parallel-stack-window_thumb.jpg"></a></p><p>The above illustrates that the root of 3 threads have identical call stacks, this is very useful if, for example, the thread pool threads are queued up and you are trying to find the pattern that causes the issue. From my perspective this is really special in that it not only works when you are debugging code but it is also useful when you open a memory dump and want to see which threads have similar origins. <a href="https://www.poppastring.com/blog/basic-hang-dump-analysis-using-windbg" target="_blank">If this were WinDbg</a> I might try run this command:</p>
<p><code>~ * e !ClrStack</code>
</p>
<p>My good colleague <a href="https://twitter.com/lyrichardson01" target="_blank">Leslie Richardson</a> has just finished a great blogging series on async debugging along with a helpful companion video:</p><ul><li><a href="https://devblogs.microsoft.com/visualstudio/how-do-i-think-about-async-code/" target="_blank">How Do I Think About Async Code?!</a></li><li><a href="https://devblogs.microsoft.com/visualstudio/how-do-i-debug-async-code-in-visual-studio/" target="_blank">How Do I Debug Async Code in Visual Studio?</a></li><li><a href="https://devblogs.microsoft.com/visualstudio/debugging-async-code-parallel-stacks-for-tasks/" target="_blank">Debugging Async Code: Parallel Stacks for Tasks</a></li></ul><p><iframe width="560" height="315" src="https://www.youtube.com/embed/aVEug50YpaM" frameborder="0" allowfullscreen="" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></p></div>
        </div>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>