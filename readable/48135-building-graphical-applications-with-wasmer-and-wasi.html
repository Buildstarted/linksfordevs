<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Building Graphical Applications with Wasmer and WASI -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Building Graphical Applications with Wasmer and WASI</h1><div><div class="ac ae af ag ah eu aj ak"><p id="3bc4" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Let‚Äôs take a step back and dive into how I/O devices can help the community today.</p><h1 id="a930" class="is it ex ba az iu ez iv fb iw ix iy iz ja jb jc jd">Finding what Features the Community can use, Today</h1><p id="d339" class="hj hk ex ba hl b hm je ho jf hq jg hs jh hu ji hw dl">We did some research on what people in the open source community are trying to build with WebAssembly, and we found that it was a lot of games! <a href="https://maxbittker.com/making-sandspiel" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Sandspeil</a>, <a href="https://github.com/torch2424/wasmboy" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">WasmBoy</a>, and <a href="https://www.continuation-labs.com/projects/d3wasm/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Continuation Lab‚Äôs port of DOOM 3</a> are all amazing games built with WebAssembly. Games Engines like <a href="https://blogs.unity3d.com/2018/08/15/webassembly-is-here/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Unity</a>, <a href="https://www.infoq.com/articles/wasm-game-editor-port/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Gdevelop</a>, and <a href="https://twitter.com/IainShorter/status/1158769551229816833" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Construct 3</a> support outputting games for web browsers that use WebAssembly. üéÆ</p><p id="3d72" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">However, none of these games or engines support running the game standalone. For example, currently, you could not have a single Wasm Binary create and interface with Graphics and Input as you would still need additional code for the specific platform (like a web browser) in a different language.<br>Wasmer‚Äôs I/O devices allows developers to have a single Wasm Binary open a Window, write to a Frame Buffer, and read input events from a user. üí™</p><p id="3349" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Let‚Äôs take a look at how I/O devices work and enable this functionality.</p><h1 id="1822" class="is it ex ba az iu ez iv fb iw ix iy iz ja jb jc jd">Building WASI Applications with Wasmer I/O devices</h1><p id="ad0a" class="hj hk ex ba hl b hm je ho jf hq jg hs jh hu ji hw dl">I/O devices work by creating <strong class="hl hx">virtual device files in the runtime filesystem</strong>, similar to a device file on a UNIX operating system. If a Wasm module uses the WASI bindings of reading/writing files, the runtime can react to the events and perform actions for the Wasm module. üòé</p><p id="4533" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">For example, I/O devices creates a<code class="ec jj jk jl jm b">/_wasmer/dev/fb0/fb</code> file that contains a RGBA byte array of a buffer to be drawn. Which is similar to <a href="http://seenaburns.com/2018/04/04/writing-to-the-framebuffer/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">writing directly to a linux framebuffer</a>! üñºÔ∏è</p><p id="78b8" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Since the API is essentially an abstraction over a normal Filesystem, and the current WASI spec, Wasmer I/O devices can be tried today, with any language / toolchain that supports WASI!</p><p id="22de" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">In fact, we even got a working standalone version of WasmBoy that can be tried with the Wasmer runtime! This works by using the <code class="ec jj jk jl jm b">io-devices-lib-assemblyscript</code> package that we built. The package, and also a Rust crate for interacting with I/O Devices, can be found on our <a href="https://github.com/wasmerio/io-devices-lib" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">io-devices-lib</a> repository.</p><p id="8b9c" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">WasmBoy is now available on <a href="https://wapm.io/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">WAPM</a>, as <a href="https://wapm.io/package/torch2424/wasmerboy" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">WasmerBoy</a>. You can install Wasmer and WAPM by following the <a href="https://docs.wasmer.io/wapm/wapm-installation" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">instructions here</a>. Then, Wasmerboy can be installed standalone by running: <code class="ec jj jk jl jm b">wapm install -g torch2424/wasmerboy</code> . Then, by running <code class="ec jj jk jl jm b">wasmerboy --dir=my-dir my-dir/my-rom-file.gb</code> . For example, we can run the MIT licensed <a href="https://tangramgames.dk/tobutobugirl/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Tobu Tobu Girl</a> using WasmerBoy from WAPM:</p><blockquote class="hy hz ia"><p id="d9dc" class="hj hk ex ib hl b hm hn ho hp hq hr hs ht hu hv hw dl">You can download the Tobu Tobug Girl rom <a href="https://tangramgames.itch.io/tobu-tobu-girl-deluxe/purchase?popup=1" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">from this link</a></p></blockquote><figure class="id ie if ig ih dq dc dd paragraph-image"><figcaption class="be ei ej ek el de dc dd em en az eo">Showing WasmerBoy running from WAPM / Wasmer CLI</figcaption></figure><p id="7eff" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">WasmerBoy also works on Wasmer-JS / WebAssembly.sh (on Desktop Chrome)! You can drag and drop the ROM file to WebAssembly.sh, which will add it to the filesystem. Then, you can run the same command: <code class="ec jj jk jl jm b">wasmerboy /tmp/my-rom-file.gb</code> . Which will open a popup running WasmerBoy!</p><figure class="id ie if ig ih dq dc dd paragraph-image"><figcaption class="be ei ej ek el de dc dd em en az eo">Showing WasmerBoy running from Wasmer-JS / WebAssembly.sh</figcaption></figure><h1 id="ac53" class="is it ex ba az iu ez iv fb iw ix iy iz ja jb jc jd">Thank you!</h1><p id="6f52" class="hj hk ex ba hl b hm je ho jf hq jg hs jh hu ji hw dl">We are SO excited to see the interest and projects that could come from this. We really hope this helps to grow the WebAssembly community, and help as a jumping board for spec authors when this eventually does get proposed for the WASI spec. üôå</p><p id="e6c1" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Again, we would like to re-iterate, this is an experimental feature, that is not standardized. I/O devices is meant for experimenting with building standalone WebAssembly modules as a sneak peek at the eventual future when there could be a standardized feature for this type of functionality in the WASI spec. As this idea is an important part of the web platform, as highlighted in <a href="https://vimeo.com/364370506" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">Paul Lewis‚Äô ‚ÄúCustom Web Shadow Elements, or Whatever‚Ä¶‚Äù talk</a>.</p><p id="2d13" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">To get started with I/O devices, the latest release of Wasmer has a new flag:<br><code class="ec jj jk jl jm b">--enable-experimental-io-devices</code>.</p><p id="4964" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">I/O devices has its own Wasmer-JS package, <code class="ec jj jk jl jm b">@wasmer/io-devices</code>. The I/O devices package is utilized in the <code class="ec jj jk jl jm b">@wasmer/wasm-temrinal</code> package, and <a href="https://webassembly.sh/" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">WebAssembly.sh</a> to support t I/O devices by default.</p><p id="c451" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Then, you can try a Wasm Module that uses the I/O devices, such as WasmBoy on WAPM, or build a Wasm module in Rust or AssemblyScript using the experimental <a href="https://github.com/wasmerio/io-devices-lib" class="ep cf eq er es et" target="_blank" rel="noopener nofollow">I/O Devices Lib</a>. ü¶ÄüöÄ</p><p id="d40d" class="hj hk ex ba hl b hm hn ho hp hq hr hs ht hu hv hw dl">Thank YOU for reading this article! Feel free to open issues, send us ideas, or send us your cool projects! We are happy to help the community in any way we can! Cheers! üçª</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>