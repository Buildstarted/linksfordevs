<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Create Azure Infrastructure with Azure DevOps and Azure CLI Powershell scripts - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Create Azure Infrastructure with Azure DevOps and Azure CLI Powershell scripts - linksfor.dev(s)"/>
    <meta property="article:author" content="March 31, 2020 &#xB7;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;by damienbod &#xB7;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;in Azure, devops&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xB7; 1 Comment"/>
    <meta property="og:description" content="In Azure DevOps, Pipelines can be used to create Azure infrastructure using Azure CLI and Powershell. This blog shows how to create a simple resource group in Azure using Azure DevOps Pipelines. Cr&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://damienbod.com/2020/03/31/create-azure-infrastructure-with-azure-devops-and-azure-cli-powershell-scripts/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Create Azure Infrastructure with Azure DevOps and Azure CLI Powershell scripts</title>
<div class="readable">
        <h1>Create Azure Infrastructure with Azure DevOps and Azure CLI Powershell scripts</h1>
            <div>by March 31, 2020 &#xB7;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;by damienbod &#xB7;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;in Azure, devops&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xB7; 1 Comment</div>
            <div>Reading time: 2-3 minutes</div>
        <div>Posted here: 01 Apr 2020</div>
        <p><a href="https://damienbod.com/2020/03/31/create-azure-infrastructure-with-azure-devops-and-azure-cli-powershell-scripts/">https://damienbod.com/2020/03/31/create-azure-infrastructure-with-azure-devops-and-azure-cli-powershell-scripts/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>

			
				
					<div id="post-13486">

						
						

						<div>

							<p>In Azure <a href="https://dev.azure.com/">DevOps</a>, <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/?view=azure-devops">Pipelines </a>can be used to create Azure infrastructure using Azure CLI and Powershell. This blog shows how to create a simple resource group in Azure using Azure DevOps Pipelines.</p>
<p><strong>Create the Azure DevOps Pipeline</strong></p>
<p>To get started, create a new Pipeline in your Azure DevOps project which references a git repository with the infrastructure scripts. You can use the Azure CLI button in the UI to create a new Azure CLI task. You need to choose Powershell core, if you are using an Linux image in the Pipeline. Select the Powershell script from your repository and Authorize the build to use the correct subscription.</p>
<p><img data-attachment-id="13494" data-permalink="https://damienbod.com/2020/03/31/create-azure-infrastructure-with-azure-devops-and-azure-cli-powershell-scripts/azure_devops_ps_azure_cli_01/" data-orig-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png" data-orig-size="892,1293" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="azure_devops_ps_azure_cli_01" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=414" data-large-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=640" src="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=640&amp;h=928" alt="" width="640" height="928" srcset="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=640&amp;h=928 640w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=103&amp;h=150 103w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=414&amp;h=600 414w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png?w=768&amp;h=1113 768w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_01.png 892w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>The UI adds the following task to your yml file and saves the yml build configuration to the git repository when you click save.</p>
<div><div id="highlighter_803715"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p></td><td><div><p><code>- task: AzureCLI@2</code></p><p><code>&nbsp;&nbsp;</code><code>displayName: "Create resource group"</code></p><p><code>&nbsp;&nbsp;</code><code>inputs:</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>azureSubscription: 'Visual Studio Enterprise(gggg...)'</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>scriptType: 'pscore'</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>scriptLocation: 'scriptPath'</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>scriptPath: 'createKeyVaultExistingRG.ps1'</code></p></div></td></tr></tbody></table></div></div>
<p>The file <strong>createKeyVaultExistingRG.ps1</strong> is used in the build script. This Powershell file is pushed to the infrastructure repository. In the file, a simple <strong>az group create</strong> command from Azure CLI creates a new Azure resource group.</p>
<div><div id="highlighter_548269"><table><tbody><tr><td><p>1</p></td><td><div><p><code>az group create -l westeurope -n "devops-rg"</code></p></div></td></tr></tbody></table></div></div>
<p>When the build runs successfully, the Azure resource group has been created and can be viewed in the Azure portal.</p>
<p><img data-attachment-id="13496" data-permalink="https://damienbod.com/2020/03/31/create-azure-infrastructure-with-azure-devops-and-azure-cli-powershell-scripts/azure_devops_ps_azure_cli_02/" data-orig-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png" data-orig-size="934,593" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="azure_devops_ps_azure_cli_02" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=640" src="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=640&amp;h=406" alt="" width="640" height="406" srcset="https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=640&amp;h=406 640w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=150&amp;h=95 150w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=600&amp;h=381 600w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png?w=768&amp;h=488 768w, https://damienbod.files.wordpress.com/2020/03/azure_devops_ps_azure_cli_02.png 934w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>The Powershell code can be completely run local on the development PC or as part of the build Pipeline. To run local, the local development machine must install the Azure CLI. Then the user can login using <strong>az login</strong>. Now the Powershell infrastructure script can be run, as long as the user has the permissions to create items in the Azure subscription.</p>
<p><strong>Links: </strong></p>
<p><a href="https://dev.azure.com/" rel="nofollow">https://dev.azure.com/</a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/azure-key-vault?view=azure-devops" rel="nofollow">https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/azure-key-vault?view=azure-devops</a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/package/nuget?view=azure-devops" rel="nofollow">https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/package/nuget?view=azure-devops</a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/dotnet-core?view=azure-devops" rel="nofollow">https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/dotnet-core?view=azure-devops</a></p>

							
							
						</div><!-- .entry-content -->

					</div><!-- .hentry -->

					
	<!-- #sidebar-after-singular -->


					
<!-- #comments-template -->
				
			
		</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>