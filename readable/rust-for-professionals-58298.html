<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <meta property="article:author" content="Buildstarted"/>
    <meta property="og:site_name" content="linksfor.dev(s)" />
    <meta property="og:title" content="linksfor.dev(s)" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="A curated list of sources of development information including c#, c++, and other dev related links." />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Rust for professionals</title>
<div class="readable">
        <h1>Rust for professionals</h1>
        <p>
Reading time: 26-33 minutes        </p>
        <p><a href="https://overexact.com/rust-for-professionals/">https://overexact.com/rust-for-professionals/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
<nav id="toc"><ol><li><a href="#introduction">Introduction </a><ol><li><a href="#naming">Naming </a></li></ol></li><li><a href="#syntax">Syntax </a><ol><li><a href="#variables">Variables </a><ol><li><a href="#types">Types </a></li><li><a href="#mutability">Mutability </a></li><li><a href="#destructuring">Destructuring </a></li></ol></li><li><a href="#functions">Functions </a><ol><li><a href="#inner-functions">Inner functions </a></li><li><a href="#extension-methods">Extension methods </a></li><li><a href="#closures-(lambdas)">Closures (lambdas) </a></li></ol></li><li><a href="#expressions">Expressions </a></li><li><a href="#structs-(classes)">Structs (classes) </a></li><li><a href="#traits-(interfaces)">Traits (interfaces) </a><ol><li><a href="#default-methods">Default methods </a></li><li><a href="#associated-functions">Associated functions </a></li></ol></li><li><a href="#enums">Enums </a><ol><li><a href="#associated-values">Associated values </a></li></ol></li></ol></li><li><a href="#concepts">Concepts </a><ol><li><a href="#ownership">Ownership </a></li><li><a href="#strings">Strings </a></li><li><a href="#null-values">Null values </a></li><li><a href="#error-handling">Error handling </a></li><li><a href="#input">Input </a></li><li><a href="#attributes-(annotations)">Attributes (annotations) </a></li></ol></li><li><a href="#miscellaneous">Miscellaneous </a><ol><li><a href="#package-management">Package management </a></li><li><a href="#project-setup">Project setup </a></li><li><a href="#useful-links">Useful links </a></li></ol></li></ol></nav><h2 id="introduction">Introduction </h2>
<p>This is a short introduction to Rust, intended for developers that already know another language.
In the examples, Rust is compared with TypeScript, JavaScript or Java, sometimes with C++ or Kotlin.</p>
<p>For a deep dive into the syntax and Rustâ€™s concepts, have a look at <a href="https://doc.rust-lang.org/book/index.html">The Rust Programming Language</a>, but for a quick overview, read on.</p>
<h3 id="naming">Naming </h3>
<p>Regarding names, Rust prefers <a href="https://doc.rust-lang.org/1.0.0/style/style/naming/README.html">snake case</a> for variables and functions, so a method would be called <code>read_str</code> instead of <code>readStr</code>. For <a href="#structs-(classes)">structs</a>, <a href="#traits-(interfaces)">traits</a> and <a href="#enums">enums</a>, camel case (or Pascal case) is used, for example <code>HttpClient</code>.</p>
<h2 id="syntax">Syntax </h2>
<p>Rustâ€™s syntax is a mix of existing languages (curly braces, functions and references like in C, type after identifier like in Go or Kotlin, generics and type parameters like in C++ or Java) with some Rust-specific elements (<a href="https://doc.rust-lang.org/1.9.0/book/lifetimes.html">lifetime names</a>, patterns, macros, attributes). For a quick overview of the syntax, see the <a href="https://cheats.rs/">Rust Language Cheat Sheet</a> or an overview of <a href="https://doc.rust-lang.org/reference/keywords.html">Rustâ€™s keywords</a>.</p>
<h3 id="variables">Variables </h3>
<p>Rust variable declarations are very similar to TypeScript or Kotlin, but look a bit different from Java or C.</p>
<div>
<pre><code><span><span>const</span> s<span>:</span> <span>string</span> <span>=</span> <span>""</span><span>;</span></span><br><span><span>let</span> n<span>:</span> <span>number</span> <span>=</span> <span>0.9</span><span>;</span></span><br><span><span>let</span> i <span>=</span> <span>123</span><span>;</span> </span></code></pre>
<pre><code><span><span>let</span> s<span>:</span> <span>&amp;</span>str <span>=</span> <span>""</span><span>;</span></span><br><span><span>let</span> <span>mut</span> n<span>:</span> f64 <span>=</span> <span>0.9</span><span>;</span></span><br><span><span>let</span> <span>mut</span> i <span>=</span> <span>123</span><span>;</span> </span></code></pre>
<p>Most of the time, the type can be ommitted in Rust and the compiler will infer the correct type</p>
</div>
<h4 id="types">Types </h4>
<p>In Rust, there are more specific <a href="https://www.codingame.com/playgrounds/365/getting-started-with-rust/primitive-data-types">primitive data types</a>.</p>
<p>The void type is called <em>unit</em> and is indicated by <code>()</code>, see <a href="#functions">functions</a> for an example.</p>
<div>
<pre><code><span><span>int</span> i <span>=</span> <span>123</span><span>;</span></span><br><span><span>long</span> l <span>=</span> <span>456L</span><span>;</span></span><br><span></span><br><span><span>float</span> f <span>=</span> <span>0.5f</span><span>;</span></span><br><span><span>double</span> d <span>=</span> <span>0.5</span><span>;</span></span><br><span></span><br><span><span>String</span> string <span>=</span> <span>"Hello"</span><span>;</span></span><br><span></span><br><span><span>int</span><span>[</span><span>]</span> arr <span>=</span> <span>{</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>}</span><span>;</span></span><br><span></span><br><span><span>List</span><span><span>&lt;</span><span>Integer</span><span>&gt;</span></span> list <span>=</span> <span>Arrays</span><span>.</span><span>asList</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>)</span><span>;</span></span></code></pre>
<pre><code><span><span>let</span> i<span>:</span> i32 <span>=</span> <span>123</span><span>;</span></span><br><span><span>let</span> l<span>:</span> i64 <span>=</span> <span>456</span><span>;</span></span><br><span></span><br><span><span>let</span> f<span>:</span> f32 <span>=</span> <span>0.5</span><span>;</span></span><br><span><span>let</span> d<span>:</span> f64 <span>=</span> <span>0.5f64</span><span>;</span></span><br><span></span><br><span><span>let</span> string<span>:</span> <span>&amp;</span>str <span>=</span> <span>"Hello"</span><span>;</span></span><br><span></span><br><span><span>let</span> arr<span>:</span> <span>[</span>i32<span>;</span> <span>3</span><span>]</span> <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span><span>;</span></span><br><span></span><br><span><span>let</span> list<span>:</span> Vec<span>&lt;</span>i32<span>&gt;</span> <span>=</span> <span>vec!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span><span>;</span></span></code></pre>
<p>In Rust, numeric literals can optionally have a type suffix,
for example <code>1000u32</code> or <code>0.5f64</code>.</p>
</div>
<h4 id="mutability">Mutability </h4>
<p>Variables need to be explicitly declared mutable (<code>let</code> versus <code>let mut</code>), like in JavaScript (<code>const</code> and <code>let</code>) or Kotlin (<code>val</code> and <code>var</code>).</p>
<p>The <a href="https://doc.rust-lang.org/1.7.0/book/mutability.html">mutability model in Rust</a> is not like JavaScript, but a bit more like <a href="http://duramecho.com/ComputerInformation/WhyHowCppConst.html"><em>const</em> in C++</a>, as Rust will not let you call modifying methods on a variable which is not declared as mutable.</p>
<div>
<pre><code><span><span>let</span> arr1<span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span></span><br><span>arr1<span>.</span><span>push</span><span>(</span><span>"123"</span><span>)</span><span>;</span> </span><br><span>arr1 <span>=</span> <span>[</span><span>"a"</span><span>,</span> <span>"b"</span><span>]</span><span>;</span> </span><br><span></span><br><span><span>const</span> arr2<span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span></span><br><span>arr2<span>.</span><span>push</span><span>(</span><span>"123"</span><span>)</span><span>;</span> </span><br><span>arr2 <span>=</span> <span>[</span><span>]</span><span>;</span> </span></code></pre>
<pre><code><span><span>let</span> <span>mut</span> arr1 <span>=</span> <span>vec!</span><span>[</span><span>]</span><span>;</span></span><br><span>arr1<span>.</span><span>push</span><span>(</span><span>"123"</span><span>)</span><span>;</span> </span><br><span>arr1 <span>=</span> <span>vec!</span><span>[</span><span>"a"</span><span>,</span> <span>"b"</span><span>]</span><span>;</span> </span><br><span></span><br><span><span>let</span> arr2 <span>=</span> <span>vec!</span><span>[</span><span>]</span><span>;</span></span><br><span>arr2<span>.</span><span>push</span><span>(</span><span>"123"</span><span>)</span><span>;</span> </span><br><span>arr2 <span>=</span> <span>vec!</span><span>[</span><span>]</span><span>;</span> </span></code></pre>
<p>In TypeScript, declaring a variable as <code>const</code> only prevents reassignment, not modification.
In Rust, only variables declared as <code>mut</code> can be modified</p>
</div>
<h4 id="destructuring">Destructuring </h4>
<p>Rust supports <a href="https://doc.rust-lang.org/rust-by-example/flow_control/match/destructuring.html">destructuring</a>, like JavaScript or Kotlin.</p>
<div>
<pre><code><span><span>function</span> <span>distance</span><span>(</span><span>a<span>,</span> b</span><span>)</span> <span>{</span></span><br><mark>  <span>const</span> <span>{</span> x<span>:</span> x1<span>,</span> y<span>:</span> y1 <span>}</span> <span>=</span> a<span>;</span></mark><br><mark>  <span>const</span> <span>{</span> x<span>:</span> x2<span>,</span> y<span>:</span> y2 <span>}</span> <span>=</span> b<span>;</span></mark><br><span>  <span>return</span> Math<span>.</span><span>sqrt</span><span>(</span></span><br><span>    Math<span>.</span><span>pow</span><span>(</span>x2 <span>-</span> x1<span>,</span> <span>2</span><span>)</span> <span>+</span></span><br><span>      Math<span>.</span><span>pow</span><span>(</span>y2 <span>-</span> y1<span>,</span> <span>2</span><span>)</span></span><br><span>  <span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>distance</span><span>(</span>a<span>:</span> <span>&amp;</span>Point<span>,</span> b<span>:</span> <span>&amp;</span>Point<span>)</span> <span>-&gt;</span> f32 <span>{</span></span><br><mark>    <span>let</span> Point <span>{</span> x<span>:</span> x1<span>,</span> y<span>:</span> y1 <span>}</span> <span>=</span> a<span>;</span></mark><br><mark>    <span>let</span> Point <span>{</span> x<span>:</span> x2<span>,</span> y<span>:</span> y2 <span>}</span> <span>=</span> b<span>;</span></mark><br><span>    <span>(</span><span>(</span>x2 <span>-</span> x1<span>)</span><span>.</span><span>powf</span><span>(</span><span>2.0</span><span>)</span> <span>+</span> <span>(</span>y2 <span>-</span> y1<span>)</span><span>.</span><span>powf</span><span>(</span><span>2.0</span><span>)</span><span>)</span><span>.</span><span>sqrt</span><span>(</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>struct</span> Point <span>{</span></span><br><span>    x<span>:</span> f32<span>,</span></span><br><span>    y<span>:</span> f32<span>,</span></span><br><span><span>}</span></span></code></pre>
<p>More examples can be found in <a href="https://github.com/nrc/r4cppp/blob/master/destructuring.md">this section</a> from the <em>Rust for C++ programmers</em> guide</p>
</div>
<h3 id="functions">Functions </h3>
<p>Functions are basically the same as in C, Java, Go or TypeScript: They have a name, zero or more parameters and a return type.</p>
<div>
<pre><code><span><span>void</span> <span>log</span><span>(</span><span>char</span><span>*</span> message<span>)</span> <span>{</span></span><br><span>    <span>printf</span><span>(</span><span>"INFO %s\n"</span><span>,</span> message<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>log</span><span>(</span>message<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> <span>(</span><span>)</span> <span>{</span></span><br><span>    <span>println!</span><span>(</span><span>"INFO {}"</span><span>,</span> message<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>The <em>unit</em> type <code>()</code> (<em>void</em> in some languages) is the default return type when no type is given for a function.
It could be omitted in this example, like <code>fn log(message: &amp;str) { ... }</code></p>
</div>
<p>In Rust, functions are expressions, which means the last statement is also the return value (like in Ruby). This is a bit like implicit return, but <a href="https://users.rust-lang.org/t/explicit-and-implicit-return-in-functions/17089">not exactly</a>. The <a href="https://doc.rust-lang.org/1.0.0/style/README.html">official style</a> is to only use <code>return</code> for early returns.</p>
<div>
<pre><code><span><span>public</span> <span>static</span> <span>int</span> <span>add</span><span>(</span><span>int</span> a<span>,</span> <span>int</span> b<span>)</span> <span>{</span></span><br><span>    <span>return</span> a <span>+</span> b<span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>add</span><span>(</span>a<span>:</span> i32<span>,</span> b<span>:</span> i32<span>)</span> <span>-&gt;</span> i32 <span>{</span></span><br><span>    a <span>+</span> b</span><br><span><span>}</span></span></code></pre>
<p>Note that there is no semicolon in the Rust function, otherwise it would return <em>void</em></p>
</div>
<p>Rust currently has <a href="https://internals.rust-lang.org/t/pre-rfc-named-arguments/3831">no named arguments</a> or default arguments (like Python and TypeScript) and does not allow method overloading (like C++, Java or TypeScript).</p>
<h4 id="inner-functions">Inner functions </h4>
<p>Rust also supports inner functions.</p>
<div>
<pre><code><span><span>const</span> <span>RE</span> <span>=</span> <span>/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/</span><span>;</span></span><br><span></span><br><span><span>function</span> <span>isValidRange</span><span>(</span><span>start<span>,</span> end</span><span>)</span> <span>{</span></span><br><span>  <span>function</span> <span>isValid</span><span>(</span><span>date</span><span>)</span> <span>{</span></span><br><span>    <span>return</span> date <span>&amp;&amp;</span> date<span>.</span><span>match</span><span>(</span><span>RE</span><span>)</span><span>;</span></span><br><span>  <span>}</span></span><br><span></span><br><span>  <span>return</span> <span>isValid</span><span>(</span>start<span>)</span> <span>&amp;&amp;</span> <span>isValid</span><span>(</span>end<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>use</span> regex<span>::</span>Regex<span>;</span></span><br><span></span><br><span><span>const</span> RE<span>:</span> <span>&amp;</span>str <span>=</span> <span>r"^[0-9]{4}-[0-9]{2}-[0-9]{2}$"</span><span>;</span></span><br><span></span><br><span><span>fn</span> <span>is_valid_range</span><span>(</span>start<span>:</span> <span>&amp;</span>str<span>,</span> end<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> bool <span>{</span></span><br><span>    <span>fn</span> <span>is_valid</span><span>(</span>date<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> bool <span>{</span></span><br><span>        <span>!</span>date<span>.</span><span>is_empty</span><span>(</span><span>)</span></span><br><span>            <span>&amp;&amp;</span> Regex<span>::</span><span>new</span><span>(</span>RE<span>)</span></span><br><span>                <span>.</span><span>unwrap</span><span>(</span><span>)</span></span><br><span>                <span>.</span><span>is_match</span><span>(</span>date<span>)</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>is_valid</span><span>(</span>start<span>)</span> <span>&amp;&amp;</span> <span>is_valid</span><span>(</span>end<span>)</span></span><br><span><span>}</span></span></code></pre>
<p>Note that <code>Regex</code> is an <a href="https://docs.rs/regex/">external crate</a> and not part of Rustâ€™s standard library</p>
</div>
<h4 id="extension-methods">Extension methods </h4>
<p>Rust (like <a href="https://kotlinlang.org/docs/reference/extensions.html">Kotlin</a>) also supports <a href="https://doc.rust-lang.org/1.26.0/book/second-edition/ch19-03-advanced-traits.html">extension methods</a>, so the previous example could be rewritten using extensions.</p>
<div>
<pre><code><span><span>typealias</span> Range <span>=</span> Pair<span>&lt;</span>String<span>,</span> String<span>&gt;</span></span><br><span></span><br><span><span>fun</span> Range<span>.</span><span>isValid</span><span>(</span><span>)</span><span>:</span> Boolean <span>{</span></span><br><span>    <span>val</span> <span>(</span>start<span>,</span> end<span>)</span> <span>=</span> <span>this</span></span><br><span>    <span>return</span> start<span>.</span><span>isNotEmpty</span><span>(</span><span>)</span> <span>&amp;&amp;</span> end<span>.</span><span>isNotEmpty</span><span>(</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>object</span> Main <span>{</span></span><br><span>    <span>@JvmStatic</span></span><br><span>    <span>fun</span> <span>main</span><span>(</span>args<span>:</span> Array<span>&lt;</span>String<span>&gt;</span><span>)</span> <span>{</span></span><br><span>        <span>val</span> range <span>=</span> <span>Range</span><span>(</span><span>"2020-01-01"</span><span>,</span> <span>"2020-12-31"</span><span>)</span></span><br><span>        <span>if</span> <span>(</span>range<span>.</span><span>isValid</span><span>(</span><span>)</span><span>)</span> <span>{</span></span><br><span>            <span>println</span><span>(</span><span>"Range is valid!"</span><span>)</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>type</span> Range<span>&lt;</span><span>'r</span><span>&gt;</span> <span>=</span> <span>(</span><span>&amp;</span><span>'r</span> str<span>,</span> <span>&amp;</span><span>'r</span> str<span>)</span><span>;</span></span><br><span></span><br><span><span>trait</span> IsValid <span>{</span></span><br><span>    <span>fn</span> <span>is_valid</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> bool<span>;</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span><span>&lt;</span><span>'r</span><span>&gt;</span> IsValid <span>for</span> Range<span>&lt;</span><span>'r</span><span>&gt;</span> <span>{</span></span><br><span>    <span>fn</span> <span>is_valid</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> bool <span>{</span></span><br><span>        <span>let</span> <span>(</span>start<span>,</span> end<span>)</span> <span>=</span> <span>&amp;</span><span>self</span><span>;</span></span><br><span>        <span>!</span>start<span>.</span><span>is_empty</span><span>(</span><span>)</span> <span>&amp;&amp;</span> <span>!</span>end<span>.</span><span>is_empty</span><span>(</span><span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> range <span>=</span> <span>(</span><span>"2020-01-01"</span><span>,</span> <span>"2020-12-31"</span><span>)</span><span>;</span></span><br><span>    <span>if</span> range<span>.</span><span>is_valid</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>println!</span><span>(</span><span>"Range is valid!"</span><span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<p>In Rust, extension methods are added by implementing a trait.
When there is only one method, itâ€™s common to name the trait like the method (<code>IsValid</code>).
The <code>'r</code> denotes a lifetime, for more information, see
<a href="https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html">this section from the Rust book</a></p>
</div>
<h4 id="closures-(lambdas)">Closures (lambdas) </h4>
<p>Rust supports <a href="https://doc.rust-lang.org/rust-by-example/fn/closures.html">closures</a>
(also called <em>Lambdas</em>, <em>arrow functions</em> or <em>anonymous functions</em> in other languages).</p>
<p>When accessing variables from outside the closure, Rust is more strict than JavaScript or Java, see <a href="https://doc.rust-lang.org/rust-by-example/fn/closures/capture.html">capturing</a> for more details.</p>
<div>
<pre><code><span><span>function</span> <span>findEmails</span><span>(</span><span>list</span><span>)</span> <span>{</span></span><br><span>  <span>return</span> list<span>.</span><span>filter</span><span>(</span></span><br><mark>    <span>s</span> <span>=&gt;</span> s <span>&amp;&amp;</span> s<span>.</span><span>includes</span><span>(</span><span>"@"</span><span>)</span></mark><br><span>  <span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>find_emails</span><span>(</span>list<span>:</span> Vec<span>&lt;</span>String<span>&gt;</span><span>)</span> <span>-&gt;</span> Vec<span>&lt;</span>String<span>&gt;</span> <span>{</span></span><br><span>    list<span>.</span><span>into_iter</span><span>(</span><span>)</span></span><br><mark>        <span>.</span><span>filter</span><span>(</span><span>|</span>s<span>|</span> s<span>.</span><span>contains</span><span>(</span><span>"@"</span><span>)</span><span>)</span></mark><br><span>        <span>.</span><span>collect</span><span>(</span><span>)</span></span><br><span><span>}</span></span></code></pre>
<p>For more filter examples, see <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.filter">this section</a> from the documentation</p>
</div>
<h3 id="expressions">Expressions </h3>
<p>In Rust, almost everything is an expression, like in Kotlin and different from JavaScript or Java. You can directly assign the result of an <code>if</code> statement to a variable, for example.</p>
<div>
<pre><code><span><span>function</span> <span>getLogLevel</span><span>(</span><span>)</span> <span>{</span></span><br><span>  <span>let</span> level <span>=</span> process<span>.</span>env<span>.</span><span>TRACE</span></span><br><span>    <span>?</span> <span>"trace"</span></span><br><span>    <span>:</span> process<span>.</span>env<span>.</span><span>DEBUG</span></span><br><span>    <span>?</span> <span>"debug"</span></span><br><span>    <span>:</span> <span>"info"</span><span>;</span></span><br><span></span><br><span>  level <span>=</span></span><br><span>    level <span>===</span> <span>"trace"</span></span><br><span>      <span>?</span> <span>0</span></span><br><span>      <span>:</span> level <span>===</span> <span>"debug"</span></span><br><span>      <span>?</span> <span>1</span></span><br><span>      <span>:</span> <span>2</span><span>;</span></span><br><span></span><br><span>  console<span>.</span><span>log</span><span>(</span><span>"using log level"</span><span>,</span> level<span>)</span><span>;</span></span><br><span></span><br><span>  <span>return</span> level<span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>get_log_level</span><span>(</span><span>)</span> <span>-&gt;</span> u32 <span>{</span></span><br><span>    <span>let</span> level <span>=</span> <span>if</span> std<span>::</span>env<span>::</span><span>var</span><span>(</span><span>"TRACE"</span><span>)</span><span>.</span><span>is_ok</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>"trace"</span></span><br><span>    <span>}</span> <span>else</span> <span>if</span> std<span>::</span>env<span>::</span><span>var</span><span>(</span><span>"DEBUG"</span><span>)</span><span>.</span><span>is_ok</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>"debug"</span></span><br><span>    <span>}</span> <span>else</span> <span>{</span></span><br><span>        <span>"info"</span></span><br><span>    <span>}</span><span>;</span></span><br><span></span><br><span>    <span>let</span> level <span>=</span> <span>match</span> level <span>{</span></span><br><span>        <span>"trace"</span> <span>=&gt;</span> <span>0</span><span>,</span></span><br><span>        <span>"debug"</span> <span>=&gt;</span> <span>1</span><span>,</span></span><br><span>        _ <span>=&gt;</span> <span>2</span><span>,</span></span><br><span>    <span>}</span><span>;</span></span><br><span></span><br><span>    <span>println!</span><span>(</span><span>"using log level {}"</span><span>,</span> level<span>)</span><span>;</span></span><br><span></span><br><span>    level</span><br><span><span>}</span></span></code></pre>
<p>The Rust code uses <a href="https://doc.rust-lang.org/rust-by-example/flow_control/match.html">match</a>, which is like <code>switch</code> in Java or JavaScript except that itâ€™s an expression and provides <a href="https://doc.rust-lang.org/1.5.0/book/patterns.html">more flexibility</a>. Unless many other languages, Rust allows <a href="https://doc.rust-lang.org/rust-by-example/variable_bindings/scope.html">variable shadowing</a> for local variables (<code>level</code> in this example)</p>
</div>
<h3 id="structs-(classes)">Structs (classes) </h3>
<p>Rust does <a href="https://users.rust-lang.org/t/why-not-just-add-classes/4618">not have full support</a> for classes like Java or TypeScript, but instead offers <em>structs</em> (similar to structs in C).
These are like data containers with methods, but they donâ€™t support all of the object oriented concepts, like inheritance.</p>
<div>
<pre><code><span><span>public</span> <span>class</span> <span>HttpClient</span> <span>{</span></span><br><span>    <span>private</span> <span>final</span> <span>ClientImpl</span> clientImpl<span>;</span></span><br><span></span><br><span>    <span>public</span> <span>HttpClient</span><span>(</span><span>)</span> <span>{</span></span><br><span>        clientImpl <span>=</span> <span>new</span> <span>ClientImpl</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>public</span> <span>String</span> <span>get</span><span>(</span><span>String</span> url<span>)</span> <span>{</span></span><br><span>        <span>return</span> clientImpl<span>.</span><span>newRequest</span><span>(</span><span>)</span></span><br><span>            <span>.</span><span>get</span><span>(</span>url<span>)</span><span>.</span><span>asString</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span></span><br><span>    <span>HttpClient</span> httpClient <span>=</span> <span>new</span> <span>HttpClient</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>httpClient</span><br><span>        <span>.</span><span>get</span><span>(</span><span>"https://example.com/"</span><span>)</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>pub</span> <span>struct</span> HttpClient <span>{</span></span><br><span>    client_impl<span>:</span> ClientImpl<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span> HttpClient <span>{</span></span><br><span>    <span>pub</span> <span>fn</span> <span>new</span><span>(</span><span>)</span> <span>-&gt;</span> HttpClient <span>{</span></span><br><span>        HttpClient <span>{</span></span><br><span>            client_impl<span>:</span> ClientImpl <span>{</span><span>}</span><span>,</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>pub</span> <span>fn</span> <span>get</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> url<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> String <span>{</span></span><br><span>        <span>self</span><span>.</span>client_impl<span>.</span><span>new_request</span><span>(</span><span>)</span></span><br><span>            <span>.</span><span>get</span><span>(</span>url<span>)</span></span><br><span>            <span>.</span><span>as_string</span><span>(</span><span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> http_client <span>=</span> HttpClient<span>::</span><span>new</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>println!</span><span>(</span><span>"{}"</span><span>,</span></span><br><span>        http_client<span>.</span><span>get</span><span>(</span><span>"https://example.com/"</span><span>)</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>In Java, mutability is given on a field level, here <code>clientImpl</code> is immutable.
In Rust, the mutability modifier is set on the instance variable and not per field, so you cannot have mutable and immutable fields in the same struct (see the <a href="https://doc.rust-lang.org/book/ch15-05-interior-mutability.html">Interior Mutability Pattern</a>)</p>
</div>
<p>Methods do not have implicit access to <em>this</em>, as in Java or JavaScript, so you need to pass an explicit argument named <code>self</code>, like in Python. Methods without this parameter are called <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions">associated functions</a> (they are called <em>static methods</em> in some languages).</p>
<p>In Rust, there is no constructor, structs are created similarly to objects in JavaScript. For cases where constructor logic is required, there is a convention to create an associated function (static method) named <code>new</code>, which will return the constructed object instance.</p>
<h3 id="traits-(interfaces)">Traits (interfaces) </h3>
<p>The most similar thing to interfaces in Rust are <em>traits</em>.</p>
<div>
<pre><code><span><span>interface</span> Named <span>{</span></span><br><span>    <span>fun</span> <span>name</span><span>(</span><span>)</span><span>:</span> String</span><br><span><span>}</span></span><br><span></span><br><span><span>data</span> <span>class</span> <span>User</span><span>(</span></span><br><span>    <span>val</span> id<span>:</span> Int<span>,</span></span><br><span>    <span>val</span> name<span>:</span> String</span><br><span><span>)</span> <span>:</span> Named <span>{</span></span><br><span>    <span>override</span> <span>fun</span> <span>name</span><span>(</span><span>)</span><span>:</span> String <span>{</span></span><br><span>        <span>return</span> <span>this</span><span>.</span>name</span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>pub</span> <span>trait</span> Named <span>{</span></span><br><span>    <span>fn</span> <span>name</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>&amp;</span>String<span>;</span></span><br><span><span>}</span></span><br><span></span><br><span><span>pub</span> <span>struct</span> User <span>{</span></span><br><span>    <span>pub</span> id<span>:</span> i32<span>,</span></span><br><span>    <span>pub</span> name<span>:</span> String<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span> Named <span>for</span> User <span>{</span></span><br><span>    <span>fn</span> <span>name</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>&amp;</span>String <span>{</span></span><br><span>        <span>return</span> <span>&amp;</span><span>self</span><span>.</span>name<span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
</div>
<p>Rust is mostly a static language, so some things that other language will do during runtime, Rust will do during compile time, when possible. Interfaces are usually used for <a href="https://en.wikipedia.org/wiki/Dynamic_dispatch">dynamic dispatch</a> and if you want to use traits in a similar way, see this chapter about <a href="https://doc.rust-lang.org/1.8.0/book/trait-objects.html">static and dynamic dispatch</a> and <a href="https://blog.rust-lang.org/2015/05/11/traits.html">this blog post</a>.</p>
<h4 id="default-methods">Default methods </h4>
<p>Traits also support default methods, like interfaces in Java or Kotlin.</p>
<h4 id="associated-functions">Associated functions </h4>
<p>In Rust, traits can also have associated functions, for example <code>from_str</code> in <code>std::str::FromStr</code> (section <a href="https://rust-lang-nursery.github.io/rust-cookbook/text/string_parsing.html">string parsing</a> in the Rust Cookbook)</p>
<div>
<pre><code><span><span>interface</span> FromList<span>&lt;</span>T<span>&gt;</span> <span>{</span></span><br><span>    <span>fun</span> <span>fromList</span><span>(</span>list<span>:</span> List<span>&lt;</span>Int<span>&gt;</span><span>)</span><span>:</span> T<span>?</span></span><br><span><span>}</span></span><br><span></span><br><span><span>data</span> <span>class</span> <span>MyPoint</span><span>(</span><span>val</span> x<span>:</span> Int<span>,</span> <span>val</span> y<span>:</span> Int<span>)</span> <span>{</span></span><br><span>    <span>companion</span> <span>object</span> <span>:</span> FromList<span>&lt;</span>MyPoint<span>&gt;</span> <span>{</span></span><br><span>        <span>override</span> <span>fun</span> <span>fromList</span><span>(</span>list<span>:</span> List<span>&lt;</span>Int<span>&gt;</span><span>)</span><span>:</span></span><br><span>                MyPoint<span>?</span> <span>{</span></span><br><span>            <span>return</span> <span>when</span> <span>(</span>list<span>.</span>size<span>)</span> <span>{</span></span><br><span>                <span>2</span> <span>-&gt;</span> <span>MyPoint</span><span>(</span>list<span>[</span><span>0</span><span>]</span><span>,</span> list<span>[</span><span>1</span><span>]</span><span>)</span></span><br><span>                <span>else</span> <span>-&gt;</span> <span>null</span></span><br><span>            <span>}</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>object</span> Main <span>{</span></span><br><span>    <span>@JvmStatic</span></span><br><span>    <span>fun</span> <span>main</span><span>(</span>args<span>:</span> Array<span>&lt;</span>String<span>&gt;</span><span>)</span> <span>{</span></span><br><span>        <span>val</span> point <span>=</span> MyPoint<span>.</span><span>fromList</span><span>(</span><span>listOf</span><span>(</span><span>100</span><span>,</span> <span>200</span><span>)</span><span>)</span></span><br><span>        <span>println</span><span>(</span>point<span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span></code></pre>
<pre><code><span><span>trait</span> FromList<span>&lt;</span>T<span>&gt;</span> <span>{</span></span><br><span>    <span>fn</span> <span>from_list</span><span>(</span>list<span>:</span> <span>&amp;</span>Vec<span>&lt;</span>i32<span>&gt;</span><span>)</span> <span>-&gt;</span> Option<span>&lt;</span>T<span>&gt;</span><span>;</span></span><br><span><span>}</span></span><br><span></span><br><span><span>struct</span> MyPoint <span>{</span></span><br><span>    x<span>:</span> i32<span>,</span></span><br><span>    y<span>:</span> i32<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span> FromList<span>&lt;</span><span>Self</span><span>&gt;</span> <span>for</span> MyPoint <span>{</span></span><br><span>    <span>fn</span> <span>from_list</span><span>(</span>list<span>:</span> <span>&amp;</span>Vec<span>&lt;</span>i32<span>&gt;</span><span>)</span> <span>-&gt;</span> Option<span>&lt;</span><span>Self</span><span>&gt;</span> <span>{</span></span><br><span>        <span>match</span> list<span>.</span><span>len</span><span>(</span><span>)</span> <span>{</span></span><br><span>            <span>2</span> <span>=&gt;</span> <span>Some</span><span>(</span>MyPoint <span>{</span></span><br><span>                x<span>:</span> list<span>[</span><span>0</span><span>]</span><span>,</span></span><br><span>                y<span>:</span> list<span>[</span><span>1</span><span>]</span><span>,</span></span><br><span>            <span>}</span><span>)</span><span>,</span></span><br><span>            _ <span>=&gt;</span> None<span>,</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> point <span>=</span></span><br><span>        MyPoint<span>::</span><span>from_list</span><span>(</span><span>&amp;</span><span>vec!</span><span>[</span><span>100</span><span>,</span> <span>200</span><span>]</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>println!</span><span>(</span><span>"({}, {})"</span><span>,</span> point<span>.</span>x<span>,</span> point<span>.</span>y<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>For more information about the <code>Option</code> type, see the <a href="#null-values">Null values section</a> below.
The keyword <code>Self</code> (upper case) can be used to reference the current type</p>
</div>
<h3 id="enums">Enums </h3>
<p>Rust supports <a href="https://doc.rust-lang.org/std/keyword.enum.html">enums</a>,
like Java or Kotlin, but with more flexibility.
The Rust enums offer more than in C++ or TypeScript, as they are not merely a
list of constants, but more like <a href="https://en.wikipedia.org/wiki/Union_type">unions</a>.</p>
<div>
<pre><code><span><span>enum</span> <span>UserRole</span> <span>{</span></span><br><span>    <span>RO</span><span>(</span><span>"read-only"</span><span>)</span><span>,</span> <span>USER</span><span>(</span><span>"user"</span><span>)</span><span>,</span></span><br><span>    <span>ADMIN</span><span>(</span><span>"administrator"</span><span>)</span><span>;</span></span><br><span></span><br><span>    <span>private</span> <span>final</span> <span>String</span> name<span>;</span></span><br><span></span><br><span>    <span>UserRole</span><span>(</span><span>String</span> name<span>)</span> <span>{</span></span><br><span>        <span>this</span><span>.</span>name <span>=</span> name<span>;</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>String</span> <span>getName</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>return</span> name<span>;</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>boolean</span> <span>isAccessAllowed</span><span>(</span><span>String</span> httpMethod<span>)</span> <span>{</span></span><br><span>        <span>switch</span> <span>(</span>httpMethod<span>)</span> <span>{</span></span><br><span>            <span>case</span> <span>"HEAD"</span><span>:</span></span><br><span>            <span>case</span> <span>"GET"</span><span>:</span></span><br><span>                <span>return</span> <span>true</span><span>;</span></span><br><span></span><br><span>            <span>case</span> <span>"POST"</span><span>:</span></span><br><span>            <span>case</span> <span>"PUT"</span><span>:</span></span><br><span>                <span>return</span> <span>this</span> <span>==</span> USER <span>||</span> <span>this</span> <span>==</span> ADMIN<span>;</span></span><br><span></span><br><span>            <span>case</span> <span>"DELETE"</span><span>:</span></span><br><span>                <span>return</span> <span>this</span> <span>==</span> ADMIN<span>;</span></span><br><span></span><br><span>            <span>default</span><span>:</span></span><br><span>                <span>return</span> <span>false</span><span>;</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>class</span> <span>Main</span> <span>{</span></span><br><span>    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span></span><br><span>        <span>UserRole</span> role <span>=</span> <span>UserRole</span><span>.</span>RO<span>;</span></span><br><span>        <span>if</span> <span>(</span>role<span>.</span><span>isAccessAllowed</span><span>(</span><span>"POST"</span><span>)</span><span>)</span> <span>{</span></span><br><span>            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"OK: "</span></span><br><span>                <span>+</span> role<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span></span><br><span>        <span>}</span> <span>else</span> <span>{</span></span><br><span>            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"Access denied: "</span></span><br><span>                <span>+</span> role<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>#[derive(PartialEq)]</span></span><br><span><span>enum</span> UserRole <span>{</span></span><br><span>    RO<span>,</span></span><br><span>    USER<span>,</span></span><br><span>    ADMIN<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span> UserRole <span>{</span></span><br><span>    <span>fn</span> <span>name</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>&amp;</span>str <span>{</span></span><br><span>        <span>match</span> <span>*</span><span>self</span> <span>{</span></span><br><span>            UserRole<span>::</span>RO <span>=&gt;</span> <span>"read-only"</span><span>,</span></span><br><span>            UserRole<span>::</span>USER <span>=&gt;</span> <span>"user"</span><span>,</span></span><br><span>            UserRole<span>::</span>ADMIN <span>=&gt;</span> <span>"administrator"</span><span>,</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span></span><br><span>    <span>fn</span> <span>is_access_allowed</span><span>(</span></span><br><span>        <span>&amp;</span><span>self</span><span>,</span></span><br><span>        http_method<span>:</span> <span>&amp;</span>str<span>,</span></span><br><span>    <span>)</span> <span>-&gt;</span> bool <span>{</span></span><br><span>        <span>match</span> http_method <span>{</span></span><br><span>            <span>"HEAD"</span> <span>|</span> <span>"GET"</span> <span>=&gt;</span> <span>true</span><span>,</span></span><br><span>            <span>"POST"</span> <span>|</span> <span>"PUT"</span> <span>=&gt;</span> <span>{</span></span><br><span>                <span>*</span><span>self</span> <span>==</span> UserRole<span>::</span>USER</span><br><span>                    <span>||</span> <span>*</span><span>self</span> <span>==</span> UserRole<span>::</span>ADMIN</span><br><span>            <span>}</span></span><br><span>            <span>"DELETE"</span> <span>=&gt;</span> <span>*</span><span>self</span> <span>==</span> UserRole<span>::</span>ADMIN<span>,</span></span><br><span>            _ <span>=&gt;</span> <span>false</span><span>,</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> role <span>=</span> UserRole<span>::</span>RO<span>;</span></span><br><span>    <span>if</span> role<span>.</span><span>is_access_allowed</span><span>(</span><span>"POST"</span><span>)</span> <span>{</span></span><br><span>        <span>println!</span><span>(</span><span>"OK: {}"</span><span>,</span> role<span>.</span><span>name</span><span>(</span><span>)</span><span>)</span><span>;</span></span><br><span>    <span>}</span> <span>else</span> <span>{</span></span><br><span>        <span>println!</span><span>(</span><span>"Access denied: {}"</span><span>,</span> role<span>.</span><span>name</span><span>(</span><span>)</span><span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<p>Rust does not support <a href="https://stackoverflow.com/questions/36928569/enums-with-constant-values-in-rust">constants in enums</a>,
so we need to use a <em>match</em> in the <code>name</code> method. The enum matches are checked at compile time,
so when all enum variants are used, there is no need to have a <em>default</em> branch.</p>
<p>For more information about the <code>#[derive(PartialEq)]</code> line, see the section about <a href="#attributes-(annotations)">Attributes</a></p>
</div>
<h4 id="associated-values">Associated values </h4>
<p>Rust enums also support associated values, which means they are not constant,
but instead allow the creation of enum variant instances with specific values.</p>
<div>
<pre><code><span><span>sealed</span> <span>class</span> GitCommand <span>{</span></span><br><span>    <span>abstract</span> <span>fun</span> <span>execute</span><span>(</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>object</span> Status <span>:</span> <span>GitCommand</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>override</span> <span>fun</span> <span>execute</span><span>(</span><span>)</span> <span>=</span></span><br><span>        <span>executeCommand</span><span>(</span><span>listOf</span><span>(</span><span>"status"</span><span>)</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>class</span> <span>Checkout</span><span>(</span></span><br><span>    <span>private</span> <span>val</span> branch<span>:</span> String</span><br><span><span>)</span> <span>:</span> <span>GitCommand</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>override</span> <span>fun</span> <span>execute</span><span>(</span><span>)</span> <span>=</span></span><br><span>        <span>executeCommand</span><span>(</span><span>listOf</span><span>(</span><span>"checkout"</span><span>,</span> branch<span>)</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>class</span> <span>Add</span><span>(</span></span><br><span>    <span>private</span> <span>val</span> files<span>:</span> List<span>&lt;</span>String<span>&gt;</span></span><br><span><span>)</span> <span>:</span> <span>GitCommand</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>override</span> <span>fun</span> <span>execute</span><span>(</span><span>)</span> <span>=</span></span><br><span>        <span>executeCommand</span><span>(</span><span>listOf</span><span>(</span><span>"add"</span><span>)</span> <span>+</span> files<span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>class</span> <span>Log</span><span>(</span></span><br><span>    <span>private</span> <span>val</span> decorate<span>:</span> Boolean<span>,</span></span><br><span>    <span>private</span> <span>val</span> patch<span>:</span> Boolean</span><br><span><span>)</span> <span>:</span> <span>GitCommand</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>override</span> <span>fun</span> <span>execute</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>val</span> args <span>=</span> <span>mutableListOf</span><span>(</span><span>"log"</span><span>)</span></span><br><span>        <span>if</span> <span>(</span>decorate<span>)</span> <span>{</span></span><br><span>            args<span>.</span><span>add</span><span>(</span><span>"--decorate"</span><span>)</span></span><br><span>        <span>}</span></span><br><span>        <span>if</span> <span>(</span>patch<span>)</span> <span>{</span></span><br><span>            args<span>.</span><span>add</span><span>(</span><span>"--patch"</span><span>)</span></span><br><span>        <span>}</span></span><br><span>        <span>executeCommand</span><span>(</span>args<span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fun</span> <span>executeCommand</span><span>(</span>args<span>:</span> List<span>&lt;</span>String<span>&gt;</span><span>)</span> <span>{</span></span><br><span>    <span>val</span> redirect <span>=</span> ProcessBuilder<span>.</span>Redirect<span>.</span>INHERIT</span><br><span>    <span>ProcessBuilder</span><span>(</span><span>listOf</span><span>(</span><span>"git"</span><span>)</span> <span>+</span> args<span>)</span></span><br><span>        <span>.</span><span>redirectInput</span><span>(</span>redirect<span>)</span></span><br><span>        <span>.</span><span>redirectOutput</span><span>(</span>redirect<span>)</span></span><br><span>        <span>.</span><span>redirectError</span><span>(</span>redirect<span>)</span></span><br><span>        <span>.</span><span>start</span><span>(</span><span>)</span></span><br><span>        <span>.</span><span>waitFor</span><span>(</span><span>)</span></span><br><span><span>}</span></span><br><span></span><br><span><span>object</span> Main <span>{</span></span><br><span>    <span>@JvmStatic</span></span><br><span>    <span>fun</span> <span>main</span><span>(</span>args<span>:</span> Array<span>&lt;</span>String<span>&gt;</span><span>)</span> <span>{</span></span><br><span>        <span>val</span> command <span>=</span></span><br><span>            <span>Log</span><span>(</span>decorate <span>=</span> <span>false</span><span>,</span> patch <span>=</span> <span>true</span><span>)</span></span><br><span>        command<span>.</span><span>execute</span><span>(</span><span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>use</span> std<span>::</span>process<span>::</span>Command<span>;</span></span><br><span></span><br><span><span>pub</span> <span>enum</span> GitCommand<span>&lt;</span><span>'g</span><span>&gt;</span> <span>{</span></span><br><span>    STATUS<span>,</span></span><br><span>    <span>CHECKOUT</span><span>(</span><span>&amp;</span><span>'g</span> str<span>)</span><span>,</span></span><br><span>    <span>ADD</span><span>(</span>Vec<span>&lt;</span><span>&amp;</span><span>'g</span> str<span>&gt;</span><span>)</span><span>,</span></span><br><span>    LOG <span>{</span> decorate<span>:</span> bool<span>,</span> patch<span>:</span> bool <span>}</span><span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span><span>&lt;</span><span>'g</span><span>&gt;</span> GitCommand<span>&lt;</span><span>'g</span><span>&gt;</span> <span>{</span></span><br><span>    <span>fn</span> <span>execute</span><span>(</span><span>self</span><span>)</span> <span>{</span></span><br><span>        <span>let</span> args<span>:</span> Vec<span>&lt;</span><span>&amp;</span>str<span>&gt;</span> <span>=</span> <span>match</span> <span>self</span> <span>{</span></span><br><span>            GitCommand<span>::</span>STATUS <span>=&gt;</span> <span>vec!</span><span>[</span><span>"status"</span><span>]</span><span>,</span></span><br><span>            GitCommand<span>::</span><span>CHECKOUT</span><span>(</span>branch<span>)</span> <span>=&gt;</span> <span>{</span></span><br><span>                <span>vec!</span><span>[</span><span>"checkout"</span><span>,</span> branch<span>]</span></span><br><span>            <span>}</span></span><br><span>            GitCommand<span>::</span><span>ADD</span><span>(</span>files<span>)</span> <span>=&gt;</span> <span>{</span></span><br><span>                <span>[</span><span>vec!</span><span>[</span><span>"add"</span><span>]</span><span>,</span> files<span>]</span><span>.</span><span>concat</span><span>(</span><span>)</span></span><br><span>            <span>}</span><span>,</span></span><br><span>            GitCommand<span>::</span>LOG <span>{</span></span><br><span>                decorate<span>,</span></span><br><span>                patch<span>,</span></span><br><span>            <span>}</span> <span>=&gt;</span> <span>{</span></span><br><span>                <span>let</span> <span>mut</span> args <span>=</span> <span>vec!</span><span>[</span><span>"log"</span><span>]</span><span>;</span></span><br><span>                <span>if</span> decorate <span>{</span></span><br><span>                    args<span>.</span><span>push</span><span>(</span><span>"--decorate"</span><span>)</span></span><br><span>                <span>}</span></span><br><span>                <span>if</span> patch <span>{</span></span><br><span>                    args<span>.</span><span>push</span><span>(</span><span>"--patch"</span><span>)</span></span><br><span>                <span>}</span></span><br><span>                args</span><br><span>            <span>}</span></span><br><span>        <span>}</span><span>;</span></span><br><span>        <span>execute_command</span><span>(</span><span>"git"</span><span>,</span> <span>&amp;</span>args<span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>execute_command</span><span>(</span>command<span>:</span> <span>&amp;</span>str<span>,</span> args<span>:</span> <span>&amp;</span><span>[</span><span>&amp;</span>str<span>]</span><span>)</span> <span>{</span></span><br><span>    Command<span>::</span><span>new</span><span>(</span>command<span>)</span></span><br><span>        <span>.</span><span>args</span><span>(</span>args<span>)</span></span><br><span>        <span>.</span><span>spawn</span><span>(</span><span>)</span></span><br><span>        <span>.</span><span>expect</span><span>(</span><span>"spawn failed!"</span><span>)</span></span><br><span>        <span>.</span><span>wait</span><span>(</span><span>)</span></span><br><span>        <span>.</span><span>expect</span><span>(</span><span>"command failed!"</span><span>)</span><span>;</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> command <span>=</span> GitCommand<span>::</span>LOG <span>{</span></span><br><span>        decorate<span>:</span> <span>false</span><span>,</span></span><br><span>        patch<span>:</span> <span>true</span><span>,</span></span><br><span>    <span>}</span><span>;</span></span><br><span>    command<span>.</span><span>execute</span><span>(</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p><a href="https://kotlinlang.org/docs/reference/sealed-classes.html">Sealed Classes</a> in
Kotlin are similar to Rustâ€™s enums, as they allow the modelling of a closed
type hierarchy</p>
</div>
<p>See <a href="https://doc.rust-lang.org/rust-by-example/custom_types/enum.html">this section about enums</a> for more examples.</p>
<h2 id="concepts">Concepts </h2>
<h3 id="ownership">Ownership </h3>
<p>One thing that is very special about Rust is the way it handles <a href="http://www.cs.uah.edu/~rcoleman/Common/C_Reference/MemoryAlloc.html">memory allocations</a>:
It doesnâ€™t have a <a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">garbage collector</a> (like JavaScript, Java or Go), but the developer does not need to free memory explicitly, either (like in C).
Instead, Rust automatically frees memory when it is no longer in use.
For this mechanism to work, the developer needs to explicitly think about <a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html">ownership</a> of the values the program is using.</p>
<div>
<pre><code><span><span>class</span> <span>User</span> <span>{</span></span><br><span>    <span>private</span> <span>String</span> name<span>;</span></span><br><span></span><br><span>    <span>public</span> <span>User</span><span>(</span><span>String</span> name<span>)</span> <span>{</span></span><br><span>        <span>this</span><span>.</span>name <span>=</span> name<span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span></span><br><span>    <span>String</span> name <span>=</span> <span>"User"</span><span>;</span></span><br><span></span><br><span>    <span>User</span> user1 <span>=</span> <span>new</span> <span>User</span><span>(</span>name<span>)</span><span>;</span></span><br><span>    <span>User</span> user2 <span>=</span> <span>new</span> <span>User</span><span>(</span>name<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>struct</span> User <span>{</span></span><br><span>    name<span>:</span> String<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> name <span>=</span> String<span>::</span><span>from</span><span>(</span><span>"User"</span><span>)</span><span>;</span></span><br><span></span><br><span>    <span>let</span> user1 <span>=</span> User <span>{</span> name <span>}</span><span>;</span></span><br><span>    <span>let</span> user2 <span>=</span> User <span>{</span> name <span>}</span><span>;</span> </span><br><span><span>}</span></span></code></pre>
<p>In Java, the garbage collector will regularly check the object references and when nothing references the <em>User</em> instances anymore, they will be deleted. Once both instances have been detected as unused, the <code>"User"</code> string can also be deleted.</p>
<p>In Rust, values can only be owned by one object at a time: the assignment to <code>user1</code> is OK, because the value will be <em>moved</em> from the <code>name</code> variable to <code>user1</code>. The creation of <code>user2</code>, however, will give a compile error, because the string <code>"User"</code> is now owned by <code>user1</code>, not by <code>name</code>.</p>
</div>
<p>In C, the developer has to make sure that allocated memory is freed when it is no longer needed. This can lead to bugs (<a href="https://en.wikipedia.org/wiki/Memory_leak">memory leaks</a>) and was one of the motivation for Rustâ€™s different approach to managing memory.
While Rust offers protections against it, itâ€™s <a href="https://stackoverflow.com/questions/55553048/is-it-possible-to-cause-a-memory-leak-in-rust">not impossible to have memory leaks</a>.</p>
<div>
<pre><code><span><span>#<span>include</span> <span>&lt;string&gt;</span></span></span><br><span></span><br><span>std<span>::</span>string<span>*</span> <span>get_string</span><span>(</span><span>)</span> <span>{</span></span><br><span>    std<span>::</span>string<span>*</span> string <span>=</span> <span>new</span> std<span>::</span><span>string</span><span>(</span><span>"hello"</span><span>)</span><span>;</span></span><br><span></span><br><span>    <span>delete</span> string<span>;</span></span><br><span></span><br><span>    <span>return</span> string<span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>get_string</span><span>(</span><span>)</span> <span>-&gt;</span> String <span>{</span></span><br><span>    <span>let</span> string <span>=</span> String<span>::</span><span>from</span><span>(</span><span>"hello"</span><span>)</span><span>;</span></span><br><span></span><br><span>    <span>drop</span><span>(</span>string<span>)</span><span>;</span></span><br><span></span><br><span>    <span>return</span> string<span>;</span> </span><br><span><span>}</span></span></code></pre>
<p>In this example, the C++ code has a <a href="https://cwe.mitre.org/data/definitions/416.html">use after free</a> error.
Note that this is only an example, <a href="https://doc.rust-lang.org/std/mem/fn.drop.html">drop</a> is rarely used in Rust code (values will be dropped automatically when they go out of scope)</p>
</div>
<p>Rustâ€™s ownership model also helps when dealing with multi-threaded code.
The compiler keeps track of the values the program is using and makes
sure that the same value is not accessed from multiple threads without proper
locking logic around it.</p>
<div>
<pre><code><span><span>#<span>include</span> <span>&lt;vector&gt;</span></span></span><br><span><span>#<span>include</span> <span>&lt;thread&gt;</span></span></span><br><span></span><br><span><span>int</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    std<span>::</span>vector<span>&lt;</span>std<span>::</span>string<span>&gt;</span> list<span>;</span></span><br><span></span><br><span>    <span>auto</span> f <span>=</span> <span>[</span><span>&amp;</span>list<span>]</span><span>(</span><span>)</span> <span>{</span></span><br><span>        <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>10000</span><span>;</span> i<span>++</span><span>)</span> <span>{</span></span><br><span>            list<span>.</span><span>push_back</span><span>(</span><span>"item 123"</span><span>)</span><span>;</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span><span>;</span></span><br><span></span><br><span>    std<span>::</span>thread <span>t1</span><span>(</span>f<span>)</span><span>;</span></span><br><span>    std<span>::</span>thread <span>t2</span><span>(</span>f<span>)</span><span>;</span></span><br><span></span><br><span>    t1<span>.</span><span>join</span><span>(</span><span>)</span><span>;</span></span><br><span>    t2<span>.</span><span>join</span><span>(</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>use</span> std<span>::</span>thread<span>;</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> <span>mut</span> list <span>=</span> <span>vec!</span><span>[</span><span>]</span><span>;</span></span><br><span></span><br><span>    <span>let</span> f <span>=</span> <span>move</span> <span><span>|</span><span>|</span></span> <span>{</span></span><br><span>        <span>for</span> _ <span>in</span> <span>0</span><span>..</span><span>10000</span> <span>{</span></span><br><span>            list<span>.</span><span>push</span><span>(</span><span>"item 123"</span><span>)</span><span>;</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span><span>;</span></span><br><span></span><br><span>    <span>let</span> t1 <span>=</span> thread<span>::</span><span>spawn</span><span>(</span>f<span>)</span><span>;</span></span><br><span>    <span>let</span> t2 <span>=</span> thread<span>::</span><span>spawn</span><span>(</span>f<span>)</span><span>;</span> </span><br><span></span><br><span>    t1<span>.</span><span>join</span><span>(</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>;</span></span><br><span>    t2<span>.</span><span>join</span><span>(</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>The <code>std::vector</code> class is not thread-safe and the C++ program will compile
without errors, but when running, it will probably crash with an error
like <code>pointer being freed was not allocated</code> or similar. In Rust, the closure <code>f</code> takes
ownership of <code>list</code> (indicated by the <a href="https://doc.rust-lang.org/std/keyword.move.html">move</a> keyword),
thatâ€™s why the compiler gives an error when <code>f</code> is used more than once.</p>
</div>
<h3 id="strings">Strings </h3>
<p>Rust has multiple string types, the most important ones are <a href="https://doc.rust-lang.org/std/str/">str</a> (usually in the form of <code>&amp;str</code>) and <a href="https://doc.rust-lang.org/std/string/">String</a>.</p>
<p>The <code>&amp;str</code> type only references borrowed content, so this is the type that is used for static strings and when referencing string slices.
Like other immutable references, <code>&amp;str</code> values cannot be modified. Use <code>String</code> if you need a modifiable string.</p>
<div>
<pre><code><span><span>const</span> <span>FILE_DATE</span> <span>=</span> <span>"2020-01-01"</span><span>;</span></span><br><span></span><br><span><span>function</span> <span>printCopyright</span><span>(</span><span>)</span> <span>{</span></span><br><span>  <span>const</span> year <span>=</span> <span>FILE_DATE</span><span>.</span><span>substr</span><span>(</span><span>0</span><span>,</span> <span>4</span><span>)</span><span>;</span></span><br><span>  <span>const</span> copyright <span>=</span> <span><span>`</span><span>(C) </span><span><span>${</span>year<span>}</span></span><span>`</span></span><span>;</span></span><br><span>  console<span>.</span><span>log</span><span>(</span>copyright<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>const</span> FILE_DATE<span>:</span> <span>&amp;</span>str <span>=</span> <span>"2020-01-01"</span><span>;</span></span><br><span></span><br><span><span>fn</span> <span>print_copyright</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>let</span> year<span>:</span> <span>&amp;</span>str <span>=</span> <span>&amp;</span>FILE_DATE<span>[</span><span>..</span><span>4</span><span>]</span><span>;</span></span><br><span>    <span>let</span> copyright<span>:</span> String <span>=</span> <span>format!</span><span>(</span><span>"(C) {}"</span><span>,</span> year<span>)</span><span>;</span></span><br><span>    <span>println!</span><span>(</span><span>"{}"</span><span>,</span> copyright<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>See <a href="https://doc.rust-lang.org/rust-by-example/std/str.html">this section about strings</a> for more examples</p>
</div>
<p>The <code>String</code> type is used for dynamically created strings, which can be modified and where the length is not fixed at compile time.</p>
<p>Usually, <code>&amp;str</code> will be used for function parameters and <code>String</code> will be used as return value.</p>
<div>
<pre><code><span><span>public</span> <span>static</span> <span>String</span> <span>repeat</span><span>(</span><span>String</span> s<span>,</span> <span>int</span> count<span>)</span> <span>{</span></span><br><span>    <span>StringBuilder</span> result <span>=</span> <span>new</span> <span>StringBuilder</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> count<span>;</span> i<span>++</span><span>)</span> <span>{</span></span><br><span>        result<span>.</span><span>append</span><span>(</span>s<span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span>    <span>return</span> result<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>repeat</span><span>(</span>s<span>:</span> <span>&amp;</span>str<span>,</span> count<span>:</span> u32<span>)</span> <span>-&gt;</span> String <span>{</span></span><br><span>    <span>let</span> <span>mut</span> result <span>=</span> String<span>::</span><span>new</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>for</span> _ <span>in</span> <span>0</span><span>..</span>count <span>{</span></span><br><span>        result <span>+=</span> s<span>;</span></span><br><span>    <span>}</span></span><br><span>    result</span><br><span><span>}</span></span></code></pre>
<p>This is just an example, Rust already has <a href="https://doc.rust-lang.org/std/string/struct.String.html#method.repeat">String.repeat</a></p>
</div>
<p>For struct fields, usually <code>String</code> should be used, as the value will probably be owned by that struct,
especially when dealing with longer living objects.</p>
<p>For string constants, <code>&amp;'static str</code> can be used for fields instead.</p>
<div>
<pre><code><span><span>data</span> <span>class</span> <span>User</span><span>(</span></span><br><span>    <span>private</span> <span>val</span> source<span>:</span> String<span>,</span></span><br><span>    <span>private</span> <span>val</span> name<span>:</span> String<span>,</span></span><br><span>    <span>private</span> <span>val</span> address<span>:</span> String</span><br><span><span>)</span> <span>{</span></span><br><span>    <span>companion</span> <span>object</span> <span>{</span></span><br><span>        <span>fun</span> <span>fromString</span><span>(</span>string<span>:</span> String<span>)</span><span>:</span> User <span>{</span></span><br><span>            <span>val</span> lines <span>=</span> string<span>.</span><span>lines</span><span>(</span><span>)</span></span><br><span>            <span>return</span> <span>User</span><span>(</span><span>"kotlin-v1.0"</span><span>,</span> lines<span>[</span><span>0</span><span>]</span><span>,</span></span><br><span>                lines<span>[</span><span>1</span><span>]</span><span>)</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>pub</span> <span>struct</span> User <span>{</span></span><br><span>    source<span>:</span> <span>&amp;</span><span>'static</span> str<span>,</span></span><br><span>    name<span>:</span> String<span>,</span></span><br><span>    address<span>:</span> String<span>,</span></span><br><span><span>}</span></span><br><span></span><br><span><span>impl</span> User <span>{</span></span><br><span>    <span>pub</span> <span>fn</span> <span>new</span><span>(</span>s<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> User <span>{</span></span><br><span>        <span>let</span> <span>mut</span> lines <span>=</span> s<span>.</span><span>lines</span><span>(</span><span>)</span><span>;</span></span><br><span>        User <span>{</span></span><br><span>            source<span>:</span> <span>"rust-v1.0"</span><span>,</span></span><br><span>            name<span>:</span> lines<span>.</span><span>next</span><span>(</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>.</span><span>to_owned</span><span>(</span><span>)</span><span>,</span></span><br><span>            address<span>:</span> lines<span>.</span><span>next</span><span>(</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>.</span><span>to_owned</span><span>(</span><span>)</span><span>,</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<p>Note that default field access is <code>private</code> in Rust</p>
</div>
<p>To convert a variable <code>s1</code> of type <code>String</code> to <code>&amp;str</code>, use <code>&amp;s1</code>.</p>
<p>To convert a variable <code>s2</code> of type <code>&amp;str</code> to <code>String</code>, use <code>s2.to_owned()</code> (this allocates new memory and creates a copy of the string).
Sometimes this conversion is also necessary for literals, like <code>"string literal".to_owned()</code>.</p>
<h3 id="null-values">Null values </h3>
<p>Rust does not have a special <code>null</code> value (also called <code>None</code> or <code>nil</code> in some languages). Instead, there is the <a href="https://doc.rust-lang.org/std/option/enum.Option.html">Option</a> enum, which is very similar to the <a href="https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html">Optional</a> type in Java.</p>
<div>
<pre><code><span><span>public</span> <span>static</span> <span>Integer</span> <span>getYear</span><span>(</span><span>String</span> date<span>)</span> <span>{</span></span><br><span>    <span>if</span> <span>(</span>date<span>.</span><span>length</span><span>(</span><span>)</span> <span>&gt;=</span> <span>4</span><span>)</span> <span>{</span></span><br><span>        <span>String</span> s <span>=</span> date<span>.</span><span>substring</span><span>(</span><span>0</span><span>,</span> <span>4</span><span>)</span><span>;</span></span><br><span>        <span>try</span> <span>{</span></span><br><span>            <span>return</span> <span>Integer</span><span>.</span><span>valueOf</span><span>(</span>s<span>)</span><span>;</span></span><br><span>        <span>}</span> <span>catch</span> <span>(</span><span>NumberFormatException</span> e<span>)</span> <span>{</span></span><br><span>            <span>return</span> <span>null</span><span>;</span></span><br><span>        <span>}</span></span><br><span>    <span>}</span> <span>else</span> <span>{</span></span><br><span>        <span>return</span> <span>null</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span></span><br><span>    <span>Integer</span> year <span>=</span> <span>getYear</span><span>(</span><span>"2020-01-01"</span><span>)</span><span>;</span></span><br><span>    <span>if</span> <span>(</span>year <span>!=</span> <span>null</span><span>)</span> <span>{</span></span><br><span>        <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>year<span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>fn</span> <span>get_year</span><span>(</span>date<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> Option<span>&lt;</span>u32<span>&gt;</span> <span>{</span></span><br><span>    <span>if</span> date<span>.</span><span>len</span><span>(</span><span>)</span> <span>&gt;=</span> <span>4</span> <span>{</span></span><br><span>        <span>let</span> s <span>=</span> date<span>[</span><span>..</span><span>4</span><span>]</span><span>;</span></span><br><span>        <span>match</span> s<span>.</span><span>parse</span><span>(</span><span>)</span> <span>{</span></span><br><span>            <span>Ok</span><span>(</span>year<span>)</span> <span>=&gt;</span> <span>Some</span><span>(</span>year<span>)</span><span>,</span></span><br><span>            <span>Err</span><span>(</span>_<span>)</span> <span>=&gt;</span> None</span><br><span>        <span>}</span></span><br><span>    <span>}</span> <span>else</span> <span>{</span></span><br><span>        None</span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>if</span> <span>let</span> <span>Some</span><span>(</span>year<span>)</span> <span>=</span> <span>get_year</span><span>(</span><span>"2020-01-01"</span><span>)</span> <span>{</span></span><br><span>        <span>println!</span><span>(</span><span>"{}"</span><span>,</span> year<span>)</span><span>;</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<p>The <code>Option</code> type is just a regular enum from Rustâ€™s standard library,
with the two entries <code>None</code> and <code>Some</code>.
When returning <code>Option</code>, empty (<code>null</code>) values can be returned as <code>None</code>
and non-empty values need to be wrapped, like <code>Some(year)</code></p>
</div>
<p>To simply check if a value is <code>null</code>, without needing to get the actual
value, <code>is_none()</code> can be used.</p>
<div>
<pre><code><span><span>Integer</span> year <span>=</span> <span>getYear</span><span>(</span><span>""</span><span>)</span><span>;</span></span><br><span><span>if</span> <span>(</span>year <span>==</span> <span>null</span><span>)</span> <span>{</span></span><br><span>    <span>System</span><span>.</span>err<span>.</span><span>println</span><span>(</span><span>"Invalid date given!"</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>let</span> year<span>:</span> Option<span>&lt;</span>u32<span>&gt;</span> <span>=</span> <span>get_year</span><span>(</span><span>""</span><span>)</span><span>;</span></span><br><span><span>if</span> year<span>.</span><span>is_none</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>println!</span><span>(</span><span>"Invalid date given!"</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
</div>
<p>Sometimes itâ€™s useful to run some code only if a value is <code>null</code>,
to ensure a variable has a non-<code>null</code> value.
There are many ways to do it in Rust, but using <code>match</code> offers
the most concise syntax.</p>
<div>
<pre><code><span><span>String</span> url <span>=</span> <span>"https://github.com"</span><span>;</span></span><br><span></span><br><span><span>String</span> content <span>=</span> cache<span>.</span><span>get</span><span>(</span>url<span>)</span><span>;</span></span><br><span><span>if</span> <span>(</span>content <span>==</span> <span>null</span><span>)</span> <span>{</span></span><br><span>    content <span>=</span> <span>loadUrl</span><span>(</span>url<span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>let</span> url <span>=</span> <span>"https://github.com"</span><span>;</span></span><br><span></span><br><span><span>let</span> content <span>=</span> <span>match</span> cache<span>.</span><span>get</span><span>(</span>url<span>)</span> <span>{</span></span><br><span>    <span>Some</span><span>(</span>content<span>)</span> <span>=&gt;</span> content<span>,</span></span><br><span>    None <span>=&gt;</span> <span>load_url</span><span>(</span>url<span>)</span><span>,</span></span><br><span><span>}</span><span>;</span></span></code></pre>
<p>Note that in the Rust code, <code>content</code> is immutable
(to achieve the same in Java, we would need to introduce another local variable or a new method)</p>
</div>
<h3 id="error-handling">Error handling </h3>
<p>Rust does not offer exceptions like C++, Java or JavaScript.
Instead, error conditions are indicated via the methodâ€™s regular return value,
like in C or Go.</p>
<div>
<pre><code><span><span>package</span> main</span><br><span></span><br><span><span>import</span> <span>(</span></span><br><span>    <span>"fmt"</span></span><br><span>    <span>"log"</span></span><br><span>    <span>"strconv"</span></span><br><span><span>)</span></span><br><span></span><br><span><span>func</span> <span>ParsePort</span><span>(</span>port <span>string</span><span>)</span> <span>(</span><span>uint16</span><span>,</span> <span>error</span><span>)</span> <span>{</span></span><br><span>    p<span>,</span> err <span>:=</span> strconv<span>.</span><span>ParseUint</span><span>(</span>port<span>,</span> <span>10</span><span>,</span> <span>16</span><span>)</span></span><br><span>    <span>if</span> err <span>!=</span> <span>nil</span> <span>{</span></span><br><span>        <span>return</span> <span>0</span><span>,</span> err</span><br><span>    <span>}</span></span><br><span>    <span>if</span> p <span>==</span> <span>0</span> <span>{</span></span><br><span>        <span>return</span> <span>0</span><span>,</span> fmt<span>.</span><span>Errorf</span><span>(</span><span>"invalid: %d"</span><span>,</span> p<span>)</span></span><br><span>    <span>}</span></span><br><span>    <span>return</span> <span>uint16</span><span>(</span>p<span>)</span><span>,</span> <span>nil</span></span><br><span><span>}</span></span><br><span></span><br><span><span>func</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    port<span>,</span> err <span>:=</span> <span>ParsePort</span><span>(</span><span>"123"</span><span>)</span></span><br><span>    <span>if</span> err <span>!=</span> <span>nil</span> <span>{</span></span><br><span>        log<span>.</span><span>Fatalf</span><span>(</span><span>"failed to parse port: %v"</span><span>,</span> err<span>)</span></span><br><span>    <span>}</span></span><br><span>    log<span>.</span><span>Printf</span><span>(</span><span>"port: %d"</span><span>,</span> port<span>)</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>use</span> std<span>::</span>error<span>::</span>Error<span>;</span></span><br><span></span><br><span><span>fn</span> <span>parse_port</span><span>(</span>s<span>:</span> <span>&amp;</span>str<span>)</span> <span>-&gt;</span> Result<span>&lt;</span>u16<span>,</span> Box<span>&lt;</span>Error<span>&gt;&gt;</span> <span>{</span></span><br><span>    <span>let</span> port<span>:</span> u16 <span>=</span> s<span>.</span><span>parse</span><span>(</span><span>)</span><span>?</span><span>;</span></span><br><span>    <span>if</span> port <span>==</span> <span>0</span> <span>{</span></span><br><span>        <span>Err</span><span>(</span>Box<span>::</span><span>from</span><span>(</span><span>format!</span><span>(</span><span>"invalid: {}"</span><span>,</span> port<span>)</span><span>)</span><span>)</span></span><br><span>    <span>}</span> <span>else</span> <span>{</span></span><br><span>        <span>Ok</span><span>(</span>port<span>)</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>match</span> <span>parse_port</span><span>(</span><span>"123"</span><span>)</span> <span>{</span></span><br><span>        <span>Ok</span><span>(</span>port<span>)</span> <span>=&gt;</span> <span>println!</span><span>(</span><span>"port: {}"</span><span>,</span> port<span>)</span><span>,</span></span><br><span>        <span>Err</span><span>(</span>err<span>)</span> <span>=&gt;</span> <span>panic!</span><span>(</span><span>"{}"</span><span>,</span> err<span>)</span><span>,</span></span><br><span>    <span>}</span></span><br><span><span>}</span></span></code></pre>
<p>In Rust itâ€™s common to have statements which cover all possible cases,
either using <code>if</code>/<code>else</code> or <code>match</code>, so you are less likely to encounter
an early <code>return</code> in Rust than in Go</p>
</div>
<p>In the previous example, we needed to use <code>Box&lt;Error&gt;</code>, because the returned error
type cannot be determined during compile time: It will either contain an
instance of <code>std::num::ParseIntError</code> (from the
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.parse">parse</a>
method, when parsing fails), or a string (when the port is zero).</p>
<p>The <code>?</code> in the line <code>let port: u16 = s.parse()?</code> is the
<a href="https://doc.rust-lang.org/std/result/index.html#the-question-mark-operator-">? operator</a>:
when <code>parse</code> returned an error, <code>parse_port</code> will return that error,
otherwise the
<a href="https://doc.rust-lang.org/std/result/enum.Result.html#method.unwrap">unwrapped</a>
result of <code>parse</code> will be assigned to <code>port</code>.</p>
<h3 id="input">Input </h3>
<p>Rust is often used for terminal applications, so it also supports reading input.
The relevant code is in the <a href="https://doc.rust-lang.org/std/io/">std::io module</a>.</p>
<div>
<pre><code><span><span>const</span> <span>{</span> stdin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"process"</span><span>)</span><span>;</span></span><br><span></span><br><span><span>function</span> <span>readStr</span><span>(</span><span>)</span> <span>{</span></span><br><span>  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve<span>,</span> reject</span><span>)</span> <span>=&gt;</span> <span>{</span></span><br><span>    <span>let</span> result <span>=</span> <span>""</span><span>;</span></span><br><span></span><br><span>    stdin<span>.</span><span>setEncoding</span><span>(</span><span>"utf8"</span><span>)</span><span>;</span></span><br><span></span><br><span>    stdin<span>.</span><span>on</span><span>(</span><span>"readable"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span></span><br><span>      <span>let</span> chunk<span>;</span></span><br><span>      <span>while</span> <span>(</span><span>(</span>chunk <span>=</span> stdin<span>.</span><span>read</span><span>(</span><span>)</span><span>)</span><span>)</span> <span>{</span></span><br><span>        result <span>+=</span> chunk<span>;</span></span><br><span>      <span>}</span></span><br><span>    <span>}</span><span>)</span><span>;</span></span><br><span></span><br><span>    stdin<span>.</span><span>once</span><span>(</span><span>"error"</span><span>,</span> <span>err</span> <span>=&gt;</span> <span>reject</span><span>(</span>err<span>)</span><span>)</span><span>;</span></span><br><span></span><br><span>    stdin<span>.</span><span>once</span><span>(</span><span>"end"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>resolve</span><span>(</span>result<span>)</span><span>)</span><span>;</span></span><br><span>  <span>}</span><span>)</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<pre><code><span><span>use</span> std<span>::</span>io<span>::</span><span>{</span>stdin<span>,</span> Read<span>}</span><span>;</span></span><br><span></span><br><span><span>fn</span> <span>read_str</span><span>(</span><span>)</span> <span>-&gt;</span> Option<span>&lt;</span>String<span>&gt;</span> <span>{</span></span><br><span>    <span>let</span> <span>mut</span> buffer <span>=</span> String<span>::</span><span>new</span><span>(</span><span>)</span><span>;</span></span><br><span>    <span>match</span> <span>stdin</span><span>(</span><span>)</span><span>.</span><span>read_to_string</span><span>(</span><span>&amp;</span><span>mut</span> buffer<span>)</span> <span>{</span></span><br><span>        <span>Ok</span><span>(</span>_<span>)</span> <span>=&gt;</span> <span>Some</span><span>(</span>buffer<span>)</span><span>,</span></span><br><span>        <span>Err</span><span>(</span>err<span>)</span> <span>=&gt;</span> <span>{</span></span><br><span>            <span>eprintln!</span><span>(</span></span><br><span>                <span>"Error while reading input: {}"</span><span>,</span></span><br><span>                err</span><br><span>            <span>)</span><span>;</span></span><br><span>            None</span><br><span>        <span>}</span></span><br><span>    <span>}</span><span>;</span></span><br><span><span>}</span></span></code></pre>
<p>Note that the JavaScript code returns a Promise, so itâ€™s asynchronous,
while the Rust example code is synchronous</p>
</div>
<h3 id="attributes-(annotations)">Attributes (annotations) </h3>
<p>Rust also supports
<a href="https://doc.rust-lang.org/reference/attributes.html">attributes</a>
(also called <em>annotations</em> in other languages). They are interpreted during
compile time and are comparable to <em>preprocessor macros</em> in C or C++.</p>
<div>
<pre><code><span><span>#<span>include</span> <span>&lt;cstdint&gt;</span></span></span><br><span></span><br><mark><span>[</span><span>[</span>nodiscard<span>]</span><span>]</span> <span>int32_t</span> <span>add</span><span>(</span><span>int32_t</span> a<span>,</span> <span>int32_t</span> b<span>)</span> <span>{</span></mark><br><span>    <span>return</span> a <span>+</span> b<span>;</span></span><br><span><span>}</span></span><br><span></span><br><span><span>int</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>add</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>)</span><span>;</span> </span><br><span><span>}</span></span></code></pre>
<pre><code><mark><span>#[must_use]</span></mark><br><span><span>fn</span> <span>add</span><span>(</span>a<span>:</span> i32<span>,</span> b<span>:</span> i32<span>)</span> <span>-&gt;</span> i32 <span>{</span></span><br><span>    a <span>+</span> b</span><br><span><span>}</span></span><br><span></span><br><span><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span></span><br><span>    <span>add</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>)</span><span>;</span> </span><br><span><span>}</span></span></code></pre>
</div>
<p>A very common attribute is
<a href="https://doc.rust-lang.org/reference/attributes/derive.html">derive</a>,
which can be used to quickly implement traits. It is often used like
<code>#[derive(Debug, PartialEq)]</code>, to implement the
<a href="https://doc.rust-lang.org/std/fmt/trait.Debug.html">Debug</a>
and
<a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html">PartialEq</a>
traits.</p>
<h2 id="miscellaneous">Miscellaneous </h2>
<h3 id="package-management">Package management </h3>
<p>Rust usually uses the <a href="https://github.com/rust-lang/cargo">Cargo</a> package manager,
which is like <a href="https://www.npmjs.com/">npm</a> or <a href="https://yarnpkg.com/">yarn</a> for
JavaScript or <a href="https://maven.apache.org/">Maven</a> for Java.</p>
<p>The package registry is available at <a href="https://crates.io/">crates.io</a>.</p>
<h3 id="project-setup">Project setup </h3>
<p>If you have used <em>ESLint</em> before for JavaScript or TypeScript,
<a href="https://github.com/rust-lang/rust-clippy">rust-clippy</a> is a similar tool
for Rust, which detects common mistakes and bugs.</p>
<p>The equivalent for <em>prettier</em> or <em>gofmt</em> is
<a href="https://github.com/rust-lang/rustfmt">rustfmt</a>, which automatically formats
code based on the official Rust style guide.</p>
<h3 id="useful-links">Useful links </h3>
<ul>
<li>The excellent Rust book: <a href="https://doc.rust-lang.org/book/">https://doc.rust-lang.org/book/</a></li>
<li>Rust by Example: <a href="https://doc.rust-lang.org/rust-by-example/">https://doc.rust-lang.org/rust-by-example/</a></li>
<li>The Rust Cookbook: <a href="https://rust-lang-nursery.github.io/rust-cookbook">https://rust-lang-nursery.github.io/rust-cookbook</a></li>
<li>Rust Language Cheat Sheet: <a href="https://cheats.rs/">https://cheats.rs/</a></li>
<li>Rust REPL: <a href="https://crates.io/crates/runner">https://crates.io/crates/runner</a></li>
<li>Comments about Rust: <a href="https://brson.github.io/fireflowers/">https://brson.github.io/fireflowers/</a></li>
</ul>

</div><p>
Thanks for reading! If you have any questions, remarks, or just want to say thanks, feel free to contact me on <a href="https://twitter.com/pascalgn">Twitter</a>
</p></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>