<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Send a gif with Go using MMS in 14 lines -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Send a gif with Go using MMS in 14 lines</h1><div><div id="" class="article-content"><p>In past posts we’ve shown you how to use <a href="https://golang.org/">Go</a><a href="https://www.twilio.com/blog/2017/09/send-text-messages-golang.html">to send SMS</a> and <a href="https://www.twilio.com/blog/2014/10/making-and-receiving-phone-calls-with-golang.html">how to make and receive calls</a> with Twilio. What if I wanted to share a gopher <em>gif </em>with a friend using Go? Twilio can do that too!</p><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="kr">package</span><span class="nx">main</span></span><span class="code-line"></span><span class="code-line"><span class="kr">import</span><span class="p">(</span></span><span class="code-line"><span class="s2">"fmt"</span></span><span class="code-line"><span class="nx">twilio</span><span class="s2">"github.com/kevinburke/twilio-go"</span></span><span class="code-line"><span class="s2">"net/url"</span></span><span class="code-line"><span class="p">)</span></span><span class="code-line"></span><span class="code-line"><span class="nx">func</span><span class="nx">main</span><span class="p">()</span><span class="p">{</span></span><span class="code-line"><span class="nx">client</span><span class="o">:=</span><span class="nx">twilio</span><span class="p">.</span><span class="nx">NewClient</span><span class="p">(</span><span class="s2">"TWILIO_AUTH_SID"</span><span class="p">,</span><span class="s2">"TWILIO_AUTH_TOKEN"</span><span class="p">,</span><span class="nx">nil</span><span class="p">)</span></span><span class="code-line"><span class="nx">gif</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">url</span><span class="p">.</span><span class="nx">Parse</span><span class="p">(</span><span class="s2">"https://media.giphy.com/media/uGGT9wVlxPAuk/giphy.gif"</span><span class="p">)</span></span><span class="code-line"><span class="nx">mms</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">client</span><span class="p">.</span><span class="nx">Messages</span><span class="p">.</span><span class="nx">SendMessage</span><span class="p">(</span><span class="s2">"FROM_NUMBER"</span><span class="p">,</span><span class="s2">"TO_NUMBER"</span><span class="p">,</span><span class="s2">""</span><span class="p">,</span><span class="p">[]</span><span class="o">*</span><span class="nx">url</span><span class="p">.</span><span class="nx">URL</span><span class="p">{</span><span class="nx">gif</span><span class="p">})</span></span><span class="code-line"><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s2">"You just sent a gif with Twilio using Go!! "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Status</span><span class="p">)</span><span class="o">+</span><span class="s2">" - "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Sid</span><span class="p">))</span></span><span class="code-line"><span class="p">}</span></span></pre></div></div><div class="rich-text"><h3>Setting Up</h3><p>To start you will need a few things:</p><p>Once you have completed installing Go, install the <a href="https://github.com/kevinburke/twilio-go">twilio-go</a> package with the <a href="https://golang.org/doc/articles/go_command.html#tmp_3">get</a> command.</p></div><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">go</span><span class="nx">get</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">kevinburke</span><span class="o">/</span><span class="nx">twilio</span><span class="o">-</span><span class="nx">go</span></span></pre></div></div><p>After completing the installation create a new Go program. Import the three libraries below: the <a href="https://github.com/kevinburke/twilio-go">twilio-go</a> library from github and the Go native libraries <a href="https://golang.org/pkg/net/url/">net/url</a> and <a href="https://golang.org/pkg/fmt/">fmt</a>. Complete the template by adding the program’s main function.</p><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="kr">package</span><span class="nx">main</span></span><span class="code-line"></span><span class="code-line"><span class="kr">import</span><span class="p">(</span></span><span class="code-line"><span class="s2">"fmt"</span></span><span class="code-line"><span class="nx">twilio</span><span class="s2">"github.com/kevinburke/twilio-go"</span></span><span class="code-line"><span class="s2">"net/url"</span></span><span class="code-line"><span class="p">)</span></span><span class="code-line"></span><span class="code-line"><span class="nx">func</span><span class="nx">main</span><span class="p">(){</span></span><span class="code-line"><span class="c1">// code goes here</span></span><span class="code-line"><span class="p">}</span></span></pre></div></div><div class="rich-text"><h3>Sending a MMS with Twilio</h3><p>Next create a new variable called <em>client</em>. Initialize your client using twilio.NewClient and pass in your Account SID and Auth Token. These credentials can be found on the main page of the <a href="http://twilio.com/console">Twilio Console</a>.</p></div><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">client</span><span class="o">:=</span><span class="nx">twilio</span><span class="p">.</span><span class="nx">NewClient</span><span class="p">(</span><span class="s2">"TWILIO_AUTH_SID"</span><span class="p">,</span><span class="s2">"TWILIO_AUTH_TOKEN"</span><span class="p">,</span><span class="nx">nil</span><span class="p">)</span></span></pre></div></div><div class="rich-text"><p>It's ok to hard code credentials while you're getting started, but make sure you don't share this file or commit these to GitHub. Now find a gif you would like to share. For this example I selected a gopher because it is the mascot of Go.</p><p><img alt="konopka-02-gophergif" class="richtext-image left" height="277" sizes="498px" src="https://twilio-cms-prod.s3.amazonaws.com/images/02-gopher.width-500.gif" srcset="https://twilio-cms-prod.s3.amazonaws.com/images/02-gopher.width-500.gif 498w, https://twilio-cms-prod.s3.amazonaws.com/images/02-gopher.width-1000.gif 498w" width="498"></p><p>Once you’ve found a gif to share, parse the file so it can be passed to the API using twilio-go. Declare a new variable called <em>gif</em> and instantiate the <a href="https://golang.org/pkg/net/url/#URL.Parse">url.Parse</a> method from the <a href="https://golang.org/pkg/net/url/">net/url</a> library.</p></div><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">gif</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">url</span><span class="p">.</span><span class="nx">Parse</span><span class="p">(</span><span class="s2">"https://media.giphy.com/media/uGGT9wVlxPAuk/giphy.gif"</span><span class="p">)</span></span></pre></div></div><div class="rich-text"><p>The <a href="https://golang.org/pkg/net/url/#URL.Parse">url.Parse</a> method returns a pointer to the string url in memory and an error value by default. You may notice the “_” or <a href="https://golang.org/doc/effective_go.html#blank">blank identifier</a> that is next to the declared variable <em>gif</em>. Using the blank identifier specifies that the second value, the error value in this case, will be ignored.</p><p>Now to the gopher stuff, let’s send a gif. Create a new variable called <em>mms</em>&nbsp;and initialize your message using client.Messages.SendMessage.</p></div><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">mms</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">client</span><span class="p">.</span><span class="nx">Messages</span><span class="p">.</span><span class="nx">SendMessage</span><span class="p">(</span><span class="s2">"FROM_NUMBER"</span><span class="p">,</span><span class="s2">"TO_NUMBER"</span><span class="p">,</span><span class="s2">""</span><span class="p">,</span><span class="p">[]</span><span class="o">*</span><span class="nx">url</span><span class="p">.</span><span class="nx">URL</span><span class="p">{</span><span class="nx">gif</span><span class="p">})</span></span></pre></div></div><div class="rich-text"><p>A few pieces of information are needed for the SendMessage method to make this happen.</p><ul><li><strong>FROM_NUMBER:</strong> Your Twilio Number</li><li><strong>TO_NUMBER:</strong> Number that is receiving the gif</li><li><strong>"":</strong> Empty text body - we're sending a picture so we don't need this!
<ul><li>If you want to add a body to the message you can write the message in quotations. (i.e. “How do you like the gopher?”)</li></ul></li><li><strong>[]*url.URL{gif}:</strong> the MMS (picture) body of the message</li></ul><p>Lastly let’s print out a message, the MMS status and the MMS SID.</p></div><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s2">"You just sent a gif with Twilio using Go! "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Status</span><span class="p">)</span><span class="o">+</span><span class="s2">" - "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Sid</span><span class="p">))</span></span></pre></div></div><p>Ready? Let’s Go! Run your program from the command line with the following:</p><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="nx">go</span><span class="nx">run</span><span class="nx">Send</span><span class="o">-</span><span class="nx">a</span><span class="o">-</span><span class="nx">Gif</span><span class="o">-</span><span class="kd">with</span><span class="o">-</span><span class="nx">Go</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="nx">lines</span><span class="o">-</span><span class="k">of</span><span class="o">-</span><span class="nx">code</span><span class="p">.</span><span class="nx">go</span></span></pre></div></div><h3>Completed Program</h3><div class="markdown"><div class="codehilite"><pre class="twlo-code"><span class="code-line"><span class="kr">package</span><span class="nx">main</span></span><span class="code-line"></span><span class="code-line"><span class="kr">import</span><span class="p">(</span></span><span class="code-line"><span class="s2">"fmt"</span></span><span class="code-line"><span class="nx">twilio</span><span class="s2">"github.com/kevinburke/twilio-go"</span></span><span class="code-line"><span class="s2">"net/url"</span></span><span class="code-line"><span class="p">)</span></span><span class="code-line"></span><span class="code-line"><span class="nx">func</span><span class="nx">main</span><span class="p">()</span><span class="p">{</span></span><span class="code-line"><span class="nx">client</span><span class="o">:=</span><span class="nx">twilio</span><span class="p">.</span><span class="nx">NewClient</span><span class="p">(</span><span class="s2">"TWILIO_AUTH_SID"</span><span class="p">,</span><span class="s2">"TWILIO_AUTH_TOKEN"</span><span class="p">,</span><span class="nx">nil</span><span class="p">)</span></span><span class="code-line"><span class="nx">gif</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">url</span><span class="p">.</span><span class="nx">Parse</span><span class="p">(</span><span class="s2">"https://media.giphy.com/media/uGGT9wVlxPAuk/giphy.gif"</span><span class="p">)</span></span><span class="code-line"><span class="nx">mms</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">client</span><span class="p">.</span><span class="nx">Messages</span><span class="p">.</span><span class="nx">SendMessage</span><span class="p">(</span><span class="s2">"FROM_NUMBER"</span><span class="p">,</span><span class="s2">"TO_NUMBER"</span><span class="p">,</span><span class="s2">""</span><span class="p">,</span><span class="p">[]</span><span class="o">*</span><span class="nx">url</span><span class="p">.</span><span class="nx">URL</span><span class="p">{</span><span class="nx">gif</span><span class="p">})</span></span><span class="code-line"><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s2">"You just sent a gif with Twilio using Go!! "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Status</span><span class="p">)</span><span class="o">+</span><span class="s2">" - "</span><span class="o">+</span><span class="nx">string</span><span class="p">(</span><span class="nx">mms</span><span class="p">.</span><span class="nx">Sid</span><span class="p">))</span></span><span class="code-line"><span class="p">}</span></span></pre></div></div><div class="rich-text"><h3>What now?</h3><p>You just found out how easy it is to send a gif using Twilio with Go and the fun is just beginning. Try integrating this idea into an existing app or building an app using <a href="https://vimeo.com/49718712">concurrency</a> with Go’s <a href="https://golang.org/doc/effective_go.html#concurrency">goroutines</a>. The sky’s the limit.</p><p>If you have any questions about how to use Twilio &amp; Go drop me a line anytime via one of the mediums below. This <a href="https://github.com/cskonopka/TwilioPocketGopher/tree/master/Blog/02-Send%20a%20Gif%20with%20Go%20in%2014%20lines%20of%20code">project</a> can be found on my <a href="http://github.com/cskonopka">GitHub</a> in the repository called <a href="https://github.com/cskonopka/TwilioPocketGopher">TwilioPocketGopher</a>, a <a href="http://durakis.com/old_site_05_21_2017/wp-content/uploads/2015/02/rolodex-300x300.jpg">rolodex</a> of Twilio based Go projects.&nbsp;</p><ul><li>Email: ckonopka@twilio.com</li><li>Twitter: @cskonopka</li><li>Github: <a href="http://github.com/cskonopka">cskonopka</a></li></ul></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>