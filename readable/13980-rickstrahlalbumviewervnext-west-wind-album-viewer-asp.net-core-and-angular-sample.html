<!DOCTYPE html>
<html lang="en">
<head>
    <title>
RickStrahl/AlbumViewerVNext: West Wind Album Viewer ASP.NET Core and Angular Sample -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>RickStrahl/AlbumViewerVNext: West Wind Album Viewer ASP.NET Core and Angular Sample</h1><div><div id="" class="markdown-body entry-content p-5"><p><strong>Sample Angular application demonstrating ASP.NET Core API features</strong></p><p>This is a sample <strong>ASP.NET Core application</strong> that <em>demonstrates</em> basic features of <code>ASP.NET</code> Core in an API backend application with an Angular frontend. The application allows browsing and editing of a list of albums and artists interactively.</p><p><strong>On the Desktop:</strong></p><p><a target="_blank" rel="noopener noreferrer" href="/RickStrahl/AlbumViewerVNext/blob/master/AlbumViewer.png"><img src="/RickStrahl/AlbumViewerVNext/raw/master/AlbumViewer.png" alt=""></a></p><p><strong>In a Mobile Web Browser:</strong></p><p><a target="_blank" rel="noopener noreferrer" href="/RickStrahl/AlbumViewerVNext/blob/master/AlbumViewerMobile.jpg"><img src="/RickStrahl/AlbumViewerVNext/raw/master/AlbumViewerMobile.jpg" alt=""></a></p><p><strong>Online Sample:</strong></p><h3><a id="user-content-aspnet-core-features" class="anchor" aria-hidden="true" href="#aspnet-core-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ASP.NET Core Features</h3><p>The <strong>ASP.NET Core</strong> Backend demonstrates:</p><ul><li>Creating an API backend service</li><li>Isolating business logic and Controller code</li><li>Using a base Repository for business logic</li><li>Separating code into separate projects</li><li>Custom User Authentication</li><li>CORS Support</li><li>Using ASP.NET Core as a backend to an Angular 2.0 front end</li></ul><p>The sample also includes a few Server Side Rendered MVC pages for browsing and viewing of albums and artists. I'll be adding the edit pages at a later point.</p><p>Version supported:</p><ul><li><strong>.NET Core 3.1</strong></li><li><strong>3.1 SDK or later</strong></li><li><strong>Visual Studio 2019.4 or later</strong></li></ul><h3><a id="user-content-angular-features" class="anchor" aria-hidden="true" href="#angular-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Angular Features</h3><p>The <strong>Angular</strong> front end application demonstrates:</p><ul><li>Page based Application</li><li>Mobile friendly, adaptive UI</li><li>Routing</li><li>Animations and Page Transitions</li><li>Client side and server side Authentication tracking</li><li>Client side and server side Validation</li><li>Managing Server Urls (dev/production)</li><li>Angular CLI Project</li></ul><p>Version supported:</p><ul><li><strong>Angular 8.2.14</strong></li><li><strong>Angular CLI 8.3.20</strong></li></ul><h3><a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h3><p>To check out the application you can:</p><ul><li>Run the Docker Image</li><li>Run everything local</li></ul><h4><a id="user-content-net-core-api-configuration" class="anchor" aria-hidden="true" href="#net-core-api-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.NET Core API Configuration</h4><p>You should just be able to clone this repo as is on either Windows or Mac (and probably Linux) and do:</p><pre><code>cd &lt;Base Solution Folder&gt;
dotnet restore
cd .\src\AlbumViewerNetCore
dotnet run
</code></pre><p>Then navigate to <a href="http://localhost:5000" rel="nofollow">http://localhost:5000</a> to start the application. First launch might fail due a timeout due to the initial DB creation, but subsequent requests should work.</p><p>If you're running the application locally through IIS or Kestrel, the application should just work as is. By default it uses a SqLite data base that is created in the Web app's content (not Web) root.</p><p>The sample also works with SQL Server but you have to create the database for that to work and set the connection string in <code>appsettings.json</code>.</p><p>To switch between SqLite and Sql Server use the <code>useSqlLite</code> configuration settings:</p><div class="highlight highlight-source-json"><pre><span class="pl-s"><span class="pl-pds">"</span>Data<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>AlbumViewer<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>useSqLite<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>SqlServerConnectionString<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>server=.;database=AlbumViewer;integrated security=true;<span class="pl-pds">"</span></span>,
    } 
  },
  //... other settings omitted
}</pre></div><p>In either case initial albums/artist data should auto-create the first time the app is run.</p><h5><a id="user-content-using-sqlite" class="anchor" aria-hidden="true" href="#using-sqlite"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using SqLite</h5><p>SqLite will automatically create the database file in the content content root of the project (same folder as project.json). For this to work make sure that the account the Web application is running under has appropriate rights to create a new file and read/write to that file in the content folder.</p><h5><a id="user-content-using-sql-server" class="anchor" aria-hidden="true" href="#using-sql-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Sql Server</h5><p>To use Sql Server create a new empty database and then point the connection string at the new database. Make sure the account the Web server is running under has rights to create tables and then read/write data.</p><p>In <code>appsettings.json</code> (or other configuration settings) set <code>Data.useSqLite: false</code> and set the <code>Data.SqlServerConnectionString</code> to a valid connection string to your database.</p><div class="highlight highlight-source-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>Data<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>useSqLite<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>SqlServerConnectionString<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>server=.;database=AlbumViewer;integrated security=true;MultipleActiveResultSets=true;App=AlbumViewer<span class="pl-pds">"</span></span>
    },
    <span class="pl-ii">...</span></pre></div><h4><a id="user-content-to-develop-the-albumviewer-angular-example" class="anchor" aria-hidden="true" href="#to-develop-the-albumviewer-angular-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To develop the AlbumViewer Angular example</h4><p>The Angular front end sits in a separate AlbumViewerAngular project folder and is built separately from the ASP.NET Core application.</p><p>The sample however, does ship with pre-compiled .js files for the sample that have been copied into the Web project's <strong>wwwroot</strong> folder so the application will just run through IIS Express/IIS or Kestrel.</p><p>Making changes to the Angular application requires transpiling of the typescript source files. In order to make changes to the Angular 2 client sample run the following from a command window:</p><div class="highlight highlight-source-postscript"><pre><span class="pl-smi">cd</span><span class="pl-s"><span class="pl-pds">&lt;</span><span class="pl-ii">inst</span>a<span class="pl-ii">ll</span>F<span class="pl-ii">ol</span>de<span class="pl-ii">r</span><span class="pl-pds">&gt;</span></span><span class="pl-smi">\src\AlbumViewerAngular</span><span class="pl-smi">npm</span><span class="pl-smi">install</span><span class="pl-smi">ng</span><span class="pl-smi">serve</span></pre></div><p>then navigate to <a href="http://localhost:4200" rel="nofollow">http://localhost:4200</a> to run the application. Note this uses the WebPack development server rather than running through IIS Express or Kestrel for the front end assets - <code>index.html</code>, all css, images etc. are served from the development server and only API requests go through Kestrel/IIS.</p><p>Depending on which port you run the ASP.NET Core application you may have to change the API server base URL which defaults to <a href="http://localhost:5000/" rel="nofollow">http://localhost:5000/</a> in the <code>app/business/appConfiguration.ts</code> file. The default is when running the development server that requests are routed to <a href="http://localhost:5000/" rel="nofollow">http://localhost:5000/</a> which is where Kestrel runs by default.</p><p>Once you've made your changes, you need to build the application's final output which builds into the API applications <code>wwwroot</code> folder.</p><p>Run:</p><pre><code>ng build --prod
</code></pre><p>which creates the final transpiled bundles you can use to run through the ASP.NET Core application on <a href="http://localhost:5000/" rel="nofollow">http://localhost:5000/</a>.</p><p>I've changed the default output folder in <code>angular-cli.json</code> from the <code>.\dist</code> folder to the ASP.NET Core app's <code>wwwroot</code> folder so that the application can run entirely served by Kestrel or IIS. It also still works using <code>ng serve</code> which uses whatever path is used in <code>angular-cli.json</code>.</p><h4><a id="user-content-run-in-docker" class="anchor" aria-hidden="true" href="#run-in-docker"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run in Docker</h4><p>If you just want to run the application from a docker file, you can use the following from a command line if Docker is installed:</p><div class="highlight highlight-source-postscript"><pre><span class="pl-smi">docker</span><span class="pl-smi">pull</span><span class="pl-smi">rickstrahl</span><span class="pl-smi">/albumviewer</span><span class="pl-smi">docker</span><span class="pl-k">run</span><span class="pl-smi">-it</span><span class="pl-smi">-p</span><span class="pl-c1">5004</span><span class="pl-smi">:80</span><span class="pl-smi">--name</span><span class="pl-smi">albumviewer</span><span class="pl-smi">rickstrahl</span><span class="pl-smi">/albumviewer</span></pre></div><p>You should then be able to navigate to:</p><p><a href="http://localhost:5004" rel="nofollow">http://localhost:5004</a></p><p>to run the application.</p><p>To later stop the container:</p><p>or to restart:</p><pre><code>docker start albumviewer -i
</code></pre><p>This runs a fixed container that was build with <code>dockerbuild.ps1</code> or <code>dockerbuild.sh</code>. You can update the application and create a new container using these files.</p><h4><a id="user-content-platforms" class="anchor" aria-hidden="true" href="#platforms"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Platforms</h4><p>Currently the app has been tested to run under Windows and Mac and under Docker running Linux.</p><p><strong>License:</strong><br>This sample is licensed under MIT license. Use, play with, integrate code from
this repository as you see fit at your own risk. I try to update this code regularly to reflect the latest current builds of ASP.NET Core and Angular.</p><p><strong>Warranty Disclaimer: No Warranty!</strong></p><p>IN NO EVENT SHALL THE AUTHOR, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THIS PROGRAM AND DOCUMENTATION, BE LIABLE
FOR ANY COMMERCIAL, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM INCLUDING,
BUT NOT LIMITED TO, LOSS OF DATA OR DATA BEING RENDERED INACCURATE
OR LOSSES SUSTAINED BY YOU OR LOSSES SUSTAINED BY THIRD PARTIES OR
A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS, EVEN
IF YOU OR OTHER PARTIES HAVE BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>