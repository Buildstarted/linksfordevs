<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Dump dotnet process running in docker from host &#xB7; Issue #573 &#xB7; dotnet/diagnostics - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Dump dotnet process running in docker from host &#xB7; Issue #573 &#xB7; dotnet/diagnostics - linksfor.dev(s)"/>
    <meta property="article:author" content="josalem"/>
    <meta property="og:description" content="Is it possible to dump dotnet process running in docker from host? I am using docker image mcr.microsoft.com/dotnet/core/runtime:3.0-buster-slim container has SYS_PTRACE capability and I am trying ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/dotnet/diagnostics/issues/573"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Dump dotnet process running in docker from host &#xB7; Issue #573 &#xB7; dotnet/diagnostics</title>
<div class="readable">
        <h1>Dump dotnet process running in docker from host &#xB7; Issue #573 &#xB7; dotnet/diagnostics</h1>
            <div>by josalem</div>
            <div>Reading time: 2 minutes</div>
        <div>Posted here: 21 Oct 2019</div>
        <p><a href="https://github.com/dotnet/diagnostics/issues/573">https://github.com/dotnet/diagnostics/issues/573</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<blockquote>
<p>Note that you need to debug those dumps in the same environment they came from.</p>
</blockquote>
<p><a data-hovercard-type="user" data-hovercard-url="/users/josalem/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/josalem">@josalem</a> Could you elaborate on this? In case an app crashes in a container, (which would in turn stop the container) in my scenario the dump of the crashed process is collected in a volume mounted directory from host. I was hoping I can analyze the dumps from the host machine since I have the app's pdbs and the dump file too. Am I missing something?</p>
</blockquote>
<p><a data-hovercard-type="user" data-hovercard-url="/users/kichalla/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kichalla">@kichalla</a>, let me clarify "environment" a bit: this means a machine that has the same base OS (Linux, Mac, Windows), with the same libc flavor and version (e.g., musl vs glibc), and is the same architecture.  You'll also need all the debugging symbols for your app (you can use <code>dotnet symbols</code> to fetch symbols for <code>dotnet</code> itself if you don't have them on your dev box).  <a data-hovercard-type="user" data-hovercard-url="/users/mikem8361/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mikem8361">@mikem8361</a>, did I miss anything here?</p>
<p>If you are unable to diagnose the dump even if those things all match, you can create a modified version of your runtime container that has lldb installed and debug there as well, as that is almost guaranteed to work.</p>
<p>As an example, for my workflow, I  make sure the dumps I collect are being written to a dir I have mapped to my host.  Then when I go to triage them, I just respin the container, install <code>lldb</code> or <code>dotnet-dump</code>, and debug in the container itself.</p>
      </div>
</task-lists>


        



    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>