<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 3.0 Preview 6 and Entity Framework 6.3 Preview 6 -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Announcing Entity Framework Core 3.0 Preview 6 and Entity Framework 6.3 Preview 6</h1><div><div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://secure.gravatar.com/avatar/c16238388fe24348cb8d7c4cf974bb7b?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 photo avatar-default"><p>Diego</p></div></div></div><p>June 13th, 2019</p><p>New previews of the next versions of <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/3.0.0-preview6.19304.10">EF Core</a> and <a href="https://www.nuget.org/packages/EntityFramework/6.3.0-preview6-19304-03">EF 6</a> are now available on <a href="https://www.nuget.org/">NuGet.Org</a>.</p><h2 id="what-is-new-in-ef-core-30-preview-6">What is new in EF Core 3.0 Preview 6</h2><p>In recent months, a lot of our efforts have been focused on a new LINQ implementation for EF Core 3.0. Although the work isn’t complete and a lot of the intended functionality hasn’t been enabled, before preview 6 we reached a point in which we couldn’t make much more progress without integrating the new implementation into the codebase in the main branch.</p><h3 id="query-changes">Query changes</h3><blockquote><p><strong>IMPORTANT: Although as always, we want to encourage you to experiment with our preview bits in a controlled environment and to provide feedback, preview 6 has significant limitations in the LINQ implementation that we expect to affect any application that performs all but the most trivial queries. Given this, we want to explicitly recommend you against trying to update any applications you have in production to this preview.</strong></p></blockquote><p>While some of the limitations are caused by intentional breaking changes, a lot more are temporary issues we expect to fix before RTM.</p><p>These are some of the main things to know:</p><ul><li><strong>Temporary limitation: In-memory database and Cosmos DB providers aren’t functional in this preview:</strong> In the initial phase of the switch to the new implementation, we have prioritized getting our relational providers working. Functionality with in-memory database and Cosmos DB providers is broken, and we recommend you skip preview 6 if you have code that depends on these providers. We expect to gradually restore functionality in subsequent previews.</li><li><strong>Temporary limitation: Several areas of query translation aren’t working with relational databases:</strong> Queries that use any of these constructs will very likely fail to translate correctly or execute:<ul><li>Owned types</li><li>Collections reference on projections</li><li>GroupBy operator</li><li>Equality comparisons between entities</li><li>Query tags</li><li>Global query filters</li></ul></li><li><strong>Intentional breaking change: LINQ queries are no longer evaluated on the client:</strong> This is actually one of the main motivations we had for building a new LINQ implementation into EF Core 3.0. Before this version of EF Core, expressions in the query that could not be translated for SQL would be automatically evaluated on the client, regardless of their location in the query. This contributed to hard to predict performance issues, especially when expressions used in predicates were not translated and large amounts of data ended up being filtered on the client, and also caused compatibility problems every time we introduced new translation capabilities. In the new implementation, we only support evaluating on the client expressions in the top-level projection of the query. Read <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes#linq-queries-are-no-longer-evaluated-on-the-client">the full description of this breaking change</a> in our documentation.</li><li><strong>Intentional breaking change: Existing FromSql overloads has been renamed to FromSqlRaw and FromSqlInterpolated, and can only be used at the root of queries:</strong> Read <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes#fromsql-executesql-and-executesqlasync-have-been-renamed">more details about it</a> in the breaking change documentation.</li></ul><p>If you run into any issues that you don’t see in this list or in the <a href="https://github.com/aspnet/EntityFrameworkCore/milestone/42">list of bugs already tracked for 3.0</a>, please <a href="https://github.com/aspnet/EntityFrameworkCore/issues/new">report it on GitHub</a>.</p><p>If you hit limitations only in a few queries, here are some workarounds that you might be able to use to get things working:</p><ul><li>Switch explicitly to client evaluation if you need to filter data based on an expression that cannot be translated to SQL, using the <code>AsEnumerable()</code> or <code>ToList()</code> extension methods. For example, the following query will no longer work in EF Core 3.0 because one of the predicates in the where clause requires client evaluation:<pre><code class="language-csharp">
var specialCustomers = context.Customers
  .Where(c =&gt; c.Name.StartsWith(n) &amp;&amp; IsSpecialCustomer(c));
</code></pre><p>But if you know it is ok to perform part of the filtering on the client, you can rewrite this as:</p><pre class=""><code class="language-csharp">
var specialCustomers = context.Customers
  .Where(c =&gt; c.Name.StartsWith(n))
  .AsEnumerable()
  .Where(c =&gt; IsSpecialCustomer(c));
</code></pre></li><li>Use the new <code>FromSqlRaw()</code> or <code>FromSqlInterpolated()</code> methods to provide your own SQL translations for anything that isn’t yet supported.</li><li>Skip preview 6 and stay on preview 5 until more issues are fixed, or try our <a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">nightly builds</a>.</li></ul><h3 id="switch-to-microsoftdatasqlclient">Switch to Microsoft.Data.SqlClient</h3><p>As <a href="https://devblogs.microsoft.com/dotnet/introducing-the-new-microsoftdatasqlclient/">announced recently</a>, development of the <a href="http://ADO.NET">ADO.NET</a> provider for SQL Server has moved to this new package. The EF Core provider for SQL Server now uses the new package to connect to SQL Server databases.</p><p>Please continue to create issues for the EF Core layer (for example SQL generation) on the <a href="https://github.com/aspnet/EntityFrameworkCore/issues">EF Core issue tracker</a>. Any issues related to SQL Server database connectivity are better reported to the <a href="https://github.com/dotnet/SqlClient/issues">SqlClient issue tracker</a>.</p><h3 id="dbcontext-scaffolding-improvements">DbContext scaffolding improvements</h3><p>We now have support for:</p><ul><li>Scaffolding entities without keys.</li><li>Scaffolding entities from database views.</li><li>Scaffolding <code>DbContext</code> from an Azure SQL Data Warehouse.</li><li>A new <code>dotnet ef dbcontext script</code> command to generate the SQL script equivalent to calling <code>EnsureCreated()</code>.</li><li>New Package Manager Console command functionality in <code>Get-DbContext</code> for listing <code>DbContext</code> types available in an application.</li></ul><p>Thank you very much <a href="https://github.com/ErikEJ">@ErickEJ</a> for all these contributions! You rock!</p><h2 id="whats-new-in-ef-63-preview-6">What’s new in EF 6.3 Preview 6</h2><p>Here are some of the main changes since preview 5:</p><ul><li><strong>We automatically locate System.Data.SqlClient when it isn’t registered with DbProviderFactories:</strong> This means it’s no longer necessary to register SqlClient as a workaround before you start using EF.</li><li><strong>EF 6 tests are passing on .NET Core:</strong> We made infrastructure updates necessary to get our existing tests running on .NET Core. This has allowed us to identify and fix problems in the product code as well as an issue that was fixed in .NET Core 3.0 Preview 6. There is a known issue with the translation of String methods like StartsWith, EndsWith and Contains that wasn’t fixed on time for Preview 6.</li></ul><h2 id="whats-next">What’s next</h2><p>For upcoming previews and the rest of the EF Core 3.0 release, our main focus will be on restoring and improving the query functionality using our new LINQ implementation.</p><p>We are also working to enable more aspects of the experience you would expect from using EF 6.3 on .NET Core. For example, we are making additional changes to simplify working when an application .config file isn’t present, enabling embedding metadata from an EDMX into the compilation output on .NET Core, and reimplementing the EF migration commands in a way that is compatible with .NET Core.</p><h2 id="weekly-status-updates">Weekly status updates</h2><p>If you’d like to track our progress more closely, we now publish weekly status updates to <a href="https://github.com/aspnet/EntityFrameworkCore/issues/15403">GitHub</a>. We also post these status updates to our Twitter account, <a href="https://twitter.com/efmagicunicorns">@efmagicunicorns</a>.</p><h2 id="thank-you">Thank you</h2><p>As always, thank you for trying our preview bits, and thanks to all the contributors that helped in this preview!</p><div class="authorinfoarea"><div><p>Program Manager ,&nbsp;.NET Data Access</p><p><strong>Follow Diego</strong>&nbsp;&nbsp;&nbsp;<a class="no-underline stayinformed" aria-label="Diego Vega Twitter profile" target="_blank" href="https://twitter.com/divega"></a><a class="no-underline stayinformed" aria-label="Diego Vega LinkedIn profile" target="_blank" href="https://linkedin.com/in/dbvega"><i class="fa fa-linkedin"></i></a><a class="no-underline stayinformed" aria-label="Diego Vega GitHub profile" target="_blank" href="https://github.com/divega"><i class="fa fa-github"></i></a><a class="no-underline stayinformed" aria-label="Diego Vega Stackoverflow profile" target="_blank" href="https://stackoverflow.com/users/393050/divega"><i class="fa fa-stack-overflow"></i></a><a class="no-underline stayinformed hvr-pop" aria-label="Diego Vega RSS Feed" target="_blank" href="https://devblogs.microsoft.com/dotnet/author/divegamicrosoft-com/feed/"></a></p></div></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>