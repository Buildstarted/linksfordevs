<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Everything I know about Kubernetes I learned from a cluster of Raspberry Pis | Jeff Geerling - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Everything I know about Kubernetes I learned from a cluster of Raspberry Pis | Jeff Geerling - linksfor.dev(s)"/>
    <meta property="og:description" content="I realized I haven&#x27;t posted about my DrupalCon Seattle 2019 session titled Everything I know about Kubernetes I learned from a cluster of Raspberry Pis, so I thought I&#x27;d remedy that. First, here&#x27;s a video of the recorded session:"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.jeffgeerling.com/blog/2019/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Everything I know about Kubernetes I learned from a cluster of Raspberry Pis | Jeff Geerling</title>
<div class="readable">
        <h1>Everything I know about Kubernetes I learned from a cluster of Raspberry Pis | Jeff Geerling</h1>
            <div>Watching time: 3 minutes</div>
        <div>Posted here: 28 Nov 2019</div>
        <p><a href="https://www.jeffgeerling.com/blog/2019/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis">https://www.jeffgeerling.com/blog/2019/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
    <div><div><div property="content:encoded"><p>I realized I haven't posted about my DrupalCon Seattle 2019 session titled <a href="https://events.drupal.org/seattle2019/sessions/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis">Everything I know about Kubernetes I learned from a cluster of Raspberry Pis</a>, so I thought I'd remedy that. First, here's a video of the recorded session:</p>



<p><iframe src="https://www.youtube.com/embed/yLzO88h40uw" frameborder="0" allowfullscreen=""></iframe></p>

<p><img src="https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/pi-dramble-original.jpeg" width="390" height="589" alt="The original Raspberry Pi Dramble Cluster"><br>
<em>The original Pi Dramble 6-node cluster, running the LAMP stack.</em></p>

<p>I started running the <a href="https://www.pidramble.com/">Raspberry Pi Dramble</a> in 2014, after I realized I could automate the setup of everything in a LAMP stack on a set of Raspberry Pi 2s using Ansible (one Pi for an HTTP load balancer/reverse proxy, two for PHP app backends, and two for MySQL redundancy. Kubernetes was the logical next step, so I moved things towards Kubernetes in 2017, but running Kubernetes was a lesson in pain due to the Pi's limited memory (1 GB maximum) at the time.</p>

<p>When the Raspberry Pi 4 came around, I acquired some 2 GB models as quickly as I could, and redeployed onto them. Gone were the restrictions that were causing Kubernetes' API to be flaky with the older Pis, and now the Pi 4 cluster is extremely reliable. Early on, <a href="https://www.jeffgeerling.com/blog/2019/raspberry-pi-4-needs-fan-heres-why-and-how-you-can-add-one">cooling was an issue</a>, but the recent firmware update has made that less problematic. I now power the cluster using the official PoE HAT, which means I only have one plug for each Pi, and everything fits nicely into a small travel case (if I want to bring the cluster with me anywhere).</p>

<p><img src="https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/pi-dramble-4-k8s-edition.jpeg" width="650" height="432" alt="Raspberry Pi Dramble 4 Kubernetes edition cluster"><br>
<em>The current Pi Dramble, running Kubernetes and sporting <a href="https://www.blinkstick.com/products/blinkstick-nano">BlinkStick Nanos</a>.</em></p>

<p>I even got it all to run off a 10,000 mAh battery pack with a bunch of USB splitters... but it did not stay powered long, and kept giving low power warningsâ€”so I'll have to consider other options for a highly-mobile four-node Kubernetes bare-metal cluster.</p>

<p>I've continually updated the cluster so it is tested in a <a href="https://github.com/geerlingguy/raspberry-pi-dramble/tree/master/testing/docker">Docker-based Kubernetes environment</a>, a <a href="https://github.com/geerlingguy/raspberry-pi-dramble/tree/master/testing/vagrant">Vagrant-based Kubernetes local development environment</a>, and of course, the Pi environment. The latter environment causes much consternation, as many common container images are not maintained in an <code>armv6</code> or <code>linux/arm</code> format, which is required when running on the 32-bit ARM OS the Pi uses, Raspbian. But the Pi Dramble abides, and it quietly goes on, serving up traffic for <a href="https://www.pidramble.com/">https://www.pidramble.com</a> through the years.</p>

<p>The official <a href="https://www.pidramble.com/wiki">Pi Dramble Wiki</a> has all the instructions for building your own Pi Kubernetes cluster, with links to buy all the parts I have, along with every step to get it running using open source Ansible roles to install Kubernetes and Docker for ARM, then configure a new four-node cluster.</p>
</div></div></div>  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>