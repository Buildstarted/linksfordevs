<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Don&#x2019;t use Azure Functions as a web application -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Don’t use Azure Functions as a web application</h1><div><div id="" class="page__content"><p>I know, I know. That title is probably a bit too harsh and opinionated. But it got your attention, right?</p><p>A friend of mine this week asked me whether they could use middleware in their HTTP-triggered Azure Functions, ideally even the same ones they use in ASP.NET Core applications. After all, the SDK comes with HTTP triggers that seem to use the same infrastructure, right?</p><p>My immediate response was <em>“whyyyyyy?!?”</em>. And in this blog post, I’ll try to explain.</p><p><a href="https://giphy.com/gifs/jeff-goldblum-jurassic-park-jurassicparkedit-mCClSS6xbi8us">via GIPHY</a></p><blockquote><p>Yeah, but your scientists were so preoccupied with whether or not they could, they didn’t stop to think if they should. - Dr. Ian Malcolm</p></blockquote><p>Many folks out there, including some of the official information, see Azure Functions as a convenient way to quickly deploy a simple API. And that’s somewhat correct, and often perfectly fine for a lot cases</p><p>Except, if you need full-blown middleware and the options the ASP.NET Core web pipeline offers, maybe… Well, maybe ASP.NET Core is the choice for those.</p><p>Azure Functions are not a web API-building-platform as such. A function gets triggered and receives input, runs some logic, and provides output. Functions can be chained into a pipeline that passes around messages. They can scale based on capacity needed to handle those incoming messages. And that, I think, is the key.</p><p><strong>Azure Functions provide a reactive orchestrator.</strong> They handle messages.</p><p>Based on various triggers, such as queues, storage, events coming from another service, they set logic in motion. In that sense, using an HTTP trigger does not mean you are building a full-blown web API. The <code class="language-plaintext highlighter-rouge">HttpTrigger</code> is one of many triggers that provides an incoming message to your function. An <code class="language-plaintext highlighter-rouge">HttpRequestMessage</code>, with lots of properties such as headers, query string parameters and so on.</p><p>At its core, that <code class="language-plaintext highlighter-rouge">HttpRequestMessage</code> is not different from handling a <code class="language-plaintext highlighter-rouge">BlobUpdatedEvent</code> from storage. Granted, the latter is a less complex message, but they are the same. The only difference is that they look like an explicit call to an endpoint.</p><p><strong>Functions should do one thing</strong> (or realistically, as few things as possible).</p><p>Will I yell at you when you use Azure Functions and HTTP triggers to build a simple API? Absolutely not. It’s perfectly fine to handle a couple of events that may originate from your Vue, React or Angular front-end.</p><p>Will I yell at you if you try to shoehorn proper ASP.NET Core into Azure Functions? Yes. If you need the full ASP.NET Core stack for the job, why not use it? If you need only parts, put API management, CloudFlare or nginx in front of your HTTP-triggered function.</p><p>HTTP is just another type of message that triggers your function logic.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>