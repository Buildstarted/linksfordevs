<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1 -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 1</h1><div><div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/02/DaniethRothPhoto-150x150.jpeg" width="58" height="58" alt="Daniel Roth" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 alignnone photo"><p>Daniel</p></div></div></div><p>October 15th, 2019</p><p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1-preview-1/">.NET Core 3.1 Preview 1 is now available</a>. This release is primarily focused on bug fixes, but it contains a few new features as well.</p><p>Here’s what’s new in this release for ASP.NET Core:</p><ul><li>Partial class support for Razor components</li><li>Pass parameters to top-level components</li><li>Support for shared queues in HttpSysServer</li><li>Breaking changes for SameSite cookies</li></ul><p>Alongside this .NET Core 3.1 Preview 1 release, we’ve also released a Blazor WebAssembly update, which now requires .NET Core 3.1. To use Blazor WebAssembly you will need to install .NET Core 3.1 Preview 1 as well as the latest preview of Visual Studio.</p><p>See the <a href="https://github.com/dotnet/core/blob/master/release-notes/3.1">release notes</a> for additional details and known issues.</p><h2>Get started</h2><p>To get started with ASP.NET Core in .NET Core 3.1 Preview 1 <a href="https://dotnet.microsoft.com/download/dotnet-core/3.1">install the .NET Core 3.1 Preview 1 SDK</a>.</p><p>If you’re on Windows using Visual Studio, for the best experience we recommend <a href="https://visualstudio.com/preview">installing the latest preview of Visual Studio 2019 16.4</a>. Installing Visual Studio 2019 16.4 will also install .NET Core 3.1 Preview 1, so you don’t need to separately install it. For Blazor development with .NET Core 3.1, Visual Studio 2019 16.4 is <em>required</em>.</p><p>To install the latest Blazor WebAssembly template run the following command:</p><pre><code>dotnet new -i Microsoft.AspNetCore.Blazor.Templates::3.1.0-preview1.19508.20
</code></pre><h2>Upgrade an existing project</h2><p>To upgrade an existing ASP.NET Core 3.0 project to 3.1 Preview 1:</p><ul><li>Update any projects targeting netcoreapp3.0 to target netcoreapp3.1</li><li>Update all Microsoft.AspNetCore.* package references to 3.1.0-preview1.19506.1</li></ul><p>See also the full list of <a href="https://github.com/aspnet/announcements/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+label%3A3.1.0+label%3A%22Breaking+change%22">breaking changes</a> in ASP.NET Core 3.1.</p><p>That’s it! You should now be all set to use .NET Core 3.1 Preview 1!</p><h2>Partial class support for Razor components</h2><p>Razor components are now generated as partial classes. You can author the code for a Razor component using a code-behind file defined as a partial class instead of defining all the code for the component in a single file.</p><p>For example, instead of defining the default <code>Counter</code> component with an <code>@code</code> block, like this:</p><p><em>Counter.razor</em></p><pre><code class="razor">@page "/counter"

&lt;h1&gt;Counter&lt;/h1&gt;

&lt;p&gt;Current count: @currentCount&lt;/p&gt;

&lt;button class="btn btn-primary" @onclick="IncrementCount"&gt;Click me&lt;/button&gt;

@code {
    int currentCount = 0;

    void IncrementCount()
    {
        currentCount++;
    }
}
</code></pre><p>You can now separate out the code into a code-behind file using a partial class like this:</p><p><em>Counter.razor</em></p><pre><code class="razor">@page "/counter"

&lt;h1&gt;Counter&lt;/h1&gt;

&lt;p&gt;Current count: @currentCount&lt;/p&gt;

&lt;button class="btn btn-primary" @onclick="IncrementCount"&gt;Click me&lt;/button&gt;
</code></pre><p><em>Counter.razor.cs</em></p><pre><code class="csharp">namespace BlazorApp1.Pages
{
    public partial class Counter
    {
        int currentCount = 0;

        void IncrementCount()
        {
            currentCount++;
        }
    }
}
</code></pre><h2>Pass parameters to top-level components</h2><p>Blazor Server apps can now pass parameters to top-level components during the initial render. Previously you could only pass parameters to a top-level component with <code>RenderMode.Static</code>. With this release, both <code>RenderMode.Server</code> and <code>RenderModel.ServerPrerendered</code> are now supported. Any specified parameter values are serialized as JSON and included in the initial response.</p><p>For example, you could prerender a <code>Counter</code> component with a specific current count like this:</p><pre><code class="csharp">@(await Html.RenderComponentAsync&lt;Counter&gt;(RenderMode.ServerPrerendered, new { CurrentCount = 123 }))
</code></pre><h2>Support for shared queues in HttpSysServer</h2><p>In addition to the existing behavior where HttpSysServer created anonymous request queues, we’ve added to ability to create or attach to an existing named HTTP.sys request queue.<br>This should enable scenarios where the HTTP.Sys controller process that owns the queue is independent to the listener process making it possible to preserve existing connections and enqueued requests between across listener process restarts.</p><pre><code class="csharp">public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
    Host.CreateDefaultBuilder(args)
        .ConfigureWebHostDefaults(webBuilder =&gt;
        {
            // ...
            webBuilder.UseHttpSys(options =&gt;
            {
                options.RequestQueueName = "MyExistingQueue",
                options.RequestQueueMode = RequestQueueMode.CreateOrAttach
            })
        });
</code></pre><h2>Breaking changes for SameSite cookies</h2><p>This release updates the behavior of SameSite cookies in ASP.NET Core to conform to the latest standards being enforced by browsers. For details on these changes and their impact on existing apps see https://github.com/aspnet/Announcements/issues/390.</p><h2>Give feedback</h2><p>We hope you enjoy the new features in this preview release of ASP.NET Core! Please let us know what you think by filing issues on <a href="https://github.com/aspnet/aspnetcore/issues">GitHub</a>.</p><p>Thanks for trying out ASP.NET Core!</p><div class="authorinfoarea"><div><p>Principal Program Manager,&nbsp;ASP.NET</p><p><strong>Follow Daniel</strong>&nbsp;&nbsp;&nbsp;<a class="no-underline stayinformed" aria-label="Daniel Roth Twitter profile" target="_blank" href="https://twitter.com/danroth27"></a><a class="no-underline stayinformed" aria-label="Daniel Roth GitHub profile" target="_blank" href="https://github.com/danroth27"><i class="fa fa-github"></i></a><a class="no-underline stayinformed hvr-pop" aria-label="Daniel Roth RSS Feed" target="_blank" href="https://devblogs.microsoft.com/aspnet/author/danroth27/feed/"></a></p></div></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>