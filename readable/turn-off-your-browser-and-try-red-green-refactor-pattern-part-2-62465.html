<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Turn off your browser and try red, green &amp; refactor pattern (part 2) - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Turn off your browser and try red, green &amp; refactor pattern (part 2) - linksfor.dev(s)"/>
    <meta property="article:author" content="Marios Fakiolas"/>
    <meta property="og:description" content="Every now and then, I come across mentally exhausted and frustrated web developers who try to test their work by clicking here and there in the UI. Most of the times something is still missing so they have to repeat this routine yet another time. My proposal is to simply turn off the browser."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Turn off your browser and try red, green &amp; refactor pattern (part 2)</title>
<div class="readable">
        <h1>Turn off your browser and try red, green &amp; refactor pattern (part 2)</h1>
            <div>by Marios Fakiolas</div>
            <div>Reading time: 4-5 minutes</div>
        <div>Posted here: 04 Jun 2020</div>
        <p><a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2/">https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><div><h2 id="what-is-red-green-and-refactor"><a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2#what-is-red-green-and-refactor">#</a> What is red, green and refactor</h2>
<p>Red, green and refactor is a pattern introduced by Test-driven development and makes great sense as we 'll see below.
The steps are:</p>
<ul>
<li><code>red</code> : write first a test case that is going to fail since the code that is being tested is not in place yet</li>
<li><code>green</code> : write the minimum code needed so that the test can turn to green</li>
<li><code>refactor</code> : make changes to the code as needed in order to optimize it and make it more efficient while staying in
the green zone</li>
<li>repeat...</li>
</ul>
<p>In our case, we have prepared all these user stories and acceptance criteria in order to use Behavior-driven
development process. That way we will not test units of our code and separate components in isolation. Instead, we will
replicate the users flows as much as possible by implementing a suite of test cases.</p>
<p>So the clue is that a testing framework will run all these checks on our behalf in a consistent way and this is why we
won't have to repeat all these manual checks again and again on our own anymore</p>
<p>The huge difference compared with random clicks in the UI are:</p>
<ul>
<li>all these clicks will become fully automated and will be executed by a testing framework locally during development
or even through a CI system before shipping our work to production</li>
<li>engineers are going to gain huge time and confidence down the road because of this automation</li>
<li>the whole functionality will be designed way better since we will follow a well-defined plan right from the start</li>
<li>the risk to end up with something non-functional and useless gets reduced by far</li>
<li>the code we are going to ship will be much more robust and mature</li>
<li>test cases will be there forever so every new functionality will be tested automatically through them</li>
<li>other people will be able to continue / review our work at anytime and grasp easily what is really going on in there</li>
</ul>
<p>Did I say we won't need the browser anymore? I didn't mention all these benefits though, right? ðŸ¤“</p>
<h2 id="sounds-really-cool-how-can-i-do-it-then"><a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2#sounds-really-cool-how-can-i-do-it-then">#</a> Sounds really cool, how can I do it then?</h2>
<p>There are tons of tools and testing frameworks out there to accomplish this. Some of them are:</p>
<ul>
<li><a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a></li>
<li><a href="https://jestjs.io/" target="_blank" rel="noopener">Jest</a></li>
<li><a href="https://testing-library.com/" target="_blank" rel="noopener">Testing Library</a></li>
<li><a href="https://mochajs.org/" target="_blank" rel="noopener">Mocha</a></li>
<li><a href="https://devexpress.github.io/testcafe/" target="_blank" rel="noopener">TestCafe</a></li>
<li><a href="https://www.selenium.dev/" target="_blank" rel="noopener">Selenium</a></li>
<li>and many more...</li>
</ul>
<p>I highly propose Cypress for BDD tests, which is built on top of Mocha and Chai, because of the smooth
Development experience it offers and the plethora of features and selectors it provides.</p>
<p>Cypress allows us to check all the test cases running in the browser during development which is a huge benefit
obviously. At least it makes me feel much more safe ðŸ¤—</p>
<p>You can get an idea below if you haven't heard of it before:</p>
<iframe src="https://player.vimeo.com/video/237527670?title=0&amp;byline=0&amp;portrait=0" width="640" height="360" frameborder="0" allow="autoplay; fullscreen" allowfullscreen=""></iframe>
<h2 id="get-started-with-cypress"><a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2#get-started-with-cypress">#</a> Get started with Cypress</h2>
<p>We need to install Cypress in our project first:</p>

<p>Then in the <code>cypress.json</code> file we should instruct it to watch our application in the appropriate url:</p>

<p>Finally, we need to add a script in <code>package.json</code> so we can launch it with ease:</p>

<p>Now we can just launch it with:</p>

<p>While opening Cypress in a project for a first time we will get a bunch of example test cases in <code>cypress/integration</code>
folder that are meant to help us find our way faster. Of course, we can add new ones in there at will.</p>
<h2 id="write-the-first-test-case"><a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-2#write-the-first-test-case">#</a> Write the first test case</h2>
<p>For our examples below, we will build a landing page with <a href="https://expressjs.com/" target="_blank" rel="noopener">express</a> created with
<code>express-generator</code> for simplicity reasons. We will use also <a href="https://tailwindcss.com/" target="_blank" rel="noopener">TailwindCSS</a> to beautify our
components and <a href="https://github.com/alpinejs/alpine" target="_blank" rel="noopener">AlpineJS</a> to add some JavaScript flavour where needed.
You can find a link of the repository I put together for this example in the footnotes.</p>
<p>Let's test that the <code>Home</code> page actually exists in the application we are building. Remember that we are
following the BDD approach so we need to write the test first, watch it fail and then write the code needed so it
turns green.</p>
<p>A simple test case for our case here might be:</p>

<p>The <code>Home</code> page is not in place yet so the test is going to fail:</p>
<p><img src="https://mariosfakiolas.com/uploads/turn-off-your-browser-and-try-red-green-refactor-pattern-1.png" alt="Turn off your browser and try red, green &amp; refactor pattern"></p>
<p>Time to turn it to green. All we need is to create the <code>home</code> route and view and add a headline named <code>Home</code> in
the view.</p>
<p>Let's fix those missing pieces then. First the route:</p>

<p>Then the view with the <code>Home</code> heading:</p>

<p>Now test is green:</p>
<p><img src="https://mariosfakiolas.com/uploads/turn-off-your-browser-and-try-red-green-refactor-pattern-2.png" alt="Turn off your browser and try red, green &amp; refactor pattern"></p>
<p>How cool!! We don't have to test the home page manually anymore, right? That test case will do this on our behalf
from now on in an automated fashion ðŸ˜‰</p>
<p>You can find the actual codebase of this application <a href="https://github.com/fakiolinho/express-alpine-cypress" target="_blank" rel="noopener">here</a></p>
<p>To be continued on 5th of June 2020 ðŸ¤—</p>
<p>Did you miss part 1? You can find it <a href="https://mariosfakiolas.com/blog/turn-off-your-browser-and-try-red-green-refactor-pattern-part-1">here</a></p>
</div></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>