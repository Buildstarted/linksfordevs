<!DOCTYPE html>
<html lang="en">
<head>
    <title>
signalrcore -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>signalrcore</h1>
    <div class="project-description"> <p><a href="https://www.paypal.me/mandrewcito/1"><img alt="Donate" src="https://warehouse-camo.cmh1.psfhosted.org/3bb22c67e9ddb1beb055a68d5707766480222b41/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446f6e6174652d50617950616c2d677265656e2e7376673f6c6f676f3d70617970616c267374796c653d666c61742d737175617265"></a>
<img alt="Pypi" src="https://warehouse-camo.cmh1.psfhosted.org/a77ce7963b363f2185183e019815330815647d8b/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7369676e616c72636f72652e737667">
<img alt="Pypi - downloads month" src="https://warehouse-camo.cmh1.psfhosted.org/bfa0993663c34fdda76e961f9fee462c6d870686/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f7369676e616c72636f72652e737667">
<img alt="Issues" src="https://warehouse-camo.cmh1.psfhosted.org/4148a4c204f4ccd20b28c1da42f09c46018434e9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f6d616e647265776369746f2f7369676e616c72636f72652e737667">
<img alt="Open issues" src="https://warehouse-camo.cmh1.psfhosted.org/ba86c1d588ab8d7698523d7f0e4cb4e5c749a9ab/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732d7261772f6d616e647265776369746f2f7369676e616c72636f72652e737667"></p>
<h2>Links</h2>
<ul>
<li>
<p><a href="https://dev.to/mandrewcito/singlar-core-python-client-58e7">Dev to posts with library examples and implementation</a></p>
</li>
<li>
<p><a href="https://pypi.org/project/signalrcore/">Pypy</a></p>
</li>
<li>
<p><a href="https://mandrewcito.github.io/signalrcore/">Wiki - This Doc</a></p>
</li>
</ul> <pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span>\ <span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>\ <span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;reconnect_interval&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre> <p>login_function must provide auth token</p>
<pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;access_token_factory&quot;</span><span class="p">:</span> <span class="n">login_function</span><span class="p">,</span> <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;mycustomheader&quot;</span><span class="p">:</span> <span class="s2">&quot;mycustomheadervalue&quot;</span> <span class="p">}</span> <span class="p">})</span>\ <span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>\ <span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;reconnect_interval&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Configuring reconection</h2>
<p>After reaching max_attemps an exeption will be thrown and on_disconnect event will be
fired.</p>
<pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span>\ <span class="o">...</span> <span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Configuring aditional headers</h2>
<pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;mycustomheader&quot;</span><span class="p">:</span> <span class="s2">&quot;mycustomheadervalue&quot;</span> <span class="p">}</span> <span class="p">})</span> <span class="o">...</span> <span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Configuring aditional querystring parameters</h2>
<pre><span class="n">server_url</span> <span class="o">=</span><span class="s2">&quot;http.... /?myquerystringparam=134&amp;foo=bar&quot;</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span> <span class="p">})</span>\ <span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Configuring ping(keep alive)</h2>
<p>keep_alive_interval sets the secconds of ping message</p>
<pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span>\ <span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>\ <span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;reconnect_interval&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Configuring logging</h2>
<pre><span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span>\ <span class="o">.</span><span class="n">configure_logging</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>\ <span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;reconnect_interval&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre>
<h2>Events</h2>
<h3>On connect / On disconnect</h3>
<p>on_open - fires when connection is openned and ready to send messages
on_close - fires when connection is closed</p>
<pre><span class="n">hub_connection</span><span class="o">.</span><span class="n">on_open</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;connection opened and handshake received ready to send messages&quot;</span><span class="p">))</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">on_close</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;connection closed&quot;</span><span class="p">))</span>
</pre>
<h3>Register an operation</h3>
<p>ReceiveMessage - signalr method
print - function that has as parameters args of signalr method</p>
<pre><span class="n">hub_connection</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;ReceiveMessage&quot;</span><span class="p">,</span> <span class="nb">print</span><span class="p">)</span>
</pre>
<h2>Sending messages</h2>
<p>SendMessage - signalr method
username, message - parameters of signalrmethod</p>
<pre> <span class="n">hub_connection</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;SendMessage&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">username</span><span class="p">,</span> <span class="n">message</span><span class="p">])</span>
</pre>
<h2>Requesting streamming (Server to client)</h2>
<pre><span class="n">hub_connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span> <span class="s2">&quot;Counter&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">),</span> <span class="mi">500</span><span class="p">])</span><span class="o">.</span><span class="n">subscribe</span><span class="p">({</span> <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_next</span><span class="p">,</span> <span class="s2">&quot;complete&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_complete</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span> <span class="p">})</span>
</pre>
<h2>Full Examples</h2>
<p>Using package from <a href="https://codeload.github.com/aspnet/Docs/zip/master">aspnet core - SignalRChat</a>
example chat without auth</p>
<pre><span class="kn">from</span> <span class="nn">signalrcore.hub_connection_builder</span> <span class="kn">import</span> <span class="n">HubConnectionBuilder</span> <span class="k">def</span> <span class="nf">input_with_default</span><span class="p">(</span><span class="n">input_text</span><span class="p">,</span> <span class="n">default_value</span><span class="p">):</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">input_text</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">default_value</span><span class="p">))</span> <span class="k">return</span> <span class="n">default_value</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="n">value</span> <span class="n">server_url</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your server url(default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;ws://localhost:62342/chathub&quot;</span><span class="p">)</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your username (default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;mandrewcito&quot;</span><span class="p">)</span> <span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span><span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;reconnect_interval&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;max_attempts&quot;</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;ReceiveMessage&quot;</span><span class="p">,</span> <span class="nb">print</span><span class="p">)</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># Do login</span> <span class="k">while</span> <span class="n">message</span> <span class="o">!=</span> <span class="s2">&quot;exit()&quot;</span><span class="p">:</span> <span class="n">message</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;&gt;&gt; &quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s2">&quot;exit()&quot;</span><span class="p">:</span> <span class="n">hub_connection</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;SendMessage&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">username</span><span class="p">,</span> <span class="n">message</span><span class="p">])</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre>
<p>Using package from <a href="https://codeload.github.com/aspnet/Docs/zip/master">aspnet core - SignalRAuthenticationSample</a> ,</p>
<h2>Example with Auth</h2>
<pre><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">signalrcore.hub_connection_builder</span> <span class="kn">import</span> <span class="n">HubConnectionBuilder</span> <span class="k">def</span> <span class="nf">input_with_default</span><span class="p">(</span><span class="n">input_text</span><span class="p">,</span> <span class="n">default_value</span><span class="p">):</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">input_text</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">default_value</span><span class="p">))</span> <span class="k">return</span> <span class="n">default_value</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="n">value</span> <span class="k">def</span> <span class="nf">signalr_core_example_login</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">username_password</span><span class="p">):</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">username_password</span><span class="p">})</span> <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="n">login_url</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your server login url(</span><span class="si">{0}</span><span class="s1">):&apos;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:50746/account/token&quot;</span><span class="p">)</span>
<span class="n">server_url</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your server url(default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;ws://localhost:50746/hubs/chat&quot;</span><span class="p">)</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your username (default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;mandrewcito@mandrewcito.com&quot;</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your password (default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;Abc123.--123?&quot;</span><span class="p">)</span> <span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span>\ <span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;access_token_factory&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">signalr_core_example_login</span><span class="p">(</span><span class="n">login_url</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span> <span class="p">})</span><span class="o">.</span><span class="n">with_automatic_reconnect</span><span class="p">({</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="s2">&quot;keep_alive_interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;intervals&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">})</span>\ <span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="n">hub_connection</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;ReceiveSystemMessage&quot;</span><span class="p">,</span> <span class="nb">print</span><span class="p">)</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;ReceiveChatMessage&quot;</span><span class="p">,</span> <span class="nb">print</span><span class="p">)</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;ReceiveDirectMessage&quot;</span><span class="p">,</span> <span class="nb">print</span><span class="p">)</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">while</span> <span class="n">message</span> <span class="o">!=</span> <span class="s2">&quot;exit()&quot;</span><span class="p">:</span> <span class="n">message</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;&gt;&gt; &quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s2">&quot;exit()&quot;</span><span class="p">:</span> <span class="n">hub_connection</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Send&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">message</span><span class="p">])</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre> <p>Using package from <a href="https://codeload.github.com/aspnet/Docs/zip/master">aspnet core - SignalRStreaming</a> ,</p>
<pre><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">signalrcore.hub_connection_builder</span> <span class="kn">import</span> <span class="n">HubConnectionBuilder</span> <span class="k">def</span> <span class="nf">input_with_default</span><span class="p">(</span><span class="n">input_text</span><span class="p">,</span> <span class="n">default_value</span><span class="p">):</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">input_text</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">default_value</span><span class="p">))</span> <span class="k">return</span> <span class="n">default_value</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="n">value</span> <span class="n">server_url</span> <span class="o">=</span> <span class="n">input_with_default</span><span class="p">(</span><span class="s1">&apos;Enter your server url(default: </span><span class="si">{0}</span><span class="s1">): &apos;</span><span class="p">,</span> <span class="s2">&quot;ws://localhost:57957/streamHub&quot;</span><span class="p">)</span> <span class="n">hub_connection</span> <span class="o">=</span> <span class="n">HubConnectionBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">with_url</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">hub_connection</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">def</span> <span class="nf">bye</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span> <span class="k">if</span> <span class="n">error</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;complete! &quot;</span><span class="p">)</span> <span class="k">global</span> <span class="n">hub_connection</span> <span class="n">hub_connection</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">hub_connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span> <span class="s2">&quot;Counter&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span><span class="o">.</span><span class="n">subscribe</span><span class="p">({</span> <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;next callback: &quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="s2">&quot;complete&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">bye</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">bye</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">})</span>
</pre> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>