<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Building Bootleg BuiltWith &#x2013; Blog &#x2013; Emerson Code - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Building Bootleg BuiltWith &#x2013; Blog &#x2013; Emerson Code - linksfor.dev(s)"/>
    <meta property="og:description" content="What if you wanted to find a list of websites that are using a specific piece of technology? Like if you wanted a list of all websites using WordPress? Or in my case, all websites built with Shopify?"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://emersoncode.com/blog/building-bootleg-builtwith/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Building Bootleg BuiltWith &#x2013; Blog &#x2013; Emerson Code</title>
<div class="readable">
        <h1>Building Bootleg BuiltWith &#x2013; Blog &#x2013; Emerson Code</h1>
            <div>Reading time: 7-9 minutes</div>
        <div>Posted here: 01 Jul 2020</div>
        <p><a href="https://emersoncode.com/blog/building-bootleg-builtwith/">https://emersoncode.com/blog/building-bootleg-builtwith/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><article id="post-176">
	<!-- .entry-header -->

	<div>
		
<h5>How I outperformed BuiltWith and PublicWWW’s free plans with a couple hours and 30 lines of code.</h5>



<figure><img src="https://emersoncode.com/blog/wp-content/uploads/2020/07/Screen-Shot-2020-07-01-at-12.16.58-PM.png" alt="" srcset="https://emersoncode.com/blog/wp-content/uploads/2020/07/Screen-Shot-2020-07-01-at-12.16.58-PM.png 954w, https://emersoncode.com/blog/wp-content/uploads/2020/07/Screen-Shot-2020-07-01-at-12.16.58-PM-300x159.png 300w, https://emersoncode.com/blog/wp-content/uploads/2020/07/Screen-Shot-2020-07-01-at-12.16.58-PM-768x407.png 768w" sizes="(max-width: 954px) 100vw, 954px"></figure>



<p>What if you wanted to find a list of websites that are using a specific piece of technology? Like if you wanted a list of all websites using WordPress? <strong>Or in my case, all websites built with Shopify?</strong></p>



<p>You might turn to <a href="https://builtwith.com/">BuiltWith</a> or <a href="https://publicwww.com/">PublicWWW</a>. These sites scan the source code of websites to determine the technology the website is built on. </p>



<p>Very useful and cool! Until you see the pricing pages:</p>



<figure><img src="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.37.55-PM-1024x517.png" alt="" srcset="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.37.55-PM-1024x517.png 1024w, https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.37.55-PM-300x151.png 300w, https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.37.55-PM-768x388.png 768w, https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.37.55-PM.png 1214w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>Now, let me just say – I get it. </p>



<p>The work they’re doing ain’t easy, and the pricing is justifiable, <strong>but I know how to code, like a fun challenge, and can’t help but wonder if I can build my own version?</strong></p>



<p>Let’s find out…</p>



<p><strong>The way I see it, this problem has two components:</strong></p>



<ol><li>I need a script that can automatically check, when supplied a website domain, if that website is using Shopify or not.</li><li>I need a really big list of website domains to run the first script against.<br></li></ol>



<p>Once I have both of those pieces, I can put them together to make my Bootleg Builtwith. </p>



<h2>Part 1: Determining if a certain website uses Shopify</h2>



<p>Let’s start with the first component: When given a website URL, I need a reliable method to check if that website uses Shopify.</p>



<p>The simplest way to check if a website is using Shopify is to inspect the website source, and look for code that only a Shopify store would use.</p>



<p>Now, I already know of such a snippet that is unique to Shopify stores: It’s ‘trekkie’ – which is what Shopify calls their custom analytics solution:</p>



<figure><img src="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-3.14.56-PM.png" alt="" srcset="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-3.14.56-PM.png 753w, https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-3.14.56-PM-300x102.png 300w" sizes="(max-width: 753px) 100vw, 753px"></figure>



<p>Cool. Let’s use that as a base point and start coding.</p>



<p>Let’s write a dead simple, 15 line, Ruby script to kick this off:</p>



<pre><code lang="ruby"><span>require</span> <span>'open-uri'</span>


puts <span>"What URL do you want to check?"</span>
url <span>=</span> gets<span>.</span>chomp


html <span>=</span> <span>open</span><span>(</span>url<span>)</span><span>.</span>read


<span>if</span> html<span>.</span>include<span>?</span> <span>"var trekkie = window.ShopifyAnalytics.lib"</span>
	puts <span>'This site uses Shopify'</span>
<span>else</span>
	puts <span>'This site does not use Shopify'</span>
<span>end</span> 
 </code></pre>



<p>Cool. Let’s run it, and try testing it against a couple websites to make sure it’s reliable:</p>



<figure><video controls="" src="https://emersoncode.com/blog/wp-content/uploads/2020/07/My-Movie-Medium.mov"></video></figure>



<ul><li>First test using a Shopify site =&gt; https://emerson-code-development.myshopify.com<ul><li>That worked. Let’s try a different Shopify website:</li></ul></li><li>Second test with another Shopify site =&gt; https://allbirds.com<ul><li>Once again, looking good. Now let’s try a website that definitely doesn’t use Shopify.</li></ul></li><li>Third test with a site that doesn’t use Shopify =&gt; https://amazon.com<ul><li>Error!</li></ul></li></ul>



<p>Ah, yes, I should’ve anticipated this but Amazon blocks my script from inspecting the website source code here. </p>



<p>Now I could get crazy and break out a more sophisticated scraping solution like <a href="http://watir.com/">Watir</a> but remember this is bootleg, so let’s think through that extra work for a second…</p>



<p>So if Shopify stores don’t block my script, can’t I just assume that if my script is blocked, that it’s not a Shopify store? Makes sense to me. Let’s do that:</p>



<pre><code lang="ruby"><span>begin</span>
		html <span>=</span> <span>open</span><span>(</span>url<span>)</span><span>.</span>read

		<span>if</span> html<span>.</span>include<span>?</span> <span>"var trekkie = window.ShopifyAnalytics.lib"</span>
			puts url <span>+</span> <span>': This site uses Shopify'</span>
			
			<span>CSV</span><span>.</span><span>open</span><span>(</span><span>"/Users/emerson/Downloads/results-shopify-stores.csv"</span><span>,</span> <span>"a"</span><span>)</span> <span>do</span> <span>|</span>csv<span>|</span>
			  csv <span>&lt;</span><span>&lt;</span> <span>[</span>url<span>]</span>
			<span>end</span>
		<span>else</span>
			puts url <span>+</span> <span>': This site does not use Shopify'</span>
		<span>end</span> 
	<span>rescue</span>
		puts url <span>+</span> <span>': Blocked. Probably does not use Shopify'</span>
	<span>end</span></code></pre>



<p>Okay. Bingo. Part 1’s solution is decent enough.</p>



<h2>Part 2: Get a big list of websites</h2>



<p><strong>Onto the next one: </strong>I need a massive list of domains to check.</p>



<p>Search engines typically use something called spiders here to find and create directories/lists of webpages. Spiders start at one webpage, follow all the links on that webpage, and then the links on those webpages, and so on until it has mapped all the webpages it can get its hands on.</p>



<p>Now if you wanted to build a Builtwith competitor you’d probably need to do something like that, but this is bootleg baby!</p>



<p>I remember Alexa.com has a list of the top million website domains or whatever. I wonder if they make the list publicly available? Surely that’d give me a lot of high ranking websites to check, and high ranked websites are what we’d prefer here anyway, right?</p>



<p>A quick google search revealed <a rel="noreferrer noopener" href="https://gist.github.com/chilts/7229605" target="_blank">this</a> Github thread with some decent leads, and from that thread I have a downloaded CSV of the ‘top million domains’.</p>



<p>Checking the spreadsheet, it only has 764,166 domains, not 1 million… Good enough!</p>



<p>Let’s start with a couple lines of Ruby code that can use a CSV spreadsheet file as an input, and loop through each domain to perform my Shopify check I outlined in part 1.</p>



<p>Oh yeah… the domain list only includes the URL’s base: Eg bestbuy.com, not https://www.bestbuy.com. That’s okay, let’s just assume most domains are using https:// and prepend it to the start of every URL before we check it:</p>



<pre><code lang="ruby">url <span>=</span> <span>'https://'</span> <span>+</span> url</code></pre>



<p>Cool. One last thing. If my script does detect a Shopify store, let’s go ahead and save that to a separate CSV to serve as my output, so when my scripts finished, I’m left with just list of websites using Shopify.</p>



<pre><code lang="ruby"><span>if</span> html<span>.</span>include<span>?</span> <span>"var trekkie = window.ShopifyAnalytics.lib"</span>
   puts url <span>+</span> <span>': This site uses Shopify'</span>
   
   <span>CSV</span><span>.</span><span>open</span><span>(</span><span>"/Users/emerson/Downloads/results-shopify-stores.csv"</span><span>,</span> <span>"w"</span><span>)</span> <span>do</span> <span>|</span>csv<span>|</span>
      csv <span>&lt;</span><span>&lt;</span> <span>[</span>url<span>]</span>
   <span>end</span>
<span>else</span>
<span>.</span><span>.</span><span>.</span></code></pre>



<p>Okay… One hour later and I barely have gotten through 1000 URLs, and none of those are Shopify sites it seems. </p>



<p>Make sense. If you’re one of the top websites in the world, it’d make sense that you’d be using a custom platform to run it.</p>



<p>Given that, to make this a little bit easier, let’s go ahead and skip the first 50K top sites and start scanning at 50,001:</p>



<pre><code lang="ruby">domainList <span>=</span> <span>CSV</span><span>.</span><span>read</span><span>(</span><span>'/Users/emerson/Downloads/top-1m.csv'</span><span>,</span> headers<span>:true</span><span>)</span>

domainList<span>.</span><span>drop</span><span>(</span><span>50000</span><span>)</span><span>.</span><span>each</span> <span>do</span> <span>|</span>row<span>|</span>
    url <span>=</span> row<span>[</span><span>1</span><span>]</span>
    url <span>=</span> <span>'https://'</span> <span>+</span> url
    <span>isUsingShop</span><span>(</span>url<span>)</span>
<span>end</span>
</code></pre>



<p>A couple minutes later and we got one! </p>



<figure><img src="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.21.48-PM.png" alt="" srcset="https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.21.48-PM.png 517w, https://emersoncode.com/blog/wp-content/uploads/2020/06/Screen-Shot-2020-06-30-at-4.21.48-PM-300x240.png 300w" sizes="(max-width: 517px) 100vw, 517px"></figure>



<p>After letting that script run in the background for a few hours, I’ve checked about ~12K domains (Alexa’s top 50K-62K domains), and found ~220 of those sites are using Shopify. So 1.83% of the so far checked domains were using Shopify.</p>



<p>Quick and dirty math: Roughly 700K domains still need to be checked. Assuming similar positive rate as the domains I have checked so far, my bootleg script should produce a list of 10K+ high ranking Shopify stores.</p>



<p><strong>Free BuiltWith: 50 high ranking Shopify stores</strong></p>



<p><strong>Free PublicWWW: 2359 high ranking Shopify stores</strong></p>



<p><strong>30 lines of Ruby code: 10K+ high ranking Shopify stores</strong>* (Estimated, will update when I have final numbers)</p>



<h3>To be continued!</h3>



<p>Also, here is complete Ruby script:</p>



<pre><code lang="ruby"><span>require</span> <span>'csv'</span>
<span>require</span> <span>'open-uri'</span>

<span>def</span> <span>isUsingShop</span><span>(</span>url<span>)</span>
	<span>begin</span>
		html <span>=</span> <span>open</span><span>(</span>url<span>)</span><span>.</span>read

		<span>if</span> html<span>.</span>include<span>?</span> <span>"var trekkie = window.ShopifyAnalytics.lib"</span>
			puts url <span>+</span> <span>': This site uses Shopify'</span>
			
			<span>CSV</span><span>.</span><span>open</span><span>(</span><span>"/Users/emerson/Downloads/results-shopify-stores.csv"</span><span>,</span> <span>"a"</span><span>)</span> <span>do</span> <span>|</span>csv<span>|</span>
			  csv <span>&lt;</span><span>&lt;</span> <span>[</span>url<span>]</span>
			<span>end</span>
		<span>else</span>
			puts url <span>+</span> <span>': This site does not use Shopify'</span>
		<span>end</span> 
	<span>rescue</span>
		puts url <span>+</span> <span>': Blocked. Probably does not use Shopify'</span>
	<span>end</span>
<span>end</span> 

domainList <span>=</span> <span>CSV</span><span>.</span><span>read</span><span>(</span><span>'/Users/emerson/Downloads/top-1m.csv'</span><span>,</span> headers<span>:true</span><span>)</span>

domainList<span>.</span><span>drop</span><span>(</span><span>50001</span><span>)</span><span>.</span><span>each</span> <span>do</span> <span>|</span>row<span>|</span>
    url <span>=</span> row<span>[</span><span>1</span><span>]</span>
    url <span>=</span> <span>'https://'</span> <span>+</span> url

    <span>isUsingShop</span><span>(</span>url<span>)</span>

<span>end</span>



 </code></pre>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>