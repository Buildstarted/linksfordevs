<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 5.0 Preview 3 | .NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Announcing Entity Framework Core 5.0 Preview 3 | .NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="https://facebook.com/cdaJeremyLikness"/>
    <meta property="og:description" content="The latest version of Entity Framework Core features filtered includes, new model builder API for navigation, Cosmos DB partition keys, and more."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-3/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Announcing Entity Framework Core 5.0 Preview 3 | .NET Blog</title>
<div class="readable">
        <h1>Announcing Entity Framework Core 5.0 Preview 3 | .NET Blog</h1>
            <div>by https://facebook.com/cdaJeremyLikness</div>
            <div>Reading time: 7-9 minutes</div>
        <div>Posted here: 24 Apr 2020</div>
        <p><a href="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-3/">https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-3/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured"><div><div><div><div><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2018/10/Jeremy-Likness-150x150.jpg" width="58" height="58" alt="Jeremy Likness"></p><p>Jeremy</p></div></div></div><p>April 23rd, 2020</p><p>Today we are excited to announce the third preview release of <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.3.20181.2" target="_blank">EF Core 5.0</a>.</p><p>The third previews of <a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0-preview-3/">.NET 5</a> and <a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-5-preview-3/">ASP.NET Core 5.0</a> are also available now.</p><h2 id="prerequisites">Prerequisites<a href="#prerequisites"></a></h2><p>The previews of EF Core 5.0 require .NET Standard 2.1. This means:</p><ul><li>EF Core 5.0 runs on .NET Core 3.1; it does not require .NET 5.<ul><li>This may change in future previews depending on how the plan for .NET 5 evolves.</li></ul></li><li>EF Core 5.0 runs on other platforms that support <a href="https://docs.microsoft.com/ef/core/platforms/" target="_blank">.NET Standard 2.1</a>.</li><li>EF Core 5.0 will <strong>not</strong> run on .NET Standard 2.0 platforms, including .NET Framework.</li></ul><hr><h2 id="how-to-get-ef-core-5-0-previews">How to get EF Core 5.0 previews<a href="#how-to-get-ef-core-5-0-previews"></a></h2><p>EF Core is distributed exclusively as a set of NuGet packages.<br> For example, to add the SQL Server provider to your project, you can use the following command using the dotnet tool:</p><pre><span>dotnet </span><span>add</span><span> </span><span>package</span><span> </span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>SqlServer</span><span> </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>3.20181</span><span>.</span><span>2</span></pre><p>The EF Core packages published today are:</p><ul><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore</a> – The main EF Core package</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.SqlServer</a> – Database provider for Microsoft SQL Server and SQL Azure</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Sqlite</a> – Database provider for SQLite</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Cosmos/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Cosmos</a> – Database provider for Azure Cosmos DB</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.InMemory/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.InMemory</a> – The in-memory database provider</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Tools/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Tools</a> – EF Core PowerShell commands for the Visual Studio Package Manager Console</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Design/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Design</a> – Shared design-time components for EF Core tools</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite</a> – SQL Server support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite</a> – SQLite support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Proxies/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Proxies</a> – Lazy-loading and change-tracking proxies</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Abstractions/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Abstractions</a> – Decoupled EF Core abstractions</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Relational/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Relational</a> – Shared EF Core components for relational database providers</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Analyzers/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Analyzers</a> – C# analyzers for EF Core</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.Core/5.0.0-preview.3.20181.2" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.Core</a> – Database provider for SQLite without a packaged native binary</li></ul><p>We have also published the 5.0 preview 3 release of the <a href="https://www.nuget.org/packages/Microsoft.Data.Sqlite.Core/5.0.0-preview.3.20181.2" target="_blank">Microsoft.Data.Sqlite.Core</a> ADO.NET provider.</p><h2 id="installing-dotnet-ef">Installing dotnet ef<a href="#installing-dotnet-ef"></a></h2><p>As with EF Core 3.0 and 3.1, the dotnet ef command-line tool is no longer included in the .NET Core SDK. Before you can execute EF Core migration or scaffolding commands, you’ll have to install this package as either a global or local tool.</p><p>To install the preview tool globally, first uninstall any existing version with:</p><pre><span>dotnet tool uninstall </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef</span></pre><p>Then install with:</p><pre><span>dotnet tool install </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>3.20181</span><span>.</span><span>2</span></pre><p>It’s possible to use this new version of dotnet ef with projects that use older versions of the EF Core runtime.</p><figure><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-1024x353.jpg" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-1024x353.jpg" alt="Entity Framework Core 5.0 Preview 3" width="640" height="221" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-1024x353.jpg 1024w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-300x103.jpg 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-768x265.jpg 768w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-1536x529.jpg 1536w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview3-scaled.jpg 2048w" sizes="(max-width: 640px) 100vw, 640px"> </a><figcaption>Entity Framework Core 5.0 Preview 3 CLI</figcaption></figure><hr><h2 id="what-s-new-in-ef-core-5-preview-3">What’s new in EF Core 5 Preview 3<a href="#what-s-new-in-ef-core-5-preview-3"></a></h2><p>We maintain documentation covering <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-5.0/whatsnew" target="_blank">new features introduced into each preview</a>.</p><p>Some of the highlights from preview 3 are called out below.</p><h3 id="filtered-include">Filtered Include</h3><p>The Include method now supports filtering of the entities included.<br> For example:</p><pre><code><span><span><span>var</span></span></span><span><span> blogs </span></span><span><span>=</span></span><span><span> context</span></span><span><span>.</span></span><span><span>Blogs</span></span><span><span>
    </span></span><span><span>.</span></span><span><span>Include</span></span><span><span>(</span></span><span><span><span><span>e</span></span></span><span><span> </span></span><span><span>=&gt;</span></span></span><span><span> e</span></span><span><span>.</span></span><span><span>Posts</span></span><span><span>.</span></span><span><span>Where</span></span><span><span>(</span></span><span><span><span><span>p</span></span></span><span><span> </span></span><span><span>=&gt;</span></span></span><span><span> p</span></span><span><span>.</span></span><span><span>Title</span></span><span><span>.</span></span><span><span>Contains</span></span><span><span>(</span></span><span><span><span>"Cheese"</span></span></span><span><span>)))</span></span><span><span>
    </span></span><span><span>.</span></span><span><span>ToList</span></span><span><span>();</span></span></code></pre><p>This query will return blogs together with each associated post, but only when the post title contains “Cheese”.</p><p>Skip and Take can also be used to reduce the number of included entities.<br> For example:</p><pre><code><span><span>var</span></span><span><span> </span></span><span><span><span>blogs </span></span></span><span><span>=</span></span><span><span> </span></span><span><span><span>context</span></span></span><span><span>.</span></span><span><span><span>Blogs</span></span><span><span>
</span></span></span><span><span>    </span></span><span><span><span>.</span></span><span><span>Include</span></span></span><span><span>(</span></span><span><span>e </span></span><span><span>=&gt;</span></span><span><span> e</span></span><span><span>.</span></span><span><span>Posts</span></span><span><span>.</span></span><span><span><span>OrderByDescending</span></span><span><span>(</span></span><span><span>post </span></span></span><span><span>=&gt;</span></span><span><span> post</span></span><span><span>.</span></span><span><span>Title</span></span><span><span>).</span></span><span><span>Take</span></span><span><span>(</span></span><span><span><span>5</span></span></span><span><span>)))</span></span><span><span>
    </span></span><span><span>.</span></span><span><span>ToList</span></span><span><span>()</span></span>
</code></pre><p>This query will return blogs with at most five posts included on each blog.</p><p>See the <a href="https://docs.microsoft.com/ef/core/querying/related-data#filtered-include" target="_blank">Include documentation</a> for full details.</p><h3 id="new-modelbuilder-api-for-navigation-properties">New ModelBuilder API for navigation properties</h3><p>Navigation properties are primarily configured when <a href="https://docs.microsoft.com/ef/core/modeling/relationships" target="_blank">defining relationships</a>.<br> However, the new <code><span>Navigation</span></code> method can be used in the cases where navigation properties need additional configuration.<br> For example, to set a backing field for the navigation when the field would not be found by convention:</p><pre><code><span><span>modelBuilder</span></span><span><span>.</span></span><span><span>Entity</span></span><span><span>&lt;</span></span><span><span>Blog</span></span><span><span>&gt;().</span></span><span><span>Navigation</span></span><span><span>(</span></span><span><span><span><span>e</span></span></span><span><span> </span></span><span><span>=&gt;</span></span></span><span><span> e</span></span><span><span>.</span></span><span><span>Posts</span></span><span><span>).</span></span><span><span>HasField</span></span><span><span>(</span></span><span><span><span>"_myposts"</span></span></span><span><span>);</span></span></code></pre><p>Note that the <code><span>Navigation</span></code> API does not replace relationship configuration.<br> Instead it allows additional configuration of navigation properties in already discovered or defined relationships.</p><p>Documentation is tracked by issue <a href="https://github.com/dotnet/EntityFramework.Docs/issues/2302" target="_blank">#2302</a>.</p><h3 id="new-command-line-parameters-for-namespaces-and-connection-strings">New command-line parameters for namespaces and connection strings</h3><p>Migrations and scaffolding now allow namespaces to be specified on the command line.<br> For example, to reverse engineer a database putting the context and model classes in different namespaces:</p><pre><code><span><span>dotnet ef dbcontext scaffold </span></span><span><span><span>"connection string"</span></span></span><span><span> </span></span><span><span>Microsoft</span></span><span><span><span>.</span></span><span><span>EntityFrameworkCore</span></span></span><span><span><span>.</span></span><span><span>SqlServer</span></span></span><span><span> </span></span><span><span>--</span></span><span><span>context</span></span><span><span>-</span></span><span><span>namespace</span></span><span><span> </span></span><span><span><span>"My.Context"</span></span></span><span><span> </span></span><span><span>--</span></span><span><span>namespace</span></span><span><span> </span></span><span><span><span>"My.Model"</span></span></span>
</code></pre><p>Also, a connection string can now be passed to the <code><span>database</span><span>-</span><span>update</span></code> command:</p><pre><code><span><span><span>dotnet </span></span></span><span><span><span>ef </span></span></span><span><span><span>database </span></span></span><span><span><span>update </span></span></span><span><span><span>--</span></span><span><span>connection</span></span></span><span><span> </span></span><span><span><span>"connection string"</span></span></span>
</code></pre><p>Equivalent parameters have also been added to the PowerShell commands used in the VS Package Manager Console.</p><p>Documentation is tracked by issue <a href="https://github.com/dotnet/EntityFramework.Docs/issues/2303" target="_blank">#2303</a>.</p><h3 id="enabledetailederrors-has-returned">EnableDetailedErrors has returned</h3><p>For performance reasons, EF doesn’t do additional null-checks when reading values from the database.<br> This can result in exceptions that are hard to root-cause when an unexpected null is encountered.</p><p>Using <code><span>EnableDetailedErrors</span></code> will add extra null checking to queries such that, for a small performance overhead, these errors are easier to trace back to a root cause.</p><p>For example:</p><pre><code><span><span><span><span>protected</span></span></span><span><span> </span></span><span><span><span>override</span></span></span><span><span> </span></span><span><span><span>void</span></span></span><span><span> </span></span><span><span><span>OnConfiguring</span></span></span><span><span>(</span></span><span><span><span>DbContextOptionsBuilder</span></span><span><span> optionsBuilder</span></span></span><span><span>)</span></span><span><span>
    </span></span></span><span><span>=&gt;</span></span><span><span> optionsBuilder
        </span></span><span><span>.</span></span><span><span>EnableDetailedErrors</span></span><span><span>()</span></span><span><span>
        </span></span><span><span>.</span></span><span><span>EnableSensitiveDataLogging</span></span><span><span>()</span></span><span><span> </span></span><span><span>
        </span></span><span><span>.</span></span><span><span>UseSqlServer</span></span><span><span>(</span></span><span><span>Your</span></span><span><span>.</span></span><span><span>SqlServerConnectionString</span></span><span><span>);</span></span></code></pre><p>Documentation is tracked by issue <a href="https://github.com/dotnet/EntityFramework.Docs/issues/955" target="_blank">#955</a>.</p><h3 id="cosmos-partition-keys">Cosmos partition keys</h3><p>The partition key to use for a given query can now be specified in the query.<br> For example:</p><pre><code><span><span><span>await</span></span></span><span><span> </span></span><span><span><span>context</span></span></span><span><span><span>.</span></span><span><span>Set</span></span></span><span><span>&lt;</span></span><span><span><span>Customer</span></span></span><span><span>&gt;()</span></span><span><span>
             </span></span><span><span><span>.</span></span><span><span>WithPartitionKey</span></span></span><span><span>(</span></span><span><span><span>myPartitionKey</span></span></span><span><span>)</span></span><span><span>
             </span></span><span><span><span>.</span></span><span><span>FirstAsync</span></span></span><span><span>();</span></span></code></pre><p>Documentation is tracked by issue <a href="https://github.com/dotnet/EntityFramework.Docs/issues/2199" target="_blank">#2199</a>.</p><h3 id="support-for-the-sql-server-datalength-function">Support for the SQL Server DATALENGTH function</h3><p>This can be accessed using the new <code><span>EF</span><span>.</span><span>Functions</span><span>.</span><span>DataLength</span></code> method.<br> For example:</p><pre><code><span><span><span>var</span></span></span><span><span> </span></span><span><span><span>count</span></span></span><span><span> </span></span><span><span>=</span></span><span><span> context</span></span><span><span>.</span></span><span><span><span>Orders</span></span></span><span><span>.</span></span><span><span><span>Count</span></span></span><span><span>(</span></span><span><span><span>c</span></span></span><span><span> </span></span><span><span>=&gt;</span></span><span><span> </span></span><span><span><span>100</span></span></span><span><span> </span></span><span><span>&lt;</span></span><span><span> </span></span><span><span><span>EF</span></span></span><span><span>.</span></span><span><span><span>Functions</span></span></span><span><span>.</span></span><span><span><span>DataLength</span></span></span><span><span>(</span></span><span><span><span>c</span></span></span><span><span>.</span></span><span><span><span>OrderDate</span></span></span><span><span>));</span></span></code></pre><hr><h2 id="daily-builds">Daily builds<a href="#daily-builds"></a></h2><p>EF Core previews are aligned with .NET 5 previews. These previews tend to lag behind the latest work on EF Core. Consider using the <a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md" target="_blank">daily builds</a> instead to get the most up-to-date EF Core features and bug fixes.</p><p>As with the previews, the daily builds do not require .NET 5; they can be used with GA/RTM release of .NET Core 3.1.</p><hr><h2 id="documentation-and-feedback">Documentation and feedback<a href="#documentation-and-feedback"></a></h2><p>EF Core docs has a new landing page! The main page for Entity Framework documentation has been overhauled to provide you with a hub experience. We hope this new format helps you find the documentation you need faster and with fewer clicks.</p><p>The starting point for all EF Core documentation is <a href="https://docs.microsoft.com/ef/" target="_blank">docs.microsoft.com/ef/</a>.</p><p>Please file issues found and any other feedback on the <a href="https://github.com/dotnet/efcore" target="_blank">dotnet/efcore GitHub repo</a>.</p><hr><h2 id="helpful-short-links">Helpful Short Links<a href="#helpful-short-links"></a></h2><p>The following short links are provided for easy reference and access.</p><p>Main documentation:<br> <a href="https://aka.ms/efdocs" target="_blank">https://aka.ms/efdocs</a></p><p>Issues and feature requests for EF Core:<br> <a href="https://aka.ms/efcorefeedback" target="_blank">https://aka.ms/efcorefeedback</a></p><p>Entity Framework Roadmap:<br> <a href="https://aka.ms/efroadmap" target="_blank">https://aka.ms/efroadmap</a></p><p>What’s new in EF Core 5.x?<br> <a href="https://aka.ms/efcore5" target="_blank">https://aka.ms/efcore5</a></p><hr><h2 id="thank-you-from-the-team">Thank you from the team<a href="#thank-you-from-the-team"></a></h2><p>A big thank you from the EF team to everyone who has used EF over the years!</p><hr><h2 id="thank-you-to-our-contributors-">Thank you to our contributors!<a href="#thank-you-to-our-contributors-"></a></h2><p>A big thank you to the following community members who have already contributed code or documentation to the EF Core 5 release! (List is in chronological order of first contribution to EF Core 5).</p></div></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>