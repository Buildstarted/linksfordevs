<!DOCTYPE html>
<html lang="en">
<head>
    <title>
r/dotnet - A wiki written in 416 lines of C#9 code all in Program.cs - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="r/dotnet - A wiki written in 416 lines of C#9 code all in Program.cs - linksfor.dev(s)"/>
    <meta property="og:description" content="153 votes and 77 comments so far on Reddit"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.reddit.com/r/dotnet/comments/huqb0y/a_wiki_written_in_416_lines_of_c9_code_all_in/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - r/dotnet - A wiki written in 416 lines of C#9 code all in Program.cs</title>
<div class="readable">
        <h1>r/dotnet - A wiki written in 416 lines of C#9 code all in Program.cs</h1>
            <div>Reading time: 2-3 minutes</div>
        <div>Posted here: 22 Jul 2020</div>
        <p><a href="https://www.reddit.com/r/dotnet/comments/huqb0y/a_wiki_written_in_416_lines_of_c9_code_all_in/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf">https://www.reddit.com/r/dotnet/comments/huqb0y/a_wiki_written_in_416_lines_of_c9_code_all_in/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><div data-click-id="text"><div theme="[object Object]"><p>Hi all,</p><p>I've recently begun rewriting an application in .NET Core to allow for it to be executed on Linux. The application consists of several web APIs (Microservice approach) and one service which will be executed via a cron schedule every <em>n</em> days.</p><p>I've dabbled in some Linux distros previously (Ubuntu mostly) and have deployed some very lightweight applications to some Linux VPS with my provider, however I am wanting to do a deployment process which is as automated as it can be using only bash shell scripts so I am agnostic to any provider (Azure DevOps, Jenkins, Bamboo etc).</p><p>Without a state management tool (Puppet, Ansible) I'd like, at the very least, to have to manually create the deployment user account and have everything else created via scripts, as creating the deployment user may just be a one time activity per server. The deployment process that I've outlined is as follows.</p><ol><li><p>Create service accounts (for each API/service) if not exists</p></li><li><p>Create systemd services for APIs</p></li><li><p>Install NGINX if not installed</p></li><li><p>Configure NGINX websites to redirect to local APIs hosted via systemd</p></li><li><p>Forward firewall ports</p></li></ol><p>Where I'm struggling is #2. If it were a Windows environment then I'd have this done in no time, but with Linux my knowledge is light and I'm not sure of the best way of creating a service in <code>/etc/systemd/service/&lt;my-app&gt;.service</code> or what the best practices are. I've looked online for this and there are quite a few different approaches, hence why I'm posting this thread to seek help/advice from any Linux fluent people. I'd like to do this with as least privilege as possible as the production instance is managed by my friend's I.T guy. The server distro will be CentOS and my development environment is Fedora.</p><p>What is the best way for a deployment service account to create systemd services? Should I somehow grant access for the deploy user to write to <code>/etc/systemd/service</code> overall? Should I use a policy to allow access to certain `service` files within <code>/etc/systemd/service</code> such as <code>my-api.service</code> <code>my-api-2.service</code> <code>...</code> ? Or, another approach I've found, should I use <a href="http://supervisord.org/" rel="noopener nofollow ugc" target="_blank">supervisord</a></p><p>I appreciate your time in reading this</p></div></div></div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>