<!DOCTYPE html>
<html lang="en">
<head>
    <title>
A Simple Range Proof From Polynomial Commitments - HackMD -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
            <h1>
                    <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">🎉</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
            </h1>
        <div class="readable">
    <h1>A Simple Range Proof From Polynomial Commitments - HackMD</h1>
    <p>
Reading time: 5-6 minutes    </p>
    <p><a href="https://hackmd.io/@dabo/B1U4kx8XI">https://hackmd.io/@dabo/B1U4kx8XI</a></p>
    <hr/>
    <div id="readability-page-1" class="page"><div id="doc" data-hard-breaks="true">

<h3 id="Dan-Boneh-Ben-Fisch-Ariel-Gabizon-and-Zac-Williamson"><a href="#Dan-Boneh-Ben-Fisch-Ariel-Gabizon-and-Zac-Williamson" title="Dan-Boneh-Ben-Fisch-Ariel-Gabizon-and-Zac-Williamson" smoothhashscroll=""><span></span></a>Dan Boneh, Ben Fisch, Ariel Gabizon, and Zac Williamson</h3>
<hr>
<p>Let’s construct a simple zero knowledge range proof from a
hiding polynomial commitment scheme (PCS).</p>
<h3 id="The-setup"><a href="#The-setup" title="The-setup" smoothhashscroll=""><span></span></a>The setup</h3>
<p>Let <span><span><span id="MJXp-Span-2"><span id="MJXp-Span-3">p</span></span></span></span> be a prime, where <span><span><span id="MJXp-Span-4"><span id="MJXp-Span-5">p</span><span id="MJXp-Span-6">&gt;</span><span id="MJXp-Span-7"><span id="MJXp-Span-8">2</span><span id="MJXp-Span-9">n</span></span></span></span></span> for some <span><span><span id="MJXp-Span-10"><span id="MJXp-Span-11">n</span></span></span></span>. We want a commitment scheme for elements in <span><span><span id="MJXp-Span-12"><span id="MJXp-Span-13"><span id="MJXp-Span-14"><span id="MJXp-Span-15">F</span></span><span id="MJXp-Span-16">p</span></span></span></span></span> that allows a prover to efficiently convince a verifier that a committed quantity <span><span><span id="MJXp-Span-17"><span id="MJXp-Span-18">z</span><span id="MJXp-Span-19">∈</span><span id="MJXp-Span-20"><span id="MJXp-Span-21"><span id="MJXp-Span-22">F</span></span><span id="MJXp-Span-23">p</span></span></span></span></span> is in the range <span><span><span id="MJXp-Span-24"><span id="MJXp-Span-25">0</span><span id="MJXp-Span-26">≤</span><span id="MJXp-Span-27">z</span><span id="MJXp-Span-28">&lt;</span><span id="MJXp-Span-29"><span id="MJXp-Span-30">2</span><span id="MJXp-Span-31">n</span></span></span></span></span>.</p>
<p>We show that for a committed <span><span><span id="MJXp-Span-32"><span id="MJXp-Span-33">z</span><span id="MJXp-Span-34">∈</span><span id="MJXp-Span-35"><span id="MJXp-Span-36"><span id="MJXp-Span-37">F</span></span><span id="MJXp-Span-38">p</span></span></span></span></span>, the prover can provide an HVZK proof to convince the verifier
that <span><span><span id="MJXp-Span-39"><span id="MJXp-Span-40">0</span><span id="MJXp-Span-41">≤</span><span id="MJXp-Span-42">z</span><span id="MJXp-Span-43">&lt;</span><span id="MJXp-Span-44"><span id="MJXp-Span-45">2</span><span id="MJXp-Span-46">n</span></span></span></span></span> by committing to two polynomials of degree <span><span><span id="MJXp-Span-47"><span id="MJXp-Span-48">(</span><span id="MJXp-Span-49">n</span><span id="MJXp-Span-50">−</span><span id="MJXp-Span-51">1</span><span id="MJXp-Span-52">)</span></span></span></span>, and running the polynomial evaluation protocol twice. Therefore:</p>
<ul>
<li>For the pairing-based polynomial commitment scheme of Kate, Zaverucha and Goldberg, this gives a range proof of length <span><span><span id="MJXp-Span-53"><span id="MJXp-Span-54"><span id="MJXp-Span-55">O</span><span id="MJXp-Span-56">λ</span></span><span id="MJXp-Span-57">(</span><span id="MJXp-Span-58">1</span><span id="MJXp-Span-59">)</span></span></span></span> that can be verified in time <span><span><span id="MJXp-Span-60"><span id="MJXp-Span-61"><span id="MJXp-Span-62">O</span><span id="MJXp-Span-63">λ</span></span><span id="MJXp-Span-64">(</span><span id="MJXp-Span-65">1</span><span id="MJXp-Span-66">)</span></span></span></span>, with a trusted setup and an updatable SRS of size <span><span><span id="MJXp-Span-67"><span id="MJXp-Span-68"><span id="MJXp-Span-69">O</span><span id="MJXp-Span-70">λ</span></span><span id="MJXp-Span-71">(</span><span id="MJXp-Span-72">n</span><span id="MJXp-Span-73">)</span></span></span></span>.</li>
<li>For the DARK polynomial commitment scheme of Bünz, Fisch, and Szepieniec, this gives a range proof of length <span><span><span id="MJXp-Span-74"><span id="MJXp-Span-75"><span id="MJXp-Span-76">O</span><span id="MJXp-Span-77">λ</span></span><span id="MJXp-Span-78">(</span><span id="MJXp-Span-79">log</span><span id="MJXp-Span-80"></span><span id="MJXp-Span-81">n</span><span id="MJXp-Span-82">)</span></span></span></span> that can be verified in time <span><span><span id="MJXp-Span-83"><span id="MJXp-Span-84"><span id="MJXp-Span-85">O</span><span id="MJXp-Span-86">λ</span></span><span id="MJXp-Span-87">(</span><span id="MJXp-Span-88">log</span><span id="MJXp-Span-89"></span><span id="MJXp-Span-90">n</span><span id="MJXp-Span-91">)</span></span></span></span>, with no trusted setup.</li>
<li>For comparison, recall that Bulletproofs give a range proof with no trusted setup of length <span><span><span id="MJXp-Span-92"><span id="MJXp-Span-93"><span id="MJXp-Span-94">O</span><span id="MJXp-Span-95">λ</span></span><span id="MJXp-Span-96">(</span><span id="MJXp-Span-97">log</span><span id="MJXp-Span-98"></span><span id="MJXp-Span-99">n</span><span id="MJXp-Span-100">)</span></span></span></span> that can be verified in time <span><span><span id="MJXp-Span-101"><span id="MJXp-Span-102"><span id="MJXp-Span-103">O</span><span id="MJXp-Span-104">λ</span></span><span id="MJXp-Span-105">(</span><span id="MJXp-Span-106">n</span><span id="MJXp-Span-107">)</span></span></span></span>.</li>
</ul>
<p>In what follows we use <span><span><span id="MJXp-Span-108"><span id="MJXp-Span-109"><span id="MJXp-Span-110"><span id="MJXp-Span-111">F</span></span><span><span><span><span><span id="MJXp-Span-113"><span id="MJXp-Span-114"><span id="MJXp-Span-115"><span id="MJXp-Span-116">(</span><span id="MJXp-Span-117">&lt;</span><span id="MJXp-Span-118">n</span><span id="MJXp-Span-119">)</span></span></span></span></span></span></span><span><span><span><span id="MJXp-Span-112">p</span></span></span></span></span></span><span id="MJXp-Span-120">[</span><span id="MJXp-Span-121">X</span><span id="MJXp-Span-122">]</span></span></span></span> to denote polynomials in <span><span><span id="MJXp-Span-123"><span id="MJXp-Span-124"><span id="MJXp-Span-125"><span id="MJXp-Span-126">F</span></span><span id="MJXp-Span-127">p</span></span><span id="MJXp-Span-128">[</span><span id="MJXp-Span-129">X</span><span id="MJXp-Span-130">]</span></span></span></span> of degree less than <span><span><span id="MJXp-Span-131"><span id="MJXp-Span-132">n</span></span></span></span>.  We assume that <span><span><span id="MJXp-Span-133"><span id="MJXp-Span-134">n</span></span></span></span> divides <span><span><span id="MJXp-Span-135"><span id="MJXp-Span-136">p</span><span id="MJXp-Span-137">−</span><span id="MJXp-Span-138">1</span></span></span></span> so that there is an element <span><span><span id="MJXp-Span-139"><span id="MJXp-Span-140">ω</span><span id="MJXp-Span-141">∈</span><span id="MJXp-Span-142"><span id="MJXp-Span-143"><span id="MJXp-Span-144">F</span></span><span id="MJXp-Span-145">p</span></span></span></span></span> of order <span><span><span id="MJXp-Span-146"><span id="MJXp-Span-147">n</span></span></span></span>.  Let <span><span><span id="MJXp-Span-148"><span id="MJXp-Span-149">H</span><span id="MJXp-Span-150">=</span><span id="MJXp-Span-151">{</span><span id="MJXp-Span-152">1</span><span id="MJXp-Span-153">,</span><span id="MJXp-Span-154">ω</span><span id="MJXp-Span-155">,</span><span id="MJXp-Span-156"><span id="MJXp-Span-157">ω</span><span id="MJXp-Span-158">2</span></span><span id="MJXp-Span-159">,</span><span id="MJXp-Span-160">…</span><span id="MJXp-Span-161">,</span><span id="MJXp-Span-162"><span id="MJXp-Span-163">ω</span><span id="MJXp-Span-164"><span id="MJXp-Span-165">n</span><span id="MJXp-Span-166">−</span><span id="MJXp-Span-167">1</span></span></span><span id="MJXp-Span-168">}</span></span></span></span>.</p>
<h3 id="The-commitment-scheme"><a href="#The-commitment-scheme" title="The-commitment-scheme" smoothhashscroll=""><span></span></a>The commitment scheme</h3>
<p>Suppose that we have available a hiding and binding PCS for polynomials in <span><span><span id="MJXp-Span-169"><span id="MJXp-Span-170"><span id="MJXp-Span-171"><span id="MJXp-Span-172">F</span></span><span><span><span><span><span id="MJXp-Span-174"><span id="MJXp-Span-175"><span id="MJXp-Span-176"><span id="MJXp-Span-177">(</span><span id="MJXp-Span-178">&lt;</span><span id="MJXp-Span-179">n</span><span id="MJXp-Span-180">)</span></span></span></span></span></span></span><span><span><span><span id="MJXp-Span-173">p</span></span></span></span></span></span><span id="MJXp-Span-181">[</span><span id="MJXp-Span-182">X</span><span id="MJXp-Span-183">]</span></span></span></span>. Moreover, we assume that the polynomial evaluation protocol is HVZK.</p>
<p>To commit to an element <span><span><span id="MJXp-Span-184"><span id="MJXp-Span-185">z</span><span id="MJXp-Span-186">∈</span><span id="MJXp-Span-187"><span id="MJXp-Span-188"><span id="MJXp-Span-189">F</span></span><span id="MJXp-Span-190">p</span></span></span></span></span>, choose an arbitrary polynomial <span><span><span id="MJXp-Span-191"><span id="MJXp-Span-192">f</span><span id="MJXp-Span-193">∈</span><span id="MJXp-Span-194"><span id="MJXp-Span-195"><span id="MJXp-Span-196">F</span></span><span><span><span><span><span id="MJXp-Span-198"><span id="MJXp-Span-199"><span id="MJXp-Span-200"><span id="MJXp-Span-201">(</span><span id="MJXp-Span-202">&lt;</span><span id="MJXp-Span-203">n</span><span id="MJXp-Span-204">)</span></span></span></span></span></span></span><span><span><span><span id="MJXp-Span-197">p</span></span></span></span></span></span><span id="MJXp-Span-205">[</span><span id="MJXp-Span-206">X</span><span id="MJXp-Span-207">]</span></span></span></span> such that <span><span><span id="MJXp-Span-208"><span id="MJXp-Span-209">f</span><span id="MJXp-Span-210">(</span><span id="MJXp-Span-211">1</span><span id="MJXp-Span-212">)</span><span id="MJXp-Span-213">=</span><span id="MJXp-Span-214">z</span></span></span></span>. Taking <span><span><span id="MJXp-Span-215"><span id="MJXp-Span-216">f</span></span></span></span> as the constant polynomial <span><span><span id="MJXp-Span-217"><span id="MJXp-Span-218">f</span><span id="MJXp-Span-219">=</span><span id="MJXp-Span-220">z</span></span></span></span> is sufficient.  The commitment to <span><span><span id="MJXp-Span-221"><span id="MJXp-Span-222">z</span></span></span></span> is the polynomial commitment <span><span><span id="MJXp-Span-223"><span id="MJXp-Span-224"><span id="MJXp-Span-225"><span id="MJXp-Span-226">c</span><span id="MJXp-Span-227">o</span><span id="MJXp-Span-228">m</span></span><span id="MJXp-Span-229">f</span></span></span></span></span> to <span><span><span id="MJXp-Span-230"><span id="MJXp-Span-231">f</span></span></span></span>.</p>
<p>If the PCS is additive,
then the commitment scheme is additively homomorphic:
given commitments to <span><span><span id="MJXp-Span-232"><span id="MJXp-Span-233"><span id="MJXp-Span-234">z</span><span id="MJXp-Span-235">1</span></span></span></span></span> and <span><span><span id="MJXp-Span-236"><span id="MJXp-Span-237"><span id="MJXp-Span-238">z</span><span id="MJXp-Span-239">2</span></span></span></span></span> in <span><span><span id="MJXp-Span-240"><span id="MJXp-Span-241"><span id="MJXp-Span-242"><span id="MJXp-Span-243">F</span></span><span id="MJXp-Span-244">p</span></span></span></span></span>,
anyone can construct a commitment to <span><span><span id="MJXp-Span-245"><span id="MJXp-Span-246"><span id="MJXp-Span-247">z</span><span id="MJXp-Span-248">1</span></span><span id="MJXp-Span-249">+</span><span id="MJXp-Span-250"><span id="MJXp-Span-251">z</span><span id="MJXp-Span-252">2</span></span></span></span></span>.</p>
<h3 id="Range-proof-for-the-range-02n"><a href="#Range-proof-for-the-range-02n" title="Range-proof-for-the-range-02n" smoothhashscroll=""><span></span></a>Range proof for the range <span><span><span id="MJXp-Span-253"><span id="MJXp-Span-254">[</span><span id="MJXp-Span-255">0</span><span id="MJXp-Span-256">,</span><span id="MJXp-Span-257"><span id="MJXp-Span-258">2</span><span id="MJXp-Span-259">n</span></span><span id="MJXp-Span-260">)</span></span></span></span></h3>
<p>Let <span><span><span id="MJXp-Span-261"><span id="MJXp-Span-262"><span id="MJXp-Span-263"><span id="MJXp-Span-264">c</span><span id="MJXp-Span-265">o</span><span id="MJXp-Span-266">m</span></span><span id="MJXp-Span-267">f</span></span></span></span></span> be a commitment to <span><span><span id="MJXp-Span-268"><span id="MJXp-Span-269">z</span><span id="MJXp-Span-270">∈</span><span id="MJXp-Span-271"><span id="MJXp-Span-272"><span id="MJXp-Span-273">F</span></span><span id="MJXp-Span-274">p</span></span></span></span></span>
so that <span><span><span id="MJXp-Span-275"><span id="MJXp-Span-276">f</span><span id="MJXp-Span-277">(</span><span id="MJXp-Span-278">1</span><span id="MJXp-Span-279">)</span><span id="MJXp-Span-280">=</span><span id="MJXp-Span-281">z</span></span></span></span>, as above.
Let <span><span><span id="MJXp-Span-282"><span id="MJXp-Span-283"><span id="MJXp-Span-284">z</span><span id="MJXp-Span-285">0</span></span><span id="MJXp-Span-286">,</span><span id="MJXp-Span-287">…</span><span id="MJXp-Span-288">,</span><span id="MJXp-Span-289"><span id="MJXp-Span-290">z</span><span id="MJXp-Span-291"><span id="MJXp-Span-292">n</span><span id="MJXp-Span-293">−</span><span id="MJXp-Span-294">1</span></span></span><span id="MJXp-Span-295">∈</span><span id="MJXp-Span-296">{</span><span id="MJXp-Span-297">0</span><span id="MJXp-Span-298">,</span><span id="MJXp-Span-299">1</span><span id="MJXp-Span-300">}</span></span></span></span> be the binary digits of <span><span><span id="MJXp-Span-301"><span id="MJXp-Span-302">z</span></span></span></span>, so that <span><span><span id="MJXp-Span-303"><span id="MJXp-Span-304">z</span><span id="MJXp-Span-305">=</span><span id="MJXp-Span-306"><span id="MJXp-Span-307">∑</span><span><span><span><span><span id="MJXp-Span-312"><span id="MJXp-Span-313">n</span><span id="MJXp-Span-314">−</span><span id="MJXp-Span-315">1</span></span></span></span></span><span><span><span><span id="MJXp-Span-308"><span id="MJXp-Span-309">i</span><span id="MJXp-Span-310">=</span><span id="MJXp-Span-311">0</span></span></span></span></span></span></span><span id="MJXp-Span-316"><span id="MJXp-Span-317">2</span><span id="MJXp-Span-318"><span id="MJXp-Span-319">i</span></span></span><span id="MJXp-Span-320">⋅</span><span id="MJXp-Span-321"><span id="MJXp-Span-322">z</span><span id="MJXp-Span-323">i</span></span></span></span></span>.</p>
<p>Now, given <span><span><span id="MJXp-Span-324"><span id="MJXp-Span-325"><span id="MJXp-Span-326"><span id="MJXp-Span-327">c</span><span id="MJXp-Span-328">o</span><span id="MJXp-Span-329">m</span></span><span id="MJXp-Span-330">f</span></span></span></span></span>, the prover proves that <span><span><span id="MJXp-Span-331"><span id="MJXp-Span-332">0</span><span id="MJXp-Span-333">≤</span><span id="MJXp-Span-334">z</span><span id="MJXp-Span-335">&lt;</span><span id="MJXp-Span-336"><span id="MJXp-Span-337">2</span><span id="MJXp-Span-338">n</span></span></span></span></span>,
by constructing a degree-<span><span><span id="MJXp-Span-339"><span id="MJXp-Span-340">(</span><span id="MJXp-Span-341">n</span><span id="MJXp-Span-342">−</span><span id="MJXp-Span-343">1</span><span id="MJXp-Span-344">)</span></span></span></span> polynomial <span><span><span id="MJXp-Span-345"><span id="MJXp-Span-346">g</span><span id="MJXp-Span-347">∈</span><span id="MJXp-Span-348"><span id="MJXp-Span-349"><span id="MJXp-Span-350">F</span></span><span><span><span><span><span id="MJXp-Span-352"><span id="MJXp-Span-353"><span id="MJXp-Span-354"><span id="MJXp-Span-355">(</span><span id="MJXp-Span-356">&lt;</span><span id="MJXp-Span-357">n</span><span id="MJXp-Span-358">)</span></span></span></span></span></span></span><span><span><span><span id="MJXp-Span-351">p</span></span></span></span></span></span><span id="MJXp-Span-359">[</span><span id="MJXp-Span-360">X</span><span id="MJXp-Span-361">]</span></span></span></span> such that
<span><span><span id="MJXp-Span-362"><span id="MJXp-Span-363">g</span><span id="MJXp-Span-364">(</span><span id="MJXp-Span-365"><span id="MJXp-Span-366">ω</span><span id="MJXp-Span-367"><span id="MJXp-Span-368">n</span><span id="MJXp-Span-369">−</span><span id="MJXp-Span-370">1</span></span></span><span id="MJXp-Span-371">)</span><span id="MJXp-Span-372">=</span><span id="MJXp-Span-373"><span id="MJXp-Span-374">z</span><span id="MJXp-Span-375"><span id="MJXp-Span-376">n</span><span id="MJXp-Span-377">−</span><span id="MJXp-Span-378">1</span></span></span><span id="MJXp-Span-379"></span><span id="MJXp-Span-380">and</span><span id="MJXp-Span-381"></span><span id="MJXp-Span-382"><span id="MJXp-Span-383"><span id="MJXp-Span-384">g</span><span id="MJXp-Span-385">(</span><span id="MJXp-Span-386"><span id="MJXp-Span-387">ω</span><span id="MJXp-Span-388"><span id="MJXp-Span-389">i</span><span id="MJXp-Span-390">−</span><span id="MJXp-Span-391">1</span></span></span><span id="MJXp-Span-392">)</span><span id="MJXp-Span-393">=</span><span id="MJXp-Span-394">2</span><span id="MJXp-Span-395">g</span><span id="MJXp-Span-396">(</span><span id="MJXp-Span-397"><span id="MJXp-Span-398">ω</span><span id="MJXp-Span-399">i</span></span><span id="MJXp-Span-400">)</span><span id="MJXp-Span-401">+</span><span id="MJXp-Span-402"><span id="MJXp-Span-403">z</span><span id="MJXp-Span-404"><span id="MJXp-Span-405">i</span><span id="MJXp-Span-406">−</span><span id="MJXp-Span-407">1</span></span></span></span><span id="MJXp-Span-408">&nbsp;for all&nbsp;</span><span id="MJXp-Span-409"><span id="MJXp-Span-410">i</span><span id="MJXp-Span-411">=</span><span id="MJXp-Span-412">n</span><span id="MJXp-Span-413">−</span><span id="MJXp-Span-414">1</span><span id="MJXp-Span-415">,</span><span id="MJXp-Span-416">…</span><span id="MJXp-Span-417">,</span><span id="MJXp-Span-418">1</span></span><span id="MJXp-Span-419">.</span></span></span></span></span>
Observe that <span><span><span id="MJXp-Span-420"><span id="MJXp-Span-421">g</span><span id="MJXp-Span-422">(</span><span id="MJXp-Span-423">1</span><span id="MJXp-Span-424">)</span><span id="MJXp-Span-425">=</span><span id="MJXp-Span-426">g</span><span id="MJXp-Span-427">(</span><span id="MJXp-Span-428"><span id="MJXp-Span-429">ω</span><span id="MJXp-Span-430">0</span></span><span id="MJXp-Span-431">)</span><span id="MJXp-Span-432">=</span><span id="MJXp-Span-433"><span id="MJXp-Span-434">∑</span><span><span><span><span><span id="MJXp-Span-439"><span id="MJXp-Span-440">n</span><span id="MJXp-Span-441">−</span><span id="MJXp-Span-442">1</span></span></span></span></span><span><span><span><span id="MJXp-Span-435"><span id="MJXp-Span-436">i</span><span id="MJXp-Span-437">=</span><span id="MJXp-Span-438">0</span></span></span></span></span></span></span><span id="MJXp-Span-443"><span id="MJXp-Span-444">2</span><span id="MJXp-Span-445"><span id="MJXp-Span-446">i</span></span></span><span id="MJXp-Span-447">⋅</span><span id="MJXp-Span-448"><span id="MJXp-Span-449">z</span><span id="MJXp-Span-450">i</span></span><span id="MJXp-Span-451">=</span><span id="MJXp-Span-452">z</span></span></span></span>.
Now the prover needs to prove two things:</p>
<ol>
<li><span><span><span id="MJXp-Span-453"><span id="MJXp-Span-454">&nbsp;</span><span id="MJXp-Span-455">&nbsp;</span><span id="MJXp-Span-456">g</span><span id="MJXp-Span-457">(</span><span id="MJXp-Span-458">1</span><span id="MJXp-Span-459">)</span><span id="MJXp-Span-460">=</span><span id="MJXp-Span-461">f</span><span id="MJXp-Span-462">(</span><span id="MJXp-Span-463">1</span><span id="MJXp-Span-464">)</span></span></span></span>,</li>
<li><span><span><span id="MJXp-Span-465"><span id="MJXp-Span-466">&nbsp;</span><span id="MJXp-Span-467">&nbsp;</span><span id="MJXp-Span-468">2</span><span id="MJXp-Span-469">g</span><span id="MJXp-Span-470">(</span><span id="MJXp-Span-471">X</span><span id="MJXp-Span-472">ω</span><span id="MJXp-Span-473">)</span><span id="MJXp-Span-474">−</span><span id="MJXp-Span-475">g</span><span id="MJXp-Span-476">(</span><span id="MJXp-Span-477">X</span><span id="MJXp-Span-478">)</span><span id="MJXp-Span-479">∈</span><span id="MJXp-Span-480">{</span><span id="MJXp-Span-481">0</span><span id="MJXp-Span-482">,</span><span id="MJXp-Span-483">1</span><span id="MJXp-Span-484">}</span></span></span></span> &nbsp;
for all <span><span><span id="MJXp-Span-485"><span id="MJXp-Span-486">x</span><span id="MJXp-Span-487">∈</span><span id="MJXp-Span-488">H</span></span></span></span>.</li>
</ol>
<p>Condition (1) proves that <span><span><span id="MJXp-Span-489"><span id="MJXp-Span-490">g</span><span id="MJXp-Span-491">(</span><span id="MJXp-Span-492">1</span><span id="MJXp-Span-493">)</span><span id="MJXp-Span-494">=</span><span id="MJXp-Span-495">z</span></span></span></span>;
Condition (2) proves that <span><span><span id="MJXp-Span-496"><span id="MJXp-Span-497"><span id="MJXp-Span-498">z</span><span id="MJXp-Span-499">0</span></span><span id="MJXp-Span-500">,</span><span id="MJXp-Span-501">…</span><span id="MJXp-Span-502">,</span><span id="MJXp-Span-503"><span id="MJXp-Span-504">z</span><span id="MJXp-Span-505"><span id="MJXp-Span-506">n</span><span id="MJXp-Span-507">−</span><span id="MJXp-Span-508">1</span></span></span></span></span></span> are all in <span><span><span id="MJXp-Span-509"><span id="MJXp-Span-510">{</span><span id="MJXp-Span-511">0</span><span id="MJXp-Span-512">,</span><span id="MJXp-Span-513">1</span><span id="MJXp-Span-514">}</span></span></span></span>.
Together, these two conditions prove that <span><span><span id="MJXp-Span-515"><span id="MJXp-Span-516">0</span><span id="MJXp-Span-517">≤</span><span id="MJXp-Span-518">z</span><span id="MJXp-Span-519">&lt;</span><span id="MJXp-Span-520"><span id="MJXp-Span-521">2</span><span id="MJXp-Span-522">n</span></span></span></span></span>, as required.</p>
<p>To prove Conditions (1) and (2), the prover sends to the verifier
a polynomial commitment to <span><span><span id="MJXp-Span-523"><span id="MJXp-Span-524">g</span></span></span></span>.
It then proves to the verifier that the following two polynomials evaluate to zero for all <span><span><span id="MJXp-Span-525"><span id="MJXp-Span-526">x</span><span id="MJXp-Span-527">∈</span><span id="MJXp-Span-528">H</span></span></span></span>:
<span><span><span id="MJXp-Span-529"><span id="MJXp-Span-530"><span><span id="MJXp-Span-531"><span id="MJXp-Span-532"><span id="MJXp-Span-533"><span id="MJXp-Span-534">w</span><span id="MJXp-Span-535">1</span></span><span id="MJXp-Span-536">(</span><span id="MJXp-Span-537">X</span><span id="MJXp-Span-538">)</span></span><span id="MJXp-Span-539"><span id="MJXp-Span-540"></span><span id="MJXp-Span-541">=</span><span id="MJXp-Span-542">(</span><span id="MJXp-Span-543">g</span><span id="MJXp-Span-544">−</span><span id="MJXp-Span-545">f</span><span id="MJXp-Span-546">)</span><span id="MJXp-Span-547">⋅</span><span id="MJXp-Span-548"><span id="MJXp-Span-549"><span id="MJXp-Span-550"><span id="MJXp-Span-551"><span>(</span></span><span id="MJXp-Span-552"><span><span id="MJXp-Span-553"><span id="MJXp-Span-554">X</span><span id="MJXp-Span-555"><span id="MJXp-Span-556">n</span></span></span><span id="MJXp-Span-557">−</span><span id="MJXp-Span-558">1</span></span><span><span><span><span></span></span><span><span><span id="MJXp-Span-559">X</span><span id="MJXp-Span-560">−</span><span id="MJXp-Span-561">1</span></span></span></span></span></span><span id="MJXp-Span-562"><span>)</span></span></span></span><span id="MJXp-Span-563">,</span><span id="MJXp-Span-564"></span><span id="MJXp-Span-565">and</span></span></span></span><span id="MJXp-Span-566"><span id="MJXp-Span-567"><span id="MJXp-Span-568"><span id="MJXp-Span-569">w</span><span id="MJXp-Span-570">2</span></span><span id="MJXp-Span-571">(</span><span id="MJXp-Span-572">X</span><span id="MJXp-Span-573">)</span></span><span id="MJXp-Span-574"><span id="MJXp-Span-575"></span><span id="MJXp-Span-576">=</span><span id="MJXp-Span-577"><span id="MJXp-Span-578"><span id="MJXp-Span-579"><span>[</span></span></span></span><span id="MJXp-Span-580">2</span><span id="MJXp-Span-581">g</span><span id="MJXp-Span-582">(</span><span id="MJXp-Span-583">X</span><span id="MJXp-Span-584">ω</span><span id="MJXp-Span-585">)</span><span id="MJXp-Span-586">−</span><span id="MJXp-Span-587">g</span><span id="MJXp-Span-588">(</span><span id="MJXp-Span-589">X</span><span id="MJXp-Span-590">)</span><span id="MJXp-Span-591"><span id="MJXp-Span-592"><span id="MJXp-Span-593"><span id="MJXp-Span-594"><span>]</span></span></span></span><span id="MJXp-Span-595">2</span></span><span id="MJXp-Span-596">−</span><span id="MJXp-Span-597"><span id="MJXp-Span-598"><span id="MJXp-Span-599"><span>[</span></span></span></span><span id="MJXp-Span-600">2</span><span id="MJXp-Span-601">g</span><span id="MJXp-Span-602">(</span><span id="MJXp-Span-603">X</span><span id="MJXp-Span-604">ω</span><span id="MJXp-Span-605">)</span><span id="MJXp-Span-606">−</span><span id="MJXp-Span-607">g</span><span id="MJXp-Span-608">(</span><span id="MJXp-Span-609">X</span><span id="MJXp-Span-610">)</span><span id="MJXp-Span-611"><span id="MJXp-Span-612"><span id="MJXp-Span-613"><span>]</span></span></span></span><span id="MJXp-Span-614">.</span></span></span></span></span></span></span></span>
This can be done efficiently using a
batch opening technique described in <a href="https://eprint.iacr.org/2020/081" target="_blank" rel="noopener">this paper</a>.
The verifier sends a radom <span><span><span id="MJXp-Span-615"><span id="MJXp-Span-616">τ</span><span id="MJXp-Span-617">∈</span><span id="MJXp-Span-618"><span id="MJXp-Span-619"><span id="MJXp-Span-620">F</span></span><span id="MJXp-Span-621">p</span></span></span></span></span> to the prover,
and the prover computes the quotient polynomial
<span><span><span id="MJXp-Span-622"><span id="MJXp-Span-623">q</span><span id="MJXp-Span-624">(</span><span id="MJXp-Span-625">X</span><span id="MJXp-Span-626">)</span><span id="MJXp-Span-627">=</span><span id="MJXp-Span-628">(</span><span id="MJXp-Span-629"><span id="MJXp-Span-630">w</span><span id="MJXp-Span-631">1</span></span><span id="MJXp-Span-632">+</span><span id="MJXp-Span-633">τ</span><span id="MJXp-Span-634"><span id="MJXp-Span-635">w</span><span id="MJXp-Span-636">2</span></span><span id="MJXp-Span-637">)</span><span id="MJXp-Span-638"><span id="MJXp-Span-639">/</span></span><span id="MJXp-Span-640">(</span><span id="MJXp-Span-641"><span id="MJXp-Span-642">X</span><span id="MJXp-Span-643"><span id="MJXp-Span-644">n</span></span></span><span id="MJXp-Span-645">−</span><span id="MJXp-Span-646">1</span><span id="MJXp-Span-647">)</span><span id="MJXp-Span-648">.</span></span></span></span>
The prover sends a polynomial commitment to <span><span><span id="MJXp-Span-649"><span id="MJXp-Span-650">q</span></span></span></span> to the verifier,
and then proves that the polynomial
<span><span><span id="MJXp-Span-651"><span id="MJXp-Span-652">w</span><span id="MJXp-Span-653">(</span><span id="MJXp-Span-654">X</span><span id="MJXp-Span-655">)</span><span id="MJXp-Span-656">=</span><span id="MJXp-Span-657"><span id="MJXp-Span-658">w</span><span id="MJXp-Span-659">1</span></span><span id="MJXp-Span-660">(</span><span id="MJXp-Span-661">X</span><span id="MJXp-Span-662">)</span><span id="MJXp-Span-663">+</span><span id="MJXp-Span-664">τ</span><span id="MJXp-Span-665"><span id="MJXp-Span-666">w</span><span id="MJXp-Span-667">2</span></span><span id="MJXp-Span-668">(</span><span id="MJXp-Span-669">X</span><span id="MJXp-Span-670">)</span><span id="MJXp-Span-671">−</span><span id="MJXp-Span-672">q</span><span id="MJXp-Span-673">(</span><span id="MJXp-Span-674">X</span><span id="MJXp-Span-675">)</span><span id="MJXp-Span-676">⋅</span><span id="MJXp-Span-677">(</span><span id="MJXp-Span-678"><span id="MJXp-Span-679">X</span><span id="MJXp-Span-680"><span id="MJXp-Span-681">n</span></span></span><span id="MJXp-Span-682">−</span><span id="MJXp-Span-683">1</span><span id="MJXp-Span-684">)</span></span></span></span>
is the zero polynomial.
To do so, the verifier sends a random <span><span><span id="MJXp-Span-685"><span id="MJXp-Span-686">ρ</span><span id="MJXp-Span-687">∈</span><span id="MJXp-Span-688"><span id="MJXp-Span-689"><span id="MJXp-Span-690">F</span></span><span id="MJXp-Span-691">p</span></span></span></span></span> to the prover,
and together they run the evaluation protocol three times:
once for <span><span><span id="MJXp-Span-692"><span id="MJXp-Span-693">g</span><span id="MJXp-Span-694">(</span><span id="MJXp-Span-695">ρ</span><span id="MJXp-Span-696">)</span></span></span></span>,
once for <span><span><span id="MJXp-Span-697"><span id="MJXp-Span-698">g</span><span id="MJXp-Span-699">(</span><span id="MJXp-Span-700">ρ</span><span id="MJXp-Span-701">ω</span><span id="MJXp-Span-702">)</span></span></span></span>, and
once for evaluating at <span><span><span id="MJXp-Span-703"><span id="MJXp-Span-704">ρ</span></span></span></span> one more polynomial <span><span><span id="MJXp-Span-705"><span id="MJXp-Span-706"><span id="MJXp-Span-707"><span><span><span><span id="MJXp-Span-709">ˆ</span></span><span><span id="MJXp-Span-708">w</span></span></span></span></span></span></span></span></span>
that is a linear combination of <span><span><span id="MJXp-Span-710"><span id="MJXp-Span-711">q</span></span></span></span> and <span><span><span id="MJXp-Span-712"><span id="MJXp-Span-713">f</span></span></span></span>.
These three values, along with <span><span><span id="MJXp-Span-714"><span id="MJXp-Span-715">ρ</span></span></span></span> and <span><span><span id="MJXp-Span-716"><span id="MJXp-Span-717">τ</span></span></span></span>,
are sufficient to evaluate <span><span><span id="MJXp-Span-718"><span id="MJXp-Span-719">w</span><span id="MJXp-Span-720">(</span><span id="MJXp-Span-721">ρ</span><span id="MJXp-Span-722">)</span></span></span></span> and confirm that the result is zero.
This proves, with high probability, that <span><span><span id="MJXp-Span-723"><span id="MJXp-Span-724">w</span></span></span></span> is the zero polynomial.</p>
<p>There is one remaining issue, which is that revealing
<span><span><span id="MJXp-Span-725"><span id="MJXp-Span-726">g</span><span id="MJXp-Span-727">(</span><span id="MJXp-Span-728">ρ</span><span id="MJXp-Span-729">)</span></span></span></span>, <span><span><span id="MJXp-Span-730"><span id="MJXp-Span-731"><span id="MJXp-Span-732"><span><span><span><span id="MJXp-Span-734">ˆ</span></span><span><span id="MJXp-Span-733">w</span></span></span></span></span></span><span id="MJXp-Span-735">(</span><span id="MJXp-Span-736">ρ</span><span id="MJXp-Span-737">)</span></span></span></span>, and <span><span><span id="MJXp-Span-738"><span id="MJXp-Span-739">g</span><span id="MJXp-Span-740">(</span><span id="MJXp-Span-741">ρ</span><span id="MJXp-Span-742">ω</span><span id="MJXp-Span-743">)</span></span></span></span> is not zero-knowledge.
The fix is simple: the prover constructs <span><span><span id="MJXp-Span-744"><span id="MJXp-Span-745">g</span></span></span></span> as a degree <span><span><span id="MJXp-Span-746"><span id="MJXp-Span-747">n</span><span id="MJXp-Span-748">+</span><span id="MJXp-Span-749">1</span></span></span></span>
polynomial by interpolating <span><span><span id="MJXp-Span-750"><span id="MJXp-Span-751">g</span></span></span></span> to a random value at two more points
<span><span><span id="MJXp-Span-760"><span id="MJXp-Span-761"><span id="MJXp-Span-762">ω</span><span id="MJXp-Span-763">′</span></span><span id="MJXp-Span-764">,</span><span id="MJXp-Span-765"><span id="MJXp-Span-766">ω</span><span id="MJXp-Span-767">″</span></span></span></span></span> outside <span><span><span id="MJXp-Span-768"><span id="MJXp-Span-769">H</span></span></span></span>.
That is, <span><span><span id="MJXp-Span-770"><span id="MJXp-Span-771">g</span></span></span></span> is defined in exactly
the same way on all points in <span><span><span id="MJXp-Span-772"><span id="MJXp-Span-773">H</span></span></span></span>,
but <span><span><span id="MJXp-Span-774"><span id="MJXp-Span-775">g</span><span id="MJXp-Span-776">(</span><span id="MJXp-Span-777"><span id="MJXp-Span-778">ω</span><span id="MJXp-Span-779">′</span></span><span id="MJXp-Span-780">)</span><span id="MJXp-Span-781">=</span><span id="MJXp-Span-782">α</span></span></span></span> and <span><span><span id="MJXp-Span-783"><span id="MJXp-Span-784">g</span><span id="MJXp-Span-785">(</span><span id="MJXp-Span-786"><span id="MJXp-Span-787">ω</span><span id="MJXp-Span-788">″</span></span><span id="MJXp-Span-789">)</span><span id="MJXp-Span-790">=</span><span id="MJXp-Span-791">β</span></span></span></span>
for random <span><span><span id="MJXp-Span-792"><span id="MJXp-Span-793">α</span><span id="MJXp-Span-794">,</span><span id="MJXp-Span-795">β</span><span id="MJXp-Span-796">∈</span><span id="MJXp-Span-797"><span id="MJXp-Span-798"><span id="MJXp-Span-799">F</span></span><span id="MJXp-Span-800">p</span></span></span></span></span> and <span><span><span id="MJXp-Span-801"><span id="MJXp-Span-802">ω</span><span id="MJXp-Span-803">,</span><span id="MJXp-Span-804"><span id="MJXp-Span-805">ω</span><span id="MJXp-Span-806">′</span></span><span id="MJXp-Span-807">∉</span><span id="MJXp-Span-808">H</span></span></span></span>.
Since <span><span><span id="MJXp-Span-809"><span id="MJXp-Span-810">g</span></span></span></span> has the same values over all points in <span><span><span id="MJXp-Span-811"><span id="MJXp-Span-812">H</span></span></span></span>,
this has no effect on the relations checked above.
This is zero-knowledge because <span><span><span id="MJXp-Span-813"><span id="MJXp-Span-814">g</span><span id="MJXp-Span-815">(</span><span id="MJXp-Span-816">ρ</span><span id="MJXp-Span-817">)</span></span></span></span> and <span><span><span id="MJXp-Span-818"><span id="MJXp-Span-819">g</span><span id="MJXp-Span-820">(</span><span id="MJXp-Span-821">ρ</span><span id="MJXp-Span-822">ω</span><span id="MJXp-Span-823">)</span></span></span></span>
can now be simulated as independent random values in <span><span><span id="MJXp-Span-824"><span id="MJXp-Span-825"><span id="MJXp-Span-826"><span id="MJXp-Span-827">F</span></span><span id="MJXp-Span-828">p</span></span></span></span></span>.
Moreover, the value of <span><span><span id="MJXp-Span-829"><span id="MJXp-Span-830"><span id="MJXp-Span-831"><span><span><span><span id="MJXp-Span-833">ˆ</span></span><span><span id="MJXp-Span-832">w</span></span></span></span></span></span><span id="MJXp-Span-834">(</span><span id="MJXp-Span-835">ρ</span><span id="MJXp-Span-836">)</span></span></span></span> is completely determined
by the fact that <span><span><span id="MJXp-Span-837"><span id="MJXp-Span-838">w</span><span id="MJXp-Span-839">(</span><span id="MJXp-Span-840">ρ</span><span id="MJXp-Span-841">)</span><span id="MJXp-Span-842">=</span><span id="MJXp-Span-843">0</span></span></span></span>, and can therefore also be simulated.
Note that we need to restrict the choice of <span><span><span id="MJXp-Span-844"><span id="MJXp-Span-845">ρ</span></span></span></span> to <span><span><span id="MJXp-Span-846"><span id="MJXp-Span-847">(</span><span id="MJXp-Span-848"><span id="MJXp-Span-849"><span id="MJXp-Span-850">F</span></span><span id="MJXp-Span-851">p</span></span><span id="MJXp-Span-852">∖</span><span id="MJXp-Span-853">H</span><span id="MJXp-Span-854">)</span></span></span></span> to ensure that the simulation is valid.</p>
<p>This entire process makes two polynomial commitments, to <span><span><span id="MJXp-Span-855"><span id="MJXp-Span-856">g</span></span></span></span> and <span><span><span id="MJXp-Span-857"><span id="MJXp-Span-858">q</span></span></span></span>,
and uses the polynomial evaluation protocol three times to
evaluate <span><span><span id="MJXp-Span-859"><span id="MJXp-Span-860">g</span><span id="MJXp-Span-861">(</span><span id="MJXp-Span-862">ρ</span><span id="MJXp-Span-863">)</span></span></span></span>, <span><span><span id="MJXp-Span-864"><span id="MJXp-Span-865"><span id="MJXp-Span-866"><span><span><span><span id="MJXp-Span-868">ˆ</span></span><span><span id="MJXp-Span-867">w</span></span></span></span></span></span><span id="MJXp-Span-869">(</span><span id="MJXp-Span-870">ρ</span><span id="MJXp-Span-871">)</span></span></span></span>, and <span><span><span id="MJXp-Span-872"><span id="MJXp-Span-873">g</span><span id="MJXp-Span-874">(</span><span id="MJXp-Span-875">ρ</span><span id="MJXp-Span-876">ω</span><span id="MJXp-Span-877">)</span></span></span></span>.</p>
<h3 id="Other-constructions"><a href="#Other-constructions" title="Other-constructions" smoothhashscroll=""><span></span></a>Other constructions</h3>
<p>The <a href="https://eprint.iacr.org/2017/1066.pdf" target="_blank" rel="noopener">Bulletproofs paper</a> (Section 4.1) shows how to implement a range proof using an inner-product argument.  The DARK paper shows how to implemement an inner-product argument using a polynomial commitment scheme.  Combining the two gives another way to construct a range proof from a polynomial commitment scheme with similar properties as the range proof described above.  Interestingly, the resulting protocol is quite different.</p>

<p>This scheme initially appeared as a component of <a href="https://github.com/AztecProtocol/barretenberg/blob/master/src/barretenberg/waffle/proof_system/widgets/turbo_range_widget.cpp" target="_blank" rel="noopener">Turbo Plonk</a> by Ariel Gabizon and Zac Williamson</p>
</div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
            _dna = window._dna || {};
            _dna.siteId = "linksfor.devs";
            _dna.outlink = true;

            (function () {
                let dna = document.createElement('script');
                dna.type = 'text/javascript';
                dna.async = true;
                dna.src = '//dna.buildstarted.com/t.js';
                let s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(dna, s);
            })();
    </script>
</body>
</html>