<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Use ASP.NET Core APIs in a class library -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Use ASP.NET Core APIs in a class library</h1><div><div id="main" class="content "><p>By <a href="https://github.com/scottaddie" data-linktype="external">Scott Addie</a></p><p>This document provides guidance for using ASP.NET Core APIs in a class library. For all other library guidance, see <a href="/en-us/dotnet/standard/library-guidance/" data-linktype="absolute-path">Open-source library guidance</a>.</p><h2 id="determine-which-aspnet-core-versions-to-support">Determine which ASP.NET Core versions to support</h2><p>ASP.NET Core adheres to the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">.NET Core support policy</a>. Consult the support policy when determining which ASP.NET Core versions to support in a library. A library should:</p><ul><li>Make an effort to support all ASP.NET Core versions classified as <em>Long-Term Support</em> (LTS).</li><li>Not feel obligated to support ASP.NET Core versions classified as <em>End of Life</em> (EOL).</li></ul><p>As preview releases of ASP.NET Core are made available, breaking changes are posted in the <a href="https://github.com/aspnet/Announcements/issues" data-linktype="external">aspnet/Announcements</a> GitHub repository. Compatibility testing of libraries can be conducted as framework features are being developed.</p><h2 id="use-the-aspnet-core-shared-framework">Use the ASP.NET Core shared framework</h2><p>With the release of .NET Core 3.0, many ASP.NET Core assemblies are no longer published to NuGet as packages. Instead, the assemblies are included in the <code>Microsoft.AspNetCore.App</code> shared framework, which is installed with the .NET Core SDK and runtime installers. For a list of packages no longer being published, see <a href="../migration/22-to-30?view=aspnetcore-3.1#remove-obsolete-package-references" data-linktype="relative-path">Remove obsolete package references</a>.</p><p>As of .NET Core 3.0, projects using the <code>Microsoft.NET.Sdk.Web</code> MSBuild SDK implicitly reference the shared framework. Projects using the <code>Microsoft.NET.Sdk</code> or <code>Microsoft.NET.Sdk.Razor</code> SDK must reference ASP.NET Core to use ASP.NET Core APIs in the shared framework.</p><p>To reference ASP.NET Core, add the following <code>&lt;FrameworkReference&gt;</code> element to your project file:</p><pre><code class="lang-xml" highlight-lines="8">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>Referencing ASP.NET Core in this manner is only supported for projects targeting .NET Core 3.x.</p><h2 id="include-blazor-extensibility">Include Blazor extensibility</h2><p>Blazor supports WebAssembly (WASM) and Server <a href="../blazor/hosting-models?view=aspnetcore-3.1" data-linktype="relative-path">hosting models</a>. Unless there's a specific reason not to, a <a href="../blazor/components?view=aspnetcore-3.1" data-linktype="relative-path">Razor components</a> library should support both hosting models. A Razor components library must use the <a href="../razor-pages/sdk?view=aspnetcore-3.1" data-linktype="relative-path">Microsoft.NET.Sdk.Razor SDK</a>.</p><h3 id="support-both-hosting-models">Support both hosting models</h3><p>To support Razor component consumption from both <a href="../blazor/hosting-models?view=aspnetcore-3.1#blazor-server" data-linktype="relative-path">Blazor Server</a> and <a href="../blazor/hosting-models?view=aspnetcore-3.1#blazor-webassembly" data-linktype="relative-path">Blazor WASM</a> projects, use the following instructions for your editor.</p><div class="tabGroup" id="tabgroup_CeZOj-G++Q"><section id="tabpanel_CeZOj-G++Q_visual-studio" role="tabpanel" data-tab="visual-studio"><p>Use the <strong>Razor Class Library</strong> project template. The template's <strong>Support pages and views</strong> checkbox should be deselected.</p></section><section id="tabpanel_CeZOj-G++Q_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden"><p>Run the following command in the integrated terminal:</p><pre><code class="lang-dotnetcli">dotnet new razorclasslib
</code></pre></section><section id="tabpanel_CeZOj-G++Q_visual-studio-mac" role="tabpanel" data-tab="visual-studio-mac" aria-hidden="true" hidden="hidden"><p>Use the <strong>Razor Class Library</strong> project template.</p></section></div><p>The project generated from the template does the following things:</p><p>For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk.Razor"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFrameworks&gt;netstandard2.0&lt;/TargetFrameworks&gt;
    &lt;RazorLangVersion&gt;3.0&lt;/RazorLangVersion&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Components" Version="3.0.0" /&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Components.Web" Version="3.0.0" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><h3 id="support-a-specific-hosting-model">Support a specific hosting model</h3><p>It's far less common to support a single Blazor hosting model. As an example, to support Razor component consumption from <a href="../blazor/hosting-models?view=aspnetcore-3.1#blazor-server" data-linktype="relative-path">Blazor Server</a> projects only:</p><ul><li>Target .NET Core 3.x.</li><li>Add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework.</li></ul><p>For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk.Razor"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>For more information on libraries containing Razor components, see <a href="../blazor/class-libraries?view=aspnetcore-3.1" data-linktype="relative-path">ASP.NET Core Razor components class libraries</a>.</p><h2 id="include-mvc-extensibility">Include MVC extensibility</h2><p>This section outlines recommendations for libraries that include:</p><p>This section doesn't discuss multi-targeting to support multiple versions of MVC. For guidance on supporting multiple ASP.NET Core versions, see <a href="#support-multiple-aspnet-core-versions" data-linktype="self-bookmark">Support multiple ASP.NET Core versions</a>.</p><h3 id="razor-views-or-razor-pages">Razor views or Razor Pages</h3><p>A project that includes <a href="../mvc/views/overview?view=aspnetcore-3.1" data-linktype="relative-path">Razor views</a> or <a href="../razor-pages/?view=aspnetcore-3.1" data-linktype="relative-path">Razor Pages</a> must use the <a href="../razor-pages/sdk?view=aspnetcore-3.1" data-linktype="relative-path">Microsoft.NET.Sdk.Razor SDK</a>.</p><p>If the project targets .NET Core 3.x, it requires:</p><ul><li>An <code>AddRazorSupportForMvc</code> MSBuild property set to <code>true</code>.</li><li>A <code>&lt;FrameworkReference&gt;</code> element for the shared framework.</li></ul><p>The <strong>Razor Class Library</strong> project template satisfies the preceding requirements for projects targeting .NET Core 3.x. Use the following instructions for your editor.</p><div class="tabGroup" id="tabgroup_CeZOj-G++Q-1"><section id="tabpanel_CeZOj-G++Q-1_visual-studio" role="tabpanel" data-tab="visual-studio"><p>Use the <strong>Razor Class Library</strong> project template. The template's <strong>Support pages and views</strong> checkbox should be selected.</p></section><section id="tabpanel_CeZOj-G++Q-1_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden"><p>Run the following command in the integrated terminal:</p><pre><code class="lang-dotnetcli">dotnet new razorclasslib -s
</code></pre></section><section id="tabpanel_CeZOj-G++Q-1_visual-studio-mac" role="tabpanel" data-tab="visual-studio-mac" aria-hidden="true" hidden="hidden"><p>No project template support at this time.</p></section></div><p>For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk.Razor"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
    &lt;AddRazorSupportForMvc&gt;true&lt;/AddRazorSupportForMvc&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>If the project targets .NET Standard instead, a <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc" data-linktype="external">Microsoft.AspNetCore.Mvc</a> package reference is required. The <code>Microsoft.AspNetCore.Mvc</code> package moved into the shared framework in ASP.NET Core 3.0 and is therefore no longer published. For example:</p><pre><code class="lang-xml" highlight-lines="8">&lt;Project Sdk="Microsoft.NET.Sdk.Razor"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.2.0" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><h3 id="tag-helpers">Tag Helpers</h3><p>A project that includes <a href="../mvc/views/tag-helpers/intro?view=aspnetcore-3.1" data-linktype="relative-path">Tag Helpers</a> should use the <code>Microsoft.NET.Sdk</code> SDK. If targeting .NET Core 3.x, add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework. For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>If targeting .NET Standard (to support versions earlier than ASP.NET Core 3.x), add a package reference to <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor" data-linktype="external">Microsoft.AspNetCore.Mvc.Razor</a>. The <code>Microsoft.AspNetCore.Mvc.Razor</code> package moved into the shared framework and is therefore no longer published. For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.2.0" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><h3 id="view-components">View components</h3><p>A project that includes <a href="../mvc/views/view-components?view=aspnetcore-3.1" data-linktype="relative-path">View components</a> should use the <code>Microsoft.NET.Sdk</code> SDK. If targeting .NET Core 3.x, add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework. For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>If targeting .NET Standard (to support versions earlier than ASP.NET Core 3.x), add a package reference to <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.ViewFeatures" data-linktype="external">Microsoft.AspNetCore.Mvc.ViewFeatures</a>. The <code>Microsoft.AspNetCore.Mvc.ViewFeatures</code> package moved into the shared framework and is therefore no longer published. For example:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc.ViewFeatures" Version="2.2.0" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><h2 id="support-multiple-aspnet-core-versions">Support multiple ASP.NET Core versions</h2><p>Multi-targeting is required to author a library that supports multiple variants of ASP.NET Core. Consider a scenario in which a Tag Helpers library must support the following ASP.NET Core variants:</p><ul><li>ASP.NET Core 2.1 targeting .NET Framework 4.6.1</li><li>ASP.NET Core 2.x targeting .NET Core 2.x</li><li>ASP.NET Core 3.x targeting .NET Core 3.x</li></ul><p>The following project file supports these variants via the <code>TargetFrameworks</code> property:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
  
  &lt;PropertyGroup&gt;
    &lt;TargetFrameworks&gt;netcoreapp2.1;netcoreapp3.0;net461&lt;/TargetFrameworks&gt;
  &lt;/PropertyGroup&gt;
  
  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Markdig" Version="0.16.0" /&gt;
  &lt;/ItemGroup&gt;
  
  &lt;ItemGroup Condition="'$(TargetFramework)' != 'netcoreapp3.0'"&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc.Razor" Version="2.1.0" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.0'"&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre><p>With the preceding project file:</p><ul><li>The <code>Markdig</code> package is added for all consumers.</li><li>A reference to <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Razor" data-linktype="external">Microsoft.AspNetCore.Mvc.Razor</a> is added for consumers targeting .NET Framework 4.6.1 or later or .NET Core 2.x. Version 2.1.0 of the package works with ASP.NET Core 2.2 because of backwards compatibility.</li><li>The shared framework is referenced for consumers targeting .NET Core 3.x. The <code>Microsoft.AspNetCore.Mvc.Razor</code> package is included in the shared framework.</li></ul><p>Alternatively, .NET Standard 2.0 could be targeted instead of targeting both .NET Core 2.1 and .NET Framework 4.6.1:</p><pre><code class="lang-xml" highlight-lines="4">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
  
  &lt;PropertyGroup&gt;
    &lt;TargetFrameworks&gt;netstandard2.0;netcoreapp3.0&lt;/TargetFrameworks&gt;
  &lt;/PropertyGroup&gt;
  
  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Markdig" Version="0.16.0" /&gt;
  &lt;/ItemGroup&gt;
  
  &lt;ItemGroup Condition="'$(TargetFramework)' != 'netcoreapp3.0'"&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc.Razor" Version="2.1.0" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.0'"&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre><p>With the preceding project file, the following caveats exist:</p><ul><li>Since the library only contains Tag Helpers, it's more straightforward to target the specific platforms on which ASP.NET Core runs: .NET Core and .NET Framework. Tag Helpers can't be used by other .NET Standard 2.0-compliant target frameworks such as Unity, UWP, and Xamarin.</li><li>Using .NET Standard 2.0 from .NET Framework has some issues that were addressed in .NET Framework 4.7.2. You can improve the experience for consumers using .NET Framework 4.6.1 through 4.7.1 by targeting .NET Framework 4.6.1.</li></ul><p>If your library needs to call platform-specific APIs, target specific .NET implementations instead of .NET Standard. For more information, see <a href="/en-us/dotnet/standard/library-guidance/cross-platform-targeting#multi-targeting" data-linktype="absolute-path">Multi-targeting</a>.</p><h2 id="use-an-api-that-hasnt-changed">Use an API that hasn't changed</h2><p>Imagine a scenario in which you're upgrading a middleware library from .NET Core 2.2 to 3.0. The ASP.NET Core middleware APIs being used in the library haven't changed between ASP.NET Core 2.2 and 3.0. To continue supporting the middleware library in .NET Core 3.0, take the following steps:</p><ul><li>Follow the <a href="/en-us/dotnet/standard/library-guidance/" data-linktype="absolute-path">standard library guidance</a>.</li><li>Add a package reference for each API's NuGet package if the corresponding assembly doesn't exist in the shared framework.</li></ul><h2 id="use-an-api-that-changed">Use an API that changed</h2><p>Imagine a scenario in which you're upgrading a library from .NET Core 2.2 to .NET Core 3.0. An ASP.NET Core API being used in the library has a <a href="/en-us/dotnet/core/compatibility/breaking-changes" data-linktype="absolute-path">breaking change</a> in ASP.NET Core 3.0. Consider whether the library can be rewritten to not use the broken API in all versions.</p><p>If you can rewrite the library, do so and continue to target an earlier target framework (for example, .NET Standard 2.0 or .NET Framework 4.6.1) with package references.</p><p>If you can't rewrite the library, take the following steps:</p><ul><li>Add a target for .NET Core 3.0.</li><li>Add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework.</li><li>Use the <a href="/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-if" data-linktype="absolute-path">#if preprocessor directive</a> with the appropriate target framework symbol to conditionally compile code.</li></ul><p>For example, synchronous reads and writes on HTTP request and response streams are disabled by default as of ASP.NET Core 3.0. ASP.NET Core 2.2 supports the synchronous behavior by default. Consider a middleware library in which synchronous reads and writes should be enabled where IO is occurring. The library should enclose the code to enable synchronous features in the appropriate preprocessor directive. For example:</p><pre><code class="lang-csharp" highlight-lines="9-24">public async Task Invoke(HttpContext httpContext)
{
    if (httpContext.Request.Path.StartsWithSegments(_path, StringComparison.Ordinal))
    {
        httpContext.Response.StatusCode = 200;
        httpContext.Response.ContentType = "application/json";
        httpContext.Response.ContentLength = _bufferSize;

#if !NETCOREAPP3_0 &amp;&amp; !NETCOREAPP5_0
        var syncIOFeature = httpContext.Features.Get&lt;IHttpBodyControlFeature&gt;();
        if (syncIOFeature != null)
        {
            syncIOFeature.AllowSynchronousIO = true;
        }

        using (var sw = new StreamWriter(
            httpContext.Response.Body, _encoding, bufferSize: _bufferSize))
        {
            _json.Serialize(sw, new JsonMessage { message = "Hello, World!" });
        }
#else
        await JsonSerializer.SerializeAsync&lt;JsonMessage&gt;(
            httpContext.Response.Body, new JsonMessage { message = "Hello, World!" });
#endif
        return;
    }

    await _next(httpContext);
}
</code></pre><h2 id="use-an-api-introduced-in-30">Use an API introduced in 3.0</h2><p>Imagine that you want to use an ASP.NET Core API that was introduced in ASP.NET Core 3.0. Consider the following questions:</p><ol><li>Does the library functionally require the new API?</li><li>Can the library implement this feature in a different way?</li></ol><p>If the library functionally requires the API and there's no way to implement it down-level:</p><ul><li>Target .NET Core 3.x only.</li><li>Add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework.</li></ul><p>If the library can implement the feature in a different way:</p><ul><li>Add .NET Core 3.x as a target framework.</li><li>Add a <code>&lt;FrameworkReference&gt;</code> element for the shared framework.</li><li>Use the <a href="/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-if" data-linktype="absolute-path">#if preprocessor directive</a> with the appropriate target framework symbol to conditionally compile code.</li></ul><p>For example, the following Tag Helper uses the <a href="/en-us/dotnet/api/microsoft.aspnetcore.hosting.iwebhostenvironment" data-linktype="absolute-path">IWebHostEnvironment</a> interface introduced in ASP.NET Core 3.0. Consumers targeting .NET Core 3.0 execute the code path defined by the <code>NETCOREAPP3_0</code> target framework symbol. The Tag Helper's constructor parameter type changes to <a href="/en-us/dotnet/api/microsoft.aspnetcore.hosting.ihostingenvironment" data-linktype="absolute-path">IHostingEnvironment</a> for .NET Core 2.1 and .NET Framework 4.6.1 consumers. This change was necessary because ASP.NET Core 3.0 marked <code>IHostingEnvironment</code> as obsolete and recommended <code>IWebHostEnvironment</code> as the replacement.</p><pre><code class="lang-csharp">[HtmlTargetElement("script", Attributes = "asp-inline")]
public class ScriptInliningTagHelper : TagHelper
{
    private readonly IFileProvider _wwwroot;

#if NETCOREAPP3_0
    public ScriptInliningTagHelper(IWebHostEnvironment env)
#else
    public ScriptInliningTagHelper(IHostingEnvironment env)
#endif
    {
        _wwwroot = env.WebRootFileProvider;
    }

    // code omitted for brevity
}
</code></pre><p>The following multi-targeted project file supports this Tag Helper scenario:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
  
  &lt;PropertyGroup&gt;
    &lt;TargetFrameworks&gt;netcoreapp2.1;netcoreapp3.0;net461&lt;/TargetFrameworks&gt;
  &lt;/PropertyGroup&gt;
  
  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Markdig" Version="0.16.0" /&gt;
  &lt;/ItemGroup&gt;
  
  &lt;ItemGroup Condition="'$(TargetFramework)' != 'netcoreapp3.0'"&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Mvc.Razor" Version="2.1.0" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.0'"&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre><h2 id="use-an-api-removed-from-the-shared-framework">Use an API removed from the shared framework</h2><p>To use an ASP.NET Core assembly that was removed from the shared framework, add the appropriate package reference. For a list of packages removed from the shared framework in ASP.NET Core 3.0, see <a href="../migration/22-to-30?view=aspnetcore-3.1#remove-obsolete-package-references" data-linktype="relative-path">Remove obsolete package references</a>.</p><p>For example, to add the web API client:</p><pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;FrameworkReference Include="Microsoft.AspNetCore.App" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Microsoft.AspNet.WebApi.Client" Version="5.2.7" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><h2 id="additional-resources">Additional resources</h2></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>