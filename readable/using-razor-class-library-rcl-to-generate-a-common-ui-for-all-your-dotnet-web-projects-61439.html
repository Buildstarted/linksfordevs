<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Using  Razor Class Library (RCL) to generate a common UI for all your dotnet web projects - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Using  Razor Class Library (RCL) to generate a common UI for all your dotnet web projects - linksfor.dev(s)"/>
    <meta property="article:author" content="https://medium.com/@zigzig_82281"/>
    <meta property="og:description" content="Getting a ready-to-go pack to build a website is a common need for web developers. Buying a 50$ template with a complete&#xA0;.net integration&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://medium.com/swlh/using-razor-class-library-rcl-to-generate-a-common-ui-for-all-your-dotnet-web-projects-be970d4a82a0"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Using  Razor Class Library (RCL) to generate a common UI for all your dotnet web projects</title>
<div class="readable">
        <h1>Using  Razor Class Library (RCL) to generate a common UI for all your dotnet web projects</h1>
            <div>by https://medium.com/@zigzig_82281</div>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 07 May 2020</div>
        <p><a href="https://medium.com/swlh/using-razor-class-library-rcl-to-generate-a-common-ui-for-all-your-dotnet-web-projects-be970d4a82a0">https://medium.com/swlh/using-razor-class-library-rcl-to-generate-a-common-ui-for-all-your-dotnet-web-projects-be970d4a82a0</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section><div><div><p id="cad6" data-selectable-paragraph="">Let’s first <strong>create a blank solution </strong>and then <strong>add a new project </strong>of type<strong> “Razor Class Library”</strong> (RCL). This project will contain all our front-end elements like views, javascript, style sheet. Check this <a href="https://docs.microsoft.com/en-us/aspnet/core/razor-pages/ui-class?view=aspnetcore-3.1&amp;tabs=visual-studio" target="_blank" rel="noopener nofollow">documentation</a> for more info about RCL.</p><figure><div><div><div><p><img src="https://miro.medium.com/max/60/1*eK6rEQNQ-jBNe3_SXUkJWg.png?q=20" width="519" height="92" role="presentation"></p><p><img width="519" height="92" srcset="https://miro.medium.com/max/552/1*eK6rEQNQ-jBNe3_SXUkJWg.png 276w, https://miro.medium.com/max/1038/1*eK6rEQNQ-jBNe3_SXUkJWg.png 519w" sizes="519px" role="presentation" src="https://miro.medium.com/max/519/1*eK6rEQNQ-jBNe3_SXUkJWg.png"></p></div></div></div></figure><p id="e921" data-selectable-paragraph="">During the project creation wizard, don’t forget to <strong>check “Support pages and view”</strong></p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*j11c8oup5PhNsSFr3Hxv2w.png?q=20" width="973" height="442" role="presentation"></p><p><img width="973" height="442" srcset="https://miro.medium.com/max/552/1*j11c8oup5PhNsSFr3Hxv2w.png 276w, https://miro.medium.com/max/1104/1*j11c8oup5PhNsSFr3Hxv2w.png 552w, https://miro.medium.com/max/1280/1*j11c8oup5PhNsSFr3Hxv2w.png 640w, https://miro.medium.com/max/1400/1*j11c8oup5PhNsSFr3Hxv2w.png 700w" sizes="700px" role="presentation" src="https://miro.medium.com/max/973/1*j11c8oup5PhNsSFr3Hxv2w.png"></p></div></div></div></div></figure><p id="9556" data-selectable-paragraph="">Now,<strong> create a new web project</strong> that will be helpful during our template development process. Consider this project like a unit test solution with the only goal to test our template rendering. <strong>Add a reference</strong> on our web project to our template project.</p><p id="76eb" data-selectable-paragraph="">In the template root folder, create a two folders named Views and wwwroot. Inside the Views folder, create a sub-folder named Shared. In the wwwroot folder, create 3 folders named images, css, js.<br>This will help us to keep the same directory structure than a web site.</p><p id="0519" data-selectable-paragraph="">On the freshly created folder (Views\Shared), create a new View that will host our base layout (for example _BaseTemplateLayout.cshtml).</p><figure><div><div><div><p><img src="https://miro.medium.com/max/32/1*xNG6EtAU3NVsnyKocZKzJw.png?q=20" width="325" height="599" role="presentation"></p><p><img width="325" height="599" srcset="https://miro.medium.com/max/552/1*xNG6EtAU3NVsnyKocZKzJw.png 276w, https://miro.medium.com/max/650/1*xNG6EtAU3NVsnyKocZKzJw.png 325w" sizes="325px" role="presentation"></p></div></div></div><figcaption data-selectable-paragraph="">Your solution should look like this</figcaption></figure><p id="9904" data-selectable-paragraph="">Now, let’s start with the fun part ! We can customize our base template to integrate our design. Proceed like any other layout. Let’s put this code for the sample :</p><figure><div></div></figure><p id="6183" data-selectable-paragraph="">The <strong>@RenderBody is essential</strong> because it will allow the child views to render their content in this layout.</p><p id="4f38" data-selectable-paragraph="">The VS solution should compile without any error. Set our WebApp as startup project and launch it. Ensure that the web site is working properly.</p><p id="2b44" data-selectable-paragraph="">Now, let’s go to the webApp projet and open “<em>Views\_ViewStart.cshtml”</em> file. <strong>Replace the name of the default layout</strong> (usually _Layout) by the name of the layout created in the template project (in my example _BaseTemplateLayout). <br>Compile, start our project and check that the page displays our new design.</p><figure><div><div><div><p><img src="https://miro.medium.com/max/60/1*ESVRFznn9_0wtDZlohKcRQ.png?q=20" width="518" height="283" role="presentation"></p><p><img width="518" height="283" srcset="https://miro.medium.com/max/552/1*ESVRFznn9_0wtDZlohKcRQ.png 276w, https://miro.medium.com/max/1036/1*ESVRFznn9_0wtDZlohKcRQ.png 518w" sizes="518px" role="presentation"></p></div></div></div></figure><p id="7fb2" data-selectable-paragraph="">In order to live debug the template (and get a recompilation of Layout/Views), you need to add watchers to specific folders as explained in <strong>this article</strong>. In the following example, the line 6 to 19 will configure razor live compilation to monitor the folder of the webApp and the folder of the template project.</p><figure><div></div></figure><p id="672d" data-selectable-paragraph="">Now let’s see some tips around RCL.</p><h2 id="7cc9" data-selectable-paragraph="">1. Nuget Package</h2><p id="4d3e" data-selectable-paragraph="">We can <strong>build a nuget package</strong> of our template in order to use it in other web projects like we do with NewtonsoftJson or others famous nuget packages. Right click on the template solution, go to properties and check “Generate nuget Package on build” on the Package tab.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*ur7H6Lz6QdVK_8yHZbR41A.png?q=20" width="1095" height="384" role="presentation"></p><p><img width="1095" height="384" srcset="https://miro.medium.com/max/552/1*ur7H6Lz6QdVK_8yHZbR41A.png 276w, https://miro.medium.com/max/1104/1*ur7H6Lz6QdVK_8yHZbR41A.png 552w, https://miro.medium.com/max/1280/1*ur7H6Lz6QdVK_8yHZbR41A.png 640w, https://miro.medium.com/max/1400/1*ur7H6Lz6QdVK_8yHZbR41A.png 700w" sizes="700px" role="presentation"></p></div></div></div></div></figure><p id="751d" data-selectable-paragraph="">After the next build, in the bin folder of our template project, we will have a nuget package that we might upload to our favorite nuget repository during our CI/CD process. That is awesome !</p><h2 id="c0b8" data-selectable-paragraph="">2. Front end tooling</h2><p id="ca50" data-selectable-paragraph="">I’m a great fan of <a href="https://docs.microsoft.com/en-us/aspnet/core/client-side/libman/libman-vs?view=aspnetcore-3.1" target="_blank" rel="noopener nofollow">library manager</a> for its simplicity and its smart integration into a VS solution. Unfortunately, RCL projects are not supported. As a workaround, on our webApp project, simply add a front package (right click on webApp project, Add, Client-Side library and choose jquery for example). Copy paste the file libman.json from webApp project into our template project and tadam , we get libman enabled in our template project. By default, libman will download front librairies in folder wwwroot/dist</p><figure><div><div><div><p><img src="https://miro.medium.com/max/52/1*BpWWnKg-kX-_nLE8HpN7uA.png?q=20" width="376" height="429" role="presentation"></p><p><img width="376" height="429" srcset="https://miro.medium.com/max/552/1*BpWWnKg-kX-_nLE8HpN7uA.png 276w, https://miro.medium.com/max/752/1*BpWWnKg-kX-_nLE8HpN7uA.png 376w" sizes="376px" role="presentation"></p></div></div></div></figure><p id="f68f" data-selectable-paragraph="">As well, if you have <a href="https://marketplace.visualstudio.com/items?itemName=MadsKristensen.BundlerMinifier" target="_blank" rel="noopener nofollow">Bundle &amp; Minifier extension</a>, you can enable bundle and minifcation in our template project.</p><p id="62fa" data-selectable-paragraph="">Bundle and libman can be processed on build, no need to embed external front libraries in our source control. To enable bundle &amp; libman on build, right click on respective config files and enable them for build.</p><p id="04c6" data-selectable-paragraph="">Now, we have some cool front libraries in our template project, we can use them in our base layout view. In order to reference an asset, we must prefix it by <strong><em>/_content/[AssemblyName]/pathToAsset</em></strong><em> </em><br>wwwroot folder is not part of asset path. So if I have a logo.png on my wwwroot/images folder, my path will be : /_content/makeITeasy.LayoutLibrary.Template/images/logo.png</p><h2 id="ebc8" data-selectable-paragraph="">3. Partials &amp; Razor development</h2><p id="610c" data-selectable-paragraph="">Partial views are supported. This helps to get a better organisation in our template files. We might have a layout file for header, footer, menu navigation …</p><p id="3e3d" data-selectable-paragraph="">Just create a partial view and reference it with :</p><pre><span id="be5b" data-selectable-paragraph="">@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers<br>&lt;partial name="_BaseTemplateFooter.cshtml"&gt;&lt;/partial&gt;<br>or<br>@await Html.PartialAsync("_BaseTemplateFooter")</span></pre><p id="7379" data-selectable-paragraph="">The template project supports all razor features so imagination is just your limit :)</p><h2 id="8971" data-selectable-paragraph="">4. Sections</h2><p id="4d1e" data-selectable-paragraph="">To improve file organisation and keep a clear separation of assets between template and implementations, we may use Sections. By doing this, our webApp can integrate part of its logic into the template without changing the integrity of the template.</p><p id="0e03" data-selectable-paragraph="">Usually, template project contains only scripts that are related to the template (captain obvious). Our webApp will also have assets related to its scope and we need to inject them on the base template. We will proceed by using sections giving some free rein to the webApp on a limited placeholder.</p><p id="7caf" data-selectable-paragraph="">Add the RenderSection directive in the base layout template</p><pre><span id="267d" data-selectable-paragraph="">@RenderSection("Scripts", required: false)</span></pre><p id="425a" data-selectable-paragraph="">Fill the Section in our view (or layout)</p><pre><span id="7964" data-selectable-paragraph="">@section Scripts{<br>  &lt;script&gt;<br>  console.log("hello from the view");<br>  &lt;/script&gt;<br>}</span></pre><p id="5175" data-selectable-paragraph=""><strong>5. Passing content from View to Layout</strong></p><p id="c490" data-selectable-paragraph="">Let’s see now how we can pass content from our view to our template layout. It can be done with ViewBag, ViewData but I prefer to use dependency injection.</p><p id="1a94" data-selectable-paragraph="">Imagine that our controller/view need to pass the title of the page to the template layout. In our template project, let’s create a basic class PageDefinition that will contain a property Title.</p><pre><span id="fd24" data-selectable-paragraph="">public class PageDefinition<br>{<br>  public string Title { get; set; }<br>}</span></pre><p id="59c7" data-selectable-paragraph="">Register this class in our webApp startup, services configuration</p><pre><span id="3b19" data-selectable-paragraph="">services.AddScoped&lt;PageDefinition&gt;();</span></pre><p id="0ca9" data-selectable-paragraph="">In our controller, let’s set the title of the page :</p><figure><div></div></figure><p id="60b8" data-selectable-paragraph="">Final step is to use the value injected by DI in our template layout.</p><figure><div></div></figure><h2 id="0734" data-selectable-paragraph="">Conclusion</h2><p id="25f7" data-selectable-paragraph="">As you can see, packaging a website UI is as simple as developing a dotnet library. This process will ensure a high consistency between all your web projects and will help you to better organize/track your UI update. Razor Class Library rely on aspnet core development foundations so quite easy to onboard.</p><p id="1882" data-selectable-paragraph="">If things are not clear enough, you’d better check the project or code :p</p><p id="ae49" data-selectable-paragraph="">Hope you like this article, don’t hesitate to drop me a message for any concerns :p</p></div></div></section></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>