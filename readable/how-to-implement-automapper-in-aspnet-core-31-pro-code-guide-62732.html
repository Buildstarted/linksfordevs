<!DOCTYPE html>
<html lang="en">
<head>
    <title>
How to implement Automapper in ASP.NET Core 3.1 | Pro Code Guide - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="How to implement Automapper in ASP.NET Core 3.1 | Pro Code Guide - linksfor.dev(s)"/>
    <meta property="og:description" content="Automapper is a popular small library used in ASP.NET Core to map objects of dissimilar types without the need to write boring code to map each data member."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://procodeguide.com/programming/automapper-in-asp-net-core/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - How to implement Automapper in ASP.NET Core 3.1 | Pro Code Guide</title>
<div class="readable">
        <h1>How to implement Automapper in ASP.NET Core 3.1 | Pro Code Guide</h1>
            <div>Reading time: 8-10 minutes</div>
        <div>Posted here: 11 Jun 2020</div>
        <p><a href="https://procodeguide.com/programming/automapper-in-asp-net-core/">https://procodeguide.com/programming/automapper-in-asp-net-core/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>

<p>In every application, there will be a need to map the object of one type to object of another type. Automapper is used to map these objects of dissimilar types without the need to write boring code to map each data member.  Automapper in ASP.NET core comes handy when mapping objects between Model  &amp; DTO.</p>

<h2><span id="What_is_automapper_where_does_it_fits"></span>What is automapper &amp; where does it fits?<span></span></h2>
<figure><img src="https://procodeguide.com/wp-content/uploads/2020/06/AutoMapper-1024x506.png" alt="Automapper" srcset="https://procodeguide.com/wp-content/uploads/2020/06/AutoMapper-1024x506.png 1024w, https://procodeguide.com/wp-content/uploads/2020/06/AutoMapper-300x148.png 300w, https://procodeguide.com/wp-content/uploads/2020/06/AutoMapper-768x380.png 768w, https://procodeguide.com/wp-content/uploads/2020/06/AutoMapper.png 1200w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
<p><strong><em><a href="https://automapper.org/" target="_blank" rel="noreferrer noopener">Automapper</a></em></strong> is a popular small library for an object to object mapping used to map objects of different classes.</p>
<p>Let’s say you have two different classes EmployeeDTO &amp; EmployeeModel with the same data members and you need to copy data from one object to another. Now you cannot set an instance of one object to another object as though data member match but objects are of different classes. You will have to use the traditional approach i.e. copy data from one object to another field by field.</p>
<p>To simply this job of mapping data from one object to objects Auto Mapper can be used. Auto Mapper is an open-source library and It maps the properties of two different objects,</p>
<h2><span id="Implement_automapper_in_ASP_NET_Core"></span>Implement automapper in ASP.NET Core<span></span></h2>
<h3><span id="Setup_project_for_demonstration"></span>Setup project for demonstration<span></span></h3>
<h4><span id="Create_new_ASP_NET_Core_API_Project"></span>Create new ASP.NET Core API Project<span></span></h4>
<p>For implementation purpose, I have created a default ASP.NET Core 3.1 API Project using Visual Studio 2019</p>
<figure><img src="https://procodeguide.com/wp-content/uploads/2020/06/ASP.NET-Core-3.1-API-Project-1024x308.png" alt="ASP.NET Core 3.1 API Project Creation" srcset="https://procodeguide.com/wp-content/uploads/2020/06/ASP.NET-Core-3.1-API-Project-1024x308.png 1024w, https://procodeguide.com/wp-content/uploads/2020/06/ASP.NET-Core-3.1-API-Project-300x90.png 300w, https://procodeguide.com/wp-content/uploads/2020/06/ASP.NET-Core-3.1-API-Project-768x231.png 768w, https://procodeguide.com/wp-content/uploads/2020/06/ASP.NET-Core-3.1-API-Project.png 1238w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
<h4><span id="Install_automapper_NuGet_package"></span>Install automapper NuGet package<span></span></h4>
<p>Install package AutoMapper.Extensions.Microsft.DependencyInjection &amp; this package depends on the AutoMapper package which will also get installed with this package.</p>
<figure><img src="https://procodeguide.com/wp-content/uploads/2020/06/Automapper-NuGet-Extension-1024x593.png" alt="Automapper NuGet Extension" srcset="https://procodeguide.com/wp-content/uploads/2020/06/Automapper-NuGet-Extension-1024x593.png 1024w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-NuGet-Extension-300x174.png 300w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-NuGet-Extension-768x444.png 768w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-NuGet-Extension.png 1258w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
<h4><span id="Create_sample_EmployeeDTO_EmployeeModel_classes"></span>Create sample EmployeeDTO &amp; EmployeeModel classes<span></span></h4>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeDTO
{
    public long Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
}</pre>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeModel
{
    public long Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
}</pre>
<h3><span id="Configure_automapper_in_startup_cs"></span>Configure automapper in startup.cs<span></span></h3>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public void ConfigureServices(IServiceCollection services)
{
    services.AddAutoMapper(AppDomain.CurrentDomain.GetAssemblies());
}
//Remaining code has been removed</pre>
<h3><span id="Create_an_automapper_mapping_profile_as_EmployeeProfile_cs"></span>Create an automapper mapping profile as EmployeeProfile.cs<span></span></h3>
<p>Creating Mapping profiles is a better way to organize your object mappings. This profile tells automapper about which object links to which another object, which property of one object links to which property of other object and even let’s configure conditional mappings.</p>
<p>Create a mapping profile class that inherits from AutoMapper.Profile and add the configuration in the constructor of that mapping profile class</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeProfile : Profile
{
    public EmployeeProfile()
    {
        CreateMap&lt;EmployeeDTO, EmployeeModel&gt;();
    }
}</pre>
<p>Do note that with above CreateMap you can map from EmployeeDTO to EmployeeModel but reverse mapping will not be supported. Reverse Maps will have to be used for bidirectional mapping.</p>
<h3><span id="Using_employee_mapping_in_Employee_controller"></span>Using employee mapping in Employee controller<span></span></h3>
<p>Create an Employee controller as shown below. Automapper service will have to be injected into controller using constructor dependency injection (<strong><em><a rel="noreferrer noopener" href="https://procodeguide.com/programming/dependency-injection-in-asp-net-core-3/" target="_blank"><span>Refer here for more details on Dependency Injection</span></a></em></strong>). Here Employee controller’s post method takes an object of type EmployeeDTO and using automapper maps it to EmployeeModel &amp; return the same as JSON.</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">[Route("api/[controller]")]
[ApiController]
public class EmployeeController : ControllerBase
{
    private readonly IMapper _mapper;

    public EmployeeController(IMapper mapper)
    {
        _mapper = mapper;
    }

    // POST api/&lt;EmployeeController&gt;
    [HttpPost]
    public IActionResult Post([FromBody] EmployeeDTO _employeeDTO)
    {
        var employeeModel = _mapper.Map&lt;EmployeeModel&gt;(_employeeDTO);
        return Ok(employeeModel);
    }
}</pre>
<p>After executing the above project and calling Employee controller post-action using postman we got the following result</p>
<figure><img src="https://procodeguide.com/wp-content/uploads/2020/06/Automapper-Sample-Result-1024x627.png" alt="mapper in ASP.NET Core" srcset="https://procodeguide.com/wp-content/uploads/2020/06/Automapper-Sample-Result-1024x627.png 1024w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-Sample-Result-300x184.png 300w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-Sample-Result-768x470.png 768w, https://procodeguide.com/wp-content/uploads/2020/06/Automapper-Sample-Result.png 1052w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
<h3><span id="Mapping_objects_having_different_property_names"></span>Mapping objects having different property names<span></span></h3>
<p>To demonstrate how to map objects using automapper having different property names. We have modified class EmployeeModel property name for Name to FullName.</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeDTO
{
    public long Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
}</pre>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeModel
{
    public long Id { get; set; }
    public string FullName { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
}</pre>
<p>Below is the code for Employee Mapping Profile class in which we have added mapping for properties having different name i..e. EmployeeDTO=&gt;Name to EmployeeModel=&gt;FullName. Here we have used method ForMember to specify the mapping  </p>
<pre data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeProfile : Profile
{
    public EmployeeProfile()
    {
        CreateMap&lt;EmployeeDTO, EmployeeModel&gt;()
            .ForMember(empmodel =&gt; empmodel.FullName, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Name));
    }
}</pre>
<p>After executing the above project and calling Employee controller post-action using postman we got the following result.</p>
<figure><img src="https://procodeguide.com/wp-content/uploads/2020/06/automapper-conditional-mapping-1024x612.png" alt="automapper conditional mapping" srcset="https://procodeguide.com/wp-content/uploads/2020/06/automapper-conditional-mapping-1024x612.png 1024w, https://procodeguide.com/wp-content/uploads/2020/06/automapper-conditional-mapping-300x179.png 300w, https://procodeguide.com/wp-content/uploads/2020/06/automapper-conditional-mapping-768x459.png 768w, https://procodeguide.com/wp-content/uploads/2020/06/automapper-conditional-mapping.png 1060w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
<h3><span id="Mapping_objects_with_conditional_mapping"></span>Mapping objects with conditional mapping<span></span></h3>
<p>Here is the how to implement conditional mapping for objects in Employee Mapping Profile class</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeProfile : Profile
{
    public EmployeeProfile()
    {
        CreateMap&lt;EmployeeDTO, EmployeeModel&gt;()
            .ForMember(empmodel =&gt; empmodel.FullName, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Name))
            .ForMember(empmodel =&gt; empmodel.Salary, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Age &gt; 55 ? empdto.Salary * 10 : empdto.Salary));
    }
}</pre>
<h3><span id="Mapping_objects_with_Reverse_Map"></span>Mapping objects with Reverse Map<span></span></h3>
<p>Do note that with CreateMap you can map from source (EmployeeDTO) to destination (EmployeeModel) but reverse mapping will not be supported. Reverse Maps will have to be used for bidirectional mapping.</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeProfile : Profile
{
    public EmployeeProfile()
    {
        CreateMap&lt;EmployeeDTO, EmployeeModel&gt;()
            .ForMember(empmodel =&gt; empmodel.FullName, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Name))
            .ForMember(empmodel =&gt; empmodel.Salary, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Age &gt; 55 ? empdto.Salary * 10 : empdto.Salary))
            .ReverseMap();
    }
}</pre>
<h3><span id="Mapping_Objects_of_Complex_Types"></span>Mapping Objects of Complex Types<span></span></h3>
<p>EmployeeDTO &amp; EmployeeModel classes have been modified to add a new property which is of a type of custom class as shown below</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class TelephoneNumberDTO
{
    //1 - Home, 2 - Office, 3 - Mobile
    public int PhoneType { get; set; }
    public string PhoneNumber { get; set; }
}</pre>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class TelephoneNumberModel
{
    //1 - Home, 2 - Office, 3 - Mobile
    public int PhoneType { get; set; }
    public string PhoneNumber { get; set; }
}</pre>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeDTO
{
    public long Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
    public TelephoneNumberDTO Telephone { get; set; }
}</pre>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeModel
{
    public long Id { get; set; }
    public string FullName { get; set; }
    public int Age { get; set; }
    public double Salary { get; set; }
    public TelephoneNumberModel Telephone { get; set; }
}</pre>
<p>Here is the how to map complex objects in Employee Mapping Profile class</p>
<pre data-enlighter-language="csharp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">public class EmployeeProfile : Profile
{
    public EmployeeProfile()
    {
        CreateMap&lt;EmployeeDTO, EmployeeModel&gt;()
            .ForMember(empmodel =&gt; empmodel.FullName, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Name))
            .ForMember(empmodel =&gt; empmodel.Salary, empdto =&gt; empdto.MapFrom(empdto =&gt; empdto.Age &gt; 55 ? empdto.Salary * 10 : empdto.Salary))
            .ReverseMap();
        CreateMap&lt;TelephoneNumberDTO, TelephoneNumberModel&gt;()
            .ReverseMap();
    }
}</pre>
<h2><span id="Summary"></span>Summary<span></span></h2>
<p>Automapper is used to map objects of dissimilar types without the need to write boring code to map each data member.</p>
<p>We used automapper in ASP.NET Core to map objects of dissimilar types. It was easy to map objects having the same property names with minimal coding. Though different property names required some mapping to map properties within classes.</p>
<p>You can also check my other article on Top 12 ASP.NET Core libraries for developers – <strong><em><a href="https://procodeguide.com/programming/top-12-essential-asp-net-core-libraries/"><span>https://procodeguide.com/programming/top-12-essential-asp-net-core-libraries/</span></a></em></strong> </p>
	</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>