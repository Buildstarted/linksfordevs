<!DOCTYPE html>
<html lang="en">
<head>
    <title>
I&#x2019;ve noticed three types of serverless compute platforms. Let&#x2019;s deploy something to each. - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="I&#x2019;ve noticed three types of serverless compute platforms. Let&#x2019;s deploy something to each. - linksfor.dev(s)"/>
    <meta property="article:author" content="Author: Richard Seroter"/>
    <meta property="og:description" content="Are all serverless compute platforms&#x2014;typically labeled Function-as-a-Service&#x2014;the same? Sort of. They all offer scale-to-zero compute triggered by events and billed based on consumed resources. But &#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://seroter.com/2020/04/02/ive-noticed-three-types-of-serverless-compute-platforms-lets-deploy-something-to-each/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - I&#x2019;ve noticed three types of serverless compute platforms. Let&#x2019;s deploy something to each.</title>
<div class="readable">
        <h1>I&#x2019;ve noticed three types of serverless compute platforms. Let&#x2019;s deploy something to each.</h1>
            <div>by Author: Richard Seroter</div>
            <div>Reading time: 14-18 minutes</div>
        <div>Posted here: 06 Apr 2020</div>
        <p><a href="https://seroter.com/2020/04/02/ive-noticed-three-types-of-serverless-compute-platforms-lets-deploy-something-to-each/">https://seroter.com/2020/04/02/ive-noticed-three-types-of-serverless-compute-platforms-lets-deploy-something-to-each/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><article id="post-8045" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">

	<!-- .entry-header-wrapper -->

	<div itemprop="text">
		
<p>Are all serverless compute platforms—typically labeled Function-as-a-Service—the same? Sort of. They all offer scale-to-zero compute triggered by events and billed based on consumed resources. But I haven’t appreciated the nuances of these offerings, until now. Last week, Laurence Hecht did great work analyzing the latest CNCF survey data. It revealed which serverless (compute) offerings have the most usage. To be clear, this is about compute, not databases, API gateways, workflow services, queueing, or any other managed services.</p>



<figure><div>

</div></figure>



<p><strong>To me, the software in that list falls into one of three categories: connective compute, platform expanding, and full stack apps</strong>. Depending on what you want to accomplish, one may be better than the others. Let’s look at those three categories, see which platforms fall into each one, and see an example in action.</p>



<h2>Category 1: Connective Compute</h2>



<figure><table><tbody><tr><td>Trigger / Destination</td><td>Signature</td><td>Packaging</td><td>Deployment</td></tr><tr><td>Database, storage, message queue, API Gateway, CDN, Monitoring service </td><td>Handlers with specific parameters</td><td>ZIP archive, containers</td><td>Web portal, CLI, CI/CD pipelines</td></tr></tbody></table></figure>



<p>The best functions are small functions that fill the gaps between managed services. This category is filled with products like AWS Lambda, Microsoft Azure Functions, Google Cloud Functions, Alibaba Cloud Functions, and more. These functions are triggered when something happens in another managed service—think of database table changes, messages reaching a queue, specific log messages hitting the monitoring system, and files uploaded to storage. With this category of serveless compute, you stitch together managed services into apps, writing as little code as possible. Little-to-none of your existing codebase transfers over, as this caters to greenfield solutions based on a cloud-first approach.</p>



<p>AWS Lambda is the grandaddy of them all, so let’s take a look at it.</p>



<p>In my example, I want to read messages from a queue. Specifically, have an AWS Lambda function read from Amazon SQS. Sounds simple enough! </p>



<p>You can write AWS Lambda functions in many ways. You can also deploy them in many ways. There are many frameworks that try to simplify the latter, as you would rarely deploy a single function as your “app.” Rather, a function is part of a broader collection of resources that make up your system. Those resources might be described via the <a href="https://aws.amazon.com/serverless/sam/">AWS Serverless Application Model</a> (SAM), where you can lay out all the functions, databases, APIs and more that should get deployed together. And you could use the <a href="https://aws.amazon.com/serverless/serverlessrepo/">AWS Serverless Application Repository</a> to browse and deploy SAM templates created by you, or others.  However you define it, you’ll deploy your function-based system via the <a href="https://docs.aws.amazon.com/cli/latest/reference/lambda/create-function.html">AWS CLI</a>, AWS console, <a href="https://docs.aws.amazon.com/lambda/latest/dg/build-pipeline.html">AWS-provided CI/CD tooling</a>, or <a href="https://aws.amazon.com/blogs/apn/simplifying-serverless-ci-cd-with-circleci-and-the-aws-serverless-application-model/">3rd party tools like CircleCI</a>.</p>



<p>For this simple demo, I’m going to build a C#-based function and deploy it via the AWS console.</p>



<p>First up, I went to the AWS console and defined a new queue in SQS. I chose the “standard queue” type.</p>



<figure><img data-attachment-id="8053" data-permalink="https://seroter.com/2020-04-02-serverless-03/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png" data-orig-size="600,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-03" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-03.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>Next up, creating a new AWS Lambda function. I gave it a name, chose .NET Core 3.1 as my runtime, and created a role with basic permissions.</p>



<figure><img data-attachment-id="8051" data-permalink="https://seroter.com/2020-04-02-serverless-01/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png" data-orig-size="600,407" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-01" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-01.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>After clicking “create function”, I get a overview screen that shows the “design” of my function and provides many configuration settings.</p>



<figure><img data-attachment-id="8054" data-permalink="https://seroter.com/2020-04-02-serverless-02/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png" data-orig-size="600,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-02" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-02.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I clicked “add trigger” to specify what event kicks off my function. I’ve got lots of options to choose from, which is the hallmark of a “connective compute” function platform. I chose SQS, selected my previously-created queue from the dropdown list, and clicked “Add.”</p>



<figure><img data-attachment-id="8055" data-permalink="https://seroter.com/2020-04-02-serverless-04/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png" data-orig-size="600,605" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-04" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png?w=298" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-04.png?w=298 298w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>Now all I have to do is the write the code that handles the queue message. I chose VS Code as my tool. At first, I tried using the <a href="https://aws.amazon.com/visualstudiocode/">AWS Toolkit for Visual Studio Code</a> to generate a SAM-based project, but the only template was an API-based “hello world” one that forced me to retrofit a bunch of stuff after code generation. So, I decided to skip SAM for now, and code the AWS Lambda function directly, by itself.</p>



<p>The .NET team at AWS has done below-the-radar great work for years now, and their Lambda tooling is no exception. They offer a handful of handy templates you can use with the .NET CLI. One basic command installs them for you: <code>dotnet new -i Amazon.Lambda.Templates</code></p>



<figure><img data-attachment-id="8058" data-permalink="https://seroter.com/2020-04-02-serverless-05/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png" data-orig-size="600,324" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-05" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-05.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I chose to create a new project by entering <code>dotnet new lambda.sqs</code>. This produced a pair of projects, one with the function source code, and one that has unit tests. The primary project also has a <span>aws-lambda-tools-default.json</span> file that includes command line options for deploying your function. I’m not sure if I need it given I’m deploying via CLI, but I updated references to .NET Core 3.1 anyway. Note that the “function-handler” value *is* important, as we’ll need that shortly. This tells Lambda which operation (in which class) to invoke.</p>



<figure><img data-attachment-id="8060" data-permalink="https://seroter.com/2020-04-02-serverless-06/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png" data-orig-size="600,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-06" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-06.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I kept the generated function code, which simply prints out the contents of the message pulled from Amazon SQS. </p>



<figure><img data-attachment-id="8062" data-permalink="https://seroter.com/2020-04-02-serverless-07/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png" data-orig-size="600,557" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-07" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-07.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I successfully built the project, and then had to “publish” it to get the right assets for packaging. <a href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-package.html">This publish command</a> ensures that configuration files get bundled up as well:</p>



<pre>dotnet publish /p:GenerateRuntimeConfigurationFiles=true</pre>



<p>Now, all I have to do is zip up the resulting files in the “publish” directory. With those DLLs and *.json files zipped up, I return to the AWS console to upload my code. In most cases, you’re going to stash the archive file in Amazon S3 (either manually, or as the result of a CI process). Here, I uploaded my ZIP file directly, AND, set the function handler value equal to the “function-handler” value from my configuration file.</p>



<figure><img data-attachment-id="8066" data-permalink="https://seroter.com/2020-04-02-serverless-08/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png" data-orig-size="600,390" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-08" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-08.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>After I click “save”, I get a notice that my function was updated. I went back to Amazon SQS, and sent a few messages to the queue, using the “send a message” option.</p>



<figure><img data-attachment-id="8068" data-permalink="https://seroter.com/2020-04-02-serverless-09/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png" data-orig-size="600,488" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-09" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-09.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>After a moment, I saw entries in the “monitoring” view of the AWS Lambda console, and drilled into the CloudWatch logs and saw that my function wrote out the SQS payloads.</p>



<figure><img data-attachment-id="8070" data-permalink="https://seroter.com/2020-04-02-serverless-10/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png" data-orig-size="600,459" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-10" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-10.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I’m impressed at how far the AWS Lambda experience has come since I first tried it out. You’ll find similarly solid experiences from Microsoft, Google and others as you use their FaaS platforms as glue code to connect managed services.</p>



<h2>Category 2: Platform Expanding</h2>



<figure><table><tbody><tr><td>Trigger / Destination</td><td>Signature</td><td>Packaging</td><td>Deployment</td></tr><tr><td>HTTP</td><td>Handlers with specific parameters</td><td>code packages</td><td>Web portal, CLI</td></tr></tbody></table></figure>



<p>There’s a category of FaaS that, to me, isn’t about connecting services together, as much as it’s about expanding or enriching the capabilities of a host platform. From the list above, I’d put offerings like Cloudflare Workers, Twilio Functions, and Zeit Serverless Functions into that bucket.</p>



<p>Most, if not all, of these start with an HTTP request and only support specific programming languages. For Twilio, you can use their <a href="https://www.twilio.com/docs/runtime/functions">integrated FaaS</a> to serve up tokens, call outbound APIs after receiving an SMS, or even change voice calls. Zeit is an impressive host for static sites, and their <a href="https://zeit.co/docs/v2/serverless-functions/introduction">functions platform</a> supports backend operations like authentication, form submissions, and more. And <a href="https://developers.cloudflare.com/workers/about/how-it-works/">Cloudflare Workers</a> is about adding cool functionality whenever someone sends a request to a Cloudfare-managed domain. Let’s actually mess around with Cloudflare Workers.</p>



<p>I go to my (free) Cloudflare account to get started. You can create these running-at-the-edge functions entirely in the browser, or via the Wrangler CLI. Notice here that Workers support JavaScript, Rust, C, and C++. </p>



<figure><img data-attachment-id="8074" data-permalink="https://seroter.com/2020-04-02-serverless-11/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png" data-orig-size="600,268" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-11" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-11.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>After I click “create a Worker”, I’m immediately dropped into a web console where I can author, deploy, and test my function. And, I get some sample code that represents a fully-working Worker. All workers start by responding to a “fetch” event.</p>



<figure><img data-attachment-id="8076" data-permalink="https://seroter.com/2020-04-02-serverless-12/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png" data-orig-size="600,545" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-12" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-12.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>I don’t think you’d use this to create generic APIs or standalone apps. No, you’d use this to make the Cloudflare experience better. They handily have a whole catalog of templates to inspire you, or do your work for you. Most of these show examples of legit Cloudflare use cases: inspect and purge sensitive data from responses, deny requests missing an authorization header, do A/B testing based on cookies, and more. I copied the code from the <a href="https://developers.cloudflare.com/workers/templates/pages/redirect/">“redirect” template</a> which redirects requests to a different URL. I changed a couple things, clicked “save and deploy” and called my function.</p>



<figure><img data-attachment-id="8078" data-permalink="https://seroter.com/2020-04-02-serverless-13/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png" data-orig-size="600,309" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-13" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-13.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>On the left is my code. In the middle is the testing console, where I submitted a GET request, and got back a “301 Moved Permanently” HTTP response. I also see a log entry from my code. If you <a href="https://weathered-sound-9771.seroter.workers.dev/">call my function in your browser</a>, you’ll get redirected to <span>cloudflare.com</span>.</p>



<p>That was super simple. The serverless compute products in this category have a constrained set of functionality, but I think that’s on purpose. They’re meant to expand the set of problems you can solve with their platform, versus creating standalone apps or services.</p>



<h2>Category 3: Full Stack Apps</h2>



<figure><table><tbody><tr><td>Trigger / Destination</td><td>Signature</td><td>Packaging</td><td>Deployment</td></tr><tr><td>HTTP, queue, time</td><td>None</td><td>Containers</td><td>Web portal, CLI, CI/CD pipelines</td></tr></tbody></table></figure>



<p>This category—which I can’t quite figure out the right label for—is about serverless computing for complete web apps. These aren’t functions, per-se, but run on a serverless stack that scales to zero and is billed based on usage. The unit of deployment is a container, which means you are providing more than code to the platform—you are also supplying a web server. This can make serverless purists squeamish since a key value prop of FaaS is the outsourcing of the server to the platform, and only focusing on your code. I get that. The downside of that pure FaaS model is that it’s an unforgiving host for any existing apps. </p>



<p>What fits in this category? The only obvious one to me is <a href="https://cloud.google.com/run">Google Cloud Run</a>, but <a href="https://aws.amazon.com/fargate/">AWS Fargate</a> kinda fits here too. Google Cloud Run is based on the popular open source <a href="https://knative.dev/">Knative</a> project, and runs as a managed service in Google Cloud. Let’s try it out.</p>



<p>First, install the <a href="https://cloud.google.com/sdk/install">Google Cloud SDK</a> to get the <a href="https://cloud.google.com/sdk/gcloud">gcloud command line tool</a>. Once the CLI gets installed, you do a <code>gcloud init</code> in order to link up your Google Cloud credentials, and set some base properties.</p>



<p>Now, to build the app. What’s interesting here, is this is just an app. There’s no special format or method signature. The app just has to accept HTTP requests. You can write the app in any language, use any base image, and end up with a container of any size. The app should still follow some <a href="https://cloud.google.com/run/docs/reference/container-contract">basic cloud-native patterns</a> around fast startup and attached storage. This means—and <a href="https://cloud.google.com/run/docs/migrating">Google promotes this</a>—that you can migrate <em>existing</em> apps fairly easily. For my example, I’ll use Visual Studio for Mac to build a new <span>ASP.NET</span> Web API project with a couple RESTful endpoints.</p>



<figure><img data-attachment-id="8083" data-permalink="https://seroter.com/2020-04-02-serverless-14/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png" data-orig-size="600,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-14" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-14.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>The default project generates a weather-related controller, so let’s stick with that. To show that Google Cloud Run handles more than one endpoint, I’m adding a second method. This one returns a forecast for Seattle, which has been wet and cold for months.</p>


<div><div id="highlighter_909722"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p></td><td><div><p><code>namespace</code> <code>seroter_api_gcr.Controllers</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>[ApiController]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>[Route(</code><code>"[controller]"</code><code>)]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>class</code> <code>WeatherForecastController : ControllerBase</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>private</code> <code>static</code> <code>readonly</code> <code>string</code><code>[] Summaries = </code><code>new</code><code>[]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"Freezing"</code><code>, </code><code>"Bracing"</code><code>, </code><code>"Chilly"</code><code>, </code><code>"Cool"</code><code>, </code><code>"Mild"</code><code>, </code><code>"Warm"</code><code>, </code><code>"Balmy"</code><code>, </code><code>"Hot"</code><code>, </code><code>"Sweltering"</code><code>, </code><code>"Scorching"</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>private</code> <code>readonly</code> <code>ILogger&lt;WeatherForecastController&gt; _logger;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>WeatherForecastController(ILogger&lt;WeatherForecastController&gt; logger)</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>_logger = logger;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>[HttpGet]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>IEnumerable&lt;WeatherForecast&gt; Get()</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>rng = </code><code>new</code> <code>Random();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>Enumerable.Range(1, 5).Select(index =&gt; </code><code>new</code> <code>WeatherForecast</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Date = DateTime.Now.AddDays(index),</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>TemperatureC = rng.Next(-20, 55),</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Summary = Summaries[rng.Next(Summaries.Length)]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>})</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>.ToArray();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>[HttpGet(</code><code>"seattle"</code><code>)]</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>WeatherForecast GetSeattleWeather()</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>new</code> <code>WeatherForecast { Date = DateTime.Now, Summary = </code><code>"Chilly"</code><code>, TemperatureC = 6 };</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>}</code></p></div></td></tr></tbody></table></div></div>


<p>If I were doing this the right way, I’d also change my <span>Program.cs</span> file and read the port from a provided environment variable, as Google suggests. I’m NOT going to do that, and instead will act like I’m just shoveling an existing, unchanged API into the service. </p>



<p>The app is complete and works fine when running locally. To work with Google Cloud Run, my app must be containerized. You can do this a variety of ways, including the most reasonable, which involves Google Cloud Build and continuous delivery. I don’t roll like that. WE’RE DOING IT BY HAND.</p>



<p>I <em>will</em> cheat and have Visual Studio give me a valid Dockerfile. Right-click the project, and add Docker support. This creates a Docker Compose project, and throws a Dockerfile into my original project.</p>



<figure><img data-attachment-id="8087" data-permalink="https://seroter.com/2020-04-02-serverless-15/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png" data-orig-size="500,585" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-15" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png?w=256" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png?w=500" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png?w=500" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png 500w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png?w=128 128w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-15.png?w=256 256w" sizes="(max-width: 500px) 100vw, 500px"></figure>



<p>Let’s make one small tweak. In the Dockerfile, I’m exposing port 5000 from my container, and setting an environment variable to tell my app to listen on that port.</p>



<figure><img data-attachment-id="8086" data-permalink="https://seroter.com/2020-04-02-serverless-16/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png" data-orig-size="500,328" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-16" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png?w=500" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png?w=500" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png 500w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-16.png?w=300 300w" sizes="(max-width: 500px) 100vw, 500px"></figure>



<p>I opened my CLI, and navigated to the folder directly above this project. From there, I executed a Docker build command that pointed to the generated Dockerfile, and tagged the image for Google Container Registry (where Google Cloud Run looks for images).</p>



<pre>docker build --file ./seroter-api-gcr/Dockerfile . --tag <span>gcr.io/seroter/seroter-api-gcr</span></pre>



<p>That finished, and I had a container image in my local registry. I need to get it up to Google Container Registry, so I ran a Docker push command.</p>



<pre>docker push <span>gcr.io/seroter/seroter-api-gcr</span></pre>



<p> After a moment, I see that container in the Google Container Registry.</p>



<figure><img data-attachment-id="8090" data-permalink="https://seroter.com/2020-04-02-serverless-17/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png" data-orig-size="600,221" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-17" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-17.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p> Neat. All that’s left is to spin up Google Cloud Run. From the Google Cloud portal, I choose to create a new Google Cloud Run service. I choose a region and name for my service.</p>



<figure><img data-attachment-id="8092" data-permalink="https://seroter.com/2020-04-02-serverless-18/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png" data-orig-size="602,724" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-18" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png?w=249" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png?w=602" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png?w=602" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png 602w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png?w=125 125w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-18.png?w=249 249w" sizes="(max-width: 602px) 100vw, 602px"></figure>



<p>Next up, I chose the container image to use, and set the container port to 5000. There are lots of other settings here too. I can create a connection to managed services like Cloud SQL, choose max requests per container, set the request timeout, specify the max number of container instances, and more.</p>



<figure><img data-attachment-id="8094" data-permalink="https://seroter.com/2020-04-02-serverless-19/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png" data-orig-size="600,324" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-19" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-19.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>After creating the service, I only need to wait a few seconds before my app is reachable. </p>



<figure><img data-attachment-id="8097" data-permalink="https://seroter.com/2020-04-02-serverless-20/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png" data-orig-size="600,293" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-20" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-20.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<p>As expected, I can ping both API endpoints and get back a result. After a short duration, the service spins compute down to zero.</p>



<figure><img data-attachment-id="8096" data-permalink="https://seroter.com/2020-04-02-serverless-21/" data-orig-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png" data-orig-size="600,93" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="2020.04.02-serverless-21" data-image-description="" data-medium-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png?w=300" data-large-file="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png?w=600" src="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png?w=600" alt="" srcset="https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png 600w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png?w=150 150w, https://seroter.files.wordpress.com/2020/04/2020.04.02-serverless-21.png?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></figure>



<h2>Wrap up</h2>



<p>The landscape of serverless computing is broader than you may think. Depending on what you’re trying to do, it’s possible to make a sub-optimal choice. If you’re working with many different managed services and writing code to connect them, use the first category. If you’re enriching existing platforms with bits of compute functionality, use the second category. And if you’re migrating or modernizing existing apps, or have workloads that demand more platform flexibility, choose the third. Comments? Violent disagreement? Tell me below.</p>
			
			
						</div><!-- .entry-content -->

	<!-- .entry-meta -->

</article></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>