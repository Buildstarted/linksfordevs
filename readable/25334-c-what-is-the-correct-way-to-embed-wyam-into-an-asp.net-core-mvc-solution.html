<!DOCTYPE html>
<html lang="en">
<head>
    <title>
c# - What is the correct way to embed Wyam into an asp.net core MVC solution? -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>c# - What is the correct way to embed Wyam into an asp.net core MVC solution?</h1><div><div class="post-text" itemprop="text"><p>Took me a few hours to get something "okish". I couldn't figure out a clean way to wire up the Razor dependencies, so I just grabbed the <code>contents</code> folder of the Wyam.Docs.Samson nuget package (razor files and other web stuff) and dumped it next to my markdown stuff</p><pre><code>using System;
using Wyam.Common.IO;
using Wyam.Core.Execution;
using Wyam.Docs;

namespace ConsoleApp3
{
    class Program
    {
        static void Main(string[] args)
        {
            Wyam.Common.Tracing.Trace.AddListener(new System.Diagnostics.TextWriterTraceListener(Console.Out));
            var engine = new Engine();
            engine.Namespaces.Add("Wyam.Docs"); // or razor will complain
            engine.FileSystem.InputPaths.Add(new DirectoryPath(@"C:\temp\wyam.test\content"));
            engine.FileSystem.InputPaths.Add(new DirectoryPath(@"C:\temp\wyam.test\input"));
            engine.FileSystem.OutputPath = new DirectoryPath(@"C:\temp\wyam.test\site");
            var dr = new Docs();
            dr.Apply(engine);
            engine.Execute();
        }
    }
}
</code></pre><p>My project file is the following, I believe I had to edit the Wyam.Common package as it wasn't registring properly.</p><pre><code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;netcoreapp2.2&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Wyam.Common" Version="2.2.5" /&gt;
    &lt;PackageReference Include="Wyam.Core" Version="2.2.5" /&gt;
    &lt;PackageReference Include="Wyam.Docs" Version="2.2.5" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre><p>Using this setup (VS2019) generates a site the same look as when running wyam cli with a <code>#recipe Docs</code> or whatever it is.</p><p>Edit: I guess this doesn't really answer the question, but hopefully this can be helpful in putting a solution together. I plan to use this in Azure functions where the console example is sufficient starting point.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>