<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Build This 8-Bit Home Computer With Just 5 Chips&#x2029; - IEEE Spectrum - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Build This 8-Bit Home Computer With Just 5 Chips&#x2029; - IEEE Spectrum - linksfor.dev(s)"/>
    <meta property="article:author" content="By Matt Sarnoff"/>
    <meta property="og:description" content="There&#x2019;s something persistently appealing about 8-bit computing: You can put together a self-contained system that&#x2019;s powerful enough to be user friendly but simple enough to build and program all by yourself. Most 8-bit machines built by hobbyists today are powered by a classic CPU from the heroic age of home computers in the 1980s, when millions of spare TVs were commandeered as displays. I&#x2019;d built one myself, based on the Motorola 6809. I had tried to use as few chips as possible, yet I still needed 13 supporting ICs to handle things such as RAM or serial communications. I began to wonder: What if I ditched the classic CPU for something more modern yet still 8-bit? How low could I get the chip count?"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://spectrum.ieee.org/geek-life/hands-on/build-this-8bit-home-computer-with-just-5-chips"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Build This 8-Bit Home Computer With Just 5 Chips&#x2029; - IEEE Spectrum</title>
<div class="readable">
        <h1>Build This 8-Bit Home Computer With Just 5 Chips&#x2029; - IEEE Spectrum</h1>
            <div>by By Matt Sarnoff</div>
            <div>Reading time: 8-9 minutes</div>
        <div>Posted here: 21 Mar 2020</div>
        <p><a href="https://spectrum.ieee.org/geek-life/hands-on/build-this-8bit-home-computer-with-just-5-chips">https://spectrum.ieee.org/geek-life/hands-on/build-this-8bit-home-computer-with-just-5-chips</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div appgoogleadmobdetail="" apphtmlscrolltoelement="" appjwvideoplayer="" id="article-detail-video"><figure role="img"> 
 <img alt="illustration" src="https://spectrum.ieee.org/image/MzU5MjE4OA.jpeg"> 
 <figcaption>
   Illustration: James Provost 
 </figcaption> 
</figure> 
<p><strong>There’s something persistently appealing</strong> about 8-bit computing: You can put together a self-contained system that’s powerful enough to be user friendly but simple enough to build and program all by yourself. Most 8-bit machines built by hobbyists today are powered by a classic CPU from the <a href="https://spectrum.ieee.org/tech-talk/tech-history/silicon-revolution/the-golden-age-of-basic">heroic age of home computers in the 1980s</a>, when millions of spare TVs were commandeered as displays. I’d built one myself, based on the <a href="http://www.msarnoff.org/6809/">Motorola 6809</a>. I had tried to use as few chips as possible, yet I still needed 13 supporting ICs to handle things such as RAM or serial communications. I began to wonder: What if I ditched the classic CPU for something more modern yet still 8-bit? How low could I get the chip count?</p> 
<p>The result was the <a href="https://github.com/74hc595/Amethyst">Amethyst</a>. Just like a classic home computer, it has an integrated keyboard and can generate audio and video. It also has a built-in high-level programming language for users to write their own programs. And it uses just six chips—an <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42718-ATmega1284_Datasheet.pdf">ATMEGA1284P</a> CPU, a USB interface, and four simple integrated circuits.</p> 
<p>The ATMEGA1284P (or 1284P), introduced around 2008, has 128 kilobytes of flash memory for program storage and 16&nbsp;kB of RAM. It can run at up to 20&nbsp;megahertz, comes with built-in serial-interface controllers, and has 32&nbsp;digital input/output pins.</p> 
<p><iframe allowfullscreen="" frameborder="0" height="349" src="//www.youtube.com/embed/6GKgxBEGH1M" width="620"></iframe></p> 
<p>Thanks to the onboard memory and serial interfaces, I could eliminate a whole slew of supporting chips. I could generate basic audio directly by toggling an I/O pin on and off again at different frequencies to create tones, albeit with the characteristic harshness of a square wave. But what about generating an analog video signal? Surely that would require some dedicated hardware?</p> 
<p>Then, toward the end of 2018, I came across the hack that Steve Wozniak used in the 1970s to give the Apple II its color-graphics capability. This hack was known as NTSC artifact color, and it relied on the fact that U.S. color TV broadcasting was itself a hack of sorts, one that dated back to the 1950s.</p> 
<p>Originally, U.S. broadcast television was black and white only, using a fairly straightforward standard called NTSC (for National Television System Committee). Television cathode-ray tubes scanned a beam across the surface of a screen, row after row. The amplitude of the received video signal dictated the luminance of the beam at any given spot along a row. Then in 1953, NTSC was upgraded to support color television while remaining intelligible to existing black-and-white televisions.</p> 
<p>Compatibility was achieved by encoding color information in the form of a high-frequency sinusoidal signal. The phase of this signal at a given point, relative to a reference signal (the “colorburst”) transmitted before each row began, determined the color’s underlying hue. The amplitude of the signal determined how saturated the color was. This high-frequency color signal was then added to the relatively low-frequency luminance signal to create so-called <a href="https://en.wikipedia.org/wiki/Composite_video">composite video</a>, still used today as an input on many TVs and <a href="https://www.adafruit.com/product/913">cheaper displays for maker projects</a>.</p> 
<figure role="img"> 
 <img alt="graph" src="https://spectrum.ieee.org/image/MzU5MjQ1NQ.jpeg"> 
 <figcaption>
   Illustration: James Provost 
 </figcaption> 
 <figcaption> 
  <strong>TV Trickery:</strong> An analog composite color video signal, as used by U.S. televisions [top left], is compatible with black-and-white receivers because a high-frequency sinusoidal chrominance signal is superimposed on the luminance signal [dotted line] that determines the brightness of a TV scan line. Filtering circuits separate out the signals inside the television. The phase of the chrominance signal with regard to a reference “colorburst” signal determines the hue seen on screen. With a high enough bit rate, a digital signal [bottom left] will be separated out as if it were an analog signal, with different bit patterns producing different colors. In this example, with two bits to each pixel, six colors are possible [four shown], but a faster bit rate allows more colors. 
 </figcaption> 
</figure> 
<p>To a black-and-white TV, the color signal looks like noise and is largely ignored. But a color TV can separate the color signal from the luminance signal with filtering circuitry.</p> 
<p>In the 1970s, engineers realized that this filtering circuitry could be used to great advantage by consumer computers because it permitted a digital, square-wave signal to duplicate much of the effect of a composite analog signal. A stream of 0s sent by a computer to a television as the CRT scanned along a row would be interpreted by the TV as a constant low-analog voltage, representing black. All the 1s would be seen as a constant high voltage, producing pure white. But with a sufficiently fast bit rate, more-complex binary patterns would cause the high-frequency filtering circuits to produce a color signal. This trick allowed the Apple II to display up to 16 colors.</p> 
<p>At first I thought to toggle an I/O pin very quickly to generate the video signal directly. I soon realized, however, that with my 1284P operating at a clock speed of 14.318 MHz, I would not be able to switch it fast enough to display more than four colors, because the built-in serial interfaces took two clock cycles to send a bit, limiting my rate to 7.159 MHz. (The Apple II used fast direct memory access to connect its external memory chip to the video output while its CPU was busy doing internal processing, but as my computer’s RAM is integrated into the chip, this approach wasn’t an option.) So I looked in my drawers and pulled out four 7400 chips—two multiplexers and two parallel-to-serial shift registers. I could set eight pins of the 1284P in parallel and send them simultaneously to the multiplexers and shift registers, which would convert them into a high-speed serial bitstream. In this way I can generate bits fast enough to produce some 215 distinct colors on screen. The cost is that keeping up with the video scan line absorbs a lot of computing capacity: Only about 25 percent of the CPU’s time is available for other tasks.</p> 
<figure role="img"> 
 <img alt="illustration" src="https://spectrum.ieee.org/image/MzU5MjQ0OA.jpeg"> 
 <figcaption>
   Illustration: James Provost 
 </figcaption> 
 <figcaption> 
  <strong>Compact Computer:</strong> The Amethyst is a single-board computer. It uses just six integrated circuits—a CPU, USB interface, and four 7400 chips, which are used to make 215-color video graphics possible. Keyboard switches are soldered directly to the board, which also supports audio and four serial I/O connections for peripherals like game controllers or storage devices. A built-in Forth virtual machine provides a programming environment. 
 </figcaption> 
</figure> 
<p>Consequently, I needed a lightweight programming environment for users, which led me to choose Forth over the traditional Basic. Forth is an old language for embedded systems, and it has the nice feature of being both interactive and capable of efficient compilation of code. You can do a lot in a very small amount of space. Because the 1284P does not allow compiled machine code to be executed directly from its RAM, a user’s code is instead compiled to an intermediate bytecode. This bytecode is then fed as data to a virtual machine running from the 1284P’s flash memory. The virtual machine’s code was written in assembly code and hand-tuned to make it as fast as possible.</p> 
<p>As an engineer working at <a href="https://glowforge.com/">Glowforge</a>, I have access to advanced laser-cutting machines, so it was a simple matter to design and build a wooden case (something of a homage to the wood-grain finish of the <a href="https://en.wikipedia.org/wiki/Atari_2600">Atari 2600</a>). The mechanical keyboard switches are soldered directly onto the Amethyst’s single printed circuit board; it does have the peculiarity that there is no space bar, rather a space button located above the Enter key.</p> 
<p>Complete schematics, PCB files, and system code are available in my GitHub repository, so you can build an Amethyst of your own or improve on my design. Can you shave a chip or two off the count?</p> 
<p><em>This article appears in the April 2020 print issue as “8 Bits, 6 Chips.”</em></p></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>