<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Navigator.sendBeacon() - Web APIs | MDN -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Navigator.sendBeacon() - Web APIs | MDN</h1><div><div id="wikiArticle" class=""><p><span class="seoSummary">The <code><strong>navigator.sendBeacon()</strong></code> method <a href="/en-US/docs/Glossary/Asynchronous">asynchronously</a> sends a small amount of data over <a class="glossaryLink" href="/en-US/docs/Glossary/HTTP" title="HTTP: The HyperText Transfer Protocol (HTTP)&nbsp;is the underlying network protocol that enables transfer of hypermedia documents on the Web, typically between a browser and a server so that humans can read them. The current version of the HTTP specification is called HTTP/2.">HTTP</a> to a web server.</span></p><h2 id="Syntax">Syntax</h2><pre class="syntaxbox">navigator.sendBeacon(<var>url</var>, <var>data</var>);
</pre><h3 id="Parameters">Parameters</h3><dl><dt><code><var>url</var></code></dt><dd>The URL that will receive the <em>data</em>. Can be relative or absolute.</dd><dt><code><var>data</var></code></dt><dd>A <a href="/en-US/docs/Web/API/ArrayBuffer" title="The documentation about this has not yet been written; please consider contributing!"><code>ArrayBuffer</code></a>, <a href="/en-US/docs/Web/API/ArrayBufferView" title="ArrayBufferView is a helper type representing any of the following JavaScript TypedArray types:"><code>ArrayBufferView</code></a>, <a href="/en-US/docs/Web/API/Blob" title="A Blob object represents a file-like object of immutable, raw data; they can be read as text or binary data, or converted into a ReadableStream so its methods can be used for processing the data. Blobs can represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system."><code>Blob</code></a>, <a href="/en-US/docs/Web/API/DOMString" title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String."><code>DOMString</code></a>, <a href="/en-US/docs/Web/API/FormData" title="The FormData interface provides a way to easily construct a set of key/value pairs representing form fields and their values, which can then be easily sent using the XMLHttpRequest.send() method. It uses the same format a form would use if the encoding type were set to &quot;multipart/form-data&quot;."><code>FormData</code></a>, <a href="/en-US/docs/Web/API/ReadableStream" title="The ReadableStream interface of the&nbsp;Streams API&nbsp;represents a readable stream of byte data. The Fetch API offers a concrete instance of a ReadableStream through the body property of a Response object."><code>ReadableStream</code></a>, or <a href="/en-US/docs/Web/API/URLSearchParams" title="The URLSearchParams interface defines utility methods to work with the query string of a URL."><code>URLSearchParams</code></a> object containing the data to send.</dd></dl><h3 id="Return_values">Return values</h3><p>The <code><strong>sendBeacon()</strong></code> method returns <code>true</code> if the <a href="/en-US/docs/Glossary/User_agent">user agent</a> successfully queued the <code>data</code> for transfer. Otherwise, it returns <code>false</code>.</p><h2 id="Description">Description</h2><p>This method is for analytics and diagnostics that send data to a server before the document is unloaded, where sending the data any sooner may miss some possible data collection. For example, which link the user clicked before navigating away and unloading the page.</p><p>Ensuring that data has been sent during the unloading of a document has traditionally been difficult, because user agents typically ignore asynchronous <a href="/en-US/docs/Web/API/XMLHttpRequest" title="Use XMLHttpRequest (XHR) objects to interact with servers. You can retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just part of a page without disrupting what the user is doing."><code>XMLHttpRequest</code></a>s made in an <code><a href="/en-US/docs/Web/Events/unload" title="/en-US/docs/Web/Events/unload">unload</a></code> handler.</p><p>Historically, this was addressed with some of the following workarounds to delay the page unload long enough to send data to some URL:</p><ul><li>Submitting the data with a blocking synchronous <code>XMLHttpRequest</code> call in <code>unload</code> or <code><a href="/en-US/docs/Web/Events/beforeunload" title="/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event handlers.</li><li>Creating an <a href="/en-US/docs/Web/HTML/Element/img" title="The HTML <img"> element embeds an image into the document."&gt;<code>&lt;img&gt;</code></a> element and setting its <code>src</code> in the <code>unload</code> handler. Most user agents will delay the unload to load the image.</li><li>Creating a no-op loop for several seconds in the <code>unload</code> handler.</li></ul><p>All of these methods block unloading the document, which slows down the next navigation. There is nothing the next page can do to avoid this, so the new page seems slow, even though it's the previous page's fault.</p><p>The following example shows theoretical analytics code that attempts to submit data to a server with a synchronous <code>XMLHttpRequest</code> in an <code>unload</code> handler. This results in the next page load to be delayed.</p><pre class="brush: js">window.addEventListener("unload", function logData() {
  var xhr = new XMLHttpRequest();
  xhr.open("POST", "/log", false); // third parameter of `false` means synchronous
  xhr.send(analyticsData); 
});
</pre><p>This is what <code><strong>sendBeacon()</strong></code> replaces. With the <code>sendBeacon()</code> method, the data is transmitted asynchronously when the User Agent has an opportunity to do so, without delaying unload or the next navigation. <strong>This solves all of the problems with submission of analytics data:</strong></p><ul><li>The data is sent reliably</li><li>It's sent asynchronously</li><li>It doesn't impact the loading of the next page</li><li>In addition, the code is simpler to write than any of the older techniques!</li></ul><p>The following example shows a theoretical analytics code pattern that submits data to a server using the <code>sendBeacon()</code> method.</p><pre class="brush: js">window.addEventListener("unload", function logData() {
  navigator.sendBeacon("/log", analyticsData);
});
</pre><p>The beacon sends an HTTP request via the POST method, with all relevant cookies available when called.</p><h2 id="Specifications">Specifications</h2><h2 id="Browser_compatibility">Browser compatibility</h2><div class="bc-data" id="bcd:api.Navigator.sendBeacon"><a class="bc-github-link external" href="https://github.com/mdn/browser-compat-data" rel="noopener">Update compatibility data on GitHub</a><table class="bc-table bc-table-web"><thead><tr class="bc-platforms"><td></td><th class="bc-platform-desktop" colspan="6"><span>Desktop</span></th><th class="bc-platform-mobile" colspan="6"><span>Mobile</span></th></tr><tr class="bc-browsers"><td></td><th class="bc-browser-chrome"><span class="bc-head-txt-label bc-head-icon-chrome">Chrome</span></th><th class="bc-browser-edge"><span class="bc-head-txt-label bc-head-icon-edge">Edge</span></th><th class="bc-browser-firefox"><span class="bc-head-txt-label bc-head-icon-firefox">Firefox</span></th><th class="bc-browser-ie"><span class="bc-head-txt-label bc-head-icon-ie">Internet Explorer</span></th><th class="bc-browser-opera"><span class="bc-head-txt-label bc-head-icon-opera">Opera</span></th><th class="bc-browser-safari"><span class="bc-head-txt-label bc-head-icon-safari">Safari</span></th><th class="bc-browser-webview_android"><span class="bc-head-txt-label bc-head-icon-webview_android">Android webview</span></th><th class="bc-browser-chrome_android"><span class="bc-head-txt-label bc-head-icon-chrome_android">Chrome for Android</span></th><th class="bc-browser-firefox_android"><span class="bc-head-txt-label bc-head-icon-firefox_android">Firefox for Android</span></th><th class="bc-browser-opera_android"><span class="bc-head-txt-label bc-head-icon-opera_android">Opera for Android</span></th><th class="bc-browser-safari_ios"><span class="bc-head-txt-label bc-head-icon-safari_ios">Safari on iOS</span></th><th class="bc-browser-samsunginternet_android"><span class="bc-head-txt-label bc-head-icon-samsunginternet_android">Samsung Internet</span></th></tr></thead><tbody><tr><th scope="row"><code>sendBeacon</code></th><td class="bc-supports-yes bc-browser-chrome bc-has-history"><span class="bc-browser-name">Chrome</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              39<section class="bc-history" id="sect1"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              39</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-edge"><span class="bc-browser-name">Edge</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              14</td><td class="bc-supports-yes bc-browser-firefox"><span class="bc-browser-name">Firefox</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              31</td><td class="bc-supports-no bc-browser-ie"><span class="bc-browser-name">IE</span><abbr class="bc-level-no only-icon" title="No support"><span>No support</span></abbr>
              No</td><td class="bc-supports-yes bc-browser-opera bc-has-history"><span class="bc-browser-name">Opera</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              26<section class="bc-history" id="sect2"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              26</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-safari"><span class="bc-browser-name">Safari</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              11.1</td><td class="bc-supports-yes bc-browser-webview_android bc-has-history"><span class="bc-browser-name">WebView Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              40<section class="bc-history" id="sect3"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              40</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-chrome_android bc-has-history"><span class="bc-browser-name">Chrome Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              42<section class="bc-history" id="sect4"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              42</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-firefox_android"><span class="bc-browser-name">Firefox Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              31</td><td class="bc-supports-yes bc-browser-opera_android bc-has-history"><span class="bc-browser-name">Opera Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              26<section class="bc-history" id="sect5"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              26</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td class="bc-supports-yes bc-browser-safari_ios"><span class="bc-browser-name">Safari iOS</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              11.3</td><td class="bc-supports-yes bc-browser-samsunginternet_android bc-has-history"><span class="bc-browser-name">Samsung Internet Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              4.0<section class="bc-history" id="sect6"><dl><dt class="bc-supports-yes bc-supports"><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr>
              4.0</dt><dd><abbr class="only-icon" title="See implementation notes"><span>Notes</span></abbr> Starting in Samsung Internet 7.0, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a class="external" href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td></tr></tbody></table><section class="bc-legend" id="sect7"><h3 class="offscreen" id="Legend">Legend</h3><dl><dt><span class="bc-supports-yes bc-supports"><abbr class="bc-level bc-level-yes only-icon" title="Full support"><span>Full support</span>
                 &nbsp;
                </abbr></span></dt><dd>Full support</dd><dt><span class="bc-supports-no bc-supports"><abbr class="bc-level bc-level-no only-icon" title="No support"><span>No support</span>
                 &nbsp;
                </abbr></span></dt><dd>No support</dd><dt><abbr class="only-icon" title="See implementation notes."><span>See implementation notes.</span></abbr></dt><dd>See implementation notes.</dd></dl></section></div><h2 id="See_also">See also</h2></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>