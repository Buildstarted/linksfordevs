<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Donald Knuth Was Framed - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Donald Knuth Was Framed - linksfor.dev(s)"/>
    <meta property="og:description" content="YOW! Talk My YOW! talk, &quot;Designing Distributed Systems with TLA&#x2B;&quot;, is now available! You can watch it here. Donald Knuth Was Framed The other day I was..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://buttondown.email/hillelwayne/archive/donald-knuth-was-framed/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ğŸ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Donald Knuth Was Framed</title>
<div class="readable">
        <h1>Donald Knuth Was Framed</h1>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 24 Feb 2020</div>
        <p><a href="https://buttondown.email/hillelwayne/archive/donald-knuth-was-framed/">https://buttondown.email/hillelwayne/archive/donald-knuth-was-framed/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-v-3bdc2792=""><h2>YOW! Talk</h2>
<p>My YOW! talk, â€œDesigning Distributed Systems with TLA+â€, is now available! You can watch it <a href="https://www.youtube.com/watch?v=ATobswwFwQA&amp;utm_source=hillelwayne&amp;utm_medium=email&amp;utm_campaign=donald-knuth-was-framed" target="_blank">here</a>.</p>
<h2>Donald Knuth Was Framed</h2>
<p>The other day I was talking with a friend about structured editing and literate programming came up. LP was one of Donald Knuthâ€™s ideas, to structure programs as readable documents instead of just machine docs. He was interested in it, I was cautiously skeptical. We both knew the <a href="https://en.wikipedia.org/wiki/Literate_programming?utm_source=hillelwayne&amp;utm_medium=email&amp;utm_campaign=donald-knuth-was-framed#Critique" target="_blank">famous story</a> about it:</p>
<blockquote>
<p>In 1986, Jon Bentley asked Knuth to demonstrate the concept of literate programming by writing a program in WEB. Knuth came up with an 8-pages long monolithic listing that was published together with a critique by Douglas McIlroy of Bell Labs. McIlroy praised intricacy of Knuthâ€™s solution, his choice of a data structure (Frank M. Liangâ€™s hash trie), but noted that more practical, much faster to implement, debug and modify solution of the problem takes only six lines of shell script by reusing standard Unix utilities. McIlroy concluded:[12]</p>
<blockquote>
<p>Knuth has shown us here how to program intelligibly, but not wisely. I buy the discipline. I do not buy the result. He has fashioned a sort of industrial-strength Faberge eggâ€”intricate, wonderfully worked, refined beyond all ordinary desires, a museum piece from the start. </p>
</blockquote>
</blockquote>
<p>The program was â€œprint out the top K most-used words in a text.â€ The six lines of shell script were</p>
<div><pre><span></span>tr -cs A-Za-z '
' |
tr A-Z a-z |
sort |
uniq -c |
sort -rn |
sed ${1}q
</pre></div>


<p>A damning counter. But neither of us had ever <em>read</em> the paper. And as you know, Iâ€™m all about primary sources. We pulled up the paper <a href="https://www.cs.tufts.edu/~nr/cs257/archive/don-knuth/pearls-2.pdf?utm_source=hillelwayne&amp;utm_medium=email&amp;utm_campaign=donald-knuth-was-framed" target="_blank">here</a> and read through it together. And it left us with a very different understanding of literate programming, and the challenge, than the famous story gave.</p>
<p>First of all, we found that Literate Programming as conceived by Knuth not just â€œtext, code, text, codeâ€. You could say â€œnow we add <code>foo</code> to section <code>&lt;&lt;bar&gt;&gt;</code>â€ even after having already created <code>bar</code> and modified it several times before. Writing the code out-of-order is the whole point. Youâ€™d use a tool to take the narrative, or â€œweaveâ€ and synthesize the code, the â€œtangleâ€. Very roughly, you could write:</p>
<div><pre><span></span>Blah blah blah

  &lt;&lt;foo&gt;&gt;
  &lt;&lt;bar&gt;&gt;

Blah blah
  &lt;&lt;bar&gt;&gt; = print("world
Blah
  &lt;&lt;foo&gt;&gt; = print("hello ");
Blah
  &lt;&lt;bar&gt;&gt; += !");
</pre></div>


<p>And it would weave that into the actual program.</p>
<p>The actual paper paints LP in a much better light than we thought it did.</p>
<ul>
<li>Knuth was asked to demonstrate his tool for LP, WEB, and was demonstrating LP as part of that. He wasnâ€™t competing with McIlroy, and didnâ€™t know how McIlroy was going to critique it.</li>
<li>The actual content is effectively his stream-of-consciousness notes about what heâ€™s doing. He discusses why he makes the choices he does and what heâ€™s thinking about as primary concerns. Itâ€™s easy to skim or deep-dive the code.</li>
<li>Most of the â€œeight pagesâ€ arenâ€™t because Knuth is doing LP, but because heâ€™s Donald Knuth:<ul>
<li>One page is him setting up the problem (â€œwhat do we mean by â€˜wordâ€™? What if multiple words share the same frequency?â€) and one page is just the index.</li>
<li>Another page is just about working around specific Pascal issues no modern language has, like â€œhow do we read in an integerâ€ and â€œhow do we identify letters when Pascalâ€™s character set is poorly defined.â€</li>
<li>Then thereâ€™s almost four pages of handrolling a hash trie.</li>
</ul>
</li>
<li>Knuth is doing everything from first principles. One of McIlroyâ€™s strongest criticisms is â€œeverything there- even input conversion and sorting-is programmed monolithically and from scratch. In particular the isolation of words, the handling of punctuation, and the treatment of case distinctions are built in.â€ Of course it is! Knuth was trying to show how WEB makes it easier to write and understand programs, not explain how Pascal packages work! His ideas arenâ€™t invalidated just because we can import libraries.</li>
</ul>
<p>[rant] McIlroy could only write such a tight script because weâ€™re doing something thatâ€™s near <em>perfect</em> for shell scripting: simple processing of text. If we choose a slightly different problem, like â€œfind the top K pairs of words and print the Levenshtein distance between each pairâ€ then shell scripting that would be a lot harder.[/rant]</p>
<p>Not to say that McIlroy is entirely wrong, and he raises a lot of good points. But I donâ€™t think this is the damning indictment of LP or a total vindication of the Unix model. It also got me to look into the <a href="http://leoeditor.com/?utm_source=hillelwayne&amp;utm_medium=email&amp;utm_campaign=donald-knuth-was-framed" target="_blank">Leo Editor</a>, which seems a more modern version of LP. Iâ€™ll report on how it goes.</p></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
</body>
</html>