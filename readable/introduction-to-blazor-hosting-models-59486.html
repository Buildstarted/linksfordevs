<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Introduction to Blazor Hosting Models - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Introduction to Blazor Hosting Models - linksfor.dev(s)"/>
    <meta property="og:description" content="We look at Blazor Server and Blazor WebAssembly, how you install the Visual Studio Templates and how to integrate an API through Blazor"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.roundthecode.com/dotnet/introduction-to-blazor-hosting-models"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Introduction to Blazor Hosting Models</title>
<div class="readable">
        <h1>Introduction to Blazor Hosting Models</h1>
            <div>Reading time: 7-9 minutes</div>
        <div>Posted here: 10 Mar 2020</div>
        <p><a href="https://www.roundthecode.com/dotnet/introduction-to-blazor-hosting-models">https://www.roundthecode.com/dotnet/introduction-to-blazor-hosting-models</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="article-container">

<p>At present, these hosting models are available for Blazor applications:</p>



<ul><li>Blazor Server – A server-side ASP.NET Core application</li><li>Blazor WebAssembly – A client-side application that runs solely in the browser</li></ul>



<p>In this article, we are going to run through the difference between the  hosting models and look at integration examples. That’s go!</p>



<h2>Blazor Server</h2>



<p>Hosting a Blazor Server application relies on the standard ASP.NET Core sequence. You have your console application. This includes a Program class that builds and runs the application. In addition, you have your Startup class where configurations are tweaked.</p>



<p>Pages are built using Razor, and the technology varies between client and server-side methods within the application. For instance, for a client-side task, it takes advantage of WebAssembly from the browser. In contrast, for a server-side task, it uses a SignalR connection between the client and the server.</p>



<h2>Blazor WebAssembly</h2>



<p>You can host a Blazor WebAssembly separately without the need for an ASP.NET Core application. This works in a similar way to a JavaScript framework like React. In addition to your client-side application, if you need to include server-side functionality, you can host that in a separate API application and integrate the two together. </p>



<p>A major difference between Blazor WebAssembly and a JavaScript framework is that client-side methods use WebAssembly. WebAssembly is a client-side technology now integrated on all major browsers.</p>



<h2>Create a Blazor Application in Visual Studio</h2>



<p>Now that we know the difference between the different hosting models, that’s create one in Visual Studio.</p>



<p>Before we start, you need to make sure that you have Visual Studio 2019, version 16.4+. In addition, you need to make sure you have .NET Core SDK 3.1+ installed.</p>



<p>Open up Visual Studio 2019 and create a new project. Do a search for “Blazor App” and select that.</p>



<figure><img src="https://www.roundthecode.com/wp-content/uploads/2020/02/Create-a-Blazor-App-in-Visual-Studio-2019.png" alt="Create a new Blazor App in Visual Studio 2019" srcset="https://www.roundthecode.com/wp-content/uploads/2020/02/Create-a-Blazor-App-in-Visual-Studio-2019.png 1023w, https://www.roundthecode.com/wp-content/uploads/2020/02/Create-a-Blazor-App-in-Visual-Studio-2019-300x208.png 300w, https://www.roundthecode.com/wp-content/uploads/2020/02/Create-a-Blazor-App-in-Visual-Studio-2019-768x532.png 768w" sizes="(max-width: 1023px) 100vw, 1023px"></figure>



<p>Set up the name of your application and you should be able to choose what kind of Blazor application you want to create. Either a Blazor Server App or a Blazor WebAssembly App.</p>



<figure><img src="https://www.roundthecode.com/wp-content/uploads/2020/02/Blazor-Server-or-Blazor-WebAssembly-App.png" alt="Blazor Server or Blazor WebAssembly app" srcset="https://www.roundthecode.com/wp-content/uploads/2020/02/Blazor-Server-or-Blazor-WebAssembly-App.png 1021w, https://www.roundthecode.com/wp-content/uploads/2020/02/Blazor-Server-or-Blazor-WebAssembly-App-300x208.png 300w, https://www.roundthecode.com/wp-content/uploads/2020/02/Blazor-Server-or-Blazor-WebAssembly-App-768x533.png 768w" sizes="(max-width: 1021px) 100vw, 1021px"></figure>



<h3>The Blazor WebAssembly App Option is Missing</h3>



<p>This is because Blazor WebAssembly is in preview at present, and so it doesn’t come as standard in Visual Studio 2019. However, it’s relatively easy to install. All you need to do is to open up a Command Prompt window (in administration mode) and run the following:</p>



<pre><code>dotnet new -i Microsoft.AspNetCore.Blazor.Templates::3.2.0-preview1.20073.1</code></pre>



<p>Once that has been ran, the Blazor WebAssembly App option should be available.</p>



<h2>An example of a Blazor Server Application</h2>



<p>Now, I could run through how to integrate a Blazor Server application, but there’s no point. I’ve already done it! Look at my article entitled “<a href="https://www.roundthecode.com/dotnet/intro-to-blazor-and-creating-a-blazor-app-from-scratch">Intro to Blazor and Creating a Blazor App from Scratch</a>” and that will give you all the information you need.</p>



<h2>An example of a Blazor WebAssembly Application</h2>



<p>What I want to do is to concentrate on is looking at a Blazor WebAssembly application in more detail. The major difference with a Blazor WebAssembly application is the console application that builds it. Here is an example of how you build and run a Blazor WebAssembly application.</p>


<div><div id="highlighter_887055"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p></td><td><div><p><code>public</code> <code>class</code> <code>Program</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>static</code> <code>async</code> <code>Task Main(</code><code>string</code><code>[] args)</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var</code> <code>builder = WebAssemblyHostBuilder.CreateDefault(args);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>builder.RootComponents.Add&lt;App&gt;(</code><code>"app"</code><code>);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>await</code> <code>builder.Build().RunAsync();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>}</code></p></div></td></tr></tbody></table></div></div>


<p>We now have a “WebAssemblyHostBuilder” class that works in a similar way as an API application would with the “WebHost” class. However, one of the big differences is that you need to add any route components to the builder. In this instance, we have added our “App” to the root components.</p>



<p>The  “WebAssemblyHostBuilder” class includes an “IServiceCollection” property, allowing you to add services through dependency injection.</p>



<h3>Calling the API</h3>



<p>Requesting or sending data to the API is relatively straight forward in your Blazor WebAssembly application. You can take advantage of the “HttpClient” class that sits in “System.Net.Http”. </p>



<p>In this example, we inject the “HttpClient” class into our razor component. When it’s initialised, it makes a request to our API to get a list of all the languages that have currently been added. The user then has the ability to add a new language and click on a button. It’s when they click on the button  that the razor component makes a POST request to the API with the new language. The API performs the request and returns an updated list of languages.</p>


<div><div id="highlighter_492487"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p></td><td><div><p><code>// Index.razor</code></p><p><code>@page "/"</code></p><p><code>@inject HttpClient httpClient</code></p><p><code>@using Newtonsoft.Json</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>h1</code><code>&gt;Here is a list of Languages&lt;/</code><code>h1</code><code>&gt;</code></p><p><code>@if (Languages != null &amp;amp;&amp;amp; Languages.Any())</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>ul</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>@foreach (var language in Languages)</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>li</code><code>&gt;@language&lt;/</code><code>li</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>ul</code><code>&gt;</code></p><p><code>}</code></p><p><code>&lt;</code><code>input</code> <code>@</code><code>bind</code><code>=</code><code>"MessageInput"</code> <code>@</code><code>bind:event</code><code>=</code><code>"oninput"</code> <code>/&gt;</code></p><p><code>&lt;</code><code>button</code> <code>@</code><code>onclick</code><code>=</code><code>"MessageInputClick"</code><code>&gt;Add Language&lt;/</code><code>button</code><code>&gt;</code></p><p><code>@code {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public string MessageInput { get; set; }</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public List&lt;</code><code>string</code><code>&gt; Languages { get; set; }</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>protected override async Task OnInitializedAsync()</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public async Task MessageInputClick()</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var postRequest = new Dictionary&lt;</code><code>string</code><code>, string&gt;();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>postRequest.Add("language", MessageInput);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var requestMessage = new HttpRequestMessage()</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Method = new HttpMethod("POST"),</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Content = new StringContent(JsonConvert.SerializeObject(postRequest))</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>requestMessage.Content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("application/json");</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var response = await httpClient.SendAsync(requestMessage);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var responseText = await response.Content.ReadAsStringAsync();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Languages = JsonConvert.DeserializeObject&lt;</code><code>List</code><code>&lt;string&gt;&gt;(responseText);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>MessageInput = string.Empty;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>}</code></p></div></td></tr></tbody></table></div></div>


<h3>There’s No SSR</h3>



<p>The following example shows a Blazor WebAssembly application running once initialised. We have taken a screenshot of how the page looks and how the source code is rendered. </p>



<p>The source code is what a bot would see if they crawl the page and did not execute any client-side technologies, such as WebAssembly and JavaScript. As you can see, the text “Here is a list of Languages” does not appear anywhere in the source code.  This means that server-side rendering (SSR) is not enabled.</p>



<figure><img src="https://www.roundthecode.com/wp-content/uploads/2020/03/Blazor-WebAssembly-Initalised-Application-with-Source.png" alt="Blazor WebAssembly initialised application with source code" srcset="https://www.roundthecode.com/wp-content/uploads/2020/03/Blazor-WebAssembly-Initalised-Application-with-Source.png 500w, https://www.roundthecode.com/wp-content/uploads/2020/03/Blazor-WebAssembly-Initalised-Application-with-Source-300x266.png 300w" sizes="(max-width: 500px) 100vw, 500px"></figure>



<h2>Demonstrations</h2>



<p>You can watch the following video to see demonstrations of a Blazor Server application and a Blazor WebAssembly application:</p>



<div>
	<p><a href="https://www.youtube.com/watch?v=0LyceXqjatU" title="Introduction to Blazor Hosting Models" data-youtube-id="0LyceXqjatU" target="_blank">    
			<span>
				<img src="https://www.roundthecode.com/wp-content/themes/roundthecode/img/video/large/introduction-to-blazor-hosting-models.jpg" alt="Introduction to Blazor Hosting Models">
				<img src="https://www.roundthecode.com/wp-content/themes/roundthecode/img/video/play.png" alt="Play">    
			</span>      
        </a>
	</p>
</div>



<p>The demonstrations referenced in the video can be downloaded from this <a href="https://github.com/RoundTheCode/RoundTheCode.BlazorHostingModels" target="_blank">GitHub Repository</a>.</p>



<h2>Which to Use?</h2>



<p>I would personally use Blazor Server because of the SSR support. This is particularly important if you are expecting search engine bots to crawl your website. There is no reason why you can’t call an API to return the results within your Blazor Server application. However, the integration of server-side tools and SSR support will likely to cost you in performance, so it’s really down to you and your circumstances.</p>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>