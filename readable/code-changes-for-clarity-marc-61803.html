<!DOCTYPE html>
<html lang="en">
<head>
    <title>
&#x27;Code changes for clarity&#x27; - MARC - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="&#x27;Code changes for clarity&#x27; - MARC - linksfor.dev(s)"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://marc.info/?l=openbsd-tech&amp;m=158965652915344&amp;w=2"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - &#x27;Code changes for clarity&#x27; - MARC</title>
<div class="readable">
        <h1>&#x27;Code changes for clarity&#x27; - MARC</h1>
            <div>Reading time: 2 minutes</div>
        <div>Posted here: 18 May 2020</div>
        <p><a href="https://marc.info/?l=openbsd-tech&amp;m=158965652915344&amp;w=2">https://marc.info/?l=openbsd-tech&amp;m=158965652915344&amp;w=2</a></p>
        <hr/>
<div id="readability-page-1" class="page">
<pre><b>[<a href="https://marc.info/?l=openbsd-tech&amp;m=158965432514719&amp;w=2">prev in list</a>] [<a href="https://marc.info/?l=openbsd-tech&amp;m=158966222816967&amp;w=2">next in list</a>] [<span color="#c0c0c0">prev in thread</span>] [<a href="https://marc.info/?l=openbsd-tech&amp;m=158968929024089&amp;w=2">next in thread</a>] </b>
<b><span size="+1">
List:       <a href="https://marc.info/?l=openbsd-tech&amp;r=1&amp;w=2">openbsd-tech</a>
Subject:    <a href="https://marc.info/?t=158965662200002&amp;r=1&amp;w=2">Code changes for clarity</a>
From:       <a href="https://marc.info/?a=158769816700001&amp;r=1&amp;w=2">&lt;johnc () armadilloaerospace ! com&gt;</a>
Date:       <a href="https://marc.info/?l=openbsd-tech&amp;r=1&amp;w=2&amp;b=202005">2020-05-16 19:13:37</a>
Message-ID: <a href="https://marc.info/?i=20200516121337.533b97457880de85c8001c140e636eb6.035aeb57e5.wbe%20()%20email18%20!%20godaddy%20!%20com">20200516121337.533b97457880de85c8001c140e636eb6.035aeb57e5.wbe () email18 ! godaddy ! com</a></span>
[Download RAW <a href="https://marc.info/?l=openbsd-tech&amp;m=158965652915344&amp;q=mbox">message</a> or <a href="https://marc.info/?l=openbsd-tech&amp;m=158965652915344&amp;q=raw">body</a>]</b>

(Not sure if this belongs in tech@ or misc@)

What is the thinking around non-functional code changes that just
improve clarity without functionality changes?  I can imagine bad
experiences with that, but there is certainly room for improvement.

For instance, in the wsdisplay_emulops structure, there are:

int	(*alloc_attr)(void *c, int fg, int bg, int flags, long *attrp);
void	(*unpack_attr)(void *c, long attr, int *fg, int *bg, int *ul);

And at the end of the structure is this comment, showing that at
least someone (other than me) was confused by it:
	/* XXX need a free_attr() ??? */

I would suggest that alloc_attr should be renamed to pack_attr, but
there are 84 matches on alloc_attr across 39 unique files.

Similarly, I am taking notes as I read the code, and adding a few
comments in various files and functions could help other people get
up to speed much faster in the future, but I am hesitant to submit
patches. I am hoping to write a decent article about my explorations,
but inline comments are more durable documentation.


<b>[<a href="https://marc.info/?l=openbsd-tech&amp;m=158965432514719&amp;w=2">prev in list</a>] [<a href="https://marc.info/?l=openbsd-tech&amp;m=158966222816967&amp;w=2">next in list</a>] [<span color="#c0c0c0">prev in thread</span>] [<a href="https://marc.info/?l=openbsd-tech&amp;m=158968929024089&amp;w=2">next in thread</a>] </b>
</pre>
  <br><center>
    <a href="https://marc.info/?q=configure">Configure</a> | 

    <a href="https://marc.info/?q=about">About</a> |
    <a href="https://marc.info/?q=news">News</a> |
    <a href="mailto:webguy@marc.info?subject=Add%20a%20list%20to%20MARC">Add&nbsp;a&nbsp;list</a> |
    Sponsored&nbsp;by&nbsp;<a href="http://www.korelogic.com/">KoreLogic</a>
</center>


</div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>