<!DOCTYPE html>
<html lang="en">
<head>
    <title>
JeremyLikness/BlazorWasmEFCoreExample - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="JeremyLikness/BlazorWasmEFCoreExample - linksfor.dev(s)"/>
    <meta property="og:description" content="Example of a Blazor WebAssembly project that uses Entity Framework Core on the server for data access. - JeremyLikness/BlazorWasmEFCoreExample"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/JeremyLikness/BlazorWasmEFCoreExample"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - JeremyLikness/BlazorWasmEFCoreExample</title>
<div class="readable">
        <h1>JeremyLikness/BlazorWasmEFCoreExample</h1>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 12 Jun 2020</div>
        <p><a href="https://github.com/JeremyLikness/BlazorWasmEFCoreExample">https://github.com/JeremyLikness/BlazorWasmEFCoreExample</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
      <div>
        <article itemprop="text">
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/JeremyLikness/BlazorWasmEFCoreExample/blob/master/blazorcontactsapp.jpg"><img src="https://github.com/JeremyLikness/BlazorWasmEFCoreExample/raw/master/blazorcontactsapp.jpg" alt="Image of data grid"></a></p>
<p>Example of a Blazor WebAssembly project that uses Entity Framework Core on the server for data access.</p>
<blockquote>
<p><strong>Blog post is coming</strong></p>
</blockquote>
<h2>Thank you</h2>
<p><g-emoji alias="pray" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f64f.png">üôè</g-emoji> Thanks to <a href="https://github.com/274188A">John Barrett</a> for helping identify initial issues.</p>
<h2>Features</h2>
<ul>
<li>Application hosted authentication and registration</li>
<li>Extended identity features to audit user creation, modification, email confirmation, and deletion</li>
<li>Entity Framework Core</li>
<li>Multiple data contexts</li>
<li>Entity Framework Core logging</li>
<li>Shadow properties: the database tracks row version, the user who created the entity and timestamp, and the user who last modified the entity and timestamp, without having to define these properties on the C# domain class</li>
<li>Automatic audit that tracks changes with a before/after snapshot and is generated at the data context level</li>
<li>Optimistic concurrency with delta resolution (when the database changes, the UI shows the changes so the user can overwrite or abort)</li>
<li>Entity validation on the client and server using data annotations</li>
<li>A grid that features paging, sorting, and filtering with debounce (i.e. typing three characters will result in just one database round trip)</li>
<li>Dynamic filtering and sorting with serverside evaluation</li>
<li>99% of the UI is contained in a Razor class library that is usable from both Blazor WebAssembly and Blazor Server applications</li>
<li>Example of the repository pattern: the client and server use the same interface with a different implementation</li>
<li>Use of <code>IHttpClientFactory</code> to create a custom client with an authorization message handler</li>
</ul>
<h2>Quick start</h2>
<h3>Prerequisites</h3>
<ul>
<li>.NET Core SDK (<a href="https://dotnet.microsoft.com/download/dotnet-core/3.1" rel="nofollow">3.1.300</a> or later)</li>
<li>Visual Studio Code, <strong>OR</strong></li>
<li>Visual Studio 2019 16.6 or later</li>
</ul>
<h3>Code and Connection Strings</h3>
<ol>
<li>
<p>Optionally fork the repository.</p>
</li>
<li>
<p>Clone the repository (or your fork):</p>
<p><code>git clone https://github.com/jeremylikness/BlazorWasmEFCoreExample.git</code></p>
</li>
<li>
<p>If you don't have <code>localdb</code> installed, update <code>appsettings.json</code> and <code>appsettings.Development.json</code> in the <code>ContactsApp.Server</code> project to point to a valid database instance.</p>
</li>
<li>
<p>The <code>DefaultConnection</code> is used for identity and can have any database name.</p>
</li>
<li>
<p>The <code>blazorcontactsdb</code> is used for the application database and must match <code>ContactContext.BlazorContactsDb</code> in the <code>ContactsApp.DataAccess</code> project (the default value is <code>blazorcontactsdb</code>).</p>
</li>
</ol>
<h3>Visual Studio</h3>
<ol>
<li>
<p>Open the solution file.</p>
</li>
<li>
<p>Ensure the <code>ContactsApp.Server</code> project is set as the start up project.</p>
</li>
<li>
<p>Open the <code>NuGet Package Manager -&gt; Package Manager Console</code>.</p>
</li>
<li>
<p>In the console, with the server project selected, create the identity migration by typing:</p>
<p><code>Add-Migration -Context ApplicationAuditDbContext Initial</code></p>
</li>
<li>
<p>After it is complete, apply the migration:</p>
<p><code>Update-Database -Context ApplicationAuditDbContext</code></p>
</li>
<li>
<p>You are ready to launch the application.</p>
</li>
</ol>
<p>See note at the end of the next section.</p>
<h3>Visual Studio Code</h3>
<ol>
<li>
<p>Navigate to the <code>ContactsApp/Server</code> folder.</p>
</li>
<li>
<p>If you haven't installed the EF Core Command Line Interface (CLI), install it by following <a href="https://docs.microsoft.com/ef/core/miscellaneous/cli/dotnet" rel="nofollow">these instructions</a>. Choose the latest stable version (the project file currently ships with version 3.1.4).</p>
</li>
<li>
<p>Run</p>
<p><code>dotnet ef migrations add --context ApplicationAuditDbContext Initial</code></p>
<p>to set up the identity database migrations.</p>
</li>
<li>
<p>Run</p>
<p><code>dotnet ef database update --context ApplicationAuditDbContext</code></p>
<p>to create the identity database.</p>
</li>
<li>
<p>Type</p>
<p><code>dotnet run</code></p>
<p>to start the server. Navigate to the port specified.</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong>: the demo app is designed to create and populate the contacts database the first time you open the web page. This may result in a delay of up to several minutes on first load. This is normal and is just used to make setup easier. Subsequent runs should load faster.</p>
</blockquote>
<h2>Migrations for Contacts Database</h2>
<p>The context for contacts (<code>ContactContext</code>) resides in the <code>ContactsApp.DataAccess</code> assembly. It is a .NET Standard class library and cannot be executed directly. I created a <code>ContactContextFactory</code> in the <code>ContactsApp.Server</code> project to enable migrations by using the SQL Server provider and loading the connection string. To create a migration, you must specify the executable startup project and the context name. This command will create a migration in the <code>Migrations</code> folder named <code>InitialContact</code> (assuming this is run from the root of the solution directory):</p>
<pre lang="text"><code>dotnet ef migrations add --startup-project ContactsApp/Server --context ContactContext InitialContact
</code></pre>
<p>Use the <code>--namespace</code> parameter to specify a different namespace to help avoid conflicts with the identity context.</p>
<hr>
<p>Submit any feedback, questions, suggestions, or issues <a href="https://github.com/JeremyLikness/BlazorWasmEFCoreExample/issues/new">here</a>.</p>
<p>Regards,</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/fc1338965f6a486d96c428033a6d05d78314dd3c/68747470733a2f2f626c6f672e6a6572656d796c696b6e6573732e636f6d2f696d616765732f6a6572656d796c696b6e6573732e676966"><img src="https://camo.githubusercontent.com/fc1338965f6a486d96c428033a6d05d78314dd3c/68747470733a2f2f626c6f672e6a6572656d796c696b6e6573732e636f6d2f696d616765732f6a6572656d796c696b6e6573732e676966" alt="Jeremy Likness" data-canonical-src="https://blog.jeremylikness.com/images/jeremylikness.gif"></a></p>
<p><a href="https://twitter.com/JeremyLikness" rel="nofollow">@JeremyLikness</a></p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>