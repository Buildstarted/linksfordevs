<!DOCTYPE html>
<html lang="en">
<head>
    <title>
HTTP Pipelining causes responses to mixed up. &#xB7; Issue #2665 &#xB7; elastic/elasticsearch - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="HTTP Pipelining causes responses to mixed up. &#xB7; Issue #2665 &#xB7; elastic/elasticsearch - linksfor.dev(s)"/>
    <meta property="article:author" content="ghost"/>
    <meta property="og:description" content="ElasticSearch seems to advertise HTTP pipelining support by using HTTP 1/1 and not supplying a Connection-header in the response, but fails to deliver on the promises of responding to the requests ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/elastic/elasticsearch/issues/2665"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - HTTP Pipelining causes responses to mixed up. &#xB7; Issue #2665 &#xB7; elastic/elasticsearch</title>
<div class="readable">
        <h1>HTTP Pipelining causes responses to mixed up. &#xB7; Issue #2665 &#xB7; elastic/elasticsearch</h1>
            <div>by ghost</div>
            <div>Reading time: 5-7 minutes</div>
        <div>Posted here: 05 Jun 2019</div>
        <p><a href="https://github.com/elastic/elasticsearch/issues/2665">https://github.com/elastic/elasticsearch/issues/2665</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <main id="js-repo-pjax-container" data-pjax-container="">
      
  




  









  

  

  


<div>
  <div>

    
    
  <div data-pjax="">
    
      <div data-prompt="signup">
    <div>
      <div>
        <h3>Join GitHub today</h3>
        <p>GitHub is home to over 40 million developers working together to host and review code, manage projects, and build software together.</p>
        <p><a data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;files signup prompt&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/elastic/elasticsearch/issues/2665&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="d633c5ea49c2a335ad927e45bb34f5cc4016bdcf05b44e278e691f87048dcbd2" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up" href="https://github.com/join?source=prompt-issue-show&amp;source_repo=elastic%2Felasticsearch">Sign up</a>
      </p></div>
    </div>
  </div>



  <div id="show_issue" data-channel="issue:11151970:timeline">

    
  



      <div>
      <div>
        <p><span>Assignees</span></p><p><a data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">
              <img src="https://avatars3.githubusercontent.com/u/667544?s=40&amp;v=4" width="20" height="20" alt="@spinscale">
</a>        </p>
      </div>

      


  </div>


    <h2>Comments</h2>
    <div id="discussion_bucket">
      <div>

  <div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:11151970">

              



              

  


  
  



  
  



  
  



  
  


  
  



  
  


  
  



  
  


  
  



  
  


  
  



  
  



  
  



  
  



  
  



  
  



  
  


  
  



  
  



  
  



  
  



  
  


  
  



  
  



  
  



  
  



  
  



  
  





    
  


    
  



    
  
<div data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDE4NjYwNzg1MQ==">
  
        
  <div>
  <div id="ref-commit-5eeac2f">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">spinscale</a> 

      added a commit
        to spinscale/elasticsearch
      that referenced
      this issue

    </p><a href="#ref-commit-5eeac2f">
      <relative-time datetime="2014-10-31T15:30:26Z" title="Oct 31, 2014, 8:30 AM PDT">on Oct 31, 2014</relative-time>
    </a>
    <div>
      

<div data-channel="repo:8698747:commit:5eeac2fdf6c108e2f9b6305b6577a77e5290ad9e" data-url="/spinscale/elasticsearch/commit/5eeac2fdf6c108e2f9b6305b6577a77e5290ad9e/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">
          <img height="20" width="20" alt="@spinscale" src="https://avatars0.githubusercontent.com/u/667544?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds HTTP pipelining support to netty. Previously pipelining was not
supported due to the asynchronous nature of elasticsearch. The first request
that was returned by Elasticsearch, was returned as first response,
regardless of the correct order.

The solution to this problem is to add a handler to the netty pipeline
that maintains an ordered list and thus orders the responses before
returning them to the client. This means, we will always have some state
on the server side and also requires some memory in order to keep the
responses there.

Pipelining is enabled by default, but can be configured by setting the
http.pipelining property to true|false. In addition the maximum size of
the event queue can be configured.

The initial netty handler is copied from this repo
<a href="https://github.com/typesafehub/netty-http-pipelining">https://github.com/typesafehub/netty-http-pipelining</a>

<span aria-label="This commit closes issue #2665.">Closes</span> <a data-error-text="Failed to load issue title" data-id="11151970" data-permission-text="Issue title is private" data-url="https://github.com/elastic/elasticsearch/issues/2665" data-hovercard-type="issue" data-hovercard-url="/elastic/elasticsearch/issues/2665/hovercard" href="https://github.com/elastic/elasticsearch/issues/2665">elastic#2665</a></pre>
    </div>
</div>


    </div>
  </div>
</div>

  

  

  <div>
  <div id="ref-commit-0b778e1">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">spinscale</a> 

      added a commit
      that referenced
      this issue

    </p><a href="#ref-commit-0b778e1">
      <relative-time datetime="2014-10-31T15:32:39Z" title="Oct 31, 2014, 8:32 AM PDT">on Oct 31, 2014</relative-time>
    </a>
    <div>
      

<div data-channel="repo:507775:commit:0b778e1d39b257418e372a922f44fb8168c8050a" data-url="/elastic/elasticsearch/commit/0b778e1d39b257418e372a922f44fb8168c8050a/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">
          <img height="20" width="20" alt="@spinscale" src="https://avatars0.githubusercontent.com/u/667544?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds HTTP pipelining support to netty. Previously pipelining was not
supported due to the asynchronous nature of elasticsearch. The first request
that was returned by Elasticsearch, was returned as first response,
regardless of the correct order.

The solution to this problem is to add a handler to the netty pipeline
that maintains an ordered list and thus orders the responses before
returning them to the client. This means, we will always have some state
on the server side and also requires some memory in order to keep the
responses there.

Pipelining is enabled by default, but can be configured by setting the
http.pipelining property to true|false. In addition the maximum size of
the event queue can be configured.

The initial netty handler is copied from this repo
<a href="https://github.com/typesafehub/netty-http-pipelining">https://github.com/typesafehub/netty-http-pipelining</a>

<span aria-label="This commit closes issue #2665.">Closes</span> <a data-error-text="Failed to load issue title" data-id="11151970" data-permission-text="Issue title is private" data-url="https://github.com/elastic/elasticsearch/issues/2665" data-hovercard-type="issue" data-hovercard-url="/elastic/elasticsearch/issues/2665/hovercard" href="https://github.com/elastic/elasticsearch/issues/2665">#2665</a></pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-7119947">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">spinscale</a> 

      added a commit
      that referenced
      this issue

    </p><a href="#ref-commit-7119947">
      <relative-time datetime="2014-10-31T15:34:07Z" title="Oct 31, 2014, 8:34 AM PDT">on Oct 31, 2014</relative-time>
    </a>
    <div>
      

<div data-channel="repo:507775:commit:711994778749f170f3dfbbd4eb9c6607d2bcd30e" data-url="/elastic/elasticsearch/commit/711994778749f170f3dfbbd4eb9c6607d2bcd30e/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">
          <img height="20" width="20" alt="@spinscale" src="https://avatars0.githubusercontent.com/u/667544?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds HTTP pipelining support to netty. Previously pipelining was not
supported due to the asynchronous nature of elasticsearch. The first request
that was returned by Elasticsearch, was returned as first response,
regardless of the correct order.

The solution to this problem is to add a handler to the netty pipeline
that maintains an ordered list and thus orders the responses before
returning them to the client. This means, we will always have some state
on the server side and also requires some memory in order to keep the
responses there.

Pipelining is enabled by default, but can be configured by setting the
http.pipelining property to true|false. In addition the maximum size of
the event queue can be configured.

The initial netty handler is copied from this repo
<a href="https://github.com/typesafehub/netty-http-pipelining">https://github.com/typesafehub/netty-http-pipelining</a>

<span aria-label="This commit closes issue #2665.">Closes</span> <a data-error-text="Failed to load issue title" data-id="11151970" data-permission-text="Issue title is private" data-url="https://github.com/elastic/elasticsearch/issues/2665" data-hovercard-type="issue" data-hovercard-url="/elastic/elasticsearch/issues/2665/hovercard" href="https://github.com/elastic/elasticsearch/issues/2665">#2665</a></pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-8b0ecf6">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/mute/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mute">mute</a> 

      pushed a commit
        to mute/elasticsearch
      that referenced
      this issue

    </p><a href="#ref-commit-8b0ecf6">
      <relative-time datetime="2015-07-29T16:49:16Z" title="Jul 29, 2015, 9:49 AM PDT">on Jul 29, 2015</relative-time>
    </a>
    <div>
      

<div data-channel="repo:39867083:commit:8b0ecf69e8ddb352050959fe22ef20a22b7daa59" data-url="/mute/elasticsearch/commit/8b0ecf69e8ddb352050959fe22ef20a22b7daa59/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/spinscale/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spinscale">
          <img height="20" width="20" alt="@spinscale" src="https://avatars0.githubusercontent.com/u/667544?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds HTTP pipelining support to netty. Previously pipelining was not
supported due to the asynchronous nature of elasticsearch. The first request
that was returned by Elasticsearch, was returned as first response,
regardless of the correct order.

The solution to this problem is to add a handler to the netty pipeline
that maintains an ordered list and thus orders the responses before
returning them to the client. This means, we will always have some state
on the server side and also requires some memory in order to keep the
responses there.

Pipelining is enabled by default, but can be configured by setting the
http.pipelining property to true|false. In addition the maximum size of
the event queue can be configured.

The initial netty handler is copied from this repo
<a href="https://github.com/typesafehub/netty-http-pipelining">https://github.com/typesafehub/netty-http-pipelining</a>

<span aria-label="This commit closes issue #2665.">Closes</span> <a data-error-text="Failed to load issue title" data-id="11151970" data-permission-text="Issue title is private" data-url="https://github.com/elastic/elasticsearch/issues/2665" data-hovercard-type="issue" data-hovercard-url="/elastic/elasticsearch/issues/2665/hovercard" href="https://github.com/elastic/elasticsearch/issues/2665">elastic#2665</a></pre>
    </div>
</div>


    </div>
  </div>
</div>



</div>




<!-- Rendered timeline since 2015-07-29 09:49:16 -->



            </div>


            
          </div>

</div>

    
</div>


    </div>
  </div>

  </div>


  </div>
</div>

    </main>
  </div>
  

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>