<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Cliff Click&#x27;s answer to What interesting optimizations can a JIT do that a compiler cannot do? - Quora - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Cliff Click&#x27;s answer to What interesting optimizations can a JIT do that a compiler cannot do? - Quora - linksfor.dev(s)"/>
    <meta property="og:description" content="The JIT has actual profiles available, which no AOT or prior-profiling technology can do. So yes, which branches branch which way. This lets you decide to e.g. run code down the &#x201C;hot path&#x201D; JIT&#x2019;d and on the &#x201C;so cold its never taken path&#x201D; in the interpreter&#x2026; which means the hot path never has to merge the code-path logic in, which typically cleans out nearly all of the error check &amp; correct logic. But also: which classes are loaded, or not, so typically hundreds of overloadable classes are discovered as overloaded exactly one way, leading to thousands of call sites being statically compiled (and possibly inlined), millions of virtual call invocations removed. Happens very often in large complex frameworks, where key classes are instantiated exactly 1 way based on the programmer picking certain key options at runtime. Also: what to inline, leading to higher resolution profiles on the first tiers of JITing, leading even more aggressively inlined &amp; optimized code down the very specific hot code paths. Also: fields which are always zero, or never set past some point (and not declared final). Any large Java program has thousands of these. You get to treat them as final (or constants), whereas a static profiler-based optimizer cannot. Also: what escapes, and what does not &#x2014; allowing escape analysis on objects which blatantly escape in a AOT compilation, but which in practice either never escape, or escape extremely rarely. On the rare escape you &#x201C;inflate&#x201D; the object as needed. On the non-escape path, the entire object can be &#x201C;en-registered&#x201D; - no allocation. There are lots more places where the dynamic profiles are fed back into the JIT, and in my opinion this area remains a fertile ground for future optimizations. Cliff"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.quora.com/What-interesting-optimizations-can-a-JIT-do-that-a-compiler-cannot-do/answer/Cliff-Click-1"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Cliff Click&#x27;s answer to What interesting optimizations can a JIT do that a compiler cannot do? - Quora</title>
<div class="readable">
        <h1>Cliff Click&#x27;s answer to What interesting optimizations can a JIT do that a compiler cannot do? - Quora</h1>
            <div>Reading time: 2-3 minutes</div>
        <div>Posted here: 04 Feb 2020</div>
        <p><a href="https://www.quora.com/What-interesting-optimizations-can-a-JIT-do-that-a-compiler-cannot-do/answer/Cliff-Click-1">https://www.quora.com/What-interesting-optimizations-can-a-JIT-do-that-a-compiler-cannot-do/answer/Cliff-Click-1</a></p>
        <hr/>
<div id="readability-page-1" class="page"><p><span><p><span>The JIT has actual profiles available, which no AOT or prior-profiling technology can do. So yes, which branches branch which way. This lets you decide to e.g. run code down the “hot path” JIT’d and on the “so cold its never taken path” in the interpreter… which means the hot path never has to merge the code-path logic in, which typically cleans out nearly all of the error check &amp; correct logic.</span></p> <p><span>But also: which classes are loaded, or not, so typically hundreds of overloadable classes are discovered as overloaded exactly one way, leading to thousands of call sites being statically compiled (and possibly inlined), millions of virtual call invocations removed. Happens very often in large complex frameworks, where key classes are instantiated exactly 1 way based on the programmer picking certain key options at runtime.</span></p> <p><span>Also: what to inline, leading to higher resolution profiles on the first tiers of JITing, leading even more aggressively inlined &amp; optimized code down the very specific hot code paths.</span></p> <p><span>Also: fields which are always zero, or never set past some point (and not declared final). Any large Java program has thousands of these. You get to treat them as final (or constants), whereas a static profiler-based optimizer cannot.</span></p> <p><span>Also: what escapes, and what does not — allowing escape analysis on objects which blatantly escape in a AOT compilation, but which in practice either never escape, or escape extremely rarely. On the rare escape you “inflate” the object as needed. On the non-escape path, the entire object can be “en-registered” - no allocation.</span></p> <p><span>There are lots more places where the dynamic profiles are fed back into the JIT, and in my opinion this area remains a fertile ground for future optimizations.</span></p> <p><span>Cliff</span></p> </span></p></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>