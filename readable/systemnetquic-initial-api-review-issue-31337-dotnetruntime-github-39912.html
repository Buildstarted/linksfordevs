<!DOCTYPE html>
<html lang="en">
<head>
    <title>
System.Net.Quic initial API review &#xB7; Issue #31337 &#xB7; dotnet/runtime - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="System.Net.Quic initial API review &#xB7; Issue #31337 &#xB7; dotnet/runtime - linksfor.dev(s)"/>
    <meta property="article:author" content="geoffkizer"/>
    <meta property="og:description" content="This is the first cut at APIs for using the QUIC protocol. A brief overview of QUIC is available here: https://blog.cloudflare.com/the-road-to-quic/ namespace System.Net.Quic.Experimental { public ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/dotnet/corefx/issues/42205"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - System.Net.Quic initial API review &#xB7; Issue #31337 &#xB7; dotnet/runtime</title>
<div class="readable">
        <h1>System.Net.Quic initial API review &#xB7; Issue #31337 &#xB7; dotnet/runtime</h1>
            <div>by geoffkizer</div>
            <div>Reading time: 25-32 minutes</div>
        <div>Posted here: 30 Oct 2019</div>
        <p><a href="https://github.com/dotnet/corefx/issues/42205">https://github.com/dotnet/corefx/issues/42205</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-channel="marked-as-read:issue:558483852">

              
<div data-gid="MDU6SXNzdWU1NTg0ODM4NTI=" data-url="/_render_node/MDU6SXNzdWU1NTg0ODM4NTI=/issues/body" data-channel="issue:558483852">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issue-558483852">
  <div data-body-version="4a0037d97a4135cf854e751f11b347c2" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>This is the first cut at APIs for using the QUIC protocol.</p>
<p>A brief overview of QUIC is available here: <a rel="nofollow" href="https://blog.cloudflare.com/the-road-to-quic/">https://blog.cloudflare.com/the-road-to-quic/</a></p>
<div><pre><span>namespace</span> <span>System</span>.<span>Net</span>.<span>Quic</span>.<span>Experimental</span>
{
    <span>public</span> <span>sealed</span> <span>class</span> <span>QuicConnection</span> : <span>IDisposable</span>
    {
        <span>public</span> <span>QuicConnection</span>(<span>IPEndPoint</span> <span>remoteEndPoint</span>, System.Net.Security.<span>SslClientAuthenticationOptions</span> <span>sslClientAuthenticationOptions</span>, <span>IPEndPoint</span> <span>localEndPoint</span> <span>=</span> <span>null</span>, <span>bool</span> <span>mock</span> <span>=</span> <span>false</span>);
        <span>public</span> System.Threading.Tasks.<span>ValueTask</span> <span>ConnectAsync</span>(System.Threading.<span>CancellationToken</span> <span>cancellationToken</span> <span>=</span> <span>default</span>);
        <span>public</span> <span>bool</span> <span>Connected</span> { <span>get</span>; }
        <span>public</span> <span>IPEndPoint</span> <span>LocalEndPoint</span> { <span>get</span>; }
        <span>public</span> <span>IPEndPoint</span> <span>RemoteEndPoint</span> { <span>get</span>; }
        <span>public</span> SslApplicationProtocol NegotiatedApplicationProtocol [ <span>get</span>; }
        <span>public</span> <span>QuicStream</span> <span>CreateUnidirectionalStream</span>();
        <span>public</span> <span>QuicStream</span> <span>CreateBidirectionalStream</span>();
        <span>public</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>.<span>ValueTask</span>&lt;<span>QuicStream</span>&gt; <span>AcceptStreamAsync</span>(<span>System</span>.<span>Threading</span>.<span>CancellationToken</span> <span>cancellationToken</span> <span>=</span> <span>default</span>);
        <span>public</span> <span>void</span> <span>Close</span>();
    }
    <span>public</span> <span>sealed</span> <span>class</span> <span>QuicListener</span> : <span>IDisposable</span>
    {
        <span>public</span> <span>QuicListener</span>(<span>IPEndPoint</span> <span>listenEndPoint</span>, <span>System</span>.<span>Net</span>.<span>Security</span>.<span>SslServerAuthenticationOptions</span> <span>sslServerAuthenticationOptions</span>, <span>bool</span> <span>mock</span> <span>=</span> <span>false</span>);
        <span>public</span> <span>IPEndPoint</span> <span>ListenEndPoint</span> { <span>get</span>; }
        <span>public</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>.<span>ValueTask</span>&lt;<span>QuicConnection</span>&gt; <span>AcceptConnectionAsync</span>(<span>System</span>.<span>Threading</span>.<span>CancellationToken</span> <span>cancellationToken</span> <span>=</span> <span>default</span>);
        <span>public</span> <span>void</span> <span>Close</span>();
    }
    <span>public</span> <span>sealed</span> <span>class</span> <span>QuicStream</span> : <span>System</span>.<span>IO</span>.<span>Stream</span>
    {
        <span>internal</span> <span>QuicStream</span>() { }
        <span>public</span> <span>long</span> <span>StreamId</span> { <span>get</span>; }
        <span>public</span> <span>void</span> <span>ShutdownRead</span>();
        <span>public</span> <span>void</span> <span>ShutdownWrite</span>();
    }
}</pre></div>
<p>Notes:</p>
<p>Generally, this object model is inspired by the existing System.Net.Sockets API -- Connect, Accept, LocalEndPoint, RemoteEndPoint, etc. Some differences worth noting:</p>
<p>(1) QuicListener and QuicConnection take SSL options classes, since QUIC always uses TLS<br>
(2) These classes use IPEndPoint, since they are IP-specific (vs Socket which uses EndPoint and AddressFamily etc)<br>
(3) Since QUIC supports multiplexing, there is a distinction here between QuicConnection and QuicStream that doesn't exist in Sockets</p>
<p>The "mock" arguments to the QuicListener and QuicConnection constructors cause the "mock QUIC" implementation to be used. This is meant as a temporary measure while real QUIC protocol support is implemented and matures. This allows us to make progress on HTTP3 in parallel. These arguments will be removed before shipping.</p>
<p>There are currently no synchronous equivalents defined for async APIs like ConnectAsync. This matches HttpClient API definition.</p>
<p>I've added "Experimental" to the namespace here to position this work as experimental and not yet committed.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>

</div>


              

  


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzYzODMxNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzYzODMxNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzYzODMxNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547638317">
    <div>
      

  

<details data-body-version="43fc2eb67af35a5e208dc61307baa570">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0NzE2NQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0NzE2NQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY0NzE2NQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547647165">
    <div>
      

  

<details data-body-version="3835dba1216c4d9c751378413ed4c97b">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="3835dba1216c4d9c751378413ed4c97b" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Presumably the fields will actually be properties.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0NzU3MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0NzU3MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY0NzU3MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547647570">
    <div>
      

  

<details data-body-version="a2262aae020917ecfdcffb6e1728db23">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a2262aae020917ecfdcffb6e1728db23" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>How will <code>QuicListener.Close</code> be different from <code>QuicListener.Dispose</code>? Same for <code>QuicConnection.Close()</code></p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0Nzk4Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0Nzk4Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY0Nzk4Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547647982">
    <div>
      

  

<details data-body-version="a40f3ba102c2c449c2b41fdcd8e000e1">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a40f3ba102c2c449c2b41fdcd8e000e1" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Does it make sense to implement <code>IAsyncDisposable</code>?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0ODQzOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0ODQzOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY0ODQzOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547648438">
    <div>
      

  

<details data-body-version="e0e29c0ce978b96ee9a3595ca2e56026">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e0e29c0ce978b96ee9a3595ca2e56026" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Is it conceivable that QUIC might ever be asked for in non-IP networking? Should those <code>IPEndPoint</code> be made <code>EndPoint</code> to allow for this?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0OTI3MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY0OTI3MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY0OTI3MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547649270">
    <div>
      

  

<details data-body-version="feea1dd37d774394acbdc1abfdf889d4">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="feea1dd37d774394acbdc1abfdf889d4" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>(work for a separate API proposal, perhaps: it would be super super nice if <code>NetworkStream</code> and <code>QuicStream</code> both implemented some base class or interface that provides <code>ShutdownRead</code> and <code>ShutdownWrite</code>.)</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MjgwOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MjgwOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1MjgwOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547652808">
    <div>
      

  

<details data-body-version="0c8be14c97993e07262a81e61b6227e2">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="0c8be14c97993e07262a81e61b6227e2" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Presumably the fields will actually be properties.</p>
</blockquote>
<p>Yep, fixed, thanks</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1Mjk5Nw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1Mjk5Nw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1Mjk5Nw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547652997">
    <div>
      

  

<details data-body-version="e43e1e7f4be409e5a3654b6ddd6c6ab9">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e43e1e7f4be409e5a3654b6ddd6c6ab9" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>How will QuicListener.Close be different from QuicListener.Dispose? Same for QuicConnection.Close()</p>
</blockquote>
<p>They are the same. That's how Socket works too. I suppose we could just get rid of Close; I don't have a strong opinion here</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MzEyMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MzEyMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1MzEyMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547653123">
    <div>
      

  

<details data-body-version="45697d531eca10077f953f05319148d1">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="45697d531eca10077f953f05319148d1" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Does it make sense to implement IAsyncDisposable?</p>
</blockquote>
<p>At this point I don't see any reason to, but we can revisit in the future if necessary.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MzM4MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1MzM4MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1MzM4MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547653380">
    <div>
      

  

<details data-body-version="6f76da95d4654dbc84fab1df55d76ec7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6f76da95d4654dbc84fab1df55d76ec7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Is it conceivable that QUIC might ever be asked for in non-IP networking? Should those IPEndPoint be made EndPoint to allow for this?</p>
</blockquote>
<p>I think it's pretty doutbful. QUIC is explicitly defined in terms of UDP.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1NTE0MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1NTE0MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1NTE0MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547655140">
    <div>
      

  

<details data-body-version="b2c1ec3cd136dc1d0ca07579cb82cd30">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="b2c1ec3cd136dc1d0ca07579cb82cd30" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<blockquote>
<p>How will QuicListener.Close be different from QuicListener.Dispose? Same for QuicConnection.Close()</p>
</blockquote>
<p>They are the same. That's how Socket works too. I suppose we could just get rid of Close; I don't have a strong opinion here</p>
</blockquote>
<p>I feel like I've seen guidance to not do this anymore, but can't find it. <a data-hovercard-type="user" data-hovercard-url="/users/bartonjs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bartonjs">@bartonjs</a> anything in our guidelines about this?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1NTk5NQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY1NTk5NQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY1NTk5NQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547655995">
    <div>
      

  

<details data-body-version="5848afea7e40534db2a585415ba30900">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="5848afea7e40534db2a585415ba30900" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Any plans to have PipeReader and PipeWriter in the API?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY2MTAzMA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY2MTAzMA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY2MTAzMA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/bartonjs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bartonjs"><img height="40" width="40" alt="@bartonjs" src="https://avatars1.githubusercontent.com/u/10642668?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547661030">
    <div>
      

  

<details data-body-version="71151329af370f6b0f2f48a017c48a76">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="71151329af370f6b0f2f48a017c48a76" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>I feel like I've seen guidance to not do this anymore, but can't find it. <a data-hovercard-type="user" data-hovercard-url="/users/bartonjs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bartonjs">@bartonjs</a> anything in our guidelines about this?</p>
</blockquote>
<p>We haven't made it to the chapter with the Dispose Pattern in it yet with our systemic analysis of the guidelines, but the current guideline is:</p>
<blockquote>
<ul>
<li>CONSIDER providing method Close(), in addition to the Dispose(), if close is standard terminology in the area.</li>
</ul>
</blockquote>
<p>It's a CONSIDER, so if it feels wrong, don't do it (things can be added later easier than they can be removed).  If you run across where we said "don't do that", it would be useful for justifying any changes to that guideline.</p>
<p>If you do add Close(), Close() and Dispose() are supposed to be identical.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY2NjczNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY2NjczNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY2NjczNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547666736">
    <div>
      

  

<details data-body-version="fa2768fb8c77164c12f62a3bdaa47b52">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="fa2768fb8c77164c12f62a3bdaa47b52" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Any plans to have PipeReader and PipeWriter in the API?</p>
</blockquote>
<p>Something like this?</p>
<div><pre>    <span>public</span> <span>sealed</span> <span>class</span> <span>QuicConnection</span>
    {
        <span>public</span> <span>QuicPipeWriter</span> <span>CreateUnidirectionalStream</span>();
        <span>public</span> <span>QuicDuplexPipe</span> <span>CreateBidirectionalStream</span>();

         <span><span>//</span> Not sure what should be returned here </span>
         <span><span>//</span> as the result can either be a unidirectional or a bidirectional stream.</span>
        <span>public</span> <span>ValueTask</span>&lt;<span>QuicPipeReader</span>|<span>QuicDuplexPipe</span>&gt; <span>AcceptStreamAsync</span>(CancellationToken);
    }</pre></div>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MTYzNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MTYzNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3MTYzNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547671635">
    <div>
      

  

<details data-body-version="c72a398dc1294a40171521243acd5c1a">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c72a398dc1294a40171521243acd5c1a" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom">@omariom</a> I don't think we are against having PipeReader/PipeWriter apis here, but we would first need to discuss adding Pipelines to Microsoft.NetCore.App first (right now it's a standalone package). We may have something that can be used in AspNetCore as well.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MTk5Mw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MTk5Mw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3MTk5Mw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547671993">
    <div>
      

  

<details data-body-version="12c818571e8b066dcca159cac32cafdf">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="12c818571e8b066dcca159cac32cafdf" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer">@geoffkizer</a> I don't see how the bool Connected would be used reliably; an event or callback may be better (like OnConnected).</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MzA4Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3MzA4Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3MzA4Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547673086">
    <div>
      

  

<details data-body-version="52dd8f848e3697c63b3f362c8bdd74b8">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="52dd8f848e3697c63b3f362c8bdd74b8" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Does SslClientAuthenticationOptions apply to both client and server scenarios?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3Mzg1NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3Mzg1NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3Mzg1NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547673854">
    <div>
      

  

<details data-body-version="4936a936fd120b6d36d52d0ffed9dbb1">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="4936a936fd120b6d36d52d0ffed9dbb1" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Why are QuicConnection, QuicStream, and QuicListener sealed? Can they be virtual?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NDAyOQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NDAyOQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3NDAyOQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547674029">
    <div>
      

  

<details data-body-version="a7a932b46895285308be651b4f7b2115">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a7a932b46895285308be651b4f7b2115" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>As <a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory">@scalablecory</a> mentioned, DisposeAsync and CloseAsync instead of sync.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NDQ3Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NDQ3Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3NDQ3Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547674472">
    <div>
      

  

<details data-body-version="9a3dac769c7d9e1de83a4a83cfd4ad09">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="9a3dac769c7d9e1de83a4a83cfd4ad09" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><code>Connect</code> instead of <code>Create</code>?</p>
<div><pre><span>public</span> <span>QuicStream</span> <span>ConnectUnidirectionalStream</span>();
<span>public</span> <span>QuicStream</span> <span>ConnectBidirectionalStream</span>();</pre></div>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NTc1Mw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3NTc1Mw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3NTc1Mw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547675753">
    <div>
      

  

<details data-body-version="c5b941e871b8feefe5d4c4105394908c">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c5b941e871b8feefe5d4c4105394908c" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>In the API streams are created synchronously. What transitions them to <code>Connected</code> state?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3Nzc1NQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY3Nzc1NQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY3Nzc1NQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547677755">
    <div>
      

  

<details data-body-version="d35c930fb81a6929398493b441b8f75e">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d35c930fb81a6929398493b441b8f75e" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Instead of having public <code>ctor</code> and <code>ConnectAsync</code> method on <code>QuicConnection</code><br>
there could be  <code>QuicConnector</code> class with its ConnectAsync returning a QuicConnection<br>
as <code>QuicListener</code>'s <code>AcceptConnectionAsync</code> does.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4MTA0Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4MTA0Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4MTA0Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547681046">
    <div>
      

  

<details data-body-version="02eadcad7f055e9342933e8e7bf04496">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="02eadcad7f055e9342933e8e7bf04496" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik">@jkotalik</a>  Another argument for having pipes natively in  .NET QUIC is that<br>
if in the future MSQUIC team decides to use <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh997032(v%3Dws.11)" rel="nofollow">Registered IO</a> or <a href="https://kernel-recipes.org/en/2019/talks/faster-io-through-io_uring/" rel="nofollow">io_uring</a> and expose zero-copy abilities,<br>
only  pipes API will allow to get advantage of that.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NDEyNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NDEyNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NDEyNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547684127">
    <div>
      

  

<details data-body-version="83710b0d9de857155cf2b029cf5c7657">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="83710b0d9de857155cf2b029cf5c7657" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><code>QuicStream.Connected</code> shouldn't exist; I've removed it above.</p>
<p>A QUIC stream doesn't really have a separate Connect operation. You just start sending on it.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NTUyMQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NTUyMQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NTUyMQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547685521">
    <div>
      

  

<details data-body-version="ce3de815660757d5e0464d7262b38850">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ce3de815660757d5e0464d7262b38850" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<div><pre><span>public</span> <span>QuicConnection</span>(<span>IPEndPoint</span> <span>remoteEndPoint</span>, <span>System</span>.<span>Net</span>.<span>Security</span>.<span>SslClientAuthenticationOptions</span> <span>sslClientAuthenticationOptions</span>, <span>IPEndPoint</span> <span>localEndPoint</span> <span>=</span> <span>null</span>, <span>bool</span> <span>mock</span> <span>=</span> <span>false</span>);</pre></div>
</blockquote>
<p>I think there may be value in other EndPoint types at some point, but we can add ctors later. One thing that comes to mind is that we could use an <code>EndPoint</code> to coordinate the mock in-memory version. If we add a ctor like this:</p>
<div><pre><span>public</span> <span>QuicConnection</span>(<span>MemoryEndPoint</span> <span>memoryEndPoint</span>, <span>System</span>.<span>Net</span>.<span>Security</span>.<span>SslClientAuthenticationOptions</span> <span>sslClientAuthenticationOptions</span>)</pre></div>
<p>Where <code>MemoryEndPoint</code> is mostly an "opaque" type from a user perspective that helps coordinate things so that two <code>QuicConnection</code> that are given the same <code>MemoryEndPoint</code> can talk to each other. Kestrel and HttpClient can be tested in memory then by using the same instance.</p>
<p>Since that's all just temporary during feature development, it wouldn't need a huge amount of rigorous design, as long as we were very clear on when we were getting rid of it. It could even be marked <code>Obsolete</code> in advance or something <g-emoji alias="cat" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f431.png">🐱</g-emoji>.</p>
<blockquote>
<div><pre>        <span>public</span> <span>QuicStream</span> <span>CreateUnidirectionalStream</span>();
        <span>public</span> <span>QuicStream</span> <span>CreateBidirectionalStream</span>();</pre></div>
</blockquote>
<p>I like the name <code>Open</code>, but that's just a preference.</p>
<p>Any thoughts on an API that lets you set the stream ID? I'm thinking of possible protocols that assign semantics to specific stream IDs. HTTP/3 doesn't do that (instead you have to send a "stream type" message as the first message on a stream) but some protocol might. We would probably want to validate that the stream ID is valid for the purpose (which may mean the connection has to know if it's the client or the server...). Just a thought.</p>
<blockquote>
<div><pre><span>public</span> <span>int</span> <span>StreamId</span> { <span>get</span>; }</pre></div>
</blockquote>
<p>Should probably be a <code>long</code>? Or even a <code>ulong</code> (though we generally don't use those)? The largest stream ID is <code>2^62-1</code> (<a href="https://quicwg.org/base-drafts/draft-ietf-quic-transport.html#stream-id" rel="nofollow">Source</a>).</p>
<blockquote>
<div><pre>        <span>public</span> <span>void</span> <span>ShutdownRead</span>();
        <span>public</span> <span>void</span> <span>ShutdownWrite</span>();</pre></div>
</blockquote>
<p><a href="https://source.dot.net/#System.Net.Sockets/System/Net/Sockets/Socket.cs,54ee9c8f4898f6a9" rel="nofollow"><code>Socket</code> has a single <code>Shutdown</code> API</a> with an enum to select how to shutdown (Read, Write or Both). Should we do the same? We could even borrow <a href="https://source.dot.net/#System.Net.Sockets/System/Net/Sockets/SocketShutdown.cs,54ee9c8f4898f6a9" rel="nofollow">the same enum</a>.</p>
<blockquote>
<div><pre><span>public</span> <span>sealed</span> <span>class</span> <span>QuicStream</span> : <span>System</span>.<span>IO</span>.<span>Stream</span></pre></div>
</blockquote>
<p>Not sure I like inheriting here. I'd prefer a model where the stream is exposed as a property. That could also give us the option to expose pipes later and change which is "authoritative" (i.e. change to a Pipe and make the Stream a wrapper around the Pipe, or vice versa).</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NjU4NQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NjU4NQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NjU4NQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547686585">
    <div>
      

  

<details data-body-version="556739b39167336db3e44983c1155532">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="556739b39167336db3e44983c1155532" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>One thing that comes to mind is that we could use an EndPoint to coordinate the mock in-memory version.</p>
</blockquote>
<p>I agree this is interesting. IPEndPoint is not sealed, so I think we could just derive a "mock" endpoint type from it.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NjgzNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NjgzNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NjgzNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547686835">
    <div>
      

  

<details data-body-version="b0d3e76d202929c6061b5e0719422b07">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="b0d3e76d202929c6061b5e0719422b07" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>I like the name Open, but that's just a preference.</p>
</blockquote>
<p><code>Open</code> is good; I think I may prefer it to <code>Create</code> too. But I don't have a strong opinion.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzIxNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzIxNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NzIxNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547687217">
    <div>
      

  

<details data-body-version="8068ed9a7f377a1a522322050bd326c7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="8068ed9a7f377a1a522322050bd326c7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Any thoughts on an API that lets you set the stream ID?</p>
</blockquote>
<p>My (perhaps naive) assumption is that higher-level protocols won't rely on this. I think at one point HTTP3 did, but changed it so they don't anymore. It's problematic in some ways and using the HTTP3 approach seems better in general.</p>
<p>That said, it seems straightforward to add in the future if necessary.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzU1OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzU1OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NzU1OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547687558">
    <div>
      

  

<details data-body-version="ceb007553dc6bd6aba305161ea5fde6f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ceb007553dc6bd6aba305161ea5fde6f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>[StreamId] Should probably be a long</p>
</blockquote>
<p>Yep -- updated above.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>




    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzY1OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4NzY1OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4NzY1OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/bartonjs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bartonjs"><img height="40" width="40" alt="@bartonjs" src="https://avatars1.githubusercontent.com/u/10642668?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547687658">
    <div>
      

  

<details data-body-version="741c96a1d95e176f177c2a8d85cf2e29">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="741c96a1d95e176f177c2a8d85cf2e29" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>As <a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory">@scalablecory</a> mentioned, DisposeAsync and CloseAsync instead of sync.</p>
</blockquote>
<p>Not "instead of".  Our (unpublished) async guidance is to add a sync version of every async thing (for high level types).</p>
<p>Sync-only: OK.  Async-only: not OK (except speciality low-level things)</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODA0OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODA0OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODA0OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688048">
    <div>
      

  

<details data-body-version="a25e68c0d530bb50fe738c26b8bbb908">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a25e68c0d530bb50fe738c26b8bbb908" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Does SslClientAuthenticationOptions apply to both client and server scenarios?</p>
</blockquote>
<p><code>SslClientAuthenticationOptions</code> applies to client scenarios. <code>SslServerAuthenticationOptions</code> applies to server scenarios.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODM1MQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODM1MQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODM1MQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688351">
    <div>
      

  

<details data-body-version="15dfbc1973f281cb9b96ab9eb4ea50d4">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="15dfbc1973f281cb9b96ab9eb4ea50d4" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Socket has a single Shutdown API with an enum to select how to shutdown (Read, Write or Both).</p>
</blockquote>
<p>I prefer just having two different APIs, it seems simpler that way. Both is equivalent to Close().</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODYwMA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODYwMA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODYwMA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/stephentoub/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/stephentoub"><img height="40" width="40" alt="@stephentoub" src="https://avatars2.githubusercontent.com/u/2642209?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688600">
    <div>
      

  

<details data-body-version="afbabd2061d04bf2efe0b8294bca6018">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="afbabd2061d04bf2efe0b8294bca6018" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>CreateUnidirectionalStream()</p>
</blockquote>
<p>I understand the meaning of "bidirectional" stream.  But with "unidirectional"... which direction is it?  System.IO.Pipes uses a PipeDirection enum for In, Out, and InOut... maybe something like that is relevant here? (Or maybe I'm totally misunderstanding the concept.)</p>
<blockquote>
<p>I suppose we could just get rid of Close</p>
</blockquote>
<p>I think we should get rid of Close.  We can always add it later if it proves meaningful, but I doubt it will.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODczNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODczNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODczNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688737">
    <div>
      

  

<details data-body-version="9f47f13adc952970e1438deac6a3b5ef">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="9f47f13adc952970e1438deac6a3b5ef" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Instead of having public ctor and ConnectAsync method on QuicConnection<br>
there could be QuicConnector class with its ConnectAsync returning a QuicConnection<br>
as QuicListener's AcceptConnectionAsync does.</p>
</blockquote>
<p>Yeah, that's definitely a possibility. I'm not sure it adds enough value to be worth creating another class, though.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODgwOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODgwOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODgwOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jkotalik/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jkotalik"><img height="40" width="40" alt="@jkotalik" src="https://avatars2.githubusercontent.com/u/8302101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688808">
    <div>
      

  

<details data-body-version="8a19bbd517a797e70eaae718f358ded2">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="8a19bbd517a797e70eaae718f358ded2" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>SslClientAuthenticationOptions applies to client scenarios. SslServerAuthenticationOptions applies to server scenarios.</p>
</blockquote>
<p>Makes sense. Will AcceptConnectionAsync use an internal constructor to new up the QuicConnection?</p>
<blockquote>
<p>Sync-only: OK. Async-only: not OK (except speciality low-level things)</p>
</blockquote>
<p>Shutdown and Close in MsQuic I believe are always async, so are we okay with having both if the synchronous ones will always be sync over async?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODg2MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4ODg2MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4ODg2MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547688860">
    <div>
      

  

<details data-body-version="29a715c72a0b19e1945f8050f94652aa">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="29a715c72a0b19e1945f8050f94652aa" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>My (perhaps naive) assumption is that higher-level protocols won't rely on this. I think at one point HTTP3 did, but changed it so they don't anymore.</p>
</blockquote>
<p>Fair point, and that's why I'm kinda waffling on it. We could add the API later as an overload.</p>
<blockquote>
<p>I understand the meaning of "bidirectional" stream. But with "unidirectional"... which direction is it?</p>
</blockquote>
<p>It's known what the direction is. Since you are initiating it, it means you are writing to it. Bidirectional just allows the remote party to also send on that stream. ("Unidirectional streams carry data in one direction: from the initiator of the stream to its peer." <a href="https://quicwg.org/base-drafts/draft-ietf-quic-transport.html#stream-id" rel="nofollow">Source</a>)</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTE5MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTE5MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4OTE5MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547689190">
    <div>
      

  

<details data-body-version="5525b2864eefa7111420d80dd697f281">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="5525b2864eefa7111420d80dd697f281" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>But with "unidirectional"... which direction is it?</p>
</blockquote>
<p>It's always outbound. That is, the peer that creates a unidirectional stream can write to it but not read; the peer that accepts the unidirectional stream can read but not write.</p>
<p>There is no way for a peer to create an inbound-only stream in QUIC.</p>
<p>"Unidirectional" and "bidirectional" are the terms the RFC uses so I'm inclined to stick with them.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTIwNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTIwNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4OTIwNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547689205">
    <div>
      

  

<details data-body-version="749924f691780aa5a940ca2a629c9f65">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="749924f691780aa5a940ca2a629c9f65" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>I prefer just having two different APIs, it seems simpler that way. Both is equivalent to Close().</p>
</blockquote>
<p>I also think I prefer two APIs, though symmetry with <code>Socket.Shutdown</code> wouldn't be a terrible thing.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTcwOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY4OTcwOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY4OTcwOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547689708">
    <div>
      

  

<details data-body-version="6b9bd672f4805921217b3ac183d43646">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6b9bd672f4805921217b3ac183d43646" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>I prefer just having two different APIs, it seems simpler that way. Both is equivalent to Close().</p>
</blockquote>
<p>My assumption was that Close/Dispose would have behavior similar to <code>Socket.Dispose</code>, but it seems that was incorrect. (I bet users will make the same mistake -- we need better naming in that case)</p>
<p>How do we achieve a reset stream VS a shutdown &amp; cleanly closed stream?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MDQxNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MDQxNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY5MDQxNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547690416">
    <div>
      

  

<details data-body-version="4dd224db12d8b1c9f3e5965e85ee9b0f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="4dd224db12d8b1c9f3e5965e85ee9b0f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>My assumption was that Close/Dispose would have behavior similar to Socket.Dispose</p>
</blockquote>
<p>In what sense? Specifically re graceful vs abortive shutdown? Close/Dispose on Socket is not necessarily abortive, and Shutdown is not necessarily graceful.</p>
<blockquote>
<p>How do we achieve a reset stream VS a shutdown &amp; cleanly closed stream?</p>
</blockquote>
<p>Yeah, I agree we need to clarify how this works. Let me think about it a bit. QUIC is a bit different than TCP here in that you can reset one direction without resetting the other.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MTYxMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MTYxMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY5MTYxMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/stephentoub/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/stephentoub"><img height="40" width="40" alt="@stephentoub" src="https://avatars2.githubusercontent.com/u/2642209?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547691613">
    <div>
      

  

<details data-body-version="47a13a02b08a76eff38b7ca1e8ab8479">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="47a13a02b08a76eff38b7ca1e8ab8479" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>There is no way for a peer to create an inbound-only stream in QUIC.</p>
</blockquote>
<p>Got it.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MzYyMQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzY5MzYyMQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzY5MzYyMQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/omariom/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/omariom"><img height="40" width="40" alt="@omariom" src="https://avatars3.githubusercontent.com/u/1781701?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547693621">
    <div>
      

  

<details data-body-version="3a817d410c1efa205d72fb20a49f6be3">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="3a817d410c1efa205d72fb20a49f6be3" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>If the connection has been migrated, does it change its RemoteEndPoint?<br>
Should <code>ConnectionId</code> be exposed as well/instead?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzcwMTQ5Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NzcwMTQ5Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NzcwMTQ5Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/davidfowl/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/davidfowl"><img height="40" width="40" alt="@davidfowl" src="https://avatars1.githubusercontent.com/u/95136?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547701496">
    <div>
      

  

<details data-body-version="c9eb078366ba6ce611fe515a506b1694">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c9eb078366ba6ce611fe515a506b1694" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Doesn’t shutdown need to be fully asynchronous or at least allow for it? This is where it helps to have multiple implementations, it usually shows other ways APIs can be used.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0Nzk5MjM0Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0Nzk5MjM0Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0Nzk5MjM0Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-547992342">
    <div>
      

  

<details data-body-version="ac9d18eae69e22e6eb5190f224576de2">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ac9d18eae69e22e6eb5190f224576de2" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Should <code>ConnectionId</code> be exposed as well/instead?</p>
</blockquote>
<p>The extra complexity there is that a peer in a QUIC connection can have <a href="https://quicwg.org/base-drafts/draft-ietf-quic-transport.html#connection-id" rel="nofollow">multiple connection IDs</a>.</p>
<p>We should be considering how connection migration may affect these APIs, though I think it's reasonable to call some of that out-of-scope for 5.0. The <code>LocalEndPoint</code> and <code>RemoteEndPoint</code> could both change (though the <code>LocalEndPoint</code> would only change via user action, we probably don't need to worry as much about that). The set of <em>remote</em> <code>ConnectionId</code> values can change at any time (via <code>NEW_CONNECTION_ID</code> and <code>RETIRE_CONNECTION_ID</code> frames). I believe we have more control on the local ones (depending on our implementation).</p>
<p>I think that if we leave <code>ConnectionId</code> off for now, and indicate via docs that the <code>RemoteEndPoint</code> value may change if the connection is migrated, we probably cover enough mileage to get us in a good state for 5.0 in re: connection migration.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU1MzIxMjUyNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU1MzIxMjUyNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU1MzIxMjUyNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/geoffkizer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/geoffkizer"><img height="40" width="40" alt="@geoffkizer" src="https://avatars3.githubusercontent.com/u/12518809?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-553212525">
    <div>
      

  

<details data-body-version="0fad40c3819d80790402936127e3c29a">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="0fad40c3819d80790402936127e3c29a" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>I added QuicConnection.NegotiatedApplicationProtocol above, to match SslStream.NegotiatedApplicationProtocol.</p>
<p>As <a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher">@Tratcher</a> pointed out on the linked issue, there are a bunch of TLS-related properties that SslStream exposes that we'll want to have here as well. These include LocalCertificate, RemoteCertificate, SslVersion, etc. We should review these and add as appropriate.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU3MDkzNDk4Nw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU3MDkzNDk4Nw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU3MDkzNDk4Nw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/am11/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/am11"><img height="40" width="40" alt="@am11" src="https://avatars1.githubusercontent.com/u/3840695?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-570934987">
    <div>
      

  

<details data-body-version="bb2fe29de583e05127d659cefbe01768">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="bb2fe29de583e05127d659cefbe01768" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Will QUIC, at some point, use UDP at its core in implementation detail, as it is described in its design?</p>
<p>ps: dotnet <code>UdpClient</code> did not get any  span/memory improvements, I was thinking if QUIC implementation depends on it, that might improve existing UDP APIs as well?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU3MDkzNTQwOQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU3MDkzNTQwOQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU3MDkzNTQwOQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-570935409">
    <div>
      

  

<details data-body-version="d291a9c6a8ae76aa26bf4d041ed4d4c7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d291a9c6a8ae76aa26bf4d041ed4d4c7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/am11/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/am11">@am11</a> yes, we have PRs that are UDP based (<a data-error-text="Failed to load issue title" data-id="530922167" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/runtime/issues/427" data-hovercard-type="pull_request" data-hovercard-url="/dotnet/runtime/pull/427/hovercard" href="https://github.com/dotnet/runtime/pull/427">#427</a>). They do not go through UdpClient though, they use native libraries that implement the QUIC protocol over UDP.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  





<!-- Rendered timeline since 2020-01-31 21:15:23 -->



            </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>