<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Pizza Box Computer - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Pizza Box Computer - linksfor.dev(s)"/>
    <meta property="og:description" content="[A Sophie Haskins Project](https://blog.sophaskins.net/)"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://blog.pizzabox.computer/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Pizza Box Computer</title>
<div class="readable">
        <h1>Pizza Box Computer</h1>
            <div>Reading time: 109-138 minutes</div>
        <div>Posted here: 24 Feb 2020</div>
        <p><a href="http://blog.pizzabox.computer/">http://blog.pizzabox.computer/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
    <div>
<article>
  
  <time datetime="2020-01-20T20:20:00-0500">Mon, Jan 20, 2020</time>
  <p>It's been a long time since my <a href="http://blog.pizzabox.computer/posts/installing-aux-quadra">last pizzabox post</a> - over a year! There's been <a href="https://www.vice.com/en_us/article/7x5an4/why-i-quit-github">a lot going on</a> in my life but I'm excited that <strong>lately I've had a lot more free time</strong>, which means more time to explore the world of workstations and share with you!</p>
<p>I'm also excited announce that I'm <strong>trying out YouTube videos</strong> - not <em>instead</em> of these posts, but in <em>addition</em> to them. This post has a sibling video, so if that's more your jam, check it out.</p>
<p>
  <iframe src="https://www.youtube.com/embed/WxsGMp_8w6Q" allowfullscreen="" title="YouTube Video"></iframe>
</p>

<!-- raw HTML omitted -->
<p>This post is part one of a multi-part series about <strong>running NeXTstep on the HP 712</strong>. Today I'll dive in to <strong>installation process</strong>.</p>
<p>NeXTstep is a <strong>historically interesting OS</strong> (more on that in a bit) and while I <em>do</em> own some <a href="http://blog.pizzabox.computer/pizzaboxes/nextstation">original NeXT hardware</a>, it's a difficult to actually <em>use</em> - one of my longer-term projects is to make adapters for the NeXTstation to use more common input devices. That doesn't stop me from playing with NeXTstep, though, because <strong>it also runs on one of my favorite pizzaboxes</strong>, the HP 712.</p>
<h2 id="a-note-on-capitalization">A note on cAPitALIZAtion</h2>
<p>NeXT used a variety of capitalizations of NeXTstep, including</p>
<ul>
<li>NeXTSTEP</li>
<li>NEXTSTEP</li>
<li>NeXTStep, and</li>
<li>NeXTstep</li>
</ul>
<p>Regardless of historical accuracy, <strong>I think “NeXTstep” looks the coolest</strong>, so I'm going to use that throughout</p>
<h2 id="the-nextstep-in-computer-evolution">The NeXTstep in computer evolution</h2>
<p>The OS I'm installing is NeXT, inc's  NeXTstep. NeXTstep was made up of:</p>
<ul>
<li>the <strong><a href="https://www.cs.cmu.edu/afs/cs/project/mach/public/www/mach.html">Mach kernel</a></strong></li>
<li>a Unix-like user-land from <strong>BSD</strong></li>
</ul>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/nextstep-logo.png" alt="nextstep logo, from Quick Start manual">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/nextstep-logo.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>nextstep logo, from Quick Start manual</p>
      </figcaption>
  </figure>
</div>

<p>Those components make it sound like “yet another boring 1980s-1990s commercial Unix”. However, the NeXT few layers (NO APOLOGIES FOR PUNS) <strong>made it quite different</strong> from other Workstation OSes. It had:</p>
<ul>
<li>NeXT's <strong>Objective-C</strong> runtime for building applications (an ancestor of <a href="https://en.wikipedia.org/wiki/Cocoa_(API)">Cocoa</a>)</li>
<li>the <strong><a href="https://en.wikipedia.org/wiki/Display_PostScript">Display PostScript</a></strong> graphics engine</li>
<li>an <strong>incredible GUI</strong> built on top of them</li>
</ul>
<p>I'll dive deeper in to what features made NeXTstep special in a future post, but suffice to say: NeXTstep was <strong>incredibly important for the future of operating systems</strong>. While NeXT <em>themselves</em> didn't have much success selling their workstations (or their OS…or their toolkits…), their work <em>directly</em> forms the basis of MacOS X and indirectly influenced the development of other OSes.</p>
<p>In the mid 1990s, NeXT's effort to replace their Motorola 68000-based workstation architecture with a RISC one fizzled out. When they stopped selling hardware, <strong>they started selling new ports of NeXTstep for other architectures</strong>: Intel's <a href="https://en.wikipedia.org/wiki/IA-32">IA-32</a>, Sun's <a href="https://en.wikipedia.org/wiki/SPARC">SPARC</a>, and HP's <a href="https://en.wikipedia.org/wiki/PA-RISC">PA-RISC</a>. The version I'm installing is NeXTstep 3.3 - the first and final version for PA-RISC.</p>
<h2 id="this-pizzabox-hewlett-packs-a-punch">This pizzabox Hewlett-Packs a punch!</h2>
<p>The hardware I'm using is the HP 9000 Model 712. I've <a href="http://blog.pizzabox.computer/posts/booting-the-hp712/">written about</a> setting it up to use its native HP-UX OS, but that's not the only trick up its sleeve. The 32-bit first-generation PA-RISC machines in HP's 9000 family <strong>can run NeXTstep and are <em>much</em> faster than NeXT's 68000 hardware</strong>. The 712 is a later model from that generation, packaging the power of earlier models in to a less expensive and smaller package.</p>
<p>Important things to know about my 712 are that it has:</p>
<ul>
<li>64MB of RAM (midway between the min of 16MB and max 128MB)</li>
<li>a 60 MHz processor (later models being 80 or 100 MHz)</li>
<li>a VRAM expansion (so it supports all relevant resolutions)</li>
<li>no hard disk (or at least, it didn't <em>ship</em> with one, though it <em>supports</em> one)</li>
<li>also no floppy disk drive, though it also <em>can</em> (I'm guessing this means it was netbooted in its former life?)</li>
<li>IBM PC-style I/O: video comes via a VGA port, and peripherals are the PS/2 type</li>
</ul>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/back.jpeg">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/back.jpeg" itemprop="contentUrl"></a>
  </figure>
</div>

<p>Besides the computer, <strong>the other ingredients I'll need are:</strong></p>
<ul>
<li>a hard disk - as usual, <strong>I'll be using a <a href="http://www.codesrc.com/mediawiki/index.php/SCSI2SD">SCSI2SD</a></strong>, but as you'll see in a bit, the configuration is a bit non-standard</li>
<li>installation CD - I <a href="https://archive.org/details/NextSTEP_3.3_RISC_Sun_SPARC-HP_PARISC">got mine</a> from the <strong>Internet Archive</strong></li>
<li>a CD-ROM drive - at first I tried to use my physical drive, but it seems to be broken. I ended up using the SCSI2SD as a CD-ROM as well.</li>
</ul>
<h2 id="disk-configuration-mis-steps">Disk configuration mis-STEPs</h2>
<p>Approaching this naively, I'd expect the SCSI2SD's <em>default</em> settings to work. Out of the box, it's configured to have <strong>SCSI ID 0 be a 2GB hard disk</strong> - nothing fancy. I tried this, and the installation seems like it's going to work, but when it comes time to format the disk, it runs in to problems:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/geometry-failure.png" alt="disk initialization failed">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/geometry-failure.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>disk initialization failed</p>
      </figcaption>
  </figure>
</div>

<p>Digging around on the internet a bit gave me a clue - <strong>NeXTstep is picky about drive geometry</strong>. Some fine folks on the “NeXT Computers” forum <a href="http://www.nextcomputers.org/forums/index.php?PHPSESSID=f229ce4453f6d99df2a45651686a0fc6&amp;msg=24806">geometry settings</a> that will work with NeXTstep on a SCSI2SD. Unfortunately, the <code>scsi2sd-util</code> software doesn't have a way to set the important <code>sectorsPerTrack</code> and <code>headsPerCylinder</code>. Instead, I had to save the configuration to an XML file, open it up and edit those settings, and re-import the config in the utility. The offending default geometry settings were:</p>
<pre><code>&lt;sectorsPerTrack&gt;63&lt;/sectorsPerTrack&gt;
&lt;headsPerCylinder&gt;255&lt;/headsPerCylinder&gt;
</code></pre><p>I changed them to the recommended settings from the forum:</p>
<pre><code>&lt;sectorsPerTrack&gt;139&lt;/sectorsPerTrack&gt;
&lt;headsPerCylinder&gt;4&lt;/headsPerCylinder&gt;
</code></pre><p>This is good enough to get all the way through the install and software installation process, but <strong>it will just hang on the first true post-installation boot</strong>:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/post-install-wrong-ids.png" alt="hanging after installation">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/post-install-wrong-ids.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>hanging after installation</p>
      </figcaption>
  </figure>
</div>

<p>There's a lot going on here, and it doesn't <em>explicitly</em> tell you what's going on, but there are clues. The first interesting bit is:</p>
<pre><code>Checking disks
/dev/rsd0a file system clean: skipping check
mountfs: illegal remount request
mount: /dev/sd0a on /: Invalid argument
mount: giving up
</code></pre><p>In a <a href="https://en.wikipedia.org/wiki/Fsck#Use">typical</a> Unix boot sequence, the root filesystem is first mounted read-only, checked with <code>fsck</code>, then re-mounted read-write. <strong>It sounds like that re-mount didn't work</strong>! There's more indication that the root is still read-only further down when it attempts to start <code>syslogd</code>:</p>
<pre><code>Starting early daemons: syslogdFeb 15 23:35:26 localhost syslogd: cannot create /dev/log: Read-only file system
</code></pre><p>So, it seems like I'm having trouble with <code>/dev/sd0a</code>, the root partition. In a normal world, I'd expect that that corresponds to:</p>
<ul>
<li>the first partition (the <code>a</code>)</li>
<li>on the first disk (the <code>0</code>)</li>
<li>attached to the SCSI bus (the <code>sd</code>)</li>
</ul>
<p>Given that I have my hard disk at SCSI ID 0 and CD-ROM at ID 3, <strong>you'd think that <code>sd0a</code> would be the hard disk. You would be wrong.</strong> If you read a little higher in this boot output, it says:</p>
<pre><code>The following scsi disks have been found:
  sd0 at target 3
  sd1 at target 0
</code></pre><p>Excuse me? <code>sd0</code> is SCSI ID 3? That's…my CD-ROM drive. I guess it makes sense that it can't be mounted read/write?! It took some digging, but I found an explanation as to why from an unlikely source - <strong>a NeXT knowledge-base article from 1997</strong>! <a href="https://www.nextop.de/NeXTAnswers/1684.html#scsidevicenumbering">NeXTAnswers #1684</a> explains:</p>
<blockquote>
<p>Q:	How are SCSI device numbers assigned on HP hardware?</p>
<p>A:	Unlike NEXTSTEP on NeXT and Intel-based hardware, NEXTSTEP for PA-RISC assigns SCSI device numbers in order of decreasing SCSI ID numbers. In other words, NEXTSTEP scans down by SCSI ID, assigning device number 0 to the first device encountered, device number 1 to the second, etc.</p>
<p>For example, a typical HP SCSI setup consists of a hard disk at SCSI ID 6 and a CD-ROM drive at SCSI ID 2. In this example, the hard disk is assigned SCSI device number 0, while the CD-ROM drive is assigned device number 1. A second hard disk added at ID 1 would then be assigned device number 2.</p>
</blockquote>
<p>Well that seems unusual! Why would NeXT number differently on PA-RISC than other platforms? It turns out…<strong>this is how HP does it</strong>. In the <a href="http://www.hpmuseum.net/exhibit.php?hwdoc=430">Owner's Guide</a> for the HP 712 on page C-13 it has a table to help you choose SCSI IDs, and it notes that your internal hard drive <strong>would normally be ID 6</strong> (the “Winchester Disk”). On page 6-2 (the beginning of the section about CD-ROM drives) it notes:</p>
<blockquote>
<p>The instructions in this chapter assume that your CD-ROM drive is set to the factory default address of SCSI ID 2.</p>
</blockquote>
<p>The boot disk being SCSI ID 6 and an external CD-ROM being ID 2 is <em>not</em> what I would typically expect. On a Mac (at least!), <strong>it's traditional to have the internal boot drive be ID 0 and a CD-ROM be ID 3</strong>. I can't say I know <em>why</em> HP numbers things differently from other manufacturers, but…it seems that they <em>do</em>.</p>
<p>To bring this back around: what's happening here is the bootloader is starting up the kernel from the drive it's on, <em>then</em> telling it to proceed to mount <code>/dev/sd0a</code> as root. Because my IDs are set in a “typical” fashion, that <strong>results in it trying to mount the <em>CD-ROM</em> as root instead of the boot disk</strong>. Renumbering my SCSI drives to have the disk at a higher ID than the CD-ROM fixes the problem.</p>
<p>My final SCSI2SD configuration had the hard disk at ID 6, and the CD-ROM drive at ID 3.</p>
<h2 id="finally-doing-the-install">Finally doing the install</h2>
<p>Now that we know that:</p>
<ul>
<li>NeXTstep is picky about disk geometry</li>
<li>HP workstations are picky about about SCSI ID ordering</li>
</ul>
<p>and have the SCSI2SD set up correctly, it's <strong>time to actually start the installation</strong>! Booting from the CD-ROM brings up the NeXTstep bootloader, a language choice screen, and the installation main menu. Once I give my consent for beginning the installation, it goes through what looks like a pretty normal Unix boot.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/bootloader.png" alt="NeXTstep bootloader">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/bootloader.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>NeXTstep bootloader</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/language-choice.png" alt="language choice">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/language-choice.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>language choice</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/main-menu.png" alt="installer main menu">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/main-menu.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>installer main menu</p>
      </figcaption>
  </figure>
</div>


</div>

<p>Once the system is up, the installer shows which disk it thinks it should install to. If I accept that choice of target disk, the installer gives me one last change to opt-out before the point of no return.</p>
<p>As the main-menu warning indicates, <strong>the installer will entirely take over your hard disk</strong>. There are some notes online about it just being generally impossible to construct a disk with an HP-UX <em>and</em> NeXTstep partitions. I suspect that's why NeXTstep uses a bootloader, rather than passing kernel parameters from the firmware prompt like most of its contemporary workstations - the firmware isn't capable of reading deeply enough in to the disk.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/installer-unix-boot.png" alt="installer unix boot">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/installer-unix-boot.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>installer unix boot</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/disk-choice.png" alt="boot disk choice">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/disk-choice.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>boot disk choice</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/point-of-no-return.png" alt="point of no return">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/point-of-no-return.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>point of no return</p>
      </figcaption>
  </figure>
</div>


</div>

<p>First the disk needs to be “prepared” - I'm assuming that behind the scenes it's <strong>writing a partition table and formatting the disk</strong>. Then, files are copied from the CD-ROM. The formatting takes about 5 minutes; the copying takes about 12 minutes.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/formatting.png" alt="formatting the disk">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/formatting.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>formatting the disk</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/copying-files.png" alt="copying files">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/copying-files.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>copying files</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/copying-complete.png" alt="copying complete">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/copying-complete.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>copying complete</p>
      </figcaption>
  </figure>
</div>


</div>

<p>After the copying stage, it's time to reboot from the the hard disk for software installation. This time, <strong>it's not in text mode anymore</strong>! My HP 712 isn't currently connected to a network, so the networking part of the boot process complains. A quick “Control-C” nudges the process alaong.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/packages-boot.png" alt="booting from disk">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/packages-boot.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>booting from disk</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/packages-network-fail.png" alt="oh no! no ethernet!">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/packages-network-fail.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>oh no! no ethernet!</p>
      </figcaption>
  </figure>
</div>


</div>

<p>The first graphical step is to configure hardware. Since NeXT knows <em>exactly</em> which components are in this workstation (since it's a specific HP model, instead of an arbitrary PC), <strong>I can just proceed with the defaults</strong>. After configuration, I get to select software I want to install (on top of the base system). The options are:</p>
<ul>
<li>non-English <strong>language support</strong> (Swedish, Spanish, Italian, German, and French)</li>
<li><strong>documentation and on-line help</strong> (which sound an awful lot like they're the same thing)</li>
<li><strong>demo programs</strong>, the <strong>Webster English Dictionary</strong> program, and the dictionary's supporting images</li>
<li><strong>PPDs</strong> (Postscript Printer Descriptions) for various printers and imagesetters (for serious publishing)</li>
<li><strong>emacs and TeX</strong> (for serious nerdery)</li>
</ul>
<p>I'm going to install everything - the process takes about 35 minutes.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/packages-device-config.png" alt="device config">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/packages-device-config.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>device config</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/packages-choose-extras.png" alt="which software?">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/packages-choose-extras.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>which software?</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/packages-complete.png" alt="all done!">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/packages-complete.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>all done!</p>
      </figcaption>
  </figure>
</div>


</div>

<p>After a post-installation reboot, I get a chance to select which language to <em>use</em>. Folks who've installed Mac OS X may find this screen <a href="https://www.youtube.com/watch?v=H2uzNyiODsw">rather familiar</a>:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/keyboard-choice.png" alt="keyboard and language choice">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/keyboard-choice.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>keyboard and language choice</p>
      </figcaption>
  </figure>
</div>

<p>and that's it! <strong>I've successfully installed NeXTstep 3.3 on an HP PA-RISC workstation</strong> and I get my reward: the NeXTstep desktop.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/nextstep/first-desktop.png" alt="first boot - clean desktop">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/nextstep/first-desktop.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>first boot - clean desktop</p>
      </figcaption>
  </figure>
</div>

<h2 id="whats-the-next-step-see-what-i-did-there">What's the NeXT step? (SEE WHAT I DID THERE?!?!)</h2>
<p>This post is <strong>only the first part</strong> of my NeXTstep on PA-RISC project. I'm planning on there at least being a Part 2 on setting up networking and finding and installing useful software (like the developer tools!) and a Part 3 of reflections on the experience, its similarity to (and differences from!) the modern Mac OS. Further in the future, I'd love to do a Part 4 about developing a full application on NeXTstep.</p>
<p>This is the part where you come in - <strong>do you have any stories about using NeXTstep?</strong> I'd love for you to send them to me via email to <a href="mailto:sophie@pizzabox.computer">sophie@pizzabox.computer</a>! Also, please let me know if you'd be willing for me to include quotes from your stories in part 3 of this series (and how you'd like to be cited).</p>

</article><article>
  
  <time datetime="2018-12-02T16:45:00-0500">Sun, Dec 2, 2018</time>
  <p>In this post, I'm going to go through the process of setting up Apple's A/UX on a Quadra 610. It's been a <em>long</em> time in the making - I think I had the hardware for nearly a year before I finally got A/UX running properly!</p>
<h2 id="wait-what-is-aux">Wait, what is A/UX?</h2>
<p>I'm not misspelling <strong>AIX</strong>, the IBM Unix that ran on the Apple Network Server range. It <em>is</em> a hybrid of Unix and the classic Mac OS, but it <em>isn't</em> related to the <strong>Mac OS X</strong> we use today. A/UX is:</p>
<ul>
<li>an <strong>operating system sold by Apple</strong> for their Motorola 68000 computers (while Apple was developing a version 4.0 that ran on their PowerPC computers, it was never released)</li>
<li>built on <strong>Unix System V</strong></li>
<li>capable of running a <strong>Mac OS environment on top of the Unix base</strong></li>
</ul>
<p>You can log in to and use A/UX in a few modes. The main one is a Macintosh Finder interface that can run normal Mac programs <em>and</em> Unix programs - both console ones (in the “CommandShell” terminal emulator) and X11 ones (via “MacX”, a rootless X client).</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/session1.png" alt="Console">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/session1.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Console</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/session3.png" alt="32-bit Finder">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/session3.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>32-bit Finder</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/session4.png" alt="X11">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/session4.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>X11</p>
      </figcaption>
  </figure>
</div>


</div>

<p>The version of A/UX I'm installing here is the final one - 3.1. A/UX 3.1 is based on System 7.0.1 (for the Mac parts) and an amalgam of Unix System V R2.2 with some backported bits from System V R3, R4, and BSD (for the Unix parts).</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/uname.jpg" alt="the output of uname">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/uname.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>the output of uname</p>
      </figcaption>
  </figure>
</div>

<h2 id="the-machine">The machine</h2>
<p>While Apple made a few machines (in its Quadra line) that fit my definition of a pizzabox, they don't all run A/UX. An FPU is <strong>required</strong>, and there are only drivers for <em>some</em> models (<a href="https://support.apple.com/kb/TA31173?locale=en_US&amp;viewlocale=en_US">Apple's compatibility reference</a>).</p>
<ul>
<li>the <a href="http://blog.pizzabox.computer/pizzaboxes/quadra605">Quadra 605</a> shipped without an FPU (it uses a 68LC040 processor), and even if you replace the CPU with a full 68040, the video isn't supported</li>
<li>the <a href="http://blog.pizzabox.computer/pizzaboxes/quadra610">Quadra 610</a> shipped without an FPU, but if you replace the processor, it <em>can</em> work</li>
<li>the Quadra 660av <em>has</em> an FPU, but isn't compatible (I <em>believe</em> this is because of ROM differences?)</li>
</ul>
<p>So, a Quadra 610 it is, then!


</p><div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/logo.jpg" alt="Quadra 610 nameplate (a bit scuffed up)">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/logo.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>Quadra 610 nameplate (a bit scuffed up)</p>
      </figcaption>
  </figure>
</div>

<p>I am given to understand that Apple sold <em>some</em> Quadra 610s with the full 68040, but mine wasn't, so I had to hunt down a <strong>replacement CPU.</strong> Apple didn't use ZIF sockets for their CPUs, so I just had to pry out the old one:</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/old-cpu.jpg" alt="old CPU">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/old-cpu.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>old CPU</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/both-cpu.jpg" alt="old and new CPUs, side-by-side">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/both-cpu.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>old and new CPUs, side-by-side</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/new-cpu.jpg" alt="installing the new CPU">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/new-cpu.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>installing the new CPU</p>
      </figcaption>
  </figure>
</div>


</div>

<p>These older designs <strong>didn't produce enough heat to need a heat sink</strong>. Imagine running a modern higher-end computer (like an Intel Core i7) without any special cooling hardware!</p>
<p>After replacement, I verified that the machine would still boot to the installed System 7 (it did!) and started prepping to install A/UX.</p>
<h2 id="installation-woes">Installation woes</h2>
<p>I had hoped that with the CPU in order, I was in for smooth sailing. I procured an install CD, made a boot floppy, booted in to the installer, partitioned my disk, and…realized that the built-in 80 MB hard drive was <strong>far too small to realistically run A/UX</strong>. Some guides suggest that it is theoretically possible to do a stripped-down setup under such tight constraints, but I wanted to explore all that A/UX has to offer, not the lowest common denominator.</p>
<p>When I need to replace a broken, missing, or “inadequate” hard drive, <strong>the tool I reach for is the trusty <a href="http://www.codesrc.com/mediawiki/index.php/SCSI2SD">SCSI2SD</a></strong>. I started with the normal “out of the box” config, restarted the install process, went to partition the disk, and…the Apple HD SC Setup tool refused to deal with a drive whose model it doesn't recognize. Drat.</p>
<p>There are <a href="http://lowendmac.com/2007/format-any-hard-drive-for-older-macs-with-patched-apple-tools/">patched versions</a> of HD SC Setup that allow it to format any drive, but having partitioned the Quadra 610's internal drive, wiping its former System 7 install, I no longer had a useful Mac test-bench. I decided to try <strong>preparing an A/UX partition layout from Linux</strong>, writing it directly to the SD card I'd use in the SCSI2SD. This…wasn't a very good idea. I may have misused the tools, but trying to boot with the hacked-up drive <em>connected</em> caused the Quadra to boot to a “Sad Mac” screen (I believe because it had an <em>almost</em>, but not totally valid partition table on the normal boot drive).</p>
<p>At the time, I didn't think that bad <em>data</em> on a drive could cause a “Sad Mac” error, so I dove in to a bunch of fruitless fixes, including trying various termination settings (at one point, I believe I installed the termination resistors backwards, which…probably didn't help). I tried to use third-party formatting tools from my Quadra 605, but it <em>also</em> wouldn't boot with the SCSI2SD connected. I ordered internal active terminators, I tried different SCSI ID layouts, nothing seemed to work.</p>
<h2 id="installation-successes">Installation successes</h2>
<p>Over the course of a couple of months, I tried several times to get the install rolling (often trying the same things that hadn't worked before, in the hope that something had “magically” changed). What finally worked was (some combination of):</p>
<ul>
<li>starting from a <em>blank</em> SD card, instead of one with my failed attempt to pre-create a partition table - I “cleared” my SD card by <code>dd</code>-ing <code>/dev/zero</code> to the first few MB of the card.</li>
<li>not having the terminator resistor pack in backwards</li>
</ul>
<p>got the drive to not cause a “Sad Mac” error on boot. Partitioning it was also pretty easy - it turns out that if you <strong>set the manufacturer and model strings to magical values</strong> in the SCSI2SD Utility, the stock HD SC Setup will be OK with formatting it. My config ended up being:</p>
<div><pre><code data-lang="xml"><span>&lt;SCSITarget</span> <span>id=</span><span>"0"</span><span>&gt;</span>
	<span>&lt;enabled</span><span>&gt;</span>true<span>&lt;/enabled&gt;</span>
	<span>&lt;quirks</span><span>&gt;</span>apple<span>&lt;/quirks&gt;</span>
	<span>&lt;deviceType</span><span>&gt;</span>0x0<span>&lt;/deviceType&gt;</span>
	<span>&lt;deviceTypeModifier</span><span>&gt;</span>0x0<span>&lt;/deviceTypeModifier&gt;</span>

    <span>&lt;!--</span><span> The size has to be less than 2GB total 
</span><span>         for A/UX to boot from it </span><span>--&gt;</span>
	<span>&lt;sdSectorStart</span><span>&gt;</span>0<span>&lt;/sdSectorStart&gt;</span>
	<span>&lt;scsiSectors</span><span>&gt;</span>3984589<span>&lt;/scsiSectors&gt;</span>
	<span>&lt;bytesPerSector</span><span>&gt;</span>512<span>&lt;/bytesPerSector&gt;</span>
	<span>&lt;sectorsPerTrack</span><span>&gt;</span>63<span>&lt;/sectorsPerTrack&gt;</span>
	<span>&lt;headsPerCylinder</span><span>&gt;</span>255<span>&lt;/headsPerCylinder&gt;</span>

    <span>&lt;!--</span><span> These are the magical settings: </span><span>--&gt;</span>
	<span>&lt;vendor</span><span>&gt;</span> SEAGATE<span>&lt;/vendor&gt;</span>
	<span>&lt;prodId</span><span>&gt;</span>          ST225N<span>&lt;/prodId&gt;</span>
	<span>&lt;revision</span><span>&gt;</span>1.0 <span>&lt;/revision&gt;</span>
	<span>&lt;serial</span><span>&gt;</span>1234567812345678<span>&lt;/serial&gt;</span>

	<span>&lt;modePages</span><span>&gt;</span>
	<span>&lt;/modePages&gt;</span>
	<span>&lt;vpd</span><span>&gt;</span>
	<span>&lt;/vpd&gt;</span>
<span>&lt;/SCSITarget&gt;</span></code></pre></div>
<p>For the installation process itself, I basically followed the instructions from <a href="http://www.aux-penelope.com/aux_3.0.htm">A/UX Penelope</a> pretty closely. I wont repeat their instructions, but here's some screenshots of my experience:</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install1.png" alt="starting the installation">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install1.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>starting the installation</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install2.png" alt="choosing what software to install">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install2.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>choosing what software to install</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install3.png" alt="Apple HD SC Setup">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install3.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Apple HD SC Setup</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install4.png" alt="Installing files">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install4.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Installing files</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install5.png" alt="Installation complete">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install5.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Installation complete</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install6.png" alt="First boot - needs the Enabler">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install6.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>First boot - needs the Enabler</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install7.png" alt="Installing the Enabler">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install7.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Installing the Enabler</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install8.png" alt="First boot - seems to be working">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install8.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>First boot - seems to be working</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install9.png" alt="Kernel has been reconfigured">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install9.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Kernel has been reconfigured</p>
      </figcaption>
  </figure>
</div>


</div>

<p>Some notes from my experience:</p>
<ul>
<li>on the Quadra 610, A/UX wont boot after install until you boot from another disk and <strong>install the “System Enabler 040”</strong> (<a href="https://support.apple.com/kb/TA28948">https://support.apple.com/kb/TA28948</a>) by dragging it in to the “MacPartition” System Folder</li>
<li>formatting the hard drive <strong>takes a long time</strong> - more than an hour for my ~1.9 GB disk!</li>
<li>some sort of SCSI error appeared on screen, but didn't seem to actually impact the process. The error references <code>/dev/dsk/c104d0s6</code>, even though my actual disk is <code>c0d0s0</code>:</li>
</ul>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/scsi-error.png" alt="the SCSI error during install">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/scsi-error.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>the SCSI error during install</p>
      </figcaption>
  </figure>
</div>

<h2 id="impressions-of-aux">Impressions of A/UX</h2>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/macx.png" alt="An A/UX desktop">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/macx.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>An A/UX desktop</p>
      </figcaption>
  </figure>
</div>

<p>There doesn't seem to be a ton of “special” configuration or tools on the Unix side - the Mac Control Panel only does things that apply to Mac programs, and the Unix parts can only really be configured by using unix utilities / config files. My understanding is that Apple marketed A/UX as <strong>a way to run your existing Unix software along side Mac productivity apps</strong> - it doesn't seem like there was any focus on unique A/UX-only possibilities.</p>
<p>One exception to this was “Commando” - <strong>a Mac UI for launching Unix commandline tools</strong>. Commando allows you to choose options and input files using a dialog box (instead of memorizing options). Commando was also part of Apple's IDE for developing Mac apps, the Macintosh Programmers Workshop (some docs are <a href="http://mirror.informatimago.com/next/developer.apple.com/tools/mpw-tools/commandref/commando.html">here</a>). I like how Commando dialogs serve as interactive documentation - I'm not sure I'd use them every day (vs the commandline), but it's much nicer than manpages for exploring options.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/commando.png" alt="commando dialog for mount(1)">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/commando.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>commando dialog for mount(1)</p>
      </figcaption>
  </figure>
</div>

<p>Booting A/UX is a little bit unusual - it first boots in to a normal System 7, then runs a program that switches control over to A/UX (which completely replaces the original Mac OS in memory). It reminds me a little bit of <a href="https://www.tldp.org/HOWTO/Linux+Win95/linload.html">LINLOAD</a>, a tool that let you start Linux from MS-DOS. <strong>Other pizzaboxes don't seem to have anything comparable</strong> about their booting process:</p>
<ul>
<li>first, because they are (mostly) running their native OSes rather than an alternate one</li>
<li>second, because they largely have robust ROM Monitors</li>
</ul>
<p>The original Mac ROM was strictly tuned towards the Mac OS - it included Toolbox routines, for example. It seems like Apple more or less just kept going with a ROM similar to the original Macintosh until they moved to the <a href="https://en.wikipedia.org/wiki/Open_Firmware">OpenFirmware monitor</a> on PowerPC macs.</p>
<h2 id="what-might-have-been">What might have been</h2>
<p>It's impossible to use A/UX without thinking about its potential. Apple managed to release an OS that was nearly as usable as the Mac OS, but had the advantages of Unix! I'm curious how viable a version of A/UX that doesn't have any Unix tools, just runs Mac programs in isolated Unix memory spaces and with pre-emptive multitasking, would have been. I'm not sure if the Mac programs each ran in an isolated fashion or if they all were grouped together. Throughout the 1990s, Apple experimented with a bunch of paths to “modernize” the Mac OS: Pink/Taligent, Copeland, adopting BeOS, and the eventual plan of merging the Mac OS with OpenSTEP. Would the computing world be different if they had run with a consumer OS based on A/UX?</p>
<h2 id="from-here">From here</h2>
<p>As always, if you have any stories about using A/UX, a Quadra 610, or any other pizzaboxes, I'd love to hear them! You can reach me via email at <a href="mailto:sophie@pizzabox.computer">sophie@pizzabox.computer</a>. I intend to one day work on writing some software on A/UX to have a deeper understanding of the experience. I'd also love to do some benchmarking of using A/UX as an AppleShare server vs a more standard System 7 install on the same hardware - I believe this was one of the most popular uses of A/UX.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/quadra610/install10.png" alt="You may now switch off your Macintosh safely">
    </p>
    <a href="http://blog.pizzabox.computer/img/quadra610/install10.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>You may now switch off your Macintosh safely</p>
      </figcaption>
  </figure>
</div>

<p>I want to thank my friend Cameron who helped me with this project - we experimented with various ways to get the install going over the course of months, and I wouldn't have been able to get things working without them!</p>

</article><article>
  
  <time datetime="2018-07-07T14:00:00-0400">Sat, Jul 7, 2018</time>
  <p>I haven't been writing super frequently over the past few months, so I've missed introducing a couple of the newest additions to my collection. They're all from manufacturers that I already have <em>some</em> boxes from, but represent different eras and technology than the boxes I already had.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/stack1.jpeg" alt="a stack of pizzabox workstations">
    </p>
    <a href="http://blog.pizzabox.computer/img/stack1.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>a stack of pizzabox workstations</p>
      </figcaption>
  </figure>
</div>

<h2 id="a-couple-of-sparcs">A couple of SPARCs</h2>
<p>The middle two pizzaboxes in the picture are SPARC boxes from Sun. The more elderly one is the <strong>SPARCstation 20</strong>. The 20 is the most high-end 32-bit workstation Sun ever made - its successors were the 64-bit “Ultra” series. Unlike the single-digit SPARCstations (1, 2, 4, 5), the double-digit SPARCstations (10, 20) have swappable processor <em>cards</em> (called “MBus” cards) and support multiple processors. Mine has two 60MHz SuperSPARC processors! This one came to me from someone cleaning up old gear on the <a href="http://www.classiccmp.org/lists.html">ClassicCmp</a> mailing list. A kind soul who lived nearby picked up all the gear, cobbled together a few broken SS20s in to a working one, and sent it to me!</p>
<p>The other one is a <strong>SunBlade 150</strong>. It's a bit of a stretch of my <a href="http://blog.pizzabox.computer/posts/what-is-a-workstation/">definition</a> of a “pizzabox” - it's 118mm tall, 18mm more than my arbitrary threshold. I bent the rules because (if we allow for larger boxes) this is the <em>last</em> Sun pizzabox ever made. It certainly sold more units than the only newer pizzabox model I'm aware of, the HP AlphaStation DS15 (the SunBlade was introduced in <a href="https://www.theregister.co.uk/2002/08/20/sun_aims_new_150_workstation/">late 2002</a>, the AlphaStation in <a href="http://www.hp.com/hpinfo/newsroom/press/2003/031020a.html">late 2003</a>). Where most of my pizzaboxes have SCSI hard disks, proprietary expansion slots, custom peripheral buses, and advanced framebuffers, the SunBlade 150 uses IDE, PCI, USB, and an ATI Rage XL - it's practically a contemporary PC with a SPARC processor!</p>
<h2 id="_another_-dec-architecture"><em>Another</em> DEC architecture</h2>
<p>The <strong>DECstation 5000 / 200</strong> was a heck of a find - when I saw it listed on eBay along with its original external SCSI enclosure, a DEC keyboard and mouse, some drives, and lots of cables, I had to snap it up before anyone else did! There seems to be not that many of these left - it's a generation of workstations that even DEC soon abandoned. As DECs competitors were all working on their own RISC processors, DEC hedged their bet on the CISC VAX architecture by building the DECstation series of MIPS-based computers. They typically ran Ultrix, the same Unix that DEC sold for VAXen. A few years later, DEC introduced their own RISC architecture, the Alpha, and a new Unix (OSF/1).</p>
<h2 id="motorola-powered-hp-9000">Motorola-powered HP 9000</h2>
<p>The final box in this crop is the <strong>HP 9000 Model 425e</strong> - one of their final m68k-powered boxes (sold concurrently with the introduction of PA-RISC). I'm excited to be able to compare it with the Model 712. Many manufacturers switched from m68k to some sort of RISC architecture in the late 1980s/early 1990s, but the m68k boxes are often hard to find. If I get a chance, I'd love to write an app on the 425e and then port it to the 712 - I have some “porting guide” documentation lying around!</p>

</article><article>
  
  <time datetime="2018-07-04T15:00:00-0400">Wed, Jul 4, 2018</time>
  <p>Over the past few weekends I've gone on a bit of an adventure with the SGI Indy. <strong>This yak-shave has everything</strong> - an OS install, lots of SCSI problems, a <em>completely overkill</em> golang utility, and a happy ending. Since it's pretty long, I'm gonna dive right in.</p>
<h2 id="a-disk-upgrade">A disk upgrade</h2>
<p>It all started with a drive replacement - I got an order of SCS2SDs in and decided that I should <strong>allocate the faster SCSI2SDv6 I'd been saving to the Indy</strong>. At 100 MHz it's one of the fastest pizzaboxes in my collection, so I think it'll be better able to use the increased IO bandwidth the v6 can provide - <a href="http://www.codesrc.com/mediawiki/index.php/SCSI2SD#Technical_Specifications">supposedly</a> up to 10MB/s vs 2.6 MB/s for the v5.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/indy/scsi2sd.jpg">
    </p>
    <a href="http://blog.pizzabox.computer/img/indy/scsi2sd.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<p>Installing the new drive took a few steps. First, the firmware my v6 had loaded on it seemed to have some odd bugs - <strong>the Indy wouldn't POST with it connected</strong>! I tried a lot of variations of settings and what ended up working was…updating the firmware of the drive.</p>
<p>Out of the box, the SCSI2SD acts as a hard drive on SCSI ID 0 - a reasonable configuration for most systems. Unfortunately, SGI <a href="http://ibgwww.colorado.edu/~lessem/psyc5112/usail/peripherals/remove/sgi.html">assigns</a> ID 0 to the <em>controller</em> (<a href="https://en.wikipedia.org/wiki/SCSI#Parallel_interface_2">most systems</a> assign the controller ID 7). When the SCSI2SD is set to 0, the Indy believes that <em>all</em> SCSI IDs are pointing to the SCSI2SD, and basically nothing works. When I set it to ID 1, I was able to <a href="https://software.majix.org/irix/install-fx.shtml">format it with fx</a> and move on to the install.</p>
<h2 id="scsi-gremlins-ruin-an-evening">SCSI gremlins ruin an evening</h2>
<p>A disk replacement is a natural opportunity to install a fresh OS. The previous OS had been loaded via <a href="http://blog.pizzabox.computer/posts/getting-an-indy-desktop/#netbooting-a-new-tool">netboot</a> and controlled via a serial console - I had neither a CD-ROM drive nor a suitable keyboard and mouse at the time, so this would be my first graphical install. I also took this opportunity to <strong>downgrade from IRIX 6.5 to 5.3</strong> - while 6.5 ran OK, my Indy only has 64 MB of RAM and I've seen recommendations to use older versions of IRIX for best performance on lower-spec Indys.</p>
<p>With IRIX 5.3 burned to a CD, the hard drive formatted, and (so I thought) all the SCSI problems behind me, I booted in to the installer and watched expectantly.</p>
<twitter-widget id="twitter-widget-0" data-tweet-id="1007411791306117121"></twitter-widget>


<p>After I'd start the install, I kept hitting a bus timeout, and it seemed to never recover. I tried swapping terminators, turning on and off termination on the internal drive, setting the “parity” jumper on the CD-ROM, reseating all the cabling, and <strong>nothing could keep it stable enough to complete a full install</strong>.</p>
<twitter-widget id="twitter-widget-1" data-tweet-id="1007423991777234945"></twitter-widget>


<p>Eventually I gave up and went with plan b: <strong>the SCSI2SD can emulate multiple drives</strong>. It's a little bit annoying to set up - you can easily set the second, etc, drive to be a CD-ROM but loading the ISO on to it requires <code>dd</code>-ing the ISO to the appropriate offset after your primary disk.</p>
<pre><code>&gt; dd if=C:\Users\haski\Downloads\IRIX_5.3.iso seek=16567501 of="\\.\Volume{a03b15f0-0f8b-11e8-9c75-00155d4b013b}" --progress
</code></pre><p>I try to avoid using this feature because “<code>dd</code>-ing over your hard disk” sounds like an even worse way to spend an evening than “using a single-speed CD-ROM drive”, but if you're careful, it works:</p>
<twitter-widget id="twitter-widget-2" data-tweet-id="1007462825529348096"></twitter-widget>


<h2 id="motivating-a-yak-shave">Motivating a yak shave</h2>
<p>With SCSI problems behind me, the OS install finished smoothly and my Indy was running IRIX 5.3 like a champ. The base OS is pretty spartan - it includes a basic compiler but almost no tools for development. Thankfully, I had another “ISO” (just a raw dump from a CD, but not in ISO9660 format - it's in “EFS” format) labeled “IRIS Development Option 5.3” - sounds like just what I need! I had a <strong>few options to load the software</strong>:</p>
<ul>
<li><strong>burn it to a CD</strong> and hope that the Indy and my SCSI CD-ROM can be friends long enough to install some software (unlikely)</li>
<li>load the image in to the <strong>SCSI2SD's fake CD drive</strong> (tedious and requires opening the Indy's case back up - ugh)</li>
<li>put the ISO file on my NAS and have the Indy <strong>mount it as a <a href="https://en.wikipedia.org/wiki/Loop_device">loopback device</a></strong> (unfortunately, not possible on IRIX)</li>
<li>get <strong>another computer running that can read the image</strong> and copy the files to my NAS where the Indy can just read them directly
<ul>
<li>while the <strong>Linux kernel does have <a href="https://github.com/torvalds/linux/tree/master/fs/efs">efs support</a></strong>, it's neither compiled in to the Ubuntu base nor can I find a package that includes the module. Its 2018 and apparently I refuse to compile my own kernel modules anymore.</li>
<li><strong>the BSDs <a href="http://cvsweb.netbsd.org/bsdweb.cgi/src/sys/fs/efs/?only_with_tag=MAIN">have support</a></strong> but I didn't want to go through the hassle of setting up a VM or whatever and shuffling all the files around.</li>
</ul>
</li>
</ul>
<p>This left one final option: <strong>write a program to convert the image in to something more portable</strong> (like a tarball) that I could unpack on my NAS and make available to the Indy. <strong>Is this <em>reasonable</em>? Absolutely not.</strong> But it sounded like a hell of a fun project!</p>
<h2 id="following-along">Following along</h2>
<p>The code I'm referencing in this section lives at <a href="https://github.com/sophaskins/efs2tar">https://github.com/sophaskins/efs2tar</a> - please take a look at how it all fits together! I'm running it against an image of “IRIS Development Option 5.3”, but I suspect it'll work similarly for other images too - the <a href="https://archive.org/search.php?query=sgi&amp;and%5B%5D=mediatype%3A%22software%22&amp;page=2">Internet Archive</a> has many available.</p>
<p>I use my golang struct definitions to illustrate what the on-disk format looks like - other implementations may name the struct members, etc, differently. Also note that <strong>EFS is big-endian</strong>, so the implementation needs to reference that at all the places where we <em>parse</em> bytes.</p>

<p>My goal was simple: <strong>efs disk image in, tarball out</strong>. I made a blank golang project, opened up the NetBSD source for a guide, and started reading raw bytes.</p>
<p>Since the sources <a href="https://github.com/NetBSD/src/blob/4b6bcd63f3d324191969bdbe86c815937969e874/sys/fs/efs/efs.h#L119">helpfully point out</a> that the superblock lives in the first (zero-indexed) 512-byte block, I wrote up some code to unpack those bytes:</p>
<div><pre><code data-lang="golang"><span>// cmd/where-is-the-superblock/main.go
</span><span></span><span>package</span> <span>main</span>

<span>import</span> (
	<span>"os"</span>

	<span>"github.com/davecgh/go-spew/spew"</span>
)

<span>func</span> <span>main</span>() {
	<span>file</span>, <span>_</span> <span>:=</span> <span>os</span>.<span>Open</span>(<span>"./input.iso"</span>)
	<span>b</span> <span>:=</span> make([]<span>byte</span>, <span>1024</span>)
	<span>file</span>.<span>Read</span>(<span>b</span>)
	<span>spew</span>.<span>Dump</span>(<span>b</span>[<span>512</span>:<span>1024</span>])
}</code></pre></div>
<p>and got…nothing but zeros</p>
<pre><code>&gt; go run .\cmd\where-is-the-superblock\main.go
([]uint8) (len=512 cap=512) {
 00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000080  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000090  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000000f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000100  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000110  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000120  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000130  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000140  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000150  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000160  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000170  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000180  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 00000190  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
}
</code></pre><p>What the heck? The NetBSD sources also claim that block 0 is unused, but if we look at <em>those</em>, there's definitely some non-zero bytes. The first 8 bytes are:</p>
<pre><code>0b e5 a9 41 00 00 00 00
</code></pre><p>Filesystems (like many formats) often use <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)">“magic numbers”</a> - an arbitrary bunch of bytes that occur at a known location so they can be quickly identified by type. Maybe this string is a magic number? I grepped for <code>be5a941</code> in the NetBSD codebase and got a hit in <a href="https://github.com/NetBSD/src/blob/0bff031265b50be8e8b7719aed82212928d6c1df/sys/sys/bootblock.h#L1292"><code>sys/sys/bootblock.h</code></a> - <strong>it is indeed a magic number</strong>, <code>SGI_BOOT_BLOCK_MAGIC</code>. That <a href="https://github.com/NetBSD/src/blob/0bff031265b50be8e8b7719aed82212928d6c1df/sys/sys/bootblock.h#L1280-L1367">section</a> of the file defines the layout of the <em>boot block</em> of SGI partitions. A deeper dive in to that code and the <a href="http://nixdoc.net/man-pages/IRIX/man7/vh.7.html">IRIX manpage</a> for <code>vh</code> (volume header) explain what's going on.</p>
<p>It turns out, these “ISO” files aren't just raw EFS filesystems, they're SGI-formatted <em>volumes</em> with an EFS <em>partition</em> on them. There's a whole volume header that has the partition table and some additional info:</p>
<div><pre><code data-lang="golang"><span>// from sgi/vh.go
</span><span></span><span>type</span> <span>VolumeHeader</span> <span>struct</span> {
	<span>MagicNumber</span>      <span>uint32</span>
	<span>Root</span>             <span>int16</span>
	<span>Swap</span>             <span>int16</span>
	<span>Bootfile</span>         [<span>16</span>]<span>byte</span>
	<span>BootDeviceParams</span> <span>DeviceParameters</span>
	<span>VolumeDirectory</span>  [<span>15</span>]<span>FileHeader</span>
	<span>Partitions</span>       [<span>16</span>]<span>Partition</span>
	<span>Checksum</span>         <span>int32</span>
	<span>Padding</span>          <span>int32</span>
}</code></pre></div>
<p>The <code>VolumeDirectory</code> field is pretty neat - its an array of pointers to <strong>files that exist outside of any filesystem</strong>, directly in the volume header. Its apparently usually used for the bootloader and the SGI partitioning program, <code>fx</code> (this is apparently why partitioning happens outside of the OS install process).</p>
<p>The <code>Partitions</code> field contains what block offset each partition starts at, how long it is, and its filesystem type. It was a surprise to me that the partitions can (and do!) overlap! Apparently it's typical for one of the partitions to represent the whole disk, another this header section, and another for the actual partition (the partitioning SunOS uses also has overlaps like this). The EFS partition for my image was number 7.</p>
<h2 id="crawling-inodes">Crawling inodes</h2>
<p>Starting at the offset of the partition, I found the expected data in the Superblock (including the correct <em>filesystem</em> magic number, a plausible filesystem size, etc):</p>
<div><pre><code data-lang="golang"><span>// from efs/filesystem.go
</span><span></span><span>type</span> <span>SuperBlock</span> <span>struct</span> {
	<span>Size</span>         <span>int32</span>    <span>// filesystem size (in BasicBlocks)
</span><span></span>	<span>FirstCG</span>      <span>int32</span>    <span>// BasicBlock offset of the first CG 
</span><span></span>	<span>CGSize</span>       <span>int32</span>    <span>// CylinderGroup size (in BasicBlocks)
</span><span></span>	<span>CGInodeSize</span>  <span>int16</span>    <span>// Number of BBs per CG that are Inodes
</span><span></span>	<span>Sectors</span>      <span>int16</span>    <span>// sectors per track
</span><span></span>	<span>Heads</span>        <span>int16</span>    <span>// heads per cylinder
</span><span></span>	<span>CGCount</span>      <span>int16</span>    <span>// CylinderGroups in the filesystem
</span><span></span>	<span>Dirty</span>        <span>int16</span>    <span>// whether an fsck is required
</span><span></span>	<span>_</span>            <span>int16</span>    <span>// padding
</span><span></span>	<span>CTime</span>        <span>int32</span>    <span>// last SuperBlock updated time
</span><span></span>	<span>Magic</span>        <span>int32</span>    <span>// filesystem magic number
</span><span></span>	<span>FSName</span>       [<span>6</span>]<span>byte</span>  <span>// name of the filesystem
</span><span></span>	<span>FSPack</span>       [<span>6</span>]<span>byte</span>  <span>// fs "pack" name
</span><span></span>	<span>BMSize</span>       <span>int32</span>    <span>// size in bytes of bitmap
</span><span></span>	<span>FreeBlocks</span>   <span>int32</span>    <span>// count of free blocks
</span><span></span>	<span>FreeInodes</span>   <span>int32</span>    <span>// count of free inodes
</span><span></span>	<span>BMBlock</span>      <span>int32</span>    <span>// offset of the bitmap
</span><span></span>	<span>ReplicatedSB</span> <span>int32</span>    <span>// offset of the replicated superblock
</span><span></span>	<span>LastInode</span>    <span>int32</span>    <span>// last unallocated inode
</span><span></span>	<span>_</span>            [<span>20</span>]<span>int8</span> <span>// padding
</span><span></span>	<span>Checksum</span>     <span>int32</span>
}</code></pre></div>
<p>Most of this data is irrelevant to my purposes - since I'm not adding <em>new</em> data, I don't really care about the bitmap, where the next free inode is, etc. The offset of the first CylinderGroup <em>is</em> important, though. The <strong>filesystem is divided in to “cylinder groups”</strong> - contiguous groups of blocks where the first <code>CGInodeSize</code> blocks of the cylinder group contain inodes, and the rest is data. The <a href="https://github.com/NetBSD/src/blob/4b6bcd63f3d324191969bdbe86c815937969e874/sys/fs/efs/efs_dinode.h#L28-L31">NetBSD sources</a> note that the root inode is at <em>inode</em> index 2, so probably at index 2 in the inode portion of the first cylinder group.</p>
<p>Each inode includes a bunch of data about the object it represents:</p>
<div><pre><code data-lang="golang"><span>// from efs/inode.go
</span><span></span><span>type</span> <span>Inode</span> <span>struct</span> {
	<span>Mode</span>       <span>uint16</span>
	<span>NumLinks</span>   <span>int16</span>
	<span>UID</span>        <span>uint16</span>
	<span>GID</span>        <span>uint16</span>
	<span>Size</span>       <span>int32</span>
	<span>ATime</span>      <span>uint32</span>
	<span>MTime</span>      <span>uint32</span>
	<span>CTime</span>      <span>uint32</span>
	<span>Generation</span> <span>int32</span>
	<span>NumExtents</span> <span>int16</span>
	<span>Version</span>    <span>uint8</span>
	<span>Spare</span>      <span>uint8</span>
	<span>// Payload is a union struct - sometimes it contains extents, but
</span><span></span>	<span>// it also can contain other stuff (like link targets and device
</span><span></span>	<span>// descriptors, which are not implemented here)
</span><span></span>	<span>Payload</span> [<span>96</span>]<span>byte</span>
}</code></pre></div>
<p>If we write up a quick program to dump this data, it looks something like:</p>
<pre><code>&gt; go run .\cmd\rootinode\main.go
(efs.Inode) {
 Mode: (uint16) 16895,
 NumLinks: (int16) 5,
 UID: (uint16) 0,
 GID: (uint16) 0,
 Size: (int32) 512,
 ATime: (uint32) 784844972,
 MTime: (uint32) 784844972,
 CTime: (uint32) 784844972,
 Generation: (int32) 784844868,
 NumExtents: (int16) 1,
 Version: (uint8) 0,
 Spare: (uint8) 0,
 Payload: ([96]uint8) (len=96 cap=96) {
  00000000  00 00 00 e0 01 00 00 00  00 00 00 00 00 00 00 00
  00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
  00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
  00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
  00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
  00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
 }
}
</code></pre><p>This is really promising - those timestamps (<code>784844972</code>) are in 1994 (<code>1994-11-14T20:29:32+00:00</code>) which seems appropriate given that the disk image I'm working on is “the developer tools that came with IRIX 5.3”. The <code>Mode</code> field indicates that this inode represents a directory - seems reasonable, given that I'd expect the root inode to be <code>/</code>.</p>
<p>To find out what's in the directory listing, we need to unpack the <code>Payload</code> field. In this context, it contains <strong>extents - an array of the block ranges that make up the body</strong>. This approach to allocating blocks to files gave the filesystem its name, EFS (the Extent File System). Reading extents is somewhat more complicated than just parsing that Payload field, but we'll get to that later. The extents stored in the root inode look like:</p>
<pre><code>&gt; go run .\cmd\root-inode-extents\main.go
([]efs.Extent) (len=1 cap=1) {
 (efs.Extent) {
  Magic: (uint8) 0,               // side note, yes - the magic number
  StartBlock: (uint32) 224,       // for extents is...zero. Not
  Length: (uint8) 1,              // exactly unique, heh.
  NumIndirectExtents: (uint32) 0
 }
}
</code></pre><p>which seems plausible for the root directory listing - it's short (only one block long), and early in the disk (block 224). Fetching that block is pretty easy, and if you dump it it <em>does</em> appear to have some filenames on it, but reading its format correctly takes a little care. The format of a data block belonging to a directory listing is:</p>
<div><pre><code data-lang="golang"><span>// from efs/directory.go
</span><span></span><span>type</span> <span>Directory</span> <span>struct</span> {
	<span>Magic</span>     <span>uint16</span>
	<span>FirstUsed</span> <span>uint8</span>
	<span>Slots</span>     <span>uint8</span>
	<span>Data</span>      [<span>508</span>]<span>byte</span>
}</code></pre></div>
<p>At the “bottom” of <code>Data</code> (the low indexes) there are some pointers (<code>Slots</code> many of them) to directory entry offsets (offsets from the base of the struct). The entries live at the “top” of <code>Data</code> (the high indexes) and are of variable lenth (because they include filename strings!), so are made up of:</p>
<ul>
<li>the index of inode for the entry</li>
<li>how many bytes its name is</li>
<li>the name</li>
</ul>
<p>It's a somewhat wacky scheme - why isn't it just a list of entries starting at <code>Data[0]</code>? This indirect approach allows adding and removing entries without having to rewrite the entire block, which…I guess is nice if you're dealing with late 1980s / early 1990s disk performance (SGI replaced EFS with XFS for hard disks around 1993, but kept using EFS for CD-ROMs). At any rate, if we follow it, we can read the entries at the root inode, which look pretty rad to me:</p>
<pre><code>&gt; go run .\cmd\root-inode-entries.go
([]efs.DirectoryEntry) (len=8 cap=8) {
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 2,
  Name: (string) (len=1) "."
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 2,
  Name: (string) (len=2) ".."
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 3,
  Name: (string) (len=11) "CDgrelnotes"
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 4,
  Name: (string) (len=10) "CDrelnotes"
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 5,
  Name: (string) (len=4) "dist"
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 90,
  Name: (string) (len=7) "insight"
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 1525,
  Name: (string) (len=8) "relnotes"
 },
 (efs.DirectoryEntry) {
  InodeIndex: (uint32) 1614,
  Name: (string) (len=12) "RELEASE.info"
 }
}
</code></pre><p>This seems <em>extremely</em> plausible to me as the root of the CD-ROM. The <code>.</code> and <code>..</code> entries even point (correctly) to the same inode (number 2) as the one we're displaying! The system works! From here, it wasn't too implausible to walk the whole filesystem and output filenames. Since it's a tree, we start at the root inode, visit each entry, and if it's a <em>directory</em>, recursively walk starting there. <strong>We have a complete list of all files</strong></p>
<h2 id="file-contents">File contents</h2>
<p>For the inode of a “regular” file, the extents just point to where the body of the file is. You can literally concatenate the bytes from the extent blocks and get the file, at least for <em>unfragmented</em> files.</p>
<p>An inode's <code>Payload</code> field can fit up to 12 extents - each extent is 8 bytes, and the <code>Payload</code> field is 96 bytes. If a file is made up of <em>more</em> than 12 discontinuous ranges of blocks, its extent descriptors wont fit inside the inode. In this case, EFS switches from “direct” extents (the inode data contains the extents) to “indirect” extents (the extents in the inode point to blocks that contain <em>nothing but extents</em>, which are the actual extents of the file). This took me a few tries to implement correctly, but ends up being a fairly simple algorithm:</p>
<div><pre><code data-lang="golang"><span>// from efs/filesystem.go
</span><span></span><span>func</span> (<span>fs</span> <span>*</span><span>Filesystem</span>) <span>extents</span>(<span>in</span> <span>Inode</span>) []<span>Extent</span> {
	<span>payloadExtents</span> <span>:=</span> <span>in</span>.<span>PayloadExtents</span>()
	<span>if</span> <span>in</span>.<span>usesDirectExtents</span>() {
		<span>// if all of the extents fit inside of Payload (aka "direct")
</span><span></span>		<span>// we have a much simpler time reading the extents
</span><span></span>		<span>return</span> <span>payloadExtents</span>
	}

	<span>// if we have more than will fit in Payload, then the extents
</span><span></span>	<span>// in Payload (aka "indirect extents") point to ranges that
</span><span></span>	<span>// themselves contain the actual extents.
</span><span></span>	<span>extents</span> <span>:=</span> make([]<span>Extent</span>, <span>in</span>.<span>NumExtents</span>)
	<span>extentsFetched</span> <span>:=</span> <span>0</span>
	<span>for</span> <span>_</span>, <span>indirectExtent</span> <span>:=</span> <span>range</span> <span>payloadExtents</span> {
		<span>for</span> <span>_</span>, <span>extentBB</span> <span>:=</span> <span>range</span> <span>fs</span>.<span>ExtentToBlocks</span>(<span>indirectExtent</span>) {
			<span>// copy respecting the length of extents saves us from
</span><span></span>			<span>// accidentally including the garbage extents at the end
</span><span></span>			<span>// of the last block (beyond NumExtents)
</span><span></span>			copy(<span>extents</span>[<span>extentsFetched</span>:], <span>extentBB</span>.<span>ToExtents</span>())
			<span>extentsFetched</span> <span>+=</span> <span>extentsPerBlock</span>
		}
	}

	<span>return</span> <span>extents</span>
}</code></pre></div>
<p>With this in place, I was able to get the contents of files, large and small! Mixed with the golang <code>archive/tar</code> library, I was able to get the tarball I had hoped for.</p>
<h2 id="harvesting-the-fruits-of-my-labor">Harvesting the fruits of my labor</h2>
<p>I copied the (hopefully correct) tarball to my NAS and unpacked it. Despite the 25 years between the birth of my Indy and my <a href="https://www.qnap.com/en-us/product/ts-231p">NAS</a> they both speak computing's lingua franca, unauthenticated NFS. The IRIX Software Manager doesn't care about <em>where</em> the software lives - it just wants a directory:</p>
<twitter-widget id="twitter-widget-3" data-tweet-id="1010630232360046593"></twitter-widget>


<p>The installation suceeded with no issues - I now have developer tools on my Indy! Entertainingly, one of the features this installed was kernel headers - including ones that describe (in more depth than the manpages) how EFS works.</p>
<h2 id="parting-thoughts">Parting thoughts</h2>
<p>I had an <em>enourmous</em> amount of fun completely over-engineering this problem. I was able to dig in to Unix filesystems for the first time in a practical context, had fun writing golang, and got some dev tools out of it to boot!</p>
<p>Have you ever written code to deal with raw filesystems? Or perhaps written software for IRIX? I'd love to hear your stories! Send them to me via email: <a href="mailto:sophie@pizzabox.computer">sophie@pizzabox.computer</a>!</p>

</article><article>
  
  <time datetime="2018-05-03T22:40:00-0400">Thu, May 3, 2018</time>
  <p>My <a href="http://blog.pizzabox.computer/pizzaboxes/vaxstation">VAXstation 4000 VLC</a> seems to have lived a hard life - when I got it, the plastic was filthy and every groove in the case was caked with black grime. I wouldn't be surprised if it once lived in some sort of industrial setting - wherever it lived must have been hot because it came with a decidedly non-standard cooling system:</p>
<twitter-widget id="twitter-widget-4" data-tweet-id="897939079299555328"></twitter-widget>


<p>That picture is from after a quick cleaning - I saved a deeper rejuvination until last night. I disassembled the whole thing and tried to scour every last bit of dust, dirt, or gunk. Before putting it together this evening, I figured I'd take a few pictures of the components to share.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_components.jpg" alt="the components of the vaxstation">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_components.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>the components of the vaxstation</p>
      </figcaption>
  </figure>
</div>

<p>Clockwise from top-right, the components in the above picture are:</p>
<ul>
<li>the RAM sticks - I love the “Digital” logo silkscreen on the third one</li>
<li>the motherboard</li>
<li>the “graphics module” - it's not any particular bus, though, and it includes the mouse, keyboard, and sound circuitry as well, so I think it's more of just “another layer of motherboard”</li>
<li>the SCSI cable - it serves both internal drives and as the external port</li>
<li>screws and fasteners - the plastic pop-rivets are, shall we say, Not My Favorite (the <a href="http://vaxvms.ro/doc/v48vbsv1.pdf">manual</a> simply tells you to “remove the five rivets” when removing the motherboard - the shape my knuckles are in suggests that's easier said than done)</li>
<li>the power cable for a hard disk</li>
<li>a <a href="http://www.codesrc.com/mediawiki/index.php/SCSI2SD">SCSI2SD</a> acting as the hard disk - the original disk that came with the machine makes terrifying griding noises</li>
<li>(in the center) the included SCSI terminator that needs to go on the back of the computer at all times</li>
</ul>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_power_supply.jpg" alt="power supply">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_power_supply.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>power supply</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_case_bottom.jpg" alt="case bottom">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_case_bottom.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>case bottom</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_case_top.jpg" alt="case top">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_case_top.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>case top</p>
      </figcaption>
  </figure>
</div>


</div>

<p>Once I fastened all the parts back in place, I hooked it up to see if things were still working:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_wired_up.jpg" alt="the vaxtation all wired up">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_wired_up.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>the vaxtation all wired up</p>
      </figcaption>
  </figure>
</div>

<p>and thankfully, they were!
</p><twitter-widget id="twitter-widget-5" data-tweet-id="992196800458252288"></twitter-widget>


<p>Not too bad for a few evenings’ work! One day I'll have to try out <a href="http://www.retr0bright.com/">Retrobriting</a> the case since the plastic has yellowed quite a bit, but at least now it's not hiding tons of dirt.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/vaxstation/cleaning_done.jpg" alt="a prettier vax">
    </p>
    <a href="http://blog.pizzabox.computer/img/vaxstation/cleaning_done.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>a prettier vax</p>
      </figcaption>
  </figure>
</div>


</article><article>
  
  <time datetime="2018-04-28T18:00:00-0400">Sat, Apr 28, 2018</time>
  <p>The HP 9000 workstations’ industrial design inspires me - the 300 series was on my mind the week before I bought my first pizzabox:
</p><twitter-widget id="twitter-widget-6" data-tweet-id="884523284695588864"></twitter-widget>


<p>There's just <em>something</em> about that densely lined grille - <strong>it's clear that a lot of effort went in to its construction</strong>. Contemporaneous PCs looked like a pile of parts, different shades of plastic clashing, chosen based on what was cheapest at the time. The 9000, on the other hand, had a whole system of peripherals that had similar ergonomics and design available from HP. The dense lines from <a href="http://www.hpmuseum.net/display_item.php?hw=120">1985's 310</a> were clearly still part of the design DNA in <a href="https://commons.wikimedia.org/wiki/File:HP-HP9000-C360-Workstation_01.jpg">1999's C360</a>.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/logo.jpeg" alt="hp712 badge">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/logo.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>hp712 badge</p>
      </figcaption>
  </figure>
</div>

<p>My <a href="http://localhost:1313/pizzaboxes/hp712/">HP 9000 Model 712</a> is from the early PA-RISC years. It's quite slim (70mm), extremely solid (the plastic has aged very well), and thoughtfully designed. That thoughtfulness shows in its clearly labeled rear:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/back.jpeg" alt="ports on the back of the hp712">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/back.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>ports on the back of the hp712</p>
      </figcaption>
  </figure>
</div>

<p>and even in the beautiful POST screen (even modern PCs don't look this good!):</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/post.png" alt="hp712 power-on self test">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/post.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>hp712 power-on self test</p>
      </figcaption>
  </figure>
</div>

<p>These subtle touches are part of what sets a <em>workstation</em> apart from a <em>powerful PC</em>. It was built to last and given attention in design that wouldn't be worthwhile for commodity electronics.</p>
<h2 id="installation-requirements">Installation requirements</h2>
<p>To get started using my HP 9000 Model 712, I needed:</p>
<ul>
<li><strong>a hard disk</strong> - my 712 came without a disk (and judging by how clean the bracket was, I think it <em>never</em> had one). Anything SCSI2 should probably work.</li>
<li><strong>a CD-ROM drive</strong> - not only does my 712 not have a hard disk, but it <em>also</em> doesn't have a <em>floppy</em> disk drive. Theoretically I could netboot the installer, but I'm pretty sure doing that without another working HP-UX computer is…non-trivial.</li>
<li><strong>a copy of HP-UX</strong> - HP doesn't make HP-UX available for download without a support contract (which both requires money I don't have <em>and</em> isn't possible for 32-bit PA-RISC anymore). This seems kind of silly to me: you can only run HP-UX on HP hardware anyway (or <em>maybe</em> the small minority of PA-RISC and Itanium boxes that <em>weren't</em> made by HP). HP-UX isn't exactly the hottest ISO to seed on <a href="https://thepiratebay.org/">The Pirate Bay</a> either.</li>
<li><strong>a keyboard</strong> - the serial console on the 712 is disabled by default - to enable it you need to have a PS/2 keyboard (at least temporarily).</li>
</ul>
<p>While I didn't have all the tools when my 712 first arrived from eBay, I eventually filled them (respectively) with:</p>
<ul>
<li><strong>a SCSI2SD v5</strong> (from <a href="http://www.codesrc.com/mediawiki/index.php/SCSI2SD">from codesrc</a>) with an 8GB microSD card. I'm <em>very</em> pleased to be able to avoid scrounging for 20-year-old SCSI hard drives that haven't failed yet.</li>
<li><strong>a Sun-branded external SCSI CD-ROM drive</strong>. Some of my other pizzaboxes have had trouble with it - I think this is because I've been using a <em>passive</em> terminator. Thankfully, the 712 seems to have a tolerant SCSI bus and it worked perfectly.</li>
<li><strong>a copy of HP-UX 10.20</strong> for 700 series machines. This was tricky to find! A friendly computer historian was willing to send me an ISO, but I'm not aware of one that's publicly downloadable. <strong>Dear HP: please just post these.</strong></li>
<li><strong>an IBM Space Saver Keyboard</strong> - I finally caved and picked up a PS/2 keyboard. I still intend to work on a USB-to-PS2 adapter (the “modern peripherals” part of <a href="https://blog.pizzabox.computer/posts/the-dream/">the dream</a>), but I really wanted to give the 712 a go.</li>
</ul>
<h2 id="install-process">Install process</h2>
<ol>
<li>
<p><strong>Install the SCSI2SD</strong>: the default settings on the SCSI2SD seemed to work pretty well for the 712 - I only popped in a microSD card and updated the firmware. Because the 712's disk mounting brackets are just pieces of foam, I didn't need to worry about keeping the board away from conductive surfaces like I did for the <a href="http://localhost:1313/posts/getting-an-indy-desktop/">SGI Indy</a>. It just sits inside the foam clamshell.
</p><twitter-widget id="twitter-widget-7" data-tweet-id="933760446368309250"></twitter-widget>


</li>
<li>
<p><strong>Boot from the install CD</strong>: when presented with the unformatted SCSI2SD and an external SCSI CD drive, the 712 automatically picked to boot from CD.</p>
</li>
<li>
<p><strong>Installation prep</strong>: Before the full installer, I was shown a dire <a href="https://twitter.com/sophaskins/status/933762682603401217">warning message</a> to <em>not install</em> a particular package (I guess that was easier than removing the package from the CD?) and presented with a simple menu to set up partitioning.</p>
<p>HP-UX uses <a href="https://en.wikipedia.org/wiki/Veritas_File_System">VxFS</a> and logical volume groups - pretty advanced for an OS from 1996! Once I selected a layout, a bunch of scripts ran (it looked like shell scripts run with <code>set -x</code>) to perform the partitioning and set up the actual installer</p>
</li>
<li>
<p><strong>Package selection</strong>: The package selection UI is…intense. With hindsight, it looks like a text-mode version of SAM (the HP-UX management tool). As a beginner, it took a bit to figure out how to inspect packages:
</p><twitter-widget id="twitter-widget-8" data-tweet-id="933765631811481601"></twitter-widget>


</li>
<li>
<p><strong>Copying files</strong>: with packages selected, the installer analyzed my choices and began to copy files…<strong>very slowly</strong>. The pizzaboxes have reminded me of how far software installation has come - these days if setting up an OS takes more than 10 minutes I look to see if something is wrong! For the 712, the process took several hours.</p>
</li>
<li>
<p><strong>Post-install setup</strong>: after install, the computer reboots and eventually comes up in to an X Windows UI to choose timezone and root password.</p>
</li>
<li>
<p><strong>First login</strong>: I thought at this point I was home free - time to dive in to HP-UX! Unfortunately, when I'd log in, CDE would appear to initialize, die, and I'd be kicked back out to the login screen.


</p><div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-login.png" alt="HP-UX login screen">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-login.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>HP-UX login screen</p>
      </figcaption>
  </figure>
</div>

</li>
<li>
<p><strong>Remember to set DNS</strong>: after a bunch of fruitless debugging, the problem turned out to be that I had configured the 712 to believe that it had a real resolvable domain name. On my home network, those are configured by making a MAC address reservation in my router, which I hadn't done yet. Adding the reservation and registering the name got the ball rolling again, and I was able to log in. <strong>Success!</strong></p>
</li>
</ol>
<h2 id="first-impressions">First impressions</h2>
<p>I mentioned the surprisingly classy POST screen in the introduction, but the text-mode niceties don't stop there: the 712  displays some “<strong>soft buttons</strong>” whenever you're at a console.


</p><div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-init.png" alt="hp712 booting HP-UX 10.20 - going through the init process">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-init.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>hp712 booting HP-UX 10.20 - going through the init process</p>
      </figcaption>
  </figure>
</div>

This seems to be an HP-ism (I've seen it on their block terminals as well) and while I can't see myself changing any of the settings while using HP-UX, it still seems pretty cool.
<p>By the time HP-UX 10.20 was released, the <a href="https://en.wikipedia.org/wiki/Unix_wars">Unix wars</a> had cooled down a bit and commercial Unixes had mostly settled on the same CDE desktop tools.


</p><div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-cde-desktop.png" alt="HP-UX 10.20 default CDE desktop">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-cde-desktop.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>HP-UX 10.20 default CDE desktop</p>
      </figcaption>
  </figure>
</div>

The only HP-UX specific tool of note that comes by default is <strong>SAM: the System Administration Manager</strong>. It's like a control panel, but with much deeper hooks in to the system than is typical. The configuration pages themselves seem to be made with a common toolkit, and the interface is <em>quite</em> similar to the text-mode package chooser I ran in to in the installer. My money is on them being related.



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-sam-splash.png" alt="HP-UX SAM splash screen">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-sam-splash.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>HP-UX SAM splash screen</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-sam-menu.png" alt="HP-UX SAM main menu">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-sam-menu.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>HP-UX SAM main menu</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/hp712/hpux-sam-disks.png" alt="HP-UX SAM volume groups configuration">
    </p>
    <a href="http://blog.pizzabox.computer/img/hp712/hpux-sam-disks.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>HP-UX SAM volume groups configuration</p>
      </figcaption>
  </figure>
</div>


</div>

<p>I was able to (with no configuration!) access files on my NAS via NFS by just browsing to <code>/net/the.fqdn.of.the.nas/share.name/</code>, so I grabbed an HP-UX package of Netscape Navigator 4.0. Unfortunately (like with all of the pizzaboxes), its TLS ciphers are too old to load nearly anything on the 2018 internet.</p>
<h2 id="where-to-go-from-here">Where to go from here</h2>
<p>This is definitely only the beginning! As with all the pizzaboxes, I want to develop a GUI application for the 712 and also do a project using software that folks typically ran on HP-UX boxes. Have you ever used an HP-UX computer? Do you have memories or leads on where I could find software you think is important? I'd love to hear about it via email: <a href="mailto:sophie@pizzabox.computer">sophie@pizzabox.computer</a>.</p>
<p>Since the install chronicled in this post, I've <em>also</em> experimented with running NeXTstep on the 712! Keep an eye out for a post about that in the future.</p>

</article><article>
  
  <time datetime="2018-03-17T17:00:00-0400">Sat, Mar 17, 2018</time>
  <p>The Multia feels to me like Digital's take on a high-end “legacy-free” (at introduction in late 1994) desktop. Its spec sheet includes features unheard of in its contemporaries:</p>
<ul>
<li>a 64-bit RISC processor</li>
<li>ECC memory</li>
<li>Ethernet networking</li>
<li>SCSI2 hard drive</li>
<li>high-resolution (1280x1024) monitor support</li>
<li>PCMCIA expansion slots</li>
</ul>
<p>A RISC processor, powerful networking, and PCMCIA slots <em>nearly</em> sounds like a description of a <a href="https://en.m.wikipedia.org/wiki/Network_Computer">Network Computer</a>, but the Multia pre-dates the NC by more than a year. It was also <strong>ahead of its time</strong> in terms of its original OS: the fully 32-bit <strong>Windows NT 3.5</strong>. There wouldn't be a 32-bit capable consumer Windows for another year (Windows 95 came out in late 1995).</p>
<p>Having an advanced-but-unfamiliar OS, expensive ECC memory and SCSI2 disks, and a non-Intel architecture <strong>didn't lead to consumer success</strong>. Its low-end Alpha processor was starved of on-chip cache, so it wasn't particularly attractive as a technical workstation. The Multia sold so poorly that later in its life Digital discounted the price heavily and sold it without an OS, targeting the nacent Linux desktop market.</p>
<h2 id="a-little-alpha">A little Alpha</h2>
<p>My Multia is the <a href="http://blog.pizzabox.computer/pizzaboxes/multia">lowest-end model</a>: a VX40 with a non-upgradable 166 MHz CPU. When it first arrived, I didn't have a PS/2 keyboard and mouse to test with, so I was only able to verify that it came with Windows NT 4.0 Workstation pre-installed:</p>
<twitter-widget id="twitter-widget-9" data-tweet-id="921543732771676160"></twitter-widget>


<p>It's mostly in good physical shape - the sliding floppy drive door isn't broken off, the case hasn't been roughed up, and nothing seems <em>missing</em>. The back panel <em>is</em> a bit corroded:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/multia/corrosion.jpg" alt="corrosion on the case">
    </p>
    <a href="http://blog.pizzabox.computer/img/multia/corrosion.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>corrosion on the case</p>
      </figcaption>
  </figure>
</div>

<p>I've seen similar corrosion on several Multias for sale on eBay - perhaps it's a design flaw rather than the result of living a hard life. The Multia has more than its fair share of design flaws - chief among them is its <strong>utterly inadequate cooling</strong>. Most guides strongly recommend running the Multia <strong>standing vertically</strong> (rather than pizzabox traditional horizontal) to expose more surface area to airflow - the <a href="http://www.netbsd.org/ports/alpha/multiafaq.html#heat-death">NetBSD FAQ</a> has a lot more detail.</p>
<h2 id="first-login">First login</h2>
<p>A few months later (once I had aquired peripherals) I was ready to log in. Since it's running Windows NT, I was expecting to have to use <a href="https://en.wikipedia.org/wiki/Rainbow_table">rainbow tables</a> to hack the Administrator password - the seller didn't note it down for me. My understanding of this procedure is that I would mount the hard drive on another computer and match the Administrator password hash to a known password.  First, though, I looked to see if there was a default post-install password.</p>
<p>To my surprise, the <strong>default is to have no password</strong>, and that was how my Multia was configured! I was presented with a stock standard Windows NT 4.0 desktop - the previous owner must have done a fresh install before selling it to me.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/multia/ntdesktop.png" alt="default windows nt 4.0 desktop">
    </p>
    <a href="http://blog.pizzabox.computer/img/multia/ntdesktop.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>default windows nt 4.0 desktop</p>
      </figcaption>
  </figure>
</div>

<p>If you've never used Windows NT 4.0 Workstation before, it's a <em>lot</em> like Windows 95. Most of the pre-installed applications are the same, the GUI is the same, even the desktop background is the same. There are certainly <em>some</em> differences (actually caring at all about user accounts, bits for integration with AD domains, and NTFS), but in terms of “what is it like to use”, it's nothing surprising.</p>
<h2 id="connecting-to-my-network">Connecting to my network</h2>
<p>Another telltale sign that the previous owner did a fresh re-install before selling it is that it was at a pretty <em>old</em> patchlevel: SP1. I downloaded the final Service Pack (SP6), put it on my NAS's “public” directory, and connected the Multia to my network. Some things don't change much - thankfully for my vintage pizzaboxes, among them are:</p>
<ul>
<li>10Base-T Ethernet</li>
<li>DHCP</li>
<li>unauthenticated SMB &amp; NFS</li>
</ul>
<p>Running the upgrade from a NAS more than 20 years newer than the Multia went smoothly. Once updated, the version of Internet Explorer is still elderly:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/multia/iesplash.png" alt="internet explorer splash page">
    </p>
    <a href="http://blog.pizzabox.computer/img/multia/iesplash.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>internet explorer splash page</p>
      </figcaption>
  </figure>
</div>

<p>I tried to load up my <strong>favorite classic web site</strong>, the <a href="https://www.warnerbros.com/archive/spacejam/movie/jam.htm">Space Jam marketing page</a>. Unfortunately, though the page's <em>contents</em> haven't changed since 1996, it now is served via Cloudflare and doesn't work over plain HTTP (HTTPS would fail b/c of cipher mismatches, as well as no SNI support):</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/multia/spacejam.png" alt="space jam website wont load">
    </p>
    <a href="http://blog.pizzabox.computer/img/multia/spacejam.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>space jam website wont load</p>
      </figcaption>
  </figure>
</div>

<h2 id="from-here">From here</h2>
<p>Setting up the Multia was anticlimactic - <strong>it Just Worked™ out of the box</strong> and its OS feels rather pedestrian. Finding <em>software</em> written for Win32/Alpha, though, is likely to be a challenge. Most software I have heard of is linked to DEC's (dead) website. My hope is to find an IDE, some database software, and maybe a solid Telnet client or X server so I can experience the ways folks actually used them at the time.</p>
<p>Did you use a Multia back in the 1990s? Or maybe have a lead on some Alpha software? Send me an email at <a href="mailto:sophie@pizzabox.computer">sophie@pizzabox.computer</a>!</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/multia/runningondesk.jpg" alt="multia set up on my desk">
    </p>
    <a href="http://blog.pizzabox.computer/img/multia/runningondesk.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>multia set up on my desk</p>
      </figcaption>
  </figure>
</div>


</article><article>
  
  <time datetime="2018-02-13T21:00:00-0500">Tue, Feb 13, 2018</time>
  <p>There's been a lot of great stuff happening on my Pizza Box projects the past few weeks - not a ton that's complete enough to share yet, but stay tuned. This evening, though, I ran in to something surprising that I couldn't wait to tell y'all - here goes!</p>
<h2 id="powermac-video-woes">PowerMac video woes</h2>
<p>When I first got my PowerMac 6100, I realized <a href="http://blog.pizzabox.computer/posts/two-macs-and-an-hp/">I didn't have the right adapter</a> to hook it up to a monitor. I did order one, but didn't immediately test it. About a week ago, I decided to see try it out.</p>
<p>I attached the HDI-45 to DA-15 adapter, turned on the PowerMac, and…nothing. <strong>No video appeared on the monitor</strong>. My DA-15 to VGA adapter (which has worked with my Quadras) has some DIP switches for pretending to be various kinds of monitors, so I tried a ton of configurations to no avail. I assumed the HDI-45 adapter was bad, and ordered another one. It came in today, I tried it out too, and nothing. <strong>Something must be wrong with the computer!</strong></p>
<p>Since I'm basically a professional “Google to see if other people have similar problems” person, I used my skills and found a <em>very</em> promising lead: apparently <strong>older Macs can <a href="https://support.apple.com/kb/TA35928?locale=en_US">refuse to show video</a> when their PRAM battery is dead.</strong> Dead batteries are par for the course with two-decade-old computers (I already have <a href="http://blog.pizzabox.computer/posts/dead-vram/">replaced one</a> in my SPARCstation). I also saw reference on a few forums to a “<a href="https://www.thinkclassic.org/viewtopic.php?id=72">flick trick</a>” - where if your PRAM is dead, you can trick the computer in to booting anyway by rapidly cycling the power when you boot it up.</p>
<h2 id="first-boot">First boot</h2>
<p>I tried the “flick trick”, and the results were awesome:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-firstboot.jpeg" alt="mac os 9.1 boot screen">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-firstboot.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>mac os 9.1 boot screen</p>
      </figcaption>
  </figure>
</div>

<p>I have to admit - <strong>my first thoughts</strong> on seeing MacOS 9.1 booting up were that <strong>someone had pushed the little machine farther than made sense</strong> - it would be wicked slow and I'd have to downgrade to something nice like System 7.5. The <em>next</em> screen is what threw me for a loop, though:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-starting-up.jpeg" alt="mac os boot...with an accelerator?">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-starting-up.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>mac os boot...with an accelerator?</p>
      </figcaption>
  </figure>
</div>

<p>“MAXpower G3”…this machine doesn't have a G3 accelerator card…<em>does it</em>? I had opened up the case when I first got it, and I feel like that's the kind of thing I'd <em>notice</em>. <strong>Most processor upgrade cards loudly announce their presence</strong> with big logos and out-of-place heatsinks. I cracked open the case anyway, though - might as well double check.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-inside.jpeg" alt="the inside of the 6100">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-inside.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>the inside of the 6100</p>
      </figcaption>
  </figure>
</div>

<p>Looks pretty standard to me! Where would an upgrade card even <em>go</em>? I guess they'd plug in to the PDS slot (which lives on a riser card)? And my PDS slot is empty! Now that you mention it, though, the <em>riser board itself</em> has a heatsink on it…</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-whats-this.jpeg" alt="what is this? an accelerator?">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-whats-this.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>what is this? an accelerator?</p>
      </figcaption>
  </figure>
</div>

<p>I pulled out the riser and sure enough, it's a G3 upgrade card!</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-upgrade-front.jpeg" alt="front of accelerator">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-upgrade-front.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>front of accelerator</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/powermac6100/surprise-upgrade-back.jpeg" alt="back of accelerator">
    </p>
    <a href="http://blog.pizzabox.computer/img/powermac6100/surprise-upgrade-back.jpeg" itemprop="contentUrl"></a>
      <figcaption>
          <p>back of accelerator</p>
      </figcaption>
  </figure>
</div>


</div>

<p>It's a NewerTechnology MAXpowr MXP6100 - designed specifically for this PowerMac. The riser board it replaced holds a PDS slot, and so because the upgrade card <em>also</em> passes through that slot (acting as the riser), I didn't notice it before! The eBay listing definitely didn't list this rad extra!</p>
<p>I still can't explore what's on it, or the stats, etc, because I don't yet have an ADB input solution. Stay tuned, though - my work on adapting different kinds of input peripherals is starting to bear fruit!</p>

</article><article>
  
  <time datetime="2017-11-21T16:00:00-0500">Tue, Nov 21, 2017</time>
  <p>The SPARCstation was the first pizzabox I was able to <strong>connect a serial cable to and turn on</strong>. As its self-tests scrolled by (first try!), I had high hopes…</p>
<twitter-widget id="twitter-widget-10" data-tweet-id="897541149459599360"></twitter-widget>


<p>…that were quickly dashed - <em>neither</em> of its two internal SCSI hard disks seemed to be able to boot. The SPARCstation went to the back burner for a while as I focused on <a href="http://blog.pizzabox.computer/posts/booting-the-indy">booting the Indy</a>. Getting further meant booting from some other source - requiring tools I didn't have at hand:</p>
<ul>
<li>an <strong>ethernet connection</strong> and a way to netboot (the SPARCstation has an AUI connector, not 10Base-T, and I didn't have a transceiver)</li>
<li>a <strong>bootable floppy disk</strong> - <a href="https://docs.oracle.com/cd/E19620-01/805-3408/preparecustom-55190/index.html">seems to require</a> an existing SPARC system</li>
<li>an <strong>external SCSI CD drive</strong> to boot from an install disc</li>
</ul>
<p>A few weeks later I acquired an AUI -&gt; 10Base-T transceiver, so I dug in to netbooting. Solaris 7 (the most recent OS supporting the sun4c family) <a href="https://docs.oracle.com/cd/E19620-01/805-3408/6j38cta1j/index.html">has instructions</a> and scripts for setting up a netboot server, but they <strong>encode a lot of assumptions</strong> about running on Solaris. I tried running from a Solaris 10 <a href="http://www.oracle.com/technetwork/server-storage/solaris11/vmtemplates-vmvirtualbox-1949721.html">virtual machine</a>, but the scripts (written to target Solaris 7) were <em>incredibly</em> incompatible.</p>
<p>Progress on booting stalled again…</p>
<h2 id="a-wild-cd-rom-appears">A wild CD-ROM appears!</h2>
<p>…until I procured a CD drive!</p>
<twitter-widget id="twitter-widget-11" data-tweet-id="919256261539106816"></twitter-widget>


<p>Finding the right CD drive was <strong>quite a task</strong> - SCSI CD-ROM drives aren't exactly <em>prevalent</em> in 2017, nor are external enclosures that can provide a SCSI device with power and the right connectors. The pickings for original external CD drives on eBay were quite slim (including many that needed power adapters that weren't included 😢). In a stroke of luck, I eventually found one that wasn't an outrageous price, and a Sun-branded one to boot!</p>
<p>When I bought it I didn't realize just how lucky this was: it turns out that older Sun computers (like mine) use an unusual CD-ROM <strong>block size of 512 bytes</strong> (typical sizes range from 2048 to 2352 bytes). Despite <a href="https://twitter.com/PaulStoffregen/status/919382583414112256">several</a> <a href="https://twitter.com/spackardwork/status/919349830077505536">people</a> <a href="https://twitter.com/dg7pc/status/919556260076441601">mentioning</a> to me that the one I had bought likely supported the 512 size, and a <a href="http://www.4bcad.com/doc/faq/cdrom/cdrom.html">quite detailed guide</a> available to explain <em>why</em> ending up with a Sun model was a <em>good</em> thing, I still managed to only get this one by chance. A happy accident!</p>
<p>Naturally, the <em>first</em> thing I did with my new drive was try to boot the SPARCstation. Though it's not quite USB, setting up a SCSI drive is reasonably simple:</p>
<ul>
<li>plug in external <strong>power</strong> - the enclosure was large enough to have an internal power supply and use a standard computer power cable</li>
<li>connect a <strong>SCSI cable</strong> to the drive and the SPARCstation</li>
<li>make sure the drive is set to a “reasonable” non-conflicting <strong>SCSI address</strong> (apparently 6 is a common choice)</li>
<li>attach a <strong>terminator</strong> to one of the drive's SCSI ports:
<twitter-widget id="twitter-widget-12" data-tweet-id="920002357353762817"></twitter-widget>

</li>
</ul>
<h2 id="investigate-the-existing-os">Investigate the existing OS</h2>
<p>The first order of business was to boot from the OS install disk to a shell and see if the already installed OS was salvageable. The <a href="https://docs.oracle.com/cd/E19620-01/805-3408/6j38cta0f/index.html">installation docs</a> say that at the <code>ok</code> prompt you should be able to do</p>
<pre><code>ok boot cdrom
</code></pre><p>to get to the installer, and</p>
<pre><code>ok boot cdrom -s
</code></pre><p>to boot from the CD in to a single-user mode root shell. My SPARCstation 1+ is old enough that its firmware doesn't have a concept of <code>cdrom</code> as a valid boot target. A <a href="https://docs.oracle.com/cd/E19620-01/805-3408/6j38cta0f/index.html">footnote</a> thankfully informed me:</p>
<blockquote>
<p>For systems with older EEPROMs, replace cdrom with sd(0,6,2) to boot from the system's CD-ROM.</p>
</blockquote>
<p>That worked! The first thing I tried was mounting the internal drives, which <strong>immediately failed</strong> and asked me to run <code>fsck</code>. Of the partitions, <code>fsck</code> found plenty of errors and only managed to make a few of them mountable. None of it was interesting or useable stuff (I think I got like, a <code>/</code> partition? but no <code>/boot</code> or <code>/usr</code>), so I made the call to wipe it and re-install:</p>
<pre><code>sparcstation# format
Searching for disks...done

AVAILABLE DISK SELECTIONS:
       0. c0t3d0 &lt;SUN0424 cyl 1151 alt 2 hd 9 sec 80&gt;
          /sbus@1,f8000000/esp@0,800000/sd@3,0
Specify disk (enter its number): 0
selecting c0t3d0
[disk formatted]


FORMAT MENU:
        disk       - select a disk
        type       - select (define) a disk type
        partition  - select (define) a partition table
        current    - describe the current disk
        format     - format and analyze the disk
        repair     - repair a defective sector
        label      - write label to the disk
        analyze    - surface analysis
        defect     - defect list management
        backup     - search for backup labels
        verify     - read and display labels
        save       - save new disk/partition definitions
        inquiry    - show vendor, product and revision
        volname    - set 8-character volume name
        !&lt;cmd&gt;     - execute &lt;cmd&gt;, then return
        quit
format&gt; format
Ready to format. Formatting cannot be interrupted
and takes 16 minutes (estimated). Continue? y
Beginning format. The current time is Tue Oct 17 16:21:55 2017

Formatting...done
Warning: no backup labels

Verifying media...
        pass 0 - pattern = 0xc6dec6de
   1150/8/62

        pass 1 - pattern = 0x6db6db6d
   1150/8/62

Warning: no backup labels
Total of 0 defective blocks repaired.
format&gt;
</code></pre><p>time to reboot and do a real install!</p>
<h2 id="installation">Installation</h2>
<p>The Solaris install process starts with a few questions about your language, locale, and terminal type. It then launches a curses-style install program to get details about your networking situation and time-zone settings. Finally, it informs you:</p>
<pre><code>System identification is completed.
</code></pre><p>…and <strong>hangs for about 20 minutes</strong> without any more output. The first few times this happened I was <em>convinced</em> I had done something wrong - maybe the installer was angry about me not using the framebuffer for install, or a RAM chip was bad, or <em>something</em>. It turns out it was just…thinking about stuff. After the long wait, the curses-style installer comes back:</p>
<pre><code>- Solaris Interactive Installation ---------------------------------

  You'll be using the initial option for installing Solaris software
  on the system. The initial option overwrites the system disks when
  the new Solaris software is installed.

  On the following screens, you can accept the defaults or you can
  customize how Solaris software will be installed by:

- Allocating space for diskless clients or AutoClient systems
- Selecting the type of Solaris software to install
- Selecting disks to hold software you've selected
- Specifying how file systems are laid out on the disks

  After completing these tasks, a summary of your selections (called
  a profile) will be displayed.

--------------------------------------------------------------------
     F2_Continue    F5_Exit    F6_Help
</code></pre><p>I went with the default partitioning and the basic set of packages that would fit on the small hard drive. The install proper took around two hours - a big reminder that this tech isn't from 2017! At completion, the installer installed a handful of patches and rebooted the machine.</p>
<h2 id="first-boot">First boot</h2>
<p>Post-install, things came up pretty smoothly (except for a bunch of network errors - I didn't have the ethernet cable plugged in)</p>
<pre><code>SPARCstation 1+, No keyboard.
ROM Rev. 1.3, 64 MB memory installed, Serial #12648430.
Ethernet address 8:0:20:c0:ff:ee, Host ID: 53c0ffee.

Testing
Booting from: sd(0,0,0)vmunix
SunOS Release 5.7 Version Generic_106541-08 [UNIX(R) System V Release 4.0]
Copyright (c) 1983-1999, Sun Microsystems, Inc.
configuring network interfaces:le0: No carrier - transceiver cable problem?
 le0.
Hostname: sparcstation
Warning: failed to open /dev/dump (No such file or directory):
run dumpadm(1M) to verify dump configuration
Configuring /dev and /devices
Configuring the /dev directory (compatibility devices)
The system is coming up. Please wait.
Configuring network interface addresses: le0.
RPC: Timed out
starting routing daemon.
starting rpc services: rpcbindkeyserv: failed to generate host's netname when establishing root's key.
 keyserv done.
</code></pre><p>This being the first boot, I was prompted to make a root password:</p>
<pre><code>On this screen you can create a root password.

A root password can contain any number of characters, but only the
first eight characters in the password are significant. (For
example, if you create `a1b2c3d4e5f6' as your root password, you
can use `a1b2c3d4' to gain root access.)

You wil be prompted to type the root password twice; for security,
the password will not be displayed on the screen as you type it.

&gt; If you do not want a root password, press RETURN twice.

Root password: _


Press Return to continue.
</code></pre><p>Finally, I made it to a shell!</p>
<pre><code>System identification is completed.
Setting netmask of le0 to 255.255.255.0
Setting default interface for multicast: add net 224.0.0.0: gateway SPARCstation
syslog service starting.
Print services started.
volume management starting.
The system is ready.

sparcstation console login: root
Password:
Sun Microsystems Inc.   SunOS 5.7        Generic October 1998
# hostname
sparcstation
#
</code></pre><h2 id="from-shell-to-desktop">From shell to desktop</h2>
<p>From here, setting up X and connecting a remote X session was pretty simple (in no small part because of the <a href="https://docs.oracle.com/cd/E19620-01/805-3900/6j3n23uoa/index.html">helpful manual</a>):</p>
<ul>
<li>I enabled the login manager to start at boot time with <code>/usr/dt/bin/dtconfig -e</code></li>
<li>enabled the font server to start at boot time with <code>fsadmin -e</code></li>
<li>rebooted to let those take effect (and to clear any gremlins from first boot, because I'm superstitious)</li>
<li>point my remote X session at the SPARCstation!</li>
</ul>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/boot_login_manager.jpg" alt="solaris login manager">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/boot_login_manager.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>solaris login manager</p>
      </figcaption>
  </figure>
</div>

<p>Logging in as root gave me a pretty rad splash screen:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/boot_splash_screen.png" alt="solaris cde splash screen">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/boot_splash_screen.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>solaris cde splash screen</p>
      </figcaption>
  </figure>
</div>

<p>and eventually a pretty standard CDE desktop:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/boot_desktop.jpg" alt="solaris cde desktop">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/boot_desktop.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>solaris cde desktop</p>
      </figcaption>
  </figure>
</div>

<p>I haven't dug too deeply in to what sorts of things are installed by default, but one notable application was the Sun Hot Java web browser:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/boot_hot_java.png" alt="solaris hot java browser">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/boot_hot_java.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>solaris hot java browser</p>
      </figcaption>
  </figure>
</div>

<p>A pretty satisfying reward for the effort of installing! Since I did this install (about a month ago!), I've re-installed an older version of Solaris (it was <em>quite</em> bogged down running 7 - I'm now trying out 2.4) and started using <em>both</em> hard disks installed (so I don't have to skimp on installed packages). I'm hopeful to get a development setup working soon!</p>

</article><article>
  
  <time datetime="2017-11-21T16:00:00-0500">Tue, Nov 21, 2017</time>
  <p>The collection has grown again! My inability to ignore eBay has resulted in three new additions.</p>
<h2 id="ibm-rs6000-model-250">IBM RS/6000 Model 250</h2>
<p>The IBM RS/6000 lines is one of the few RISC computer lines to survive well in to the 21st century - IBM's POWER Systems are still available and still the biggest beneficiary of IBM's chip research. The <a href="http://blog.pizzabox.computer/pizzaboxes/powerstation250">Model 250</a> is the last of the 200 series pizzaboxes - it has a 66 MHz PowerPC 601 processor (similar to the <a href="http://blog.pizzabox.computer/pizzaboxes/powermac6100">Power Macintosh 6100</a>).</p>
<p>I've seen <em>very</em> few of the 200 series available for sale online - this one isn't even technically (by my standards) a workstation - <strong>it came with no frame buffer</strong>! IBM sold most of the RS/6000 line as a POWERstation or POWERserver in marketing materials depending on whether it had a frame buffer pre-installed (the designation doesn't appear to show up anywhere on the case or in model numbers). I found on of the optional upgrade framebuffers on eBay to make this one in to a proper pizzabox.</p>
<h2 id="digital-multia">Digital Multia</h2>
<p><a href="http://blog.pizzabox.computer/pizzaboxes/multia">The Multia</a> was an attempt by Digital to make a lower-cost Alpha workstation for running Windows NT. There were Alpha <em>and</em> Intel Pentium models, and they use a lot of off-the-shelf PC components rather than custom Digital ones (hence its later name, the “Universal Desktop Box”). It's quite tiny - so much so that it has laptop PCMCIA slots for expansion!</p>
<p>The Multia is my first workstation to run Windows (though it keeps with the “no x86” rule). It came with NT 4.0 installed - I might have to break out some Rainbow Tables to get the administrator password (since it wasn't included in the box).</p>
<h2 id="digital-3000-axp-300x">Digital 3000 AXP 300X</h2>
<p>The third pizzabox in this batch is another Alpha - this time a more typical Digital 3000 AXP pizzabox. At 175 MHz (and with 256 MB of RAM) it's definitely the most powerful workstation I have. It seems like Digital didn't make too many machines in this form factor - the Alphastation (successor to the 3000 AXP) was much thicker, and there are several gigantic tower models as well.</p>
<p>My <a href="http://blog.pizzabox.computer/pizzaboxes/alphaaxp">3000 AXP 300X</a> came without a hard drive, so I expect I'll be setting up Digital OSF/1 (the original name of of Digital Unix and Compaq Tru64) on a SCSI2SD some time in the future.</p>

</article><article>
  
  <time datetime="2017-10-28T20:00:00-0400">Sat, Oct 28, 2017</time>
  <p>My SPARCstation 1+ was manufactured in 1989. Over a nearly 30 year lifetime, any number of components <em>could</em> have gone bad: capacitors burst, hard disk motors fail, sometimes the wrong voltage gets attached, etc. A problem that <em>notoriously</em> affects older Sun workstations (including mine!) is NVRAM failure.</p>
<p>The NVRAM chips in Sun workstations contain:</p>
<ul>
<li>a <strong>clock</strong>, to keep time when the computer is off</li>
<li><strong>memory</strong> to store boot device order, serial console modes, etc (in a PC you'd call that the BIOS settings)</li>
<li>details about the machine itself: its “hostid”, what model it is, an Ethernet MAC address. Sun calls this <strong>IDPROM</strong>.</li>
<li>a <strong>battery</strong> - the “non-volatile” part of NVRAM is managed here by having a battery keep an SRAM alive</li>
</ul>
<p>Over the years, <strong>that battery dies</strong>. Unfortunately, because it is packaged as one chip, you can't pop in a new button-cell - you have to replace the whole chip. This doesn't just mean your computer will lose the ability to tell time - (entertainingly) the machine will lose it's IDPROM data - it no longer knows what model it is or what its MAC address is supposed to be.</p>
<p>When worked on the SPARCstation, I've set dummy values for the MAC address and such to get around the dead battery - there's thankfully a <a href="http://www.lib.ru/TXT/faqsunnvram.txt">quite detailed</a> guide from <code>comp.sys.sun.hardware</code> on how to set them. I've since given in and ordered a new chip (the <a href="http://www.st.com/content/ccc/resource/technical/document/datasheet/cf/6a/69/ff/7a/6e/4b/bd/CD00000520.pdf/files/CD00000520.pdf/jcr:content/translations/en.CD00000520.pdf">STMicroelectronics M48T02-200PC1</a>).</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_old_chip.jpg" alt="old nvram chip">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_old_chip.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>old nvram chip</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_new_chip.jpg" alt="replacement chip">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_new_chip.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>replacement chip</p>
      </figcaption>
  </figure>
</div>


</div>

<p>To replace it, I had to open up the case and find the darn thing! Pizzaboxes have fairly compact interiors, sometimes layering what you <em>want</em> to get at below something unrelated. In this case, I had to remove the two frame buffer cards.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_find_chip.jpg" alt="The NVRAM was under the SBus cards!">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_find_chip.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>The NVRAM was under the SBus cards!</p>
      </figcaption>
  </figure>
</div>

<p>I pried it out of the socket (with my fingers), and inserted the new one (using the corner “dot” as a guide for its orientation):</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_step_1.jpg" alt="old nvram in place">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_step_1.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>old nvram in place</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_step_2.jpg" alt="empty socket">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_step_2.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>empty socket</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="http://blog.pizzabox.computer/img/sparcstation/nvram_step_3.jpg" alt="replacement done">
    </p>
    <a href="http://blog.pizzabox.computer/img/sparcstation/nvram_step_3.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>replacement done</p>
      </figcaption>
  </figure>
</div>


</div>

<p>After putting the framebuffer back in and closing up the case, it was time to set the IDPROM values for the last time! Based on the guide, I set a machine type of <code>53</code> (SPARCstation 1+) and a MAC address of <code>08:00:20:c0:ff:ee</code> (<code>08:00:20</code> is the Sun range, and the guide's example already referenced my favorite drink!). After booting to the <code>ok</code> prompt, I set those by doing:</p>
<pre><code>ok
ok 1 0 mkp
ok 53 1 mkp
ok 8 2 mkp
ok 0 3 mkp
ok 20 4 mkp
ok c0 5 mkp
ok ff 6 mkp
ok ee 7 mkp
ok 0 8 mkp
ok 0 9 mkp
ok 0 a mkp
ok 0 b mkp
ok c0 c mkp
ok ff d mkp
ok ee e mkp
ok 0 f 0 do i idprom@ xor loop f mkp
ok setenv diag-switch? false
</code></pre><p>The final <code>diag-switch? false</code> brings the machine out of “diagnostic mode”, which means I don't spend 10 minutes painstakingly verifying the 64MB of memory on every boot, and also don't try (fruitlessly) to LAN boot.</p>
<p>With a working NVRAM chip, my SPARCstation now keeps the time and, more importantly, can be booted without futzing with  configuration!</p>

</article><article>
  
  <time datetime="2017-09-25T21:00:00-0400">Mon, Sep 25, 2017</time>
  <p>My last post about the Indy was a bit of a downer - I may have learned a lot, but I <em>didn't</em> get much closer to a usable IRIX desktop. In contrast, this post <em>does</em> end happily. I hope that the screenshots at the end make up for how incredibly long it is.</p>
<h2 id="replacing-the-hard-disk-with-a-microsd-card">Replacing the hard disk with a microSD card</h2>
<p>The working disk in my Indy has an OS installed, but I've <a href="http://blog.pizzabox.computer/posts/booting-the-indy/">had trouble</a> logging in. Rather than erase and re-install IRIX onto that disk (and lose whatever applications it might have!), I wanted to save it and use a new disk. While used SCSI hard disks are available (and from my reading, some <em>new</em> Ultra320 SCSI drives are capable of running in SCSI 2 mode), I've decided to <strong>avoid spinning-rust disks</strong> in favor of the <a href="http://www.codesrc.com/mediawiki/index.php?title=SCSI2SD">SCSI2SD</a>.</p>
<p>The SCSI2SD uses a microcontroller to emulate a SCSI device in software and stores data on a microSD card. It's not <em>quite</em> plug-and-play - to get it ready for use, I had to:</p>
<ul>
<li><strong>Insert a microSD card</strong>: I'm using a pretty cheap 8GB SanDisk - I figure 8GB was a pretty large disk at the time, given the two that came with my Indy were 1GB and 500 MB</li>
<li><strong>Download software</strong>: both the SCSI2SD firmware and <code>scsi2sd-util</code> - there are different versions for the <a href="http://www.codesrc.com/files/scsi2sd/latest/">SCSI2SD  v5</a> and <a href="http://www.codesrc.com/files/scsi2sd-v6/latest/">SCSI2SD v6</a> hardware revisions</li>
<li><strong>Flash the firmware</strong>: This step threw me a bit - I had to open <code>scsi2sd-util</code>, go to the “Upgrade Firmware” window, and <em>then</em> plug the SCSI2SD in with USB. I spent a little time wondering why when I plugged mine in, <code>scsi2sd-util</code> didn't recognize it - the reason is you have to flash it before it works.</li>
<li><strong>Upload settings</strong>: I grabbed settings from the <a href="http://www.nekochan.net/wiki/SCSI2SD#Things_you_need">Nekochan wiki</a>. The most important ones for the Indy are <strong>parity</strong> and <strong>SCSI2 Mode</strong>.</li>
<li><strong>Remove the terminators</strong>: The SCSI2SD has built-in terminators, but so does the Indy's SCSI cable. The SCSI2SD terminators are in removable SIP packages, so I just pulled them out.</li>
</ul>
<p>With the SCSI2SD drive ready to go, it needed to be installed in the Indy. The SCSI2SD docs recommend <em>not</em> letting it rest directly on “conductive material” (like the metal floor of the case), so I had find a way to attach it to the drive mounting bracket. I didn't have any spacers to safely screw it on directly, so instead I got creative with Command Strips (something quite plentiful in my household):</p>
<twitter-widget id="twitter-widget-13" data-tweet-id="902311099760041984"></twitter-widget>



<p>In <a href="http://blog.pizzabox.computer/posts/booting-the-indy/">“Booting the Indy”</a>, I used the <a href="http://www.nekochan.net/wiki/Using_DINA_for_network_installation_of_IRIX">DINA</a> VM image for a netboot server. Since then, I've had some trouble getting DINA running again, so I decided to give another tool a try: <code>irixboot</code>. The <a href="https://github.com/halfmanhalftaco/irixboot">project's README</a> has most of the instructions I needed. My install discs were:</p>
<ul>
<li><code>irix/6.5/inst/IRIX 6.5 Installation Tools.img</code> <a href="https://archive.org/details/sgi_IRIX_6.5_Installation_Tools_June_1998">download</a></li>
<li><code>irix/6.5/foundation/IRIX 6.5 Foundation 1.img</code> <a href="https://archive.org/details/sgi_IRIX_6.5_Foundation_1">download</a></li>
<li><code>irix/6.5/foundation/IRIX 6.5 Foundation 2.img</code> <a href="https://archive.org/details/sgi_IRIX_6.5_Foundation_2">download</a></li>
<li><code>irix/6.5/applications/IRIX 6.5 Applications.img</code> <a href="https://archive.org/details/sgi_IRIX_6.5_Applications_June_1998">download</a></li>
<li><code>irix/6.5/nfs/ONC3 NFS Version3.img</code> <a href="https://archive.org/details/sgi_ONC3-NFS_Version_3_for_IRIX_6.2__6.3__6.4_and_6.5">download</a></li>
</ul>
<p>from the images hosted on the <a href="https://archive.org/">Internet Archive</a>. Since I was running from Linux instead of Windows (what the <code>irixboot</code> author tested), the <code>bridgenic</code> param was just the name of my server's ethernet interface (<code>eno1</code>). From there, all I needed was a <code>vagrant up</code> and I was ready!</p>
<h2 id="partitioning-the-disk">Partitioning the disk</h2>
<p>In most modern OS installers, partitioning the disk is part of the install process. Not so on IRIX! The IRIX installer seems to use the disk to store temporary files during installation, so you have to have valid partitions set up separately. To do that, you must boot to the Command Monitor:</p>
<pre><code>System Maintenance Menu

1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? 5
Command Monitor.  Type "exit" to return to the menu.
&gt;&gt;
</code></pre><p>and boot in to the <code>fx</code> partitioner from the “Installation Tools” disk</p>
<pre><code>&gt;&gt; bootp():/inst/stand/fx.ARCS
Setting $netaddr to 192.168.1.242 (from server )
Obtaining /inst/stand/fx.ARCS from server
93664+25632+7056+2804464+48784d+5808+8832 entry: 0x8bd4b0f0
Currently in safe read-only mode.
</code></pre><p>In the command I entered.</p>
<ul>
<li><code>bootp():</code> says “use whatever server BOOTP tells you to”</li>
<li><code>/inst</code> the path to the Installation Tools disc in <code>irixboot</code></li>
<li><code>stand/fx.ARCS</code> is the path to the <code>fx</code> partitioning tool on that disc.</li>
</ul>
<p>I found <a href="http://www.futuretech.blinkenlights.nl/6.5inst.html">Future Technology's guide</a> valuable in figuring out <em>how</em> to set things up - I accepted the defaults at each prompt until I got to the menu:</p>
<pre><code>----- please choose one (? for help, .. to quit this menu)-----
[exi]t               [d]ebug/             [l]abel/
[b]adblock/          [exe]rcise/          [r]epartition/
fx&gt;
</code></pre><p>chose “repartition” on the “rootdrive”, with the XFS filesystem:</p>
<pre><code>fx&gt; r

----- partitions-----
part  type        blocks            Megabytes   (base+size)
  0: xfs      266240 + 15201280     130 + 7422
  1: raw        4096 + 262144         2 + 128
  8: volhdr        0 + 4096           0 + 2
 10: volume        0 + 15467520       0 + 7552

capacity is 15467520 blocks

----- please choose one (? for help, .. to quit this menu)-----
[ro]otdrive        [u]srrootdrive     [o]ptiondrive      [re]size
fx/repartition&gt; ro

fx/repartition/rootdrive: type of data partition = (xfs)
Warning: you will need to re-install all software and restore user data
from backups after changing the partition layout.  Changing partitions
will cause all data on the drive to be lost.  Be sure you have the drive
backed up if it contains any user data.  Continue? yes
</code></pre><p>The Future Technology guide says you need to add a “label”, but that didn't seem to be an option for me, so I just proceeded to <code>/exit</code>.</p>
<h2 id="netbooting-the-irix-installer">Netbooting the IRIX installer</h2>
<p>That took me back to the “System Maintenance Menu” - this time choosing to “Install System Software”:</p>
<pre><code>                         Installing System Software...

                       Press &lt;Esc&gt; to return to the menu.



1) Remote Tape  2) Remote Directory  X) Local CD-ROM  X) Local Tape

Enter 1-4 to select source type, &lt;esc&gt; to quit,
or &lt;enter&gt; to start:
</code></pre><p>I used <code>2</code> for “Remote Directory”, entered in the IP address of my <code>irixboot</code> server and the path to the install tools disc:</p>
<pre><code>Enter the name of the remote host: 192.168.1.10
Enter the remote directory: /inst/dist
</code></pre><p>This kicks you <em>back</em> to the “Installing System Software” menu - you press enter to use your chosen settings to kick off an install:</p>
<pre><code>Setting $netaddr to 192.168.1.242 (from server )
Copying installation program to disk.
Setting $netaddr to 192.168.1.242 (from server )
......... 10% ......... 20% ......... 30% ......... 40% ......... 50%
......... 60% ......... 70% ......... 80% ......... 90% ......... 100%

Copy complete
Setting $netaddr to 192.168.1.242 (from server )
Setting $netaddr to 192.168.1.242 (from server )
IRIX Release 6.5 IP22 Version 05190108 System V
Copyright 1987-1998 Silicon Graphics, Inc.
All Rights Reserved.

gfe1: missing
gfe0: missing
xpi0: missing from slot 1
xpi0: missing from slot 0
root on /hw/node/io/gio/hpc/scsi_ctlr/0/target/1/lun/0/disk/partition/1/block ; boot swap file on /dev/swap swplo 57000
Creating miniroot devices, please wait...
/hw/node/io/gio/hpc/scsi_ctlr/0/target/1/lun/0/disk/volume/char: [Alert] Illegal request: Illegal field in CDB (asc=0x24, asq=0x0), Block #0

Current system date is Mon Dec 15 12:14:34 PST 2014
</code></pre><p>(the clock in my machine is stuck in the past!).</p>
<p>Since I just repartitioned the disk in <code>fx</code>, the installer needs to make a file system on it:</p>
<pre><code>Mounting file systems:

/dev/dsk/dks0d1s0: Invalid argument
/hw/node/io/gio/hpc/scsi_ctlr/0/target/1/lun/0/disk/volume/char: [Alert] Illegal request: Illegal field in CDB (asc=0x24, asq=0x0), Block #40601
No valid file system found on: /dev/dsk/dks0d1s0
This is your system disk: without it we have nothing
on which to install software.
Make new file system on /dev/dsk/dks0d1s0 [yes/no/sh/help]: yes

About to remake (mkfs) file system on: /dev/dsk/dks0d1s0
This will destroy all data on disk partition: /dev/dsk/dks0d1s0.

        Are you sure? [y/n] (n): y

        Block size of filesystem 512 or 4096 bytes? 4096

Doing: mkfs -b size=4096 /dev/dsk/dks0d1s0
meta-data=/dev/rdsk/dks0d1s0     isize=256    agcount=8, agsize=237520 blks
data     =                       bsize=4096   blocks=1900160, imaxpct=25
         =                       sunit=0      swidth=0 blks
log      =internal log           bsize=4096   blocks=1000
realtime =none                   extsz=65536  blocks=0, rtextents=0
unwritten flagging is enabled

Trying again to mount /dev/dsk/dks0d1s0 on /root.

/hw/node/io/gio/hpc/scsi_ctlr/0/target/1/lun/0/disk/volume/char: [Alert] Illegal request: Illegal field in CDB (asc=0x24, asq=0x0), Block #0
UX:make: INFO: `scsi' is up to date.
    /dev/miniroot            on  /
    /dev/dsk/dks0d1s0        on  /root

</code></pre><h2 id="installing-irix">Installing IRIX</h2>
<p>Now it's time for the <em>real</em> installing to begin.</p>
<pre><code>Invoking software installation.

What is the hostname (system name) of your machine? indy
What is the network address of indy? 192.168.1.242
What is the netmask for 192.168.1.242?
Press Enter for the IP class default [0xffffff00]:
Starting network with hostname: indy, at ip address: 192.168.1.242
</code></pre><p>Man, it's asking <em>again</em> for an IP address - the Indy is from an time where ubiquitous reliable DHCP was not a thing. That final obstacle was all gated the main menu of the IRIX install tool (creatively named <code>inst</code>):</p>
<pre><code>Default distribution to install from: 192.168.1.10:/inst/dist

For help on inst commands, type "help overview".


Inst 3.3 Main Menu

 1. from [source ...]            Specify location of software to be installed
 2. open [source ...]            Specify additional software locations
 3. close [source ...]           Close a software distribution location
 4. list [keywords] [names]      Display information about software subsystems
 5. go                           Perform software installation and removal now
 6. install [keywords] [names]   Select subsystems to be installed
 7. remove [keywords] [names]    Select subsystems to be removed
 8. keep [keywords] [names]      Do not install or remove these subsystems
 9. step [keywords] [names]      Interactive mode for install/remove/keep
10. conflicts [choice ...]       List or resolve installation conflicts
11. help [topic]                 Get help in general or on a specific word
12. view ...                     Go to the View Commands Menu
13. admin ...                    Go to the Administrative Commands Menu
14. quit                         Terminate software installation

Inst&gt;
</code></pre><p>The “default distribution” is a reminder that <code>inst</code> knows about the “Installation Tools” disc it booted from, but needs to be told about the other four CDs:</p>
<pre><code>Inst&gt; open irixboot:foundation/dist
What is the network address of irixboot? 192.168.1.10
Reading product descriptions .. 100% Done.

Inst&gt; open irixboot:apps/dist

...
there was a long readme about Netscape here
...

Inst&gt; open irixboot:nfs/dist
Relocating distribution location irixboot:nfs/dist to irixboot:nfs/dist/dist6.5
.
Reading product descriptions .. 100% Done.

Inst&gt;
</code></pre><p>I went with the package sets Future Technology recommended, and started the installation:</p>
<pre><code>Inst&gt; keep *

Inst&gt; install standard

Inst&gt; install prereqs
No matches for "prereqs" were found

Inst&gt; go
</code></pre><p>This takes a <em>very</em> long time (the <a href="http://www.futuretech.blinkenlights.nl/6.5inst.html">Future Technology Guide</a> even has a table of how different workstations perform differently - apparently CPU has a lot to do with it). Mine took 130 minutes, from <code>go</code> to reboot:</p>
<pre><code>Ready to restart the system.  Restart? { (y)es, (n)o, (sh)ell, (h)elp }:
Preparing to restart system ...

The system is being restarted.
</code></pre><h2 id="postinstall">Postinstall</h2>
<p>After install, the machine came up nicely:</p>
<pre><code>IRIX Release 6.5 IP22 Version 05190003 System V
Copyright 1987-1998 Silicon Graphics, Inc.
All Rights Reserved.

dksc0d1: [Alert] Illegal request: Illegal field in CDB (asc=0x24, asq=0x0), Block #0
The system is coming up.
Warning: Internet Gateway web server running as root.
Use "chkconfig webface off" if you wish to disable.
startup: listening to port 80 as nobody



indy console login: root
IRIX Release 6.5 IP22 indy
Copyright 1987-1998 Silicon Graphics, Inc. All Rights Reserved.
Last login: Mon Dec 15 14:46:00 PST 2014 on ttyd1
TERM = (vt100)
indy 1#
</code></pre><p>Since I was still using a serial console, my first steps from here were to set up remote X sessions. Mine needed:</p>
<ul>
<li>
<p>DNS to be configured in <code>/etc/resolv.conf</code>:</p>
<pre><code>domain taketimetobesafe.biz
nameserver 192.168.1.1
</code></pre></li>
<li>
<p>a default route to be entered in <code>/etc/config/static-route.options</code>:</p>
<pre><code>$ROUTE $QUIET add net default 192.168.1.1
</code></pre></li>
<li>
<p>an X11 font server enabled (where would we be without fonts!):</p>
<pre><code>indy # chkconfig fontserver on
</code></pre></li>
</ul>
<p>Since I had just changed a bunch of network connections (and this machine was made in 1993) a reboot seemed in order. After it came back up, I connected a remote X session. In this case, I was using Xming on Windows (for some reason XQuartz just crashes when I try to connect). The effective Xnest command my options translates to is: <code>Xnest -query indy.taketimetobesafe.biz -screen 0 1024x768@1 -fp tcp/indy.taketimetobesafe.biz:7100</code>. This gave me a login window!</p>
<p><img src="http://blog.pizzabox.computer/img/indy/irix_login.png" alt="IRIX login window"></p>
<h2 id="a-desktop">A desktop</h2>
<p>My understanding is that on a new IRIX box, you're expected to log in as the EZsetup user, which launches a configuration wizard. For whatever reason, this doesn't seem to work at all over a remote session (it logs in, and just goes to a totally empty 4dwm session). No matter, though - I <em>can</em> log in as root:</p>
<p><img src="http://blog.pizzabox.computer/img/indy/irix_desktop.png" alt="IRIX desktop on first login"></p>
<p>There you have it! I'm rather pleased to get the first GUI desktop from one of my pizzaboxes. Though I haven't yet made input adapters to use it directly, a remote X session is still a heck of a lot of fun.</p>

</article><article>
  
  <time datetime="2017-09-18T21:00:00-0400">Mon, Sep 18, 2017</time>
  <p>The pizza delivery folks have been stopping by my house a lot lately, and not just with pineapple and ham!</p>
<h2 id="do-macs-really-belong-here">Do Macs really belong here?</h2>
<p>In “<a href="http://localhost:1313/posts/what-is-a-workstation/">What is a Workstation?</a>", I declared that “a workstation is a computer system designed to be used by a professional”. In the classic Mac era, Apple targeted three markets: home users, education, and “creatives” - desktop publishing, image processing, video editing, and sound recording. The final category certainly fit in to my definition of “professional”, even if the first two don't.</p>
<p>Apple helpfully separates Macintoshes into different brands:</p>
<ul>
<li>Performa / iMac for home users</li>
<li>LC / eMac for education customers</li>
<li>Mac II and Quadra (m68k), Power Macintosh (PPC), Mac Pro (Intel) for creatives</li>
</ul>
<p>They're not <em>perfectly</em> aligned: home and education computers were also sold as PowerMacs, some Mac II models were more “home” than “workstation”, and the Centris line doesn't really fit. While they all ran the same software, used the same chips, and were sold by the same company, the clear market <em>positioning</em> makes it easy for me to declare that yes, some Macs were sold and used as workstations.</p>
<h2 id="a-busted-up-quadra">A busted-up Quadra</h2>
<p>The first of the two macs (both in production date, and in joining my collection) is a <a href="http://blog.pizzabox.computer/pizzaboxes/quadra605">Quadra 605</a>. While it's one of the lowest-spec Quadras, it is decidedly the most pizza-box-y. The “LC” form-factor Macs (named for the first such Mac) are probably the first machines I ever heard called a “pizza box”, so they occupy a special place in my heart. The Quadra 605 is sadly unable to run A/UX, Apple's Unix-combined-with-System-7 offering - it wasn't available with an FPU, and even if you replace its CPU with one that <em>does</em> have an FPU, Apple never made A/UX enablers for it. Thus, a Quadra 610 is still on my “to acquire” list.</p>
<p>This particular specimen arrived in pretty poor condition. It was shipped to me in a battered old NewEgg box, lightly wrapped in bubble wrap, sitting in a pile of packing peanuts. Unfortunately, there was nothing to hold the bubble-wrapped pizzabox in place in box, so it looks like it bounced around inside a <em>ton</em>.</p>
<twitter-widget id="twitter-widget-14" data-tweet-id="900496386336198656"></twitter-widget>


<p>The sides of the case were cracked, the back plate broken clean off, and <em>inside</em> the case, all of the obnoxious tiny pieces of plastic that held the motherboard and drives in place without screws had sheared off. Everything inside was free-floating around the case.</p>
<p>I'm not really sure what I can <em>do</em> about this - I'm keeping my eye out for spare cases (not holding my breath, though) and folks selling 605s for parts. Perhaps one day I'll do a detour in to plastic case manufacturing (could it be 3D printed?) and looking for the original case schematics, but it's back-burner for now.</p>
<h2 id="an-intact-powermac">An intact PowerMac</h2>
<p>I had better luck with a Power Macintosh 6100 - it was properly secured in shipping, and so the only bits snapped off are ones that I did opening up the case (oops). Things seem to be in order - it plays the original PowerMac startup chime:
</p><twitter-widget id="twitter-widget-15" data-tweet-id="905947507213176832"></twitter-widget>


I haven't been able to test this one out further than that, though. The original PowerMac models (6100/7100/8100) had <strong>an unusual video jack</strong> - the HDI-45. It's…a <a href="http://www.kan.org/6100/graphicshardware.html">frankly unusual square-ish connector</a> that also holds keyboard, mouse, and audio (reminds me of the NeXTstation's DB19!). Despite having an 8100/80av a decade ago, I forgot this detail, so verifying that its video works is blocked on me getting an adapter.
<h2 id="the-hp-thats-sovers-exactly-9000">The HP that's <!-- raw HTML omitted -->over<!-- raw HTML omitted --> exactly 9000!</h2>
<p>The HP 9000 line was one of the longest surviving - HP made HP 9000 computers until 2008, after SGI had become a Supermicro reseller, Sun was swallowed by Oracle, DEC only a memory, and NeXT long-since transformed into Apple. The one I picked up is a model 712 - a lower-cost pizza box from the end of the first generation of PA-RISC HP 9000 workstations:
</p><twitter-widget id="twitter-widget-16" data-tweet-id="906603835061358594"></twitter-widget>


I <em>believe</em> this is the first workstation I've bought that didn't come with a hard drive (several of the models I have <em>could</em> have been configured without one). It also doesn't have a floppy drive, so moving forward is gonna mean I need to figure out how to netboot old versions of HP-UX. I love a challenge!

</article><article>
  
  <time datetime="2017-09-09T22:20:00-0400">Sat, Sep 9, 2017</time>
  <p>Once the power supply was <a href="http://blog.pizzabox.computer/posts/indy-power-supply-replacement">in order</a>, my next focus was booting it to a usable state. I ran into <em>quite</em> a few stumbling blocks along the way - this post doesn't end with a 4Dwm desktop (though a future one will!).</p>
<h2 id="broken-hard-drive">Broken hard drive</h2>
<p>The first issue was the scraping and grinding sound coming from one of the hard drives! On boot, it sounded like one of the disks was <em>trying</em> to spin up, encountering some…resistance…spinning down, and trying again. My Indy has two disks in it, so I figured out which one by process of elimination and disconnected it.</p>
<h2 id="working-from-a-console">Working from a console</h2>
<p>Since I <a href="http://blog.pizzabox.computer/posts/the-dream">don't have</a> a PS/2 keyboard and mouse, hooking the Indy up to a monitor and directly using it is not an option. Some researching on the <a href="http://www.nekochan.net/wiki/Headless">Nekochan wiki</a> confirmed that a DB25 to mini-DIN 8 cable would do the trick - I grabbed one from <a href="https://www.monoprice.com/product?c_id=102&amp;cp_id=10215&amp;cs_id=1021501&amp;p_id=521&amp;seq=1&amp;format=2">Monoprice</a>.  These are fairly common thanks to Apple using the same connector (mini-DIN 8) for their serial ports in the pre-USB era.</p>
<p>By chance, I seem to have gotten the right one: they sell a <em>very</em> similar <a href="https://www.monoprice.com/product?c_id=102&amp;cp_id=10215&amp;cs_id=1021501&amp;p_id=516&amp;seq=1&amp;format=2">cable</a> that sounds like it tries to account for a different signaling standard (Mac serial ports were RS-422, whereas the Indy's is RS-232). The one I got also seems to be a null-modem cable (though the listing doesn't say this) - that means I can more or less directly connect it to the Indy and to my USB Serial adapter and be all set.</p>
<p>With the wires plugged in, I used <code>minicom</code> on my laptop (set to 9600bps, no parity, one stop bit, 8 bits per character, and software flow control), and turned on the Indy. To get a Unix tty on the serial port, you have to enable it in the PROM monitor. At the prompt, I pressed <code>&lt;Esc&gt;</code> to enter maintenance:</p>
<pre><code>To perform system maintenance instead, press &lt;Esc&gt;

System Maintenance Menu

1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option?
</code></pre><p>picked option 5 (the PROM monitor), and disabled the local graphics console:</p>
<pre><code>Command Monitor.  Type "exit" to return to the menu.
&gt;&gt; setenv console d
</code></pre><p>After rebooting, an OS came up!</p>
<h2 id="getting-root">Getting root</h2>
<p>Incredibly, the remaining hard drive had a functioning OS on it! The</p>
<pre><code>IRIX Release 6.5 IP22 Version 05190003 System V
Copyright 1987-1998 Silicon Graphics, Inc
All Rights Reserved.
</code></pre><p>banner was encouraging. The login prompt, however, was not. The internet pointed towards some typically wide-open IRIX user accounts (<code>EZsetup</code>, <code>lp</code>, and <code>guest</code>) but this machine had them locked down. On some operating systems (macOS and most Linuxes, in particular), there is a “single-user mode” that automatically logs you in as root. This sounds like a huge security hole (and kind of is), but is in keeping with the reality that if you have physical access to a computer, you can <em>get</em> root anyway. IRIX's single-user mode requires you to know the root password, so I had to do it the hard way.</p>
<p>The goal is to mount the Indy's filesystem and clear out root's password from <code>/etc/shadow</code>, letting me log in with no password. My Indy doesn't have a floppy drive, and I don't have an external SCSI CD drive, so the only remaining option to get an OS running where I can mount the local disk is to netboot.</p>
<h2 id="a-netbooting-detour">A netbooting detour</h2>
<p>SGI machines support netbooting using a familiar collection of protocols:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc951">bootp</a> for getting an IP address</li>
<li><a href="https://tools.ietf.org/html/rfc1350">tftp</a> for fetching a boot loader over the network</li>
<li><a href="https://tools.ietf.org/html/rfc1282">rsh</a> for the boot loader to fetch further parts of a root file system</li>
</ul>
<p>The first two might be familiar in a netbooting context - <code>bootp</code> evolved into <code>dhcp</code>, which along with <code>tftp</code>, are used in modern <a href="https://en.wikipedia.org/wiki/Preboot_Execution_Environment">PXE</a> netbooting of x86 computers. <code>rsh</code> is interesting though - where nowadays, a PXE bootloader usually grabs an OS image via HTTP, the Indy seems to use <code>ssh</code>'s completely insecure predecessor. I'm not <em>completely</em> sure what it ends up running over <code>rsh</code> (perhaps the topic of a future blog post!), but my research indicates that whatever it does, it strongly expects the user it logs in as (<code>guest</code>, with no password) to use the Korn shell (some discussion <a href="http://techpubs.spinlocksolutions.com/irix/remote-irix-6.5-installation-from-linux.html">here</a>).</p>
<p>My router handles <code>bootp</code> fine, and I can run <code>tftpd</code> easily on one of my home servers, but <code>rsh</code> felt like it crossed a bit of a line into “what am I even doing”. Thankfully, the SGI enthusiast community produced a virtual machine that is already set up - DINA (deBug's IRIX Netboot Appliance). I followed along with the guide on the <a href="http://www.nekochan.net/wiki/Using_DINA_for_network_installation_of_IRIX">Nekochan wiki</a>, bringing IRIX 6.5 install CD images that I got from the <a href="https://archive.org/search.php?query=irix%206.5">Internet Archive</a>.</p>
<h2 id="getting-root-take-2">Getting root, take 2</h2>
<p>Netbooted into the IRIX installer, I launched a shell and took stock. My Indy's root partition had been mounted for me (entertainingly at <code>/root</code>, since IRIX seems to make <code>/</code> the root <em>user</em>‘s home directory). Remember, my goal is to clear the root user's password by <a href="https://stackoverflow.com/a/11700775">editing <code>/etc/shadow</code></a>.</p>
<p>So, all I need to do is a quick</p>
<pre><code># vi /root/etc/shadow
</code></pre><p>right? Well, it turns out the IRIX install image doesn't have <code>vi</code> installed. What does it have? The <strong>standard</strong> editor, <code>ed</code>. I had never actually <em>used</em> <code>ed</code> - it's mostly the butt of a <a href="https://www.gnu.org/fun/jokes/ed-msg.txt">running joke</a> from 1991. With the help of the (aptly named) <a href="https://sanctum.geek.nz/arabesque/actually-using-ed/">Actually Using Ed</a>, I managed to clear root's password.</p>
<h2 id="moment-of-truth">Moment of truth</h2>
<p>Was this enough to get in? My first attempt (straight up booting and trying to log in) failed - this time, with a message that root wasn't <em>allowed</em> to log in on this console. Though I later learned <a href="http://csweb.cs.wfu.edu/~torgerse/Kokua/SGI/007-2862-005/sgi_html/ch04.html#id5202783">where that is configured</a> (and so could have gone back to the netbooted installer environment and hacked it), in the moment, I tried single-user mode again:</p>
<twitter-widget id="twitter-widget-17" data-tweet-id="900882275461681152"></twitter-widget>


<p>Success! Time to give poor root a password again, and make myself a normal user account (<code>soph</code> instead of my more typical <code>sophaskins</code>, because of IRIX's 8 character limit on usernames).</p>
<h2 id="frustration">Frustration</h2>
<p>Unfortunately, I never was able to log in as <code>soph</code>. My logins didn't <em>fail</em> (there was no message like when I used an incorrect password), it just…didn't happen. I'd just get sent immediately back to a login prompt. Attempts to find logs indicating what happened, obvious permissions problems, or really <em>any</em> indication of what happened were fruitless.</p>
<p>At the same time, I <em>still</em> couldn't log in as root in multi-user mode! After unlock root logins at any console, I'd be faced with a segfault (!?!?!) when trying to log in. By this time, I was feeling pretty bummed out and decided that perhaps it was time to try a fresh install. That story (and the graphical desktop it resulted in) will be in a future post!</p>

</article><article>
  
  <time datetime="2017-09-02T16:20:00-0400">Sat, Sep 2, 2017</time>
  <p>When I first got the Indy, it <strong>seemed to work</strong>. When I pushed the power button,</p>
<ul>
<li>it played the <a href="https://twitter.com/sophaskins/status/895402604473323520">startup jingle</a></li>
<li>when connected to a monitor, it gave output! (complaining about the lack of keyboard)</li>
<li>the light on the front of the case would cycle between red and green, before stabilizing on green</li>
</ul>
<p>A few weeks later, I got the right serial cable to attach a console, and…it <em>no longer worked</em>:</p>
<ul>
<li>no jingle played - the speaker sometimes crackled or gave off a faint whimper</li>
<li>something smelled funny (maybe the <a href="https://en.wikipedia.org/wiki/Magic_smoke">magic smoke</a> was escaping!)</li>
<li>the light cycled between red and green somewhat erratically</li>
<li>on my attached serial console, it appeared to be looping through startup - at that point, I might have considered a “full” startup to be text like:
<pre><code>Data path test                             *FAILED*
RTC path test                              *FAILED*

Running power-on diagnostics...
Starting up the system...

To perform system maintenance instead, press &lt;Esc&gt;
</code></pre></li>
</ul>
<p>but it wouldn't always make it to the <code>&lt;Esc&gt;</code> prompt - sometimes it just kept repeating the first two tests.</p>
<p>That's pretty broken! I stoped trying to boot it (in case I was somehow damaging the electronics), and looked online for ideas. Apparently, a common problem with old Indys is  the <a href="http://www.nekochan.net/wiki/SGI_Indy#Continued_use">power supply failing</a>. My Indy had the brand of power supply that was affected (Nidec) - it seemed like a plausible explanation. To dig a little further, I broke out the multimeter and checked the voltage on the Molex connector that normally goes to the hard disks - when I turned on the juice, the voltage was jumping <em>all over the place</em>.</p>
<p>I looked on eBay for replacement power supplies (a lot of old computers get parted out if something breaks), and found a Sony one - the brand that was supposed to be OK. Replacing the power supply once it arrived was super easy - there's only one screw holding it in place:</p>
<p>![the screw holding power supply in place](/img/indy/one screw.jpeg)</p>
<p>With that removed, you can slide the power supply apart from the rest of the chassis - it doesn't sit <em>inside</em> the chassis, it sits <em>next to it</em>:</p>
<p>![power supply next to chassis](/img/indy/power supply.jpeg)</p>
<p>In real life, I just popped the new power supply in and immediately tried it out, but in writing this post I checked out the voltages both power supplies put out. One thing that stood out to me was that the 12V rail (yellow wire) on the busted power supply…wasn't reading 12V! On the broken one, it was at about 6V:</p>
<p>![bad power supply only reads 6V](/img/indy/bad psu.jpeg)</p>
<p>On the good one, it read a much healthier 12V:</p>
<p>![good power supply reads 12V](/img/indy/good psu.jpeg)</p>
<p>The new power supply brought back the jingle and let me move on to the next thing: getting the OS booting! But what <em>specifically</em> was wrong with the power supply? I often see folks mention capacitors bursting as the cause of power supply failure. Though I'd love to crack open the bad power supply and see what I can see (and maybe re-cap it!), I'm not going to for now:</p>
<ul>
<li>its metal case seems to be riveted together, which is beyond my small-apartment tool collection</li>
<li>POWER ELECTRONICS (A/C) CAN BE <strong>VERY DANGEROUS</strong>. Power supplies in particular shouldn't be opened until the capacitors inside have fully drained. I don't feel qualified to judge when things are safe, so I'm gonna save that for another day.</li>
</ul>

</article><article>
  
  <time datetime="2017-08-23T20:30:00-0400">Wed, Aug 23, 2017</time>
  <p>Just over a month ago, late at night I was engaging in one of my favorite hobbies, “reread computing history articles on Wikipedia”.</p>
<twitter-widget id="twitter-widget-18" data-tweet-id="887136872430022656"></twitter-widget>


<p>I'm…perhaps not known for having incredibly good self control, so some eBay browsing later, I'd found a NeXTstation on eBay that seemed like a good starting point.</p>
<h2 id="nextstation">NeXTstation</h2>
<p>I grew up in a Mac family (my parents are both teachers) - being “something of a nerd”, I loved Apple trivia. The internet was all too willing to oblige. NeXT's workstations were, then, probably the first I ever heard about - an obscure offshoot of Macintosh lore, the matte-black NeXTcube and its funky Mach-based operating system. I'd lusted over one, but their prices were far more than my high-school job wages could justify.</p>
<p>It was a no-brainer for a NeXTstation to be my first pizzabox. The eBay seller I bought it from was the same person who ran the store I gawked at way back when (<a href="http://www.blackholeinc.com/specials/blackhardware.shtml">Black Hole Inc</a>)</p>
<p><a href="http://blog.pizzabox.computer/pizzaboxes/nextstation">My NeXTstation</a> (a non-turbo mono) seems to be in good working order (I recently got video cables to confirm that it boots!) but is probably going to be one of the most tricky to make usable. NeXT used an extremely-hard-to-find monitor plug (DB-19), which not only carried video signals, but also:</p>
<ul>
<li>power for the monitor</li>
<li>digital signals that were decoded in to keyboard, mouse, and sound by the monitor (or by a “Soundbox”)</li>
<li>briefly shorting two pins is actually the only way to turn the whole thing on</li>
</ul>
<p>Soundboxes compatible with my model (non-ADB soundboxes) are rare and expensive, so I'm setting out to make my own equivalent - a microcontroller-based converter box that:</p>
<ul>
<li>takes a DB-19 cable as input</li>
<li>has USB ports for a modern keyboard and mouse</li>
<li>outputs video as HDMI (go big or go home, amirite?)</li>
<li>converts signals between all these</li>
</ul>
<p>This motivated the idea of building similar converters for <em>all</em> of my workstations.</p>
<h2 id="sparcstation-1">SPARCstation 1+</h2>
<p>Not long after the NeXTstation arrived, a friend offered <a href="http://blog.pizzabox.computer/pizzaboxes/sparcstation">a SPARCstation</a> he had lying around! Sun made perhaps the most recognizable pizzaboxes - they might have even been the first! (the Sun 3/50 was 1986). A perfect addition to my collection. I felt pretty badass taking it home on the subway:</p>
<twitter-widget id="twitter-widget-19" data-tweet-id="891444729195503616"></twitter-widget>


<p>Using a serial console, I've verified that it boots to the PROM monitor, but doesn't seem to like either of the hard drives inside. The framebuffer works, but because I don't have a keyboard connected, it only informs me that all output is on the serial console. In addition to the converter box, this one might need a disk replacement, and potentially to have an OS installed. If it needs an OS, I'd hope to netboot it rather than hunt down a SCSI CD-ROM drive.</p>
<h2 id="sgi-indy">SGI Indy</h2>
<p>The Indy is <a href="http://blog.pizzabox.computer/pizzaboxes/indy">quite a contrast</a> with the SR-71 Blackbird-esque NeXTstation and the business-like SPARCstation - it's bright blue, asymmetrical, and <em>loaded</em> with multimedia features. I made eBay alerts for pizzaboxes I was interested in once I started collecting - don't want to miss a deal! Some Indys were listed for exorbitant prices (&gt; $700…sorry dude), but this one came along at a price I was happy with.</p>
<p>It turns out this particular one used to live at my alma mater (judging by the CMU asset tag and return postal address in Pittsburgh). When I first got it, I had to turn it on (even without video or serial cables) because it has a ridiculous boot sound:</p>
<twitter-widget id="twitter-widget-20" data-tweet-id="895402604473323520"></twitter-widget>


<p>Since then, I've gotten the right cabling to verify that its framebuffer is still working, and later that its PROM monitor works. Sadly, by then I started having trouble with its power supply - the jingle no longer graces my living room, the hard drives seem to have trouble spinning up, and there's that unmistakable smell of the Magic Smoke escaping some components. I've decided to hold on booting it again until I can get a fresh power supply. I might later look into whether all it needs is re-capping, but “messing with power electronics” probably <em>isn't</em> a great first project.</p>
<h2 id="vaxstation">VAXstation</h2>
<p>This one is quite a bit different from the others. The <a href="http://blog.pizzabox.computer/pizzaboxes/vaxstation">VAXstation 4000 VLC</a> has a CISC chip (but not the common m68k) and I intend to use it to run OpenVMS, not a Unix. I'm pretty psyched about it because it is so different from the others - it stays closer to its PDP/11 heritage than the rest (who only inherited Unix from the venerable minicomputer). Like the Indy, most of the ones I could find for sale were exhorbitantly priced (more than $1000 in this case!). I suspect that the VLC is sought after because:</p>
<ul>
<li>it's a legit VAX, so can replace an elderly failing larger VAX without needing to change software</li>
<li>it's tiny</li>
</ul>
<p>The one I got was listed at very fair price after retiring from being an industrial controller, so I snapped it up. DEC's connectors are even more unusual than the other boxes - it uses a DA3W3 (<em>not</em> a DB13W3) monitor port, special MMJ serial port, a telephone handset port for the keyboard, and an unusual mini-DIN 7 for the mouse. It'll probably take a bit longer to get the right connectors to get it up and running!</p>
<h2 id="today">Today</h2>
<p>This catches us up more or less to where I'm at today: with a pile of workstations, none of which are “done”. With this post, I've also started keeping a page for each workstation - you can see them in the sidebar. I'll update those with more details as I research them, and with the current state of each box.</p>

</article><article>
  
  <time datetime="2017-08-20T14:52:04-0400">Sun, Aug 20, 2017</time>
  <p>I know I've been stringing you all along for a bit - I've acquired a handful of workstations, some electronic components, some adapter cables, and I'm excited to get my hands dirty and show y'all the restoration process. Before we get to that, I want to explain one of my goals from the <a href="http://blog.pizzabox.computer/posts/welcome">welcome post</a> a bit more in depth.</p>
<h3 id="restoration">Restoration</h3>
<p>Most of the machine's I've got my eye on are nearly 30 years old, and might not have been earnestly used for 20 years. I would like to get each one in my collection <strong>booting with its contemporary operating system, running software it would have been bought for</strong>.</p>
<p>In getting hardware bootable, I'd prefer to keep as many original <em>spec</em> components as possible (that is, components in keeping with the original spirit of the machine). I do expect to have to replace many parts past their prime. Power supplies, hard drives, and clock batteries in particular seem to have shorter lives than CPUs, motherboards, frame-buffers, and RAM chips. I will <em>not</em> end up hollowing out the guts, putting a microITX motherboard inside, and just emulating the original OS.</p>
<p>Software-wise, I expect to have…an entertaining time looking for original OS install media / downloading it from the corners of the Internet. Specialized application software might no longer exist (/me pours one out for bytes gone-bye). I'm not going to settle for just running NetBSD on everything, though. I'm not interested in porting Firefox, or using the GCC toolchain. This project is about being able to recreate the experience of the workstations being new and top-of-the-line, warts and all.</p>
<p>Aesthetically, some of the computers may be in…somewhat “well-loved” condition. At some point, paint will probably have to be researched, yellowed plastic will need to be cleaned, and dust blown out.</p>
<h3 id="modern-peripherals">Modern Peripherals</h3>
<p>One part of the original experience I <em>don't</em> want to recreate is peripherals. Part of this is practical - I live in an NYC apartment, and don't have space for tons of proprietary keyboards, let alone a wide variety of CRT monitors. I also just…don't think they're a super important part of the experience.</p>
<p>Instead, a big part of this project will be building software and hardware that take modern USB keyboards and mice, and translate their signals in to the format needed by the workstations (kind of like a reverse <a href="https://github.com/tmk/tmk_keyboard">TMK Keyboard</a> project). I also want to adapt the original video signals to something easier to display.</p>
<p>There's plenty of $PROPRIETARY-to-VGA adapter cables out there, but my goal is to take this a step further and digitize the signals. There are VGA-to-HDMI adapter boxes out there, and I intend to use similar chips to adapt the various analog signals to HDMI.</p>
<h3 id="the-dream">The Dream</h3>
<p>With all this, then, the dream is to have workstations that look like new, run like they did when new, and use period-appropriate software, connected up to converter boxes that let me use USB keyboards &amp; mice and HDMI monitors.</p>
<p>Thanks for bearing with me in all these early walls-of-text! I promise that now I'm gonna get down to business and start making posts with pictures, stories, and frustrations.</p>

</article><article>
  
  <time datetime="2017-08-17T21:30:00-0400">Thu, Aug 17, 2017</time>
  <p>If this project is about restoring pizzabox workstations, I have some defining of terms to do. A workstation sometimes means the desk where you work; a pizzabox normally contains a delicious tomato, crust, and cheese combination. For my project, though:</p>
<p><strong>A workstation is a computer system designed to be used by a professional.</strong> It runs specialized software for purposes like CAD/CAM, video editing, desktop publishing, 3D modeling, scientific simulation, manufacturing control, or software engineering. A workstation's hardware integrates tightly with its operating system, which is usually written by the workstation's manufacturer (and typically a flavor of Unix).</p>
<p>This sounds a lot like a PC! Compared to contemporaneous PCs, a workstation has a significantly faster processor, better floating-point calculation speed, advanced graphical ability, faster storage, more memory, or more flexible networking. Workstations run an OS with more security features, better multitasking support, and more reliability than PCs.</p>
<p>Unlike minicomputers and mainframes, a workstation is normally used by one person at a time, in-person. By being used in-person, its graphics are low-latency and capable of playing video (difficult on an X Terminal!) or rendering 3D graphics in real-time.</p>
<p><strong>A pizzabox is a slim desktop form-factor of low-cost workstation models</strong>. There are a handful of distinctive workstation form-factors: PC-like desktops and towers, cube-like desk-standing pedestals, giant floor-standing pedestals, and pizzaboxes. Pizzaboxes tended to be lower-spec models sold for lower prices. Their small size works well with my tiny apartment, and the distinctive style seems to have hardly been adopted by PC manufacturers.</p>
<p><strong>From these definitions, I have some more specific opinions.</strong> I don't have a lot of good reasons for these, so take them with plenty of salt:</p>
<ul>
<li>the height limit for a pizzabox is 100mm</li>
<li>having an x86 or amd64 processor disqualifies a computer as a workstation</li>
<li>having an m68k processor is acceptable</li>
<li>some manufacturers that made workstations also made similar computers that are not - Apple's Quadra line are workstations, their Performa line (for home users) is not. The Sun SPARCclassic is a workstation, the Sun SPARCclassic X (with no disk, sold as an X Terminal) is not.</li>
<li>rack-mounted and VMEBus workstations are interesting, but not going to be focused on here</li>
<li>Windows NT, up through version 4, is acceptable (on non-Intel platforms)</li>
</ul>
<p>From these arbitrary rules, qualifying pizzabox workstations were made from the mid 1980s to the late 1990s. They started out using CISC chips (like the m68k) but mostly moved to RISC by the early 1990s. So far, I've identified pizzaboxes from the following workstation families:</p>
<ul>
<li>Apple Quadra (m68k)</li>
<li>Apple PowerMacintosh (PPC)</li>
<li>Data General Aviion (m88k)</li>
<li>DEC AlphaStation (Alpha)</li>
<li>DEC DECstation (MIPS)</li>
<li>DEC VAXstation (VAX)</li>
<li>HP 9000 (m68k, then PA-RISC)</li>
<li>IBM RS/6000 (PPC/Power)</li>
<li>NeXT NeXTstation (m68k)</li>
<li>SGI Indy (MIPS)</li>
<li>Sun 3 (m68k)</li>
<li>Sun SPARCstation (SPARC)</li>
</ul>
<p>and I expect to find more as I pour over more old spec sheets!</p>

</article><article>
  
  <time datetime="2017-07-30T21:01:38-0400">Sun, Jul 30, 2017</time>
  <p>Well hello! This is the pizzabox.computer project - my project to restore “pizzabox” workstations. My goals are to:</p>
<ul>
<li>collect pizzabox workstations from a variety of manufacturers - if possible, from both before and after the move from Motorola 68000 series CPUs to RISC CPUs</li>
<li>restore those workstations to be usable with modern peripherals (I don't have the closet space for a dozen CRTs!)</li>
<li>archive manuals, specifications, and sales data for workstations from the late 1980s to the mid 1990s</li>
<li>write essays about workstation history and what we can learn from it in the present day</li>
</ul>
<p>I'm looking forward to see where this project can go! I hope you'll join me.</p>

</article>
</div>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>