<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Throwing null literal | tabs &#x21B9; over &#x2423; &#x2423; &#x2423; spaces by Ji&#x159;&#xED; {x2} &#x10C;in&#x10D;ura -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Throwing null literal | tabs ↹ over ␣ ␣ ␣ spaces by Jiří {x2} Činčura</h1><div><div id="" class=""><h3>Throwing null literal <a href="/id/233800" rel="bookmark nofollow" title="Permalink"><span class="fa fa-link" aria-label="Permalink"></span></a></h3><p class="meta"><span class="fa fa-calendar" aria-label="Published"></span> 19 Sep 2019
	<span class="divider"></span><span class="fa fa-tags" aria-label="Tags"></span> C#
</p><p>“Every” week I discover something new (and I’m not afraid to share it). Today isn’t any different. Apparently, C# compiler is fine with code throwing <code>null</code> literal. Yes, it looks weird, but if you think about it, it makes sense. Let me show you.</p><p>The code below compiles fine and results in <code>NullReferenceException</code> being thrown.</p><pre><code class="language-csharp">static void Test1()
{
	throw null;
}
</code></pre><p>I don’t know about you, but this, if not weird, looks funny. The <code>NullReferenceException</code> thrown isn’t anything special and you can catch it is as usual.</p><pre><code class="language-csharp">static void Test2()
{
	try
	{
		throw null;
	}
	catch (NullReferenceException ex)
	{
		Console.WriteLine(ex.ToString());
	}
}
</code></pre><p>So why is <code>throw null</code> even allowed? It looks like a special case, to be disallowed, but it’s not. Following simple code is absolutely acceptable.</p><pre><code class="language-csharp">static void Test3()
{
	Exception GetMeException() =&gt; DateTime.Now.DayOfWeek == DayOfWeek.Thursday ? null : new InvalidOperationException();

	throw GetMeException();
}
</code></pre><p>Basically “sometimes” my code returns <code>null</code> and that is then thrown. Discussion whether that is a bug or not is another discussion.</p><p>When I first saw (and it was in reference assemblies) the <code>throw null</code> I was perplexed. But trying it and then thinking about it in broader context, I realized it’s just a valid (but pretty stupid, don’t do it) code stripped to absolute minimum.</p><h5>Update (based on comment below)</h5><p>This, exactly, is part of the <a href="https://github.com/dotnet/csharplang/blob/master/spec/statements.md#the-throw-statement">specification</a>.</p></div><div id="" class=""><p class="bio"><a href="/about"><img src="/assets/bio_image.png" alt="Profile Picture"></a>
		Jiří Činčura is an independent developer focusing on data and business layers, language constructs, parallelism and databases. Specifically Entity Framework, asynchronous and parallel programming, cloud and Azure. He's Microsoft Most Valuable Professional and you can read his articles, guides, tips and tricks at www.tabsoverspaces.com.
	</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>