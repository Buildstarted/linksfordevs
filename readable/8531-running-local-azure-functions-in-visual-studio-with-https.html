<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Running Local Azure Functions in Visual Studio with HTTPS -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Running Local Azure Functions in Visual Studio with HTTPS</h1><div><div class="entry-content"><p>This article shows how to setup a Visual Studio <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview">Azure Functions</a> project to work with HTTPS for local development. HTTP is configured per default and not HTTPS. The command line arguments need to be set correctly, and then the Azure Functions can be started in Visual Studio with HTTPS and take advantage of the break point debugging without having to attach the func process in Visual Studio.</p><p><strong>Install the tools for local Azure Function development</strong></p><p>To get Azure Functions to run locally, the following tools need to be installed. (As well as Visual Studio with the Azure components).</p><p><a href="https://azure.microsoft.com/en-us/features/storage-explorer/">Microsoft Azure Storage Explorer</a></p><p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-use-emulator">Microsoft Azure Storage Emulator</a></p><p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local#install-the-azure-functions-core-tools">Install the Azure Functions Core Tools</a></p><pre class="brush: jscript; title: ; notranslate" title="">npm install -g azure-functions-core-tools
</pre><p><strong>Install the Azure Functions Visual Studio Extensions</strong></p><p>Azure Functions and Web Jobs Tools need to be installed as an extension in Visual Studio.</p><p><img data-attachment-id="12131" data-permalink="https://damienbod.com/2019/03/14/running-local-azure-functions-in-visual-studio-with-https/azure_function_02/" data-orig-file="https://damienbod.files.wordpress.com/2019/03/azure_function_02.png" data-orig-size="1301,458" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="azure_function_02" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=640" src="https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=640&amp;h=225" alt="" width="640" height="225" class="alignnone size-full wp-image-12131" srcset="https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=640&amp;h=225 640w, https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=1278&amp;h=450 1278w, https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=150&amp;h=53 150w, https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=600&amp;h=211 600w, https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=768&amp;h=270 768w, https://damienbod.files.wordpress.com/2019/03/azure_function_02.png?w=1024&amp;h=360 1024w" sizes="(max-width: 640px) 100vw, 640px"></p><p><strong>Configure the Azure Functions project to use HTTPS</strong></p><p>Create a certificate and add this to the operating system.</p><pre class="brush: jscript; title: ; notranslate" title="">

openssl genrsa -des3 -passout pass:x -out server.pass.key 2048
 
openssl rsa -passin pass:x -in server.pass.key -out server.key
 
openssl req -new -key server.key -out server.csr
 
openssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt

</pre><p>or</p><pre class="brush: jscript; title: ; notranslate" title="">New-SelfSignedCertificate -DnsName "server.com", "server.com" -CertStoreLocation "cert:\LocalMachine\My"

Get the thumbprint for later use

$mypwd = ConvertTo-SecureString -String "1111" -Force -AsPlainText

Get-ChildItem -Path cert:\localMachine\my\"thumbprint  from above" | Export-PfxCertificate -FilePath C:\server.pfx -Password $mypwd
</pre><p>Copy the pfx file to the Function project, and configure the properties to copy this to the output.</p><p><img src="https://damienbod.files.wordpress.com/2019/03/azure_function_03.png?w=300" alt="" width="300" class="alignnone"></p><p>Configure the command line arguments for Debug. The application arguments starts with <strong>host</strong> in Visual Studio and not func! This would be <strong>func </strong>in the command line.</p><p><img data-attachment-id="12129" data-permalink="https://damienbod.com/2019/03/14/running-local-azure-functions-in-visual-studio-with-https/azure_function_01/" data-orig-file="https://damienbod.files.wordpress.com/2019/03/azure_function_01.png" data-orig-size="1093,338" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="azure_function_01" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=640" src="https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=640&amp;h=198" alt="" width="640" height="198" class="alignnone size-full wp-image-12129" srcset="https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=640&amp;h=198 640w, https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=150&amp;h=46 150w, https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=600&amp;h=186 600w, https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=768&amp;h=237 768w, https://damienbod.files.wordpress.com/2019/03/azure_function_01.png?w=1024&amp;h=317 1024w, https://damienbod.files.wordpress.com/2019/03/azure_function_01.png 1093w" sizes="(max-width: 640px) 100vw, 640px"></p><p>Or just set this in the launchSettings.json</p><pre class="brush: jscript; title: ; notranslate" title="">{
  "profiles": {
    "FunctionApp1": {
      "commandName": "Project",
      "commandLineArgs": "host start --useHttps --cert \"server.pfx\" --password \"1111\""
    }
  }
}
</pre><p>When you start the Azure Function project with Visual Studio, the HTTPS URL will be used. This can be checked in the command line window which opens up after starting. Break point debugging is now possible as we started from Visual Studio.</p><p><img data-attachment-id="12141" data-permalink="https://damienbod.com/2019/03/14/running-local-azure-functions-in-visual-studio-with-https/azure_function_04/" data-orig-file="https://damienbod.files.wordpress.com/2019/03/azure_function_04.png" data-orig-size="1368,518" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="azure_function_04" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=640" src="https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=640&amp;h=242" alt="" width="640" height="242" class="alignnone size-full wp-image-12141" srcset="https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=640&amp;h=242 640w, https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=1278&amp;h=484 1278w, https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=150&amp;h=57 150w, https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=600&amp;h=227 600w, https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=768&amp;h=291 768w, https://damienbod.files.wordpress.com/2019/03/azure_function_04.png?w=1024&amp;h=388 1024w" sizes="(max-width: 640px) 100vw, 640px"></p><p>If you start this from the console using the <strong>func start –useHttps –cert “server.pfx” –password “1111”</strong>, you need to attach the func process for break point debugging for using Visual Studio.</p><p><strong>Links:</strong></p><p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local" rel="nofollow">https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local</a></p><p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-use-emulator" rel="nofollow">https://docs.microsoft.com/en-us/azure/storage/common/storage-use-emulator</a></p><p><a href="https://azure.microsoft.com/en-us/features/storage-explorer/" rel="nofollow">https://azure.microsoft.com/en-us/features/storage-explorer/</a></p><p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview" rel="nofollow">https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview</a></p><p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-develop-vs" rel="nofollow">https://docs.microsoft.com/en-us/azure/azure-functions/functions-develop-vs</a></p><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><h3 class="jp-relatedposts-headline"><em>Related</em></h3></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>