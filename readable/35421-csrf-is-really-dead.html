<!DOCTYPE html>
<html lang="en">
<head>
    <title>
CSRF is (really) dead -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>CSRF is (really) dead</h1>
    <div class="post-content"> <p>A little while back I wrote a blog post about how &quot;CSRF is dead&quot;. It focused on SameSite cookies, a powerful yet simple feature to protect your website against CSRF attacks. As powerful as it was, and as much as it will kill CSRF, you had to enable it on your site, and that was the problem. Now, we&apos;re solving that problem.</p><br><h4 id="samesite-cookies">SameSite Cookies</h4><p>To understand the problem of CSRF and the solution that SameSite Cookies provides, you should first read my original blog <a href="https://scotthelme.co.uk/csrf-is-dead/">Cross-Site Request Forgery is dead!</a>. If you want further details on cookie protections you should also read <a href="https://scotthelme.co.uk/tough-cookies/">Tough Cookies</a>. The TLDR; there are powerful protections you can put in place to protect your users/visitors but you have to go and turn them on, they&apos;re opt-in mechanisms. In the perfect world you&apos;d enable SameSite by adding <code>SameSite=Lax</code> to your cookie, just like the <code>Secure</code> or <code>HttpOnly</code> flags.</p><br><pre><code>Set-Cookie: __Host-session=123; path=/; Secure; HttpOnly; SameSite=Lax</code></pre><br><p>It turns out that not many websites went and added the <code>SameSite=Lax</code> flag to their cookie. <code>[insert sad face here]</code></p><br><h4 id="samesite-by-default">SameSite by Default</h4><p>When SameSite first came out, nobody wanted to make it the default. It could break things, change expected (legacy) functionality and generally speaking the worry of breaking stuff stops us making progress. SameSite was made opt-in, but that&apos;s changing.</p><br><center>
<blockquote class="twitter-tweet"><p>TL;DR: `SameSite=Lax` by default. Folks who require cross-site access can opt-into the status quo via `SameSite=None`, but doing so will require asserting `Secure` as well.</p>&#x2014; Mike West (@mikewest) <a href="https://twitter.com/mikewest/status/1125861035389403137?ref_src=twsrc%5Etfw">May 7, 2019</a></blockquote> </center><br><p>Mike works on Chrome and I was <em>really</em> happy to see the idea of making security the default on cookies. You can track the Chrome Platform Status for <a href="https://www.chromestatus.com/feature/5088147346030592">Cookies default to SameSite=Lax</a> and see this is available behind a flag in Chrome 76 (already released) and will be landing in Chrome 78 (very soon). Website operators will need to do nothing to have the powerful protection of SameSite by default, but they may want to test that everything still works as expected using the flag in Chrome now: chrome://flags/#same-site-by-default-cookies</p><br><h4 id="more-secure">More Secure</h4><p>As mentioned in the links above, sites can opt-out of the SameSite protections if they need or want to. To do so, sites can set <code>SameSite=None</code> on their cookies and Chrome will respect the setting, but there is one requirement. The cookie must have the <code>Secure</code> flag set! You can track the Chrome Platform Status of <a href="https://www.chromestatus.com/feature/5633521622188032">Reject insecure SameSite=None cookies</a> but it&apos;s available behind a flag in Chrome 76 (now) and looks set to land in Chrome 80 later this year. The logic makes sense and the idea is to protect cookies sent in cross-site requests, that can be tracked and viewed on the network, from being sent over an insecure channel like HTTP. Again, site operators can test if there will be any impact using the flag: chrome://flags/#cookies-without-same-site-must-be-secure</p><br><h4 id="a-better-way">A better way</h4><p>I like and agree with the stance of having security features like this become the default. If site operators don&apos;t want this then they can easily opt-out, but this approach will result in a <em>far</em> higher rate of adoption for these features. Let&apos;s hope we can start to take this approach to more features as we move forwards with securing the web!</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>