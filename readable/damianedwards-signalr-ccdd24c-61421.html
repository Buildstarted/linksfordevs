<!DOCTYPE html>
<html lang="en">
<head>
    <title>
damianedwards / SignalR - ccdd24c - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="damianedwards / SignalR - ccdd24c - linksfor.dev(s)"/>
    <meta property="og:description" content="initial commit"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://bitbucket.org/damianedwards/signalr/commits/ccdd24cc0bd0cfbb1c799161af75b29433726edf"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - damianedwards / SignalR - ccdd24c</title>
<div class="readable">
        <h1>damianedwards / SignalR - ccdd24c</h1>
            <div>Reading time: 63-80 minutes</div>
        <div>Posted here: 06 May 2020</div>
        <p><a href="https://bitbucket.org/damianedwards/signalr/commits/ccdd24cc0bd0cfbb1c799161af75b29433726edf">https://bitbucket.org/damianedwards/signalr/commits/ccdd24cc0bd0cfbb1c799161af75b29433726edf</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="wrapper">
      
  





      
  



      <div id="content" role="main">
        
          
        
        
        
  <div>
    
    <div>

      <div id="repo-content" data-module="repo/index" data-project-id="3673593">
        
        
  
  <section id="commit" data-module="repo/commits/view">
    

    <section id="general-comments">
  
  
</section>


    
    
  

    
    
  

    
    
  

    

    
      <section id="commit-summary">
        

<ul id="commit-files-summary">
  
    
      <li data-file-identifier=".hgignore">
        <p><span>
            
              +9
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-.hgignore">
          .hgignore
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ.sln">
        <p><span>
            
              +20
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ.sln">
          WebQ/WebQ.sln
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/ISignaler.cs">
        <p><span>
            
              +8
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/ISignaler.cs">
          WebQ/WebQ/ISignaler.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/Mesenger.cs">
        <p><span>
            
              +70
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/Mesenger.cs">
          WebQ/WebQ/Mesenger.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/Properties/AssemblyInfo.cs">
        <p><span>
            
              +36
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/Properties/AssemblyInfo.cs">
          WebQ/WebQ/Properties/AssemblyInfo.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/SignalResult.cs">
        <p><span>
            
              +5
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/SignalResult.cs">
          WebQ/WebQ/SignalResult.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/SignaledEventArgs.cs">
        <p><span>
            
              +11
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/SignaledEventArgs.cs">
          WebQ/WebQ/SignaledEventArgs.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/Signalers/DefaultSignaler.cs">
        <p><span>
            
              +17
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/Signalers/DefaultSignaler.cs">
          WebQ/WebQ/Signalers/DefaultSignaler.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/TaskAsyncHelper.cs">
        <p><span>
            
              +44
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/TaskAsyncHelper.cs">
          WebQ/WebQ/TaskAsyncHelper.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/TaskWrapperAsyncResult.cs">
        <p><span>
            
              +34
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/TaskWrapperAsyncResult.cs">
          WebQ/WebQ/TaskWrapperAsyncResult.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/Web/HttpTaskAsyncHandler.cs">
        <p><span>
            
              +25
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/Web/HttpTaskAsyncHandler.cs">
          WebQ/WebQ/Web/HttpTaskAsyncHandler.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/Web/TaskAsyncController.cs">
        <p><span>
            
              +136
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/Web/TaskAsyncController.cs">
          WebQ/WebQ/Web/TaskAsyncController.cs
        </a>

        

        
        
      </li>
    
  
    
      <li data-file-identifier="WebQ/WebQ/WebQ.csproj">
        <p><span>
            
              +65
            
          </span>
          <span>
            
              -0
            
          </span>
        </p>

        <span data-module="components/tooltip" data-tooltip-gravity="s" original-title="Added">
          A
        </span>

        <a data-add-to-stack="true" href="#chg-WebQ/WebQ/WebQ.csproj">
          WebQ/WebQ/WebQ.csproj
        </a>

        

        
        
      </li>
    
  
</ul>
      </section>
    
    




    
    
  

    
    
  

    
    
  

    
    
  

    
    
  

    
    
  

<section id="changeset-diff">
  <div data-module="pullrequests/file-options">
  
    





  


<section data-path=".hgignore" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/.hgignore" id="chg-.hgignore" data-identifier=".hgignore" data-filename=".hgignore" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  
</section>
  
    





  


<section data-path="WebQ/WebQ.sln" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ.sln" id="chg-WebQ/WebQ.sln" data-identifier="WebQ/WebQ.sln" data-filename="WebQ/WebQ.sln" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+Microsoft Visual Studio Solution File, Format Version 11.00</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "WebQ", "WebQ\WebQ.csproj", "{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}"</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+	GlobalSection(SolutionConfigurationPlatforms) = preSolution</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		Debug|Any CPU = Debug|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		Release|Any CPU = Release|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+	GlobalSection(ProjectConfigurationPlatforms) = postSolution</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}.Debug|Any CPU.Build.0 = Debug|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}.Release|Any CPU.ActiveCfg = Release|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}.Release|Any CPU.Build.0 = Release|Any CPU</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+	GlobalSection(SolutionProperties) = preSolution</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+		HideSolutionNode = FALSE</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/ISignaler.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/ISignaler.cs" id="chg-WebQ/WebQ/ISignaler.cs" data-identifier="WebQ/WebQ/ISignaler.cs" data-filename="WebQ/WebQ/ISignaler.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public interface ISignaler {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        event EventHandler&lt;SignaledEventArgs&gt; Signaled;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        void Signal(string eventKey);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/Mesenger.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/Mesenger.cs" id="chg-WebQ/WebQ/Mesenger.cs" data-identifier="WebQ/WebQ/Mesenger.cs" data-filename="WebQ/WebQ/Mesenger.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Collections.Concurrent;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Threading.Tasks;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class Messenger {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static Messenger _instance = new Messenger();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static ConcurrentDictionary&lt;string, Timer&gt; _timers = new ConcurrentDictionary&lt;string, Timer&gt;();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public Messenger() : this(new DefaultSignaler()) { }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public Messenger(ISignaler singnaler) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public ISignaler Signaler { get; set; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public static Messenger Current {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return _instance; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public void Signal(string eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            Signaler.Signal(eventKey);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public Task&lt;SignalResult&gt; Subscribe(string eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return Subscribe(eventKey, TimeSpan.FromMinutes(2));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public Task&lt;SignalResult&gt; Subscribe(string eventKey, TimeSpan timeout) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var tcs = new TaskCompletionSource&lt;SignalResult&gt;();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var handlerCalled = false;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var handlerLock = new object();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            EventHandler&lt;SignaledEventArgs&gt; handler = null;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var timerKey = Guid.NewGuid().ToString();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            handler = (source, e) =&gt; {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                if (e.EventKey == eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                    SafeHandleEventAndSetResult(handlerLock, handler, handlerCalled, tcs, false, timerKey);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            Signaler.Signaled += handler;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            _timers.TryAdd(timerKey, new Timer(o =&gt; </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                SafeHandleEventAndSetResult(handlerLock, handler, handlerCalled, tcs, true, timerKey)</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            , null, 30000, Timeout.Infinite));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private void SafeHandleEventAndSetResult(object locker, EventHandler&lt;SignaledEventArgs&gt; handler, bool handlerCalled, TaskCompletionSource&lt;SignalResult&gt; tcs, bool timedOut, string timerKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                    Signaler.Signaled -= handler;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                    tcs.TrySetResult(new SignalResult { TimedOut = timedOut });</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                    if (_timers.TryRemove(timerKey, out timer)) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/Properties/AssemblyInfo.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/Properties/AssemblyInfo.cs" id="chg-WebQ/WebQ/Properties/AssemblyInfo.cs" data-identifier="WebQ/WebQ/Properties/AssemblyInfo.cs" data-filename="WebQ/WebQ/Properties/AssemblyInfo.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      <div>
        
          
        
        <pre>+﻿using System.Reflection;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Runtime.CompilerServices;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Runtime.InteropServices;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// General Information about an assembly is controlled through the following </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// set of attributes. Change these attribute values to modify the information</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// associated with an assembly.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyTitle("WebQ")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyDescription("")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyConfiguration("")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyCompany("Microsoft")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyProduct("WebQ")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyCopyright("Copyright © Microsoft 2011")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyTrademark("")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyCulture("")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// Setting ComVisible to false makes the types in this assembly not visible </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// to COM components.  If you need to access a type in this assembly from </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// COM, set the ComVisible attribute to true on that type.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: ComVisible(false)]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// The following GUID is for the ID of the typelib if this project is exposed to COM</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: Guid("0ef9d871-5916-4874-a342-269a27c9f0cf")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// Version information for an assembly consists of the following four values:</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// You can specify all the values or you can default the Build and Revision Numbers </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// by using the '*' as shown below:</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+// [assembly: AssemblyVersion("1.0.*")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyVersion("1.0.0.0")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+[assembly: AssemblyFileVersion("1.0.0.0")]</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/SignalResult.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/SignalResult.cs" id="chg-WebQ/WebQ/SignalResult.cs" data-identifier="WebQ/WebQ/SignalResult.cs" data-filename="WebQ/WebQ/SignalResult.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class SignalResult {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public bool TimedOut { get; set; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/SignaledEventArgs.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/SignaledEventArgs.cs" id="chg-WebQ/WebQ/SignaledEventArgs.cs" data-identifier="WebQ/WebQ/SignaledEventArgs.cs" data-filename="WebQ/WebQ/SignaledEventArgs.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class SignaledEventArgs : EventArgs {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public string EventKey { get; private set; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public SignaledEventArgs(string eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/Signalers/DefaultSignaler.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/Signalers/DefaultSignaler.cs" id="chg-WebQ/WebQ/Signalers/DefaultSignaler.cs" data-identifier="WebQ/WebQ/Signalers/DefaultSignaler.cs" data-filename="WebQ/WebQ/Signalers/DefaultSignaler.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+namespace WebQ.Signalers {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class DefaultSignaler : ISignaler {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public event EventHandler&lt;SignaledEventArgs&gt; Signaled;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private void OnSignaled(string eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            if (Signaled != null) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                Signaled(this, new SignaledEventArgs(eventKey));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public void Signal(string eventKey) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            ThreadPool.QueueUserWorkItem(_ =&gt; OnSignaled(eventKey));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/TaskAsyncHelper.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/TaskAsyncHelper.cs" id="chg-WebQ/WebQ/TaskAsyncHelper.cs" data-identifier="WebQ/WebQ/TaskAsyncHelper.cs" data-filename="WebQ/WebQ/TaskAsyncHelper.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Threading.Tasks;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    internal static class TaskAsyncHelper {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static Task _empty = MakeEmpty();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static Task MakeEmpty() {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var tcs = new TaskCompletionSource&lt;object&gt;();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public static Task Empty { get { return _empty; } }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public static IAsyncResult BeginTask(Func&lt;Task&gt; taskFunc, AsyncCallback callback, object state) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            Task task = taskFunc();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var retVal = new TaskWrapperAsyncResult(task, state);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            if (callback != null) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                // The callback needs the same argument that the Begin method returns, which is our special wrapper, not the original Task.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                task.ContinueWith(_ =&gt; callback(retVal));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public static void EndTask(IAsyncResult ar) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                throw new ArgumentNullException("ar");</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // The End* method doesn't actually perform any actual work, but we do need to maintain two invariants:</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // 1. Make sure the underlying Task actually *is* complete.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // 2. If the Task encountered an exception, observe it here.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // (The Wait method handles both of those.)</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var castResult = (TaskWrapperAsyncResult)ar;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            castResult.Task.Wait();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/TaskWrapperAsyncResult.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/TaskWrapperAsyncResult.cs" id="chg-WebQ/WebQ/TaskWrapperAsyncResult.cs" data-identifier="WebQ/WebQ/TaskWrapperAsyncResult.cs" data-filename="WebQ/WebQ/TaskWrapperAsyncResult.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Threading.Tasks;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    internal sealed class TaskWrapperAsyncResult : IAsyncResult {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        internal TaskWrapperAsyncResult(Task task, object asyncState) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            AsyncState = asyncState;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public object AsyncState {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public WaitHandle AsyncWaitHandle {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return ((IAsyncResult)Task).AsyncWaitHandle; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public bool CompletedSynchronously {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return ((IAsyncResult)Task).CompletedSynchronously; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public bool IsCompleted {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return ((IAsyncResult)Task).IsCompleted; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/Web/HttpTaskAsyncHandler.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/Web/HttpTaskAsyncHandler.cs" id="chg-WebQ/WebQ/Web/HttpTaskAsyncHandler.cs" data-identifier="WebQ/WebQ/Web/HttpTaskAsyncHandler.cs" data-filename="WebQ/WebQ/Web/HttpTaskAsyncHandler.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Threading.Tasks;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public abstract class HttpTaskAsyncHandler : IHttpAsyncHandler {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public virtual bool IsReusable {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public virtual void ProcessRequest(HttpContext context) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            throw new NotSupportedException();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public abstract Task ProcessRequestAsync(HttpContext context);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        IAsyncResult IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return TaskAsyncHelper.BeginTask(() =&gt; ProcessRequestAsync(context), cb, extraData);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        void IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            TaskAsyncHelper.EndTask(result);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/Web/TaskAsyncController.cs" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/Web/TaskAsyncController.cs" id="chg-WebQ/WebQ/Web/TaskAsyncController.cs" data-identifier="WebQ/WebQ/Web/TaskAsyncController.cs" data-filename="WebQ/WebQ/Web/TaskAsyncController.cs" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Collections.Concurrent;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Collections.Generic;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Linq.Expressions;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Reflection;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Threading.Tasks;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+using System.Web.Mvc.Async;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    // A controller that understands Task&lt;T&gt;-based methods</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    [NoAsyncTimeout] // shouldn't time out Task&lt;T&gt;-based methods</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class TaskAsyncController : AsyncController {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        protected override IActionInvoker CreateActionInvoker() {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return new TaskAsyncControllerActionInvoker();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        // An invoker that understands Task&lt;T&gt;-based methods</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private sealed class TaskAsyncControllerActionInvoker : AsyncControllerActionInvoker {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            protected override ControllerDescriptor GetControllerDescriptor(ControllerContext controllerContext) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                return new TaskAsyncControllerDescriptor(controllerContext.Controller.GetType());</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class TaskAsyncControllerDescriptor : ReflectedControllerDescriptor {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public TaskAsyncControllerDescriptor(Type controllerType)</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            : base(controllerType) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override ActionDescriptor FindAction(ControllerContext controllerContext, string actionName) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var actionDescriptor = base.FindAction(controllerContext, actionName);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var rad = actionDescriptor as ReflectedActionDescriptor;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var actionMethod = (rad != null) ? rad.MethodInfo : null;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            var returnType = (actionMethod != null) ? actionMethod.ReturnType : null;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            if (returnType != null &amp;&amp; typeof(Task).IsAssignableFrom(returnType)) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                // Task-returning method; hijack the descriptor</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                return new TaskAsyncActionDescriptor(actionMethod, actionName, this);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                // not a Task-returning method</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                return actionDescriptor;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    // An ActionDescriptor that understands Task&lt;T&gt;-based methods</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    public class TaskAsyncActionDescriptor : AsyncActionDescriptor {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        // dictionary to hold methods that can read Task&lt;T&gt;.Result</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static readonly ConcurrentDictionary&lt;Type, Func&lt;object, object&gt;&gt; _taskValueExtractors = new ConcurrentDictionary&lt;Type, Func&lt;object, object&gt;&gt;();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private readonly string _actionName;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private readonly ControllerDescriptor _controllerDescriptor;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public TaskAsyncActionDescriptor(MethodInfo methodInfo, string actionName, ControllerDescriptor controllerDescriptor) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            MethodInfo = methodInfo;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            _actionName = actionName;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            _controllerDescriptor = controllerDescriptor;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override IAsyncResult BeginExecute(ControllerContext controllerContext, IDictionary&lt;string, object&gt; parameters, AsyncCallback callback, object state) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            Task result = new ReflectedActionDescriptor(MethodInfo, ActionName, ControllerDescriptor).Execute(controllerContext, parameters) as Task;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                throw new InvalidOperationException(String.Format("Method {0} should have returned a Task!", MethodInfo));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // the Task itself makes a perfectly fine IAsyncResult</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // we don't honor the state argument, but ASP.NET doesn't use it anyway, so eh</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            if (callback != null) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                result.ContinueWith(_ =&gt; callback(result));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override object EndExecute(IAsyncResult asyncResult) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // the IAsyncResult is a Task (or Task&lt;T&gt;)</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // the extractor will also observe any exceptions that occurred</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return _taskValueExtractors.GetOrAdd(asyncResult.GetType(), CreateTaskValueExtractor)(asyncResult);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override string ActionName {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return _actionName; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override ControllerDescriptor ControllerDescriptor {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            get { return _controllerDescriptor; }</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public MethodInfo MethodInfo {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override object Execute(ControllerContext controllerContext, IDictionary&lt;string, object&gt; parameters) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            throw new NotImplementedException(); // can't execute synchronously</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override object[] GetCustomAttributes(bool inherit) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return MethodInfo.GetCustomAttributes(inherit);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override object[] GetCustomAttributes(Type attributeType, bool inherit) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return MethodInfo.GetCustomAttributes(attributeType, inherit);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override ParameterDescriptor[] GetParameters() {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            ParameterInfo[] parameters = MethodInfo.GetParameters();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return Array.ConvertAll(parameters, pInfo =&gt; new ReflectedParameterDescriptor(pInfo, this));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        public override bool IsDefined(Type attributeType, bool inherit) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return MethodInfo.IsDefined(attributeType, inherit);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+        private static Func&lt;object, object&gt; CreateTaskValueExtractor(Type taskType) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            if (taskType.IsGenericType &amp;&amp; taskType.GetGenericTypeDefinition() == typeof(Task&lt;&gt;)) {</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                // lambda = arg =&gt; (object)(((Task&lt;T&gt;)arg).Result)</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                var arg = Expression.Parameter(typeof(object));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                var castArg = Expression.Convert(arg, taskType);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                var fieldAccess = Expression.Property(castArg, "Result");</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                var castResult = Expression.Convert(fieldAccess, typeof(object));</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                var lambda = Expression.Lambda&lt;Func&lt;object, object&gt;&gt;(castResult, arg);</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+                return lambda.Compile();</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            // No return value, but we need to observe the exception</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+            return theTask =&gt; { ((Task)theTask).Wait(); return null; };</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
    





  


<section data-path="WebQ/WebQ/WebQ.csproj" data-source-url="/api/internal/repositories/damianedwards/signalr/src/ccdd24cc0bd0cfbb1c799161af75b29433726edf/WebQ/WebQ/WebQ.csproj" id="chg-WebQ/WebQ/WebQ.csproj" data-identifier="WebQ/WebQ/WebQ.csproj" data-filename="WebQ/WebQ/WebQ.csproj" data-linecommentroots="{}" data-compare-files-url="/!api/internal/repositories/damianedwards/signalr/ccdd24cc0bd0cfbb1c799161af75b29433726edf/diff" data-expand-context-url="/!api/internal/repositories/damianedwards/signalr/changesets-expand/ccdd24cc0bd0cfbb1c799161af75b29433726edf/_context/">
  <div>
    

    

      <div>
      
        
          
  
  
  

  
    
    
  

  

        
      
      
        <div>
          
            
              
                


  
  
    
      <div>
        
          
        
        <pre>+﻿&lt;?xml version="1.0" encoding="utf-8"?&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+&lt;Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Configuration Condition=" '$(Configuration)' == '' "&gt;Debug&lt;/Configuration&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Platform Condition=" '$(Platform)' == '' "&gt;AnyCPU&lt;/Platform&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;ProductVersion&gt;8.0.30703&lt;/ProductVersion&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;ProjectGuid&gt;{13D3A39E-DE44-4A89-BC2B-5C65E9999E1D}&lt;/ProjectGuid&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;OutputType&gt;Library&lt;/OutputType&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;AppDesignerFolder&gt;Properties&lt;/AppDesignerFolder&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;RootNamespace&gt;WebQ&lt;/RootNamespace&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;AssemblyName&gt;WebQ&lt;/AssemblyName&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;TargetFrameworkVersion&gt;v4.0&lt;/TargetFrameworkVersion&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;FileAlignment&gt;512&lt;/FileAlignment&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;DebugType&gt;full&lt;/DebugType&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Optimize&gt;false&lt;/Optimize&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;OutputPath&gt;bin\Debug\&lt;/OutputPath&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;DebugType&gt;pdbonly&lt;/DebugType&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Optimize&gt;true&lt;/Optimize&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;OutputPath&gt;bin\Release\&lt;/OutputPath&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Core" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Web" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Xml.Linq" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Data.DataSetExtensions" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="Microsoft.CSharp" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Data" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Reference Include="System.Xml" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="Web\HttpTaskAsyncHandler.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="ISignaler.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="Signalers\DefaultSignaler.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="Mesenger.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="SignaledEventArgs.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="Properties\AssemblyInfo.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="SignalResult.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="TaskAsyncHelper.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="TaskWrapperAsyncResult.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+    &lt;Compile Include="Web\TaskAsyncController.cs" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" /&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;!-- To modify your build process, add your task inside one of the targets below and uncomment it. </pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+       Other similar extension points exist, see Microsoft.Common.targets.</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;Target Name="BeforeBuild"&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      <div>
        
          
        
        <pre>+  &lt;Target Name="AfterBuild"&gt;</pre>
      </div>
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  
    
      
    

    
    
      
  
  
  

  
    
    
  

  

    
  

              
            
          
        </div>
      
    </div>
  </div>
</section>
  
  </div>
</section>
  </section>

        
        
        
      </div>
    </div>
  </div>

      </div>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>