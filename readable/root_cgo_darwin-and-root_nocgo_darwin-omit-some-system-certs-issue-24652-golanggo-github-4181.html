<!DOCTYPE html>
<html lang="en">
<head>
    <title>
crypto/x509: root_cgo_darwin and root_nocgo_darwin omit some system certs &#xB7; Issue #24652 &#xB7; golang/go - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="crypto/x509: root_cgo_darwin and root_nocgo_darwin omit some system certs &#xB7; Issue #24652 &#xB7; golang/go - linksfor.dev(s)"/>
    <meta property="article:author" content="bcmills"/>
    <meta property="og:description" content="Please answer these questions before submitting your issue. Thanks! What did you do? $ cat main.go package main import ( &amp;quot;crypto/x509&amp;quot; &amp;quot;fmt&amp;quot; &amp;quot;log&amp;quot; ) func main() { cert..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/golang/go/issues/24652"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - crypto/x509: root_cgo_darwin and root_nocgo_darwin omit some system certs &#xB7; Issue #24652 &#xB7; golang/go</title>
<div class="readable">
        <h1>crypto/x509: root_cgo_darwin and root_nocgo_darwin omit some system certs &#xB7; Issue #24652 &#xB7; golang/go</h1>
            <div>by bcmills</div>
            <div>Reading time: 3-4 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://github.com/golang/go/issues/24652">https://github.com/golang/go/issues/24652</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <main id="js-repo-pjax-container" data-pjax-container="">
      
  




  









  

  

  


<div>
  <div>

    
    
  <div data-pjax="">
    
      <div data-prompt="signup">
    <div>
      <div>
        <h3>Join GitHub today</h3>
        <p>GitHub is home to over 40 million developers working together to host and review code, manage projects, and build software together.</p>
        <p><a data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;files signup prompt&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/golang/go/issues/24652&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="c44c5c3977fb386666f3768669d79777a6aa3704c25b7698953d104e185096a6" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up" href="https://github.com/join?source=prompt-issue-show&amp;source_repo=golang%2Fgo">Sign up</a>
      </p></div>
    </div>
  </div>



  <div id="show_issue" data-channel="issue:310634260:timeline">

    
  



      


    <h2>Comments</h2>
    <div id="discussion_bucket">
      <div>

  <div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:310634260">

              



              

  


  
  



  
  



  
  



  
  


  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  


  
  



  
  



  
  


  
  



  
  
<div data-gid="MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTY5Nzk5MTY1Mg==">
  
        <div data-team-hovercards-enabled="" id="event-1697991652">
  
  <div>

    

        <p><a data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile"><img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4"></a>
  <a data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">FiloSottile</a>
  


      
changed the title
<del>crypto/x509: root_cgo_darwin omits some system certs</del>

<ins>crypto/x509: root_cgo_darwin and root_nocgo_darwin omit some system certs</ins></p><a href="#event-1697991652"><relative-time datetime="2018-06-25T04:35:57Z" title="Jun 24, 2018, 9:35 PM PDT">on Jun 24, 2018</relative-time></a>

  </div>
</div>


  




</div>


  

    
  


    
  



    
  



    
  
<div data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDIwMDg0OTY0ODU=">
  
        <div>
  <div id="ref-commit-f6be1cf">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-f6be1cf">
      <relative-time datetime="2018-12-05T22:52:58Z" title="Dec 5, 2018, 2:52 PM PST">on Dec 5, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:f6be1cf109a2be59b96d1fa913adfa1fbc628579" data-url="/golang/go/commit/f6be1cf109a2be59b96d1fa913adfa1fbc628579/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>The cgo path was not taking policies into account, using the last
security setting in the array whatever it was. Also, it was not aware of
the defaults for empty security settings, and for security settings
without a result type. Finally, certificates restricted to a hostname
were considered roots.

The API docs for this code are partial and not very clear, so this is a
best effort, really.

Updates <a data-error-text="Failed to load issue title" data-id="310634260" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/24652" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/24652/hovercard" href="https://github.com/golang/go/issues/24652">#24652</a>

Change-Id: I8fa2fe4706f44f3d963b32e0615d149e997b537d
Reviewed-on: <a href="https://go-review.googlesource.com/c/128056" rel="nofollow">https://go-review.googlesource.com/c/128056</a>
Run-TryBot: Filippo Valsorda &lt;filippo@golang.org&gt;
TryBot-Result: Gobot Gobot &lt;gobot@golang.org&gt;
Reviewed-by: Adam Langley &lt;agl@google.com&gt;
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-aa24158">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-aa24158">
      <relative-time datetime="2018-12-05T22:54:34Z" title="Dec 5, 2018, 2:54 PM PST">on Dec 5, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:aa2415807781ba84bf917c62cb983dc1a44f2ad1" data-url="/golang/go/commit/aa2415807781ba84bf917c62cb983dc1a44f2ad1/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Certificates without any trust settings might still be in the keychain
(for example if they used to have some, or if they are intermediates for
offline verification), but they are not to be trusted. The only ones we
can trust unconditionally are the ones in the system roots store.

Moreover, the verify-cert invocation was not specifying the ssl policy,
defaulting instead to the basic one. We have no way of communicating
different usages in a CertPool, so stick to the WebPKI use-case as the
primary one for crypto/x509.

Updates <a data-error-text="Failed to load issue title" data-id="310634260" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/24652" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/24652/hovercard" href="https://github.com/golang/go/issues/24652">#24652</a>

Change-Id: Ife8b3d2f4026daa1223aa81fac44aeeb4f96528a
Reviewed-on: <a href="https://go-review.googlesource.com/c/128116" rel="nofollow">https://go-review.googlesource.com/c/128116</a>
Reviewed-by: Adam Langley &lt;agl@google.com&gt;
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  

  



</div>

    
  



    
  



    
  



    
  



    
  



    
  



    
  



    
  



    
  



    
  



    
  


    
  



    
  



    
  



    
  



    
  


    
  



    
  



    
  



    
  



    
  





<!-- Rendered timeline since 2019-02-17 23:22:15 -->



            </div>


            
          </div>

</div>

    
</div>


    </div>
  </div>

  </div>


  </div>
</div>

    </main>
  </div>
  

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>