<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Write Once, Run Everywhere with .NET and the Uno Platform -- Visual Studio Magazine - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Write Once, Run Everywhere with .NET and the Uno Platform -- Visual Studio Magazine - linksfor.dev(s)"/>
    <meta property="article:author" content="By Peter Vogel06/30/2020"/>
    <meta property="og:description" content="Right now, in Visual Studio, you can create a solution that takes a single UI with its code and shares it across Windows, Android, macOS, iOS and web browsers. It&#x27;s not a perfect cross-platform solution (yet), but it&#x27;s here now."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://visualstudiomagazine.com/articles/2020/06/30/uno-visual-studio.aspx"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Write Once, Run Everywhere with .NET and the Uno Platform -- Visual Studio Magazine</title>
<div class="readable">
        <h1>Write Once, Run Everywhere with .NET and the Uno Platform -- Visual Studio Magazine</h1>
            <div>by By Peter Vogel06/30/2020</div>
            <div>Reading time: 12-15 minutes</div>
        <div>Posted here: 01 Jul 2020</div>
        <p><a href="https://visualstudiomagazine.com/articles/2020/06/30/uno-visual-studio.aspx">https://visualstudiomagazine.com/articles/2020/06/30/uno-visual-studio.aspx</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="level0">
    <div id="article"> 
        
        <p id="ph_pcontent2_0_KickerText"><a href="https://visualstudiomagazine.com/Articles/List/Practical-ASPNET.aspx">Practical .NET</a></p>
        
        <h3 id="ph_pcontent2_0_MainHeading">Write Once, Run Everywhere with .NET and the Uno Platform</h3>
        <p id="ph_pcontent2_0_Deck">Right now, in Visual Studio, you can create a solution that takes a single UI with its code and shares it across Windows, Android, macOS, iOS and web browsers. It's not a perfect cross-platform solution (yet), but it's here now.</p>
        
        

        <p><img alt="" src="https://visualstudiomagazine.com/articles/2020/06/30/~/media/ECG/VirtualizationReview/Images/introimages2014/BuildingBlocksGen_v5.ashx"> </p>




<p>
  I don't usually step outside the default Microsoft technologies. However, the open source <a href="https://platform.uno/" target="_blank">Uno platform</a> delivers right now what Microsoft's <a href="https://devblogs.microsoft.com/dotnet/introducing-net-multi-platform-app-ui/" target="_blank">MAUI platform</a> promises for November 2022: The ability to write C# code using .NET and have run it on Windows, Android, macOS and iOS devices. But Uno also offers right now more than MAUI currently promises for the future: Thanks to Blazor, your Uno Platform application will also run in web browsers (<i>any</i> web browser). I like this technology, at least in part because it seems to me to be the next obvious step for .NET development (<a href="https://visualstudiomagazine.com/blogs/tool-tracker/2018/09/xamarin-forms-future.aspx" target="_blank">as I've discussed elsewhere</a>).
</p>
  


<p>
  Both MAUI and the Uno Platform are extensions of Microsoft's Xamarin toolset that allows you write applications that run on multiple platforms. What the Uno Platform does (and MAUI currently doesn't include) is take the open source technology that Microsoft sponsors in this area (Xamarin, Blazor, etc.) and let you include client-side solutions for your browser. In this article, I'll show you how to create a Uno Platform project and discuss what I see as the one significant limitation with Uno.
</p>
  


<p>
  If you want, you can skip my article and go straight to the source because I'm basically pulling together material from Uno documentation <a href="https://platform.uno/docs/articles/get-started.html" target="_blank">here</a> and <a href="https://platform.uno/docs/articles/getting-started-tutorial-1.html" target="_blank">here</a>, enhanced with some of my own experience with Uno projects.
</p>
  


<p><span><b>Configuring Visual Studio</b></span><br>
You don't need to do much to get Visual Studio ready to create a cross-platform app with Uno. First, you need a compatible version of Visual Studio (I used Visual Studio 2019 Community Edition but any version from 16.3 on is supposed to work). You'll also need to make sure that Visual Studio has these three workloads installed:</p>

    

<br>



<ul>
  	<li>Universal Windows Platform</li> 
  	<li>Mobile development with .NET (Xamarin)</li>
  	<li>ASP.NET and web</li>
</ul>




<p>
  Odds are you don't have the Xamarin workload included so you'll need to shut down Visual Studio, run the Visual Studio installer and add the Xamarin workload.
</p>
  


<p>
  Next, you'll need the Uno Platform project templates. To get them, from Visual Studio's Extensions menu, select Manage Extensions. In the resulting dialog box make sure that, on the left, you have Online | Visual Studio Marketplace selected and then, in the search box on the right, search for "Uno." Once you've found the Uno Platform Solution Templates option, select it and click the Download button. As with any extension, that only schedules the templates to be installed so you'll need to close Visual Studio, wait for the installation dialog box to appear, click the Modify button and wait for the installation to finish.
</p>
  


<p>
  Before starting Visual Studio, you can pre-emptively fix a potential problem. When you finally get to compile an Uno platform application you may get an error message that says "Platform environment variable set to mcd." You can wait to see if you get the error or check for/fix the problem now. The steps to eliminate the problem are:

</p>
  



<ol>
  <li>Click the Start button and type "My Compute" (depending on what version of Windows you have, the resulting list will include either "My Compute" or "This PC")</li>
  
  <li>Right-click on This PC/My Computer and select Properties</li>
  
  <li>Select either Advanced or Advanced system settings (again, depending on what version of Windows you have)</li>
  
  	<li>Click the Environment Variables button</li>
  
  <li>In the list of variables, find the Platform environment </li>
  
  <li>If the variable both exists and is set to mcd, click the Delete button to remove the variable</li>
</ol>




<p>
  If you wait to see if you get the problem when you finally do compile your project, you'll need to restart Visual Studio after deleting the variable.
</p>
  



<p><span><b>Creating a Uno Solution</b></span><br>
You're now ready to create a Uno solution. After starting Visual Studio, from the File  menu, select  New | Project and, in the Create a new project dialog, pick the Cross-Platform App (Uno Platform) template (as a new template, it's probably right at the top of the list). Right now there are two templates -- make sure you pick the template whose description says "create a cross-platform XAML app" (the other template is for creating a Uno class library project).</p>




<p>
  Work through the Wizard, giving your project a name. You may need to allow access through the Windows Firewall during this process and you'll definitely need to accept the Android SDK Preview License. When you're done, you'll have a solution with separate projects for Android, macOS, iOS, Windows and the browser, plus a shared project that contains the files used by all of those projects. That shared project is where you'll put the Xamarin.Forms that make up your application's UI, along with any code that runs on all of the platforms (which is, potentially, <i>all</i> of the code for your application).
</p>
  


<p>
  It's pretty easy to figure out which projects are targeting which platforms: The Android project is called &lt;yourProjectName&gt;.Droid, the browser version is &lt;yourProjectName&gt;.Wasm, the Windows project is &lt;yourProjectName&gt;.UWP, the shared project is &lt;yourProjectName&gt;.Shared and so on. This is similar to the way that Xamarin organizes its multi-platform solutions (and one of the things that changes in MAUI where the various target platforms become just platform options within a single project).
</p>
  


<p>
  If this is your first Uno/Xamarin solution, you may want to remove the macOS and iOS projects which, because of various licensing restrictions, have to be compiled on a MacIntosh computer (Xamarin projects have extensive support for shooting builds over to a MacIntosh computer on a network and monitoring those builds ... but you do need a MacIntosh computer). There's no harm in leaving the projects in your solution but, with the Uno Platform much of your configuration has to be done on a project-by-project basis, so fewer projects equals less configuration work. 
</p>
  


<p>
  For example, to finish configuring your solution, you need to right-click on each project, select "Manage NuGet packages for Solution ... " and do these two things:

</p>
   


<ul>
  <li>In the Updates tab of the resulting dialog, update the Uno packages (Don't update anything else! If you update the Console packages, your solution won't compile)</li>
  
  <li>In the Browse tab, find the NuGet package Refractored.MvvmHelpers and install it</li>
</ul>




<p>
  In the in the &lt;yourProjectName&gt;.Shared project project, to ensure that you get all the IntelliSense support you're entitled to when working with your UI forms, open the MainPage.xaml form and make sure that the drop-down list in the upper-left hand corner of your editor form is set to &lt;yourProjectName&gt;.UWP. Then make the UWP project your startup project and build your solution.
</p>
  


<p>
  That's all that's required from a "universal" point of view. However, for the individual projects, you have a little more work to do.
</p>
  



<p>
  If you're planning on testing your Android project, you'll need to add these NuGet packages to your Droid Project: Xamarin.AndroidX.Lifecycle.LiveData, Xamarin.AndroidX.Browser and Xamarin.Google.Android.Material. You'll also need to ensure that you have the Android emulators ... but the easiest way to check if you do is to compile and run your solution with the &lt;yourProjectName&gt;.Droid project selected as your startup project. If you don't have them, I've <a href="https://visualstudiomagazine.com/articles/2018/09/01/xamarin-android-debugging.aspx" target="_blank">discussed how to set them up</a>.
</p>
  


<p>
  If you want to test your application in a browser then, in the *.Wasm project's csproj file, comment out this line:
</p>
  


<pre>&lt;EmbeddedResource Include="WasmCSS\Fonts.css" /&gt;</pre>




<p>
  After you've made all of those configuration changes, close the solution and re-open it. You're now ready to create your cross-platform application.
</p>
  


<p><span><b>Creating Shared Components</b></span><br>
By default, any files that you add to the Shared project are automatically copied into the other projects and used in those projects. The Shared project is, therefore, where you'd prefer to make most of your changes.</p>




<p>
  But this leads to the significant limitation in using the Uno platform: If you want to extend the Shared project with third-party packages ... well, currently, you can't. The Shared project doesn't support adding either NuGet packages or references to other libraries/projects. Essentially, as far as shared components go, you're limited to the Xamarin form controls available in the Shared project and any code you'd care to write or copy into the Shared project. 
</p>
  


<p>
  You can, of course, extend the other projects in the Solution with NuGet packages. However, you'd need to add "project-compatible" components to every individual project where you wanted to use it rather than a "cross-platform" component to be shared among all the project. You could, for example, add an Android-compatible component to the Droid project and an equivalent iOS component to the iOS project. However, any components you add to one of the projects can only be referenced from that project so you'd have to write custom code for each project.

</p>
   


<p>
  Still, the Xamarin.Forms components that you can use in the Shared project provide quite a lot of UI-related functionality. The Shared project holds the startup page for your project (MainPage.xaml file) and you can start experimenting with Uno using that page. Here's a simple form with a label, a button and a textbox (I also changed the default Grid in the MainPage to a Page). The button has its Click event tied to a method called SayHello:

</p>
  


<pre>&lt;Page
    x:Class="UnoTelerik.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"&gt;
    
    &lt;StackPanel&gt;
      &lt;TextBlock Name="HelloLabel"/&gt; 
      &lt;TextBox x:Name="FirstName"&gt;&lt;/TextBox&gt;
      &lt;Button Click="Button_Click"&gt;Click Me!&lt;/Button&gt;
    &lt;/StackPanel&gt;
&lt;/Page&gt;</pre>




<p>
  The code-behind file for the form can contain any code you want to add. I've put in a SayHello method that updates the UI label with a message based on the value entered in the textbox:

</p>
  


<pre>private void SayHello(object sender, RoutedEventArgs e)
{           
  HelloLabel.Text = "Hello, " + FirstName.Text;
}</pre>




<p>
  In a production app, of course, I'd implement the MVVM model, which Uno supports (in fact, here's a list of <a href="https://platform.uno/how-it-works/" target="_blank">tools and technologies</a> that the Uno platform supports).
</p>
  


<p>
  And here's the payoff: If you use Visual Studio's option to set multiple startup projects, you can now press F5 and get a display like the one in <b>Figure 1</b> that shows my form running on Android, Windows and in the browser all at once. And that, you have to admit, is pretty cool.

</p>
  


<div><figure> <a href="https://visualstudiomagazine.com/articles/2020/06/30/~/media/ECG/visualstudiomagazine/Images/2020/06/vogel_uno.asxh" target="_blank">
<img alt="Three of UIs -- Android, Windows and browser -- generated from a single form in a Uno Platform, Visual Studio project." src="https://visualstudiomagazine.com/articles/2020/06/30/~/media/ECG/visualstudiomagazine/Images/2020/06/vogel_uno_s.asxh"> </a>
<figcaption> <b>[Click on image for larger view.]</b>Figure 1: Three UIs -- Android, Windows and browser -- generated from a single form in a Uno Platform, Visual Studio project.</figcaption>
</figure></div>


 

<p><span><b>Further reading:</b></span><br></p>




<ul>
  <li><a href="https://visualstudiomagazine.com/articles/2020/05/19/maui.aspx" target="_blank">Microsoft Unveils Unifying .NET Multi-Platform App UI for Mobile/Desktop</a></li>
  
  <li><a href="https://visualstudiomagazine.com/articles/2020/02/06/uno-bootstrap.aspx" target="_blank">Uno Platform Claims First with WebAssembly AOT Compilation in Visual Studio</a></li>
  
  <li><a href="https://visualstudiomagazine.com/articles/2019/09/19/uno-platform-2.aspx" target="_blank">Open Source Uno Platform Takes Xamarin.Forms Mobile Apps to the Web via WebAssembly</a></li>
  
  <li><a href="https://visualstudiomagazine.com/articles/2020/04/16/uno-vs-code.aspx" target="_blank">Open Source Uno Platform Supports VS Code After Editor Gets WebAssembly Debugging</a></li>
</ul>
<br>
        
        
        
        
        
        
        
        <!-- pager start -->
        
        <!-- pager end -->
        
        
            
        

        
                <div>
                    <p id="ph_pcontent2_0_AuthorInfo_AboutAuthor">About the Author</p>
                    
                <p>
                    <strong></strong>
                    Peter Vogel is a system architect and principal in PH&amp;V Information Services. PH&amp;V provides full-stack consulting from UX design through object modeling to database design. Peter tweets about his VSM columns with the hashtag #vogelarticles. His blog posts on user experience design can be found at <a href="http://blog.learningtree.com/tag/ui/" target="_blank">http://blog.learningtree.com/tag/ui/</a>.
                    <br>
                    
                    <a id="ph_pcontent2_0_AuthorInfo_AuthorEmail_0"></a>
                </p>
            
                </div>
            
    </div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>