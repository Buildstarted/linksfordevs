<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Getting native binaries and executables entitled for notarization &#xB7; Issue #30583 &#xB7; dotnet/runtime - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Getting native binaries and executables entitled for notarization &#xB7; Issue #30583 &#xB7; dotnet/runtime - linksfor.dev(s)"/>
    <meta property="article:author" content="jcagme"/>
    <meta property="og:description" content="As per the &amp;quot;Getting .NET Core ready for Mac OS Catalina&amp;quot; email we need to add a flag and entitlements to native binaries and executables to get them ready for notarization. The steps need..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/dotnet/corefx/issues/40282"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">üéâ</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Getting native binaries and executables entitled for notarization &#xB7; Issue #30583 &#xB7; dotnet/runtime</title>
<div class="readable">
        <h1>Getting native binaries and executables entitled for notarization &#xB7; Issue #30583 &#xB7; dotnet/runtime</h1>
            <div>by jcagme</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 14 Aug 2019</div>
        <p><a href="https://github.com/dotnet/corefx/issues/40282">https://github.com/dotnet/corefx/issues/40282</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
  <div>

    
    
  <div data-pjax="">
    
      <div data-prompt="signup">
    <div>
      <div>
        <h3>Join GitHub today</h3>
        <p>GitHub is home to over 40 million developers working together to host and review code, manage projects, and build software together.</p>
        <p><a data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;files signup prompt&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/dotnet/runtime/issues/30583&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="7527611ef7a54471f685cf21e2efed43a602a6378c99716a3efca65bd072ad5f" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up" href="https://github.com/join?source=prompt-issue-show&amp;source_repo=dotnet%2Fruntime">Sign up</a>
      </p></div>
    </div>
  </div>



  <div id="show_issue" data-channel="issue:558474151:timeline">

    
  <div id="partial-discussion-header" data-channel="issue:558474151" data-url="/dotnet/runtime/issues/30583/show_partial?partial=issues%2Ftitle&amp;sticky=true" data-gid="MDU6SXNzdWU1NTg0NzQxNTE=">
  <div>
    <div>
      <div>

          
<details>
  <summary data-ga-click="Issues, create new issue, view:issue_show location:issue_header style:button logged_in:false" role="button">
    
    New issue
  </summary>
  <details-dialog aria-label="Sign up for GitHub" role="dialog" aria-modal="true">
      
    <div>
            

<div>
  <p>
  <strong>Have a question about this project?</strong> Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
  </p>

  <!-- '"` --><!-- </textarea></xmp> -->
  <p>By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our <a href="https://help.github.com/terms" target="_blank">terms of service</a> and
  <a href="https://help.github.com/privacy" target="_blank">privacy statement</a>. We‚Äôll occasionally send you account related emails.</p>

  <p>
    Already on GitHub?
    <a data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;new issue modal&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/dotnet/runtime/issues/30583&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="80806952cfe365e363137bf42537d648c65a0a3d21d79cc82696f8c8d6294e88" data-ga-click="(Logged out) New issue modal, clicked Sign in, text:sign-in" href="https://github.com/login?return_to=%2Fdotnet%2Fruntime%2Fissues%2Fnew">Sign in</a>
    to your account
  </p>
</div>

</div>
  </details-dialog>
</details>
        
      </div>

    
    </div>
  </div>

  <div>
    <p><span title="Status: Closed">
  
   Closed

</span>

    </p>
    <div>
        <p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">jcagme</a>  opened this issue
</p><relative-time datetime="2019-08-13T16:26:39Z" title="Aug 13, 2019, 9:26 AM PDT">on Aug 13, 2019</relative-time><p>
¬∑ 7 comments

  <span data-issue-and-pr-hovercards-enabled="">
    
  </span>

    </p></div>
  </div>


    <div data-original-top="0px">
      <div>
        <div>
          <div>
            <p><span title="Status: Closed">
  
   Closed

</span>

            </p>
            <div>
              

              <div>
                  <p><a data-hovercard-z-index-override="111" data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">jcagme</a>  opened this issue
</p><relative-time datetime="2019-08-13T16:26:39Z" title="Aug 13, 2019, 9:26 AM PDT">on Aug 13, 2019</relative-time><p>
¬∑ 7 comments

  <span data-issue-and-pr-hovercards-enabled="">
    
  </span>

              </p></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
</div>



      


    <h2>Comments</h2>
    <div id="discussion_bucket">
      <div>

  <div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:558474151">

              
<div data-gid="MDU6SXNzdWU1NTg0NzQxNTE=" data-url="/_render_node/MDU6SXNzdWU1NTg0NzQxNTE=/issues/body" data-channel="issue:558474151">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme"><img height="40" width="40" alt="@jcagme" src="https://avatars3.githubusercontent.com/u/28021475?s=88&amp;v=4"></a>

</p>


  
<div id="issue-558474151">
  <div data-body-version="1e74ffcea371ae34a2dad1c4da462602" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>As per the "Getting .NET Core ready for Mac OS Catalina" email we need to add a flag and entitlements to native binaries and executables to get them ready for notarization.</p>
<p>The steps needed are:</p>
<ol>
<li>Add a plist which sets CSFlags to 65536. This is used to preserve the codesign flag ‚Äú-o runtime‚Äù when codesign is called on it. We‚Äôd need to do ‚Äúld -sectcreate _TEXT __info_plist  plist_name.plist‚Äù. <a href="https://microsoft.visualstudio.com/Edge/_git/chromium.src/pullrequest/3526425?_a=files" rel="nofollow">This</a> is what the Edge team did.</li>
<li>Add entitlements. ‚Äúcodesign ‚Äìentitlements   ‚Äù. Here we need two things:<br>
a.	Define what entitlements are needed. <a href="https://developer.apple.com/documentation/bundleresources/entitlements" rel="nofollow">This</a> enumerates all the supported options. From what I saw I think we need something like: (to be verified by the product teams)</li>
</ol>
<div><pre>    &lt;<span>key</span>&gt;com.apple.security.cs.allow-jit&lt;/<span>key</span>&gt;
    &lt;<span>true</span>/&gt;
    &lt;<span>key</span>&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/<span>key</span>&gt;
    &lt;<span>true</span>/&gt;
    &lt;<span>key</span>&gt;com.apple.security.cs.disable-library-validation&lt;/<span>key</span>&gt;
    &lt;<span>true</span>/&gt;</pre></div>
<p>b.	Determine what binaries need to be entitled</p>
<p>ETA for this work is November when we release 3.1</p>
<p>fyi: <a data-hovercard-type="user" data-hovercard-url="/users/wfurt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wfurt">@wfurt</a> <a data-hovercard-type="user" data-hovercard-url="/users/danmosemsft/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/danmosemsft">@danmosemsft</a></p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>

</div>


              

  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk0MDY2Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk0MDY2Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMDk0MDY2Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/wfurt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wfurt"><img height="40" width="40" alt="@wfurt" src="https://avatars0.githubusercontent.com/u/14356188?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-520940662">
    <div>
      

  

<details data-body-version="73d263b808cc4e7bf64d87ed2ff26a54">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="73d263b808cc4e7bf64d87ed2ff26a54" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>what exactly this does? Do we have any plans for self-contained applications? (at least docs)</p>
<p>This may be related to behavior seen in <a data-error-text="Failed to load issue title" data-id="558472611" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/runtime/issues/30426" data-hovercard-type="issue" data-hovercard-url="/dotnet/runtime/issues/30426/hovercard" href="https://github.com/dotnet/runtime/issues/30426">#30426</a>.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjU1NDM0NDU1NA==">
  
        <div data-team-hovercards-enabled="" id="event-2554344554">
  
  <div>

    

        <p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme"><img height="20" width="20" alt="@jcagme" src="https://avatars2.githubusercontent.com/u/28021475?s=60&amp;v=4"></a>
  <a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">jcagme</a>
  


      
changed the title
<del>Getting native binaries and executables entitled</del>

<ins>Getting native binaries and executables entitled for notarization</ins></p><a href="#event-2554344554"><relative-time datetime="2019-08-13T18:39:10Z" title="Aug 13, 2019, 11:39 AM PDT">on Aug 13, 2019</relative-time></a>

  </div>
</div>




</div>

  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk1ODQxNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk1ODQxNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMDk1ODQxNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme"><img height="40" width="40" alt="@jcagme" src="https://avatars3.githubusercontent.com/u/28021475?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-520958417">
    <div>
      

  

<details data-body-version="ea2ce39f0c37a3113bd744725e25b1cb">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ea2ce39f0c37a3113bd744725e25b1cb" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>This issue is only around <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution" rel="nofollow">Notarization</a>. We need all the native binaries and runtimes packed into the dotnet SDK and runtime pkgs to have entitlements so when we sign them they are hardened. Having assets signed and hardened is a requirement to get the pkgs notarized so when they are downloaded they are not flagged as malware and users can install them without a problem.</p>
<p>This seems unrelated to <a data-error-text="Failed to load issue title" data-id="558472611" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/runtime/issues/30426" data-hovercard-type="issue" data-hovercard-url="/dotnet/runtime/issues/30426/hovercard" href="https://github.com/dotnet/runtime/issues/30426">#30426</a> which is more of the internals on how we deal with security (I think?)</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk2MzExMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMDk2MzExMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMDk2MzExMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/wfurt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wfurt"><img height="40" width="40" alt="@wfurt" src="https://avatars0.githubusercontent.com/u/14356188?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-520963112">
    <div>
      

  

<details data-body-version="662844ce353cdddc7d44f3b251f98596">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="662844ce353cdddc7d44f3b251f98596" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>thanks for explanation and links <a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">@jcagme</a></p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMTEyOTg0MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMTEyOTg0MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMTEyOTg0MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/safern/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/safern"><img height="40" width="40" alt="@safern" src="https://avatars1.githubusercontent.com/u/22899328?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-521129840">
    <div>
      

  

<details data-body-version="0f8f0b8e5e87f474a1c6b6c286760a13">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="0f8f0b8e5e87f474a1c6b6c286760a13" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Marking as 3.0 as this is high PRI. I‚Äôll be OOF starting Thursday so I think it would be good for someone else to take this one.</p>
<p>cc: <a data-hovercard-type="user" data-hovercard-url="/users/ericstj/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ericstj">@ericstj</a> <a data-hovercard-type="user" data-hovercard-url="/users/ViktorHofer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ViktorHofer">@ViktorHofer</a></p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjA2MjM5Nw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjA2MjM5Nw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMjA2MjM5Nw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ViktorHofer/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ViktorHofer"><img height="40" width="40" alt="@ViktorHofer" src="https://avatars1.githubusercontent.com/u/7412651?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-522062397">
    <div>
      

  

<details data-body-version="fd744eb77a81eb2c6a3794f5ba43c720">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="fd744eb77a81eb2c6a3794f5ba43c720" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">@jcagme</a> we discussed that in our infra stand-up and we aren't sure what the action for corefx is here. Can you please provide more details? Thanks</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjY4NTQ1Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjY4NTQ1Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMjY4NTQ1Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ericstj/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ericstj"><img height="40" width="40" alt="@ericstj" src="https://avatars2.githubusercontent.com/u/8918108?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-522685456">
    <div>
      

  

<details data-body-version="3ee877feb055c267ca2db315cf0bc420">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="3ee877feb055c267ca2db315cf0bc420" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Ping <a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme">@jcagme</a> can you please clarify what you need CoreFx to do for this?  Is there work that needs to happen in CoreFx or is this just tracking changes to the signing infrastructure that we need to ingest into corefx and use in our builds.  Thanks!</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjc4NDM5Mw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyMjc4NDM5Mw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyMjc4NDM5Mw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/jcagme/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jcagme"><img height="40" width="40" alt="@jcagme" src="https://avatars3.githubusercontent.com/u/28021475?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-522784393">
    <div>
      

  

<details data-body-version="258d5d332e978b20ef9a3389381fddc3">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="258d5d332e978b20ef9a3389381fddc3" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>It was created with corefx adding entitlements in mind but it looks like that won't be needed and the only work will be on the infra side to get things in the runtime and sdk signed and ready for notarization. I'm closing this now and open a new one in case more work on your side is needed.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  







<!-- Rendered timeline since 2020-01-31 19:55:57 -->



            </div>


            
          </div>

</div>

    
</div>


    </div>
  </div>

  </div>


  </div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>