<!DOCTYPE html>
<html lang="en">
<head>
    <title>
New experimental Razor editor for Visual Studio | ASP.NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="New experimental Razor editor for Visual Studio | ASP.NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="Daniel RothPrincipal Program Manager, ASP.NETFollow"/>
    <meta property="og:description" content="With the release of Visual Studio 2019 16.7 Preview 4, you can now try out our new experimental Razor editor for local development with MVC, Razor Pages, and Blazor. We&#x2019;re excited for you to give it a try! Enabling the new Razor editor To enable the new experimental Razor editor in Visual Studio 2019 16.7 Preview 4 or later: Install the latest Visual Studio preview Go to Tools Options Environment Preview Features and select the Enable experimental Razor editor option:    Select OK and restart Visual Studio  That&#x2019;s it!"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/aspnet/new-experimental-razor-editor-for-visual-studio/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - New experimental Razor editor for Visual Studio | ASP.NET Blog</title>
<div class="readable">
        <h1>New experimental Razor editor for Visual Studio | ASP.NET Blog</h1>
            <div>by Daniel RothPrincipal Program Manager, ASP.NETFollow</div>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 15 Jul 2020</div>
        <p><a href="https://devblogs.microsoft.com/aspnet/new-experimental-razor-editor-for-visual-studio/">https://devblogs.microsoft.com/aspnet/new-experimental-razor-editor-for-visual-studio/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured">

	<div>
                
         <div><div><div><p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/02/DaniethRothPhoto-150x150.jpeg" width="58" height="58" alt="Daniel Roth"></p><p>Daniel</p></div></div></div>     
        <p>July 15th, 2020</p><!-- .entry-meta -->

		<p>With the release of Visual Studio 2019 16.7 Preview 4, you can now try out our new experimental Razor editor for local development with MVC, Razor Pages, and Blazor. We’re excited for you to give it a try!</p>
<h2>Enabling the new Razor editor</h2>
<p>To enable the new experimental Razor editor in Visual Studio 2019 16.7 Preview 4 or later:</p>
<ol>
<li><a href="https://visualstudio.com/preview" target="_blank">Install the latest Visual Studio preview</a></li>
<li>
<p>Go to <strong>Tools</strong> &gt; <strong>Options</strong> &gt; <strong>Environment</strong> &gt; <strong>Preview Features</strong> and select the <strong>Enable experimental Razor editor</strong> option:</p>
<p><a href="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/enable-experimental-razor.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/enable-experimental-razor.png" alt="Enable new experimental Razor editor">  </a></p>
</li>
<li>
<p>Select <strong>OK</strong> and restart Visual Studio</p>
</li>
</ol>
<p>That’s it! You’re now setup to use the new Razor editor when working with Razor files locally (.cshtml and .razor).</p>
<h2>What is Razor?</h2>
<p>Razor is a templating language based on HTML and C# used to define dynamic rendering logic for .NET web apps based on MVC, Razor Pages, and Blazor. In MVC and Razor Pages apps you use Razor to define the rendering logic for your views and pages using .cshtml files. In Blazor, you use Razor to author reusable UI components in .razor files. Razor is a critical part of the experience for building web apps with .NET.</p>
<p>You can give Razor a try today by building your first web app with <a href="https://dotnet.microsoft.com/learn/aspnet/hello-world-tutorial/intro" target="_blank">ASP.NET Core</a> or <a href="https://dotnet.microsoft.com/learn/aspnet/blazor-tutorial/intro" target="_blank">Blazor</a>.</p>
<h2>Why a new Razor editor?</h2>
<p>Part of the value of Razor is the rich tooling experience Visual Studio provides for editing Razor files. Visual Studio today provides IntelliSense, completions, and diagnostics for HTML, CSS, JavaScript, C#, and Razor specific syntax all within the same Razor file.</p>
<p>Visual Studio does some tricky gymnastics to enable editor support for all of these languages at the same time in Razor files. The Razor document is parsed to determine its constituent parts, and then each part is projected into a language specific buffer called a projection buffer. What you see in Visual Studio when editing a Razor document are a collection of little windows into each of these projection buffers to make up one whole document. Each language service then independently handles the editing experiences for each of these separate projection buffers.</p>
<p>For example, consider the following Razor code:</p>
<pre><code><span><span>@{</span></span><span><span>
    </span></span><span><span>ViewData</span></span><span><span>[</span></span><span><span>"Title"</span></span><span><span>]</span></span><span><span> </span></span><span><span>=</span></span><span><span> </span></span><span><span>"About"</span></span><span><span>;</span></span><span><span>
</span></span><span><span>}</span></span><span><span>
</span></span><span><span>&lt;</span></span><span><span>script type</span></span><span><span>=</span></span><span><span>"text/javascript"</span></span><span><span>&gt;</span></span><span><span>
    alert</span></span><span><span>(</span></span><span><span>"Hello, World!"</span></span><span><span>);</span></span><span><span>
</span></span><span><span>&lt;/</span></span><span><span>script</span></span><span><span>&gt;</span></span></code></pre>
<p>The way Visual Studio handles this Razor code looks something like this:</p>
<p><a href="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/vs-razor-editor-arch.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/vs-razor-editor-arch.png" alt="Razor editor architecture">  </a></p>
<p>This project buffer setup works well for Visual Studio and Visual Studio for Mac, but it’s problematic for remote editing scenarios, like Visual Studio LiveShare or Visual Studio Codespaces. It also can’t be used for editors that don’t have projection buffer support, like Visual Studio Code. The lack of a central orchestrator for the Razor editor also makes it difficult to enable new features without careful coordination between the various language service implementations (since they each control their own experience in projected scenarios).</p>
<h2>A Razor Language Server</h2>
<p>To enable broader support for Razor editing, we have been working for some time on a new Razor editor for ASP.NET Core projects based on a Razor Language Server. This new Razor Language Server implements editor features like auto completion, go to definition, etc. through the <a href="https://microsoft.github.io/language-server-protocol/" target="_blank">Language Server Protocol</a> (LSP), which defines a standard way for an editor or IDE to enable these features. An IDE specific Razor extension then handles coordinating with the Razor Language Server and the other language servers for HTML &amp; C#.</p>
<p><a href="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/lsp-razor-editor-architecture.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2020/07/lsp-razor-editor-architecture.png" alt="LSP Razor editor architecture">  </a></p>
<p>This new Razor Language Server is already being used to enable Razor support in Visual Studio Code as part of the C# extension. It will be the basis for the Razor editing support in Visual Studio Codespaces and Visual Studio LiveShare. And now it is available for local development in Visual Studio as a preview feature.</p>
<p>Currently our focus has been on making the new LSP based Razor editor have functional parity with the existing Visual Studio Razor editing experience (as noted below, there are still a few functional gaps to address). In future releases we expect to fill these functional gaps add significant new functionality, like bringing many more of the C# editing features to Razor, and enabling other new Razor specific productivity improvements.</p>
<h2>Known issues</h2>
<p>The new Razor editor is currently experimental and has some known limitations. The following Razor editor features have not yet been fully implemented and will be added in a future release:</p>
<ul>
<li>JavaScript and CSS IntelliSense support</li>
<li>Colorization for C#, JavaScript, CSS, Blazor components, Tag Helpers, and tooltips</li>
<li>Formatting is limited to only C# code in <code><span>@code</span></code> and <code><span>@functions</span></code> blocks with no embedded HTML markup or Razor syntax</li>
<li>URL picker support in HTML</li>
<li>C# snippets (‘prop’, ‘ctor’, etc.)</li>
<li>Complex C# completions (for example, generating overrides)</li>
<li>Go-to-definition/implementation from C# to Razor</li>
<li>Renames in C# files do not propagate to Razor files</li>
<li>Matching identifier highlight support for HTML and curly braces</li>
</ul>
<p>There are also some functional issues with the new Razor editor in 16.7 Preview 4 that will be addressed in a future release:</p>
<ul>
<li>C# error squiggles may be misaligned</li>
<li>Unnecessary informational errors reported for unnecessary using directives in Razor files</li>
<li>Blazor components &amp; Tag Helpers are currently colored like C# classes and don’t respect the Tag Helper colorization option</li>
</ul>
<h2>Give feedback</h2>
<p>These are still the early days for the new LSP-based Razor editing experience in Visual Studio. We know that there’s still a lot of work to do before it can replace the existing Razor editing experience in Visual Studio. The new Razor tooling will remain optional and experimental in 16.7 and we don’t expect to make it the default Razor editor until it surpasses the functionality of the existing editor. But, we wanted to share our progress as early as possible to start getting your feedback on how well the new Razor editor works for you. To ensure we ship the best Razor editing experience possible, please give the new Razor tooling a try and let us know what you think. You can share your feedback with us by creating <a href="https://github.com/dotnet/aspnetcore/issues/new?template=razor_tooling.md" target="_blank">Razor Tooling issues on Github</a> in the ASP.NET Core repo. We appreciate your feedback!</p>
        
        
        
        

		        
        
        
	</div><!-- .entry-content -->
    
    </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>