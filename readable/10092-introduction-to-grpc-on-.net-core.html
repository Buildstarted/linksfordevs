<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Introduction to gRPC on .NET Core -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Introduction to gRPC on .NET Core</h1><div><div id="main" class="content "><p>By <a href="https://github.com/juntaoluo" data-linktype="external">John Luo</a> and <a href="https://twitter.com/jamesnk" data-linktype="external">James Newton-King</a></p><p><a href="https://grpc.io/docs/guides/" data-linktype="external">gRPC</a> is a language agnostic, high-performance Remote Procedure Call (RPC) framework.</p><p>The main benefits of gRPC are:</p><ul><li>Modern, high-performance, lightweight RPC framework.</li><li>Contract-first API development, using Protocol Buffers by default, allowing for language agnostic implementations.</li><li>Tooling available for many languages to generate strongly-typed servers and clients.</li><li>Supports client, server, and bi-directional streaming calls.</li><li>Reduced network usage with Protobuf binary serialization.</li></ul><p>These benefits make gRPC ideal for:</p><ul><li>Lightweight microservices where efficiency is critical.</li><li>Polyglot systems where multiple languages are required for development.</li><li>Point-to-point real-time services that need to handle streaming requests or responses.</li></ul><p>gRPC uses a contract-first approach to API development. Services and messages are defined in <em>*.proto</em> files:</p><pre><code class="lang-protobuf">syntax = "proto3";

service Greeter {
  rpc SayHello (HelloRequest) returns (HelloReply);
}

message HelloRequest {
  string name = 1;
}

message HelloReply {
  string message = 1;
}
</code></pre><p>.NET types for services, clients and messages are automatically generated by including <em>*.proto</em> files in a project:</p><ul><li>Add a package reference to <a href="https://www.nuget.org/packages/Grpc.Tools/" data-linktype="external">Grpc.Tools</a> package.</li><li>Add <em>*.proto</em> files to the <code>&lt;Protobuf&gt;</code> item group.</li></ul><pre><code class="lang-xml">&lt;ItemGroup&gt;
  &lt;Protobuf Include="Protos\greet.proto" /&gt;
&lt;/ItemGroup&gt;
</code></pre><p>For more information on gRPC tooling support, see <a href="basics?view=aspnetcore-3.0" data-linktype="relative-path">gRPC services with C#</a>.</p><h2 id="grpc-services-on-aspnet-core">gRPC services on ASP.NET Core</h2><p>gRPC services can be hosted on ASP.NET Core. Services have full integration with popular ASP.NET Core features such as logging, dependency injection (DI), authentication and authorization.</p><p>The gRPC service project template provides a starter service:</p><pre><code class="lang-csharp">public class GreeterService : Greeter.GreeterBase
{
    private readonly ILogger&lt;GreeterService&gt; _logger;

    public GreeterService(ILogger&lt;GreeterService&gt; logger)
    {
        _logger = logger;
    }

    public override Task&lt;HelloReply&gt; SayHello(HelloRequest request,
        ServerCallContext context)
    {
        _logger.LogInformation("Saying hello to {Name}", request.Name);
        return Task.FromResult(new HelloReply 
        {
            Message = "Hello " + request.Name
        });
    }
}
</code></pre><p><code>GreeterService</code> inherits from the <code>GreeterBase</code> type, which is generated from the <code>Greeter</code> service in the <em>*.proto</em> file. The service is made accessible to clients in <em>Startup.cs</em>:</p><pre><code class="lang-csharp">app.UseEndpoints(endpoints =&gt;
{
    endpoints.MapGrpcService&lt;GreeterService&gt;();
});
</code></pre><p>To learn more about gRPC services on ASP.NET Core, see <a href="aspnetcore?view=aspnetcore-3.0" data-linktype="relative-path">gRPC services with ASP.NET Core</a>.</p><h2 id="call-grpc-services-with-a-net-client">Call gRPC services with a .NET client</h2><p>gRPC clients are concrete client types that are <a href="basics?view=aspnetcore-3.0#generated-c-assets" data-linktype="relative-path">generated from <em>*.proto</em> files</a>. The concrete gRPC client has methods that translate to the gRPC service in the <em>*.proto</em> file.</p><pre><code class="lang-csharp">var channel = GrpcChannel.ForAddress("https://localhost:5001");
var client = new Greeter.GreeterClient(channel);

var response = await client.SayHello(
    new HelloRequest { Name = "World" });

Console.WriteLine(response.Message);
</code></pre><p>A gRPC client is created using a channel, which represents a long-lived connection to a gRPC service. A channel can be created using <code>GrpcChannel.ForAddress</code>.</p><p>For more information on creating clients, and calling different service methods, see <a href="client?view=aspnetcore-3.0" data-linktype="relative-path">Call gRPC services with the .NET client</a>.</p><h2 id="grpc-not-supported-on-azure-app-service">gRPC not supported on Azure App Service</h2><div class="WARNING"><p>Warning</p><p><a href="./?view=aspnetcore-3.0" data-linktype="relative-path">ASP.NET Core gRPC</a> is not currently supported on Azure App Service or IIS. The HTTP/2 implementation of Http.Sys does not support HTTP response trailing headers which gRPC relies on. For more information, see <a href="https://github.com/dotnet/AspNetCore/issues/9020" data-linktype="external">this GitHub issue</a>.</p></div><h2 id="additional-resources">Additional resources</h2></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>