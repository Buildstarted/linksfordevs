<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 5.0 Preview 2 | .NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Announcing Entity Framework Core 5.0 Preview 2 | .NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="https://facebook.com/cdaJeremyLikness"/>
    <meta property="og:description" content="Today we are excited to announce the second preview release of EF Core 5.0. Improvements include support for C# attributes to specify a backing field, complete discriminator mapping, and performance improvements with SQLite."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-2/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Announcing Entity Framework Core 5.0 Preview 2 | .NET Blog</title>
<div class="readable">
        <h1>Announcing Entity Framework Core 5.0 Preview 2 | .NET Blog</h1>
            <div>by https://facebook.com/cdaJeremyLikness</div>
            <div>Reading time: 5-7 minutes</div>
        <div>Posted here: 02 Apr 2020</div>
        <p><a href="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-2/">https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-2/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured"><div><div><div><div><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2018/10/Jeremy-Likness-150x150.jpg" width="58" height="58" alt="Jeremy Likness"></p><p>Jeremy</p></div></div></div><p>April 2nd, 2020</p><p>Today we are excited to announce the second preview release of <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.2.20159.4" target="_blank">EF Core 5.0</a>.</p><p>The second previews of <a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0-preview-2/">.NET 5</a> and <a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-5-preview-2/">ASP.NET Core 5.0</a> are also available now.</p><h2>Prerequisites</h2><p>The previews of EF Core 5.0 require .NET Standard 2.1. This means:</p><ul><li>EF Core 5.0 runs on .NET Core 3.1; it does not require .NET 5.<ul><li>This may change in future previews depending on how the plan for .NET 5 evolves.</li></ul></li><li>EF Core 5.0 runs on other platforms that support <a href="https://docs.microsoft.com/ef/core/platforms/" target="_blank">.NET Standard 2.1</a>.</li><li>EF Core 5.0 will <strong>not</strong> run on .NET Standard 2.0 platforms, including .NET Framework.</li></ul><hr><h2>How to get EF Core 5.0 previews</h2><p>EF Core is distributed exclusively as a set of NuGet packages. For example, to add the SQL Server provider to your project, you can use the following command using the dotnet tool:</p><pre><span>dotnet add </span><span>package</span><span> </span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>SqlServer</span><span> </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>2.20159</span><span>.</span><span>4</span></pre><p>The EF Core packages published today are:</p><ul><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore</a> – The main EF Core package</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.SqlServer</a> – Database provider for Microsoft SQL Server and SQL Azure</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Sqlite</a> – Database provider for SQLite</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Cosmos/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Cosmos</a> – Database provider for Azure Cosmos DB</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.InMemory/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.InMemory</a> – The in-memory database provider</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Tools/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Tools</a> – EF Core PowerShell commands for the Visual Studio Package Manager Console</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Design/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Design</a> – Shared design-time components for EF Core tools</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite</a> – SQL Server support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite</a> – SQLite support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Proxies/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Proxies</a> – Lazy-loading and change-tracking proxies</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Abstractions/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Abstractions</a> – Decoupled EF Core abstractions</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Relational/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Relational</a> – Shared EF Core components for relational database providers</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Analyzers/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Analyzers</a> – C# analyzers for EF Core</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.Core/5.0.0-preview.2.20159.4" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.Core</a> – Database provider for SQLite without a packaged native binary</li></ul><p>We have also published the 5.0 preview 2 release of the <a href="https://www.nuget.org/packages/Microsoft.Data.Sqlite.Core/5.0.0-preview.2.20159.4" target="_blank">Microsoft.Data.Sqlite.Core</a> ADO.NET provider.</p><h2>Installing dotnet ef</h2><p>As with EF Core 3.0 and 3.1, the dotnet ef command-line tool is no longer included in the .NET Core SDK. Before you can execute EF Core migration or scaffolding commands, you’ll have to install this package as either a global or local tool.</p><p>To install the preview tool globally, first uninstall any existing version with:</p><pre><span>dotnet tool uninstall </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef</span></pre><p>Then install with:</p><pre><span>dotnet tool install </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>2.20159</span><span>.</span><span>4</span></pre><figure id="attachment_27406" aria-describedby="caption-attachment-27406"><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-1024x285.jpg" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-1024x285.jpg" alt="Image ef5preview2" width="640" height="178" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-1024x285.jpg 1024w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-300x84.jpg 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-768x214.jpg 768w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-1536x428.jpg 1536w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/04/ef5preview2-scaled.jpg 2048w" sizes="(max-width: 640px) 100vw, 640px"> </a><figcaption id="caption-attachment-27406">EF 5 Preview 2</figcaption></figure><p>It’s possible to use this new version of dotnet ef with projects that use older versions of the EF Core runtime.</p><hr><h2>What’s new in EF Core 5 Preview 2</h2><p>We maintain documentation covering <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-5.0/whatsnew" target="_blank">new features introduced into each preview</a>.</p><p>Some of the highlights from preview 2 are called out below.</p><h3>Use a C# attribute to specify a property backing field</h3><p>A C# attribute can now be used to specify the backing field for a property. This allows EF Core to still write to and read from the backing field as would normally happen, even when the backing field cannot be found automatically. For example:</p><pre><code><span>public</span><span> </span><span>class</span><span> </span><span>Blog</span><span>
</span><span>{</span><span>
    </span><span>private</span><span> </span><span>string</span><span> _mainTitle</span><span>;</span><span>

    </span><span>public</span><span> </span><span>int</span><span> </span><span>Id</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>

    </span><span>[</span><span>BackingField</span><span>(</span><span>nameof</span><span>(</span><span>_mainTitle</span><span>))]</span><span>
    </span><span>public</span><span> </span><span>string</span><span> </span><span>Title</span><span>
    </span><span>{</span><span>
        </span><span>get</span><span> </span><span>=&gt;</span><span> _mainTitle</span><span>;</span><span>
        </span><span>set</span><span> </span><span>=&gt;</span><span> _mainTitle </span><span>=</span><span> value</span><span>;</span><span>
    </span><span>}</span><span>
</span><span>}</span></code></pre><p>Documentation is tracked by issue <a href="https://github.com/dotnet/EntityFramework.Docs/issues/2230" target="_blank">#2230</a>.</p><h3>Complete discriminator mapping</h3><p>EF Core uses a discriminator column for <a href="https://docs.microsoft.com/ef/core/modeling/inheritance" target="_blank">TPH mapping of an inheritance hierarchy</a>. Some performance enhancements are possible so long as EF Core knows all possible values for the discriminator. EF Core 5.0 now implements these enhancements.</p><p>For example, previous versions of EF Core would always generate this SQL for a query returning all types in a hierarchy:</p><pre><code><span>SELECT </span><span>[</span><span>a</span><span>].[</span><span>Id</span><span>],</span><span> </span><span>[</span><span>a</span><span>].[</span><span>Discriminator</span><span>],</span><span> </span><span>[</span><span>a</span><span>].[</span><span>Name</span><span>]</span><span>
FROM </span><span>[</span><span>Animal</span><span>]</span><span> AS </span><span>[</span><span>a</span><span>]</span><span>
WHERE </span><span>[</span><span>a</span><span>].[</span><span>Discriminator</span><span>]</span><span> IN </span><span>(</span><span>N</span><span>'Animal'</span><span>,</span><span> N</span><span>'Cat'</span><span>,</span><span> N</span><span>'Dog'</span><span>,</span><span> N</span><span>'Human'</span><span>)</span></code></pre><p>EF Core 5.0 will now generate the following when a complete discriminator mapping is configured:</p><pre><code><span>SELECT </span><span>[</span><span>a</span><span>].[</span><span>Id</span><span>],</span><span> </span><span>[</span><span>a</span><span>].[</span><span>Discriminator</span><span>],</span><span> </span><span>[</span><span>a</span><span>].[</span><span>Name</span><span>]</span><span>
FROM </span><span>[</span><span>Animal</span><span>]</span><span> AS </span><span>[</span><span>a</span><span>]</span></code></pre><p>This will be the default behavior starting with preview 3.</p><h3>Performance improvements in Microsoft.Data.Sqlite</h3><p>We have made two performance improvements for SQLIte:</p><ul><li>Retrieving binary and string data with <code>GetBytes</code>, <code>GetChars</code>, and <code>GetTextReader</code> is now more efficient by making use of <code>SqliteBlob</code> and streams.</li><li>Initialization of <code>SqliteConnection</code> is now lazy.</li></ul><p>These improvements are in the <a href="https://www.nuget.org/packages/Microsoft.Data.Sqlite.Core/5.0.0-preview.2.20159.4" target="_blank">ADO.NET Microsoft.Data.Sqlite</a> provider and hence also improve performance outside of EF Core.</p><hr><h2>Daily builds</h2><p>EF Core previews are aligned with .NET 5 previews. These previews tend to lag behind the latest work on EF Core. Consider using the <a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md" target="_blank">daily builds</a> instead to get the most up-to-date EF Core features and bug fixes.</p><p>As with the previews, the daily builds do not require .NET 5; they can be used with GA/RTM release of .NET Core 3.1.</p><hr><h2>Documentation and feedback</h2><p>The starting point for all EF Core documentation is <a href="https://docs.microsoft.com/ef/core/" target="_blank">docs.microsoft.com/ef/core/</a>.</p><p>Please file issues found and any other feedback on the <a href="https://github.com/dotnet/efcore" target="_blank">dotnet/efcore GitHub repo</a>.</p><hr><h2>Thank you from the team</h2><p>A big thank you from the EF team to everyone who has used EF over the years!</p><hr><h2>Thank you to our contributors!</h2><p>A big thank you to the following community members who have already contributed code or documentation to the EF Core 5 release!</p></div></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>