<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Employee Scheduling &#xA0;|&#xA0; OR-Tools &#xA0;|&#xA0; Google Developers - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Employee Scheduling &#xA0;|&#xA0; OR-Tools &#xA0;|&#xA0; Google Developers - linksfor.dev(s)"/>
    <meta property="og:description" content="Organizations whose employees work multiple shifts need to&#xA;schedule sufficient workers for each daily shift. Typically, the schedules will have&#xA;constraints, such as &quot;no employee should work two shifts in a row&quot;. Finding a schedule&#xA;that satisfies all constraints can be computationally difficult."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://developers.google.com/optimization/scheduling/employee_scheduling"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Employee Scheduling &#xA0;|&#xA0; OR-Tools &#xA0;|&#xA0; Google Developers</title>
<div class="readable">
        <h1>Employee Scheduling &#xA0;|&#xA0; OR-Tools &#xA0;|&#xA0; Google Developers</h1>
            <div>Reading time: 19-24 minutes</div>
        <div>Posted here: 15 Mar 2020</div>
        <p><a href="https://developers.google.com/optimization/scheduling/employee_scheduling">https://developers.google.com/optimization/scheduling/employee_scheduling</a></p>
        <hr/>
<div id="readability-page-1" class="page"><devsite-mathjax config="TeX-AMS-MML_SVG"></devsite-mathjax>
  

    
  
    <devsite-progress id="app-progress"></devsite-progress>
    <section><devsite-header top-row--height="48" bottom-row--height="48" bottom-tabs--height="48" fixed="">
      









  </devsite-header>      <devsite-book-nav scrollbars="" animatable="" fixed="">
                  





<nav>
  

  
</nav>
              </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" has-book-nav="" has-toc="">
          <devsite-toc visible="" fixed="" max-height="1056" offset="0"><ul scrollbars=""><li><a href="#top_of_page"><span tooltip="">Contents</span></a></li><li><a href="#nurse_scheduling"><span tooltip="">A nurse scheduling problem</span></a></li><li><a href="#python"><span tooltip="">A Python solution.</span></a><ul><li><a href="#data" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.0"><span tooltip="">Data for the example</span></a></li><li><a href="#solver" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.1"><span tooltip="">Create the variables</span></a></li><li><a href="#all_different" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.2"><span tooltip="">Assign nurses to shifts</span></a></li><li><a href="#at_most_two_nurses" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.3"><span tooltip="">Assign shifts evenly</span></a></li><li><a href="#solve" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.4"><span tooltip="">Call the solver and display the results</span></a></li><li><a href="#program" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="1.5"><span tooltip="">Entire program</span></a></li></ul></li><li><a href="#requests"><span tooltip="">Scheduling with shift requests</span></a><ul><li><a href="#data2" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="2.0"><span tooltip="">Data for the example</span></a></li><li><a href="#objective" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="2.1"><span tooltip="">Objective for the example</span></a></li><li><a href="#solve2" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="2.2"><span tooltip="">Call the solver and display the results</span></a></li><li><a href="#program2" data-category="Site-Wide Custom Events" data-action="click" data-label="Right nav" data-value="2.3"><span tooltip="">Entire program</span></a></li></ul></li></ul></devsite-toc>
          <devsite-content>
                          

<article>
  <article>        
    

              <devsite-heading text="Employee Scheduling" for="employee-scheduling" level="h1"></devsite-heading>
    
    <devsite-toc devsite-toc-embedded="" expandable="" visible=""><ul scrollbars=""><li><a href="#top_of_page"><span tooltip="">Contents</span></a></li><li><a href="#nurse_scheduling"><span tooltip="">A nurse scheduling problem</span></a></li><li><a href="#python"><span tooltip="">A Python solution.</span></a><ul><li><a href="#data" data-category="Site-Wide Custom Events" data-action="click" data-label="Embedded nav" data-value="1.0"><span tooltip="">Data for the example</span></a></li><li><a href="#solver" data-category="Site-Wide Custom Events" data-action="click" data-label="Embedded nav" data-value="1.1"><span tooltip="">Create the variables</span></a></li></ul></li><li></li></ul></devsite-toc>

    <div>

              
    <p>Organizations whose employees work multiple shifts need to
schedule sufficient workers for each daily shift. Typically, the schedules will have
constraints, such as "no employee should work two shifts in a row". Finding a schedule
that satisfies all constraints can be computationally difficult.</p>
      <p>The following sections present two
      examples of employee scheduling problems, and show how to solve them
      using the <a href="https://developers.google.com/optimization/cp/cp_solver">CP-SAT solver</a>.</p>
      <p>For a more sophisticated example, see this
    <a href="https://github.com/google/or-tools/blob/master/examples/python/shift_scheduling_sat.py">
    shift scheduling program</a> on GitHub.</p>

    <devsite-heading text="A nurse scheduling problem" for="nurse_scheduling" level="h2" link="" toc="" back-to-top=""><h2 id="nurse_scheduling" is-upgraded="">A nurse scheduling problem<a href="#top_of_page" data-title="Back to top"></a></h2></devsite-heading>
     <p>In the next example, a hospital supervisor needs to create a schedule for four nurses over
     a three-day period, subject to the following conditions:</p>
    <ul>
      <li>Each day is divided into three 8-hour shifts.</li>
      <li>Every day, each shift is assigned to a single nurse, and no nurse works more than one
          shift.
       </li><li>Each nurse is assigned to at least two shifts during the three-day period.</li>
    </ul>

    <devsite-heading text="A Python solution." for="python" level="h2" link="" toc="" back-to-top=""><h2 id="python" is-upgraded="">A Python solution.<a href="#top_of_page" data-title="Back to top"></a></h2></devsite-heading>
    <p>The following sections present a Python solution to the nurse scheduling problem.</p>

    <devsite-heading text="Data for the example" for="data" level="h3" link="" toc=""><h3 id="data" is-upgraded="">Data for the example</h3></devsite-heading>
    <p>The following code creates the data for the example.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; num_nurses </span><span>=</span><span> </span><span>4</span><span><br>&nbsp; &nbsp; num_shifts </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; num_days </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; all_nurses </span><span>=</span><span> range</span><span>(</span><span>num_nurses</span><span>)</span><span><br>&nbsp; &nbsp; all_shifts </span><span>=</span><span> range</span><span>(</span><span>num_shifts</span><span>)</span><span><br>&nbsp; &nbsp; all_days </span><span>=</span><span> range</span><span>(</span><span>num_days</span><span>)</span></pre></devsite-code>

    <devsite-heading text="Create the variables" for="solver" level="h3" link="" toc=""><h3 id="solver" is-upgraded="">Create the variables</h3></devsite-heading>
    <p>The following code an array of variables for the
      problem.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; shifts </span><span>=</span><span> </span><span>{}</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s</span><span>)]</span><span> </span><span>=</span><span> model</span><span>.</span><span>NewBoolVar</span><span>(</span><span>'shift_n%id%is%i'</span><span> </span><span>%</span><span> </span><span>(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>))</span></pre></devsite-code>
    <p>The array defines assignments for shifts to nurses as follows:</p>
    <p><code translate="no" dir="ltr">shifts[(n, d, s)]</code> equals 1 if shift s is assigned to nurse n on day d, and
      0 otherwise.</p>

    <devsite-heading text="Assign nurses to shifts" for="all_different" level="h3" link="" toc=""><h3 id="all_different" is-upgraded="">Assign nurses to shifts</h3></devsite-heading>
    <p>Next, we show how to assign nurses to shifts subject to the following constraints:</p>
    <ul>
       <li>Each shift is assigned to a single nurse per day.</li>
       <li>Each nurse works at most one shift per day.</li>
    </ul>
     <p>Here's the code that creates the first condition.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>)</span><span> </span><span>==</span><span> </span><span>1</span><span>)</span></pre></devsite-code>
    <p>The last line says that for each shift, the sum of the nurses assigned to that shift is 1.</p>
    <p>Next, here's the code that requires that each nurse works at most one shift per day.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span> </span><span>&lt;=</span><span> </span><span>1</span><span>)</span></pre></devsite-code>
    <p>For each nurse, the sum of shifts assigned to that nurse is at most 1 ("at most"
      because a nurse might have the day off).</p>

    <devsite-heading text="Assign shifts evenly" for="at_most_two_nurses" level="h3" link="" toc=""><h3 id="at_most_two_nurses" is-upgraded="">Assign shifts evenly</h3></devsite-heading>
    <p>Next, we show how to assign shifts to nurses as evenly as possible.
    Since there are nine
    shifts over the three-day period, we can assign two shifts to each of the four nurses.
    After that there will be one shift left over, which can be assigned to any nurse.</p>
    <p>The following code ensures that each nurse works at least two shifts in the three-day
    period.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; </span><span># min_shifts_per_nurse is the largest integer such that every nurse</span><span><br>&nbsp; &nbsp; </span><span># can be assigned at least that many shifts. If the number of nurses doesn't</span><span><br>&nbsp; &nbsp; </span><span># divide the total number of shifts over the schedule period,</span><span><br>&nbsp; &nbsp; </span><span># some nurses have to work one more shift, for a total of</span><span><br>&nbsp; &nbsp; </span><span># min_shifts_per_nurse + 1.</span><span><br>&nbsp; &nbsp; min_shifts_per_nurse </span><span>=</span><span> </span><span>(</span><span>num_shifts </span><span>*</span><span> num_days</span><span>)</span><span> </span><span>//</span><span> num_nurses<br>&nbsp; &nbsp; max_shifts_per_nurse </span><span>=</span><span> min_shifts_per_nurse </span><span>+</span><span> </span><span>1</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; num_shifts_worked </span><span>=</span><span> sum</span><span>(</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> d </span><span>in</span><span> all_days </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>min_shifts_per_nurse </span><span>&lt;=</span><span> num_shifts_worked</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>num_shifts_worked </span><span>&lt;=</span><span> max_shifts_per_nurse</span><span>)</span></pre></devsite-code>
    <p>Since there are <code translate="no" dir="ltr">num_shifts * num_days</code> total shifts in the schedule period,
    you can assign at least</p>
    <devsite-code no-copy=""><pre translate="no" dir="ltr" is-upgraded="">(num_shifts * num_days) // num_nurses</pre></devsite-code>
    <p>shifts to each nurse, but some shifts may be left over. (Here
    <code translate="no" dir="ltr">//</code> is the Python integer division operator, which returns the floor of the usual
    quotient.)</p>
    <p>For the given values of <code translate="no" dir="ltr">num_nurses = 4</code>, <code translate="no" dir="ltr">num_shifts = 3</code>,
    and <code translate="no" dir="ltr">num_days = 3</code>, the expression
    <code translate="no" dir="ltr">min_shifts_per_nurse</code> has the value
    <code translate="no" dir="ltr">(3&nbsp;*&nbsp;3&nbsp;//&nbsp;4)&nbsp;=&nbsp;2</code>, so you can assign at least two
    shifts to each nurse. This is guaranteed by the constraint</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>model</span><span>.</span><span>Add</span><span>(</span><span>min_shifts_per_nurse </span><span>&lt;=</span><span> num_shifts_worked</span><span>)</span></pre></devsite-code>
    <p>Since there are nine total shifts over the three-day period, there is one remaining
    shift after assigning two shifts to each nurse. The extra shift can be assigned to any nurse.</p>
    <p>The final line</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>model</span><span>.</span><span>Add</span><span>(</span><span>num_shifts_worked </span><span>&lt;=</span><span> max_shifts_per_nurse</span><span>)</span></pre></devsite-code>
    <p>ensures that no nurse is assigned more than one extra shift.
    The constraint
    isn't necessary in this case, because there's only one extra shift. But for different
    parameter values, there could be several extra shifts, in which case the constraint is
    necessary.</p>

    <devsite-heading text="Call the solver and display the results" for="solve" level="h3" link="" toc=""><h3 id="solve" is-upgraded="">Call the solver and display the results</h3></devsite-heading>
    <p>The following code calls the solver and displays the first five solutions.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; solver </span><span>=</span><span> cp_model</span><span>.</span><span>CpSolver</span><span>()</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>parameters</span><span>.</span><span>linearization_level </span><span>=</span><span> </span><span>0</span><span><br>&nbsp; &nbsp; </span><span># Display the first five solutions.</span><span><br>&nbsp; &nbsp; a_few_solutions </span><span>=</span><span> range</span><span>(</span><span>5</span><span>)</span><span><br>&nbsp; &nbsp; solution_printer </span><span>=</span><span> </span><span>NursesPartialSolutionPrinter</span><span>(</span><span>shifts</span><span>,</span><span> num_nurses</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_days</span><span>,</span><span> num_shifts</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a_few_solutions</span><span>)</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>SearchForAllSolutions</span><span>(</span><span>model</span><span>,</span><span> solution_printer</span><span>)</span></pre></devsite-code>
    <p>Here are the first five solutions.</p>
    <devsite-code no-copy=""><pre translate="no" dir="ltr" is-upgraded="">Solution 0
Day 0
  Nurse 0 does not work
  Nurse 1 works shift 0
  Nurse 2 works shift 1
  Nurse 3 works shift 2
Day 1
  Nurse 0 works shift 2
  Nurse 1 does not work
  Nurse 2 works shift 1
  Nurse 3 works shift 0
Day 2
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 works shift 0
  Nurse 3 does not work

Solution 1
Day 0
  Nurse 0 works shift 0
  Nurse 1 does not work
  Nurse 2 works shift 1
  Nurse 3 works shift 2
Day 1
  Nurse 0 does not work
  Nurse 1 works shift 2
  Nurse 2 works shift 1
  Nurse 3 works shift 0
Day 2
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 works shift 0
  Nurse 3 does not work

Solution 2
Day 0
  Nurse 0 works shift 0
  Nurse 1 does not work
  Nurse 2 works shift 1
  Nurse 3 works shift 2
Day 1
  Nurse 0 works shift 1
  Nurse 1 works shift 2
  Nurse 2 does not work
  Nurse 3 works shift 0
Day 2
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 works shift 0
  Nurse 3 does not work

Solution 3
Day 0
  Nurse 0 does not work
  Nurse 1 works shift 0
  Nurse 2 works shift 1
  Nurse 3 works shift 2
Day 1
  Nurse 0 works shift 1
  Nurse 1 works shift 2
  Nurse 2 does not work
  Nurse 3 works shift 0
Day 2
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 works shift 0
  Nurse 3 does not work

Solution 4
Day 0
  Nurse 0 does not work
  Nurse 1 works shift 0
  Nurse 2 works shift 1
  Nurse 3 works shift 2
Day 1
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 does not work
  Nurse 3 works shift 0
Day 2
  Nurse 0 works shift 2
  Nurse 1 works shift 1
  Nurse 2 works shift 0
  Nurse 3 does not work


Statistics
  - conflicts       : 215
  - branches        : 46931
  - wall time       : 0.320325 s
  - solutions found : 5184
</pre></devsite-code>
    <p>The total number of solutions is 5184. The following
    counting argument explains why.</p>
    <p>First,
    there are 4 choices for the one nurse who works an extra shift.
    Having chosen that nurse, there are 3 shifts the nurse can be assigned to on each of the
    3 days, so the number of possible ways to assign the nurse with the extra shift is
    4 · 3<sup>3</sup> = 108. After assigning this nurse, there are two remaining
    unassigned shifts on each day.</p>
    <p>Of the remaining three nurses, one works days 0 and 1, one works days 0 and 2, and one
    works days 1 and 2.
    There are 3! = 6 ways to assign the nurses to these days, as shown in the diagram below.
    (The three nurses are labeled A, B, and C, and we have not yet assigned them to
    shifts.)</p>
    <devsite-code no-copy=""><pre translate="no" dir="ltr" is-upgraded="">    Day 0    Day 1    Day 2
     A B      A C      B C
     A B      B C      A C
     A C      A B      B C
     A C      B C      A B
     B C      A B      A C
     B C      A C      A B</pre></devsite-code>

    <p>For each row in the above diagram, there are 2<sup>3</sup> = 8 possible
    ways to assign the remaining shifts to the nurses (two choices on each day).
    So the total number of possible assignments is 108·6·8 = 5184.</p>

    <devsite-heading text="Entire program" for="program" level="h3" link="" toc=""><h3 id="program" is-upgraded="">Entire program</h3></devsite-heading>
    <p>Here is the entire program for the nurse scheduling problem.
    </p><devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>from</span><span> __future__ </span><span>import</span><span> print_function<br></span><span>from</span><span> ortools</span><span>.</span><span>sat</span><span>.</span><span>python </span><span>import</span><span> cp_model</span><span>class</span><span> </span><span>NursesPartialSolutionPrinter</span><span>(</span><span>cp_model</span><span>.</span><span>CpSolverSolutionCallback</span><span>):</span><span><br>&nbsp; &nbsp; </span><span>"""Print intermediate solutions."""</span><span></span><span>def</span><span> __init__</span><span>(</span><span>self</span><span>,</span><span> shifts</span><span>,</span><span> num_nurses</span><span>,</span><span> num_days</span><span>,</span><span> num_shifts</span><span>,</span><span> sols</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; cp_model</span><span>.</span><span>CpSolverSolutionCallback</span><span>.</span><span>__init__</span><span>(</span><span>self</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_shifts </span><span>=</span><span> shifts<br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_num_nurses </span><span>=</span><span> num_nurses<br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_num_days </span><span>=</span><span> num_days<br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_num_shifts </span><span>=</span><span> num_shifts<br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_solutions </span><span>=</span><span> set</span><span>(</span><span>sols</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_solution_count </span><span>=</span><span> </span><span>0</span><span></span><span>def</span><span> on_solution_callback</span><span>(</span><span>self</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> self</span><span>.</span><span>_solution_count </span><span>in</span><span> self</span><span>.</span><span>_solutions</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Solution %i'</span><span> </span><span>%</span><span> self</span><span>.</span><span>_solution_count</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> range</span><span>(</span><span>self</span><span>.</span><span>_num_days</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Day %i'</span><span> </span><span>%</span><span> d</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> range</span><span>(</span><span>self</span><span>.</span><span>_num_nurses</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is_working </span><span>=</span><span> </span><span>False</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> range</span><span>(</span><span>self</span><span>.</span><span>_num_shifts</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> self</span><span>.</span><span>Value</span><span>(</span><span>self</span><span>.</span><span>_shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is_working </span><span>=</span><span> </span><span>True</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;Nurse %i works shift %i'</span><span> </span><span>%</span><span> </span><span>(</span><span>n</span><span>,</span><span> s</span><span>))</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> </span><span>not</span><span> is_working</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;Nurse {} does not work'</span><span>.</span><span>format</span><span>(</span><span>n</span><span>))</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>()</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; self</span><span>.</span><span>_solution_count </span><span>+=</span><span> </span><span>1</span><span></span><span>def</span><span> solution_count</span><span>(</span><span>self</span><span>):</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>return</span><span> self</span><span>.</span><span>_solution_count</span><span>def</span><span> main</span><span>():</span><span><br>&nbsp; &nbsp; </span><span># Data.</span><span><br>&nbsp; &nbsp; num_nurses </span><span>=</span><span> </span><span>4</span><span><br>&nbsp; &nbsp; num_shifts </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; num_days </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; all_nurses </span><span>=</span><span> range</span><span>(</span><span>num_nurses</span><span>)</span><span><br>&nbsp; &nbsp; all_shifts </span><span>=</span><span> range</span><span>(</span><span>num_shifts</span><span>)</span><span><br>&nbsp; &nbsp; all_days </span><span>=</span><span> range</span><span>(</span><span>num_days</span><span>)</span><span><br>&nbsp; &nbsp; </span><span># Creates the model.</span><span><br>&nbsp; &nbsp; model </span><span>=</span><span> cp_model</span><span>.</span><span>CpModel</span><span>()</span><span></span><span># Creates shift variables.</span><span><br>&nbsp; &nbsp; </span><span># shifts[(n, d, s)]: nurse 'n' works shift 's' on day 'd'.</span><span><br>&nbsp; &nbsp; shifts </span><span>=</span><span> </span><span>{}</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s</span><span>)]</span><span> </span><span>=</span><span> model</span><span>.</span><span>NewBoolVar</span><span>(</span><span>'shift_n%id%is%i'</span><span> </span><span>%</span><span> </span><span>(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>))</span><span></span><span># Each shift is assigned to exactly one nurse in the schedule period.</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>)</span><span> </span><span>==</span><span> </span><span>1</span><span>)</span><span></span><span># Each nurse works at most one shift per day.</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span> </span><span>&lt;=</span><span> </span><span>1</span><span>)</span><span></span><span># min_shifts_per_nurse is the largest integer such that every nurse</span><span><br>&nbsp; &nbsp; </span><span># can be assigned at least that many shifts. If the number of nurses doesn't</span><span><br>&nbsp; &nbsp; </span><span># divide the total number of shifts over the schedule period,</span><span><br>&nbsp; &nbsp; </span><span># some nurses have to work one more shift, for a total of</span><span><br>&nbsp; &nbsp; </span><span># min_shifts_per_nurse + 1.</span><span><br>&nbsp; &nbsp; min_shifts_per_nurse </span><span>=</span><span> </span><span>(</span><span>num_shifts </span><span>*</span><span> num_days</span><span>)</span><span> </span><span>//</span><span> num_nurses<br>&nbsp; &nbsp; max_shifts_per_nurse </span><span>=</span><span> min_shifts_per_nurse </span><span>+</span><span> </span><span>1</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; num_shifts_worked </span><span>=</span><span> sum</span><span>(</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> d </span><span>in</span><span> all_days </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>min_shifts_per_nurse </span><span>&lt;=</span><span> num_shifts_worked</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>num_shifts_worked </span><span>&lt;=</span><span> max_shifts_per_nurse</span><span>)</span><span></span><span># Creates the solver and solve.</span><span><br>&nbsp; &nbsp; solver </span><span>=</span><span> cp_model</span><span>.</span><span>CpSolver</span><span>()</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>parameters</span><span>.</span><span>linearization_level </span><span>=</span><span> </span><span>0</span><span><br>&nbsp; &nbsp; </span><span># Display the first five solutions.</span><span><br>&nbsp; &nbsp; a_few_solutions </span><span>=</span><span> range</span><span>(</span><span>5</span><span>)</span><span><br>&nbsp; &nbsp; solution_printer </span><span>=</span><span> </span><span>NursesPartialSolutionPrinter</span><span>(</span><span>shifts</span><span>,</span><span> num_nurses</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_days</span><span>,</span><span> num_shifts</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a_few_solutions</span><span>)</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>SearchForAllSolutions</span><span>(</span><span>model</span><span>,</span><span> solution_printer</span><span>)</span><span></span><span># Statistics.</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>()</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Statistics'</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- conflicts &nbsp; &nbsp; &nbsp; : %i'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>NumConflicts</span><span>())</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- branches &nbsp; &nbsp; &nbsp; &nbsp;: %i'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>NumBranches</span><span>())</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- wall time &nbsp; &nbsp; &nbsp; : %f s'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>WallTime</span><span>())</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- solutions found : %i'</span><span> </span><span>%</span><span> solution_printer</span><span>.</span><span>solution_count</span><span>())</span><span></span><span>if</span><span> __name__ </span><span>==</span><span> </span><span>'__main__'</span><span>:</span><span><br>&nbsp; &nbsp; main</span><span>()</span></pre></devsite-code>

    <devsite-heading text="Scheduling with shift requests" for="requests" level="h2" link="" toc="" back-to-top=""><h2 id="requests" is-upgraded="">Scheduling with shift requests<a href="#top_of_page" data-title="Back to top"></a></h2></devsite-heading>
    <p>In this section, we take the previous example and add nurse requests for specific shifts.
      We then look for a schedule that maximizes the number
      of requests that are met. For most scheduling problems, it's best to optimize an objective
      function, as it is usually not practical to print all possible schedules.</p>
   <p>This example has the same constraints as the previous example.</p>

   <devsite-heading text="Data for the example" for="data2" level="h3" link="" toc=""><h3 id="data2" is-upgraded="">Data for the example</h3></devsite-heading>
   <p>The data for this example is shown below.</p>
   <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; num_nurses </span><span>=</span><span> </span><span>5</span><span><br>&nbsp; &nbsp; num_shifts </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; num_days </span><span>=</span><span> </span><span>7</span><span><br>&nbsp; &nbsp; all_nurses </span><span>=</span><span> range</span><span>(</span><span>num_nurses</span><span>)</span><span><br>&nbsp; &nbsp; all_shifts </span><span>=</span><span> range</span><span>(</span><span>num_shifts</span><span>)</span><span><br>&nbsp; &nbsp; all_days </span><span>=</span><span> range</span><span>(</span><span>num_days</span><span>)</span><span><br>&nbsp; &nbsp; shift_requests </span><span>=</span><span> </span><span>[[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]]]</span></pre></devsite-code>
   <p>In addition to the variables from the previous example, the data also contains a set of
   triples, corresponding to the three shifts per day. Each element of the triple is 0
   or 1, indicating whether a shift was requested. For example, the triple [0, 0, 1] in the fifth
   position of row 1 indicates that nurse 1 requests shift 3 on day 5.</p>

   <devsite-heading text="Objective for the example" for="objective" level="h3" link="" toc=""><h3 id="objective" is-upgraded="">Objective for the example</h3></devsite-heading>
    <p>We want to optimize the following objective function.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; model</span><span>.</span><span>Maximize</span><span>(</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; sum</span><span>(</span><span>shift_requests</span><span>[</span><span>n</span><span>][</span><span>d</span><span>][</span><span>s</span><span>]</span><span> </span><span>*</span><span> shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> n </span><span>in</span><span> all_nurses<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>))</span></pre></devsite-code>
    <p>Since <code translate="no" dir="ltr">shift_requests[n][d][s] * shifts[(n, d, s)</code> is 1 if shift <code translate="no" dir="ltr">s</code>
    is assigned to nurse <code translate="no" dir="ltr">n</code> on day <code translate="no" dir="ltr">d</code> <em>and</em> that nurse requested that
    shift (and 0 otherwise), the objective is the number shift of assignments that meet a request.</p>

    <devsite-heading text="Call the solver and display the results" for="solve2" level="h3" link="" toc=""><h3 id="solve2" is-upgraded="">Call the solver and display the results</h3></devsite-heading>
    <p>The following code calls the solver and displays the following output, which contains
    an optimal schedule (although perhaps not the only one). The output
    shows which shift assignments were requested and the number of request that were met.</p>
    <devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>&nbsp; &nbsp; solver </span><span>=</span><span> cp_model</span><span>.</span><span>CpSolver</span><span>()</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>Solve</span><span>(</span><span>model</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Day'</span><span>,</span><span> d</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> solver</span><span>.</span><span>Value</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)])</span><span> </span><span>==</span><span> </span><span>1</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> shift_requests</span><span>[</span><span>n</span><span>][</span><span>d</span><span>][</span><span>s</span><span>]</span><span> </span><span>==</span><span> </span><span>1</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Nurse'</span><span>,</span><span> n</span><span>,</span><span> </span><span>'works shift'</span><span>,</span><span> s</span><span>,</span><span> </span><span>'(requested).'</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>else</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Nurse'</span><span>,</span><span> n</span><span>,</span><span> </span><span>'works shift'</span><span>,</span><span> s</span><span>,</span><span> </span><span>'(not requested).'</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>()</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>()</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Statistics'</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- Number of shift requests met = %i'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>ObjectiveValue</span><span>(),</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>'(out of'</span><span>,</span><span> num_nurses </span><span>*</span><span> min_shifts_per_nurse</span><span>,</span><span> </span><span>')'</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- wall time &nbsp; &nbsp; &nbsp; : %f s'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>WallTime</span><span>())</span></pre></devsite-code>

    <p>When you run the program, it displays the following output:</p>
    <devsite-code no-copy=""><pre translate="no" dir="ltr" is-upgraded="">Day 0
Nurse 1 works shift 0 (not requested).
Nurse 2 works shift 1 (requested).
Nurse 3 works shift 2 (requested).

Day 1
Nurse 0 works shift 0 (not requested).
Nurse 2 works shift 1 (requested).
Nurse 4 works shift 2 (requested).

Day 2
Nurse 1 works shift 2 (not requested).
Nurse 3 works shift 0 (requested).
Nurse 4 works shift 1 (requested).

Day 3
Nurse 2 works shift 0 (requested).
Nurse 3 works shift 1 (requested).
Nurse 4 works shift 2 (not requested).

Day 4
Nurse 0 works shift 2 (requested).
Nurse 1 works shift 0 (requested).
Nurse 4 works shift 1 (not requested).

Day 5
Nurse 0 works shift 2 (not requested).
Nurse 2 works shift 1 (requested).
Nurse 3 works shift 0 (requested).

Day 6
Nurse 0 works shift 1 (not requested).
Nurse 1 works shift 2 (requested).
Nurse 4 works shift 0 (not requested).


Statistics
  - Number of shift requests met = 13 (out of 20 )
  - wall time       : 0.003571 s</pre></devsite-code>

    <devsite-heading text="Entire program" for="program2" level="h3" link="" toc=""><h3 id="program2" is-upgraded="">Entire program</h3></devsite-heading>
    <p>Here is the entire program for scheduling with shift requests.
    </p><devsite-code><pre translate="no" dir="ltr" is-upgraded=""><span>from</span><span> __future__ </span><span>import</span><span> print_function<br></span><span>from</span><span> ortools</span><span>.</span><span>sat</span><span>.</span><span>python </span><span>import</span><span> cp_model</span><span>def</span><span> main</span><span>():</span><span><br>&nbsp; &nbsp; </span><span># This program tries to find an optimal assignment of nurses to shifts</span><span><br>&nbsp; &nbsp; </span><span># (3 shifts per day, for 7 days), subject to some constraints (see below).</span><span><br>&nbsp; &nbsp; </span><span># Each nurse can request to be assigned to specific shifts.</span><span><br>&nbsp; &nbsp; </span><span># The optimal assignment maximizes the number of fulfilled shift requests.</span><span><br>&nbsp; &nbsp; num_nurses </span><span>=</span><span> </span><span>5</span><span><br>&nbsp; &nbsp; num_shifts </span><span>=</span><span> </span><span>3</span><span><br>&nbsp; &nbsp; num_days </span><span>=</span><span> </span><span>7</span><span><br>&nbsp; &nbsp; all_nurses </span><span>=</span><span> range</span><span>(</span><span>num_nurses</span><span>)</span><span><br>&nbsp; &nbsp; all_shifts </span><span>=</span><span> range</span><span>(</span><span>num_shifts</span><span>)</span><span><br>&nbsp; &nbsp; all_days </span><span>=</span><span> range</span><span>(</span><span>num_days</span><span>)</span><span><br>&nbsp; &nbsp; shift_requests </span><span>=</span><span> </span><span>[[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>[[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>],</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span>[</span><span>0</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>],</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>]]]</span><span><br>&nbsp; &nbsp; </span><span># Creates the model.</span><span><br>&nbsp; &nbsp; model </span><span>=</span><span> cp_model</span><span>.</span><span>CpModel</span><span>()</span><span></span><span># Creates shift variables.</span><span><br>&nbsp; &nbsp; </span><span># shifts[(n, d, s)]: nurse 'n' works shift 's' on day 'd'.</span><span><br>&nbsp; &nbsp; shifts </span><span>=</span><span> </span><span>{}</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s</span><span>)]</span><span> </span><span>=</span><span> model</span><span>.</span><span>NewBoolVar</span><span>(</span><span>'shift_n%id%is%i'</span><span> </span><span>%</span><span> </span><span>(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>))</span><span></span><span># Each shift is assigned to exactly one nurse in .</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>)</span><span> </span><span>==</span><span> </span><span>1</span><span>)</span><span></span><span># Each nurse works at most one shift per day.</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>sum</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span> </span><span>&lt;=</span><span> </span><span>1</span><span>)</span><span></span><span># min_shifts_assigned is the largest integer such that every nurse can be</span><span><br>&nbsp; &nbsp; </span><span># assigned at least that number of shifts.</span><span><br>&nbsp; &nbsp; min_shifts_per_nurse </span><span>=</span><span> </span><span>(</span><span>num_shifts </span><span>*</span><span> num_days</span><span>)</span><span> </span><span>//</span><span> num_nurses<br>&nbsp; &nbsp; max_shifts_per_nurse </span><span>=</span><span> min_shifts_per_nurse </span><span>+</span><span> </span><span>1</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; num_shifts_worked </span><span>=</span><span> sum</span><span>(</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> d </span><span>in</span><span> all_days </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>min_shifts_per_nurse </span><span>&lt;=</span><span> num_shifts_worked</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; model</span><span>.</span><span>Add</span><span>(</span><span>num_shifts_worked </span><span>&lt;=</span><span> max_shifts_per_nurse</span><span>)</span><span><p>&nbsp; &nbsp; model</p></span><span>.</span><span>Maximize</span><span>(</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; sum</span><span>(</span><span>shift_requests</span><span>[</span><span>n</span><span>][</span><span>d</span><span>][</span><span>s</span><span>]</span><span> </span><span>*</span><span> shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)]</span><span> </span><span>for</span><span> n </span><span>in</span><span> all_nurses<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>))</span><span><br>&nbsp; &nbsp; </span><span># Creates the solver and solve.</span><span><br>&nbsp; &nbsp; solver </span><span>=</span><span> cp_model</span><span>.</span><span>CpSolver</span><span>()</span><span><br>&nbsp; &nbsp; solver</span><span>.</span><span>Solve</span><span>(</span><span>model</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>for</span><span> d </span><span>in</span><span> all_days</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Day'</span><span>,</span><span> d</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> n </span><span>in</span><span> all_nurses</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>for</span><span> s </span><span>in</span><span> all_shifts</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> solver</span><span>.</span><span>Value</span><span>(</span><span>shifts</span><span>[(</span><span>n</span><span>,</span><span> d</span><span>,</span><span> s</span><span>)])</span><span> </span><span>==</span><span> </span><span>1</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>if</span><span> shift_requests</span><span>[</span><span>n</span><span>][</span><span>d</span><span>][</span><span>s</span><span>]</span><span> </span><span>==</span><span> </span><span>1</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Nurse'</span><span>,</span><span> n</span><span>,</span><span> </span><span>'works shift'</span><span>,</span><span> s</span><span>,</span><span> </span><span>'(requested).'</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>else</span><span>:</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Nurse'</span><span>,</span><span> n</span><span>,</span><span> </span><span>'works shift'</span><span>,</span><span> s</span><span>,</span><span> </span><span>'(not requested).'</span><span>)</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span>print</span><span>()</span><span></span><span># Statistics.</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>()</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>'Statistics'</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- Number of shift requests met = %i'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>ObjectiveValue</span><span>(),</span><span><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span>'(out of'</span><span>,</span><span> num_nurses </span><span>*</span><span> min_shifts_per_nurse</span><span>,</span><span> </span><span>')'</span><span>)</span><span><br>&nbsp; &nbsp; </span><span>print</span><span>(</span><span>' &nbsp;- wall time &nbsp; &nbsp; &nbsp; : %f s'</span><span> </span><span>%</span><span> solver</span><span>.</span><span>WallTime</span><span>())</span><span></span><span>if</span><span> __name__ </span><span>==</span><span> </span><span>'__main__'</span><span>:</span><span><br>&nbsp; &nbsp; main</span><span>()</span></pre></devsite-code>
 
          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                               <devsite-feedback project-name="OR-Tools" product-id="106275" bucket="" context="DevSite feedback link" version="devsite-webserver-20200227-r01-rc00.425026937843239108" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header" project-icon="https://developers.google.com/optimization/images/orLogo.png">
    
</devsite-feedback>
                   
          </article>
</article>

<devsite-content-footer>
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>  <p>Last updated 2020-02-10.</p></devsite-content-footer>



                      </devsite-content>
        </main>
        
        
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>    <devsite-tooltip></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
              

          </devsite-analytics>
          
</div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>