<!DOCTYPE html>
<html lang="en">
<head>
    <title>
networking - Transatlantic ping faster than sending a pixel to the screen? -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>networking - Transatlantic ping faster than sending a pixel to the screen?</h1><div><div class="post-text" itemprop="text"><p>The time to send a packet to a remote host is half the time reported by ping, which measures a round trip time.</p><p>The display I was measuring was a <a href="http://en.wikipedia.org/wiki/HMZ-T1">Sony HMZ-T1</a> head mounted display connected to a PC.</p><p>To measure display latency, I have a small program that sits in a spin loop polling a game controller, doing a clear to a different color and swapping buffers whenever a button is pressed. I video record showing both the game controller and the screen with a 240&nbsp;fps camera, then count the number of frames between the button being pressed and the screen starting to show a change.</p><p>The game controller updates at 250&nbsp;Hz, but there is no direct way to measure the latency on the input path (I wish I could still wire things to a parallel port and use in/out Sam instructions). As a control experiment, I do the same test on an old CRT display with a 170&nbsp;Hz vertical retrace. Aero and multiple monitors can introduce extra latency, but under optimal conditions you will usually see a color change starting at some point on the screen (vsync disabled) two 240&nbsp;Hz frames after the button goes down. It seems there is 8&nbsp;ms or so of latency going through the <a href="http://en.wikipedia.org/wiki/USB_human_interface_device_class">USB HID</a> processing, but I would like to nail this down better in the future.</p><p>It is not uncommon to see desktop LCD monitors take 10+ 240&nbsp;Hz frames to show a change on the screen. The Sony HMZ averaged around 18 frames, or 70+ total milliseconds.</p><p>This was in a multimonitor setup, so a couple frames are the driver's fault.</p><p>Some latency is intrinsic to a technology. LCD panels take 4-20&nbsp;milliseconds to actually change, depending on the technology. Single chip <a href="http://en.wikipedia.org/wiki/Liquid_crystal_on_silicon">LCoS</a> displays must buffer one video frame to convert from packed pixels to sequential color planes. Laser raster displays need some amount of buffering to convert from raster return to back and forth scanning patterns. A frame-sequential or top-bottom split stereo 3D display can't update mid frame half the time.</p><p><a href="http://en.wikipedia.org/wiki/OLED">OLED</a> displays should be among the very best, as demonstrated by an <a href="http://en.wikipedia.org/wiki/Z800_3DVisor">eMagin Z800</a>, which is comparable to a 60&nbsp;Hz CRT in latency, better than any other non-CRT I tested.</p><p>The bad performance on the Sony is due to poor software engineering. Some TV features, like motion interpolation, require buffering at least one frame, and may benefit from more.  Other features, like floating menus, format conversions, content protection, and so on, could be implemented in a streaming manner, but the easy way out is to just buffer between each subsystem, which can pile up to a half dozen frames in some systems.</p><p>This is very unfortunate, but it is all fixable, and I hope to lean on display manufacturers more about latency in the future.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>