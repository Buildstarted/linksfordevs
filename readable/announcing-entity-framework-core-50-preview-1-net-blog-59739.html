<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 5.0 Preview 1 | .NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Announcing Entity Framework Core 5.0 Preview 1 | .NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="Arthur VickersFollow Arthur"/>
    <meta property="og:description" content="Today we are excited to announce the first preview release of EF Core 5.0.&#xA;Prerequisites&#xA;The previews of EF Core 5.0 require .NET Standard 2.1. This means:  EF Core 5.0 runs on .NET Core 3.1; it does not require .NET 5."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-1/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Announcing Entity Framework Core 5.0 Preview 1 | .NET Blog</title>
<div class="readable">
        <h1>Announcing Entity Framework Core 5.0 Preview 1 | .NET Blog</h1>
            <div>by Arthur VickersFollow Arthur</div>
            <div>Reading time: 17-22 minutes</div>
        <div>Posted here: 16 Mar 2020</div>
        <p><a href="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-1/">https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-5-0-preview-1/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured"><div><div><div><div><p><img src="https://secure.gravatar.com/avatar/6e0340157c8875437a555637fcb773a2?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar"></p><p>Arthur</p></div></div></div><p>March 16th, 2020</p><p>Today we are excited to announce the first preview release of <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.2.20120.8" target="_blank">EF Core 5.0</a>.</p><h2>Prerequisites</h2><p>The previews of EF Core 5.0 require .NET Standard 2.1. This means:</p><ul><li>EF Core 5.0 runs on .NET Core 3.1; it does not require .NET 5.<ul><li>This may change in future previews depending on how the plan for .NET 5 evolves.</li></ul></li><li>EF Core 5.0 runs on other platforms that support <a href="https://docs.microsoft.com/ef/core/platforms/" target="_blank">.NET Standard 2.1</a>.</li><li>EF Core 5.0 will <strong>not</strong> run on .NET Standard 2.0 platforms, including .NET Framework.</li></ul><hr><h2>How to get EF Core 5.0 previews</h2><p>EF Core is distributed exclusively as a set of NuGet packages. For example, to add the SQL Server provider to your project, you can use the following command using the dotnet tool:</p><pre><span>dotnet add </span><span>package</span><span> </span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>SqlServer</span><span> </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>2.20120</span><span>.</span><span>8</span></pre><p>The EF Core packages published today are:</p><ul><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore</a> – The main EF Core package</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.SqlServer</a> – Database provider for Microsoft SQL Server and SQL Azure</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Sqlite</a> – Database provider for SQLite</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Cosmos/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Cosmos</a> – Database provider for Azure Cosmos DB</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.InMemory/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.InMemory</a> – The in-memory database provider</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Tools/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Tools</a> – EF Core PowerShell commands for the Visual Studio Package Manager Console</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Design/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Design</a> – Shared design-time components for EF Core tools</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.SqlServer.NetTopologySuite</a> – SQL Server support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.NetTopologySuite</a> – SQLite support for spatial types</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Proxies/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Proxies</a> – Lazy-loading and change-tracking proxies</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Abstractions/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Abstractions</a> – Decoupled EF Core abstractions</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Relational/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Relational</a> – Shared EF Core components for relational database providers</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Analyzers/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Analyzers</a> – C# analyzers for EF Core</li><li><a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite.Core/5.0.0-preview.2.20120.8" target="_blank">Microsoft.EntityFrameworkCore.Sqlite.Core</a> – Database provider for SQLite without a packaged native binary</li></ul><p>We have also published the 5.0 preview 1 release of the <a href="https://www.nuget.org/packages/Microsoft.Data.Sqlite.Core/5.0.0-preview.2.20120.8" target="_blank">Microsoft.Data.Sqlite.Core</a> ADO.NET provider.</p><h2>Installing dotnet ef</h2><p>As with EF Core 3.0 and 3.1, the dotnet ef command-line tool is no longer included in the .NET Core SDK. Before you can execute EF Core migration or scaffolding commands, you’ll have to install this package as either a global or local tool.</p><p>To install the preview tool globally, first uninstall any existing version with:</p><pre><span>dotnet tool uninstall </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef</span></pre><p>Then install with:</p><pre><span>dotnet tool install </span><span>--</span><span>global</span><span> dotnet</span><span>-</span><span>ef </span><span>--</span><span>version </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>2.20120</span><span>.</span><span>8</span></pre><p>It’s possible to use this new version of dotnet ef with projects that use older versions of the EF Core runtime.</p><hr><h2>Package version numbers</h2><p>There was a mistake in the .NET 5 build process that resulted in the EF preview 1 packages being erroneously branded as “5.0.0-preview.2.20120.8”.</p><p>This should not have any functional impact. It should also not impact the real Preview 2, which is still planned for later in the year.</p><hr><h2>What’s new in EF Core 5 Preview 1</h2><p>We maintain documentation covering <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-5.0/whatsnew" target="_blank">new features introduced into each preview</a>.</p><p>Some of the highlights from preview 1 are called out below.</p><h3>Simple Logging</h3><p>This feature is functionally similar to <code>Database.Log</code> in EF6. That is, it provides a simple way to get logs from EF Core without the need to configure any kind of external logging framework.</p><p>EF Core replaces <code>Database.Log</code> with a <code>LogTo</code> method called on DbContextOptionsBuilder in either AddDbContext or OnConfiguring. For example:</p><pre><span>protected</span><span> </span><span>override</span><span> </span><span>void</span><span> </span><span>OnConfiguring</span><span>(</span><span>DbContextOptionsBuilder</span><span> optionsBuilder</span><span>)</span><span>
    </span><span>=&gt;</span><span> optionsBuilder</span><span>.</span><span>LogTo</span><span>(</span><span>Console</span><span>.</span><span>WriteLine</span><span>);</span></pre><p>Overloads exist to:</p><ul><li>Set the minimum log level<ul><li>Example: <code>.LogTo(Console.WriteLine, LogLevel.Information)</code></li></ul></li><li>Filter for only specific events:<ul><li>Example: <code>.LogTo(Console.WriteLine, new[] {CoreEventId.ContextInitialized, RelationalEventId.CommandExecuted})</code></li></ul></li><li>Filter for all events in specific categories:<ul><li>Example: <code>.LogTo(Console.WriteLine, new[] {DbLoggerCategory.Database.Name}, LogLevel.Information)</code></li></ul></li><li>Use a custom filter over event and level:<ul><li>Example: <code>.LogTo(Console.WriteLine, (id, level) =&gt; id == RelationalEventId.CommandExecuting)</code></li></ul></li></ul><p>Output format can be minimally configured (API is in flux) but the default output looks something like:</p><pre><span>warn</span><span>:</span><span> </span><span>12</span><span>/</span><span>5</span><span>/</span><span>2019</span><span> </span><span>09</span><span>:</span><span>57</span><span>:</span><span>47.574</span><span> </span><span>CoreEventId</span><span>.</span><span>SensitiveDataLoggingEnabledWarning</span><span>[</span><span>10400</span><span>]</span><span> </span><span>(</span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>Infrastructure</span><span>)</span><span>
      </span><span>Sensitive</span><span> data logging </span><span>is</span><span> enabled</span><span>.</span><span> </span><span>Log</span><span> entries </span><span>and</span><span> exception messages may include sensitive application data</span><span>,</span><span> </span><span>this</span><span> mode should only be enabled during development</span><span>.</span><span>
dbug</span><span>:</span><span> </span><span>12</span><span>/</span><span>5</span><span>/</span><span>2019</span><span> </span><span>09</span><span>:</span><span>57</span><span>:</span><span>47.581</span><span> </span><span>CoreEventId</span><span>.</span><span>ShadowPropertyCreated</span><span>[</span><span>10600</span><span>]</span><span> </span><span>(</span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>Model</span><span>.</span><span>Validation</span><span>)</span><span>
      </span><span>The</span><span> </span><span>property</span><span> </span><span>'BlogId'</span><span> on entity type </span><span>'Post'</span><span> was created </span><span>in</span><span> shadow state because there are </span><span>no</span><span> eligible CLR members </span><span>with</span><span> a matching name</span><span>.</span><span>
info</span><span>:</span><span> </span><span>12</span><span>/</span><span>5</span><span>/</span><span>2019</span><span> </span><span>09</span><span>:</span><span>57</span><span>:</span><span>47.618</span><span> </span><span>CoreEventId</span><span>.</span><span>ContextInitialized</span><span>[</span><span>10403</span><span>]</span><span> </span><span>(</span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>Infrastructure</span><span>)</span><span>
      </span><span>Entity</span><span> </span><span>Framework</span><span> </span><span>Core</span><span> </span><span>5.0</span><span>.</span><span>0</span><span>-</span><span>dev initialized </span><span>'BloggingContext'</span><span> </span><span>using</span><span> provider </span><span>'Microsoft.EntityFrameworkCore.SqlServer'</span><span> </span><span>with</span><span> options</span><span>:</span><span> </span><span>SensitiveDataLoggingEnabled</span><span>
dbug</span><span>:</span><span> </span><span>12</span><span>/</span><span>5</span><span>/</span><span>2019</span><span> </span><span>09</span><span>:</span><span>57</span><span>:</span><span>47.644</span><span> </span><span>CoreEventId</span><span>.</span><span>ValueGenerated</span><span>[</span><span>10808</span><span>]</span><span> </span><span>(</span><span>Microsoft</span><span>.</span><span>EntityFrameworkCore</span><span>.</span><span>ChangeTracking</span><span>)</span><span>
      </span><span>'BloggingContext'</span><span> generated temporary value </span><span>'-2147482647'</span><span> </span><span>for</span><span> the </span><span>'Id'</span><span> </span><span>property</span><span> of </span><span>new</span><span> </span><span>'Blog'</span><span> entity</span><span>.</span><span>
</span><span>...</span></pre><h3>Simple way to get generated SQL</h3><p>EF Core 5.0 introduces the <code>ToQueryString</code> extension method which will return the SQL that EF Core will generate when executing a LINQ query. For example, the code:</p><pre><span>var</span><span> query </span><span>=</span><span> context</span><span>.</span><span>Set</span><span>&lt;customer&gt;</span><span>().</span><span>Where</span><span>(</span><span>c </span><span>=&gt;</span><span> c</span><span>.</span><span>City</span><span> </span><span>==</span><span> city</span><span>);</span><span>
</span><span>Console</span><span>.</span><span>WriteLine</span><span>(</span><span>query</span><span>.</span><span>ToQueryString</span><span>())</span><span>
</span><span>&lt;/</span><span>customer</span><span>&gt;</span></pre><p>results in this output when using the SQL Server database provider:</p><pre><span>DECLARE p0 nvarchar</span><span>(</span><span>4000</span><span>)</span><span> </span><span>=</span><span> N</span><span>'London'</span><span>;</span><span>

SELECT </span><span>[</span><span>c</span><span>].[</span><span>CustomerID</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>Address</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>City</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>CompanyName</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>ContactName</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>ContactTitle</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>Country</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>Fax</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>Phone</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>PostalCode</span><span>],</span><span> </span><span>[</span><span>c</span><span>].[</span><span>Region</span><span>]</span><span>
FROM </span><span>[</span><span>Customers</span><span>]</span><span> AS </span><span>[</span><span>c</span><span>]</span><span>
WHERE </span><span>[</span><span>c</span><span>].[</span><span>City</span><span>]</span><span> </span><span>=</span><span> </span><span>@__city_0</span></pre><p>Notice that declarations for parameters of the correct type are also included in the output. This allows copy/pasting to SQL Server Management Studio, or similar tools, such that the query can be executed for debugging/analysis.</p><h3>Use a C# attribute to indicate that an entity has no key</h3><p>An entity type can now be configured as having no key using the new <code>KeylessAttribute</code>. For example:</p><pre><span>[</span><span>Keyless</span><span>]</span><span>
</span><span>public</span><span> </span><span>class</span><span> </span><span>Address</span><span>
</span><span>{</span><span>
    </span><span>public</span><span> </span><span>string</span><span> </span><span>Street</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>
    </span><span>public</span><span> </span><span>string</span><span> </span><span>City</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>
    </span><span>public</span><span> </span><span>int</span><span> </span><span>Zip</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>
</span><span>}</span></pre><h3>Connection or connection string can be changed on initialized DbContext</h3><p>It is now easier to create a DbContext instance without any connection or connection string. Also, the connection or connection string can now be mutated on the context instance. This allows the same context instance to dynamically connect to different databases.</p><h3>Change-tracking proxies</h3><p>EF Core can now generate runtime proxies that automatically implement <a href="https://docs.microsoft.com/dotnet/api/system.componentmodel.inotifypropertychanging?view=netcore-3.1" target="_blank">INotifyPropertyChanging</a> and <a href="https://docs.microsoft.com/dotnet/api/system.componentmodel.inotifypropertychanged?view=netcore-3.1" target="_blank">INotifyPropertyChanged</a>. These then report value changes on entity properties directly to EF Core, avoiding the need to scan for changes. However, proxies come with their own set of limitations, so they are not for everyone.</p><h3>Enhanced debug views</h3><p>Debug views are an easy way to look at the internals of EF Core when debugging issues. A debug view for the Model was implemented some time ago. For EF Core 5.0, we have made the model view easier to read and added a new debug view for tracked entities in the state manager.</p><h4>Model debug view</h4><p>Drill down into the Model property of the DbContext in your debugger of choice and expand the <code>DebugView</code> property.</p><p><a href="https://user-images.githubusercontent.com/1430078/70750412-39bc0a00-1ce3-11ea-9b34-5ab914658b78.png" target="_blank" data-featherlight="image"> <img src="https://user-images.githubusercontent.com/1430078/70750412-39bc0a00-1ce3-11ea-9b34-5ab914658b78.png" alt="image"> </a></p><p>The <code>LongView</code> is the model view we have had for some time. The <code>ShortView</code> is new and doesn’t include model annotations, which make it much easier to read. For example, here is one of our test models:</p><pre><span>Model</span><span>:</span><span> 
  </span><span>EntityType</span><span>:</span><span> </span><span>Chassis</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>TeamId</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK FK </span><span>AfterSave</span><span>:</span><span>Throw</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Version</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>byte</span><span>[])</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span> </span><span>BeforeSave</span><span>:</span><span>Ignore</span><span> </span><span>AfterSave</span><span>:</span><span>Ignore</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAddOrUpdate</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>Team</span><span> </span><span>(</span><span>_team</span><span>,</span><span> </span><span>Team</span><span>)</span><span> </span><span>ToPrincipal</span><span> </span><span>Team</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Chassis</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>TeamId</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Chassis</span><span> </span><span>{</span><span>'TeamId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Team</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>Unique</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Chassis</span><span> </span><span>ToPrincipal</span><span>:</span><span> </span><span>Team</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>Driver</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>CarNumber</span><span> </span><span>(</span><span>Nullable</span><span>&lt;int&gt;</span><span>)</span><span>
      </span><span>Championships</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Discriminator</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>string</span><span>)</span><span> </span><span>Shadow</span><span> </span><span>Required</span><span>
      </span><span>FastestLaps</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Podiums</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Poles</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Races</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>TeamId</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> FK </span><span>Index</span><span>
      </span><span>Version</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>byte</span><span>[])</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span> </span><span>BeforeSave</span><span>:</span><span>Ignore</span><span> </span><span>AfterSave</span><span>:</span><span>Ignore</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAddOrUpdate</span><span>
      </span><span>Wins</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>Team</span><span> </span><span>(</span><span>_team</span><span>,</span><span> </span><span>Team</span><span>)</span><span> </span><span>ToPrincipal</span><span> </span><span>Team</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Drivers</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Driver</span><span> </span><span>{</span><span>'TeamId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Team</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Drivers</span><span> </span><span>ToPrincipal</span><span>:</span><span> </span><span>Team</span><span>
    </span><span>Indexes</span><span>:</span><span> 
      </span><span>TeamId</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>Engine</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>EngineSupplierId</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> FK </span><span>Index</span><span> </span><span>Concurrency</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span> </span><span>Concurrency</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>EngineSupplier</span><span> </span><span>(</span><span>_engineSupplier</span><span>,</span><span> </span><span>EngineSupplier</span><span>)</span><span> </span><span>ToPrincipal</span><span> </span><span>EngineSupplier</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Engines</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>Gearboxes</span><span> </span><span>(</span><span>_gearboxes</span><span>,</span><span> </span><span>ICollection</span><span>&lt;gearbox&gt;</span><span>)</span><span> </span><span>Collection</span><span> </span><span>ToDependent</span><span> </span><span>Gearbox</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>StorageLocation</span><span> </span><span>(</span><span>Location</span><span>)</span><span> </span><span>ToDependent</span><span> </span><span>Location</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>Teams</span><span> </span><span>(</span><span>_teams</span><span>,</span><span> </span><span>ICollection</span><span>&lt;team&gt;</span><span>)</span><span> </span><span>Collection</span><span> </span><span>ToDependent</span><span> </span><span>Team</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Engine</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Engine</span><span> </span><span>{</span><span>'EngineSupplierId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>EngineSupplier</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Engines</span><span> </span><span>ToPrincipal</span><span>:</span><span> </span><span>EngineSupplier</span><span>
    </span><span>Indexes</span><span>:</span><span> 
      </span><span>EngineSupplierId</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>EngineSupplier</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>Engines</span><span> </span><span>(</span><span>_engines</span><span>,</span><span> </span><span>ICollection</span><span>&lt;engine&gt;</span><span>)</span><span> </span><span>Collection</span><span> </span><span>ToDependent</span><span> </span><span>Engine</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>EngineSupplier</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
  </span><span>EntityType</span><span>:</span><span> </span><span>Gearbox</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>EngineId</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>Nullable</span><span>&lt;int&gt;</span><span>)</span><span> </span><span>Shadow</span><span> FK </span><span>Index</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Gearbox</span><span> </span><span>{</span><span>'EngineId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Engine</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Gearboxes</span><span>
    </span><span>Indexes</span><span>:</span><span> 
      </span><span>EngineId</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>Location</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>EngineId</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>int</span><span>)</span><span> </span><span>Shadow</span><span> </span><span>Required</span><span> PK FK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>Latitude</span><span> </span><span>(</span><span>double</span><span>)</span><span> </span><span>Required</span><span> </span><span>Concurrency</span><span>
      </span><span>Longitude</span><span> </span><span>(</span><span>double</span><span>)</span><span> </span><span>Required</span><span> </span><span>Concurrency</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>EngineId</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Location</span><span> </span><span>{</span><span>'EngineId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Engine</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>Unique</span><span> </span><span>Ownership</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>StorageLocation</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>Sponsor</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>ClientToken</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>Nullable</span><span>&lt;/</span><span>int</span><span>&gt;&lt;</span><span>int</span><span>&gt;)</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span>
      </span><span>Discriminator</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>string</span><span>)</span><span> </span><span>Shadow</span><span> </span><span>Required</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Version</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>byte</span><span>[])</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span> </span><span>BeforeSave</span><span>:</span><span>Ignore</span><span> </span><span>AfterSave</span><span>:</span><span>Ignore</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAddOrUpdate</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
  </span><span>EntityType</span><span>:</span><span> </span><span>SponsorDetails</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>TitleSponsorId</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>int</span><span>)</span><span> </span><span>Shadow</span><span> </span><span>Required</span><span> PK FK </span><span>AfterSave</span><span>:</span><span>Throw</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAdd</span><span>
      </span><span>ClientToken</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>Nullable</span><span>&lt;/</span><span>int</span><span>&gt;&lt;</span><span>int</span><span>&gt;)</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span>
      </span><span>Days</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Space</span><span> </span><span>(</span><span>decimal</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Version</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>byte</span><span>[])</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span> </span><span>BeforeSave</span><span>:</span><span>Ignore</span><span> </span><span>AfterSave</span><span>:</span><span>Ignore</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAddOrUpdate</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>TitleSponsorId</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>SponsorDetails</span><span> </span><span>{</span><span>'TitleSponsorId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>TitleSponsor</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>Unique</span><span> </span><span>Ownership</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Details</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>Team</span><span>
    </span><span>Properties</span><span>:</span><span> 
      </span><span>Id</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span> PK </span><span>AfterSave</span><span>:</span><span>Throw</span><span>
      </span><span>Constructor</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>ConstructorsChampionships</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>DriversChampionships</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>EngineId</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>Nullable</span><span>&lt;/</span><span>int</span><span>&gt;&lt;</span><span>int</span><span>&gt;)</span><span> </span><span>Shadow</span><span> FK </span><span>Index</span><span>
      </span><span>FastestLaps</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>GearboxId</span><span> </span><span>(</span><span>Nullable</span><span>&lt;/</span><span>int</span><span>&gt;&lt;</span><span>int</span><span>&gt;)</span><span> FK </span><span>Index</span><span>
      </span><span>Name</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Poles</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Principal</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Races</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
      </span><span>Tire</span><span> </span><span>(</span><span>string</span><span>)</span><span>
      </span><span>Version</span><span> </span><span>(</span><span>no</span><span> field</span><span>,</span><span> </span><span>byte</span><span>[])</span><span> </span><span>Shadow</span><span> </span><span>Concurrency</span><span> </span><span>BeforeSave</span><span>:</span><span>Ignore</span><span> </span><span>AfterSave</span><span>:</span><span>Ignore</span><span> </span><span>ValueGenerated</span><span>.</span><span>OnAddOrUpdate</span><span>
      </span><span>Victories</span><span> </span><span>(</span><span>int</span><span>)</span><span> </span><span>Required</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>Chassis</span><span> </span><span>(</span><span>_chassis</span><span>,</span><span> </span><span>Chassis</span><span>)</span><span> </span><span>ToDependent</span><span> </span><span>Chassis</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Team</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>Drivers</span><span> </span><span>(</span><span>_drivers</span><span>,</span><span> </span><span>ICollection</span><span>&lt;driver&gt;</span><span>)</span><span> </span><span>Collection</span><span> </span><span>ToDependent</span><span> </span><span>Driver</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Team</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>Engine</span><span> </span><span>(</span><span>_engine</span><span>,</span><span> </span><span>Engine</span><span>)</span><span> </span><span>ToPrincipal</span><span> </span><span>Engine</span><span> </span><span>Inverse</span><span>:</span><span> </span><span>Teams</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
      </span><span>Gearbox</span><span> </span><span>(</span><span>_gearbox</span><span>,</span><span> </span><span>Gearbox</span><span>)</span><span> </span><span>ToPrincipal</span><span> </span><span>Gearbox</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
    </span><span>Keys</span><span>:</span><span> 
      </span><span>Id</span><span> PK
    </span><span>Foreign</span><span> keys</span><span>:</span><span> 
      </span><span>Team</span><span> </span><span>{</span><span>'EngineId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Engine</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>ToDependent</span><span>:</span><span> </span><span>Teams</span><span> </span><span>ToPrincipal</span><span>:</span><span> </span><span>Engine</span><span>
      </span><span>Team</span><span> </span><span>{</span><span>'GearboxId'</span><span>}</span><span> </span><span>-&gt;</span><span> </span><span>Gearbox</span><span> </span><span>{</span><span>'Id'</span><span>}</span><span> </span><span>Unique</span><span> </span><span>ToPrincipal</span><span>:</span><span> </span><span>Gearbox</span><span>
    </span><span>Indexes</span><span>:</span><span> 
      </span><span>EngineId</span><span>
      </span><span>GearboxId</span><span> </span><span>Unique</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>TestDriver</span><span> </span><span>Base</span><span>:</span><span> </span><span>Driver</span><span>
  </span><span>EntityType</span><span>:</span><span> </span><span>TitleSponsor</span><span> </span><span>Base</span><span>:</span><span> </span><span>Sponsor</span><span>
    </span><span>Navigations</span><span>:</span><span> 
      </span><span>Details</span><span> </span><span>(</span><span>_details</span><span>,</span><span> </span><span>SponsorDetails</span><span>)</span><span> </span><span>ToDependent</span><span> </span><span>SponsorDetails</span><span> </span><span>PropertyAccessMode</span><span>.</span><span>Field</span><span>
</span><span>&lt;</span><span>/driver&gt;&lt;/</span><span>int</span><span>&gt;&lt;</span><span>/engine&gt;&lt;/</span><span>team</span><span>&gt;&lt;</span><span>/gearbox&gt;&lt;/</span><span>int</span><span>&gt;</span></pre><h4>State manager debug view</h4><p>The state manager is a little mode hidden than the model. To find it, drill down into the ChangeTracker property of the DbContext in your debugger of choice and then look in the <code>StateManager</code> property and expand the <code>DebugView</code>.</p><p><a href="https://user-images.githubusercontent.com/1430078/70750441-493b5300-1ce3-11ea-9203-2e4b1a3a740e.png" target="_blank" data-featherlight="image"> <img src="https://user-images.githubusercontent.com/1430078/70750441-493b5300-1ce3-11ea-9203-2e4b1a3a740e.png" alt="image"> </a></p><p>The short view of the state manager shows:</p><ul><li>Each entity being tracked</li><li>Its primary key value(s)</li><li>The entity state – one of Added, Unchanged, Modified, or Deleted.</li><li>The values of an foreign key properties</li></ul><p>For example:</p><pre><span>Engine</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>Id</span><span>:</span><span> </span><span>1</span><span>}</span><span> </span><span>Unchanged</span><span> FK </span><span>{</span><span>EngineSupplierId</span><span>:</span><span> </span><span>1</span><span>}</span><span>
</span><span>Location</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>EngineId</span><span>:</span><span> </span><span>1</span><span>}</span><span> </span><span>Unchanged</span><span> FK </span><span>{</span><span>EngineId</span><span>:</span><span> </span><span>1</span><span>}</span><span>
</span><span>Team</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>Id</span><span>:</span><span> </span><span>4</span><span>}</span><span> </span><span>Modified</span><span> FK </span><span>{</span><span>EngineId</span><span>:</span><span> </span><span>1</span><span>}</span><span> FK </span><span>{</span><span>GearboxId</span><span>:</span><span> </span><span>&lt;null&gt;</span><span>}</span><span>
</span><span>&lt;/</span><span>null</span><span>&gt;</span></pre><p>The long view shows everything in the short view together with:</p><ul><li>The current value of each property</li><li>Whether or not the property is marked as modified</li><li>The original value of the property, if different from the current value</li><li>The entity referenced by a reference navigation using the referenced entity’s primary key value</li><li>The list if entities referenced by a collection navigation, again using primary key values</li></ul><p>For example:</p><pre><span>Engine</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>Id</span><span>:</span><span> </span><span>1</span><span>}</span><span> </span><span>Unchanged</span><span>
  </span><span>Id</span><span>:</span><span> </span><span>1</span><span> PK
  </span><span>EngineSupplierId</span><span>:</span><span> </span><span>1</span><span> FK
  </span><span>Name</span><span>:</span><span> </span><span>'FO 108X'</span><span>
  </span><span>EngineSupplier</span><span>:</span><span> </span><span>&lt;null&gt;</span><span>
  </span><span>Gearboxes</span><span>:</span><span> </span><span>&lt;/</span><span>null</span><span>&gt;&lt;</span><span>null</span><span>&gt;</span><span>
  </span><span>StorageLocation</span><span>:</span><span> </span><span>{</span><span>EngineId</span><span>:</span><span> </span><span>1</span><span>}</span><span>
  </span><span>Teams</span><span>:</span><span> </span><span>[{</span><span>Id</span><span>:</span><span> </span><span>4</span><span>}]</span><span>
</span><span>Location</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>EngineId</span><span>:</span><span> </span><span>1</span><span>}</span><span> </span><span>Unchanged</span><span>
  </span><span>EngineId</span><span>:</span><span> </span><span>1</span><span> PK FK
  </span><span>Latitude</span><span>:</span><span> </span><span>47.64491</span><span>
  </span><span>Longitude</span><span>:</span><span> </span><span>-</span><span>122.128101</span><span>
</span><span>Team</span><span> </span><span>(</span><span>Shared</span><span>)</span><span> </span><span>{</span><span>Id</span><span>:</span><span> </span><span>4</span><span>}</span><span> </span><span>Modified</span><span>
  </span><span>Id</span><span>:</span><span> </span><span>4</span><span> PK
  </span><span>Constructor</span><span>:</span><span> </span><span>'Ferrari'</span><span>
  </span><span>ConstructorsChampionships</span><span>:</span><span> </span><span>16</span><span>
  </span><span>DriversChampionships</span><span>:</span><span> </span><span>15</span><span>
  </span><span>EngineId</span><span>:</span><span> </span><span>1</span><span> FK </span><span>Modified</span><span> </span><span>Originally</span><span> </span><span>3</span><span>
  </span><span>FastestLaps</span><span>:</span><span> </span><span>221</span><span>
  </span><span>GearboxId</span><span>:</span><span> </span><span>&lt;/</span><span>null</span><span>&gt;&lt;</span><span>null</span><span>&gt;</span><span> FK
  </span><span>Name</span><span>:</span><span> </span><span>'Scuderia Ferrari Marlboro'</span><span>
  </span><span>Poles</span><span>:</span><span> </span><span>203</span><span>
  </span><span>Principal</span><span>:</span><span> </span><span>'Stefano Domenicali'</span><span>
  </span><span>Races</span><span>:</span><span> </span><span>805</span><span>
  </span><span>Tire</span><span>:</span><span> </span><span>'Bridgestone'</span><span>
  </span><span>Version</span><span>:</span><span> </span><span>'0x000000000001405A'</span><span>
  </span><span>Victories</span><span>:</span><span> </span><span>212</span><span>
  </span><span>Chassis</span><span>:</span><span> </span><span>&lt;/</span><span>null</span><span>&gt;&lt;</span><span>null</span><span>&gt;</span><span>
  </span><span>Drivers</span><span>:</span><span> </span><span>[]</span><span>
  </span><span>Engine</span><span>:</span><span> </span><span>{</span><span>Id</span><span>:</span><span> </span><span>1</span><span>}</span><span>
  </span><span>Gearbox</span><span>:</span><span> </span><span>&lt;/</span><span>null</span><span>&gt;&lt;</span><span>null</span><span>&gt;</span><span>
</span><span>&lt;/</span><span>null</span><span>&gt;</span></pre><h3>Improved handling of database null semantics</h3><p>Relational databases typically treat NULL as an unknown value and therefore not equal to any other NULL. C#, on the other hand, treats null as a defined value which compares equal to any other null. EF Core by default translates queries so that they use C# null semantics. EF Core 5.0 greatly improves the efficiency of these translations.</p><h3>Indexer properties</h3><p>EF Core 5.0 supports mapping of C# indexer properties. This allows entities to act as property bags where columns are mapped to named properties in the bag.</p><h3>Generation of check constraints for enum mappings</h3><p>EF Core 5.0 Migrations can now generate CHECK constraints for enum property mappings. For example:</p><pre><span>MyEnumColumn</span><span> VARCHAR</span><span>(</span><span>10</span><span>)</span><span> NOT NULL CHECK </span><span>(</span><span>MyEnumColumn</span><span> IN</span><span>(</span><span>'Useful'</span><span>,</span><span> </span><span>'Useless'</span><span>,</span><span> </span><span>'Unknown'</span><span>))</span></pre><h3>IsRelational</h3><p>A new <code>IsRelational</code> method has been added in addition to the existing <code>IsSqlServer</code>, <code>IsSqlite</code>, and <code>IsInMemory</code>. This can be used to test if the DbContext is using any relational database provider. For example:</p><pre><span>protected</span><span> </span><span>override</span><span> </span><span>void</span><span> </span><span>OnModelCreating</span><span>(</span><span>ModelBuilder</span><span> modelBuilder</span><span>)</span><span>
</span><span>{</span><span>
    </span><span>if</span><span> </span><span>(</span><span>Database</span><span>.</span><span>IsRelational</span><span>())</span><span>
    </span><span>{</span><span>
        </span><span>// Do relational-specific model configuration.</span><span>
    </span><span>}</span><span>
</span><span>}</span></pre><h3>Cosmos optimistic concurrency with ETags</h3><p>The Azure Cosmos DB database provider now supports optimistic concurrency using ETags. Use the model builder in OnModelCreating to configure an ETag:</p><pre><span>builder</span><span>.</span><span>Entity</span><span>&lt;customer&gt;</span><span>().</span><span>Property</span><span>(</span><span>c </span><span>=&gt;</span><span> c</span><span>.</span><span>ETag</span><span>).</span><span>IsEtagConcurrency</span><span>();</span><span>
</span><span>&lt;/</span><span>customer</span><span>&gt;</span></pre><p>SaveChanges will then throw an <code>DbUpdateConcurrencyException</code> on a concurrency conflict, which <a href="https://docs.microsoft.com/ef/core/saving/concurrency" target="_blank">can be handled</a> to implement retries, etc.</p><h3>Query translations for more DateTime constructs</h3><p>Queries containing new DateTime construction are now translated.</p><p>In addition, the following SQL Server functions are now mapped: * DateDiffWeek * DateFromParts</p><p>For example:</p><pre><span>var</span><span> count </span><span>=</span><span> context</span><span>.</span><span>Orders</span><span>.</span><span>Count</span><span>(</span><span>c </span><span>=&gt;</span><span> date </span><span>&gt;</span><span> EF</span><span>.</span><span>Functions</span><span>.</span><span>DateFromParts</span><span>(</span><span>DateTime</span><span>.</span><span>Now</span><span>.</span><span>Year</span><span>,</span><span> </span><span>12</span><span>,</span><span> </span><span>25</span><span>));</span></pre><h3>Query translations for more byte array constructs</h3><p>Queries using Contains, Length, SequenceEqual, etc. on byte[] properties are now translated to SQL. For example:</p><pre><span>var</span><span> blogs </span><span>=</span><span> context</span><span>.</span><span>Blogs</span><span>.</span><span>Where</span><span>(</span><span>e </span><span>=&gt;</span><span> e</span><span>.</span><span>Picture</span><span>.</span><span>Contains</span><span>((</span><span>byte</span><span>)</span><span>127</span><span>)).</span><span>ToList</span><span>();</span></pre><h3>Query translation for Reverse</h3><p>Queries using <code>Reverse</code> are now translated. For example:</p><pre><span>context</span><span>.</span><span>Employees</span><span>.</span><span>OrderBy</span><span>(</span><span>e </span><span>=&gt;</span><span> e</span><span>.</span><span>EmployeeID</span><span>).</span><span>Reverse</span><span>()</span></pre><h3>Query translation for bitwise operators</h3><p>Queries using bitwise operators are now translated in more cases. For example:</p><pre><span>context</span><span>.</span><span>Orders</span><span>.</span><span>Where</span><span>(</span><span>o </span><span>=&gt;</span><span> </span><span>~</span><span>o</span><span>.</span><span>OrderID</span><span> </span><span>==</span><span> negatedId</span><span>)</span></pre><h3>Query translation for strings on Cosmos</h3><p>Queries that use the string methods Contains, StartsWith, and EndsWith are now translated when using the Azure Cosmos DB provider.</p><hr><h2>Daily builds</h2><p>EF Core previews are aligned with .NET 5 previews. These previews tend to lag behind the latest work on EF Core. Consider using the <a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md" target="_blank">daily builds</a> instead to get the most up-to-date EF Core features and bug fixes.</p><p>As with the previews, the daily builds do not require .NET 5; they can be used with GA/RTM release of .NET Core 3.1.</p><hr><h2>Documentation and feedback</h2><p>The starting point for all EF Core documentation is <a href="https://docs.microsoft.com/ef/core/" target="_blank">docs.microsoft.com/ef/core/</a>.</p><p>Please file issues found and any other feedback on the <a href="https://github.com/dotnet/efcore" target="_blank">dotnet/efcore GitHub repo</a>.</p><hr><h2>Thank you from the team!</h2><p>A big thank you from the EF team to everyone who has used EF over the years!</p><hr><h2>Thank you to our contributors!</h2><p>A big thank you to the following community members who have already contributed code or documentation to the EF Core 5 release!</p></div></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>