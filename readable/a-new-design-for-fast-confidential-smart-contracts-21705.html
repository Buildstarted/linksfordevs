<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">üéâ</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <div class="readable">
        <h1>ZkVM: a new design for fast, confidential smart contracts</h1>
        <p>
by Oleg Andreev <br/>Reading time: 7-9 minutes        </p>
        <p><a href="https://medium.com/stellar-developers-blog/zkvm-a-new-design-for-fast-confidential-smart-contracts-d1122890d9ae">https://medium.com/stellar-developers-blog/zkvm-a-new-design-for-fast-confidential-smart-contracts-d1122890d9ae</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><section><div><div><div><div><div><div><p><a rel="noopener" href="https://medium.com/@oleganza?source=post_page-----d1122890d9ae----------------------"><img alt="Oleg Andreev" src="https://miro.medium.com/fit/c/96/96/0*4W998q06ShTGFIbv.jpeg" width="48" height="48"></a></p></div></div></div></div><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*1mttoUCfqbKvvrjBEukqtQ.png?q=20" width="3192" height="1532" role="presentation"></p><p><img width="3192" height="1532" role="presentation"></p></div></div></div></div></figure><p id="943a" data-selectable-paragraph="">We‚Äôre always looking for ways to make Stellar better: more scalable, more efficient, more flexible. Usually that means we work directly on the protocol. But sometimes we take a more ‚Äúblank slate‚Äù approach and imagine entirely different ways for a blockchain to function. Sidechain research like this helps us develop features and learn things that we can apply back to Stellar.</p><p id="405b" data-selectable-paragraph="">We‚Äôre excited to announce the latest example of such research, which we‚Äôre calling ZkVM, the <em>zero-knowledge virtual machine</em>. ZkVM is an experimental multi-asset blockchain architecture for scalable and confidential smart contracts.</p><ul><li id="ee9b" data-selectable-paragraph=""><a href="https://github.com/stellar/slingshot/blob/main/zkvm/docs/zkvm-design.md" target="_blank" rel="noopener nofollow">ZkVM technical white paper</a></li><li id="9a18" data-selectable-paragraph=""><a href="https://github.com/stellar/slingshot/blob/main/zkvm/docs/zkvm-spec.md" target="_blank" rel="noopener nofollow">ZkVM instruction set and specification</a></li><li id="59ce" data-selectable-paragraph=""><a href="https://github.com/stellar/slingshot" target="_blank" rel="noopener nofollow">Implementation of ZkVM in Rust</a></li></ul><p id="fa46" data-selectable-paragraph="">ZkVM transactions contain programmable constraints over encrypted data and assets. Individuals and organizations can safely perform their transactions and custom financial agreements directly on the shared ledger, instead of keeping them in siloed databases.</p><p id="0d84" data-selectable-paragraph="">The ZkVM blockchain uses a compact data model that fits in a <em>few kilobytes</em>. Verification of transactions is highly parallelizable and takes 1‚Äì2 ms per CPU core. Nodes can bootstrap instantly from a network-verified snapshot. Virtually any computing device can run a full node, without relying on intermediate infrastructure and trusted third parties.</p><p id="f183" data-selectable-paragraph="">All existing blockchains have inherent limitations:</p><ul><li id="bbba" data-selectable-paragraph="">transactions are slow to relay, verify and confirm;</li><li id="b413" data-selectable-paragraph="">blockchains are hard to scale because every node needs to keep track of the entire system;</li><li id="6fb8" data-selectable-paragraph="">the requirement to publish all transactions is often incompatible with confidentiality needs of the markets and businesses;</li><li id="549e" data-selectable-paragraph="">higher-level protocols and applications are hard to build due to either lack of flexibility or inefficiency of the underlying blockchain protocol.</li></ul><p id="a9b2" data-selectable-paragraph="">Stellar, with its federated consensus mechanism, does very well in terms of speed and scalability. Our research on ZkVM aims at helping Stellar afford users more privacy and flexibility.</p><p id="c43a" data-selectable-paragraph="">ZkVM is designed from the ground up to be a multi-asset ledger that can be used with the Stellar Consensus Protocol. It can process large volumes of transactions, allow wider use of the full validators, protect confidential data, and support the creation of a custom protocol on top of the blockchain rules, without having to upgrade the network with additional features. Stellar would benefit from any of these features.</p><p id="1ea3" data-selectable-paragraph="">Here‚Äôs how ZkVM works.</p><p id="6201" data-selectable-paragraph="">ZkVM grew out of our prior work on <a href="https://blog.chain.com/introducing-txvm-the-transaction-virtual-machine-5e4c9ef1478f" target="_blank" rel="noopener nofollow">TxVM</a>, which in turn was influenced by the design of Bitcoin and Ethereum.</p><p id="b961" data-selectable-paragraph="">ZkVM uses a novel transaction format pioneered in TxVM: a transaction is represented as a <em>program</em> that manipulates flow of assets directly as first-class objects and emits the necessary updates to the blockchain state in the form of a <em>transaction log</em>. The transaction log then can be applied to the state of the system separately from transaction validation, which permits a highly scalable design, while offering a powerful, yet safe environment for custom contracts.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*j4jrJUkOKpWwi1UzWHfgSg.png?q=20" width="2346" height="618" role="presentation"></p><p><img width="2346" height="618" role="presentation"></p></div></div></div></div></figure><p id="45e2" data-selectable-paragraph="">To help scale the blockchain state and permit confidential value transfer, ZkVM uses a <em>utxo model</em> to represent balances: all balances are represented by a set of ‚Äúunspent transaction outputs‚Äù (abbreviated as <em>utxos</em>) that can be created and destroyed. Each transaction proves ownership of the asset values in the previously created outputs, destroying those outputs, then issues, splits and merges the values, and creates new unspent outputs.</p><p id="01e2" data-selectable-paragraph="">Unspent outputs are compactly stored as merkle roots via the <a href="https://github.com/interstellar/slingshot/issues/258" target="_blank" rel="noopener nofollow">Utreexo scheme</a>, which dramatically decreases the storage requirements and allows much wider deployment of fully-validating nodes.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*vQuKuR2AU4-e9WVqZcvGLg.png?q=20" width="2640" height="682" role="presentation"></p><p><img width="2640" height="682" role="presentation"></p></div></div></div></div></figure><p id="0bbf" data-selectable-paragraph="">In ZkVM each output is a <em>contract</em> persisted in the blockchain state. Each contract contains an arbitrary number of items that could be <em>values</em> or data parameters, protected by a <em>predicate</em> ‚Äî a condition that must be satisfied in order to unlock the items.</p><p id="e143" data-selectable-paragraph="">ZkVM uses a variant of <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-January/015614.html" target="_blank" rel="noopener nofollow">Taproot</a> design to allow unlocking the contracts with either an ordinary cryptographic <em>signature</em>, or by revealing and executing an embedded <em>sub-program</em> that verifies custom conditions.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*jEQH-nDyhW3GQeeHMKNlmA.png?q=20" width="2102" height="744" role="presentation"></p><p><img width="2102" height="744" role="presentation"></p></div></div></div></div></figure><p id="af3b" data-selectable-paragraph="">Contracts in ZkVM are versatile building blocks for the <em>higher-level</em> protocols such as <em>accounts</em>, <em>order books</em> and <em>payment channels</em>. This could allow a platform like Stellar to move design choices in such protocols <em>out of the consensus-critical layer</em>, enabling rapid experimentation with a wide range of decentralized applications.</p><p id="1bbe" data-selectable-paragraph="">Use of the Taproot scheme in predicates offers a good trade-off between confidentiality and customization: contract logic does not need to be revealed if all parties to a contract cooperate, but still provides security in case they do not. When the contract logic has to be revealed, the <em>data</em> (such as balances, prices and other contract parameters) still remain secret due to use of a <em>constraint system</em> verified in <em>zero-knowledge</em>.</p><p id="4684" data-selectable-paragraph="">ZkVM is built on top of the state-of-the-art implementation of the <a href="http://doc.dalek.rs/bulletproofs/index.html" target="_blank" rel="noopener nofollow">Bulletproofs zero-knowledge proving system</a>. Values and data are encrypted by default and represented as Pedersen commitments. ZkVM allows users to specify arithmetic and logical expressions over secret values that get automatically turned into a <a target="_blank" rel="noopener" href="https://medium.com/interstellar/programmable-constraint-systems-for-bulletproofs-365b9feb92f7">Bulletproofs constraint system</a>.</p><p id="1c77" data-selectable-paragraph="">The most simple transactions contain a single <code><a href="https://github.com/stellar/slingshot/blob/main/zkvm/docs/zkvm-spec.md#cloak" target="_blank" rel="noopener nofollow">cloak</a></code> instruction that emits constraints proving the correct distribution of M input values into N output values. Custom contract conditions may impose additional constraints on the values, such as verifying the required interest payment on a loan completely in zero-knowledge. ZkVM supports a complete set of arithmetic and boolean instructions that allow expressing arbitrary conditions commonly found in financial contracts.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*iKVyxahjOq4MOtTMGC6ngQ.png?q=20" width="2134" height="500" role="presentation"></p><p><img width="2134" height="500" role="presentation"></p></div></div></div></div></figure><p id="fb22" data-selectable-paragraph="">Bulletproofs framework does not require trusted setup and allows each transaction to efficiently construct a unique constraint system on the fly, enabling transaction authors to create new protocols on top of ZkVM without the need to upgrade the entire network for each new feature.</p><p id="6f03" data-selectable-paragraph="">The resulting transactions are compact and can be verified very efficiently. Small transactions are around 1‚Äì1.5 Kb in size, while aggregated payments have marginal cost of just 200 bytes per input-output pair. Verification is highly parallelizable and takes about 1 ms per output. As a result, ZkVM does not require users to trade off security for efficiency: all data can be encrypted by default and revealed only to authorized parties on the need-to-know basis.</p><p id="d51c" data-selectable-paragraph="">Stellar will benefit greatly from the experiment in confidential smart contracts, as it opens doors to a wider range of new applications.</p><p id="50c8" data-selectable-paragraph="">You can find more details about ZkVM in our <a href="https://github.com/stellar/slingshot/blob/main/zkvm/docs/zkvm-design.md" target="_blank" rel="noopener nofollow">whitepaper</a> (<a href="https://github.com/stellar/slingshot/files/3164245/zkvm-whitepaper-2019-05-09.pdf" target="_blank" rel="noopener nofollow">also available as a PDF for those seeking a glossy magazine experience</a>).</p><p id="1fe7" data-selectable-paragraph="">We develop the VM and all its sub-protocols under the umbrella of the open source <a href="https://github.com/stellar/slingshot" target="_blank" rel="noopener nofollow">Project Slingshot</a>. It began with the <a href="https://interstellar.com/protocol" target="_blank" rel="noopener nofollow">protocol team at Interstellar</a> and now is lead by the <a href="https://stellar.org/" target="_blank" rel="noopener nofollow">Stellar Development Foundation</a>. We invite everyone to participate: please ask questions, file issues and make pull requests in <a href="https://github.com/stellar/slingshot" target="_blank" rel="noopener nofollow">our repository</a>.</p></div></div></section></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>