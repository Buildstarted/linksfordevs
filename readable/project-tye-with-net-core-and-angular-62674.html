<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Project Tye with .Net Core and Angular - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Project Tye with .Net Core and Angular - linksfor.dev(s)"/>
    <meta property="article:author" content="https://myview.rahulnivi.net/author/admin/"/>
    <meta property="og:description" content="Project Tye with .Net Core and Angular"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://myview.rahulnivi.net/project-tye/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Project Tye with .Net Core and Angular</title>
<div class="readable">
        <h1>Project Tye with .Net Core and Angular</h1>
            <div>by https://myview.rahulnivi.net/author/admin/</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 10 Jun 2020</div>
        <p><a href="https://myview.rahulnivi.net/project-tye/">https://myview.rahulnivi.net/project-tye/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
				

		<p>Hi Friends,</p>
<p>In this section, we are going to talk about project tye. This is new project from Microsoft team to ease the development and deployment with docker and kubernetes. Having said that, let’s get started.</p>
<p><img src="https://user-images.githubusercontent.com/3886381/82010701-745e1000-9690-11ea-907f-21def528005a.png" alt="" width="106" height="111" data-lazy-loaded="true"> <img src="https://user-images.githubusercontent.com/3886381/82010493-e2560780-968f-11ea-8ed9-b75fe49b03b9.png" alt="" width="106" height="111" data-lazy-loaded="true"> <img src="https://user-images.githubusercontent.com/3886381/82009824-fd277c80-968d-11ea-8e46-196d6a471f30.png" alt="" width="103" height="108" data-lazy-loaded="true"> &nbsp; <img src="https://user-images.githubusercontent.com/3886381/82010294-4f1cd200-968f-11ea-996e-9a9a43a26fbf.png" alt="" width="103" height="107" data-lazy-loaded="true"> &nbsp; <img src="https://user-images.githubusercontent.com/3886381/82009869-1a5c4b00-968e-11ea-8a0d-e57fe1138668.png" alt="" width="104" height="109" data-lazy-loaded="true"></p>

<p>Tye is a developer tool that makes developing, testing, and deploying microservices and distributed applications easier. Project Tye includes a local orchestrator to make developing microservices easier and the ability to deploy microservices to Kubernetes with minimal configuration. Having said that let’s get started.</p>
<p>The very first thing which you will be needing is sample app for the same. You can download it from <strong><a href="https://github.com/dotnet/tye/tree/master/samples/apps-with-core-angular" target="_blank">https://github.com/dotnet/tye/tree/master/samples/apps-with-core-angular</a></strong>. Here, you can find wiki page as well explaining the setup process. This is pretty straight forward though.</p>
<h2>Installation:-</h2>
<p>In order to install the utility, you need to say –&gt; <strong><code>dotnet tool install -g Microsoft.Tye --version "0.2.0-alpha.20258.3"</code></strong></p>
<p>For latest release, you can check the documentation page @ <strong><a href="https://github.com/dotnet/tye/blob/master/docs/getting_started.md" target="_blank">https://github.com/dotnet/tye/blob/master/docs/getting_started.md</a></strong></p>
<h2>Project Structure:-</h2>
<p>Project structure looks like as shown below.</p>
<p><img src="https://user-images.githubusercontent.com/3886381/83971792-dbbb5880-a8fa-11ea-9fc3-51e3d23cb975.png" alt="" width="372" height="265" data-lazy-loaded="true"></p>
<p>This is pretty straight forward structure where in we have angular app as Frontend app and dotnet app as backend. API project is just serving a list of movies and angular app is consuming that.</p>
<p>Movies.Shared looks like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83971974-77e55f80-a8fb-11ea-84a4-e568d4f0fcef.png" alt="" width="369" height="334"></p>
<p>Similarly, MoviesAPI looks like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972011-a3684a00-a8fb-11ea-98fa-9828debbeabe.png" alt="" width="358" height="528"></p>
<p>Similarly, angular project looks like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972049-cc88da80-a8fb-11ea-98dd-d69c595ed0dd.png" alt="" width="347" height="748"></p>
<p>One point to note here that API project is exposing at endpoint <strong>5001</strong>. Hence, angular is making the service call at this port. And the same has been maintained in <strong>environment.ts</strong> like shown below.</p>
<div id="gist103573983">
    <div>
      <div>
        <div>
  <div id="file-environment-ts">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-environment-ts-L1" data-line-number="1"></td>
        <td id="file-environment-ts-LC1"><span>export</span> <span>const</span> <span>environment</span> <span>=</span> <span>{</span></td>
      </tr>
      <tr>
        <td id="file-environment-ts-L2" data-line-number="2"></td>
        <td id="file-environment-ts-LC2">  <span>production</span>: <span>false</span><span>,</span></td>
      </tr>
      <tr>
        <td id="file-environment-ts-L3" data-line-number="3"></td>
        <td id="file-environment-ts-LC3">  <span>apiUrl</span>: <span>'https://localhost:5001/api/'</span></td>
      </tr>
      <tr>
        <td id="file-environment-ts-L4" data-line-number="4"></td>
        <td id="file-environment-ts-LC4"><span>}</span><span>;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div><p>
This was all about Project setup. Now, let’s go ahead and look at the tye.yaml file here. <img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972227-8da75480-a8fc-11ea-8348-304ce14e501b.png" alt="" width="776" height="505"> &nbsp; This is pretty simple and self explanatory. If you have been writing distributed apps earlier or doing docker, then you must have understood that, this is very similar docker-compose file with multiple services underneath. Here I have two services. One is API and and the other one is App. In case of API, which is <strong>dotnet</strong> project, you don’t need to write <strong>Dockerfile</strong> explicitly, <strong>MSBuild</strong> will take care internally. In case of angular app, I have specified the <strong>dockerFile </strong>and exposed the port as well. Below I have pasted the dockerfile for angular project.</p><div id="gist103574065">
    <div>
      <div>
        <div>
  <div id="file-dockerfile">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-dockerfile-L1" data-line-number="1"></td>
        <td id="file-dockerfile-LC1"><span>FROM</span> node:alpine as node</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L2" data-line-number="2"></td>
        <td id="file-dockerfile-LC2">
</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L3" data-line-number="3"></td>
        <td id="file-dockerfile-LC3"><span>WORKDIR</span> /src</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L4" data-line-number="4"></td>
        <td id="file-dockerfile-LC4"><span>COPY</span> . .</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L5" data-line-number="5"></td>
        <td id="file-dockerfile-LC5">
</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L6" data-line-number="6"></td>
        <td id="file-dockerfile-LC6"><span>RUN</span> npm install &amp;&amp; npm run build</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L7" data-line-number="7"></td>
        <td id="file-dockerfile-LC7">
</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L8" data-line-number="8"></td>
        <td id="file-dockerfile-LC8"><span>FROM</span> nginx:alpine</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L9" data-line-number="9"></td>
        <td id="file-dockerfile-LC9"><span>COPY</span> nginx.conf /etc/nginx/nginx.conf</td>
      </tr>
      <tr>
        <td id="file-dockerfile-L10" data-line-number="10"></td>
        <td id="file-dockerfile-LC10"><span>COPY</span> --from=node /src/dist /usr/share/nginx/html/movies</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>

<p>Note:- Tye dynamically allocates port to services as well. But, I have explicitly mapped here. In future examples, we will see how to make use of dynamic ports as well. But for now, this is fine.</p>
<h2>Tye init, build and run:-</h2>
<p>In order to initialize any project with tye, you need to do tye init at the root of the project. This will drop tye.yaml at the root of the project. But this won’t have configuration for any non dotnet project. You need to write it explicitly.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972773-b5e48280-a8ff-11ea-8b1a-d9ccfc3e64be.png" alt="" width="646" height="160"></p>
<p>After that tye.yaml file will be created and it will look like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972802-e0ced680-a8ff-11ea-9f11-1d3d9cc0e3f5.png" alt="" width="723" height="287"></p>
<p>As I said, this will have only .Net dependencies not others. Hence for that we need to refer to our previous example like shown below.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83972227-8da75480-a8fc-11ea-8348-304ce14e501b.png" alt="" width="776" height="505"></p>
<p>Next, we need to do <strong>tye build . (.) </strong>represents current directory. Upon successful build it will look like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973003-11fbd680-a901-11ea-9800-ee4152eab3c8.png" alt="" width="763" height="415"></p>
<p>Finally, we can run using <strong>tye run</strong> command as shown below.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973230-8e42e980-a902-11ea-895d-5a8988ca6dee.png" alt="" width="991" height="432"></p>
<p>Then, you can navigate to <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a>. This will be your dashboard listing all services.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973286-ed086300-a902-11ea-878c-42a3f06953a6.png" alt="" width="1226" height="295"></p>
<p>Here, You can click on the individual services and inspect logs as well like shown below.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973317-3193fe80-a903-11ea-91fa-2fc888f04453.png" alt="" width="1222" height="376"></p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973336-54beae00-a903-11ea-87d7-9e4c6f8a3051.png" alt="" width="1219" height="244"></p>
<p>However, If you go to <strong><a href="https://localhost:5001/api/movies" target="_blank">https://localhost:5001/api/movies,</a></strong> it will come like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973379-a9622900-a903-11ea-8b0c-134f71cf39c3.png" alt="" width="459" height="726"></p>
<p>Similarly, If I go to <strong><a href="http://localhost:4400/movies/" target="_blank">http://localhost:4400/movies/</a></strong>, it will come like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973450-137ace00-a904-11ea-9339-be4ab5552ab6.png" alt="" width="825" height="239"></p>
<p>Therefore, we now have projects running locally using tye. At this stage, If I do <strong>docker images</strong>, I can see both these images.</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973549-c4816880-a904-11ea-8e7a-9cb8fe37a412.png" alt="" width="1107" height="81"></p>
<p>At the same time, when I do <strong>docker ps</strong>, it will come like</p>
<p><img src="https://myview.rahulnivi.net/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="https://user-images.githubusercontent.com/3886381/83973584-2346e200-a905-11ea-87c3-fdc394f7e07b.png" alt="" width="1123" height="89"></p>
<p>This is just a verification that our apps are hosted within container and its running fine. In the next segment, will delve further. Till then stay tuned and happy coding.</p>
<p>Thanks,<br>
Rahul Sahay<br>
Happy Coding
</p>
<p>364&nbsp;total views, 133&nbsp;views today</p>

			</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>