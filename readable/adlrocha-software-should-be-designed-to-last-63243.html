<!DOCTYPE html>
<html lang="en">
<head>
    <title>
@adlrocha - Software should be designed to last  - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="@adlrocha - Software should be designed to last  - linksfor.dev(s)"/>
    <meta property="article:author" content="Alfonso de la Rocha"/>
    <meta property="og:description" content="And why I am trying to minimize my dependence on external libraries (whenever possible)."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://adlrocha.substack.com/p/adlrocha-software-should-be-designed"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - @adlrocha - Software should be designed to last </title>
<div class="readable">
        <h1>@adlrocha - Software should be designed to last </h1>
            <div>by Alfonso de la Rocha</div>
            <div>Reading time: 13-17 minutes</div>
        <div>Posted here: 22 Jun 2020</div>
        <p><a href="https://adlrocha.substack.com/p/adlrocha-software-should-be-designed">https://adlrocha.substack.com/p/adlrocha-software-should-be-designed</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><p><a target="_blank" href="https://cdn.substack.com/image/fetch/c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4f5c8097-36d0-4cf6-bc7b-c663a0411334_1000x1335.jpeg"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4f5c8097-36d0-4cf6-bc7b-c663a0411334_1000x1335.jpeg" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/4f5c8097-36d0-4cf6-bc7b-c663a0411334_1000x1335.jpeg&quot;,&quot;height&quot;:1335,&quot;width&quot;:1000,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;bridge in the middle of the forest&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null}" alt="bridge in the middle of the forest"></a></p><p>Let’s start with a heads up, the reflection I am going to share in this publication may not be to everyone’s liking, but <strong>it is a topic I want to open up a debate on.</strong> </p><p>Imagine that you want to build a proxy server for you system using your favorite programming language, what do you do? First you choose the web framework you are more comfortable with so<strong> you have a scaffolding for the project and you can get started with the implementation straightaway. </strong>With this simple step, you have a way of launching a server and receiving HTTP requests out of the box. In your server, you want to authenticate requests and filter traffic according to its source address and the content of the body. Hence, along with your webserver framework, you choose to install a middleware to handle authentication, and a library to ease the processing and filtering of new requests (when are we, in the 90s? You are not going to reinvent the wheel and develop all of this on your own, you want to have your system running in production in two or three days).<strong> You stick all these pieces together with a bit of glue code, drop some unit and integration tests to see that everything is working , and you are ready to go. </strong></p><p><a target="_blank" href="https://cdn.substack.com/image/fetch/c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F0a2567a8-6d60-4166-9008-63469a6c50f9_1556x838.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F0a2567a8-6d60-4166-9008-63469a6c50f9_1556x838.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/0a2567a8-6d60-4166-9008-63469a6c50f9_1556x838.png&quot;,&quot;height&quot;:784,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null}" alt=""></a></p><p><em>Source: <a href="https://bytecodealliance.org/articles/announcing-the-bytecode-alliance">https://bytecodealliance.org/articles/announcing-the-bytecode-alliance</a> (credits to Lin Clark).</em></p><h2>Move fast but with stable infra</h2><p>You know the problem of the aforementioned approach? <strong>Your project ends up being 80% other people’s code from external libraries leveraged by your project (see above image), 20% your own code</strong> (and some “inspiration” from StackOverflow), serving your own code as the glue and coarse customization to make the libraries work as desired for your use case. This way of proceeding is a growing trend, and don’t get me wrong, if what you are building is a well-known technology, or an auxiliary system such as your personal CMS, or an internal reporting system, way to go, you will have something up and running in no time, and you will start benefiting from all the goodness of your system ASAP. <strong>The problem really arises when you keep following this approach for critical systems, or the core implementations of your tech company’s platform used by million of users. </strong>And believe me, this is being the case in companies of all sizes (ask about they type of projects being <a href="https://mattstoller.substack.com/p/why-taxpayers-pay-mckinsey-3m-a-year">carried out by consultancy companies, and the manpower dedicated to them —70% recent graduates</a>). </p><p><strong>Software development has been really influenced by the “move fast, break things” phylosophy. </strong> And this is great, I completely agree with testing new ideas early, iterating fast to validate your concept, and be as “lean” as possible in your development. Software prototyping is cheap, so why not? This is what innovation is all about, right? <strong>The problem arises when you start shipping your great projects and awesome ideas, and they start breaking in production harming your users.</strong> Even Facebook realized tha<strong>t it was time to move from the “move fast, break things” approach to the  <a href="https://www.cnet.com/news/zuckerberg-move-fast-and-break-things-isnt-how-we-operate-anymore/">“move fast but with stable infra”</a>. </strong></p><p>You would never expect a civil engineer to deliver his bridge (a critical infrastructure) as “finished” after a few tweaks from his proof of concept. Even more, <strong>bridges and civil engineering projects are designed to last, why can we also design software for it to last? </strong>Correctly designing a bridge takes time and a good understanding of what is happening under the hood (materials, structures, resiliency, etc.). If we want software engineering to be considered an engineering practice (as it diserves)<strong> we need to start building robust, resilient and long-lasting systems, and stop dropping any piece of code we come across into our project. </strong>Of course, and I apologize for the extreme generalization, I am not saying ALL software is sloppy, I read the other day <a href="https://yasoob.me/posts/software_engineering_within_spacex_launch/">this article about software engineering in SpaceX</a>, and I literally loved how they use hardware-software redundancy to minimize potential bugs in a system as crytical as a space shuttle.<strong> I am just saying let’s all be a bit more like space shuttle software engineers.</strong></p><blockquote><p><em>Someone also recounted their interaction with the SpaceX team at GDC 2015⁄2016 in an <a href="https://space.stackexchange.com/a/9446">answer on StackExchange</a>.  They talk about the tripple redundancy system and how SpaceX uses the  Actor-Judge system. In short there are 3 dual core ARM processors  running on custom board (<a href="https://news.ycombinator.com/item?id=23369065">according to elteto</a>).  For each decision a “flight string” compares the result from each core  on a single processor. If the output matches the command is sent to  different controllers. There are 3 processors (with dual cores) so that  means each controller/sensor will get three different commands. The  controllers then act as the judge and compare the three commands. If all  three are in agreement, they carry out the operation. If even a single  command is in disagreement, the controller carries out the command from  the processor which had previously been sending the correct commands.</em></p><p><em><strong>This means that at any given point there are 6 running processes of the flight software.</strong></em></p><p><em>Source:<a href="https://yasoob.me/posts/software_engineering_within_spacex_launch/"> https://yasoob.me/posts/software_engineering_within_spacex_launch/</a></em></p></blockquote><p><a target="_blank" href="https://cdn.substack.com/image/fetch/c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fee7471b4-83f4-453b-97be-1adb0a052930_161x430.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fee7471b4-83f4-453b-97be-1adb0a052930_161x430.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/ee7471b4-83f4-453b-97be-1adb0a052930_161x430.png&quot;,&quot;height&quot;:430,&quot;width&quot;:161,&quot;resizeWidth&quot;:251,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Move Fast and Break Things&quot;,&quot;title&quot;:&quot;I was almost fired from a job driving the hearse in funeral processions, but then the funeral home realized how much business I was creating for them.&quot;,&quot;type&quot;:null,&quot;href&quot;:null}" alt="Move Fast and Break Things" title="I was almost fired from a job driving the hearse in funeral processions, but then the funeral home realized how much business I was creating for them."></a></p><p><strong>And all this thinking is what brought me to the decission of trying to detox a bit from external dependencies to see if it improved my performance and the quality of my code</strong> (and the trigger for this publication).</p><h2>Is not stop using, is use smarter</h2><p>Of course, I am not advocating to stop using external dependencies all along and start implementing everything from scratch. That would be nuts! <strong>What I am saying is to dispense with all those that are not strictly necessary. </strong>For instance, why using a Go web framework when Go’s http standard library gives you all that you need to build an awesome web server? (I <a href="https://medium.com/code-zen/why-i-don-t-use-go-web-frameworks-1087e1facfa4">completely agree with this guy</a>). This is the perfect example of a practice I used to follow a few years ago when I started building my first Go REST APIs, and something I have completely dropped by now. <strong>This is an example of what I mean by “stop abusing dependencies”.</strong> I didn’t need the web framework. Yes, it significantly sped my development at the beginning, but not knowing what was happening under the hood, and<strong> not having the complete control of what I was doing when facing a bug or wanting to improve the system’s performance was really messing with my OCD</strong> (as I briefly mentioned <a href="https://adlrocha.substack.com/p/adlrocha-i-have-been-underestimating">here</a>).</p><blockquote><p><em>Using a framework feels like driving a new fast car for a while until it breaks down on you many miles down and you have no idea how to fix it.</em></p></blockquote><p><strong>There are core dependencies that I would never ever suggest you remove from your list of “frequently used”</strong>, as it would be suicidal to write their functionality from scratch for your project (as they are the result of hours and hours of development by teams of extremely talented indicviduals). Take a few examples I have been using lately for my systems such as libp2p, the Geth client, Polkadot, or Qiskit (ok, you may see from the libraries I chose that I am bit biased :) ).<strong> I would have been dead if I had to go without them for my implementations. </strong> Of course, if you need to build a p2p network I wouldn’t ask you to rewrite libp2p. If you need “something else” from it, is open source, so you can always go to the guts, and suggest additions. The same would apply for Qiskit if you need to play around with quantum computing. <strong>They all have awesome development teams and researchers working on making the most out of their product,</strong> so as long as you know what you are doing, and why you are using them (bearing in mind the potential overheads you may incur in by using them), go for it.</p><p><strong>So my point is that is not that much “stop using external dependencies” but “use them smartly”.</strong> Don’t be lazy and use a poorly maintained JSON parsing library if you already know how to unmarshal and parse JSON using the available functionalities of your preferred programming language. You will avoid unnecessary overheads and trouble. The same way that instead of using the first library you find that “does the work”, <strong>you should invest some time on researching the alternatives in order to choose the one that better suits your needs</strong>, or even completely dropping the idea of using a library for the task and writing your own (the same way a civil engineer would do a thorough analysis of the materials and foundations required for his bridge).</p><p><a target="_blank" href="https://cdn.substack.com/image/fetch/c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3ae0fe3-cb96-4aae-b11d-70efa6801f90_1000x1500.jpeg"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Ff3ae0fe3-cb96-4aae-b11d-70efa6801f90_1000x1500.jpeg" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/f3ae0fe3-cb96-4aae-b11d-70efa6801f90_1000x1500.jpeg&quot;,&quot;height&quot;:1500,&quot;width&quot;:1000,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;books over green trolley bin&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null}" alt="books over green trolley bin"></a></p><h2>Four good reasons to stop abusing external dependencies</h2><p>Let’s move to the reasons that have led me to these conclusions, and why I am trying not to overuse external dependencies.<strong> Using libraries have risks that you should, at least, be aware of.</strong></p><ul><li><p><strong>The libaries and external dependencies you use may be outdated, undermaintained, or/and have hidden security flaws and performance bottlenecks. </strong>When you are the owner of the code you “kind of” know what you are doing, but the moment you use code from somewhere else you don’t know if the developer made a mistake (as long as your don’t read and understand the code you are adding to your project). You don’t know if he is using an inefficient implementation, or if he added malicious code if you don’t inspect the source code. Even more, what if the library is abandoned by developers and you need to rely on it for your future system? <strong>It all comes down to understanding the code you are using. </strong>The next paragraph is the perfect illustration of the risks of using external dependencies:</p></li></ul><blockquote><p><em>Attackers often use social engineering to get their package into  applications. They create a package that has useful features, and then  sneak in some malicious code. Once the code is in the app and the user  starts up the app, the code can attack the user.</em></p><p><em>This is how a hacker <a href="https://komodoplatform.com/update-agama-vulnerability/">stole $1.5 million worth</a> of cryptocurrency (and almost $13 million more) from users, <a href="https://snyk.io/blog/yet-another-malicious-package-found-in-npm-targeting-cryptocurrency-wallets/">starting in March</a> of this year.</em></p><ul><li><p><em>Day 0 (March 6): The attacker published a module to npm:  electron-native-notify. This seemed useful—it helped Electron apps fire  off native notifications in a way that worked across platforms. It  didn’t have any malicious code in it, yet.</em></p></li><li><p><em>Day 2: To pull of the heist, the attacker has to get this module  into the cryptocurrency app. The vector they choose is a dependency in  an application that helps users manage their cryptocurrency, the Agama  Wallet.</em></p></li><li><p><em>Day 17: The attacker adds the malicious payload.</em></p></li><li><p><em>Day 41-66: The app is rebuilt, pulling in the most recent version  of the dependency, and electron-native-notify with it. At this point, it  starts sending user’s “seeds” (username/password combos) to a server.  The attacker can then use these seeds to empty users’ wallets.</em></p></li><li><p><em>Day 90: A user alerts npm to suspicious behavior in  electron-native-notify, and they notify the cryptocurrency platform,  which moved funds from vulnerable wallets to a secure one.</em></p></li></ul><p><em>Extracted from: https://bytecodealliance.org/articles/announcing-the-bytecode-alliance</em></p></blockquote><p>And there are tons of examples like this that illustrates the risks of using libraries indiscriminately (do a quick search to see how this can happen).</p><ul><li><p><strong>Libraries can significantly increase the size and compilation times of your code. </strong><a href="https://blog.kodewerx.org/2020/06/the-rust-compiler-isnt-slow-we-are.html">This awesome blog post</a> illustrates vividly the problem in Rust. I highly recommend its reading. You may have probably faced the scenario in which you include a full library to perform some task when, in the end, you are using a single function of the whole library (with the subsequent overhead it poses). Or what about all those dependencies you included in your package.json while developing and experimenting with your solution and that you forgot to clean? <strong>All this adds up against you.</strong></p></li><li><p><strong>Libraries may hide from you many of the trade-offs, design decisions and potential points of failure in your solution.</strong> When you completely design and implement all the base code of your system, it is easier for you to identify potential attack vectors than if you delegate this trust to a diversified bunch of external dependencies.</p></li><li><p> Finally, <strong>not using any library in your system is challenging and fun. </strong>Of course, this is not a compelling reason, but even if you don’t agree with me I recommend you approach your design like this at least once in a lifetime. You’ll see how much you learn in the process; how you better your skills and understanding on your chosen programming language; and<strong> how refreshing it is to be completely in control and clearly understand what your system is doing under the hood at all times.</strong> What can I say, I was the kind of kid who took apart his grandfather’s radio to understand how did it work.</p></li></ul><h2>Software should be designed to last</h2><p>We need to start building resilient software. This is a trend that we are increasingly realizing now in the field of smart contracts and distributed systems. In this type of systems tons of users in the network share and execute the same base code. So <strong>a software failure or a security flaw doesn’t affect exclusively an individual’s infrastructure, but everyone in the system. </strong>A lot of cases have been reported of <a href="https://thenextweb.com/blockchain/2018/07/30/smart-contract-hacks-auditing-bug-bounty/">smart contract failures costing millions of dollars,</a>  and <a href="https://www.theregister.com/2017/10/23/cryptocurrency_miner_google_chrome_extension/">bugs in client’s software harming their systems.</a> </p><p>We rely more and more in software in everything around us, from buying groceries to chatting to our family and friends. The same way we don’t want our car to be flawed and crash in our next trip, <strong>we shouldn’t tolerate software failing in certain scenarios. </strong>Updating a library shouldn’t disrupt your system, and a piece software should be designed (as far as possible) the same way bridges are designed, considering that <strong>they should be able to be running in the wild for years without the need of any external management or maintainance. </strong></p><p><strong>Should we embark in the writing of a Resilient Software Manifesto?</strong> I don’t know about this, but let’s open the matter to debate. In the meantime, I would love to hear your thoughts.</p><h2>Some additional references…</h2><p>… that are going to help me make my point.</p><ul><li><p><strong><a href="https://tonsky.me/blog/disenchantment/">Software Disenchantment</a>. If you have to choose one of the readings from this list let it be this one. </strong>It perfectly complements my point (and I found it at the end of my writing process so I couldn’t add many of the concepts in my discussion). </p></li><li><p><a href="https://spectrum.ieee.org/computing/software/why-software-fails">Why software fails?</a></p></li><li><p><a href="https://hackernoon.com/moving-fast-and-breaking-things-is-such-a-load-of-crap-f23ac50215b0">Moving fast and breaking this is such a load of crap!</a></p></li></ul></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>