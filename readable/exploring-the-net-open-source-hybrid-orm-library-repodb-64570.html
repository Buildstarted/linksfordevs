<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Exploring the .NET open source hybrid ORM library RepoDB - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Exploring the .NET open source hybrid ORM library RepoDB - linksfor.dev(s)"/>
    <meta property="article:author" content="Scott Hanselman"/>
    <meta property="og:description" content="It&#x27;s nice to explore alternatives, especially in open source software. Just because there&#x27;s a way, or an &#x27;official&#x27; way ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.hanselman.com/blog/ExploringTheNETOpenSourceHybridORMLibraryRepoDB.aspx"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Exploring the .NET open source hybrid ORM library RepoDB</title>
<div class="readable">
        <h1>Exploring the .NET open source hybrid ORM library RepoDB</h1>
            <div>by Scott Hanselman</div>
            <div>Reading time: 4-5 minutes</div>
        <div>Posted here: 21 Jul 2020</div>
        <p><a href="https://www.hanselman.com/blog/ExploringTheNETOpenSourceHybridORMLibraryRepoDB.aspx">https://www.hanselman.com/blog/ExploringTheNETOpenSourceHybridORMLibraryRepoDB.aspx</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
<div id="ctl01_content">

    <div id="ctl01_commentViewContent">
    <article>


<section>
	<section>
		<span>July 16, '20</span>
		<a href="https://www.hanselman.com/blog/CommentView.aspx?guid=89cda7f4-afcb-40f0-ad26-7631b85b9a41#commentstart">Comments [3]</a>
    <span>Posted in <a href="https://www.hanselman.com/blog/CategoryView.aspx?category=Open+Source">Open Source</a></span>    
    </section>
</section>
<section>
	<section>
          
		<p><img title="Shutterstock" alt="Shutterstock" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/d73ae033d869_131F6/https___specials-images.forbesimg.com_imageserve_602554769_960x0_d1e378c5-1124-460c-b5e3-ad2d1175d550.jpg" width="350" height="234">It's nice to explore alternatives, especially in open source software. Just because there's a way, or an "official" way doesn't mean it's the best way.</p> <p>Today I'm looking at <a href="https://repodb.net/">RepoDb</a>. It says it's "a hybrid ORM library for .NET. It is your best alternative ORM to both Dapper and Entity Framework." Cool, let's take a look.</p> <p>Michael Pendon, the author <a href="https://medium.com/dev-genius/why-choose-repodb-orm-over-dapper-da87432c7830">puts his micro-ORM in the same category as Dapper</a> and EF. He says "<a href="http://repodb.net/">RepoDb</a> is a new hybrid micro-ORM for .NET designed to cater the missing pieces of both micro-ORMs and macro-ORMs (aka full-ORMs). Both are fast, efficient and easy-to-use. They are also addressing different use-cases."</p> <p>Dapper is a great and venerable library that is great if you love SQL. Repo is a hybrid ORM and offers more than one way to query, and support a bunch of popular databases:</p> <ul> <li><a href="http://repodb.net/tutorial/get-started-sqlserver">SqlServer</a> </li><li><a href="http://repodb.net/tutorial/get-started-sqlite">SqLite</a> </li><li><a href="http://repodb.net/tutorial/get-started-mysql">MySql</a> </li><li><a href="http://repodb.net/tutorial/get-started-postgresql">PostgreSql</a></li></ul> <p>Here's some example code:</p><div><div id="highlighter_391422"><div><div><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(ConnectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var customers = connection.Query&lt;Customer&gt;(</code><code>"SELECT Id, Name, DateOfBirth, CreatedDateUtc FROM [dbo].[Customer];"</code><code>);</code></p><p><code>}</code></p><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(ConnectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var customers = connection.ExecuteQuery&lt;Customer&gt;(</code><code>"SELECT Id, Name, DateOfBirth, CreatedDateUtc FROM [dbo].[Customer];"</code><code>);</code></p><p><code>}</code></p><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(ConnectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var customers = connection.QueryAll&lt;Customer&gt;();</code></p><p><code>}</code></p></div></div></div></div>
<p>I like RepoDB's strongly typed Fluent insertion syntax:</p><div><div id="highlighter_338273"><div><div><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(connectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var id = connection.Insert&lt;Customer, </code><code>int</code><code>&gt;(</code><code>new</code> <code>Customer</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Name = </code><code>"John Doe"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>DateOfBirth = DateTime.Parse(</code><code>"1970/01/01"</code><code>),</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>CreatedDateUtc = DateTime.UtcNow</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>}</code></p></div></div></div></div>
<p>Speaking of inserts, it's BulkInsert (my least favorite thing to do) is super clean:</p><div><div id="highlighter_527942"><div><div><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(ConnectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var customers = GenerateCustomers(1000);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var insertedRows = connection.BulkInsert(customers);</code></p><p><code>}</code></p></div></div></div></div>
<p>The most interesting part of RepoDB is that it formally acknowledges 2nd layer caches and has a whole section on caching in <a href="https://repodb.net/feature/caching">the excellent RepoDB official documentation</a>. I have a <a href="https://www.hanselman.com/blog/UsingLazyCacheForCleanAndSimpleNETCoreInmemoryCaching.aspx">whole LazyCache subsystem behind my podcast site that is super fast but added some complexity to the code</a> with more Func&lt;T&gt; that I would have preferred.</p>
<p>This is super clean, just passing in an ICache when you start the connection and then mention the key when querying.</p><div><div id="highlighter_790225"><div><div><p><code>var cache = CacheFactory.GetMemoryCache();</code></p><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(connectionString).EnsureOpen())</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var products = connection.QueryAll&lt;Product&gt;(cacheKey: </code><code>"products"</code><code>, cache: cache);</code></p><p><code>}</code></p><p><code>using</code> <code>(var repository = </code><code>new</code> <code>DbRepository&lt;Product, SqlConnection&gt;(connectionString))</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var products = repository.QueryAll(cacheKey: </code><code>"products"</code><code>);</code></p><p><code>}</code></p></div></div></div></div>
<p>It also shows how to do generated cache keys...also clean:</p><div><div id="highlighter_132510"><div><div><p><code>var cache = CacheFactory.GetMemoryCache();</code></p><p><code>using</code> <code>(var connection = </code><code>new</code> <code>SqlConnection(connectionString).EnsureOpen())</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var productId = 5;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>Query&lt;Product&gt;(product =&gt; product.Id == productId,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>cacheKey: $</code><code>"product-id-{productId}"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>cache: cache);</code></p><p><code>}</code></p></div></div></div></div>
<p>And of course, if you like to drop into SQL directly for whatever reason, you can .ExecuteQuery() and call sprocs or use inline SQL as you like. So far I'm enjoying RepoDB very much. It's thoughtfully designed and well documented and fast. Give it a try and see if you like it to?</p>
<p>Why don't you head over to <a title="https://github.com/mikependon/RepoDb" href="https://github.com/mikependon/RepoDb?WT.mc_id=-blog-scottha">https://github.com/mikependon/RepoDb</a> now and GIVE THEM A STAR. Encourage open source. Try it on your own project and go <a href="https://twitter.com/mike_pendon/">tweet the author and share</a> your thoughts!</p>
<hr>

<p><strong>Sponsor: </strong>Have you tried <a href="https://hnsl.mn/3fCSF5b">developing in Rider</a> yet? This fast and feature-rich cross-platform IDE improves your code for .NET, ASP.NET, .NET Core, Xamarin, and Unity applications on Windows, Mac, and Linux.</p>


  
		
<div>
	<div>
	    <h4>About Scott</h4>
        <div>
			<p>Scott Hanselman is a former professor, former Chief Architect in finance, now speaker, consultant, father, diabetic, and Microsoft employee. He is a failed stand-up comic, a cornrower, and a book author.</p>
            <p><a href="https://facebook.com/shanselman"><img src="https://www.hanselman.com/images/icon-fb.png" alt="facebook"></a>
            <a href="https://twitter.com/shanselman"><img src="https://www.hanselman.com/images/icon-twitter.png" alt="twitter"></a>
            <a href="https://plus.google.com/108573066018819777334?rel=author" rel="author"><img src="https://www.hanselman.com/images/icon-gplus.png" alt="g+"></a>
            <a href="http://feeds.hanselman.com/ScottHanselman"><img src="https://www.hanselman.com/images/icon-rss.png" alt="subscribe"></a><br>
            <a href="http://hanselman.com/about">About</a> &nbsp; <a href="http://www.hanselman.com/newsletter">Newsletter</a>
        </p></div>
	</div> 
    
      <div>
          
         <p><strong>Hosting By</strong><br>
                <a rel="nofollow" href="https://sherweb.com/"><img alt="Dedicated Windows Server Hosting by SherWeb" width="125" height="125" src="https://images.sherweb.com/OrcsWeb/SherWebPoweredbyLogo_V-250x250Color.png"></a>
          </p>        

     </div>
</div>
  
  
		



		
		
		
		
		
  </section>
</section>
</article>
</div>
    
</div>

</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>