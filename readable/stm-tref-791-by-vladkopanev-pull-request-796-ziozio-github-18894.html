<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Cats Effect: STM &amp; TRef #791 by VladKopanev &#xB7; Pull Request #796 &#xB7; zio/zio</title>
<div class="readable">
        <h1>Cats Effect: STM &amp; TRef #791 by VladKopanev &#xB7; Pull Request #796 &#xB7; zio/zio</h1>
        <p>
Reading time: 12-15 minutes        </p>
        <p><a href="https://github.com/scalaz/scalaz-zio/pull/796/files">https://github.com/scalaz/scalaz-zio/pull/796/files</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-hydro-view="{&quot;event_type&quot;:&quot;pull_request.select_diff_range&quot;,&quot;payload&quot;:{&quot;actor_id&quot;:null,&quot;pull_request_id&quot;:273482079,&quot;repository_id&quot;:134079884,&quot;diff_type&quot;:&quot;UNIFIED&quot;,&quot;whitespace_ignored&quot;:false,&quot;originating_url&quot;:&quot;https://github.com/zio/zio/pull/796/files&quot;,&quot;user_id&quot;:null}}" data-hydro-view-hmac="c00732529c86d013a42605d108ac55956dea4786cb85d5c308cc0689b0738e0d">
        <div>
          <table data-tab-size="8" data-diff-anchor="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98">

                
      <tbody><tr data-position="0">
    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98HL0" data-line-number="..."></td>
    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98HR1" data-line-number="..."></td>
    <td>@@ -0,0 +1,226 @@</td>
  </tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R1" data-line-number="1"></td>

  <td>
    <span data-code-marker="+"><span><span>/*</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R2" data-line-number="2"></td>

  <td>
    <span data-code-marker="+"><span> * Copyright 2017-2019 John A. De Goes and the ZIO Contributors</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R3" data-line-number="3"></td>

  <td>
    <span data-code-marker="+"><span> *</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R4" data-line-number="4"></td>

  <td>
    <span data-code-marker="+"><span> * Licensed under the Apache License, Version 2.0 (the "License");</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R5" data-line-number="5"></td>

  <td>
    <span data-code-marker="+"><span> * you may not use this file except in compliance with the License.</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R6" data-line-number="6"></td>

  <td>
    <span data-code-marker="+"><span> * You may obtain a copy of the License at</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R7" data-line-number="7"></td>

  <td>
    <span data-code-marker="+"><span> *</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R8" data-line-number="8"></td>

  <td>
    <span data-code-marker="+"><span> *     http://www.apache.org/licenses/LICENSE-2.0</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R9" data-line-number="9"></td>

  <td>
    <span data-code-marker="+"><span> *</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R10" data-line-number="10"></td>

  <td>
    <span data-code-marker="+"><span> * Unless required by applicable law or agreed to in writing, software</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R11" data-line-number="11"></td>

  <td>
    <span data-code-marker="+"><span> * distributed under the License is distributed on an "AS IS" BASIS,</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R12" data-line-number="12"></td>

  <td>
    <span data-code-marker="+"><span> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R13" data-line-number="13"></td>

  <td>
    <span data-code-marker="+"><span> * See the License for the specific language governing permissions and</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R14" data-line-number="14"></td>

  <td>
    <span data-code-marker="+"><span> * limitations under the License.</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R15" data-line-number="15"></td>

  <td>
    <span data-code-marker="+"><span> <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R16" data-line-number="16"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R17" data-line-number="17"></td>

  <td>
    <span data-code-marker="+"><span>package</span> <span>scalaz</span>.<span>zio</span>.<span>interop</span>.<span>stm</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R18" data-line-number="18"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R19" data-line-number="19"></td>

  <td>
    <span data-code-marker="+"><span>import</span> <span>cats</span>.<span>effect</span>.<span>Async</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R20" data-line-number="20"></td>

  <td>
    <span data-code-marker="+"><span>import</span> <span>scalaz</span>.<span>zio</span>.<span>stm</span>.{ <span>STM</span> <span>=&gt;</span> <span>ZSTM</span> }</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R21" data-line-number="21"></td>

  <td>
    <span data-code-marker="+"><span>import</span> <span>scalaz</span>.<span>zio</span>.<span>Runtime</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R22" data-line-number="22"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R23" data-line-number="23"></td>

  <td>
    <span data-code-marker="+"><span>import</span> <span>scala</span>.<span>util</span>.<span>Try</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R24" data-line-number="24"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R25" data-line-number="25"></td>

  <td>
    <span data-code-marker="+"><span><span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R26" data-line-number="26"></td>

  <td>
    <span data-code-marker="+"><span> * See [[<span>scalaz.zio.stm.STM</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R27" data-line-number="27"></td>

  <td>
    <span data-code-marker="+"><span> <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R28" data-line-number="28"></td>

  <td>
    <span data-code-marker="+"><span>final</span> <span>class</span> <span>STM</span>[<span>F</span>[<span>+</span> _], <span>+</span><span>A</span>] <span>private</span>[stm] (<span>private</span>[stm] <span>val</span> <span>underlying</span><span>:</span> <span>ZSTM</span>[<span>Throwable</span>, <span>A</span>]) {</span></td>
</tr>



      
<tr>
  <td data-quote-markdown=".js-comment-body" colspan="3">
        

<div data-resolved="false">
  
</div>



  </td>
</tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R29" data-line-number="29"></td>

  <td>
    <span data-code-marker="+">  self <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R30" data-line-number="30"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R31" data-line-number="31"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R32" data-line-number="32"></td>

  <td>
    <span data-code-marker="+"><span>   * See `&lt;*&gt;` [[<span>scalaz.zio.stm.STM</span>]] `&lt;*&gt;`</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R33" data-line-number="33"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R34" data-line-number="34"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>&lt;*&gt;</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, (<span>A</span>, <span>B</span>)] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R35" data-line-number="35"></td>

  <td>
    <span data-code-marker="+">    self zip that</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R36" data-line-number="36"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R37" data-line-number="37"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R38" data-line-number="38"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM</span>]] `&lt;*`</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R39" data-line-number="39"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R40" data-line-number="40"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>&lt;*</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R41" data-line-number="41"></td>

  <td>
    <span data-code-marker="+">    self zipLeft that</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R42" data-line-number="42"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R43" data-line-number="43"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R44" data-line-number="44"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM</span>]] `*&gt;`</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R45" data-line-number="45"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R46" data-line-number="46"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>*&gt;</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R47" data-line-number="47"></td>

  <td>
    <span data-code-marker="+">    self zipRight that</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R48" data-line-number="48"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R49" data-line-number="49"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R50" data-line-number="50"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM</span>]] `&gt;&gt;=`</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R51" data-line-number="51"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R52" data-line-number="52"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>&gt;&gt;=</span>[<span>B</span>](<span>f</span>: <span>A</span> <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R53" data-line-number="53"></td>

  <td>
    <span data-code-marker="+">    self flatMap f</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R54" data-line-number="54"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R55" data-line-number="55"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R56" data-line-number="56"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#collect</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R57" data-line-number="57"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R58" data-line-number="58"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>collect</span>[<span>B</span>](<span>pf</span>: <span>PartialFunction</span>[<span>A</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.collect(pf))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R59" data-line-number="59"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R60" data-line-number="60"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R61" data-line-number="61"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#commit</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R62" data-line-number="62"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R63" data-line-number="63"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>commit</span>(<span>implicit</span> <span>R</span><span>:</span> <span>Runtime</span>[<span>Any</span>], <span>A</span><span>:</span> <span>Async</span>[<span>F</span>])<span>:</span> <span>F</span>[<span>A</span>] <span>=</span> <span>STM</span>.atomically(self)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R64" data-line-number="64"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R65" data-line-number="65"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R66" data-line-number="66"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#const</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R67" data-line-number="67"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R68" data-line-number="68"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>const</span>[<span>B</span>](<span>b</span>: <span>=&gt;</span> <span>B</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span> self map (_ <span>=&gt;</span> b)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R69" data-line-number="69"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R70" data-line-number="70"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R71" data-line-number="71"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#either</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R72" data-line-number="72"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R73" data-line-number="73"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>either</span><span>:</span> <span>STM</span>[<span>F</span>, <span>Either</span>[<span>Throwable</span>, <span>A</span>]] <span>=</span> <span>new</span> <span>STM</span>(underlying.either)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R74" data-line-number="74"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R75" data-line-number="75"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R76" data-line-number="76"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#filter</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R77" data-line-number="77"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R78" data-line-number="78"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>filter</span>(<span>f</span>: <span>A</span> <span>=&gt;</span> <span>Boolean</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R79" data-line-number="79"></td>

  <td>
    <span data-code-marker="+">    collect {</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R80" data-line-number="80"></td>

  <td>
    <span data-code-marker="+">      <span>case</span> a <span>if</span> f(a) <span>=&gt;</span> a</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R81" data-line-number="81"></td>

  <td>
    <span data-code-marker="+">    }</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R82" data-line-number="82"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R83" data-line-number="83"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R84" data-line-number="84"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#flatMap</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R85" data-line-number="85"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R86" data-line-number="86"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>flatMap</span>[<span>B</span>](<span>f</span>: <span>A</span> <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.flatMap(f.andThen(_.underlying)))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R87" data-line-number="87"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R88" data-line-number="88"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R89" data-line-number="89"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#flatten</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R90" data-line-number="90"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R91" data-line-number="91"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>flatten</span>[<span>B</span>](<span>implicit</span> <span>ev</span>: <span>A</span> <span>&lt;</span><span>:</span><span>&lt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R92" data-line-number="92"></td>

  <td>
    <span data-code-marker="+">    self flatMap ev</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R93" data-line-number="93"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R94" data-line-number="94"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R95" data-line-number="95"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#fold</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R96" data-line-number="96"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R97" data-line-number="97"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>fold</span>[<span>B</span>](<span>f</span>: <span>Throwable</span> <span>=&gt;</span> <span>B</span>, <span>g</span>: <span>A</span> <span>=&gt;</span> <span>B</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.fold(f, g))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R98" data-line-number="98"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R99" data-line-number="99"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R100" data-line-number="100"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#foldM</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R101" data-line-number="101"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R102" data-line-number="102"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>foldM</span>[<span>B</span>](<span>f</span>: <span>Throwable</span> <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>], <span>g</span>: <span>A</span> <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R103" data-line-number="103"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(underlying.foldM(f.andThen(_.underlying), g.andThen(_.underlying)))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R104" data-line-number="104"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R105" data-line-number="105"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R106" data-line-number="106"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#map</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R107" data-line-number="107"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R108" data-line-number="108"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>map</span>[<span>B</span>](<span>f</span>: <span>A</span> <span>=&gt;</span> <span>B</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.map(f))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R109" data-line-number="109"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R110" data-line-number="110"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R111" data-line-number="111"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#mapError</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R112" data-line-number="112"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R113" data-line-number="113"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>mapError</span>[<span>E1</span> <span>&lt;</span><span>:</span> <span>Throwable</span>](<span>f</span>: <span>Throwable</span> <span>=&gt;</span> <span>E1</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.mapError(f))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R114" data-line-number="114"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R115" data-line-number="115"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R116" data-line-number="116"></td>

  <td>
    <span data-code-marker="+"><span>   * Switch from effect F to effect G.</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R117" data-line-number="117"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R118" data-line-number="118"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>mapK</span>[<span>G</span>[<span>+</span> _]]<span>:</span> <span>STM</span>[<span>G</span>, <span>A</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R119" data-line-number="119"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R120" data-line-number="120"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R121" data-line-number="121"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#option</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R122" data-line-number="122"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R123" data-line-number="123"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>option</span><span>:</span> <span>STM</span>[<span>F</span>, <span>Option</span>[<span>A</span>]] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R124" data-line-number="124"></td>

  <td>
    <span data-code-marker="+">    fold[<span>Option</span>[<span>A</span>]](_ <span>=&gt;</span> <span>None</span>, <span>Some</span>(_))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R125" data-line-number="125"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R126" data-line-number="126"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R127" data-line-number="127"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#orElse</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R128" data-line-number="128"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R129" data-line-number="129"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>orElse</span>[<span>A1</span> <span>&gt;</span><span>:</span> <span>A</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>A1</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>A1</span>] <span>=</span> <span>new</span> <span>STM</span>(underlying.orElse(that.underlying))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R130" data-line-number="130"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R131" data-line-number="131"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R132" data-line-number="132"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#orElseEither</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R133" data-line-number="133"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R134" data-line-number="134"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>orElseEither</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>Either</span>[<span>A</span>, <span>B</span>]] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R135" data-line-number="135"></td>

  <td>
    <span data-code-marker="+">    (self map (<span>Left</span>[<span>A</span>, <span>B</span>](_))) orElse (that map (<span>Right</span>[<span>A</span>, <span>B</span>](_)))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R136" data-line-number="136"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R137" data-line-number="137"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R138" data-line-number="138"></td>

  <td>
    <span data-code-marker="+"><span>   * See scalaz.zio.stm.STM.unit</span></span></td>
</tr>



      
<tr>
  <td data-quote-markdown=".js-comment-body" colspan="3">
        

<div data-resolved="false">
  
</div>



  </td>
</tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R139" data-line-number="139"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R140" data-line-number="140"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>unit</span><span>:</span> <span>STM</span>[<span>F</span>, <span>Unit</span>] <span>=</span> const(())</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R141" data-line-number="141"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R142" data-line-number="142"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R143" data-line-number="143"></td>

  <td>
    <span data-code-marker="+"><span>   * See scalaz.zio.stm.STM.unit</span></span></td>
</tr>



      
<tr>
  <td data-quote-markdown=".js-comment-body" colspan="3">
        

<div data-resolved="false">
  
</div>



  </td>
</tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R144" data-line-number="144"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R145" data-line-number="145"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>void</span><span>:</span> <span>STM</span>[<span>F</span>, <span>Unit</span>] <span>=</span> unit</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R146" data-line-number="146"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R147" data-line-number="147"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R148" data-line-number="148"></td>

  <td>
    <span data-code-marker="+"><span>   * Same as [[<span>filter</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R149" data-line-number="149"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R150" data-line-number="150"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>withFilter</span>(<span>f</span>: <span>A</span> <span>=&gt;</span> <span>Boolean</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span> filter(f)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R151" data-line-number="151"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R152" data-line-number="152"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R153" data-line-number="153"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#zip</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R154" data-line-number="154"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R155" data-line-number="155"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>zip</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, (<span>A</span>, <span>B</span>)] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R156" data-line-number="156"></td>

  <td>
    <span data-code-marker="+">    (self zipWith that)((a, b) <span>=&gt;</span> a <span>-</span><span>&gt;</span> b)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R157" data-line-number="157"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R158" data-line-number="158"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R159" data-line-number="159"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#zipLeft</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R160" data-line-number="160"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R161" data-line-number="161"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>zipLeft</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R162" data-line-number="162"></td>

  <td>
    <span data-code-marker="+">    (self zip that) map (_._1)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R163" data-line-number="163"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R164" data-line-number="164"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R165" data-line-number="165"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#zipRight</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R166" data-line-number="166"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R167" data-line-number="167"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>zipRight</span>[<span>B</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>B</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R168" data-line-number="168"></td>

  <td>
    <span data-code-marker="+">    (self zip that) map (_._2)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R169" data-line-number="169"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R170" data-line-number="170"></td>

  <td>
    <span data-code-marker="+"><span>  <span>/**</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R171" data-line-number="171"></td>

  <td>
    <span data-code-marker="+"><span>   * See [[<span>scalaz.zio.stm.STM#zipWith</span>]]</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R172" data-line-number="172"></td>

  <td>
    <span data-code-marker="+"><span>   <span>*/</span></span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R173" data-line-number="173"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>zipWith</span>[<span>B</span>, <span>C</span>](<span>that</span>: <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])(<span>f</span>: (<span>A</span>, <span>B</span>) <span>=&gt;</span> <span>C</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>C</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R174" data-line-number="174"></td>

  <td>
    <span data-code-marker="+">    self flatMap (a <span>=&gt;</span> that map (b <span>=&gt;</span> f(a, b)))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R175" data-line-number="175"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R176" data-line-number="176"></td>

  <td>
    <span data-code-marker="+">}</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R177" data-line-number="177"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R178" data-line-number="178"></td>

  <td>
    <span data-code-marker="+"><span>object</span> <span>STM</span> {</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R179" data-line-number="179"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R180" data-line-number="180"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>atomically</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>stm</span>: <span>STM</span>[<span>F</span>, <span>A</span>])(<span>implicit</span> <span>R</span><span>:</span> <span>Runtime</span>[<span>Any</span>], <span>A</span><span>:</span> <span>Async</span>[<span>F</span>])<span>:</span> <span>F</span>[<span>A</span>] <span>=</span></span></td>
</tr>



      
<tr>
  <td data-quote-markdown=".js-comment-body" colspan="3">
        

<div data-resolved="false">
  
</div>



  </td>
</tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R181" data-line-number="181"></td>

  <td>
    <span data-code-marker="+">    <span>A</span>.async { cb <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R182" data-line-number="182"></td>

  <td>
    <span data-code-marker="+">      <span>R</span>.unsafeRunAsync(<span>ZSTM</span>.atomically(stm.underlying)) { exit <span>=&gt;</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R183" data-line-number="183"></td>

  <td>
    <span data-code-marker="+">        cb(exit.toEither)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R184" data-line-number="184"></td>

  <td>
    <span data-code-marker="+">      }</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R185" data-line-number="185"></td>

  <td>
    <span data-code-marker="+">    }</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R186" data-line-number="186"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R187" data-line-number="187"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>check</span>[<span>F</span>[<span>+</span> _]](<span>p</span>: <span>Boolean</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>Unit</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R188" data-line-number="188"></td>

  <td>
    <span data-code-marker="+">    <span>if</span> (p) <span>STM</span>.unit <span>else</span> retry</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R189" data-line-number="189"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R190" data-line-number="190"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>collectAll</span>[<span>F</span>[<span>+</span> _], <span>A</span>](</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R191" data-line-number="191"></td>

  <td>
    <span data-code-marker="+">    <span>i</span>: <span>Iterable</span>[<span>STM</span>[<span>F</span>, <span>A</span>]]</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R192" data-line-number="192"></td>

  <td>
    <span data-code-marker="+">  )<span>:</span> <span>STM</span>[<span>F</span>, <span>List</span>[<span>A</span>]] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R193" data-line-number="193"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(<span>ZSTM</span>.collectAll(i.map(_.underlying)))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R194" data-line-number="194"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R195" data-line-number="195"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>die</span>[<span>F</span>[<span>+</span> _]](<span>t</span>: <span>Throwable</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>Nothing</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R196" data-line-number="196"></td>

  <td>
    <span data-code-marker="+">    succeedLazy(<span>throw</span> t)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R197" data-line-number="197"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R198" data-line-number="198"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>dieMessage</span>[<span>F</span>[<span>+</span> _]](<span>m</span>: <span>String</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>Nothing</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R199" data-line-number="199"></td>

  <td>
    <span data-code-marker="+">    die(<span>new</span> <span>RuntimeException</span>(m))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R200" data-line-number="200"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R201" data-line-number="201"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>fail</span>[<span>F</span>[<span>+</span> _]](<span>e</span>: <span>Throwable</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>Nothing</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R202" data-line-number="202"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(<span>ZSTM</span>.fail(e))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R203" data-line-number="203"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R204" data-line-number="204"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>foreach</span>[<span>F</span>[<span>+</span> _], <span>A</span>, <span>B</span>](</span></td>
</tr>



      
<tr>
  <td data-quote-markdown=".js-comment-body" colspan="3">
        

<div data-resolved="false">
  
</div>



  </td>
</tr>

    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R205" data-line-number="205"></td>

  <td>
    <span data-code-marker="+">    <span>as</span>: <span>Iterable</span>[<span>A</span>]</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R206" data-line-number="206"></td>

  <td>
    <span data-code-marker="+">  )(<span>f</span>: <span>A</span> <span>=&gt;</span> <span>STM</span>[<span>F</span>, <span>B</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>List</span>[<span>B</span>]] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R207" data-line-number="207"></td>

  <td>
    <span data-code-marker="+">    collectAll(as.map(f))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R208" data-line-number="208"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R209" data-line-number="209"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>fromEither</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>e</span>: <span>Either</span>[<span>Throwable</span>, <span>A</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R210" data-line-number="210"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(<span>ZSTM</span>.fromEither(e))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R211" data-line-number="211"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R212" data-line-number="212"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>fromTry</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>a</span>: <span>=&gt;</span> <span>Try</span>[<span>A</span>])<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R213" data-line-number="213"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(<span>ZSTM</span>.fromTry(a))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R214" data-line-number="214"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R215" data-line-number="215"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>partial</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>a</span>: <span>=&gt;</span> <span>A</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R216" data-line-number="216"></td>

  <td>
    <span data-code-marker="+">    fromTry(<span>Try</span>(a))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R217" data-line-number="217"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R218" data-line-number="218"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>retry</span>[<span>F</span>[<span>+</span> _]]<span>:</span> <span>STM</span>[<span>F</span>, <span>Nothing</span>] <span>=</span> <span>new</span> <span>STM</span>(<span>ZSTM</span>.retry)</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R219" data-line-number="219"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R220" data-line-number="220"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>succeed</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>a</span>: <span>A</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span> <span>new</span> <span>STM</span>(<span>ZSTM</span>.succeed(a))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R221" data-line-number="221"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R222" data-line-number="222"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>succeedLazy</span>[<span>F</span>[<span>+</span> _], <span>A</span>](<span>a</span>: <span>=&gt;</span> <span>A</span>)<span>:</span> <span>STM</span>[<span>F</span>, <span>A</span>] <span>=</span></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R223" data-line-number="223"></td>

  <td>
    <span data-code-marker="+">    <span>new</span> <span>STM</span>(<span>ZSTM</span>.succeedLazy(a))</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R224" data-line-number="224"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R225" data-line-number="225"></td>

  <td>
    <span data-code-marker="+">  <span>final</span> <span>def</span> <span>unit</span>[<span>F</span>[<span>+</span> _]]<span>:</span> <span>STM</span>[<span>F</span>, <span>Unit</span>] <span>=</span> succeed(())</span></td>
</tr>



    <tr data-hunk="f51603d22d716e1bb1bc261b7f8cc05e">
    <td></td>

    <td id="diff-c5f9dc4eb991e2e2e5cbb098e19ddf98R226" data-line-number="226"></td>

  <td>
    <span data-code-marker="+">}</span></td>
</tr>





          </tbody></table>
        </div>

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>