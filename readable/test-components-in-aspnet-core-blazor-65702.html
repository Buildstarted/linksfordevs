<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Test components in ASP.NET Core Blazor - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Test components in ASP.NET Core Blazor - linksfor.dev(s)"/>
    <meta property="article:author" content="guardrex"/>
    <meta property="og:description" content="Learn how to test componments in Blazor apps."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://docs.microsoft.com/en-us/aspnet/core/blazor/test?view=aspnetcore-3.1"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Test components in ASP.NET Core Blazor</title>
<div class="readable">
        <h1>Test components in ASP.NET Core Blazor</h1>
            <div>by guardrex</div>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 15 Aug 2020</div>
        <p><a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/test?view=aspnetcore-3.1">https://docs.microsoft.com/en-us/aspnet/core/blazor/test?view=aspnetcore-3.1</a></p>
        <hr/>
<div id="readability-page-1" class="page">


	<div data-bi-name="body">

		<div>

			

			<section>
				<div>


				<div id="main-column">

					<main id="main" role="main" data-bi-name="content" lang="en-us" dir="ltr">



						

						<ul data-bi-name="page info" lang="en-us" dir="ltr">
							<li>
								<time data-article-date="" aria-label="Article review date" datetime="2020-08-10T00:00:00.000Z" data-article-date-source="ms.date">08/10/2020</time>
							</li>
								<li>5 minutes to read</li>
								<li>
									<a href="https://github.com/dotnet/AspNetCore.Docs/blob/master/aspnetcore/blazor/test.md" title="1 Contributor" aria-label="1 Contributor">
										<ul data-bi-name="contributors" aria-hidden="true">
													<li><img src="https://github.com/guardrex.png?size=32" data-src="https://github.com/guardrex.png?size=32" role="presentation"></li>
										</ul>
									</a>
								</li>
						</ul>

						<nav id="center-doc-outline" data-bi-name="intopic toc" role="navigation" aria-label="Article Outline">
							<h3>In this article</h3>
						<ol><li><a href="#test-approaches">Test approaches</a></li><li><a href="#choose-the-most-appropriate-test-approach">Choose the most appropriate test approach</a></li><li><a href="#test-components-with-bunit">Test components with bUnit</a></li><li><a href="#additional-resources">Additional resources</a></li></ol></nav>

						<!-- <content> -->
							<p><a href="https://egilhansen.com/" data-linktype="external">Egil Hansen</a></p>
<p>Testing is an important aspect of building stable and maintainable software.</p>
<p>To test a Blazor component, the <em>Component Under Test</em> (CUT) is:</p>
<ul>
<li>Rendered with relevant input for the test.</li>
<li>Depending on the type of test performed, possibly subject to interaction or modification. For example, event handlers can be triggered, such as an <code>onclick</code> event for a button.</li>
<li>Inspected for expected values.</li>
</ul>
<h2 id="test-approaches"><a href="#test-approaches" aria-labelledby="test-approaches"></a>Test approaches</h2>
<p>Two common approaches for testing Blazor components are end-to-end (E2E) testing and unit testing:</p>
<ul>
<li><p><strong>Unit testing</strong>: <a href="https://docs.microsoft.com/en-us/dotnet/core/testing/" data-linktype="absolute-path">Unit tests</a> are written with a unit testing library that provides:</p>
<ul>
<li>Component rendering.</li>
<li>Inspection of component output and state.</li>
<li>Triggering of event handlers and life cycle methods.</li>
<li>Assertions that component behavior is correct.</li>
</ul>
<p><a href="https://github.com/egil/bUnit" data-linktype="external">bUnit</a> is an example of a library that enables Razor component unit testing.</p>
</li>
<li><p><strong>E2E testing</strong>: A test runner runs a Blazor app containing the CUT and automates a browser instance. The testing tool inspects and interacts with the CUT through the browser. <a href="https://github.com/SeleniumHQ/selenium" data-linktype="external">Selenium</a> is an example of an E2E testing framework that can be used with Blazor apps.</p>
</li>
</ul>
<p>In unit testing, only the Blazor component (Razor/C#) is involved. External dependencies, such as services and JS interop, must be mocked. In E2E testing, the Blazor component and all of it's auxiliary infrastructure are part of the test, including CSS, JS, and the DOM and browser APIs.</p>
<p><em>Test scope</em> describes how extensive the tests are. Test scope typically has an influence on the speed of the tests. Unit tests run on a subset of the app's subsystems and usually execute in milliseconds. E2E tests, which test a broad group of the app's subsystems, can take several seconds to complete.</p>
<p>Unit testing also provides access to the instance of the CUT, allowing for inspection and verification of the component's internal state. This normally isn't possible in E2E testing.</p>
<p>With regard to the component's environment, E2E tests must make sure that the expected environmental state has been reached before verification starts. Otherwise, the result is unpredictable. In unit testing, the rendering of the CUT and the life cycle of the test are more integrated, which improves test stability.</p>
<p>E2E testing involves launching multiple processes, network and disk I/O, and other subsystem activity that often lead to poor test reliability. Unit tests are typically insulated from these sorts of issues.</p>
<p>The following table summarizes the difference between the two testing approaches.</p>

<h2 id="choose-the-most-appropriate-test-approach"><a href="#choose-the-most-appropriate-test-approach" aria-labelledby="choose-the-most-appropriate-test-approach"></a>Choose the most appropriate test approach</h2>
<p>Consider the scenario when choosing the type of testing to perform. Some considerations are described in the following table.</p>

<h2 id="test-components-with-bunit"><a href="#test-components-with-bunit" aria-labelledby="test-components-with-bunit"></a>Test components with bUnit</h2>
<p>There's no official Microsoft testing framework for Blazor, but the community-driven project <a href="https://github.com/egil/bUnit" data-linktype="external">bUnit</a> provides a convenient way to unit test Blazor components.</p>
<div>
<p><span aria-hidden="true"></span> Note</p>
<p>bUnit is a third-party testing library and isn't supported or maintained by Microsoft.</p>
</div>
<p>bUnit works with general-purpose testing frameworks, such as <a href="https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-mstest" data-linktype="absolute-path">MSTest</a>, <a href="https://nunit.org/" data-linktype="external">NUnit</a>, and <a href="https://xunit.github.io/" data-linktype="external">xUnit</a>. These testing frameworks make bUnit tests look and feel like regular unit tests. bUnit tests integrated with a general-purpose testing framework are ordinarily executed with:</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/test/run-unit-tests-with-test-explorer" data-linktype="absolute-path">Visual Studio's Test Explorer</a>.</li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test" data-linktype="absolute-path"><code>dotnet test</code></a> CLI command in a command shell.</li>
<li>An automated DevOps testing pipeline.</li>
</ul>
<div>
<p><span aria-hidden="true"></span> Note</p>
<p>Test concepts and test implementations across different test frameworks are similar but not identical. Refer to the test framework's documentation for guidance.</p>
</div>
<p>The following demonstrates the structure of a bUnit test on the <code>Counter</code> component in an app based on a Blazor project template. The <code>Counter</code> component displays and increments a counter based on the user selecting a button in the page:</p>
<pre tabindex="0"><code data-author-content="@page &quot;/counter&quot;

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class=&quot;btn btn-primary&quot; @onclick=&quot;IncrementCount&quot;>Click me</button>

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }
}
"><span><span></span><span></span><span>@</span><span>page</span><span> "/counter"

<span>&lt;<span>h1</span>&gt;</span>Counter<span>&lt;/<span>h1</span>&gt;</span>

<span>&lt;<span>p</span>&gt;</span>Current count: </span><span></span><span>@</span><span>currentCount</span><span><span>&lt;/<span>p</span>&gt;</span>

<span>&lt;<span>button</span> <span>class</span>=<span>"btn btn-primary"</span> </span></span><span></span><span>@</span><span>onclick=<span>"IncrementCount"</span>&gt;Click</span><span><span> <span>me</span>&lt;/<span>button</span>&gt;</span>

</span><span></span><span>@</span><span>code</span><span> {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }
}
</span></span></code></pre>
<p>The following bUnit test verifies that the CUT's counter is incremented correctly when the button is selected:</p>
<pre tabindex="0"><code data-author-content="[Fact]
public void CounterShouldIncrementWhenSelected()
{
    // Arrange
    using var cxt = new TestContext();
    var cut = ctx.RenderComponent<Counter>();
    var paraElm = cut.Find(&quot;p&quot;);

    // Act
    cut.Find(&quot;button&quot;).Click();
    var paraElmText = paraElm.TextContent;

    // Assert
    paraElmText.MarkupMatches(&quot;Current count: 1&quot;);
}
"><span>[<span>Fact</span>]
<span><span>public</span> <span>void</span> <span>CounterShouldIncrementWhenSelected</span>(<span></span>)</span>
{
    <span>// Arrange</span>
    <span>using</span> <span>var</span> cxt = <span>new</span> TestContext();
    <span>var</span> cut = ctx.RenderComponent&lt;Counter&gt;();
    <span>var</span> paraElm = cut.Find(<span>"p"</span>);

    <span>// Act</span>
    cut.Find(<span>"button"</span>).Click();
    <span>var</span> paraElmText = paraElm.TextContent;

    <span>// Assert</span>
    paraElmText.MarkupMatches(<span>"Current count: 1"</span>);
}
</span></code></pre>
<p>The following actions take place at each step of the test:</p>
<ul>
<li><p><em>Arrange</em>: The <code>Counter</code> component is rendered using bUnit's <code>TestContext</code>. The CUT's paragraph element (<code>&lt;p&gt;</code>) is found and assigned to <code>paraElm</code>.</p>
</li>
<li><p><em>Act</em>: The button's element (<code>&lt;button&gt;</code>) is located and then selected by calling <code>Click</code>, which should increment the counter and update the content of the paragraph tag (<code>&lt;p&gt;</code>). The paragraph element text content is obtained by calling <code>TextContent</code>.</p>
</li>
<li><p><em>Assert</em>: <code>MarkupMatches</code> is called on the text content to verify that it matches the expected string, which is <code>Current count: 1</code>.</p>
</li>
</ul>
<div>
<p><span aria-hidden="true"></span> Note</p>
<p>The <code>MarkupMatches</code> assert method differs from a regular string comparison assertion (for example, <code>Assert.Equal("Current count: 1", paraElmText);</code>) <code>MarkupMatches</code> performs a semantic comparison of the input and expected HTML markup. A semantic comparison is aware of HTML semantics, meaning things like insignificant whitespace is ignored. This results in more stable tests. For more information, see <a href="https://bunit.egilhansen.com/docs/verification/semantic-html-comparison" data-linktype="external">Customizing the Semantic HTML Comparison</a>.</p>
</div>
<h2 id="additional-resources"><a href="#additional-resources" aria-labelledby="additional-resources"></a>Additional resources</h2>
<ul>
<li><a href="https://bunit.egilhansen.com/docs/getting-started/" data-linktype="external">Getting Started with bUnit</a>: bUnit instructions include guidance on creating a test project, referencing testing framework packages, and building and running tests.</li>
</ul>

						<!-- </content> -->

						</main>

						<!-- page rating section -->
								
						<!-- end page rating section -->


						<!-- feedback section -->
<section data-bi-name="feedback-section">

    <h2 id="feedback">Feedback</h2>

    <div>
        <p aria-hidden="true" id="send-feedback-about">Submit and view feedback for</p>

        
    </div>

    
</section>

						<!-- end feedback section -->

						<!-- feedback report section -->
						<!-- end feedback report section -->

						
					</div>

					

					<!--end of div.columns -->
				</div>

			<!--end of .primary-holder -->
			</section>

			
		</div>

		<!--end of .mainContainer -->
	</div>

	

	

	
	<span id="adobe-target-experiment-container" hidden=""></span>


</div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>