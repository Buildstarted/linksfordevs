<!DOCTYPE html>
<html lang="en">
<head>
    <title>
NextDNS is my new favourite DNS service - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="NextDNS is my new favourite DNS service - linksfor.dev(s)"/>
    <meta property="article:author" content="Stanislas Lange"/>
    <meta property="og:description" content="AKA Anycast-Pi-hole-as-a-Service... but even better!"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://angristan.xyz/2020/04/nextdns/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - NextDNS is my new favourite DNS service</title>
<div class="readable">
        <h1>NextDNS is my new favourite DNS service</h1>
            <div>by Stanislas Lange</div>
            <div>Reading time: 12-16 minutes</div>
        <div>Posted here: 14 Apr 2020</div>
        <p><a href="https://angristan.xyz/2020/04/nextdns/">https://angristan.xyz/2020/04/nextdns/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="site-main">
<div>
<article>

<figure>
<img srcset="/content/images/size/w300/2020/04/nextdns.png 300w,
                            /content/images/size/w600/2020/04/nextdns.png 600w,
                            /content/images/size/w1000/2020/04/nextdns.png 1000w,
                            /content/images/size/w2000/2020/04/nextdns.png 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://angristan.xyz/content/images/size/w2000/2020/04/nextdns.png" alt="NextDNS is my new favourite DNS service">
</figure>
<section>
<div>
<p>Finally! I'm happy to report that I found a DNS service that perfectly suits my needs.</p><p>My requirements are as follows:</p><ul><li>Low-latency</li><li>Reliable</li><li>Available everywhere</li><li>Support for DoT and DoH</li><li>Includes ad-blocking and tracker-blocking</li><li>Customisable</li><li>Available stats</li></ul><h2 id="pi-hole-sorry-i-do-leave-home-sometimes">Pi-Hole: sorry, I <em>do</em> leave home sometimes</h2><p>We all know <a href="https://pi-hole.net/">Pi-hole</a>, which is an awesome software. Sadly, it does not fit my requirements. </p><p>First of all, it's only available at home, which is a total deal-breaker for me since I only work on mobile devices (laptop, smartphone) that come and go out of my house every day. Which means I can't set my system resolver to PiHole because it wouldn't work when I leave home and if I let DHCP managing my DNS settings, I'll be using random DNS servers outside home.</p><p>I have successfully set up a WireGuard server with Pi-hole set as a resolver, on a VM in the cloud. That... works, but I don't want to be connected to a VPN all the time.</p><p>To put it simply, Pi-hole does not tick essential boxes here, so it's disqualified for my use-case.</p><h3 id="cloudflare-s-1-1-1-1-and-others">Cloudflare's 1.1.1.1 and others</h3><p>Despite how much I like Cloudflare and this specific service, I want to block trackers at the DNS level. <a href="https://1.1.1.1/">1.1.1.1</a> is probably the most reliable and fastest resolver there is on earth, but that does not fit my use case either. üòï</p><h3 id="adguard-good-enough-but-not-perfect">Adguard: good enough, but not perfect</h3><p>For the past year and a half, I have been using <a href="https://adguard.com/en/adguard-dns/overview.html">AdGuard DNS</a> (not their software). I have been using the DoT endpoint from my Android phone and the DoH endpoint from my Mac trough <a href="https://github.com/DNSCrypt/dnscrypt-proxy">dnscrypt-proxy</a>, and it's been working perfectly.</p><p>They have been super reliable for me. They seem to have an Anycast network, although limited. </p><figure><img src="https://angristan.xyz/content/images/2020/04/adguard_dns_map.png"></figure><hr><p>My ISP in France is Orange, and they go through Cogent to reach their Paris server. But Cogent decides to route my packets through New York...</p><figure><twitter-widget id="twitter-widget-0" data-tweet-id="1245094829899554822"></twitter-widget>

</figure><p>Which means I need about 80 ms to access a server that is minutes away from my home.</p><p>I don't know if their Tokyo server is recent, but when I was in South Korea, I had <a href="https://angristan.xyz/2019/09/benchmark-dns-resolvers-android/">about 200 ms of latency</a>. Granted, I didn't keep the results of a traceroute so I don't know if it's the same kind of routing madness.</p><p>That being said, I can't say this has really bothered me. Moreover, dnscrypt-proxy acted as a local cache, which reduced the number of requests sent to AdGuard.</p><hr><p>Of course, I was using them because they block ads and trackers. It really made a difference on my Android phone: I haven't seen ads in so long that I don't even conceive to see ads on my phone anymore.</p><p>What if I want to whitelist or blacklist a specific domain though? What if I want to see statistics of my requests? No possible, sadly. This has not been a huge deal, but it's been something I wish I had...</p><h3 id="nextdns-couldn-t-be-better">NextDNS: Couldn't be better</h3><p>üéâ Good news! NextDNS ticks all the boxes above. I launched <a href="https://www.reddit.com/r/privacytoolsIO/comments/bt2o66/we_are_launching_nextdnsio_a_combination_of/?ref=share&amp;ref_source=embed&amp;utm_content=timestamp&amp;utm_medium=post_embed&amp;utm_name=9b4c1eea6667439ea24c4bc7dd46c03c&amp;utm_source=embedly&amp;utm_term=bt2o66">nearly a year ago</a>, and I have been using them from 3 months.</p><p>NextDNS has been founded by two French guys. To quote their <a href="https://nextdns.io/faq">FAQ</a>:</p><blockquote>NextDNS has been founded in May 2019 in Delaware, USA by two French founders Romain Cointepas and Olivier Poitrey. Olivier has been working on Internet infrastructures for the last 20 years. In 2005, he founded Dailymotion, the largest video sharing service after Youtube and the most popular European website in the world at the time. He is currently Director of Engineering at Netflix, working on Open Connect, Netflix's home CDN also known as the CDN moving about 30% of the total US Internet traffic. Romain and Olivier closely worked for years at Dailymotion on many different projects. Romain ended up leading the mobile &amp; TV department.<p>We are true supporters of the net neutrality and Internet privacy. We believe that un-encrypted DNS resolvers operated by ISPs are detrimental to those two principles. Alternative solutions like Google DNS or Cloudflare DNS are great, but we think more actors need to step up and provide alternative services to avoid centralization of powers.</p></blockquote><p>I don't know about you but that inspires me much more confidence in the project that random dudes on the internet. Or for that matter, whoever's behind AdGuard in Russia... ü§î</p><p><em>NextDNS is a new and rapidly evolving service (still in beta). The information I provide below may not be up-to-date when you read this article.</em></p><h3 id="latency">Latency</h3><p>NextDNS have their own <a href="https://bgp.he.net/AS34939">AS</a>, but I'm not sure who exactly is backing their infrastructure. They don't seem to be using a single (big) cloud provider like AWS or GCP because the locations don't exactly match. My guess is that they use multiple cloud providers, but this is a wild guess ü§∑‚Äç‚ôÇÔ∏è. My point is: you'll get great latency, wherever you are!</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-network-map.png"><figcaption>Dark theme powa</figcaption></figure><p>From home, I have about 3 ms of latency to the Parisian server:</p><figure><img src="https://angristan.xyz/content/images/2020/04/latency-nextdns-paris.png"></figure><h3 id="reliability">Reliability</h3><p>I don't monitor NextDNS - besides my simple Smokeping above, but it's just ICMP. All I can say is that I haven't experienced, as far as I know, any outage or issue during the last 3 months.</p><h2 id="clients-and-support-for-secure-protocols">Clients and support for secure protocols</h2><p>In 2020, we should probably avoid using DNS, as we have many means of using secure DNS protocols like DNS-over-HTTPS, DNS-over-TLS or even DNScrypt.</p><p>Since NextDNS supports, well, "classic" DNS and both DoH and DoT, it's usable everywhere. On top of that, they have a multitude of graphical apps for:</p><ul><li>Android</li><li>iOS</li><li>Windows</li><li>macOS</li><li>ChromeOS (via a Chrome extension!)</li></ul><p>On Android, I use the native DoT implementation.</p><p>On my Windows gaming PC, I don't want to bother and simply use the Windows GUI app.</p><p>On macOS, I could have kept using dnscrypt-proxy because it supports DoH, but the official <a href="https://github.com/nextdns/nextdns">CLI</a> is really good. It's multiplatform, including Windows and *BSD.</p><p>After installing it from Homebrew, I could set it up on my macbook as easily as:</p><pre><code>sudo nextdns install -config &lt;myconfigid&gt; -auto-activate -report-client-info=true -log-queries=false</code></pre><p>It's very easy to use:</p><pre><code>‚ûú  ~ nextdns version
nextdns version 1.4.36
‚ûú  ~ nextdns config
hardened-privacy false
bogus-priv true
use-hosts true
auto-activate true
log-queries false
report-client-info true
detect-captive-portals false
timeout 5s
setup-router false
listen localhost:53
config &lt;myconfigid&gt;
‚ûú  ~ sudo nextdns status
running
‚ûú  ~ nextdns log | tail
Apr  9 19:35:36 mbp-scw com.apple.xpc.launchd[1] (nextdns): This service is defined to be constantly running and is inherently inefficient.
Apr  9 19:35:36 mbp-scw nextdns[59668]: Starting NextDNS 1.4.36/darwin on localhost:53
Apr  9 19:35:36 mbp-scw nextdns[59668]: Listening on TCP/[::1]:53
Apr  9 19:35:36 mbp-scw nextdns[59668]: Listening on UDP/127.0.0.1:53
Apr  9 19:35:36 mbp-scw nextdns[59668]: Listening on UDP/[::1]:53
Apr  9 19:35:36 mbp-scw nextdns[59668]: Listening on TCP/127.0.0.1:53
Apr  9 19:35:41 mbp-scw nextdns[59668]: Activating
Apr  9 19:35:41 mbp-scw nextdns[59668]: Connected 45.90.28.0:443 (con=5ms tls=120ms, TLS13)
Apr  9 19:35:41 mbp-scw nextdns[59668]: Connected 193.168.204.73:443 (con=5ms tls=7ms, TLS13)
Apr  9 19:35:41 mbp-scw nextdns[59668]: Switching endpoint: https://netbarista-par-1.edge.nextdns.io#193.168.204.73</code></pre><p>It automatically handles everything and will set the system resolver to 127.0.0.1. Since it launches by itself via launchd, I can just forget it. It's better than having yet another app in my taskbar.</p><pre><code>‚ûú  ~ dig

; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt;
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 56781
;; flags: qr rd ra ad; QUERY: 1, ANSWER: 13, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1220
;; QUESTION SECTION:
;.				IN	NS

;; ANSWER SECTION:
.			48231	IN	NS	a.root-servers.net.
.			48231	IN	NS	b.root-servers.net.
.			48231	IN	NS	c.root-servers.net.
.			48231	IN	NS	d.root-servers.net.
.			48231	IN	NS	e.root-servers.net.
.			48231	IN	NS	f.root-servers.net.
.			48231	IN	NS	g.root-servers.net.
.			48231	IN	NS	h.root-servers.net.
.			48231	IN	NS	i.root-servers.net.
.			48231	IN	NS	j.root-servers.net.
.			48231	IN	NS	k.root-servers.net.
.			48231	IN	NS	l.root-servers.net.
.			48231	IN	NS	m.root-servers.net.

;; Query time: 7 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Thu Apr 09 19:36:32 CEST 2020
;; MSG SIZE  rcvd: 239</code></pre><p>My only complaint is that it does not seem to cache requests (see the 7 ms query time above, even though I have made the query multiple times).</p><p>Edit: a few hours after my post, <a href="https://twitter.com/Olivier_Poitrey/status/1248722449740382208">a new version of the cli has been published</a>, <a href="https://github.com/nextdns/nextdns/releases/tag/v1.5.0">with caching support</a>. ü§ì</p><p>On my servers, I was already using a local recursive resolver with Unbound. For the servers that had a recent-enough Unbound version that supports DoT, <a href="https://github.com/angristan/ansible-base/commit/13358965f2d75d33fa7a347c0d5bfb897f4bd9af">I added a few lines of configuration</a> to forward the requests to NextDNS. It was less work for me than trying to incorporate the NextDNS CLI into my workflow. I don't really need to use NextDNS on my servers, especially since I disabled all filtering for them. It's just so that I can have logs and stats, for fun.</p><p>The only upside of using a dedicated NextDNS client at first was to have per-device stats, but it turns out you can add the device name in the endpoint to differentiate it. Very cool feature!</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-identify-device-config.png"></figure><h3 id="web-interface">Web interface</h3><p>Although NextDNS is usable with the default endpoints, its power is unleashed when you create a "configuration". You can create one without an account to test things out, but creating an account will allow you to make the configuration private and linked to your account.</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-dashboard-web.png"></figure><p>I personally have an account with two configurations: one for all my devices and one for my servers.</p><p>From the web interface, which is improved quite often, you can customise what domains are being blocked as well as consult logs and statistics.</p><h3 id="blocking-trackers-and-ads">Blocking trackers and ads</h3><p>One of the main selling points of NextDNS is of course the fact that it blocks trackers and ads by default. You can turn it off if you want, that's what I did for my server configuration. But most of all, you can customise it! That's one of the paint points I had with AdGuard : if one domain I needed to access was blocked by AdGuard, I had to temporarily use another resolver.</p><p>Besides a simple whitelist and blacklist, the dashboard gives granular control over what's blocked. Here are some available sections on it:</p><ul>
<li>Security
<ul>
<li>Threat Intelligence Feeds</li>
<li>Google Safe Browsing</li>
<li>Cryptojacking Protection</li>
<li>DNS Rebinding Protection</li>
<li>IDN Homograph Attacks Protection</li>
<li>Typosquatting Protection</li>
<li>Domain Generation Algorithms (DGAs) Protection</li>
<li>Block Newly Registered Domains (NRDs)</li>
<li>Block Parked Domains</li>
<li>Block specifics Top-Level Domains (TLDs)</li>
<li>Block Child Sexual Abuse Material</li>
</ul>
</li>
<li>Privacy
<ul>
<li>Blocklists</li>
<li>Block Disguised Third-Party Trackers</li>
<li>Allow Affiliate &amp; Tracking Links</li>
</ul>
</li>
<li>Parental Control
<ul>
<li>Restrict access to specific websites, apps and games</li>
<li>Restrict access to specific categories of websites and apps</li>
<li>Safe Search</li>
<li>YouTube Restricted Mode</li>
<li>Block Bypass Methods</li>
</ul>
</li>
</ul>
<p>As you can see, NextDNS provides much more than simple ad blocking!</p><p>The <em>Privacy -&gt; Blocklist</em> tab looks like this:</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-dashboard-blocklists.png"></figure><p>The default list already contains a ton of domains and should be good enough to start. I added a few more that I already knew, like adaway and AdGuard ü§ì.</p><p>Here is the repartition of my blocked queries over the last 30 days:</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-blocked-dashboard.png"></figure><p>That doesn't tell much, though, because we don't know how these stats are computed. Is there a precedence level? Or is a domain matching multiple lists accounting for each one's blocked count? ü§∑‚Äç‚ôÇÔ∏è</p><h3 id="statistics-and-logging">Statistics and logging</h3><p>One of the main selling points of NextDNS is that you can optionally log queries and extract statistics out of them.</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-logging.png"></figure><p>If they are enabled, logs can be stored in the US, Europe, or Switzerland, with a retention period spanning from 1 hour to 2 years.</p><p>Here are some screenshots of the logs tab:</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-dashboard-logs.png"><figcaption>The source of the block can be viewed when hovering the mouse of the blocked icon.</figcaption></figure><p>I can also make sure my device is sending requests using a secure protocol:</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-dashboard-logs-device-protocol.png"><figcaption>Android supports DoT natively.</figcaption></figure><p>It's very neat to be able to view and filter all these logs. But what's even better is the Analytics tab!</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-analytics-dashboard-1.png"><figcaption>As you can see I started using NextDNS nearly 3 months ago.</figcaption></figure><p>On average, it seems I send a bit more than 500k DNS queries a month. Impressive!</p><figure><img src="https://angristan.xyz/content/images/2020/04/nextdns-analytics-dashboard-2.png"></figure><p>I'm the kind of person who loves having stats about everything, so this soothes my heart. This is the feature that I liked about Pi-hole, and I can finally use it, everywhere!</p><h3 id="privacy">Privacy</h3><p>I invite you to read the concise <a href="https://nextdns.io/privacy">privacy policy</a> which basically states they won't sell your don't and won't log anything unless you want them to.</p><p>For what it's worth, a few months ago <a href="https://web.archive.org/web/20200319214632/https://blog.mozilla.org/blog/2019/12/17/firefox-announces-new-partner-in-delivering-private-and-secure-dns-services-to-users/">NextDNS joined Firefox‚Äôs trusted recursive resolver program</a>, "committing to data retention and transparency requirements that respect user privacy".</p><h3 id="pricing">Pricing</h3><p>NextDNS is a service that can't make money unless we give them some. Their pricing policy is <a href="https://nextdns.io/pricing">extremely simple</a>:</p><ul><li>Completely free during the beta...</li><li>then free up until about 300,000 DNS queries/month ‚Äî $1.99/month for unlimited queries.</li><li>If you decide to stay on the free plan, NextDNS will simply behave like a classic public resolver after reaching the 300,000 queries limit.</li></ul><p>Kudos to them for that last point: they don't cut you out if you go over the quota, but simply stop filtering queries. </p><p>The threshold of 300k queries is cleverly placed. 300k is a lot, but it's just low enough that most user will need to pay if they want to keep ads way at the end of the month. That being said, $2/month is a very fair price and I will gladly subscribe once NextDNS goes out of beta! </p><p>NextDNS is my new favourite DNS service. üëè</p>
</div>
</section>

</article>
</div>
</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>