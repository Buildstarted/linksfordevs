<!DOCTYPE html>
<html lang="en">
<head>
    <title>
AArnott/Nerdbank.GitVersioning - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="AArnott/Nerdbank.GitVersioning - linksfor.dev(s)"/>
    <meta property="article:author" content="AArnott"/>
    <meta property="og:description" content="Stamp your assemblies, packages and more with a unique version generated from a single, simple version.json file and include git commit IDs for non-official builds. - AArnott/Nerdbank.GitVersioning"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/AArnott/Nerdbank.GitVersioning"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - AArnott/Nerdbank.GitVersioning</title>
<div class="readable">
        <h1>AArnott/Nerdbank.GitVersioning</h1>
            <div>by AArnott</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 10 Sep 2019</div>
        <p><a href="https://github.com/AArnott/Nerdbank.GitVersioning">https://github.com/AArnott/Nerdbank.GitVersioning</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text">
<p><a href="https://dev.azure.com/andrewarnott/OSS/_build/latest?definitionId=18" rel="nofollow"><img src="https://camo.githubusercontent.com/dfec444621750070f8690350ab82742b5726431c/68747470733a2f2f6465762e617a7572652e636f6d2f616e6472657761726e6f74742f4f53532f5f617069732f6275696c642f7374617475732f4e65726462616e6b2e47697456657273696f6e696e67" alt="Build Status" data-canonical-src="https://dev.azure.com/andrewarnott/OSS/_apis/build/status/Nerdbank.GitVersioning"></a>
<a href="https://nuget.org/packages/Nerdbank.GitVersioning" rel="nofollow"><img src="https://camo.githubusercontent.com/304c91302e3e4e12e53db4b46f23ed1ba395da3f/68747470733a2f2f696d672e736869656c64732e696f2f6e756765742f762f4e65726462616e6b2e47697456657273696f6e696e672e737667" alt="NuGet package" data-canonical-src="https://img.shields.io/nuget/v/Nerdbank.GitVersioning.svg"></a>
<a href="https://nuget.org/packages/Nerdbank.GitVersioning" rel="nofollow"><img src="https://camo.githubusercontent.com/3639357850ccb05a6e3932b9ec7b6cf98b1b33a3/68747470733a2f2f696d672e736869656c64732e696f2f6e756765742f64742f4e65726462616e6b2e47697456657273696f6e696e672e737667" alt="NuGet downloads" data-canonical-src="https://img.shields.io/nuget/dt/Nerdbank.GitVersioning.svg"></a>
<a href="https://www.npmjs.com/package/nerdbank-gitversioning" rel="nofollow"><img src="https://camo.githubusercontent.com/754140587bcb59cfc1dc3b5e806e7b2106cdef69/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6e65726462616e6b2d67697476657273696f6e696e672e737667" alt="NPM package" data-canonical-src="https://img.shields.io/npm/v/nerdbank-gitversioning.svg"></a>
<a href="https://gitter.im/AArnott/Nerdbank.GitVersioning?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/AArnott/Nerdbank.GitVersioning" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg"></a></p>
<h2>Overview</h2>
<p>This package adds precise, semver-compatible git commit information
to every assembly, VSIX, NuGet and NPM package, and more.
It implicitly supports all cloud build services and CI server software
because it simply uses git itself and integrates naturally in MSBuild, gulp
and other build scripts.</p>
<p>What sets this package apart from other git-based versioning projects is:</p>
<ol>
<li>Prioritize absolute build reproducibility. Every single commit can be built and produce a unique version.</li>
<li>No dependency on tags. Tags can be added to existing commits at any time. Clones may not fetch tags. No dependency on tags means better build reproducibility.</li>
<li>No dependency on branch names. Branches come and go, and a commit may belong to any number of branches. Regardless of the branch HEAD may be attached to, the build should be identical.</li>
<li>The computed version information is based on an author-defined major.minor version and an optional unstable tag, plus a shortened git commit ID.</li>
</ol>
<h2>Installation and Configuration</h2>
<p>You can install Nerdbank.GitVersioning into your projects via NuGet or NPM.</p>
<ul>
<li>Use the <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/nbgv-cli.md">nbgv .NET Core CLI tool</a> (recommended)</li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/nuget-acquisition.md">NuGet installation instructions</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/npm-acquisition.md">NPM installation instructions</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/cake.md">Cake Build installation instructions</a></li>
</ul>
<p>You must also create <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/versionJson.md">a version.json file</a> in your repo. See <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/migrating.md">migration notes</a> if your repo already has a version.txt or version.json file from using another system.</p>
<h2>How to leverage version stamping and runtime information</h2>
<p>See relevant documentation for any of these topics:</p>
<ul>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/dotnet.md">.NET</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/node.md">Node</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/vsix.md">VSIX</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/nuproj.md">NuProj</a></li>
</ul>
<h2>Build</h2>
<p>We have docs to describe how to build with Nerdbank.GitVersioning
for these build systems:</p>
<ul>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/msbuild.md">MSBuild</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/gulp.md">gulp</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/dotnet-cli.md">DNX</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/dotnet-cli.md">dotnet CLI</a></li>
<li><a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/cake.md">Cake Build</a></li>
</ul>
<p>Also some special <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/cloudbuild.md">cloud build considerations</a>.</p>
<h2>Where and how versions are calculated and applied</h2>
<p>This package calculates the version based on a combination of the version.json file,
the git 'height' of the version, and the git commit ID.
The height can optionally be incremented only for those <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/pathFilters.md">commits that change certain paths</a>.</p>
<h3>Version generation</h3>
<p>Given the same settings as used in the discussion above, a NuGet or NPM package may be
assigned this version:</p>
<pre><code>1.0.24-alpha-g9a7eb6c819
</code></pre>
<p>When built as a public release, the git commit ID is dropped:</p>
<pre><code>1.0.24-alpha
</code></pre>
<p>Learn more about <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/public_vs_stable.md">public releases versus prereleases</a>.</p>
<h2>Frequently asked questions</h2>
<h3>What is 'git height'?</h3>
<p>Git 'height' is the number of commits in the longest path from HEAD (the code you're building)
to some origin point, inclusive. In this case the origin is the commit that set the major.minor
version number to the values found in HEAD.</p>
<p>For example, if the version specified at HEAD is 3.4 and the longest path in git history from HEAD
to where the version file was changed to 3.4 includes 15 commits, then the git height is "15".
Another example is when HEAD points directly at the commit that changed the major.minor version,
which has a git height of 1. <a href="https://github.com/AArnott/Nerdbank.GitVersioning/issues/102#issuecomment-269591960">Learn more about 1 being the minimum revision number</a>.</p>
<h3>Why is the git height used for the PATCH version component for public releases?</h3>
<p>The git commit ID does not represent an alphanumerically sortable identifier
in semver, and thus delivers a poor package update experience for NuGet package
consumers. Incrementing the PATCH with each public release ensures that users
who want to update to your latest NuGet package will reliably get the latest
version.</p>
<p>The git height is guaranteed to always increase with each release within a given major.minor version,
assuming that each release builds on a previous release. And the height automatically resets when
the major or minor version numbers are incremented, which is also typically what you want.</p>
<h3>Why isn't the git commit ID included for public releases?</h3>
<p>It could be, but the git height serves as a pseudo-identifier already and the
git commit id would just make it harder for users to type in the version
number if they ever had to.</p>
<p>Note that the git commit ID is <em>always</em> included in the
<code>AssemblyInformationalVersionAttribute</code> so one can always match a binary to the
exact version of source code that produced it.</p>
<p>Learn more about <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/public_vs_stable.md">public releases and the git commit ID suffix</a>.</p>
<h3>How do I translate from a version to a git commit and vice versa?</h3>
<p>While Nerdbank.GitVersioning calculates the version and applies it to most builds automatically,
there can be occasions where you want to do so yourself or reverse the process to determine
the commit that produced a given version.</p>
<p>To do this use <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/nbgv-cli.md">the <code>nbgv</code> tool</a> with the <code>get-version</code> or <code>get-commits</code> command.</p>
<p>Another (deprecated) option is to use a pair of Powershell scripts are included in the Nerdbank.GitVersioning NuGet package
that can help you to translate between the two representations.</p>
<pre><code>tools\Get-CommitId.ps1
tools\Get-Version.ps1
</code></pre>
<p><code>Get-CommitId.ps1</code> takes a version and print out the matching commit (or possible commits, in the exceptionally rare event of a collision).
<code>Get-Version.ps1</code> prints out the version information for the git commit current at HEAD.</p>
<h3>How do I build Nerdbank.GitVersioning from source?</h3>
<p>Prerequisites and build instructions are found in our
<a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/CONTRIBUTING.md">contributing guidelines</a>.</p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>