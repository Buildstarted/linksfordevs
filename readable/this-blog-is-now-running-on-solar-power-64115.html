<!DOCTYPE html>
<html lang="en">
<head>
    <title>
This blog is now running on solar power - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="This blog is now running on solar power - linksfor.dev(s)"/>
    <meta property="og:description" content="This blog is now running on solar power."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://louwrentius.com/this-blog-is-now-running-on-solar-power.html"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - This blog is now running on solar power</title>
<div class="readable">
        <h1>This blog is now running on solar power</h1>
            <div>Reading time: 8-11 minutes</div>
        <div>Posted here: 10 Jul 2020</div>
        <p><a href="https://louwrentius.com/this-blog-is-now-running-on-solar-power.html">https://louwrentius.com/this-blog-is-now-running-on-solar-power.html</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
              <h2>Introduction</h2>
<p>This blog is now running on solar power. </p>
<p>I've put a solar panel on my balcony, which is connected to a solar charge controller. This device charges an old worn-out car battery and provides power to a Raspberry Pi 3b+, which in turn powers this (static) website.</p>
<p><a href="https://louwrentius.com/static/images/solarpanelbalcony-large.jpg"><img alt="solar" src="https://louwrentius.com/static/images/solarpanelbalcony-small.jpg"></a></p>
<p>Some statistics about the current status of the solar setup is shown in the sidebar to the right.</p>
<h2>Low-tech Magazine as inspiration</h2>
<p>If you think you've seen a concept like this before, you are right. </p>
<p>The website  <a href="https://solar.lowtechmagazine.com/power.html">Low-tech Magazine</a> is the inspiration for my effort. I would really recommend visiting this site because it goes to incredible length to make the site energy-efficient. For example, images are dithered to save on bandwidth!</p>
<p>Low-tech Magazine <a href="https://solar.lowtechmagazine.com/about.html#offline">goes off-line</a> when there isn't enough sunlight and the battery runs out, which can happen after a few days of bad weather.</p>
<p>In January 2020, the site shared <a href="https://solar.lowtechmagazine.com/2020/01/how-sustainable-is-a-solar-powered-website.html">some numbers</a> about the sustainability of the solar-powered website.</p>
<h2>The build</h2>
<p>My build is almost identical to that of Low-tech Magazine in concept, but not nearly as efficient. I've just performed a lift-and-shift of my blog from the cloud to a Raspberry Pi 3b+.</p>
<p>I've build my setup based on some parts I already owned, such as the old car battery and the Pi. The solar panel and solar charge controller were purchased new. The LCD display and current/voltage sensor have been recycled from an earlier hobby project. </p>
<p><a href="https://louwrentius.com/static/images/solarcontrollerboard-large.jpg"><img alt="controller" src="https://louwrentius.com/static/images/solarcontrollerboard-large.jpg"></a></p>
<p>I've used these parts:</p>
<table>
<tbody><tr><td>Solar Panel</td><td>Monocrystalline 150 Watt 12V</td></tr>
<tr><td>Battery</td><td>12 Volt Lead Acid Battery (Exide 63Ah)</td></tr>
<tr><td>Solar Charge Controller</td><td>Victron BlueSolar MPPT 75|10</td></tr>
<tr><td>Voltage/Current sensor</td><td>INA260</td></tr>
<tr><td>LCD Display</td><td>HD44780 20x4 </td></tr>
<tr><td>Computer</td><td>Raspberry Pi 3b+</td></tr>
<tr><td>Communications cable</td><td>VE.Direct to USB interface</td></tr>
</tbody></table>

<h3>The Solar Panel</h3>
<p>The panel is extremely over-dimensioned because my balcony is directed towards the west, so it has only a few hours a day of direct sunlight. Furthermore, the angle of the solar panel is sub-optimal. </p>
<p>My main concern will be the winter. It is not unlikely that during the winter, the panel will not be able to generate enough energy to power the Pi and charge the battery for the night.</p>
<p>I have also noticed that under great sunlight conditions, the panel can easily 
produce 60+ Watt<sup id="fnref:ideal"><a href="#fn:ideal" rel="footnote">1</a></sup> but the battery cannot ingest power that fast.</p>
<p>I'm not sure about the actual brand of the panel, it was the cheapest panel I could find on Amazon for the rated wattage. </p>
<h3>The Solar Charger</h3>
<p>It's a standard solar charger made by Victron, for small solar setups (to power a shed or mobile home). I've bought the special data cable<sup id="fnref:cable"><a href="#fn:cable" rel="footnote">2</a></sup> so I can get information such as voltage, current and power usage. </p>
<p><img alt="chargecontroller" src="https://louwrentius.com/static/images/solarcontroller.jpg"></p>
<p>The controller uses a documented protocol called ve.direct. I'm using a <a href="https://github.com/karioja/vedirect">Python module</a> to obtain the data. </p>
<p>According to the manual, this solar charger will assure that the battery is sufficiently charged and protects against deep discharge or other conditions that could damage the battery. </p>
<p>I feel that this is a very high-quality product. It seems sturdy and the communications port (which even supports a bluetooth dongle) giving you access to the data is really nice. </p>
<p>The controller is ever so slightly under-dimensioned for the solar panel, but since I will never get the theoretical full power of the panel due to the sub-optimal configuration, this should not be an issue. </p>
<h3>The battery</h3>
<p>In the day and age of Lithium-ion batteries it may be strange to use a Lead Acid battery. The fact is that this battery was free and - although too worn down for a car - can still power light loads for a very long time (days). And I could just hook up a few extra batteries to expand capacity (and increase solar energy absorption rates).</p>
<p>To protect against short-circuits, the battery is protected by a fuse. This is critical because car batteries can produce so much current that they can be used for welding. They are dangerous.</p>
<p>If you ever work with lead acid batteries, know this: don't discharge them beyond 50% of capacity, and ideally not beyond 70% of capacity. <a href="https://batteryuniversity.com/learn/article/lead_based_batteries">The deeper the discharge, the lower the life expectancy</a>. A 100% discharge of a lead acid battery will kill it very quickly.</p>
<p>You may understand why Lead Acid batteries aren't that great for solar usage, because you need to buy enough of them to assure you never have to deep discharge them. </p>
<h3>Voltage, Current and Power Sensor</h3>
<p>I noticed that the load current sensor of the solar charge controller was not very precise, so I added an <a href="https://learn.adafruit.com/adafruit-ina260-current-voltage-power-sensor-breakout">INA260</a> based sensor. This sensor uses I2C for communication, just like the LCD display. It measures voltage, current and power in a reasonable presice resolution.</p>
<p>Using the sensor is quite simple (<em>pip3 install adafruit-circuitpython-ina260</em>):</p>
<pre><code>#!/usr/bin/env python3
import board
import adafruit_ina260
i2c = board.I2C()
ina260_L = adafruit_ina260.INA260(i2c,address=64)
print(ina260_L.current)
print(ina260_L.voltage)
print(ina260_L.power)
</code></pre>
<p>Please note that this sensor is purely optional, the precision it provides is not really required. I've used this sensor to observe that the voltage and current sensing sensors of the solar charge controller are fairly accurate, except for that of the load, which only measures the current in increments of 100 mAh. </p>
<h3>The LCD Display</h3>
<p>The display has four lines of twenty characters and uses a HD44780 controller. It's dirt-cheap and uses the I2C bus for communications. By default, the screen is very bright, but I've used a resistor on a header for the backlight to lower the brightness.</p>
<p><img alt="lcddisplay" src="https://louwrentius.com/static/images/lcddisplay.jpg"></p>
<p>I'm using the Python RPLCD library (<em>pip3 install RPLCD</em>) for interfacing with the LCD display. </p>
<p>Using an LCD display in any kind of project is very simple. </p>
<pre><code>#!/usr/bin/env python3
from RPLCD.i2c import CharLCD
lcd = CharLCD('PCF8574', 0x27, cols=20, rows=4)
lcd.clear()
lcd.cursor_pos = (0,0) # (line,column)
lcd.write_string("Hello")
</code></pre>
<h3>12 volt to 5 Volt conversion</h3>
<p>I'm just using a simple car cigarette lighter USB adapter to power the Raspberry Pi 3b+. I'm looking at a more power-efficient converter, although I'm not sure how much efficiency I'll be able to gain, if any.</p>
<h2>Script to collect data</h2>
<p>I've written a small Python script to collect all the data. The data is send to two places:</p>
<ul>
<li>It is send to Graphite/Grafana for nice charts (serves no real purpose)</li>
<li>It is used to generate the infographic in the sidebar to the right </li>
</ul>
<p>Because I don't want to wear out the SD card of the Raspberry Pi, the stats as shown in the sidebar to the right is written to a folder that is mounted on tmpfs.</p>
<h2>The cloud as backup</h2>
<p>When you connect to this site, you connect to a VPS running HAProxy. HAproxy determines if my blog is up and if so, will proxy between you and the Raspberry Pi. If the battery would run out, HAProxy will redirect you an instance of my blog on the same VPS (where it was running for years).</p>
<p>As you may understand, I still have to pay for the cloud VPS and that VPS also uses power. From an economical standpoint and from a ecological standpoint, this project may make little sense. </p>
<h2>Possible improvements</h2>
<h3>VPS on-demand</h3>
<p>The obvious flaw in my whole setup is the need for a cloud VPS that is hosting HAProxy and a backup instance of my blog.</p>
<p>A better solution would be to only spawn a cloud VPS on demand, when power is getting low. To move visitors to the VPS, the DNS records should be changed to point to the right IP-address, which could be done with a few API calls.</p>
<p>I could also follow the example of Low-tech Magazine and just accept that my blog would be offline for some time, but I don't like that.</p>
<h3>Switching to Lithium-ion</h3>
<p>As long as the car battery is still fine, I have no reason to switch to Lithium-ion. I've also purchased a few smaller Lead Acid batteries just to test their real-life capacity, to support projects like these. Once the car battery dies, I can use those to power this project. </p>
<h3>The rest of the network is not solar-powered</h3>
<p>The switches, router and modem that supply internet access are not solar-powered. Together, these devices use significantly more power, which I cannot support with my solar setup. </p>
<p>I would have to move to a different house to be able to install sufficient solar capacity. </p>
<h2>Other applications</h2>
<p>During good weather conditions, the solar panel provides way more power than is required to keep the battery charged and run the Raspberry Pi.</p>
<p>I've used the excess energy to charge my mobile devices. Although I think that's fun, if I just forget turning off my lights or amplifier for a few hours, I would already waste most of my solar gains. </p>
<p>I guess it's the tought that counts. </p>
<h2>Conclusion</h2>
<p>In the end, it it was a fun hobby project for me to realise. I want to thank Low-tech Magazine for the idea, I had a lot of fun creating my (significantly worse) copy of it.</p>
<p>If you have any ideas on how to improve this project, feel free to comment below or email me.</p>

            </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>