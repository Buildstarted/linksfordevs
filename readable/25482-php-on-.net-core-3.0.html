<!DOCTYPE html>
<html lang="en">
<head>
    <title>
PHP on .NET Core 3.0 -
linksfor.dev(s)
    </title>
    <meta charset="utf-8">
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }
    </style>
</head>
<body>
    <div class="grid">
            <h1>PHP on .NET Core 3.0</h1>
        
<div class="readable"><article id="post-18186" class="post-18186 post type-post status-publish format-standard hentry category-announcement category-news tag-net tag-net-core-3-0 tag-performance tag-php"> <div class="entry-content"> <p><em>Our recent work on the PeachPie compiler gives us a few cool abilities and features. Not only can you&#xA0;compile and run PHP code natively on the .NET runtime (which means all the performance benefits and interop with C#) but now it all works fluently on the new </em><strong><em>.NET Core 3.0</em></strong><em> and ASP.NET Core 3.0. Let&#x2019;s take a look at the new features and what had to be changed in order to take advantage of .NET 3.0.</em></p> <span id="more-18186"></span> <p>How to get PHP on .NET Core 3.0 you say? First you need <strong>PeachPie</strong>, at least version <strong>0.9.42</strong>. And in fact, you don&#x2019;t have to download it at all, it gets downloaded by <code>dotnet</code>&#xA0;the first time you use it. Take a look at the <a href="https://www.peachpie.io/getstarted">Getting Started</a> page for more details.</p> <h2>Why 0.9.42</h2> <p>The compiler already generates <code>netstandard2.0</code>&#xA0;compliant DLL files, which are compatible with .NET Core 3.0, so why would you have to update the compiler? In short: there was a bug. We had emitted a&#xA0;<code>.call</code>&#xA0;instruction instead of <code>.callvirt</code>&#xA0;in case of abstract method calls. The .NET Core 2.0 runtime didn&#x2019;t care much and silently changed it to the proper one, but .NET Core 3.0 throws a&#xA0;<code>BadImageFormatException</code>&#xA0;instead. Also, in our ASP.NET Core integration, we now force the synchronous IO since PHP&#x2019;s <code>echo</code>&#xA0;is still translated into synchronous <code>System.IO.Stream.Write</code>&#xA0;and the new ASP.NET Core 3.0 <a href="https://github.com/aspnet/Announcements/issues/342">only allows asynchronous IO by default</a>.</p> <h2>What are the benefits</h2> <p>It&#x2019;s all about performance. By switching your PHP app from .NET Core 2.0 to 3.0, you&#x2019;ll get at least a&#xA0;<strong>+10% performance</strong> gain out of the box. Note that there are a lot of possibilities for further performance improvements and memory usage optimizations &#x2026; we&#x2019;ll be happy to write more about it once it happens.</p> <p>But there is <strong>more in 0.9.42</strong>.</p> <ul><li>The new version implements more of the standard PHP library.</li><li>The database extension has been updated to the latest MySQL servers.</li><li>There are few fixes as well&#xA0;</li></ul> <p>Moreover, a nice feature for C# interop &#x2013; wherever in your PHP code you use the PHPDoc tag <code>@obsolete</code>&#xA0;, the compiler annotates the method or class with <code>[ObsoleteAttribute]</code>&#xA0;metadata. This has a nice consequence. <strong>Wherever you use an obsolete PHP function either in C# or the PHP code, you&#x2019;ll get warned</strong> by the corresponding compiler (C# compiler or PeachPie compiler).</p> <h2>Any future work?</h2> <p>We are getting closer to the&#xA0;<code>1.0.0</code>&#xA0;version. A few more bugs have to be fixed, a few workarounds to be made; but most importantly the platform is becoming more stable and a native citizen in the .NET Core family. One of the cool features we&#x2019;re planning to do is the <a href="https://github.com/peachpiecompiler/peachpie/issues/437">async echo</a>, which will improve the web server&#x2019;s throughput.</p> <p>A bunch of work will of course continue to be done on performance. Just by going through our code, we are aware of dozens of possibilities to optimize and do things more efficiently. Furthermore, we are working on a few more tools to increase the user-friendliness of the PeachPie platform. Stay tuned for more announcements on this.</p>
<div class="ssba ssba-wrap"><div>Share this article:<a class="ssba_facebook_share" href="http://www.facebook.com/sharer.php?u=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/facebook.png" class="ssba ssba-img" alt="Share on Facebook"></a><a class="ssba_vk_share ssba_share_link" href="http://vkontakte.ru/share.php?url=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/vk.png" class="ssba ssba-img" alt="Share on VK"></a><a class="ssba_pinterest_share" href="javascript:void((function()%7Bvar%20e=document.createElement(&apos;script&apos;);e.setAttribute(&apos;type&apos;,&apos;text/javascript&apos;);e.setAttribute(&apos;charset&apos;,&apos;UTF-8&apos;);e.setAttribute(&apos;src&apos;,&apos;//assets.pinterest.com/js/pinmarklet.js?r=&apos;+Math.random()*99999999);document.body.appendChild(e)%7D)());"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/pinterest.png" class="ssba ssba-img" alt="Pin on Pinterest"></a><a class="ssba_google_share" href="https://plus.google.com/share?url=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png" class="ssba ssba-img" alt="Share on Google+"></a><a class="ssba_twitter_share" href="http://twitter.com/share?url=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html&amp;text=PHP+on+.NET+Core+3.0+"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png" class="ssba ssba-img" alt="Tweet about this on Twitter"></a><a class="ssba_linkedin_share ssba_share_link" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png" class="ssba ssba-img" alt="Share on LinkedIn"></a><a class="ssba_reddit_share" href="http://reddit.com/submit?url=https://www.peachpie.io/2019/05/php-on-net-core-3-0.html&amp;title=PHP on .NET Core 3.0"><img src="https://www.peachpie.io/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png" class="ssba ssba-img" alt="Share on Reddit"></a></div></div>	</div> </article></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>