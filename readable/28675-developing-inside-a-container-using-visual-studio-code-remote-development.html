<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Developing inside a Container using Visual Studio Code Remote Development -
linksfor.dev(s)
    </title>
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Developing inside a Container using Visual Studio Code Remote Development</h1>
    <div class="col-sm-9 col-md-8 body"> <p>The <strong>Visual Studio Code Remote - Containers</strong> extension lets you use a <a href="https://docker.com" class="external-link">Docker container</a> as a full-featured development environment. It allows you to open any folder inside (or mounted into) a container and take advantage of VS Code&apos;s full feature set. A <a href="#_creating-a-devcontainerjson-file"><code>devcontainer.json</code> file</a> in your project tells VS Code how to access (or create) a <strong>development container</strong> with a well-defined tool and runtime stack. This container can be used to run an application or to sandbox tools, libraries, or runtimes needed for working with a codebase.</p> <p>Workspace files are mounted from the local file system or copied or cloned into the container. Extensions are installed and run inside the container, where they have full access to the tools, platform, and file system. This means that you can seamlessly switch your entire development environment just by connecting to a different container.</p> <p><img src="/assets/docs/remote/containers/architecture-containers.png" alt="Container Architecture"></p> <p>This lets VS Code provide a <strong>local-quality development experience</strong> &#x2014; including full IntelliSense (completions), code navigation, and debugging &#x2014; <strong>regardless of where your tools (or code) is located</strong>.</p> <h2 id="_getting-started">Getting started</h2> <h3 id="_system-requirements">System Requirements</h3> <p><strong>Local:</strong> Docker Desktop 2.0+ for macOS/Windows or Docker CE/EE 18.06+ and Docker Compose 1.21+ for Linux. Docker Toolbox and Ubuntu snap packages are not supported. For Windows, Windows 10 Professional or Enterprise is required due to the requirements of Docker Desktop or Windows. See the minimum requirements for <a href="/docs/supporting/requirements">VS Code</a> for additional details.</p> <p><strong>Containers</strong>:</p> <ul> <li> <p><strong>Full support:</strong> x86_64 Debian 8+, Ubuntu 16.04+, CentOS / RHEL 7+ based containers</p> </li> <li> <p><strong>Experimental support:</strong> x86_64 Alpine Linux containers in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a> only.</p> </li> </ul> <p>Other <code>glibc</code> based Linux containers may work if they have <a href="/docs/remote/linux">needed prerequisites</a>.</p> <p>While experimental <code>musl</code> based Alpine Linux support is available in <a href="https://code.visualstudio.com/insiders/">VS Code - Insiders</a>, some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension. See the <a href="/docs/remote/linux">Remote Development and Linux</a> article for details.</p> <h3 id="_installation">Installation</h3> <p>To get started, follow these steps:</p> <ol> <li> <p>Install and configure <a href="https://www.docker.com/get-started" class="external-link">Docker</a> for your operating system.</p> <p><strong>Windows / macOS</strong>:</p> <ol> <li> <p>Install <a href="https://www.docker.com/products/docker-desktop" class="external-link">Docker Desktop for Windows/Mac</a>. (Docker Toolbox is not currently supported.)</p> </li> <li> <p>Right-click on the Docker taskbar item and update <strong>Settings / Preferences &gt; Shared Drives / File Sharing</strong> with any source code locations you want to open in a container. If you run into trouble, see <a href="/docs/remote/troubleshooting#_docker-desktop-for-windows-tips">Docker Desktop for Windows tips</a> on avoiding common problems with sharing.</p> </li> <li> <p><strong>Windows</strong>: Consider adding a <code>.gitattributes</code> file to your repos or disabling automatic line ending conversion for Git on the <strong>Windows side</strong> by using a command prompt to run: <code>git config --global core.autocrlf input</code> If left enabled, this setting can cause files that you have not edited to appear modified due to line ending differences. See <a href="/docs/remote/troubleshooting#_resolving-git-line-ending-issues-in-containers-resulting-in-many-modified-files">tips and tricks</a> for details.</p> </li> </ol> <p><strong>Linux</strong>:</p> </li> <li> <p>Install <a href="https://code.visualstudio.com/">Visual Studio Code</a> or <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>.</p> </li> <li> <p>Install the <a href="https://aka.ms/vscode-remote/download/extension" class="external-link">Remote Development</a> extension pack.</p> </li> </ol> <p>The Remote - Containers extension supports two primary operating models:</p> <p>We will cover how to use a container as your full-time development environment first.</p> <h3 id="_quick-start-try-a-dev-container">Quick start: Try a dev container</h3> <p>Let&apos;s start out by using a sample project to try things out.</p> <ol> <li> <p>Clone one of the sample repositories below.</p> <pre><code class="bash">git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-node git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-python git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-go git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-java git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-dotnetcore git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-php git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-rust git <span class="hljs-built_in">clone</span> https://github.com/Microsoft/vscode-remote-try-cpp
</code></pre> </li> <li> <p>Start VS Code and click on the quick actions Status Bar item in the lower left corner of the window.</p> <p><img src="/assets/docs/remote/common/remote-dev-status-bar.png" alt="Quick actions status bar item"></p> </li> <li> <p>Select <strong>Remote-Containers: Open Folder in Container...</strong> from the command list that appears, and open the root folder of the project you just cloned.</p> </li> <li> <p>The window will then reload, but since the container does not exist yet, VS Code will create one. This may take some time, and a progress notification will provide status updates. Fortunately, this step isn&apos;t necessary the next time you open the folder since the container will already exist.</p> <p><img src="/assets/docs/remote/containers/dev-container-progress.png" alt="Dev Container Progress Notification"></p> </li> <li> <p>After the container is built, VS Code automatically connects to it and maps the project folder from your local file system into the container. Check out the <strong>Things to try</strong> section of <code>README.md</code> in the repository you cloned to see what to do next.</p> </li> </ol> <h3 id="_quick-start-open-an-existing-folder-in-a-container">Quick start: Open an existing folder in a container</h3> <p>Next we will cover how to set up a dev container for an existing project to use as your full-time development environment.</p> <p>The steps are similar to those above:</p> <ol> <li> <p>Start VS Code, run the <strong>Remote-Containers: Open Folder in Container...</strong> command from the Command Palette, and select the project folder you&apos;d like to set up the container for.</p> <blockquote> <p><strong>Note:</strong> If you want to edit the container&apos;s contents or settings before opening the folder, you can run <strong>Remote-Containers: Add Development Container Configuration Files...</strong> instead.</p> </blockquote> </li> <li> <p>Now pick a starting point for your dev container. You can either select a base <strong>dev container definition</strong> from a filterable list, or use an existing <a href="https://docs.docker.com/engine/reference/builder/" class="external-link">Dockerfile</a> or <a href="https://docs.docker.com/compose/compose-file/#compose-file-structure-and-examples" class="external-link">Docker Compose file</a> if one exists in the folder you selected.</p> <blockquote> <p><strong>Note:</strong> See <a href="#_system-requirements">System Requirements</a> for information on supported containers. When using experimental support for Alpine Linux in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>, note that some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension.</p> </blockquote> <p><img src="/assets/docs/remote/containers/select-dev-container-def.png" alt="Dev Container Progress Notification"></p> <p>Note the dev container definitions displayed come from the <a href="https://aka.ms/vscode-dev-containers" class="external-link">vscode-dev-containers repository</a>. You can browse the <code>containers</code> folder of that repository to see the contents of each definition.</p> </li> <li> <p>After picking the starting point for your container, VS Code will add the dev container configuration files to your project (<code>.devcontainer/devcontainer.json</code>). The VS Code window will reload and start building the dev container. A progress notification provides you status updates. Note that you only have to build a dev container the first time you open it; opening the folder after the first successful build will be much quicker.</p> <p><img src="/assets/docs/remote/containers/dev-container-progress.png" alt="Dev Container Progress Notification"></p> </li> <li> <p>After building completes, VS Code will automatically connect to the container. You can now interact with your project in VS Code just as you could when opening the project locally. From now on, when you open the project folder, VS Code will automatically pick up and reuse your dev container configuration.</p> </li> </ol> <h2 id="_creating-a-devcontainerjson-file">Creating a devcontainer.json file</h2> <p>VS Code&apos;s container configuration is stored in a <a href="#_devcontainerjson-reference"><code>devcontainer.json</code></a> file. This file is similar to the <code>launch.json</code> file for debugging configurations, but is used for launching (or attaching to) your development container instead. You can also specify any extensions to install once the container is running or post-create commands to prepare the environment. The dev container configuration is either located under <code>.devcontainer/devcontainer.json</code> or stored as a <code>.devcontainer.json</code> file (note the dot-prefix) in the root of your project.</p> <p>The <strong>Remote-Containers: Add Development Container Configuration Files...</strong> command adds the file to your project, where you can further customize for your needs.</p> <p>For example, through a <code>devcontainer.json</code> file, you can:</p> <p>The <a href="https://aka.ms/vscode-dev-containers" class="external-link">vscode-dev-containers repository</a> has examples of <code>devcontainer.json</code> for different scenarios. You can <a href="#_indepth-setting-up-a-folder-to-run-in-a-container">alter your configuration</a> to:</p> <p>Note that, if <code>devcontainer.json</code>&apos;s supported workflows supports do not meet your needs, you can also <a href="#_attaching-to-running-containers">attach to an already running container instead</a>.</p> <h3 id="_configuration-edit-loop">Configuration edit loop</h3> <p>Editing your container configuration is easy. Since rebuilding a container will &quot;reset&quot; the container to its starting contents (with the exception of your local source code), VS Code does not automatically rebuild if you edit a container configuration file (<code>devcontainer.json</code>, <code>Dockerfile</code>, <code>docker-compose.yml</code>). Instead, there are several commands that can be used to make editing your configuration easier.</p> <p>Here is the typical edit loop using these commands:</p> <ol> <li>Start with <span class="keybinding">F1</span> &gt; <strong>Remote-Containers: Add Development Container Configuration Files...</strong></li> <li>Edit the contents of the <code>.devcontainer</code> folder as required.</li> <li>Try it with <span class="keybinding">F1</span> &gt; <strong>Remote-Containers: Reopen Folder in Container</strong>.</li> <li>On failure: <ol> <li><span class="keybinding">F1</span> &gt; <strong>Remote-Containers: Reopen Folder Locally</strong>, which will open a new local window.</li> <li>In this local window: Edit the contents of the <code>.devcontainer</code> folder as required.</li> <li>Try it again: Go back to the container window, <span class="keybinding">F1</span> &gt; <strong>Developer: Reload Window</strong>.</li> <li>Repeat as needed.</li> </ol> </li> <li>If the build was successful, but you want to make more changes: <ol> <li>Edit the contents of the <code>.devcontainer</code> folder as required when connected to the container.</li> <li><span class="keybinding">F1</span> &gt; <strong>Remote-Containers: Rebuild Container</strong>.</li> <li>On failure: Follow the same workflow above.</li> </ol> </li> </ol> <h3 id="_adding-configuration-files-to-public-or-private-repositories">Adding configuration files to public or private repositories</h3> <p>You can easily share a customized dev container definition for your project by adding <code>devcontainer.json</code> files to source control. By including these files in your repository, anyone that opens a local copy of your repo in VS Code will be automatically prompted to reopen the folder in a container, provided they have the Remote - Containers extension installed.</p> <p><img src="/assets/docs/remote/containers/dev-container-reopen-prompt.png" alt="Dev config file reopen notification"></p> <p>Beyond the advantages of having your team use a consistent environment and tool-chain, this also makes it easier for new contributors or team members to be productive quickly. First-time contributors will require less guidance and hit fewer issues related to environment setup.</p> <h2 id="_attaching-to-running-containers">Attaching to running containers</h2> <p>While using VS Code to spin up a new container can be useful in many situations, it may not match your workflow and you may prefer to &quot;attach&quot; VS Code to an already running container.</p> <p>While <code>devcontainer.json</code> is not used in this case, you are able to use the same capabilities provided by the extension once connected. You can also use <code>settings.json</code> to <a href="#_%22Always-installed%22-extensions">specify extensions that should always be installed</a> when you attach to a container to speed up setup.</p> <blockquote> <p><strong>Note:</strong> See <a href="#_system-requirements">System Requirements</a> for information about supported container. When using experimental support for Alpine Linux in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>, note that some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension.</p> </blockquote> <p>Once you have a container up and running, you can connect by either:</p> <h3 id="_option-1-use-the-attach-to-running-container-command">Option 1: Use the Attach to Running Container command</h3> <p>Run <strong>Remote-Containers: Attach to Running Container...</strong> command from the Command Palette (<span class="keybinding">F1</span>) and selecting a container.</p> <h3 id="_option-2-use-the-docker-extension">Option 2: Use the Docker extension</h3> <ol> <li> <p>Install the <a href="https://marketplace.visualstudio.com/items?itemName=PeterJausovec.vscode-docker" class="external-link">Docker extension</a> from the Extensions view (search for &quot;docker&quot;) if it is not already installed.</p> </li> <li> <p>Go to the Docker view and expand the <strong>Containers</strong> node in the explorer.</p> </li> <li> <p>Right-click and select <strong>Attach Visual Studio Code</strong>.</p> <p><img src="/assets/docs/remote/containers/docker-attach.png" alt="Docker Explorer screenshot"></p> </li> </ol> <p>After a brief moment, a new window will appear and you&apos;ll be connected to the running container.</p> <h2 id="_managing-containers">Managing containers</h2> <p>By default, the Remote - Containers extension automatically starts the containers mentioned in the <code>devcontainer.json</code> when you open the folder. When you close VS Code, the extension automatically shuts down the containers you&apos;ve connected to. You can change this behavior by adding <code>&quot;shutdownAction&quot;: &quot;none&quot;</code> to the <code>devcontainer.json</code>.</p> <p>You can also manually manage your containers using one of the following options:</p> <h3 id="_option-1-use-the-docker-extension">Option 1: Use the Docker extension</h3> <ol> <li> <p>Install the <a href="https://marketplace.visualstudio.com/items?itemName=PeterJausovec.vscode-docker" class="external-link">Docker extension</a> from the Extensions view, if not already installed.</p> <blockquote> <p><strong>Note:</strong> Some Docker commands invoked from the Docker extension can fail when invoked from a VS Code window opened in a container. Most containers do not have the Docker command line installed. Therefore commands invoked from the Docker extension that rely on the Docker command line, for example <strong>Docker: Show Logs</strong>, fail. If you need to execute these commands, open a new local VS Code window and use the Docker extension from this window or <a href="https://aka.ms/vscode-remote/samples/docker-in-docker" class="external-link">set up Docker inside your container</a>.</p> </blockquote> </li> <li> <p>You can then go to the Docker view and expand the <strong>Containers</strong> node to see what containers are running. Right-click and select <strong>Stop Container</strong> to shut one down.</p> <p><img src="/assets/docs/remote/containers/docker-stop.png" alt="Docker Explorer screenshot"></p> </li> </ol> <h3 id="_option-2-use-the-docker-cli">Option 2: Use the Docker CLI</h3> <ol> <li>Open a <strong>local</strong> terminal/command prompt (or use a local window in VS Code).</li> <li>Type <code>docker ps</code> to see running containers. Use <code>docker ps -a</code> to also see any stopped containers.</li> <li>Type <code>docker stop &lt;Container ID&gt;</code> from this list to stop a container.</li> <li>If you would like to delete a container, type <code>docker rm &lt;Container ID&gt;</code> to remove it.</li> </ol> <h3 id="_option-3-use-docker-compose">Option 3: Use Docker Compose</h3> <ol> <li>Open a <strong>local</strong> terminal/command prompt (or use a local window in VS Code).</li> <li>Go to the directory with your <code>docker-compose.yml</code> file.</li> <li>Type <code>docker-compose top</code> to see running processes.</li> <li>Type <code>docker-compose stop</code> to stop the containers. If you have more than one Docker Compose file, you can specify additional Docker Compose files with the <code>-f</code> argument. . If you would like to delete the containers, type <code>docker-compose down</code> to both stop and delete them.</li> </ol> <p>If you want to clean out images or mass-delete containers, <a href="/docs/remote/troubleshooting#_cleaning-out-unused-containers-and-images">see here</a> for different options.</p> <h2 id="_managing-extensions">Managing extensions</h2> <p>VS Code runs extensions in one of two places: locally on the UI / client side, or in the container. While extensions that affect the VS Code UI, like themes and snippets, are installed locally, most extensions will reside inside a particular container. This allows you to install only the extensions you need for a given task in a container and seamlessly switch your entire tool-chain just by connecting to a new container.</p> <p>If you install an extension from the Extensions view, it will automatically be installed in the correct location. You can tell where an extension is installed based on the category grouping. There will be a <strong>Local - Installed</strong> category and also one for your container.</p> <p><img src="/assets/docs/remote/containers/containers-installed-remote-indicator.png" alt="Workspace Extension Category"></p> <p><img src="/assets/docs/remote/common/local-installed-extensions.png" alt="Local Extension Category"></p> <blockquote> <p><strong>Note:</strong> If you are an extension author and your extension is not working properly or installs in the wrong place, see <a href="/api/advanced-topics/remote-extensions">Supporting Remote Development</a> for details.</p> </blockquote> <p>Local extensions that actually need to run remotely will appear <strong>Disabled</strong> in the <strong>Local - Installed</strong> category. You can click the <strong>Install</strong> button to install an extension on your remote host.</p> <p><img src="/assets/docs/remote/containers/containers-disabled-extensions.png" alt="Disabled Extensions w/Install Button"></p> <h3 id="_always-installed-extensions">&quot;Always installed&quot; extensions</h3> <p>If there are extensions that you would like always installed in any container, you can update the <code>remote.containers.defaultExtensions</code> User <a href="/docs/getstarted/settings">setting</a>. For example, if you wanted to install the <a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens" class="external-link">GitLens</a> and <a href="https://marketplace.visualstudio.com/items?itemName=mutantdino.resourcemonitor" class="external-link">Resource Monitor</a> extensions, you would specify their extension IDs as follows:</p> <pre><code class="json"><span class="hljs-string">&quot;remote.containers.defaultExtensions&quot;</span>: [ <span class="hljs-string">&quot;eamodio.gitlens&quot;</span>, <span class="hljs-string">&quot;mutantdino.resourcemonitor&quot;</span>
]
</code></pre> <h3 id="_advanced-forcing-an-extension-to-run-locally-remotely">Advanced: Forcing an extension to run locally / remotely</h3> <p>Extensions are typically designed and tested to either run locally or remotely, not both. However, if an extension supports it, you can force it to run in a particular location in your <code>settings.json</code> file.</p> <p>For example, the setting below will force the Docker and Debugger for Chrome extensions to run remotely instead of their local defaults:</p> <pre><code class="json"><span class="hljs-string">&quot;remote.extensionKind&quot;</span>: { &quot;<span class="hljs-attribute">msjsdiag.debugger-for-chrome</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;workspace&quot;</span></span>, &quot;<span class="hljs-attribute">peterjausovec.vscode-docker</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;workspace&quot;</span> </span>}
</code></pre> <p>A value of <code>&quot;ui&quot;</code> instead of <code>&quot;workspace&quot;</code> will force the extension to run on the local UI/client side instead. Typically, this should only be used for testing unless otherwise noted in the extension&apos;s documentation since it <strong>can break extensions</strong>. See the article on <a href="/api/advanced-topics/remote-extensions">Supporting Remote Development</a> for details.</p> <h2 id="_forwarding-a-port">Forwarding a port</h2> <p>Containers are isolated environments, so if you want to access a server, service, or other resource inside your container, you will need to &quot;forward&quot; the port to your host. You can either configure your container to always expose these ports or just forward them temporarily.</p> <h3 id="_temporarily-forwarding-a-port">Temporarily forwarding a port</h3> <p>Sometimes when developing you may need to access a port in your container that you didn&apos;t add to <code>devcontainer.json</code>, your Dockerfile, or Docker Compose file. If you want to <strong>temporarily forward</strong> a new port for the duration of the session, run the <strong>Remote-Containers: Forward Port from Container...</strong> command from the Command Palette (<span class="keybinding">F1</span>).</p> <p>After selecting a port, a notification will tell you the localhost port you should use to access the port in the container. For example, if you forwarded an HTTP server listening on port 3000, the notification may tell you that it was mapped to port 4123 on localhost. You can then connect to this remote HTTP server using <code>http://localhost:4123</code>.</p> <h3 id="_always-forwarding-exposing-publishing-a-port">Always forwarding / exposing / publishing a port</h3> <p>If you have ports you always want use from your host, you can set them up so they are always available. Specifically you can:</p> <ol> <li> <p><strong>Use the appPort property:</strong> If you reference an image or Dockerfile in <code>devcontainer.json</code>, you can use the <code>appPort</code> property to publish ports to the host.</p> <pre><code class="json"><span class="hljs-string">&quot;appPort&quot;</span>: [ <span class="hljs-number">3000</span>, <span class="hljs-string">&quot;8921:5000&quot;</span> ]
</code></pre> </li> <li> <p><strong>Use the Docker Compose ports mapping:</strong> The <a href="https://docs.docker.com/compose/compose-file#ports" class="external-link"><code>ports</code> mapping</a> can easily be added your <code>docker-compose.yml</code> file to publish additional ports.</p> <pre><code class="yaml">ports:
- &quot;3000&quot;
- &quot;8921:5000&quot;
</code></pre> </li> </ol> <p>In each case, you&apos;ll need to rebuild your container for the setting to take effect. You can do this by running the <strong>Remote-Containers: Rebuild Container</strong> command in the Command Palette (<span class="keybinding">F1</span>) when you are connected to the container.</p> <h2 id="_opening-a-terminal">Opening a terminal</h2> <p>Opening a terminal in a container from VS Code is simple. Once you&apos;ve opened a folder in a container, <strong>any terminal window</strong> you open in VS Code (<strong>Terminal &gt; New Terminal</strong>) will automatically run in the container rather than locally.</p> <p>You can also use the <code>code</code> command line from this same terminal window to perform a number of operations such as opening a new file or folder in the container. Type <code>code --help</code> to learn what options are available from the command line.</p> <p><img src="/assets/docs/remote/containers/code-command-in-terminal.png" alt="Using the code CLI"></p> <h2 id="_debugging-in-a-container">Debugging in a container</h2> <p>Once you&apos;ve opened a folder in a container, you can use VS Code&apos;s debugger in the same way you would when running the application locally. For example, if you select a launch configuration in <code>launch.json</code> and start debugging (<span class="keybinding">F5</span>), the application will start on the remote host and attach the debugger to it.</p> <p>See the <a href="/docs/editor/debugging">debugging</a> documentation for details on configuring VS Code&apos;s debugging features in <code>.vscode/launch.json</code>.</p> <h2 id="_container-specific-settings">Container specific settings</h2> <p>VS Code&apos;s local user settings are also reused when you are connected to a dev container. While this keeps your user experience consistent, you may want to vary some of these settings between your local machine and each container. Fortunately, once you have connected to a container, you can also set container-specific settings by running the <strong>Preferences: Open Remote Settings</strong> command from the Command Palette (<span class="keybinding">F1</span>) or by selecting the <strong>Remote</strong> tab in the settings editor. These will override any local settings you have in place whenever you connect to the container.</p> <h3 id="_default-container-specific-settings">Default container specific settings</h3> <p>You can include defaults for container specific settings in <code>devcontainer.json</code> using the <code>settings</code> property. These values will be automatically placed in the container specific settings file inside the container once it is created.</p> <p>For example, adding this to <code>.devcontainer/devcontainer.json</code> will set the Java home path:</p> <pre><code class="json"><span class="hljs-string">&quot;settings&quot;</span>: { &quot;<span class="hljs-attribute">java.home</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;/docker-java-home&quot;</span> </span>}
</code></pre> <p>Since this just establishes the default, you are still able to change the settings as needed once the container is created.</p> <h2 id="_sharing-git-credentials-with-your-container">Sharing Git credentials with your container</h2> <h3 id="_using-a-credential-helper">Using a credential helper</h3> <p>To streamline setup, your local <code>.gitconfig</code> file is automatically copied into the container. In addition, the small server installed in the container will automatically forward any git credential helper commands to your local operating system.</p> <p>Therefore, if you use HTTPS to clone your repositories and have a <a href="https://help.github.com/en/articles/caching-your-github-password-in-git" class="external-link">credential helper configured</a> in your local OS, no further setup is required. Credentials you&apos;ve entered locally will be reused in the container and vice versa.</p> <h3 id="_using-ssh-keys">Using SSH keys</h3> <p>However, in some cases you may be cloning your repository using SSH keys instead of a credential helper. SSH keys are not automatically mounted into the container since they can be used for things like accessing test or production servers and can pose a security risk.</p> <p>However, it is easy enough to mount one or more keys into the container.</p> <ul> <li> <p>When an <strong>image</strong> or <strong>Dockerfile</strong> is referenced in <code>devcontainer.json</code>, add the following to the <code>runArgs</code> property in this same file:</p> <pre><code class="json"><span class="hljs-string">&quot;runArgs&quot;</span>: [ <span class="hljs-string">&quot;-v&quot;</span>, <span class="hljs-string">&quot;${env:HOME}${env:USERPROFILE}/.ssh:/root/.ssh&quot;</span> ]
</code></pre> </li> <li> <p>When a <strong>Docker Compose</strong> file is referenced, update (<a href="/docs/remote/containers/containers#_extending-your-docker-compose-file-for-development">or extend</a>) your <code>docker-compose.yml</code> with the following for the appropriate service:</p> <pre><code class="yml">version: &apos;3&apos;
services:
  your-service-name-here:
    # ...
    volumes:
      - ~/.ssh:~/.ssh

</code></pre> </li> </ul> <h2 id="_indepth-setting-up-a-folder-to-run-in-a-container">In-depth: Setting up a folder to run in a container</h2> <p>There are a few different ways VS Code Remote - Containers can be used to develop an application inside a fully containerized environment. In general, there are two primary scenarios that drive interest in this development style:</p> <ul> <li> <p><strong>Stand-Alone Dev Sandboxes:</strong> You may not be deploying your application into a containerized environment but still want to isolate your build and runtime environment from your local OS, speed up setup, or develop in an environment that is more representative of production. For example, you may be running code on your local macOS or Windows machine that will ultimately be deployed to a Linux VM or server, have different toolchain requirements for multiple projects, or want to be able to use tools/packages that could impact your local machine in an unexpected or undesired way. You can reference a container <a href="#_using-an-image-or-dockerfile">image or a Dockerfile</a> for this purpose.</p> </li> <li> <p><strong>Container Deployed Applications</strong>: You deploy your application into one or more containers and would like to work locally in the containerized environment. VS Code currently supports working with container-based applications defined in a number of ways:</p> <ul> <li> <p><a href="#_using-an-image-or-dockerfile">Dockerfile</a>: You are working on a single container / service that is described using a single Dockerfile.</p> </li> <li> <p><a href="#_using-docker-compose">Docker Compose</a>: You are working with multiple orchestrated services that are described using a <code>docker-compose.yml</code> file.</p> </li> <li> <p>In each case, you may also need to <a href="/docs/remote/containers-advanced#_using-docker-or-kubernetes-from-a-container">build container images and deploy to Docker or Kubernetes</a> from inside your container.</p> </li> <li> <p><a href="#_attaching-to-running-containers">Attach Only</a>: While not backed by <code>devcontainer.json</code>, you can attach to an already running container if none of the workflows described in this section meet your needs.</p> </li> </ul> </li> </ul> <p>This section will walk you through configuring your project for each of these situations. The <a href="https://aka.ms/vscode-dev-containers" class="external-link">vscode-dev-containers GitHub repository</a> also contains dev container definitions to get you up and running quickly.</p> <h3 id="_using-an-image-or-dockerfile">Using an image or Dockerfile</h3> <p>You can configure VS Code to reuse an existing container image from a source like <a href="https://hub.docker.com" class="external-link">DockerHub</a> or <a href="https://azure.microsoft.com/services/container-registry/" class="external-link">Azure Container Registry</a> for your dev container using a <code>.devcontainer/devcontainer.json</code> (or <code>.devcontainer.json</code>) config file in your project. If you are not able to find an image that meets your needs, have a single container-based project, or just want to automate the installation of a large amount of additional software, you can use a <a href="https://docs.docker.com/engine/reference/builder/" class="external-link">Dockerfile</a> to generate the image instead.</p> <p>To get started quickly, open the folder with he project you want to work with in VS Code and run the <strong>Remote-Containers: Add Development Container Configuration Files...</strong> command in the Command Palette (<span class="keybinding">F1</span>). You&apos;ll be asked to either select an existing Dockerfile if one exists, or pick pre-defined dev container definition from <a href="https://github.com/Microsoft/vscode-dev-containers" class="external-link">vscode-dev-containers repository</a> from a filterable list. Most of these will include Dockerfiles but can be adapted to just use an image instead. VS Code will then added the appropriate <code>devcontainer.json</code> file to the folder.</p> <blockquote> <p><strong>Note:</strong> See <a href="#_system-requirements">System Requirements</a> for information on supported containers. When using experimental support for Alpine Linux in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>, note that some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension.</p> </blockquote> <p>The difference between configuring VS Code to use an image or a Dockerfile is just one property in <code>devcontainer.json</code>:</p> <ul> <li> <p><strong>To use an image:</strong> Set the <code>image</code> property. For example, this will use the .NET SDK image, publish port 8090, and install the C# VS Code extension:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">name</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;My Project&quot;</span></span>, &quot;<span class="hljs-attribute">image</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;mcr.microsoft.com/dotnet/core/sdk:latest&quot;</span></span>, &quot;<span class="hljs-attribute">appPort</span>&quot;: <span class="hljs-value"><span class="hljs-number">8090</span></span>, &quot;<span class="hljs-attribute">extensions</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;ms-vscode.csharp&quot;</span> ] </span>}
</code></pre> </li> <li> <p><strong>To use a Dockerfile:</strong> Set the <code>dockerFile</code> property. For example, this will cause VS Code to build the dev container image using the specified <code>Dockerfile</code>, publish port 3000, install the ES Lint extension in the container, and run <code>npm install</code> once it is done:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">name</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;My Node.js App&quot;</span></span>, &quot;<span class="hljs-attribute">dockerFile</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;Dockerfile&quot;</span></span>, &quot;<span class="hljs-attribute">appPort</span>&quot;: <span class="hljs-value"><span class="hljs-number">3000</span></span>, &quot;<span class="hljs-attribute">extensions</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;dbaeumer.vscode-eslint&quot;</span> ]</span>, &quot;<span class="hljs-attribute">postCreateCommand</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;npm install&quot;</span> </span>}
</code></pre> </li> </ul> <p>See the <a href="#_devcontainerjson-reference">devcontainer.json reference</a> for information on other available properties such as the <code>appPort</code>, <code>postCreateCommand</code>, and the <code>extensions</code> list.</p> <p>Once you have added a <code>.devcontainer/devcontainer.json</code> file to your folder, run the <strong>Remote-Containers: Reopen Folder in Container</strong> command (or <strong>Remote-Containers: Open Folder in Container...</strong> if you are not yet in VS Code) from the Command Palette (<span class="keybinding">F1</span>). After the container is created, the <strong>local filesystem is automatically mapped into the container</strong> unless you <a href="/docs/remote/containers-advanced#_changing-the-default-source-code-mount">change this behavior</a> and you can start working with it from VS Code.</p> <p>You can also add additional local mount points to give your container access to other locations using the <code>runArgs</code> property. One place where this can be useful is if you want to mount your local SSH keys into the container.</p> <p>For example:</p> <pre><code class="json"><span class="hljs-string">&quot;runArgs&quot;</span>: [<span class="hljs-string">&quot;-v&quot;</span>, <span class="hljs-string">&quot;${env:HOME}${env:USERPROFILE}/.ssh:/root/.ssh&quot;</span>]
</code></pre> <p>The <code>runArgs</code> property supports the same list of arguments as the <a href="https://docs.docker.com/engine/reference/commandline/run/" class="external-link"><code>docker run</code> command</a> and can be useful for a wide variety of scenarios including <a href="/docs/remote/containers-advanced#_adding-environment-variables">setting environment variables</a>.</p> <p>If your application was built using C++, Go, or Rust, or another language that uses a <strong>ptrace-based debugger</strong>, the <code>runArgs</code> property can also be used to configure needed runtime security and capability settings.</p> <p>For example:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">name</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;My Go App&quot;</span></span>, &quot;<span class="hljs-attribute">dockerFile</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;Dockerfile&quot;</span></span>, &quot;<span class="hljs-attribute">extensions</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;ms-vscode.go&quot;</span> ]</span>, &quot;<span class="hljs-attribute">runArgs</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;--cap-add=SYS_PTRACE&quot;</span>, <span class="hljs-string">&quot;--security-opt&quot;</span>, <span class="hljs-string">&quot;seccomp=unconfined&quot;</span> ] </span>}
</code></pre> <p>While less efficient than a custom Dockerfile, you can also use the <code>postCreateCommand</code> property to <strong>install additional software</strong> that <strong>may not be in your base image</strong> or for cases where you would prefer <strong>not to modify a deployment Dockerfile</strong> you are reusing.</p> <p>For example, here is a <code>devcontainer.json</code> that adds <code>git</code> and the <a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens" class="external-link">Git Lens</a> extension to the base Debian 9 container image:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">image</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;debian:9&quot;</span></span>, &quot;<span class="hljs-attribute">extensions</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;eamodio.gitlens&quot;</span> ]</span>, &quot;<span class="hljs-attribute">postCreateCommand</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;apt-get update &amp;&amp; apt-get install -y git&quot;</span> </span>}
</code></pre> <p>This command is run once your source code is mounted, so you can also use the property to run commands like <code>npm install</code> or to execute a shell script in your source tree.</p> <pre><code class="json"><span class="hljs-string">&quot;postCreateCommand&quot;</span>: <span class="hljs-string">&quot;bash scripts/install-dev-tools.sh&quot;</span>
</code></pre> <p>By default, when VS Code starts a container, it will <strong>override the container&apos;s default command</strong> to be <code>sleep infinity</code>. This is done because the container will stop if the default command fails or simply exits. However, this may not work for certain images. If the image you are using requires the default command be run to work propertly, add the following to your <code>devcontainer.json</code> file.</p> <pre><code class="json"><span class="hljs-string">&quot;overrideCommand&quot;</span>: <span class="hljs-literal">false</span>
</code></pre> <p>Note that, after you create your container for the first time, you will need to run the <strong>Remote-Containers: Rebuild Container</strong> command for updates to <code>devcontainer.json</code> or your Dockerfile to take effect.</p> <h3 id="_installing-additional-software-in-the-sandbox">Installing additional software in the sandbox</h3> <p>Once VS Code is connected to the container, you can open a VS Code terminal and execute any command against the OS inside the container. This allows you to install new command-line utilities and spin up databases or application services from inside the Linux container.</p> <p>Most container images are based on Debian or Ubuntu, where the <code>apt-get</code> command is used to install new packages.</p> <p>For example:</p> <pre><code class="bash">apt-get update 
apt-get install &lt;package&gt;
</code></pre> <p>Documentation for the software you want to install will usually provide specific instructions, but note that you typically do <strong>not need to prefix commands with <code>sudo</code></strong> given you are likely running as root in the container. If you are not already root, read the directions for the image you&apos;ve selected to learn how to install additional software. If you would <strong>prefer not to run as root</strong>, see the <a href="/docs/remote/containers-advanced#_adding-a-nonroot-user-to-your-dev-container">tips and tricks</a> article for how to set up a separate user.</p> <p>However, note that if you <strong>rebuild</strong> the container, you will have to <strong>re-install</strong> anything you&apos;ve installed manually. To avoid this problem, you can simply use the <code>postCreateCommand</code> property or use a custom Dockerfile instead.</p> <h3 id="_using-docker-compose">Using Docker Compose</h3> <p>In some cases, a single container environment isn&apos;t sufficient. Fortunately, VS Code Remote also works with multi-container configurations that are managed by <code>docker-compose.yml</code>.</p> <p>You can either:</p> <ol> <li>Reuse an existing <code>docker-compose.yml</code> unmodified.</li> <li>Make a copy of your exiting <code>docker-compose.yml</code> that you use for development.</li> <li><a href="#_extending-your-docker-compose-file-for-development">Extend your existing Docker Compose configuration</a> for development.</li> <li>Use multiple VS Code windows to <a href="/docs/remote/containers-advanced#_connecting-to-multiple-containers-at-once">work with multiple containers at once</a> that are defined by the same Docker Compose file.</li> <li>Use the command line (for example <code>docker-compose up</code>) and use <code>devcontainer.json</code> to tell VS Code how to attach to the running Docker Compose-defined containers.</li> </ol> <blockquote> <p><strong>Note:</strong> See <a href="#_system-requirements">System Requirements</a> for information on supported containers. When using experimental support for Alpine Linux in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>, note that some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension.</p> </blockquote> <p>VS Code can be configured to <strong>automatically start any needed containers</strong> for a particular service in a Docker Compose file. If you&apos;ve already started the configured containers using the command line, VS Code will <strong>attach to the running service</strong> you&apos;ve specified instead. This gives your multi-container workflow the same quick setup advantages described for the Docker image and Dockerfile flows above.</p> <p>To get started quckly, open the folder with the project you want edit in VS Code and run the <strong>Remote-Containers: Add Development Container Configuration Files...</strong> command in the Command Palette (<span class="keybinding">F1</span>). You&apos;ll be asked to select an existing Docker Compose if one exists. If you do not have an existing Docker Compose file, you can select one of these Docker Compose based dev container defintions from the filterable list that appears: <a href="https://aka.ms/vscode-remote/samples/existing-docker-compose" class="external-link">Existing Docker Compose</a>, <a href="https://aka.ms/vscode-remote/samples/node-mongo" class="external-link">Node.js &amp; MongoDB</a>, <a href="https://aka.ms/vscode-remote/samples/python-postgres" class="external-link">Python &amp; PostgreSQL</a>, or <a href="https://aka.ms/vscode-remote/samples/docker-in-docker-compose" class="external-link">Docker-in-Docker Compose</a>. After you make your selection, VS Code will add the appropriate <code>.devcontainer/devcontainer.json</code> (or <code>.devcontainer.json</code>) file to the folder.</p> <p>To reuse a <code>docker-compose.yml</code> unmodified, you can use the <code>dockerComposeFile</code> and <code>service</code> properties in a <code>.devcontainer/devcontainer.json</code>.</p> <p>For example:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">name</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;[Optional] Your project name here&quot;</span></span>, &quot;<span class="hljs-attribute">dockerComposeFile</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;../docker-compose.yml&quot;</span></span>, &quot;<span class="hljs-attribute">service</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;the-name-of-the-service-you-want-to-work-with-in-vscode&quot;</span></span>, &quot;<span class="hljs-attribute">workspaceFolder</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;/default/workspace/path/in/container/to/open&quot;</span></span>, &quot;<span class="hljs-attribute">shutdownAction</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;stopCompose&quot;</span> </span>}
</code></pre> <p>See the <a href="#_devcontainerjson-reference">devcontainer.json reference</a> for information other available properties such as the <code>workspaceFolder</code> and <code>shutdownAction</code>.</p> <p>Once you have added a <code>.devcontainer/devcontainer.json</code> file to your folder, run the <strong>Remote-Containers: Reopen Folder in Container</strong> command (or <strong>Remote-Containers: Open Folder in Container...</strong> if you are not yet in VS Code) from the Command Palette (<span class="keybinding">F1</span>)</p> <p>If the containers are not already running, VS Code will call <code>docker-compose -f ../docker-compose.yml up</code> in this example. Note that the <code>service</code> property indicates which service in your Docker Compose file VS Code should connect to, not which service should be started. If you started them by hand, VS Code will simply attach to the service you specified.</p> <p>You can also create a development copy of your Docker Compose file. For example, if you had <code>.devcontainer/docker-compose.devcontainer.yml</code>, you would just change the following line in <code>devcontainer.json</code>:</p> <pre><code class="json"><span class="hljs-string">&quot;dockerComposeFile&quot;</span>: <span class="hljs-string">&quot;docker-compose.devcontainer.yml&quot;</span>
</code></pre> <p>However, a better approach is often to avoid making a copy of your Docker Compose file by <strong>extending it with another one</strong>. <a href="#_extending-your-docker-compose-file-for-development">We&apos;ll cover extending a Docker Compose file in the next section</a>.</p> <p>To avoid having the container shut down if the default container command fails or exits, you can modify your Docker Compose file for the service you have specified in <code>devcontainer.json</code> as follows:</p> <pre><code class="yaml"># Overrides default command so things don&apos;t shut down after the process ends.
command: sleep infinity
</code></pre> <p>If you aren&apos;t creating a custom Dockerfile for development, you may want to install additional developer tools such as <code>git</code> inside the service&apos;s container. While less efficient than adding these tools to the container image, you can use the <code>postCreateCommand</code> property for this purpose. For example:</p> <pre><code class="json"><span class="hljs-string">&quot;postCreateCommand&quot;</span>: <span class="hljs-string">&quot;apt-get update &amp;&amp; apt-get install -y git&quot;</span>
</code></pre> <p>This command is run once your source code is mounted, so you can also use the property to run commands like <code>npm install</code> or to execute a shell script in your source tree.</p> <pre><code class="json"><span class="hljs-string">&quot;postCreateCommand&quot;</span>: <span class="hljs-string">&quot;bash scripts/install-dev-tools.sh&quot;</span>
</code></pre> <p>If you use SSH keys for your git repositories instead of a credential manager, you may also want to mount your local <code>.ssh</code> folder so they can be reused. You can do so by modifying your Docker Compose file as follows:</p> <pre><code class="yaml">volumes:
  - ~/.ssh:/root/.ssh
</code></pre> <p>If your application was built using C++, Go, or Rust, or another language that uses a ptrace-based debugger, you will also need to add the following settings to your Docker Compose file:</p> <pre><code class="yaml"># Required for ptrace-based debuggers like C++, Go, and Rust
cap_add:
- SYS_PTRACE
security_opt:
- seccomp:unconfined
</code></pre> <p>Note that, after you create your container for the first time, you will need to run the <strong>Remote-Containers: Rebuild Container</strong> command for updates to <code>devcontainer.json</code>, your Docker Compose files, or related Dockerfiles to take effect.</p> <h3 id="_extending-your-docker-compose-file-for-development">Extending your Docker Compose file for development</h3> <p>Referencing an existing deployment / non-development focused <code>docker-compose.yml</code> has some potential downsides.</p> <p>For example:</p> <ul> <li>Docker Compose will shut down a container if its entry point shuts down. This is problematic for situations where you are debugging and need to restart your app on a repeated basis.</li> <li>You also may not be mapping the local filesystem into the container or exposing ports to other resources like databases you want to access.</li> <li>You may not want to add a <code>.gitconfig</code> mount or the ptrace options <a href="#_using-docker-compose">described above</a> into your existing Docker Compose file.</li> </ul> <p>You can solve these and other issues like them by extending your entire Docker Compose configuration with <a href="https://docs.docker.com/compose/extends/#multiple-compose-files" class="external-link">multiple <code>docker-compose.yml</code> files</a> that override or supplement your primary one.</p> <p>For example, consider this additional <code>.devcontainer/docker-compose.extend.yml</code> file:</p> <pre><code class="yaml">version: &apos;3&apos;
  services:
    your-service-name-here:
      volumes:
        # Mounts the project folder to &apos;/workspace&apos;. The target path inside the container
        # should match what your application expects. In this case, the compose file is
        # in a sub-folder, so we will mount &apos;..&apos;. We&apos;ll then reference this as the
        # workspaceFolder in &apos;.devcontainer/devcontainer.json&apos; so VS Code starts here.
        - ..:/workspace

        # [Optional] If you git clone using SSH keys, mounting them lets you reuse them.
        - ~/.ssh:/root/.ssh

      # [Optional] Required for ptrace-based debuggers like C++, Go, and Rust
      cap_add:
        - SYS_PTRACE
      security_opt:
        - seccomp:unconfined

      # Overrides default command so things don&apos;t shut down after the process ends.
      command: sleep infinity
</code></pre> <p>This same file can provide additional settings, such as port mappings, as needed. To use it, reference your original <code>docker-compose.yml</code> file in addition to <code>.devcontainer/devcontainer.extend.yml</code> in a specific order:</p> <pre><code class="json">{ &quot;<span class="hljs-attribute">name</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;[Optional] Your project name here&quot;</span></span>, // The order of the files is important since later files override previous ones &quot;<span class="hljs-attribute">dockerComposeFile</span>&quot;: <span class="hljs-value">[ <span class="hljs-string">&quot;../docker-compose.yml&quot;</span>, <span class="hljs-string">&quot;docker-compose.extend.yml&quot;</span> ]</span>, &quot;<span class="hljs-attribute">service</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;your-service-name-here&quot;</span></span>, &quot;<span class="hljs-attribute">workspaceFolder</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;/workspace&quot;</span></span>, &quot;<span class="hljs-attribute">shutdownAction</span>&quot;: <span class="hljs-value"><span class="hljs-string">&quot;stopCompose&quot;</span> </span>}
</code></pre> <p>VS Code will then <strong>automatically use both files</strong> when starting up any containers. You can also start them yourself from the command line as follows:</p> <pre><code class="bash">docker-compose <span class="hljs-operator">-f</span> docker-compose.yml <span class="hljs-operator">-f</span> .devcontainer/docker-compose.extend.yml up
</code></pre> <p>While the <code>postCreateCommand</code> property allows you to install additional tools inside your container, in some cases you may want to have a specific Dockerfile for development. You can also use this same approach to reference a custom <code>Dockerfile</code> specifically for development without modifying your existing Docker Compose file. For example, you can update <code>.devcontainer/devcontainer.extend.yaml</code> as follows:</p> <pre><code class="yaml">version: &apos;3&apos;
  services:
    your-service-name-here:
       build:
         context: .
         # Location is relative to folder containing this compose file
         dockerfile: Dockerfile
       volumes:
         - ..:/workspace
         - ~/.ssh:/root/.ssh
       command: sleep infinity
</code></pre> <h3 id="_docker-compose-dev-container-definitions">Docker Compose dev container definitions</h3> <p>The following are dev container definitions that use Docker Compose:</p> <ul> <li> <p><a href="https://aka.ms/vscode-remote/samples/existing-docker-compose" class="external-link">Existing Docker Compose</a> - Includes a set of files that you can drop into an existing project that will reuse a <code>docker-compose.yml</code> file in the root of your project.</p> </li> <li> <p><a href="https://aka.ms/vscode-remote/samples/node-mongo" class="external-link">Node.js &amp; MongoDB</a> - A Node.js container that connects to a Mongo DB in a different container.</p> </li> <li> <p><a href="https://aka.ms/vscode-remote/samples/python-postgres" class="external-link">Python &amp; PostgreSQL</a> - A Python container that connects to PostGreSQL in a different container.</p> </li> <li> <p><a href="https://aka.ms/vscode-remote/samples/docker-in-docker-compose" class="external-link">Docker-in-Docker Compose</a> - Includes the Docker CLI and illustrates how you can use it to access your local Docker install from inside a dev container by volume mounting the Docker Unix socket.</p> </li> </ul> <h2 id="_advanced-container-configuration">Advanced container configuration</h2> <p>See the <a href="/docs/remote/containers-advanced">Advanced Container Configuration</a> article for information on the following topics:</p> <h2 id="_devcontainerjson-reference">devcontainer.json reference</h2> <table class="table table-striped"> <thead> <tr> <th>Property</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>Dockerfile or image</strong></td> <td></td> <td></td> </tr> <tr> <td><code>image</code></td> <td>string</td> <td><strong>Required</strong> when <a href="#_using-an-image-or-dockerfile">using an image</a>. The name of an image in a container registry (<a href="https://hub.docker.com" class="external-link">DockerHub</a>, <a href="https://azure.microsoft.com/services/container-registry/" class="external-link">Azure Container Registry</a>) that VS Code should use to create the dev container.</td> </tr> <tr> <td><code>dockerFile</code></td> <td>string</td> <td><strong>Required</strong> when <a href="#_using-an-image-or-dockerfile">using a Dockerfile</a>. The location of a <a href="https://docs.docker.com/engine/reference/builder/" class="external-link">Dockerfile</a> that defines the contents of the container. The path is relative to the <code>devcontainer.json</code> file. You can find a number of sample Dockerfiles for different runtimes <a href="https://github.com/Microsoft/vscode-dev-containers/tree/master/containers" class="external-link">in this repository</a>.</td> </tr> <tr> <td><code>context</code></td> <td>string</td> <td>Path that the Docker build should be run from relative to <code>devcontainer.json</code>. For example, a value of <code>&quot;..&quot;</code> would allow you to reference content in sibling directories. Defaults to <code>&quot;.&quot;</code>.</td> </tr> <tr> <td><code>appPort</code></td> <td>integer, string, or array</td> <td>A port or array of ports that should be made available locally when the container is running. Defaults to <code>[]</code>.</td> </tr> <tr> <td><code>workspaceMount</code></td> <td>string</td> <td>Overrides the default local mount point for the workspace. Supports the same values as the <a href="https://docs.docker.com/engine/reference/commandline/run/#add-bind-mounts-or-volumes-using-the---mount-flag" class="external-link">Docker CLI <code>--mount</code> flag</a>. Primarily useful for <a href="/docs/remote/containers-advanced#_using-devcontainerjson-to-work-with-a-remote-dev-container">configuring remote containers</a>.</td> </tr> <tr> <td><code>workspaceFolder</code></td> <td>string</td> <td>Sets the default path that VS Code should open when connecting to the container. Typically used in conjunction with <code>workspaceMount</code>. Defaults to the automatic source code mount location.</td> </tr> <tr> <td><code>runArgs</code></td> <td>array</td> <td>An array of <a href="https://docs.docker.com/engine/reference/commandline/run/" class="external-link">Docker CLI arguments</a> that should be used when running the container. Defaults to <code>[]</code>. A run argument can refer to environment variables using the following format <code>${env:HOME}</code></td> </tr> <tr> <td><code>overrideCommand</code></td> <td>boolean</td> <td>Tells VS Code whether it should run <code>sleep infinity</code> when starting the container instead of the container&apos;s default command. Defaults to <code>true</code> since the container can shut down if the default command fails. Set to <code>false</code> if the default command must run for the container to funciton properly.</td> </tr> <tr> <td><code>shutdownAction</code></td> <td>enum: <code>none</code>, <code>stopContainer</code></td> <td>Indicates whether VS Code should stop the container when the VS Code window is closed / shut down. Defaults to <code>stopContainer</code>.</td> </tr> <tr> <td><strong>Docker Compose</strong></td> <td></td> <td></td> </tr> <tr> <td><code>dockerComposeFile</code></td> <td>string or array</td> <td><strong>Required.</strong> Path or an ordered list of paths to Docker Compose files relative to the <code>devcontainer.json</code> file.</td> </tr> <tr> <td><code>service</code></td> <td>string</td> <td><strong>Required.</strong> The name of the service VS Code should connect to once running.</td> </tr> <tr> <td><code>workspaceFolder</code></td> <td>string</td> <td>Sets the default path that VS Code should open when connecting to the container (which is often the path to a volume mount where the source code can be found in the container). Defaults to <code>&quot;/&quot;</code>.</td> </tr> <tr> <td><code>shutdownAction</code></td> <td>enum: <code>none</code>, <code>stopCompose</code></td> <td>Indicates whether VS Code should stop the containers when the VS Code window is closed / shut down. Defaults to <code>stopCompose</code>.</td> </tr> <tr> <td><strong>General</strong></td> <td></td> <td></td> </tr> <tr> <td><code>name</code></td> <td>string</td> <td>A display name for the container.</td> </tr> <tr> <td><code>extensions</code></td> <td>array</td> <td>An array of extension IDs that specify the extensions that should be installed inside the container when it is created. Defaults to <code>[]</code>.</td> </tr> <tr> <td><code>settings</code></td> <td>object</td> <td>Adds default <code>settings.json</code> values into a container/machine specific settings file.</td> </tr> <tr> <td><code>postCreateCommand</code></td> <td>string or array</td> <td>A command string or list of command arguments to run after the container is created. Use <code>&amp;&amp;</code> in a string to execute multiple commands. For example, <code>&quot;yarn install&quot;</code>, <code>[&quot;yarn&quot;, &quot;install&quot;]</code>, or <code>&quot;apt-get update &amp;&amp; apt-get install -y git&quot;</code>. It fires after your source code has been mounted, so you can also run shell scripts from your source tree. For example: <code>bash scripts/install-dev-tools.sh</code>. Defaults to none.</td> </tr> <tr> <td><code>devPort</code></td> <td>integer</td> <td>Allows you to force a specific port that the VS Code Server should use in the container. Defaults to a random, available port.</td> </tr> </tbody> </table> <h2 id="_known-limitations">Known limitations</h2> <h3 id="_remote-containers-limitations">Remote - Containers limitations</h3> <ul> <li>Windows container images are <strong>not</strong> yet supported.</li> <li>Experimental Alpine container support is available in <a href="https://code.visualstudio.com/insiders/">VS Code - Insiders</a> only.</li> <li>Using a remote Docker Host is possible, but requires <a href="/docs/remote/containers-advanced#_/docs/remote/containers-advanced#_developing-inside-a-container-on-a-remote-docker-host">additional setup steps</a>.</li> <li>All roots/folders in a multi-root workspace will be opened in the same container, regardless of whether there are configuration files at lower levels.</li> <li>The unofficial Ubuntu Docker <strong>snap</strong> package for Linux is <strong>not</strong> supported. Follow the <a href="https://docs.docker.com/install/#supported-platforms" class="external-link">official Docker install instructions for your distribution</a>.</li> <li>Docker Toolbox on Windows is not supported.</li> <li>Docker variants or alternate containerization tool kits like <a href="https://podman.io" class="external-link">podman.io</a> are not supported.</li> <li>If you clone a Git repository using SSH and your SSH key has a passphrase, VS Code&apos;s pull and sync features may hang when running remotely. Either use an SSH key without a passphrase, clone using HTTPS, or run <code>git push</code> from the command line to work around the issue.</li> <li>Local proxy settings are not reused inside the container, which can prevent extensions from working unless the appropriate proxy information is configured (for example global <code>HTTP_PROXY</code> or <code>HTTPS_PROXY</code> environment variables with the appropriate proxy information).</li> </ul> <p>See <a href="https://aka.ms/vscode-remote/containers/issues" class="external-link">here for a list of active issues</a> related to Containers.</p> <h3 id="_docker-limitations">Docker limitations</h3> <ul> <li> <p>First time installs of Docker Desktop for Windows will require an additional &quot;sharing&quot; step to give your container access to local source code. However, this step may not work with certain AAD (email based) identities. See <a href="/docs/remote/troubleshooting#_docker-desktop-for-windows-tips">Docker Desktop for Windows tips</a> and <a href="/docs/remote/troubleshooting#_enabling-file-sharing-in-docker-desktop">Enabling file sharing in Docker Desktop</a> for details and workarounds.</p> </li> <li> <p>You may see errors if you sign into Docker with your email address instead of your Docker ID. This is a known issue and can be resolved by signing in with your Docker ID instead. See Docker issue <a href="https://github.com/docker/hub-feedback/issues/935#issuecomment-300361781" class="external-link">#935</a> for details.</p> </li> <li> <p>If you see high CPU spikes for <code>com.docker.hyperkit</code> on macOS, this may be due to a <a href="https://github.com/docker/for-mac/issues/1759" class="external-link">known issue with Docker for Mac</a>. See the Docker issue for details.</p> </li> <li> <p>If you see either of these messages building a Dockerfile, you may be hitting a known Docker issue with Debian 8 (Jessie):</p> <pre><code class="text">W: Failed to fetch http://deb.debian.org/debian/dists/jessie-updates/InRelease
E: Some index files failed to download. They have been ignored, or old ones used instead
</code></pre> <p>See <a href="/docs/remote/troubleshooting#_resolving-dockerfile-build-failures-for-images-using-debian-8">here for a workaround</a>.</p> </li> </ul> <p>See the Docker troubleshooting guide for <a href="https://docs.docker.com/docker-for-windows/troubleshoot" class="external-link">Windows</a> or <a href="https://docs.docker.com/docker-for-mac/troubleshoot" class="external-link">Mac</a>, consult <a href="https://success.docker.com/article/best-support-resources" class="external-link">Docker Support Resources</a> for more information.</p> <h3 id="_docker-extension-limitations">Docker Extension limitations</h3> <p>Some Docker commands invoked from the Docker extension can fail when invoked from a VS Code window opened in a container. Most containers do not have the Docker command line installed. Therefore commands invoked from the Docker extension that rely on the Docker command line, for example <strong>Docker: Show Logs</strong>, fail. If you need to execute these commands, open a new local VS Code window and use the Docker extension from this window or <a href="https://aka.ms/vscode-remote/samples/docker-in-docker" class="external-link">set up Docker inside your container</a>.</p> <h3 id="_extension-limitations">Extension limitations</h3> <p>Many extensions will work inside dev containers without modification. However, in some cases, certain features may require changes. If you run into an extension issue, <a href="/docs/remote/troubleshooting#_extension-tips">see here for a summary of common problems and solutions</a> that you can mention to the extension author when reporting the issue.</p> <p>In addition, while experimental Alpine support is available in <a href="https://code.visualstudio.com/insiders/">VS Code - Insiders</a>, some extensions installed in the container may not work due to <code>glibc</code> dependencies in native code inside the extension. See the <a href="/docs/remote/linux">Remote Development and Linux</a> article for details.</p> <h2 id="_common-questions">Common questions</h2> <h3 id="_i-am-seeing-errors-when-trying-to-mount-the-local-filesystem-into-a-container">I am seeing errors when trying to mount the local filesystem into a container</h3> <p>Right-click on the Docker task bar item. On Windows, go to the <strong>Settings &gt; Shared Drives</strong> tab and check the drive(s) where your source code is located. On macOS, go the <strong>Preferences &gt; File Sharing</strong> tab and make sure the folder containing your source code is under a file path specified in the list.</p> <p>See <a href="/docs/remote/troubleshooting#_docker-desktop-for-windows-tips">Docker Desktop for Windows tips</a> for information on workarounds to common Docker for Windows issues.</p> <h3 id="_i-am-seeing-w-failed-to-fetch-when-building-a-dockerfile">I am seeing &quot;W: Failed to fetch ...&quot; when building a Dockerfile</h3> <p>If you see &quot;W: Failed to fetch <a href="http://deb.debian.org/debian/dists/jessie-updates/InRelease" class="external-link">http://deb.debian.org/debian/dists/jessie-updates/InRelease</a>&quot; when building a Dockerfile, you may be hitting a known Docker issue with Debian 8 (Jessie). See <a href="/docs/remote/troubleshooting#_resolving-dockerfile-build-failures-for-images-using-debian-8">here for a workaround</a>.</p> <h3 id="_im-seeing-an-error-about-a-missing-library-or-dependency">I&apos;m seeing an error about a missing library or dependency</h3> <p>Some extensions rely on libraries not found in the certain Docker images. See <a href="#_installing-additional-software-in-the-sandbox">above</a> for help resolving the problem.</p> <h3 id="_can-i-connect-to-multiple-containers-at-once">Can I connect to multiple containers at once?</h3> <p>A VS Code window can only connect to one window currently, but you can open a new window and <a href="#_attaching-to-running-containers">attach</a> to an already running container or <a href="/docs/remote/containers-advanced#_connecting-to-multiple-containers-at-once">use a common Docker Compose file with multiple <code>devcontainer.json</code> files</a> to automate the process a bit more.</p> <h3 id="_can-i-work-with-containers-on-a-remote-host">Can I work with containers on a remote host?</h3> <p>Yes, you can either attach to a container running on a remote host or create a specialized <code>devcontainer.json</code> to tell VS Code how to work with your remote environment. To access the host, you can either connect to a publicly exposed Docker daemon TCP port or use SSH to tunnel into a remote VM running Docker. See <a href="/docs/remote/containers-advanced#_developing-inside-a-container-on-a-remote-docker-host">Developing inside a container on a remote Docker host</a> for details.</p> <p>You can build images and deploy containers by forwarding the Docker socket and installing the Docker CLI (and kubectl for Kubernetes) in the container. See the <a href="https://aka.ms/vscode-remote/samples/docker-in-docker" class="external-link">Docker-in-Docker</a>, <a href="https://aka.ms/vscode-remote/samples/docker-in-docker-compose" class="external-link">Docker-in-Docker Compose</a>, and <a href="https://aka.ms/vscode-remote/samples/kubernetes-helm" class="external-link">Kubernetes-Helm</a> dev container definitions for details.</p> <h3 id="_what-are-the-connectivity-requirements-for-the-vs-code-server-when-it-is-running-in-a-container">What are the connectivity requirements for the VS Code Server when it is running in a container?</h3> <p>The VS Code Server requires outbound HTTPS (port 443) connectivity to:</p> <ul> <li><code>update.code.visualstudio.com</code></li> <li><code>marketplace.visualstudio.com</code></li> <li><code>vscode.blob.core.windows.net</code></li> <li><code>*.vo.msecnd.net</code> (Azure CDN)</li> <li><code>*.gallerycdn.vsassets.io</code> (Azure CDN)</li> </ul> <p>All other communication between the server and the VS Code client is accomplished through an authenticated, random, TCP port automatically exposed via the Docker CLI. You can find a list of locations VS Code itself needs access to <a href="/docs/setup/network#_common-hostnames">in the network connections article</a>.</p> <p>Finally, some extensions (like C#) download secondary dependencies from <code>download.microsoft.com</code> or <code>download.visualstudio.microsoft.com</code>. Others (like <a href="https://docs.microsoft.com/en-us/visualstudio/liveshare/reference/connectivity#requirements-for-connection-modes" class="external-link">VS Live Share</a>) may have additional connectivity requirements. Consult the extension&apos;s documentation for details if you run into trouble.</p> <p>The VS Code extension API hides most of the implementation details of running remotely so many extensions will just work inside dev containers without any modification. However, we recommend that you test your extension in a dev container to be sure that all of its functionality works as expected. See the article on <a href="/api/advanced-topics/remote-extensions">Supporting Remote Development</a> for details.</p> <h3 id="_what-other-resources-are-there-that-may-be-able-to-answer-my-question">What other resources are there that may be able to answer my question?</h3> <p>The following articles may help answer your question:</p> <h2 id="_questions-or-feedback">Questions or feedback</h2> <p class="body-footer">6/25/2019</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>