<!DOCTYPE html>
<html lang="en">
<head>
    <title>
[Epic] Kerberos Authentication in ASP.NET Core &#xB7; Issue #8897 &#xB7; dotnet/aspnetcore - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="[Epic] Kerberos Authentication in ASP.NET Core &#xB7; Issue #8897 &#xB7; dotnet/aspnetcore - linksfor.dev(s)"/>
    <meta property="article:author" content="anurse"/>
    <meta property="og:description" content="We want to support Kerberos Authentication in ASP.NET Core. For 3.0, we are targetting the following supported environments as a minimum viable product (MVP): ASP.NET Core Server Platform: Linux (i..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/aspnet/AspNetCore/issues/8897"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - [Epic] Kerberos Authentication in ASP.NET Core &#xB7; Issue #8897 &#xB7; dotnet/aspnetcore</title>
<div class="readable">
        <h1>[Epic] Kerberos Authentication in ASP.NET Core &#xB7; Issue #8897 &#xB7; dotnet/aspnetcore</h1>
            <div>by anurse</div>
            <div>Reading time: 12-15 minutes</div>
        <div>Posted here: 29 Mar 2019</div>
        <p><a href="https://github.com/aspnet/AspNetCore/issues/8897">https://github.com/aspnet/AspNetCore/issues/8897</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:426696406">

              
<div data-gid="MDU6SXNzdWU0MjY2OTY0MDY=" data-url="/_render_node/MDU6SXNzdWU0MjY2OTY0MDY=/issues/body" data-channel="issue:426696406">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issue-426696406">
  <div data-body-version="a9f478d8715f9737fc712f3017b7a403" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>We want to support Kerberos Authentication in ASP.NET Core.</p>
<p>For 3.0, we are targetting the following supported environments as a minimum viable product (MVP):</p>
<ul>
<li><strong>ASP.NET Core Server Platform</strong>: Linux (including containers) (we'll try to avoid doing anything to <strong>prevent</strong> it from working on Windows/macOS, it just won't be the testing focus)</li>
<li><strong>Domain Controller type</strong>: Active Directory, running on a Windows OS in the .NET Core<br>
support matrix (Windows Server 2008 R2 or higher)</li>
<li><strong>Client</strong>: Domain-joined Windows Machines using IE11 and Edge. Other "evergreen" browsers (Chrome, Firefox) as long as they support Kerberos auth.</li>
</ul>
<p><strong>MVP Features</strong></p>
<ul>
<li>Challenge for a Kerberos ticket</li>
<li>Decode the ticket into an Identity that includes a user identifier of some kind</li>
<li>(Depending on the feasibility) Including group information in the Identity?</li>
<li>Support for offline ticket processing via a <a href="https://web.mit.edu/kerberos/krb5-1.12/doc/basic/keytab_def.html" rel="nofollow">key table (keytab)</a></li>
</ul>
<p><strong>Not in the MVP</strong>:</p>
<ul>
<li>NTLM is not a priority in the MVP, but we think it may come pretty cheap once Kerberos is up and running.</li>
<li>Allowing the server to call other services using the Kerberos identity provided by the client (i.e. SQL)</li>
<li>Allowing non-Windows servers to authenticate with Windows AD-protected resources via a service account</li>
<li>Unification with <code>WindowsIdentity</code></li>
<li>Support for Domain Controllers/Server platforms other than those listed above (though we believe others may come "for free", we just won't be committing to testing those)</li>
<li>Support for Kubernetes gMSA is for Windows containers, and since the MVP focuses on Linux, Kubernetes gMSA isn't part of the MVP. We won't do anything to <strong>prevent</strong> Windows usage if possible though.</li>
</ul>
<p>Other server platforms, DCs, clients, etc. may well come for free, but I want to set a really clear bar for what we are going to be committed to achieving in 3.0. We can always iterate on this in future releases.</p>
<p>Child Items:</p>
<ul>
<li>
  <span>
    
  </span> <a href="https://github.com/dotnet/corefx/issues/8221">https://github.com/dotnet/corefx/issues/8221</a> CoreFX Linux Server Kerberos implementation</li>
<li><del><a href="https://github.com/dotnet/corefx/issues/36896">https://github.com/dotnet/corefx/issues/36896</a> CoreFX Negotiate API</del> Postponed</li>
<li>
  <span>
    
  </span> <a data-error-text="Failed to load issue title" data-id="437340511" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/9754" data-hovercard-type="pull_request" data-hovercard-url="/dotnet/aspnetcore/pull/9754/hovercard" href="https://github.com/dotnet/aspnetcore/pull/9754">#9754</a> Server connection state (also <a data-error-text="Failed to load issue title" data-id="431137402" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/9213" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/9213/hovercard" href="https://github.com/dotnet/aspnetcore/issues/9213">#9213</a>)</li>
<li>
  <span>
    
  </span> <a data-error-text="Failed to load issue title" data-id="390467095" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/4662" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/4662/hovercard" href="https://github.com/dotnet/aspnetcore/issues/4662">#4662</a> Auth middleware</li>
<li>
  <span>
    
  </span> <a data-error-text="Failed to load issue title" data-id="444168096" data-permission-text="Issue title is private" data-url="https://github.com/aspnet/AspNetCore.Docs/issues/12420" data-hovercard-type="issue" data-hovercard-url="/aspnet/AspNetCore.Docs/issues/12420/hovercard" href="https://github.com/aspnet/AspNetCore.Docs/issues/12420">aspnet/AspNetCore.Docs#12420</a> Docs</li>
<li><del>CTI test script</del> Cut from 3.0</li>
</ul>
      </div>
</task-lists>


        



    </div>

  </div>
</div>

</div>


              

  


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ3ODEwNTk2Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ3ODEwNTk2Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ3ODEwNTk2Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-478105962">
    <div>
      

  

<details data-body-version="a6c05e2410bcc4df8d0ae1c33b55bd72">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ3ODExMjA5Mw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ3ODExMjA5Mw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ3ODExMjA5Mw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-478112093">
    <div>
      

  

<details data-body-version="49161d3bbec6c93bc3f4c24eb6ed257f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="49161d3bbec6c93bc3f4c24eb6ed257f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>FYI <a data-hovercard-type="user" data-hovercard-url="/users/blowdart/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/blowdart">@blowdart</a> - Updated to include MVP (and non-MVP) scenarios.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4MTgyNDc2OQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4MTgyNDc2OQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4MTgyNDc2OQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/markrendle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/markrendle"><img height="40" width="40" alt="@markrendle" src="https://avatars0.githubusercontent.com/u/178242?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-481824769">
    <div>
      

  

<details data-body-version="b83f0c699f405edc2a4804a95418e98f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="b83f0c699f405edc2a4804a95418e98f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Super-happy to see this getting some love. It's going to be a huge unblocker where I'm working at the moment.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4MTgzODE4OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4MTgzODE4OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4MTgzODE4OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/anurse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anurse"><img height="40" width="40" alt="@anurse" src="https://avatars3.githubusercontent.com/u/7574?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-481838188">
    <div>
      

  

<details data-body-version="31c41817cf04aa8d1df2218f20bf7f45">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="31c41817cf04aa8d1df2218f20bf7f45" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/markrendle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/markrendle">@markrendle</a> Please let us know if the MVP (described above) is sufficient for your scenarios! If there are gaps, we'd like to at least track them (though we can't commit to much, if anything, beyond the MVP in 3.0)</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4NzY5NjI2MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4NzY5NjI2MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4NzY5NjI2MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/csturm83/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/csturm83"><img height="40" width="40" alt="@csturm83" src="https://avatars1.githubusercontent.com/u/4419635?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-487696260">
    <div>
      

  

<details data-body-version="e692ab574862a59dd6a4a191a5e33a20">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e692ab574862a59dd6a4a191a5e33a20" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Am I understanding the MVP correctly, that Kerberos Constrained Delegation in Kestrel running on Linux will not be supported initially?</p>
<p>My enterprise scenario is a .NET Core web application running in a Linux container which needs to delegate Windows credentials (using Kerberos) to a web service hosted on a Linux machine (assuming appropriate keytabs/SPNs configured).</p>
<p>If this scenario will not be supported by the MVP, does anyone know of an alternative way to implement this today? I had 2 (maybe unrealistic) ideas:</p>
<ol>
<li>
<p>Is it possible to reverse proxy NGINX or Apache to Kestrel inside of a Linux container using their respective Kerberos modules to delegate the credentials? I.e. would a WindowsIdentity.RunImpersonated call (or similar) work in such a configuration? The fact that it's <em>WindowsIdentity</em> would lead me to believe no.<br>
(IE) -&gt; (NGINX/Kestrel/.NET Core app in Linux Container) -&gt; (web service)</p>
</li>
<li>
<p>Is it possible to reverse proxy IIS externally to Kestrel inside of a Linux container, delegating credentials using WindowsIdentity.RunImpersonated.<br>
(IE) -&gt; (IIS) -&gt; (Kestrel/.NET Core app in Linux Container) -&gt; (web service)</p>
</li>
</ol>
<p>Reading the <a href="https://github.com/aspnet/AspNetCore/issues/4662#issuecomment-484707814" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/4662/hovercard">third bullet in this comment</a> gives me the feeling that neither of these approaches will work.</p>
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher">@Tratcher</a> <a data-hovercard-type="user" data-hovercard-url="/users/Drawaes/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Drawaes">@Drawaes</a></p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4NzY5ODkyNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4NzY5ODkyNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4NzY5ODkyNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/blowdart/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/blowdart"><img height="40" width="40" alt="@blowdart" src="https://avatars0.githubusercontent.com/u/796298?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-487698927">
    <div>
      

  

<details data-body-version="f3a1a15792211ebfa0c27b83d9a98fbe">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="f3a1a15792211ebfa0c27b83d9a98fbe" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Given that Kerberos Constrained Delegation is a Windows Server feature, rather than a Kerberos feature, you're correct, this isn't going to be supported initially, if <em>at all</em>.</p>
<p>Unblocking "Windows authentication" to a web app hosted on linux is the goal for the MVP.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4ODQxODgyNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4ODQxODgyNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4ODQxODgyNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/csturm83/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/csturm83"><img height="40" width="40" alt="@csturm83" src="https://avatars1.githubusercontent.com/u/4419635?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-488418825">
    <div>
      

  

<details data-body-version="eb21a2d465ee358daaa71526df0efbc7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="eb21a2d465ee358daaa71526df0efbc7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Thank you <a data-hovercard-type="user" data-hovercard-url="/users/blowdart/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/blowdart">@blowdart</a>  for your quick response!</p>
<blockquote>
<p>Given that Kerberos Constrained Delegation is a Windows Server feature, rather than a Kerberos feature,</p>
</blockquote>
<p>The way I understand it, constrained delegation is a Kerberos protocol <em>extension</em> (<a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-sfu/3bff5864-8135-400e-bdd9-33b552051d94" rel="nofollow">S4U2Proxy</a>) that Microsoft invented (may have started out as a Windows Server feature as you suggest). I believe the MIT Kerberos implementation currently <a href="http://web.mit.edu/Kerberos/krb5-devel/doc/appdev/gssapi.html#constrained-delegation-s4u" rel="nofollow">supports the S4U protocol extensions</a>.</p>
<p>Likely not a compelling enough reason to change the MVP (which I believe is a big step in the right direction!). I would just suggest/request that the S4U extensions are a feature I believe are worth pursuing in future iterations, if not the MVP.</p>
<p>I'm not entirely sure, but it sounded like some folks chiming in on AspNetCore Issue <a data-error-text="Failed to load issue title" data-id="390467095" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/4662" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/4662/hovercard" href="https://github.com/dotnet/aspnetcore/issues/4662">#4662</a> had use cases similar to mine (although I believe delegating to SQL).</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4ODQyMTAwOQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ4ODQyMTAwOQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ4ODQyMTAwOQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/blowdart/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/blowdart"><img height="40" width="40" alt="@blowdart" src="https://avatars0.githubusercontent.com/u/796298?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-488421009">
    <div>
      

  

<details data-body-version="ab937b95d91d4e4f6c45411c394afacd">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ab937b95d91d4e4f6c45411c394afacd" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Yea, we're treating this as a starting point to unblock what is most requested. After that, well, we'll think about additions based on customer demand,</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ5MDY0ODUyNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDQ5MDY0ODUyNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDQ5MDY0ODUyNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-490648526">
    <div>
      

  

<details data-body-version="2f6b1f1d670473d27425fb0ff5f5f050">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="2f6b1f1d670473d27425fb0ff5f5f050" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Announcement:<br>
Please try 3.0.0-preview5 System.Net.Security.NegotiateStream in your environments. NegotiateStream allows you to authenticate a TCP connection using NTLM or Kerberos. It will not get you HTTP auth, but it will let you know if you have correctly configured in your environments.</p>
<p>In preview5 we <a href="https://github.com/dotnet/corefx/pull/36827" data-hovercard-type="pull_request" data-hovercard-url="/dotnet/corefx/pull/36827/hovercard">added</a> support to NegotiateStream for server scenarios on Linux. In the next milestone we will implement HTTP server auth using the same underlying libraries.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0Mzg3MjkxNA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0Mzg3MjkxNA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0Mzg3MjkxNA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker"><img height="40" width="40" alt="@ebekker" src="https://avatars1.githubusercontent.com/u/3308726?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-543872914">
    <div>
      

  

<details data-body-version="a4a77e86833626feaf51de28dc683b43">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a4a77e86833626feaf51de28dc683b43" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Is it possible to control which underlying provider is enabled by the Negotiate support?  For example, if I wanted to disable NTLM, but only allow Kerberos, is there a way to control this?</p>
<p>Skimming through the code, I'm guessing this is not baked in.  And I believe this support was built atop the NegotiateStream support, and I don't think that flexibility is supported there either, correct?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0MzkxNTIzNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0MzkxNTIzNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0MzkxNTIzNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-543915237">
    <div>
      

  

<details data-body-version="6d7648ad52e0d0810fa8114dc1f631e4">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6d7648ad52e0d0810fa8114dc1f631e4" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker">@ebekker</a> no, on Windows that can be controlled machine wide via the registry. On linux you've installed the NTLM module or you haven't.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDE1OTIwNA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDE1OTIwNA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NDE1OTIwNA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker"><img height="40" width="40" alt="@ebekker" src="https://avatars1.githubusercontent.com/u/3308726?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-544159204">
    <div>
      

  

<details data-body-version="e9c5598a6442e3f443afe4d96a0406ee">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e9c5598a6442e3f443afe4d96a0406ee" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Thank you <a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher">@Tratcher</a>, I was investigating the possibility of migrating some applications we have that are currently hosted behind IIS, where you have finer control of the <em>Windows Authentication</em> providers, such being able to selectively enable/disable and also reorder for preference.  We were exploring removing IIS from the equation if we migrated some apps from Framework to Core, but it looks like we'll need to keep IIS for now to maintain that level of control.</p>
<p>Quick follow up -- as your are more intimately familiar with the inner workings of the  Kestrel implementation of Negotiate, would you say there is anything that would fundamentally prevent or make difficult to add this type of control to the Negotiate Authentication implementation (i.e. being able to selectively choose which providers to support and in what preferred order)?  For example, if we took it upon ourselves to dig into this.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDE3MDEzOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDE3MDEzOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NDE3MDEzOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-544170138">
    <div>
      

  

<details data-body-version="0adb0428688af6e70af8348279722d40">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="0adb0428688af6e70af8348279722d40" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker">@ebekker</a> We have a related thread discussing this:<br>
<a data-error-text="Failed to load issue title" data-id="506200658" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/14951" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/14951/hovercard?comment_id=543365774&amp;comment_type=issue_comment" href="https://github.com/dotnet/aspnetcore/issues/14951#issuecomment-543365774">#14951 (comment)</a></p>
<p>Summary: We're unlikely to add support for NTLM because it is an old, insecure protocol.</p>
<p>Most other things IIS does can also be added here, except for kernel mode auth.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDQ4MDExNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDQ4MDExNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NDQ4MDExNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker"><img height="40" width="40" alt="@ebekker" src="https://avatars1.githubusercontent.com/u/3308726?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-544480116">
    <div>
      

  

<details data-body-version="ab9ca6e77c357d9e53362d550cd1c5fc">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ab9ca6e77c357d9e53362d550cd1c5fc" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Thanks -- just to be clear, we were interested in actually <em>removing</em> NTLM support, as right now, when we use the Negotiate Auth package, it appears to be defaulting back to that, whereas we prefer to stick strictly to Kerberos.  Unfortunately, we cannot disable it domain-wide because of some legacy applications.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDQ5NzYzMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NDQ5NzYzMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NDQ5NzYzMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-544497632">
    <div>
      

  

<details data-body-version="08c129be2ab261ca600acbadf988e7e2">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="08c129be2ab261ca600acbadf988e7e2" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/ebekker/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ebekker">@ebekker</a> ah, that's a different discussion. Go ahead and file a separate issue for that.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NTMyMjgzOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NTMyMjgzOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NTMyMjgzOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Grey007/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Grey007"><img height="40" width="40" alt="@Grey007" src="https://avatars0.githubusercontent.com/u/7548837?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-545322838">
    <div>
      

  

<details data-body-version="1526d1c0619a4c8b2634a6f4f7bdf257">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="1526d1c0619a4c8b2634a6f4f7bdf257" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Hi all,</p>
<p>I am no expert when it comes to Kerberos or NTLM authentication and so maybe I have missed a solution mentioned above.</p>
<p>I have a .Net Core 3.0 application running on a docker container within Kubernetes connecting to a SQL Server running on a windows server machine.</p>
<p>Currently, I connect to the SQL server using a username and password in my connection string.</p>
<p>Our DBA team has asked that we remove the username and passwords and move towards integrated security. As mentioned in one of the posts above, if you were running in IIS, you can just run the app as that user.</p>
<p>I have come across the following solution: <a rel="nofollow" href="https://www.codeproject.com/Articles/1272546/Authenticate-Net-Core-client-of-SQL-Server-with-In">https://www.codeproject.com/Articles/1272546/Authenticate-Net-Core-client-of-SQL-Server-with-In</a></p>
<p>But it is a really dirty solution and adds unnecessary overhead to the application.</p>
<p>I am wondering if there is a better solution out there? Or any plans to support Kerberos auth in such a manner?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NTQ5MjA3Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0NTQ5MjA3Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0NTQ5MjA3Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Tratcher/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Tratcher"><img height="40" width="40" alt="@Tratcher" src="https://avatars3.githubusercontent.com/u/1821173?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-545492076">
    <div>
      

  

<details data-body-version="cd9a7f62ce3901264aa780363f8d472b">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="cd9a7f62ce3901264aa780363f8d472b" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Comments on closed issues are not tracked, please open a new issue with the details for your scenario.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  







<!-- Rendered timeline since 2019-12-03 00:01:01 -->



            </div>


            
          </div>

</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>