<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Cloud Storage for $2 / TB / Mo - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Cloud Storage for $2 / TB / Mo - linksfor.dev(s)"/>
    <meta property="article:author" content="https://blog.sia.tech/@davidvorick"/>
    <meta property="og:description" content="Explore the model that shows why Sia storage will stay below $2/TB/Mo for the long term."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://blog.sia.tech/cloud-storage-for-2-tb-mo-8a34043e93bb?gi=8df5c4d18671"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Cloud Storage for $2 / TB / Mo</title>
<div class="readable">
        <h1>Cloud Storage for $2 / TB / Mo</h1>
            <div>by https://blog.sia.tech/@davidvorick</div>
            <div>Reading time: 10-12 minutes</div>
        <div>Posted here: 07 Mar 2020</div>
        <p><a href="https://blog.sia.tech/cloud-storage-for-2-tb-mo-8a34043e93bb?gi=8df5c4d18671">https://blog.sia.tech/cloud-storage-for-2-tb-mo-8a34043e93bb?gi=8df5c4d18671</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><section><div><div><div><div><div><div><p><a href="https://blog.sia.tech/@davidvorick?source=post_page-----8a34043e93bb----------------------" rel="noopener"><img alt="David Vorick" src="https://miro.medium.com/fit/c/96/96/1*VyyA44ch6zcB8qyyPpql6A.png" width="48" height="48"></a></p></div></div></div></div><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*RwOb3-L7repKtbZAKYzLYw.jpeg?q=20" width="2030" height="885" role="presentation"></p><p><img width="2030" height="885" role="presentation" src="https://miro.medium.com/max/2030/1*RwOb3-L7repKtbZAKYzLYw.jpeg"></p></div></div></div></div></figure><p id="8d5f" data-selectable-paragraph="">One of the frequent claims of the <a href="https://sia.tech/" target="_blank" rel="noopener">Sia</a> network is that over the long term, storage will be cheaper than $2 / TB / Mo, assuming that storage economics do not change. Though we’ve claimed this many times, we’ve never published a detailed model explaining where this number comes from. Until now.</p><p id="e6c7" data-selectable-paragraph="">For the purposes of this model, we are going to be assuming an endgame where Sia has substantially outgrown all of the latent / unused storage in the world, where the only way Sia can continue to grow is by having new datacenters established for the sole purpose of profiting from selling data to the Sia network. You can follow along with the math using <a href="https://docs.google.com/spreadsheets/d/1hGc-DHftI5c9zgJuyfKpQZJPQJfam_TN2tK8qxCzeg4/edit?usp=sharing" target="_blank" rel="noopener">this spreadsheet</a>.</p><p id="2022" data-selectable-paragraph="">One of the key ways that the Sia network distinguishes itself from traditional cloud storage is its datacenter architecture and requirements. The Sia network only expects hosts to have a 95–98% uptime. Despite this, the Sia network is able to achieve 99.9999% uptime for files. This is because each piece of data on the Sia network is stored on many hosts, requiring only a subset of them to be online in order for the file to remain available.</p><p id="ef23" data-selectable-paragraph="">Today, data is typically stored on the Sia network with a 10-of-30 redundancy scheme. This means that there’s a 3x overhead, and that as long as <strong>any</strong> 10 hosts are online, the file itself is still retrievable. Once the Sia network is more mature, we will likely be switching to 64-of-96 hosts.</p><p id="9d08" data-selectable-paragraph="">If we assume that the 30 hosts go offline independently, and each host has a 95% chance of being online over a given time interval, the equation to determine the probability that a file is unavailable looks <a href="https://www.wolframalpha.com/input/?i=sum+of+%2830+choose+x%29+*+0.95%5Ex+*+%281-0.95%29%5E%2830-x%29%2C+from+1+to+10" target="_blank" rel="noopener">like this,</a> giving a result of 10^-19, or 18 nines of uptime. Practically speaking host failures are not truly independent and you have to account for black swan situations like world war three. The true reality is that no system actually hits 18 nines of uptime (nor 11 nines of reliability).</p><p id="2a49" data-selectable-paragraph="">Amazingly, even though 64-of-96 is only 1.5x redundancy, exactly half of the total copies of 10-of-30, the uptime equation has <a href="https://www.wolframalpha.com/input/?i=sum+of+%2896+choose+x%29+*+0.95%5Ex+*+%281-0.95%29%5E%2896-x%29%2C+from+1+to+64" target="_blank" rel="noopener">a nearly identical result</a> — 17 nines of uptime.</p><p id="1f12" data-selectable-paragraph="">In Sia’s endgame, 1.5x redundancy is the number that is most likely to be used in production contexts, so that is the number we are going to be using when we model the long term cost of storage.</p><p id="f742" data-selectable-paragraph="">An efficient storage rig is going to need the following parts:</p><ul><li id="a4f6" data-selectable-paragraph="">32x 6 TB HDD: <a href="https://www.amazon.com/HGST-7-2K-SATA-Drive-Model/dp/B07XQRBJGZ/ref=sr_1_10?keywords=6tb+internal+hdd+HGST&amp;qid=1583310365&amp;refinements=p_n_condition-type%3A2224371011&amp;rnid=2224369011&amp;s=pc&amp;sr=1-10" target="_blank" rel="noopener">$4160</a></li><li id="c3fd" data-selectable-paragraph="">1x Mobo with 8 SATA slots: <a href="https://www.newegg.com/asrock-x570-phantom-gaming-4/p/N82E16813157884?Item=N82E16813157884&amp;Description=mobo&amp;cm_re=mobo-_-13-157-884-_-Product&amp;quicklink=true" target="_blank" rel="noopener">$150</a></li><li id="7dec" data-selectable-paragraph="">8x 4 way SATA data splitters: <a href="https://www.amazon.com/CableDeconn-SFF-8087-Degrees-Target-H0304/dp/B00XBE4DGO/ref=sr_1_2?keywords=sata+data+splitter&amp;qid=1583311218&amp;s=electronics&amp;sr=1-2" target="_blank" rel="noopener">$50</a></li><li id="c580" data-selectable-paragraph="">1x CPU 4 cores: <a href="https://www.newegg.com/amd-ryzen-3-1200/p/N82E16819113446?Description=ryzen%203&amp;cm_re=ryzen_3-_-19-113-446-_-Product" target="_blank" rel="noopener">$95</a></li><li id="defd" data-selectable-paragraph="">32 GB RAM: <a href="https://www.newegg.com/corsair-32gb-288-pin-ddr4-sdram/p/N82E16820233894?Description=DDR4%2032%20GB&amp;cm_re=DDR4_32_GB-_-20-233-894-_-Product" target="_blank" rel="noopener">$140</a></li><li id="c76d" data-selectable-paragraph="">1x PSU with 8 SATA cables: <a href="https://www.newegg.com/amd-ryzen-3-1200/p/N82E16819113446?Item=9SIA4YU9XA2202&amp;Description=AM4%20CPU&amp;cm_re=AM4_CPU-_-19-113-446-_-Product" target="_blank" rel="noopener">$80</a></li><li id="66dc" data-selectable-paragraph="">8x SATA power splitters: <a href="https://www.amazon.com/StarTech-com-Power-Splitter-Adapter-PYO4SATA/dp/B0086OGN9E/ref=sr_1_4?keywords=sata+power+splitter&amp;qid=1583313496&amp;sr=8-4" target="_blank" rel="noopener">$50</a></li><li id="538f" data-selectable-paragraph="">16x Stackable HDD cage: <a href="https://www.newegg.com/phanteks-ph-hddkt-03-stackable-3-5-hdd-bracket/p/N82E16817972005?Description=HDD%20cage&amp;cm_re=HDD_cage-_-17-972-005-_-Product&amp;quicklink=true" target="_blank" rel="noopener">$160</a></li><li id="f6e9" data-selectable-paragraph="">Bare shelf: <a href="https://www.amazon.com/Safco-Products-Compartment-Organization-Compartments/dp/B001E2573S/ref=sr_1_15?keywords=multi%2Bcompartment%2Bshelf&amp;qid=1583315170&amp;sr=8-15&amp;th=1" target="_blank" rel="noopener">$60</a></li></ul><p id="d48a" data-selectable-paragraph="">What’s going here is we’re buying 32 HDDs, and then finding a low cost way to put them together. This is a technique that was championed by the Bitcoin mining industry, with unprecedented levels of corner cutting, bitcoin mining farms were able to get prices to be absurdly low. We can employ the same strategies here. With 95% uptime requirements, we don’t need to splurge on expensive parts like a full computer tower. The mobo selected above supports 48 gbps in data transfer, which means we still end up with over 1gbps per HDD even though we are doing a ton of splitting. It also turns out that 32 HDDs only consume 200w, so the 750w PSU we picked is more than sufficient.</p><p id="3f55" data-selectable-paragraph="">In total, we’re spending $4945 to get a rig with 192 TB, or about $26/TB. And this is all paying consumer prices. This rig was assembled using consumer parts, when buying a large number of rigs at scale, a datacenter should be able to get much better pricing. So we will be using a rig cost of $4500 in our spreadsheet.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*TIHJdhOLdb5GiDn9-lPR3w.jpeg?q=20" width="1200" height="670" role="presentation"></p><p><img width="1200" height="670" role="presentation"></p></div></div></div></div></figure><p id="5cb7" data-selectable-paragraph="">Often times for datacenter buildout, you budget around $1mm per megawatt in costs, or about $1 per watt. These rigs are going to consume about 400w each (6 watts per HDD, 65 for the CPU, 70 for RAM and mobo, and then loss from the PSU and datacenter PUE). In total, that means budgeting about $500 in capex for datacenter buildout.</p><p id="659c" data-selectable-paragraph="">Another cost that needs to be considered is networking equipment. If we’re assuming that you can fit about 8 machines per rack, and you need $2,000 of networking equipment in the datacenter per rack, you get $250 per rig.</p><p id="9dce" data-selectable-paragraph="">Finally, everything is going to have to be assembled and constructed. Including screws and such, each rig has in the ballpark of 400 parts. That means about 2 hours of labor per rig. We’ll call that $50, bringing our total buildout expenses to $800 per rig.</p><p id="9824" data-selectable-paragraph="">The whole purpose of understanding capex for the purposes of a profitable datacenter build is to model depreciation. We need to understand how much value we are losing on our hardware every year that the datacenter is in operation. Hard drives last on average about 7 years. Hard drives also go down in price over time, meaning that you lose value a little faster than hard drives break. For this example, we are going to assume a 15% depreciation rate on our storage rigs, and a 5% depreciation on our build-out. That means our total depreciation costs are $785 per year.</p><p id="f94b" data-selectable-paragraph="">Investors putting money into datacenter buildout are going to expect to make more revenue than just operational costs and depreciation costs. I think a reasonable profit expectation for a datacenter built to support a mature Sia ecosystem is around 10%, because the risk of building storage for a mature platform should be relatively low. Earlier in the life of the Sia network, risk may be higher, therefore profit requirements may be higher. At 10% profit expectation, the rigs will need to earn $570 per year in profit to be considered a good investment.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*NvDa_Mb0bbzzFic3XnxhiQ.jpeg?q=20" width="960" height="641" role="presentation"></p><p><img width="960" height="641" role="presentation"></p></div></div></div></div></figure><p id="1bcc" data-selectable-paragraph="">Our rig takes up about 2 square feet. The shelf that I linked should actually be able to hold about 3 of these rigs, and should be able to stack 3 or more of these shelves together. If you account for leaving space for airflow and aisles, you end up with about 1 square foot per rig, meaning a 2,000 square foot datacenter can hold 200,000 TB. The cost of rent is going to be negligible compared to other expenses, and is therefore excluded. Electricity aside, utilities should be approximately negligible as well.</p><p id="62df" data-selectable-paragraph="">If we assume a PSU efficiency of 93% (this is easily attained at datacenters) and a PUE of 1.4 (generally attainable for this type of setup), you get about 400w per rig. Mining farms often have electricity costs at low as 4 cents, but Sia datacenters are restricted by the fact that they need to have access to good network connections, so we will budget 10 cents per kilowatt hour for electricity. At 500 watts per rig, this comes out to $450 per year in electricity expenses.</p><p id="5cfb" data-selectable-paragraph="">On Sia, bandwidth is priced separately, renters pay for upload bandwidth and download bandwidth independently from storage, which means that we can exclude all ISP costs from this equation. Those expenses are covered as renters utilize the bandwidth.</p><p id="b19c" data-selectable-paragraph="">Typical datacenters often have multiple redundant power agreements, backup power setups, batteries, etc, so that they can maintain 99.99% uptime. They will also have technical staff at the datacenter 24/7 to react quickly to any failures or outages. None of these things are required when your uptime target is 95%, and therefore this is a huge set of costs we can ignore when designing Sia datacenters.</p><p id="51c9" data-selectable-paragraph="">Sia datacenters will however need at least a bit of maintenance. For a 32 HDD system, you expect about 5 drives to fail per year. This takes time to repair and you will need on-site staff (just not 24/7). To account for these costs, we will budget $50 per year per rig.</p><p id="f168" data-selectable-paragraph="">All told, we are at about $1850 per year in expected revenue. This combines the depreciation costs, the electricity costs, the utility costs, and the profit requirements.</p><p id="5be0" data-selectable-paragraph="">A mature datacenter should be able to maintain a utilization of 90% or more by purchasing equipment on an as-needed basis. Assuming that a datacenter does achieve 90% utilization, a 192 TB storage rig is going to need to earn all of its revenue on only 172 TB.</p><p id="011f" data-selectable-paragraph="">Something that is unique to the Sia network is collateral lockup. When hosting someone’s data, you need to lock up collateral to retain that data. When storing 172 TB of data, a host should expect to have about 6 months worth of revenue locked up. At a 10% profit expectation, that comes down to losing about 1 month worth of revenue to capital expenses per year on actively used storage. So really, we should only be counting 11 months of revenue, as that 12th month is going to pay for our collateral lockup expenses. We compute the collateral expenses as a number of months lost because it can be computed independently of other values this way and simplifies the math.</p><p id="a895" data-selectable-paragraph="">The final expense is the siafund fee. All storage on the network incurs a roughly 10% fee, which means the renter is going to be paying more than the host is earning.</p><p id="bcac" data-selectable-paragraph="">With a total revenue requirement of about $1750, an effective utilization of about 172 TB, and an effective earnings period of 11 months, we compute that the host needs to be earning about 90 cents per TB per month in revenue for an investment to make sense. Accounting for siafund fees, the renter needs to pay about $1.00 per TB per month. And then accounting for 1.5x redundancy, the final cost of redundant storage is about <strong>$1.50 per TB per month</strong>.</p><p id="34f3" data-selectable-paragraph="">This is possible because the Sia network is designed so that datacenters can take shortcuts while building. The traditional model for the cloud assumes that datacenters need to be ultra high reliability, and often also assumes certain performance requirements on the internal network and servers of the datacenter. Sia is much more relaxed, everything needs to happen on the order of milliseconds as opposed to microseconds, and is perfectly comfortable with datacenters and storage rigs that have over a day of downtime per month on average.</p><p id="1bd6" data-selectable-paragraph="">More to the point, as a whole the Sia network has been carefully designed to be optimal as a decentralized system. Many of the fundamental design choices for Sia had to be different to achieve decentralization, and we have been able to leverage the strengths and weaknesses of these requirements to create something entirely new, and ultimately far superior to the traditional cloud.</p></div></div></section></div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>