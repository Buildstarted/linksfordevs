<!DOCTYPE html>
<html lang="en">
<head>
    <title>
The Ultimate Guide to Drag and Drop Image Uploading with Pure Javascript - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="The Ultimate Guide to Drag and Drop Image Uploading with Pure Javascript - linksfor.dev(s)"/>
    <meta property="article:author" content="By Supun Kavinda   Following Unfollow Follow"/>
    <meta property="og:description" content="This is a comprehensive guide on how to utilize drag and drop image uploading with pure Javascript."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://blog.soshace.com/the-ultimate-guide-to-drag-and-drop-image-uploading-with-pure-javascript/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - The Ultimate Guide to Drag and Drop Image Uploading with Pure Javascript</title>
<div class="readable">
        <h1>The Ultimate Guide to Drag and Drop Image Uploading with Pure Javascript</h1>
            <div>by By Supun Kavinda   Following Unfollow Follow</div>
            <div>Reading time: 14-18 minutes</div>
        <div>Posted here: 16 Apr 2020</div>
        <p><a href="https://blog.soshace.com/the-ultimate-guide-to-drag-and-drop-image-uploading-with-pure-javascript/">https://blog.soshace.com/the-ultimate-guide-to-drag-and-drop-image-uploading-with-pure-javascript/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><div><div><div><p><a href="https://blog.soshace.com/author/supunkavinda1125/" data-wpel-link="internal"> <img src="https://lh3.googleusercontent.com/a-/AAuE7mAdtfEtFtM6YDRjaYTRyFF0ZFZRtBgA2UuMT5oQBg?sz=50" data-src="https://lh3.googleusercontent.com/a-/AAuE7mAdtfEtFtM6YDRjaYTRyFF0ZFZRtBgA2UuMT5oQBg?sz=50" alt="Supun Kavinda"> </a></p><p> <span><i></i>&nbsp;&nbsp;18,005</span> <span>December 27, 2019</span> <span> <span>   <span data-hash="dXNlcl9pZDowLG9iamVjdF9pZDo3NTYsZmVlZF90eXBlOmF1dGhvcixmZWVkX3N0YXR1czox" onclick="sicEditFeed(this)">Follow</span> </span> </span></p></div></div><p><img src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/rcl-uploads/articles/2019/12/4915113.jpg" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/rcl-uploads/articles/2019/12/4915113.jpg"></p><p>In this guide, I’ll be explaining how to upload images by dragging and dropping. This includes dragging images</p><ol><li>From OS to browser</li><li>From browser to browser</li></ol><p>I’ll be using Pure Javascript (no frameworks or libraries), and the code will be compatible with all modern browsers including IE 9+. Also, I haven’t used ES6 which means you won’t need a compiler like Babel to run the code.</p><p>Our Drag &amp; Drop function will do 5 things.</p><ol><li>Listen for drag and drop</li><li>Indicate when a file is hovering on the drop region</li><li>Validate dropped images</li><li>Preview images</li><li>Upload images</li></ol><p>However, relying completely on drag &amp; drop is a bad idea because mobile users won’t like it. Also, most mobile browsers don’t even support the API. Here’s the browser support for <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API" target="_blank" data-wpel-link="external" rel="nofollow noopener">Drag &amp; Drop API</a> from caniuse.com.</p><div id="attachment_10358"><p><img aria-describedby="caption-attachment-10358" src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api.jpg" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api.jpg" alt="the browser support for Drag &amp; Drop API" width="800" height="97" data-srcset="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api.jpg 800w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-300x36.jpg 300w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-768x93.jpg 768w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-378x46.jpg 378w" data-sizes="(max-width: 800px) 100vw, 800px" sizes="(max-width: 800px) 100vw, 800px" srcset="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api.jpg 800w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-300x36.jpg 300w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-768x93.jpg 768w, https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/12/the-browser-support-for-drag-drop-api-378x46.jpg 378w"></p><p id="caption-attachment-10358">the browser support for Drag &amp; Drop API</p></div><p>Therefore, we will also allow users to simply upload files by selecting them (Via <code>&lt;input type="file"</code>).</p><p>Here’s the final result of this tutorial:</p><p><img src="https://i.imgur.com/EtOoSkQ.gif" data-src="https://i.imgur.com/EtOoSkQ.gif" alt="The Final Result"></p><p><strong>A demo is available on <a href="https://jsfiddle.net/SupunKavinda/vfxdwtpc/5/" target="_blank" data-wpel-link="external" rel="nofollow noopener">JSFiddle</a></strong></p><p>Let’s start with basic HTML.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f0fb952413349" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>&lt;div </span><span>id</span>=<span>"drop-region"</span><span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;div </span><span>class</span>=<span>"drop-message"</span><span>&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Drag &amp; Drop images or click to upload</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/div&gt;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;div </span><span>id</span>=<span>"image-preview"</span><span>&gt;</span><span>&lt;/div&gt;</span></p><p><span>&lt;/div&gt;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><p><br> Then, save the elements in Javascript variables.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f103213116538" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>var</span><span> </span><span>// where files are dropped + file selector is opened</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>dropRegion</span><span> </span>=<span> </span><span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"drop-region"</span><span>)</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// where images are previewed</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imagePreviewRegion</span><span> </span>=<span> </span><span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"image-preview"</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0001 seconds] --><h2 id="fileselector">File Selector</h2><p>For file selecting, we have to use <code>&lt;input type="file"&gt;</code> here. However, those default file selectors look old-fashioned and hard to style with CSS. Therefore, using fake file input, we can make <code>dropRegoin</code> opening the file selector when clicked.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f106603096849" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>// open file selector when clicked on the drop region</span></p><p><span>var</span><span> </span><span>fakeInput</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"input"</span><span>)</span><span>;</span></p><p><span>fakeInput</span><span>.</span><span>type</span><span> </span>=<span> </span><span>"file"</span><span>;</span></p><p><span>fakeInput</span><span>.</span><span>accept</span><span> </span>=<span> </span><span>"image/*"</span><span>;</span></p><p><span>fakeInput</span><span>.</span><span>multiple</span><span> </span>=<span> </span><span>true</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span><span> </span><span>function</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>fakeInput</span><span>.</span><span>click</span><span>(</span><span>)</span><span>;</span></p><p><span>}</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><p><br> Note that the <a href="https://www.w3schools.com/tags/att_input_accept.asp" target="_blank" data-wpel-link="external" rel="nofollow noopener">accept attribute</a> (<code>fakeInput.accept = "image/*"</code>) is used to limit the files to image files. You can also specify the mime type too. For example, if you only need users to select only GIF files, you can use <code>image/gif</code>. Or, multiple values like <code>image/png, image/jpeg</code>. The <code>multiple</code> attribute allows users to select multiple images at once.</p><p>Now, when the dropRegion is clicked, the fakeInput will be clicked. So, the browser will open the OS file selector.</p><p>Let’s add the <code>onChange</code> event to the file input.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f107553199515" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>fakeInput</span><span>.</span><span>addEventListener</span><span>(</span><span>"change"</span><span>,</span><span> </span><span>function</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>files</span><span> </span>=<span> </span><span>fakeInput</span><span>.</span><span>files</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>handleFiles</span><span>(</span><span>file</span><span>)</span><span>;</span></p><p><span>}</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0001 seconds] --><p><br> <code>fakeInput.files</code> is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileList" target="_blank" data-wpel-link="external" rel="nofollow noopener">FileList</a> which we can use to preview and upload images. We will create the <code>handleFiles()</code> function later.</p><h2 id="dragevents">Drag Events</h2><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API" target="_blank" data-wpel-link="external" rel="nofollow noopener">Drag &amp; Drop API</a> defines 8 events: 4 events for the draggable element and 4 events for the droppable element. We will only need the latter 4 when developing a drag &amp; drop image uploading.</p><ul><li><code>dragenter</code>: a dragged item enters a valid drop target.</li><li><code>dragleave</code>: a dragged item leaves a valid drop target.</li><li><code>dragover</code>: a dragged item is being dragged over a valid drop target. Triggered every few hundred milliseconds.</li><li><code>drop</code>: an item is dropped on a valid drop target.</li></ul><h2 id="addingdragdropfunctionality">Adding Drag &amp; Drop Functionality</h2><p>When a file is dragged into the browser from the OS, the browser will try to open and display it by default. We have to prevent default behaviors and stop propagating to upper elements for all the events. This ensures any external event (especially an event of an outer element) doesn’t crash the functionality.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f10a499316830" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>function</span><span> </span><span>preventDefault</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>e</span><span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>e</span><span>.</span><span>stopPropagation</span><span>(</span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragenter'</span><span>,</span><span> </span><span>preventDefault</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragleave'</span><span>,</span><span> </span><span>preventDefault</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragover'</span><span>,</span><span> </span><span>preventDefault</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'drop'</span><span>,</span><span> </span><span>preventDefault</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><p><br> Then, we can handle the <code>drop</code> event.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f10c757328930" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>function</span><span> </span><span>handleDrop</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>data</span><span> </span>=<span> </span><span>e</span><span>.</span><span>dataTransfer</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>files</span><span> </span>=<span> </span><span>data</span><span>.</span><span>files</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>handleFiles</span><span>(</span><span>files</span><span>)</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p><span>}</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'drop'</span><span>,</span><span> </span><span>handleDrop</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0001 seconds] --><p><br> <code>e.dataTransfer</code> is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer" target="_blank" data-wpel-link="external" rel="nofollow noopener">Data Transfer</a> object which contains the dragged data. <code>e.dataTransfer.files</code> contains the dragged local files as a FileList which is exactly same as the <code>files</code> variable in the <code>change</code> event handler of the file input.</p><p>Now it’s the time to create the <code>handleFiles()</code> function which gets a File List and upload each item.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f10e856294602" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>function</span><span> </span><span>handleFiles</span><span>(</span><span>files</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>for</span><span> </span><span>(</span><span>var</span><span> </span><span>i</span><span> </span>=<span> </span><span>0</span><span>,</span><span> </span><span>len</span><span> </span>=<span> </span><span>files</span><span>.</span><span>length</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>len</span><span>;</span><span> </span><span>i</span>++<span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>validateImage</span><span>(</span><span>files</span><span>[</span><span>i</span><span>]</span><span>)</span><span>)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>previewAnduploadImage</span><span>(</span><span>files</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><p><br> We can loop through the FileList (<code>files</code> here) using a simple for loop. If each file is a valid image, we will preview and upload it.</p><p><strong>Wait!</strong> There’s a problem. This only works if the files are dragged from the local file system. What if an image is dragged from another webpage? We will need to optimize our <code>drop</code> handler for this (This is quite tricky).</p><p>Here’s the upgraded <code>handleDrop</code> function.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f110660327891" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p></div></td><td><div><p><span>function</span><span> </span><span>handleDrop</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>dt</span><span> </span>=<span> </span><span>e</span><span>.</span><span>dataTransfer</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>files</span><span> </span>=<span> </span><span>dt</span><span>.</span><span>files</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>files</span><span>.</span><span>length</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>handleFiles</span><span>(</span><span>files</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span> </span><span>else</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// check for img</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>html</span><span> </span>=<span> </span><span>dt</span><span>.</span><span>getData</span><span>(</span><span>'text/html'</span><span>)</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>match</span><span> </span>=<span> </span><span>html</span><span> </span><span>&amp;&amp; /\bsrc="?([^"\s]+)"?\s*/.exec(html),</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url = match &amp;&amp; match[1];</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>url</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>uploadImageFromURL</span><span>(</span><span>url</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>function</span><span> </span><span>uploadImageFromURL</span><span>(</span><span>url</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>img</span><span> </span>=<span> </span><span>new</span><span> </span><span>Image</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>c</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"canvas"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>ctx</span><span> </span>=<span> </span><span>c</span><span>.</span><span>getContext</span><span>(</span><span>"2d"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>onload</span><span> </span>=<span> </span><span>function</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>c</span><span>.</span><span>width</span><span> </span>=<span> </span><span>this</span><span>.</span><span>naturalWidth</span><span>;</span><span>&nbsp;&nbsp;&nbsp;&nbsp; </span><span>// update canvas size to match image</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>c</span><span>.</span><span>height</span><span> </span>=<span> </span><span>this</span><span>.</span><span>naturalHeight</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ctx</span><span>.</span><span>drawImage</span><span>(</span><span>this</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>// draw in image</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>c</span><span>.</span><span>toBlob</span><span>(</span><span>function</span><span>(</span><span>blob</span><span>)</span><span> </span><span>{</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// get content as PNG blob</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// call our main function</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>handleFiles</span><span>(</span><span> </span><span>[</span><span>blob</span><span>]</span><span> </span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>,</span><span> </span><span>"image/png"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>onerror</span><span> </span>=<span> </span><span>function</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>alert</span><span>(</span><span>"Error in uploading"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>crossOrigin</span><span> </span>=<span> </span><span>""</span><span>;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// if from different origin</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>src</span><span> </span>=<span> </span><span>url</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0007 seconds] --><p><br> Here if files are not selected, we will check for browser images. When you drag an image on the browser to another place, the image is dragged as HTML. So, we can get the HTML and check for <code>src=""</code> attribute which is the image URL. Then, we can fetch the image with <code>Image</code> object and convert it to a canvas. Finally, the canvas can be converted to a blob, and we can use our <code>handleFiles</code> function as usual.</p><p>However, there some limitations to this implementation. This would not work if the image is from a server that blocks cross-domain requests. To solve that, you can use a proxy image server to fetch images. And, also dragging from chrome to firefox can also show errors. Even with those limitations, dragging from one page to another is a cool feature.</p><h2 id="validatingimages">Validating Images</h2><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f112540308515" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p></div></td><td><div><p><span>function</span><span> </span><span>validateImage</span><span>(</span><span>image</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// check the type</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>validTypes</span><span> </span>=<span> </span><span>[</span><span>'image/jpeg'</span><span>,</span><span> </span><span>'image/png'</span><span>,</span><span> </span><span>'image/gif'</span><span>]</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>validTypes</span><span>.</span><span>indexOf</span><span>(</span><span> </span><span>image</span><span>.</span><span>type</span><span> </span><span>)</span><span> </span>===<span> </span>-<span>1</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>alert</span><span>(</span><span>"Invalid File Type"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>false</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// check the size</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>maxSizeInBytes</span><span> </span>=<span> </span><span>10e6</span><span>;</span><span> </span><span>// 10MB</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>image</span><span>.</span><span>size</span><span> </span><span>&gt;</span><span> </span><span>maxSizeInBytes</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>alert</span><span>(</span><span>"File too large"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>false</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>true</span><span>;</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0003 seconds] --><p><br> This function validates two attributes.</p><ol><li><strong>File type</strong> – In this example, I have allowed jpg, png, and gif files. However, you can add or remove any <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types" target="_blank" data-wpel-link="external" rel="nofollow noopener">valid MIME type</a>.</li></ol><p>2. <strong>File size – </strong>I have set the maximum size to 10MB. It is a good practice to limit the file size to prevent malicious oversized uploading.</p><p>Validating on the client-side has one advantage. The user can know instantly whether their image is valid. If we completely rely on server-side validation, the user has to wait until the upload is finished and the server processes the response. This can be a burden for the server if the image files are very large.</p><p>(Validating file size from the client-side inadequate. You <strong>must</strong> validate it again on the server-side.)</p><h2 id="previewinganduploadingimages">Previewing and Uploading Images</h2><h3 id="1previewing">1. Previewing</h3><p>There are several ways to preview the image.</p><ol><li><strong>Preview after uploading</strong> – Upload the image, get the image URL, and display it.</li><li><strong>Preview before uploading</strong> – We can preview the image before uploading. This is fast and efficient. There are two Javascript methods we can use.<ol><li><a href="https://chrisrng.svbtle.com/using-url-createobjecturl" target="_blank" data-wpel-link="external" rel="nofollow noopener">URL.createObjectURL()</a></li><li><a href="https://www.javascripture.com/FileReader#readAsDataURL" target="_blank" data-wpel-link="external" rel="nofollow noopener">FileReader.readAsDataURL()</a></li></ol></li></ol><p>For this example, I’ll choose 2.2: Preview the image before uploading using <code>FileReader.readAsDataURL()</code>.</p><p>Let’s start<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f114879314353" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p></div></td><td><div><p><span>function</span><span> </span><span>previewAnduploadImage</span><span>(</span><span>image</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// container</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>imgView</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"div"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>className</span><span> </span>=<span> </span><span>"image-view"</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imagePreviewRegion</span><span>.</span><span>appendChild</span><span>(</span><span>imgView</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// previewing image</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>img</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"img"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>appendChild</span><span>(</span><span>img</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// progress overlay</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>overlay</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"div"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>overlay</span><span>.</span><span>className</span><span> </span>=<span> </span><span>"overlay"</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>appendChild</span><span>(</span><span>overlay</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// ...</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0003 seconds] --><p><br> We will read the image in the next step and display it on <code>img</code> element. The overlay will be used to add a faded look to each image until uploaded. We will reduce the width of the overlay when the image is uploading.</p><p>Let’s read the image and preview.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f121185139736" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>// read the image...</span></p><p><span>var</span><span> </span><span>reader</span><span> </span>=<span> </span><span>new</span><span> </span><span>FileReader</span><span>(</span><span>)</span><span>;</span></p><p><span>reader</span><span>.</span><span>onload</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>src</span><span> </span>=<span> </span><span>e</span><span>.</span><span>target</span><span>.</span><span>result</span><span>;</span></p><p><span>}</span></p><p><span>reader</span><span>.</span><span>readAsDataURL</span><span>(</span><span>image</span><span>)</span><span>;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0001 seconds] --><p><br> Here we create a <code>FileReader</code> object and set up the <code>onload</code> event handler for it. Then, we read the image as a data URL. This is done asynchronously. After the reading is finished, the onload callback will be called. The src attribute of the <code>img</code> element will be set to <code>e.target.result</code> which is a base64 data URL.</p><h2 id="2uploading">2. Uploading</h2><p>We can use <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" data-wpel-link="external" rel="nofollow noopener"><code>FormData</code></a> interface to create form data to send them to the server. Then, we can use AJAX with <code>XMLHttpRequest</code> to perform an asynchronous upload.</p><p>Creating form data:<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f125420472044" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>// create FormData</span></p><p><span>var</span><span> </span><span>formData</span><span> </span>=<span> </span><span>new</span><span> </span><span>FormData</span><span>(</span><span>)</span><span>;</span></p><p><span>formData</span><span>.</span><span>append</span><span>(</span><span>'image'</span><span>,</span><span> </span><span>image</span><span>)</span><span>;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0001 seconds] --><p><br> AJAX request:<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f126232497514" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p></div></td><td><div><p><span>var</span><span> </span><span>uploadLocation</span><span> </span>=<span> </span><span>'UPLOAD_LOCATION'</span><span>;</span></p><p><span>var</span><span> </span><span>ajax</span><span> </span>=<span> </span><span>new</span><span> </span><span>XMLHttpRequest</span><span>(</span><span>)</span><span>;</span></p><p><span>ajax</span><span>.</span><span>open</span><span>(</span><span>"POST"</span><span>,</span><span> </span><span>uploadLocation</span><span>,</span><span> </span><span>true</span><span>)</span><span>;</span></p><p><span>ajax</span><span>.</span><span>onreadystatechange</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>ajax</span><span>.</span><span>readyState</span><span> </span>===<span> </span><span>4</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>ajax</span><span>.</span><span>status</span><span> </span>===<span> </span><span>200</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// done!</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span> </span><span>else</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// error!</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>}</span></p><p><span>ajax</span><span>.</span><span>upload</span><span>.</span><span>onprogress</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// change progress</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// (reduce the width of overlay)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>perc</span><span> </span>=<span> </span><span>(</span><span>e</span><span>.</span><span>loaded</span><span> </span>/<span> </span><span>e</span><span>.</span><span>total</span><span> </span>*<span> </span><span>100</span><span>)</span><span> </span><span>|</span><span>|</span><span> </span><span>100</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span> </span>=<span> </span><span>100</span><span> </span>-<span> </span><span>perc</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>overlay</span><span>.</span><span>style</span><span>.</span><span>width</span><span> </span>=<span> </span><span>width</span><span>;</span></p><p><span>}</span></p><p><span>ajax</span><span>.</span><span>send</span><span>(</span><span>formData</span><span>)</span><span>;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0004 seconds] --><p><br> Here <code>uploadLocation</code> should be set to the server URL of the <a href="https://supunkavinda.blog/php/image-upload-ajax-php-mysql" target="_blank" data-wpel-link="external" rel="nofollow noopener">upload handler</a>. The <code>onreadystatechange</code> event handler is called when the state is changed. <code>ajax.readyState</code> is 4 when the request is completed. <code>ajax.status</code> is the status code sent by the server. Usually, servers set the status code to 200 when the request is successful. <code>ajax.upload.onprogress</code> event handler is called each time when the progress is updated. In this function, we calculate the percentage of the progress and reduce that from the overlay’s width.</p><p>And, the <code>|| 100</code> part is a simple bug fix. Sometimes, <code>(e.loaded / e.total * 100)</code> can return <code>NaN</code>. In that case, the default value, 100, will be used.</p><p>Here’s the complete function.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f128976749650" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p></div></td><td><div><p><span>function</span><span> </span><span>previewAnduploadImage</span><span>(</span><span>image</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// container</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>imgView</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"div"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>className</span><span> </span>=<span> </span><span>"image-view"</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imagePreviewRegion</span><span>.</span><span>appendChild</span><span>(</span><span>imgView</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// previewing image</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>img</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"img"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>appendChild</span><span>(</span><span>img</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// progress overlay</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>overlay</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>"div"</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>overlay</span><span>.</span><span>className</span><span> </span>=<span> </span><span>"overlay"</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imgView</span><span>.</span><span>appendChild</span><span>(</span><span>overlay</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// read the image...</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>reader</span><span> </span>=<span> </span><span>new</span><span> </span><span>FileReader</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>reader</span><span>.</span><span>onload</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>img</span><span>.</span><span>src</span><span> </span>=<span> </span><span>e</span><span>.</span><span>target</span><span>.</span><span>result</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>reader</span><span>.</span><span>readAsDataURL</span><span>(</span><span>image</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// create FormData</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>formData</span><span> </span>=<span> </span><span>new</span><span> </span><span>FormData</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>formData</span><span>.</span><span>append</span><span>(</span><span>'image'</span><span>,</span><span> </span><span>image</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// upload the image</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>uploadLocation</span><span> </span>=<span> </span><span>'UPLOAD_LOCATION'</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>ajax</span><span> </span>=<span> </span><span>new</span><span> </span><span>XMLHttpRequest</span><span>(</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ajax</span><span>.</span><span>open</span><span>(</span><span>"POST"</span><span>,</span><span> </span><span>uploadLocation</span><span>,</span><span> </span><span>true</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ajax</span><span>.</span><span>onreadystatechange</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>ajax</span><span>.</span><span>readyState</span><span> </span>===<span> </span><span>4</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>if</span><span> </span><span>(</span><span>ajax</span><span>.</span><span>status</span><span> </span>===<span> </span><span>200</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// done!</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span><span> </span><span>else</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// error!</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ajax</span><span>.</span><span>upload</span><span>.</span><span>onprogress</span><span> </span>=<span> </span><span>function</span><span>(</span><span>e</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// change progress</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>// (reduce the width of overlay)</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>perc</span><span> </span>=<span> </span><span>(</span><span>e</span><span>.</span><span>loaded</span><span> </span>/<span> </span><span>e</span><span>.</span><span>total</span><span> </span>*<span> </span><span>100</span><span>)</span><span> </span><span>|</span><span>|</span><span> </span><span>100</span><span>,</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span> </span>=<span> </span><span>100</span><span> </span>-<span> </span><span>perc</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>overlay</span><span>.</span><span>style</span><span>.</span><span>width</span><span> </span>=<span> </span><span>width</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>}</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ajax</span><span>.</span><span>send</span><span>(</span><span>formData</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0008 seconds] --><p><br> Finally, here’s the CSS I created. You can change it as you like.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f129409180280" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"><div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p></div></td><td><div><p><span>#drop-region </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>background-color</span><span>:</span><span> </span><span>#fff</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>border-radius</span><span>:</span><span>20px</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>box-shadow</span><span>:</span><span>0</span><span> </span><span>0</span><span> </span><span>35px</span><span> </span><span>rgba</span><span>(</span><span>0,0,0,0.05</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span>:</span><span>400px</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>padding</span><span>:</span><span>60px</span><span> </span><span>40px</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>text-align</span><span>:</span><span> </span><span>center</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>cursor</span><span>:</span><span>pointer</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>transition</span><span>:</span><span>.3s</span><span>;</span></p><p><span>}</span></p><p><span>#drop-region:hover </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>box-shadow</span><span>:</span><span>0</span><span> </span><span>0</span><span> </span><span>45px</span><span> </span><span>rgba</span><span>(</span><span>0,0,0,0.1</span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>#image-preview </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>margin-top</span><span>:</span><span>20px</span><span>;</span></p><p><span>}</span></p><p><span>#image-preview .image-view </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>display</span><span>:</span><span> </span><span>inline-block</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>position</span><span>:</span><span>relative</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>margin-right</span><span>:</span><span> </span><span>13px</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>margin-bottom</span><span>:</span><span> </span><span>13px</span><span>;</span></p><p><span>}</span></p><p><span>#image-preview .image-view img </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>max-width</span><span>:</span><span> </span><span>100px</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>max-height</span><span>:</span><span> </span><span>100px</span><span>;</span></p><p><span>}</span></p><p><span>#image-preview .overlay </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>position</span><span>:</span><span> </span><span>absolute</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span>:</span><span> </span><span>100%</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>height</span><span>:</span><span> </span><span>100%</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>z-index</span><span>:</span><span> </span><span>2</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>background</span><span>:</span><span> </span><span>rgba</span><span>(</span><span>255,255,255,0.5</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0004 seconds] --><h2 id="additionalimprovements">Additional Improvements</h2><h3 id="1detectdragdropfeatureandchangethemessage">1. Detect drag &amp; drop feature and change the message</h3><p>It is not useful to show the message “Drag &amp; Drop images or click to upload” on browsers which don’t support the Drag and Drop API. So, we can detect the feature and change the message.</p><p>Detect function is taken from <a href="http://modernizr.com/" target="_blank" data-wpel-link="external" rel="nofollow noopener">Modernizr</a>.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f12e531532577" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>function</span><span> </span><span>detectDragDrop</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>var</span><span> </span><span>div</span><span> </span>=<span> </span><span>document</span><span>.</span><span>createElement</span><span>(</span><span>'div'</span><span>)</span><span>;</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>return</span><span> </span><span>(</span><span>'draggable'</span><span> </span><span>in</span><span> </span><span>div</span><span>)</span><span> </span><span>|</span><span>|</span><span> </span><span>(</span><span>'ondragstart'</span><span> </span><span>in</span><span> </span><span>div</span><span> </span><span>&amp;&amp; 'ondrop' in div)</span></p><p><span>}</span></p><p><span>// change the message</span></p><p><span>var dragSupported = detectDragDrop();</span></p><p><span>if</span><span> </span><span>(</span><span>!</span><span>dragSupported</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>document</span><span>.</span><span>getElementsByClassName</span><span>(</span><span>"drop-message"</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span><span>innerHTML</span><span> </span>=<span> </span><span>'Click to upload'</span><span>;</span></p><p><span>}</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><h3 id="2highlightondragenter">2. Highlight on dragenter</h3><p>We can highlight the <code>dropRegion</code> when a file is dragging over using the drag events.<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f12f326298511" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragenter'</span><span>,</span><span> </span><span>highlight</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragover'</span><span>,</span><span> </span><span>highlight</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'dragleave'</span><span>,</span><span> </span><span>unhighlight</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>dropRegion</span><span>.</span><span>addEventListener</span><span>(</span><span>'drop'</span><span>,</span><span> </span><span>unhighlight</span><span>,</span><span> </span><span>false</span><span>)</span><span>;</span></p><p><span>function</span><span> </span><span>highlight</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>dropRegion</span><span>.</span><span>classList</span><span>.</span><span>add</span><span>(</span><span>'highlighted'</span><span>)</span><span>;</span></p><p><span>}</span></p><p><span>function</span><span> </span><span>unhighlight</span><span>(</span><span>)</span><span> </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>dropRegion</span><span>.</span><span>classList</span><span>.</span><span>remove</span><span>(</span><span>"highlighted"</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0002 seconds] --><p><br> Then, some CSS for <code>.highlighted</code> will make the dropRegion more interesting. For example,<br></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5e98b9e73f131884608432" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>.highlighted </span><span>{</span></p><p><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>background-color</span><span>:</span><span>grey</span><span>;</span></p><p><span>}</span></p></div></td></tr></tbody></table></div></div> <!-- [Format Time: 0.0000 seconds] --><h2 id="conclusion">Conclusion</h2><p>In this article, I described how to upload a file using drag and drop. It is true that some effort is needed to create a drag and drop functionality. However, if you use a library like jquery the DOM manipulation would be much easier even the process is the same. If you need it, you can use ES6 and make syntax shorter. The <code>fetch()</code> API can also be instead of <code>XMLHttpRequest</code>. Finally, check out and play with the <a href="https://jsfiddle.net/SupunKavinda/vfxdwtpc/1/" target="_blank" data-wpel-link="external" rel="nofollow noopener">JSFiddle</a> I created. I used the free service <a href="https://api.imgbb.com/" target="_blank" data-wpel-link="external" rel="nofollow noopener">IMGBB</a> for image uploading.</p><div id="block_author-rcl"><h3>About the author</h3><div><div><div data-user-id="756"><div><div><p><a title="Supun Kavinda" href="https://blog.soshace.com/author/supunkavinda1125/" data-wpel-link="internal"> <img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20%20%22%3E%3C/svg%3E" data-src="https://lh3.googleusercontent.com/a-/AAuE7mAdtfEtFtM6YDRjaYTRyFF0ZFZRtBgA2UuMT5oQBg?sz=50"> </a></p><div><p><span>Registered 20-12-2019</span> <span>|</span> <span>Last seen 1 month ago</span> <span><span>24</span></span></p></div></div></div></div></div></div></div> <!-- div class="social__list social__list_vert" --><!-- /social__list --><div><section><h5><a target="_blank" href="https://soshace.com/jobs" data-wpel-link="exclude">Vacancies</a></h5><ul><li> <a target="_blank" href="https://soshace.com/jobs/cto-backend-or-fullstack-upmy-25-02-2020" data-content="CTO (backend or fullstack)" data-wpel-link="exclude">CTO (backend or fullstack)</a><img src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e5531f3c5cb934e48e7f166-144x144.jpeg" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e5531f3c5cb934e48e7f166-144x144.jpeg" alt="Upmy"><a target="_blank" href="https://soshace.com/company/upmy" data-wpel-link="exclude">Upmy</a>&nbsp;&nbsp;&nbsp;(<a target="_blank" href="https://soshace.com/jobs?skills=Node.js" data-wpel-link="exclude">Node.js</a>, <a target="_blank" href="https://soshace.com/jobs?skills=Python" data-wpel-link="exclude">Python</a>, <a target="_blank" href="https://soshace.com/jobs?skills=JS" data-wpel-link="exclude">JS</a>, <a target="_blank" href="https://soshace.com/jobs?skills=AWS" data-wpel-link="exclude">AWS</a>)</li><li> <a target="_blank" href="https://soshace.com/jobs/laravel-back-end-web-developer-remote-soshace-17-10-2019" data-content="Laravel Back-end web developer (remote)" data-wpel-link="exclude">Laravel Back-end web developer (remote)</a><img src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/11/soshace-logo.png" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2019/11/soshace-logo.png" alt="Soshace"><a target="_blank" href="https://soshace.com/company/soshace" data-wpel-link="exclude">Soshace</a>&nbsp;&nbsp;&nbsp;(<a target="_blank" href="https://soshace.com/jobs?skills=Laravel" data-wpel-link="exclude">Laravel</a>, <a target="_blank" href="https://soshace.com/jobs?skills=PHP" data-wpel-link="exclude">PHP</a>, <a target="_blank" href="https://soshace.com/jobs?skills=MySQL" data-wpel-link="exclude">MySQL</a>, <a target="_blank" href="https://soshace.com/jobs?skills=MongoDB" data-wpel-link="exclude">MongoDB</a>, <a target="_blank" href="https://soshace.com/jobs?skills=AWS" data-wpel-link="exclude">AWS</a>)</li><li> <a target="_blank" href="https://soshace.com/jobs/lead-python-developer-ordercare-11-03-2020" data-content="Lead Python Developer" data-wpel-link="exclude">Lead Python Developer</a><img src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e68b1b1c5cb934e48e7f26c-144x144.png" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e68b1b1c5cb934e48e7f26c-144x144.png" alt="OrderCare"><a target="_blank" href="https://soshace.com/company/ordercare" data-wpel-link="exclude">OrderCare</a>&nbsp;&nbsp;&nbsp;(<a target="_blank" href="https://soshace.com/jobs?skills=Python" data-wpel-link="exclude">Python</a>, <a target="_blank" href="https://soshace.com/jobs?skills=Vue.js" data-wpel-link="exclude">Vue.js</a>)</li><li> <a target="_blank" href="https://soshace.com/jobs/senior-nodejs-developer-osome-25-02-2020" data-content="Senior Node.js Developer" data-wpel-link="exclude">Senior Node.js Developer</a><img src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e55402ec5cb934e48e7f16a-144x144.png" data-src="https://soshace-12d3e.kxcdn.com/wp-content/uploads/2020/03/5e55402ec5cb934e48e7f16a-144x144.png" alt="OSOME"><a target="_blank" href="https://soshace.com/company/osome" data-wpel-link="exclude">OSOME</a>&nbsp;&nbsp;&nbsp;(<a target="_blank" href="https://soshace.com/jobs?skills=Node.js" data-wpel-link="exclude">Node.js</a>, <a target="_blank" href="https://soshace.com/jobs?skills=JS" data-wpel-link="exclude">JS</a>, <a target="_blank" href="https://soshace.com/jobs?skills=AWS" data-wpel-link="exclude">AWS</a>)</li></ul></section></div></div></div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>