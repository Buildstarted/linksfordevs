<!DOCTYPE html>
<html lang="en">
<head>
    <title>
The Difference Between HTTP Auth, API Keys, and OAuth | Nordic APIs | - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="The Difference Between HTTP Auth, API Keys, and OAuth | Nordic APIs | - linksfor.dev(s)"/>
    <meta property="og:description" content="What is the difference between API authentication schemes, like HTTP Basic Authentication, API Keys, and OAuth? Learn the nuances here."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://nordicapis.com/the-difference-between-http-auth-api-keys-and-oauth/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - The Difference Between HTTP Auth, API Keys, and OAuth | Nordic APIs |</title>
<div class="readable">
        <h1>The Difference Between HTTP Auth, API Keys, and OAuth | Nordic APIs |</h1>
            <div>Reading time: 10-13 minutes</div>
        <div>Posted here: 09 Jul 2020</div>
        <p><a href="https://nordicapis.com/the-difference-between-http-auth-api-keys-and-oauth/">https://nordicapis.com/the-difference-between-http-auth-api-keys-and-oauth/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><article id="post-13214" role="article" itemscope="" itemtype="http://schema.org/BlogPosting"><header></header><section itemprop="articleBody"><p>When designing systems that enable secure authentication and authorization for API access, you must consider how your applications and users should authenticate themselves. In this article, we’ll compare three different ways to achieve this: <strong>API Keys</strong>, <strong>HTTP Basic Authentication</strong>, and <strong>OAuth</strong>. We’ll also highlight what the benefits and drawbacks are for each method.</p><p>Using API keys is a way to authenticate an application accessing the API, without referencing an actual user. The app adds the key to each API request, and the API can use the key to identify the application and authorize the request. The key can then be used to perform things like rate limiting, statistics, and similar actions.</p><p>How the key is sent differs between APIs. Some APIs use query parameters, some use the Authorize header, some use the body parameters, and so on. For instance, Google Cloud accepts the API key with a query parameter like this:</p><h2>Benefits</h2><p>It’s relatively easy for clients to use API keys. Even though most providers use different methods, adding a key to the API request is quite simple.</p><h2>Drawbacks</h2><p>The API key only identifies the application, not the user of the application. It’s often difficult to keep the key a secret. For server-to-server communication, it’s possible to hide the key using TLS and restrict the access to only be used in backend scenarios. However, since many other types of clients will consume the APIs, the keys are likely to leak.</p><p>Request URLs can end up in logs. JavaScript applications have more or less everything out in the open. Mobile apps are easy to decompile, and so on. Thus, developers shouldn’t rely on API keys for more than identifying the client for statistical purposes. Furthermore, API keys are also not standardized, meaning every API has a unique implementation.</p><p>HTTP Basic Auth is a simple method that creates a username and password style authentication for HTTP requests. This technique uses a header called Authorization, with a base64 encoded representation of the username and password. Depending on the use case, HTTP Basic Auth can authenticate the user of the application, or the app itself.</p><p>A request using basic authentication for the user <code>daniel</code> with the password <code>password</code> looks like this:</p><div id="crayon-5f0688c4ab671736832220" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>GET</span><span> </span><span>/</span><span> </span><span>HTTP</span><span>/</span><span>1.1</span></p><p><span>Host</span><span>:</span><span> </span><span>example</span><span>.</span><span>com</span></p><p><span>Authorization</span><span>:</span><span> </span><span>Basic </span><span>ZGFuaWVsOnBhc3N3b3Jk</span></p></div></td></tr></tbody></table></div></div><p>When using basic authentication for an API, this header is usually sent in every request. The credentials become more or less an API key when used as authentication for the application. Even if it represents a username and password, it’s still just a static string.</p><p>In theory, the password could be changed once in a while, but that’s usually not the case. As with the API keys, these credentials could leak to third parties. Granted, since credentials are sent in a header, they are less likely to end up in a log somewhere than using a query or path parameter, as the API key might do.</p><p>Using basic authentication for authenticating users is usually not recommended since sending the user credentials for every request would be considered bad practice. If HTTP Basic Auth is only used for a single request, it still requires the application to collect user credentials. The user has no means of knowing what the app will use them for, and the only way to revoke the access is to change the password.</p><h2>Benefits</h2><p>HTTP Basic Auth is a standardized way to send credentials. The header always looks the same, and the components are easy to implement. It’s easy to use and might be a decent authentication for applications in server-to-server environments.</p><h2>Drawbacks</h2><p>When a user is authenticated, the application is required to collect the password. From the user perspective, it’s not possible to know what the app does with the password. The application will gain full access to the account, and there’s no other way for the user to revoke the access than to change the password. Passwords are long-lived tokens, and if an attacker would get a hold of a password, it will likely go unnoticed. When used to authenticate the user, multi-factor authentication is not possible.</p><p>A token-based architecture relies on the fact that all services receive a token as proof that the application is allowed to call the service. The token is issued by a third party that can be trusted by both the application and service. Currently, the most popular protocol for obtaining these tokens is <a href="https://nordicapis.com/is-oauth-enough-for-financial-grade-api-security/" target="_blank" rel="noopener">OAuth 2.0</a>, specified in <a href="https://tools.ietf.org/html/rfc6749" target="_blank" rel="noopener">RFC 6749</a>.</p><p>OAuth specifies mechanisms where an application can ask a user for access to services on behalf of the user, and receive a token as proof that the user agreed. To demonstrate how OAuth works, let’s consider the following use case.</p><p>A user Alice has an account with a service where she can report the current indoor temperature of her home. Alice also wants to give a third-party application access to read the temperature data, to be able to plot the temperatures on a graph, and cross-reference with data from other services.</p><p>The temperature service exposes an API with the temperature data, so the third party app should be able to access the data quite easily. But how do we make only Alice’s data available to the application?</p><h2>Collecting the Credentials</h2><p>Using Basic authentication, the application can collect Alice’s username and password for the temperature service and use those to request the service’s data. The temperature service can then verify the username and password, and return the requested data.</p> <img src="https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service.png" alt="" width="1999" height="1199" srcset="https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service.png 1999w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-300x180.png 300w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-768x461.png 768w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-1024x614.png 1024w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-200x120.png 200w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-167x100.png 167w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-117x70.png 117w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-83x50.png 83w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/alice-gives-basic-authentication-to-service-400x240.png 400w" sizes="(max-width: 1999px) 100vw, 1999px"><p>However, as we noted about, there are a few problems with this approach:</p><ul><li>The user has to trust the application with the credentials. The user has no means of knowing what the credentials are used for.</li><li>The only way for the user to revoke the access is to change the password.</li><li>The application is not authenticated</li><li>The scope of access can not be controlled. The user has given away full access to the account.</li><li>Two-factor authentication cannot be used</li></ul><p>Historically, this has created a need for services to develop “application-specific passwords,” i.e., additional passwords for your account to be used by applications. This removes the need to give away the actual password, but it usually means giving away full access to the account. On the service provider side, you could build logic around combining application-specific passwords with API keys, which could limit access as well, but they would be entirely custom implementations.</p><h2>The OAuth way</h2><p>Let’s look at how we could solve this problem using an OAuth 2.0 strategy. To allow for better authentication, the temperature service must publish an Authorization Server (AS) in charge of issuing the tokens. This AS allows third party applications to register, and receive credentials for their application to be able to request access on behalf of users.</p><p>To request access, the application can then point the user’s browser to the AS with parameters like:</p><p>This request will take the user to the AS of the temperature service, where the AS can authenticate Alice with whatever method is available. Since this happens in the browser, multiple-factors are possible, and the only one seeing the data is the temperature service and the owner of the account.</p><p>Once Alice has authenticated, the AS can ask if it’s ok to allow access for the third party. In this case, the read_temperature scope was asked for, so the AS can prompt a specific question.</p><p>When Alice accepts, the client can authenticate itself. A token is issued as proof that Alice accepted the delegated access, and it is sent back to the third party application.</p><p>Now, the third party application can call the API using the received token. The token is sent along with the request by adding it to the Authorization header with the Bearer keyword as follows:</p><div id="crayon-5f0688c4ab677275511297" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>GET</span><span> </span><span>/</span><span>temperature </span><span>HTTP</span><span>/</span><span>1.1</span></p><p><span>Host </span><span>api</span><span>.</span><span>temperatures</span><span>.</span><span>com</span></p><p><span>Authorization</span><span>:</span><span> </span><span>Bearer</span><span> </span><span>&lt;</span><span>token</span><span>&gt;</span></p></div></td></tr></tbody></table></div></div><p>Upon receiving the request, the service can validate the token, and see that Alice allowed the application to read the temperature listings from her account, and return the data to the application.</p> <img src="https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice.png" alt="" width="1999" height="1199" srcset="https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice.png 1999w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-300x180.png 300w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-768x461.png 768w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-1024x614.png 1024w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-200x120.png 200w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-167x100.png 167w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-117x70.png 117w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-83x50.png 83w, https://19yw4b240vb03ws8qm25h366-wpengine.netdna-ssl.com/wp-content/uploads/oauth-2-flow-in-practice-alice-400x240.png 400w" sizes="(max-width: 1999px) 100vw, 1999px"><h2>Token Validation</h2><p>The issued token can be returned in two ways, either by returning a reference to the token data or returning the value of the token directly. For the reference token, the service will have to send a request to the AS to validate the token and return the data associated with it. This process is called introspection, and a sample response looks like this:</p><div id="crayon-5f0688c4ab679943866866" data-settings=" minimize scroll-mouseover"><div><table><tbody><tr><td data-settings="show"></td><td><div><p><span>{</span></p><p><span>"active"</span><span>:</span><span> </span><span>true</span><span>,</span></p><p><span>"sub"</span><span>:</span><span> </span>“<span>alice</span>”<span>,</span></p><p><span>"client_id"</span><span>:</span><span> </span><span>"third_party_graphs"</span><span>,</span></p><p><span>"scope"</span><span>:</span><span> </span><span>"read_temperatures"</span></p><p>…</p><p><span>}</span></p></div></td></tr></tbody></table></div></div><p>In this response, we can see that the user <code>alice</code> has granted the application <code>third_party_graphs</code> access to her account, with the scope of <code>read_temperatures</code>.<br> Based on this information, the service can decide if it should allow or deny the request. The <code>client_id</code> can also be used for statistics and rate-limiting of the application. Note that we only got the username of the account in the example, but since the AS does the authentication, it can also return additional claims in this response (things like account type, address, shoe-size, etc.) Claims can be anything that can allow the service to make a well informed authorization decision.</p><p>For returning the value, a token format like JSON Web Token (JWT) is usually used. This token can be signed or encrypted so that the service can verify the token by simply using the public key of the trusted AS.</p><p>Tip: Read <a href="https://curity.io/resources/architect/api-security/phantom-token-pattern/" target="_blank" rel="noopener">this resource</a> for recommendations on token types.</p><p>We can see a clear difference here:</p><ul><li>Alice only gave her credentials to the trusted site.</li><li>Multi-factor authentication can be used.</li><li>Alice can revoke access for the app, by asking the temperature site to withdraw her consent, without changing her password</li><li>Alice can allow the third-party app to access only certain information from her account.</li><li>Claims about the user can be delivered to the service directly through the request. No additional lookups required.</li><li>The flow is entirely standardized.</li></ul><p>Since OAuth 2.0 was developed in the time of a growing API market, most of the use cases for API keys and Basic Authentication have already been considered within the protocol. It’s safe to say that it beats the competition on all accounts. For small, specific use cases, it might be ok to use API keys or Basic Authentication, but anyone building systems that plan to grow should be looking into a token-based architecture such as the <a href="https://curity.io/resources/architect/neo-security/what-is-neosecurity/" target="_blank">Neo Security Architecture</a>.</p><p>In the use case above, I only described the user flow, but OAuth, of course, specifies alternative flows for obtaining tokens in server-to-server environments. You can read more on those in my earlier post that explores <a href="https://nordicapis.com/8-types-of-oauth-flows-and-powers/">eight types of OAuth flows and powers</a>.</p></section></article></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>