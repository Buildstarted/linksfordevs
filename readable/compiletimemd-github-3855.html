<!DOCTYPE html>
<html lang="en">
<head>
    <title>
compiletime.md - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="compiletime.md - linksfor.dev(s)"/>
    <meta property="og:description" content="GitHub Gist: instantly share code, notes, and snippets."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://gist.github.com/pervognsen/7d0a24f07ab6903693408b10b77e8660"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - compiletime.md</title>
<div class="readable">
        <h1>compiletime.md</h1>
            <div>Reading time: 2 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://gist.github.com/pervognsen/7d0a24f07ab6903693408b10b77e8660">https://gist.github.com/pervognsen/7d0a24f07ab6903693408b10b77e8660</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
  <div id="file-compiletime-md">
      
    
  <div id="file-compiletime-md-readme">
    <article itemprop="text"><p>We were having a discussion about compilation and linking performance on Twitter and I decided to do some measurements of the current
Ion compiler, which is written in C. It's built via a main.c file that #includes everything else. The codebase contained 8,840 lines of code
when I measured this. It only has a handful of external includes for the C standard library.</p>
<p>Here I'm doing a full rebuild with fast-debug flags, using the /Bt flag to give a timing breakdown between frontend, backend and link:</p>
<pre><code>OptRef: Total time = 0.000s
OptIcf: Total time = 0.015s
Pass 1: Interval #1, time = 0.062s
Pass 2: Interval #2, time = 0.016s
Final: Total time = 0.078s
time(C:\...\bin\HostX64\x64\link.exe)=0.105s
Command took 0:0:0.32 (0.32s total)
</code></pre>
<p>That's 78 ms for the compile and 105 ms for the link. You'll see this doesn't add up to the total measured time from my timeit utility.
I assume that's primarily because the compiler has a startup cost that isn't included in their breakdown. That would suggest that part
of the cost is fixed and won't scale with larger codebases, although I haven't done experiments to validate this hypothesis.</p>
<p>For comparison, I tried building it with tcc on Windows, which has an integrated linker. The total compile and link time to produce the
final executable on disk is 70 ms as measured by timeit.</p>
</article>
  </div>

  </div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>