<!DOCTYPE html>
<html lang="en">
<head>
    <title>
I wanna go fast: HTTPS&#x27; massive speed advantage - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="I wanna go fast: HTTPS&#x27; massive speed advantage - linksfor.dev(s)"/>
    <meta property="article:author" content="Troy Hunt"/>
    <meta property="og:description" content="I tweeted this the other day, and the internet was not pleased:  HTTPS is slow. No - wait - is it HTTP that&amp;#39;s slow?! https://t.co/T49GG7oCaK pic.twitter.com/cfnYOpXMWc &amp;mdash; Troy Hunt (@troyhunt) July 8, 2016 In fact, a bunch of the internet was pretty"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - I wanna go fast: HTTPS&#x27; massive speed advantage</title>
<div class="readable">
        <h1>I wanna go fast: HTTPS&#x27; massive speed advantage</h1>
            <div>by Troy Hunt</div>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 14 Jun 2019</div>
        <p><a href="https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/">https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section>
            <!--kg-card-begin: markdown--><p>I tweeted this the other day, and the internet was not pleased:</p>
<twitter-widget id="twitter-widget-0" data-tweet-id="751317949349130240"></twitter-widget>

<p>In fact, a bunch of the internet was pretty upset. "It's not fair!", they cried. "You're comparing apples and oranges!", they raged.</p>
<p>No, it's not fair, <em>the internet is not fair</em>. But that's just how the web is today and whilst you might not like that it's not fair, that's the ballgame we're playing. When it comes to performance tests, I don't care about "fair", I only care about one thing:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/lAsNv2Vu0DvR8i67elmbHcXw8vU-copy-600x336.jpg" alt="Ricky Bobby - I Wanna Go Fast"></p>
<p>Let's take just a moment to put <em>how</em> fast into context. Here's the test from the tweet above over HTTP:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTP-Load.gif" alt="The HTTP Test"></p>
<p>The content kinda staggers in bit by bit as we've become accustomed to on the web these days. But now let's run the HTTPS test:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTPS-Load.gif" alt=""></p>
<p>Whoa! This is awesome! Job done, HTTPS is fast and HTTP is crap, nothing more to see here.</p>
<p>Well, almost, let's address the "It's not fair" whingers. The HTTPS test is faster because it uses HTTP/2 whist the HTTP test only uses HTTP/1.1. The naysayers are upset because they think the test should be comparing both the secure and insecure scheme across the same version of the protocol. Now we could do that with the <em>old</em> protocol, but <a href="http://caniuse.com/#search=http2">here's the problem with doing it across the newer protocol</a>:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTP2-Support.png" alt="HTTP/2 is only supported over HTTPS"></p>
<p>Hey, look at that, every current browser that supports HTTP/2 has got a little "2" annotation on it. Accordingly, that means this:</p>
<blockquote>
<p>Only supports HTTP2 over TLS (https)</p>
</blockquote>
<p>So in other words, if you wanna go fast you can only do it over the secure protocol, not the one that sends everything in the clear because no browser supports it. HTTP/2 is able to do this courtesy of <a href="http://qnimate.com/what-is-multiplexing-in-http2/">Multiplexing</a> so we're talking about asyncing a bunch of requests via binary streams across the one TCP connection. What that means is the difference between this way of loading images in the old version of the protocol:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTP-1-1-Loading-2.png" alt="Waterfall of HTTP/1.1"></p>
<p>And this way in the new version:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTP-2-Loading-1.png" alt="Waterfall of HTTP/2"></p>
<p>Get it? The old one is the very classic "waterfall" of requests occurring with minimal asynchronicity whilst the new one is more of a "cascade" of requests all happening at the same time. That's why you see a bunch of the images appearing in large batches in the animation earlier on as opposed to staggering in per the insecure protocol.</p>
<p>Now the naysayers will lament that the test is unrealistic because you've got 360 little images all loading on the one page. But it doesn't really matter because you could do it with 36 and the multiplexing is still going to make it way faster. Or perhaps more realistically, a couple of megs worth of chunky images, CSS, JS and all the other crap so many websites load today. They all get the perf benefits that HTTP/2 offers and some of them may well show even greater differences than observed in this test; those 360 little images only add up to 0.62MB whereas <a href="http://www.wired.com/2016/04/average-webpage-now-size-original-doom/">the average web page is now 2.3MB</a>. You're also looking at <a href="https://gigaom.com/2014/12/29/the-overweight-web-average-web-page-size-is-up-15-in-2014/">somewhere in the order of 100 requests too</a> so the comparison tests above may even be erring on the conservative side.</p>
<p>Of course the web server also has to support HTTP/2, so that means <a href="http://blogs.iis.net/davidso/http2">you can't get it on IIS yet</a> (we'll see it soon when Windows Server 2016 ships with IIS 10) unless you wrap CloudFlare around it (like this blog), <a href="https://www.cloudflare.com/http2/">which can serve its cached content over the newer version of the protocol</a>. CloudFlare also has a little speed comparison test on that page with both protocol versions served over HTTPS:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/CloudFlare-HTTP2-Test.png" alt="CloudFlare HTTP/2 Test"></p>
<p>The neat thing about this approach is that even if the origin website (the one CloudFlare is serving traffic from) doesn't support HTTP/2 (and Ghost Pro which this blog is on <em>does</em> support it), you can still get super-fast HTTP/2 speeds. Here's how to see it in action first hand: I have a website running on <a href="https://cloudflareonazure.com/">cloudflareonazure.com</a> which I use in my <a href="https://www.pluralsight.com/courses/cloudflare-security-getting-started">Getting Started with CloudFlare Security Pluralsight course</a> (don't worry that the site has mixed content, that's both intentional and not the point). This site is an Azure website which presently only runs on HTTP/1.1. Now let's drop into the Chrome dev tools, over to the network tab then right-click on a column heading to turn on the protocol column:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/Showing-the-protocol-on-requests-in-Chrome-2.png" alt="Showing the protocol on requests in Chrome"></p>
<p>I also turned on the domain column so that I could clearly show you this:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/Azure-requests-over-HTTP2.png" alt=""></p>
<p>Here we have requests going to a domain hosted on Azure which <em>can't</em> talk HTTP/2 yet the protocol being returned is "h2" which is the identifier for HTTPS over HTTP/2. We see this because all requests are routed through CloudFlare which <em>can</em> talk h2. Now of course if CloudFlare needs to pull content from an origin that doesn't talk h2 then there'll still be a bottleneck in the connection, but many requests won't come from the origin anyway. Two thirds of the traffic on this blog is served directly from their cache so that can come down over h2 and make a significant difference to speeds even when the origin is stuck on HTTP/1.1.</p>
<p>And lastly, for those who really, <em>really</em> want to live under the illusion that the web is "fair" and a head-to-head match of HTTP and HTTPS over 1.1 would yield a fundamentally different result in favour of going insecure, have a read of <a href="https://istlsfastyet.com/">Is TLS Fast Yet</a>. Even over the outgoing version of the protocol, the "encryption is slow" argument has gone the way of the marquee tag and remains an artefact held onto only by those living in the past. Actually, bugger it, if you really want to test both schemes over HTTP/1.1 then issue the requests with a header that only accepts 1.1 and see how that goes:</p>
<p><img src="https://www.troyhunt.com/content/images/2016/07/HTTP-vs-HTTPS-with-HTTP-1-1.png" alt="HTTP vs HTTPS with HTTP/1.1"></p>
<p>I just gave that a run with Fiddler open (which doesn't support HTTP/2 thus strips support for it from the request header) and it was <em>still</em> faster. Do it back to back a few times and the results will fluctuate (minor differences in connection quality etc), but you won't find a smoking gun pointing to how slow HTTPS is, even over HTTP/1.</p>
<p>This is all simply a test of "what's the fastest we can go over HTTP versus what's the fastest we can go over HTTPS". I don't want fair, I want fast. If you wanna go fast, serve content over HTTPS using HTTP/2.</p>
<!--kg-card-end: markdown-->

            <section>
                <a href="https://www.troyhunt.com/tag/security/">Security</a>
                <a href="https://www.troyhunt.com/tag/ssl/">SSL</a>
                <a href="https://www.troyhunt.com/tag/performance/">Performance</a>
            </section>
        </section><div>
            <section>
                <a href="https://twitter.com/share?text=Troy%20Hunt%3A%20I%20wanna%20go%20fast%3A%20HTTPS%27%20massive%20speed%20advantage&amp;url=https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/"><i></i> Tweet</a>
                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/"><i></i> Post</a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/"><i></i> Update</a>
                <a href="mailto:?subject=Troy%20Hunt%3A%20I%20wanna%20go%20fast%3A%20HTTPS%27%20massive%20speed%20advantage&amp;body=https://www.troyhunt.com/i-wanna-go-fast-https-massive-speed-advantage/"><i></i> Email</a>
                <a href="https://feeds.feedburner.com/TroyHunt"> RSS</a>
            </section>
            <section>
                <div>
                    
                    <p>Hi, I'm Troy Hunt, I write this blog, create courses for Pluralsight and am a Microsoft Regional Director and MVP who travels the world speaking at events and training technology professionals <a href="https://www.troyhunt.com/about"></a></p>
                </div>
            </section>
                
                
                
                

        </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>