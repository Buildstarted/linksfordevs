<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 3.0 Preview 9 and Entity Framework 6.3 Preview 9 | .NET Blog -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Announcing Entity Framework Core 3.0 Preview 9 and Entity Framework 6.3 Preview 9 | .NET Blog</h1>
    <div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://secure.gravatar.com/avatar/c16238388fe24348cb8d7c4cf974bb7b?s=58&amp;d=mm&amp;r=g" width="58" alt="Avatar" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 photo avatar-default"><p>Diego</p></div></div></div><p>The Preview 9 versions of the&#xA0;<a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/3.0.0-preview9.19423.6">EF Core 3.0 package</a>&#xA0;and the&#xA0;<a href="https://www.nuget.org/packages/EntityFramework/6.3.0-preview9-19423-04">EF 6.3 package</a>&#xA0;are now available for download from&#xA0;<a href="https://www.nuget.org/">nuget.org</a>.</p><p><strong>These are the last planned previews before we release the final versions later this month. We have almost completely stopped making changes to the product code, but we are still actively monitoring feedback for any important bugs that may be reported. So please install the previews to validate that all the functionality required by your applications is available and works correctly, and report any issues you find to either the&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/new">EF Core issue tracker</a>&#xA0;or the&#xA0;<a href="https://github.com/aspnet/EntityFramework6/issues/new">EF 6 issue tracker</a>&#xA0;on GitHub.</strong></p><p><strong>Even if we may not be able to fix many more issues in EF Core 3.0 at this point, we&#x2019;ll consider important bugs and regressions for the upcoming 3.1 release.</strong></p><h2 id="whats-new-in-ef-core-30-preview-9">What&#x2019;s new in EF Core 3.0 Preview 9</h2><p>Besides <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/features">all the other improvements in EF Core 3.0</a>, preview 9 includes&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues?q=is%3Aissue+milestone%3A3.0.0-preview9+is%3Aclosed">fixes for more than 100 issues</a>&#xA0;that we resolved since Preview 8. Here are a few highlights:</p><ul><li>Support for translating queries that project a single result form a collection using window functions (issue&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/10001">#10001</a>)</li><li>Support for translating queries with constants or parameters in the GROUP BY key (issue&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/14152">#14152</a>).</li><li>Improvements to our thread concurrency detection logic to reduce false positives (issue&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/14534">#14534</a>).</li></ul><p>In Preview 9 the functionality of the in-memory provider is still very limited, but this is already fixed in our daily builds. In fact,&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/milestone/42?closed=1">we have already fixed more than 20 issues</a>&#xA0;that aren&#x2019;t included in Preview 9, and we may still fix a few more before RTM.</p><p>Detailed instructions to install daily builds, including the necessary NuGet feeds, can be found in the&#xA0;<a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">How to get daily builds of ASP.NET Core</a>&#xA0;article.</p><h3 id="common-workarounds-for-linq-queries">Common workarounds for LINQ queries</h3><p>The LINQ implementation in EF Core 3.0 is designed to work very differently from the one used in previous versions of EF Core. For this reason, you are likely to run into issues with LINQ queries, especially when upgrading existing applications. Here are some workarounds that might help you get things working:</p><ul><li><strong>Try a&#xA0;<a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">daily build</a></strong>&#xA0;(as previously mentioned) to confirm that you aren&#x2019;t hitting an issue that has already been fixed.</li><li><strong>Switch to client evaluation explicitly:</strong>&#xA0;If your query filters data based on an expression that cannot be translated to SQL, you may need to switch to client evaluation explicitly by inserting a call to either&#xA0;<code>AsEnumerable()</code>,&#xA0;<code>AsAsyncEnumerable()</code>,&#xA0;<code>ToList()</code>, or&#xA0;<code>ToListAsync()</code>&#xA0;in the middle of the query. For example, the following query will no longer work in EF Core 3.0 because one of the predicates in the&#xA0;<em>where</em>&#xA0;clause requires client evaluation:<div class="highlight highlight-source-cs"><div id="crayon-5d707fa7587c3106620174" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5d707fa7587c3106620174-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">specialCustomers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-i">Customers</span></div><div class="crayon-line" id="crayon-5d707fa7587c3106620174-2"><span class="crayon-h">&#xA0;&#xA0;</span><span class="crayon-sy">.</span><span class="crayon-e">Where</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-sy">.</span><span class="crayon-v">Name</span><span class="crayon-sy">.</span><span class="crayon-e">StartsWith</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-e">IsSpecialCustomer</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td></tr></table></div></div></div><p>But if you know it is reasonable to process part of the filter on the client, you can rewrite the query as:</p><div class="highlight highlight-source-cs"><div id="crayon-5d707fa7587dc112062011" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5d707fa7587dc112062011-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">specialCustomers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-i">Customers</span></div><div class="crayon-line" id="crayon-5d707fa7587dc112062011-2"><span class="crayon-h">&#xA0;&#xA0;</span><span class="crayon-sy">.</span><span class="crayon-e">Where</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-sy">.</span><span class="crayon-v">Name</span><span class="crayon-sy">.</span><span class="crayon-e">StartsWith</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d707fa7587dc112062011-3"><span class="crayon-h">&#xA0;&#xA0;</span><span class="crayon-sy">.</span><span class="crayon-e">AsEnumerable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-c">// Start using LINQ to Objects (switch to client evaluation)</span></div><div class="crayon-line" id="crayon-5d707fa7587dc112062011-4"><span class="crayon-h">&#xA0;&#xA0;</span><span class="crayon-sy">.</span><span class="crayon-e">Where</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">IsSpecialCustomer</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td></tr></table></div></div></div><p>Remember that this is by-design: In EF Core 3.0,&#xA0;<a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes#linq-queries-are-no-longer-evaluated-on-the-client">LINQ operations that cannot be translated to SQL are no longer automatically evaluated on the client</a>.</p></li><li><strong>Use raw SQL queries:</strong>&#xA0;If some expression in your LINQ query is not translated correctly (or at all) to SQL, but you know what translation you would want to have generated, you may be able to work around the issue by executing your own SQL statement using the&#xA0;<code>FromSqlRaw()</code>&#xA0;or&#xA0;<code>FromSqlInterpolated()</code>&#xA0;methods.<p>Also make sure an issue exists in&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues">our issue tracker on GitHub</a>&#xA0;to support the translation of the specific expression.</p></li></ul><h3 id="breaking-changes">Breaking changes</h3><p>All breaking changes in this release are listed in the&#xA0;<a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes">Breaking changes in EF Core 3.0</a>&#xA0;article. We keep the list up to date on every preview, with the most impactful changes near the top of the list, to make it easier for you to react.</p><h3 id="obtaining-the-preview-9-packages">Obtaining the Preview 9 packages</h3><p>EF Core 3.0 is distributed exclusively as NuGet packages. As usual, add or upgrade the runtime to Preview 9 via the NuGet user interface, the Package Manager Console in Visual Studio, or via the&#xA0;<code>dotnet add package</code>&#xA0;command. In all cases, include the option to allow installing pre-release versions. For example, you can execute the following command to install the SQL Server provider:</p><div class="highlight highlight-text-shell-session"><div id="crayon-5d707fa7587ec683814218" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5d707fa7587ec683814218-1"><span class="crayon-e">dotnet </span><span class="crayon-e">add </span><span class="crayon-t">package</span><span class="crayon-h"> </span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">EntityFrameworkCore</span><span class="crayon-sy">.</span><span class="crayon-v">SqlServer</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">version</span><span class="crayon-h"> </span><span class="crayon-cn">3.0.0</span><span class="crayon-o">-</span><span class="crayon-o">*</span></div></div></td></tr></table></div></div></div><p>With .NET Core 3.0, the&#xA0;<code>dotnet ef</code>&#xA0;command-line tool is no longer included in the .NET Core SDK. Before you can execute EF Core migration or scaffolding commands, you&#x2019;ll have to install it as either a global or local tool. Due to limitations in&#xA0;<code>dotnet tool install</code>, installing preview tools requires specifying at least part of the preview version on the installation command. For example, to install the 3.0 Preview 9 version of&#xA0;<code>dotnet ef</code>&#xA0;as a global tool, execute the following command:</p><div class="highlight highlight-text-shell-session"><div id="crayon-5d707fa7587fc532365314" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5d707fa7587fc532365314-1"><span class="crayon-e">dotnet </span><span class="crayon-e">tool </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-m">global</span><span class="crayon-h"> </span><span class="crayon-v">dotnet</span><span class="crayon-o">-</span><span class="crayon-v">ef</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">version</span><span class="crayon-h"> </span><span class="crayon-cn">3.0.0</span><span class="crayon-o">-</span><span class="crayon-o">*</span><span class="crayon-h"> </span></div></div></td></tr></table></div></div></div><h2 id="whats-new-in-ef-63-preview-9">What&#x2019;s new in EF 6.3 Preview 9</h2><p>All of the work planned for the EF 6.3 package has been completed. We are now focused on monitoring your feedback and fixing any important bugs that may be reported.</p><p>As with EF Core, any bug fixes that happened after we branched for Preview 9 are available in&#xA0;<a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">our daily builds</a>.</p><h3 id="how-to-work-with-edmx-files-in-net-core-projects">How to work with EDMX files in .NET Core projects</h3><p>On the tooling side, we plan to release an updated EF6 designer in an upcoming update of Visual Studio 2019 which will work with projects that target .NET Core (tracked in issue&#xA0;<a href="https://github.com/aspnet/EntityFramework6/issues/883">#883</a>).</p><p>Until this new version of the designer is available, we recommend that you work with your EDMX files inside projects that target .NET Framework. You can then add the EDMX file and the generated classes for the entities and the DbContext as linked files to a .NET Core 3.0 or .NET Standard 2.1 project in the same solution. For example, the project file for the .NET Core project can include the linked files like this:</p><div class="highlight highlight-text-xml"><div id="crayon-5d707fa75880b454683674" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5d707fa75880b454683674-2"><span class="crayon-h">&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="crayon-o">&lt;</span><span class="crayon-e">EntityDeploy </span><span class="crayon-v">Include</span><span class="crayon-o">=</span><span class="crayon-s">&quot;..\EdmxDesignHost\Entities.edmx&quot;</span><span class="crayon-h"> </span><span class="crayon-v">Link</span><span class="crayon-o">=</span><span class="crayon-s">&quot;Model\Entities.edmx&quot;</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5d707fa75880b454683674-3"><span class="crayon-h">&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="crayon-o">&lt;</span><span class="crayon-e">Compile </span><span class="crayon-v">Include</span><span class="crayon-o">=</span><span class="crayon-s">&quot;..\EdmxDesignHost\Entities.Context.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-v">Link</span><span class="crayon-o">=</span><span class="crayon-s">&quot;Model\Entities.Context.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5d707fa75880b454683674-4"><span class="crayon-h">&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="crayon-o">&lt;</span><span class="crayon-e">Compile </span><span class="crayon-v">Include</span><span class="crayon-o">=</span><span class="crayon-s">&quot;..\EdmxDesignHost\Thing.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-v">Link</span><span class="crayon-o">=</span><span class="crayon-s">&quot;Model\Thing.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5d707fa75880b454683674-5"><span class="crayon-h">&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="crayon-o">&lt;</span><span class="crayon-e">Compile </span><span class="crayon-v">Include</span><span class="crayon-o">=</span><span class="crayon-s">&quot;..\EdmxDesignHost\Person.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-v">Link</span><span class="crayon-o">=</span><span class="crayon-s">&quot;Model\Person.cs&quot;</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div></div></td></tr></table></div></div></div><p>Note that the EDMX file is linked with the&#xA0;<code>EntityDeploy</code>&#xA0;build action. This is a special MSBuild task (now included in the EF 6.3 package) that takes care of adding the EF model into the target assembly as embedded resources (or copying it as files in the output folder, depending on the setting on the Metadata Artifact Processing setting in the EDMX). For more details on how to get this set up, see our&#xA0;<a href="https://aka.ms/EdmxDotNetCoreSample">EDMX .NET Core sample</a>.</p><p>You can choose to copy the files instead of linking them, but keep in mind that due to a bug in current builds of Visual Studio, copying the files from the .NET Framework project to the .NET Core project within Solution Explorer may cause hangs, so it is better to copy the files from the command line.</p><h3 id="feedback-requested-should-we-build-a-dotnet-ef6-tool">Feedback requested: Should we build a dotnet ef6 tool?</h3><p>We are also seeking feedback and possible contributions to enable a cross-platform command line experience for migrations commands, similar to&#xA0;<code>dotnet ef</code>&#xA0;but for EF6 (tracked in issue&#xA0;<a href="https://github.com/aspnet/EntityFramework6/issues/1053">#1053</a>). If you would like to see this happen, or if you would like to contribute to it, please vote or comment on the issue.</p><p>If you&#x2019;d like to track our progress more closely, we now publish weekly status updates to&#xA0;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/15403">GitHub</a>. We also post these status updates to our Twitter account,&#xA0;<a href="https://twitter.com/efmagicunicorns">@efmagicunicorns</a>.</p><h2 id="thank-you">Thank you</h2><p>Once more, thank you for trying our preview bits, and for all the bug reports and contributions that will help make EF Core 3.0 and EF 6.3 much better releases.</p></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>