<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Introducing C# 9: Top-level programs - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Introducing C# 9: Top-level programs - linksfor.dev(s)"/>
    <meta property="article:author" content="by anthonygiretti"/>
    <meta property="og:description" content="Introduction C# 9 introduces a super fun feature: Top-level programs. What&#x2019;s a Top-level program ?..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://anthonygiretti.com/2020/06/21/introducing-c-9-top-level-programs/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Introducing C# 9: Top-level programs</title>
<div class="readable">
        <h1>Introducing C# 9: Top-level programs</h1>
            <div>by by anthonygiretti</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 23 Jun 2020</div>
        <p><a href="https://anthonygiretti.com/2020/06/21/introducing-c-9-top-level-programs/">https://anthonygiretti.com/2020/06/21/introducing-c-9-top-level-programs/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="content">
<div id="primary">
	<main id="main">
		<!-- styled_blog-latest-posts-section -->
		<section>
			<div>
				<!-- Latest trend section -->
								<!-- styled_blog Main Content -->
				<div>
					<div>
						<!-- styled_blog Left Content -->
						

						<!-- styled_blog main content -->
						<div data-aos="fade-bottom" data-aos-delay="400">
							<div>
								<div>
									
<article id="post-19170">
			<!-- .entry-header -->
	
	<div>
						<div>
					<div>
											<!-- .entry-meta -->
				
				
<h2><strong>Introduction</strong></h2>



<p><strong>C# 9</strong> introduces a super fun feature: <strong>Top-level programs</strong>. Whatâ€™s a <strong>Top-level</strong> program ? This is a simpler way to write your program on its top level: a simpler <strong>Program.cs</strong> file</p>



<h2><strong>Before C# 9 and with C# 9</strong></h2>



<p>In your <strong>main</strong> program you have been able to write whatever you want, for example: </p>



<ul><li>async calls (obviously)</li><li>accessing args (obviously)</li><li>local functions (obviously again !)</li></ul>



<div id="gist103869084">
    <div>
      <div>
        <div>
  <div id="file-program-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-program-cs-L1" data-line-number="1"></td>
        <td id="file-program-cs-LC1"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-program-cs-L2" data-line-number="2"></td>
        <td id="file-program-cs-LC2"><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;</td>
      </tr>
      <tr>
        <td id="file-program-cs-L3" data-line-number="3"></td>
        <td id="file-program-cs-LC3">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L4" data-line-number="4"></td>
        <td id="file-program-cs-LC4"><span>namespace</span> <span>CSharp9Demo</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L5" data-line-number="5"></td>
        <td id="file-program-cs-LC5">{</td>
      </tr>
      <tr>
        <td id="file-program-cs-L6" data-line-number="6"></td>
        <td id="file-program-cs-LC6">    <span>class</span> <span>Program</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L7" data-line-number="7"></td>
        <td id="file-program-cs-LC7">    {</td>
      </tr>
      <tr>
        <td id="file-program-cs-L8" data-line-number="8"></td>
        <td id="file-program-cs-LC8">        <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)</td>
      </tr>
      <tr>
        <td id="file-program-cs-L9" data-line-number="9"></td>
        <td id="file-program-cs-LC9">        {</td>
      </tr>
      <tr>
        <td id="file-program-cs-L10" data-line-number="10"></td>
        <td id="file-program-cs-LC10">            <span><span>//</span> Accessing an argument passed to the program</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L11" data-line-number="11"></td>
        <td id="file-program-cs-LC11">            <span>var</span> <span>param</span> <span>=</span> <span>args</span>[<span>0</span>];</td>
      </tr>
      <tr>
        <td id="file-program-cs-L12" data-line-number="12"></td>
        <td id="file-program-cs-LC12">            <span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>You passed the param {<span>param</span>}<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L13" data-line-number="13"></td>
        <td id="file-program-cs-LC13">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L14" data-line-number="14"></td>
        <td id="file-program-cs-LC14">            <span><span>//</span> Calling an async service</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L15" data-line-number="15"></td>
        <td id="file-program-cs-LC15">            <span>var</span> <span>myservice</span> <span>=</span> <span>new</span> <span>MyService</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L16" data-line-number="16"></td>
        <td id="file-program-cs-LC16">            <span>var</span> <span>result</span> <span>=</span> <span>await</span> <span>myservice</span>.<span>DoWorkAsync</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L17" data-line-number="17"></td>
        <td id="file-program-cs-LC17">            <span>Console</span>.<span>WriteLine</span>(<span>result</span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L18" data-line-number="18"></td>
        <td id="file-program-cs-LC18">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L19" data-line-number="19"></td>
        <td id="file-program-cs-LC19">            <span><span>//</span> Calling Local function </span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L20" data-line-number="20"></td>
        <td id="file-program-cs-LC20">            <span>void</span> <span>DoWork</span>()</td>
      </tr>
      <tr>
        <td id="file-program-cs-L21" data-line-number="21"></td>
        <td id="file-program-cs-LC21">            {</td>
      </tr>
      <tr>
        <td id="file-program-cs-L22" data-line-number="22"></td>
        <td id="file-program-cs-LC22">                <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>This is a local function<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L23" data-line-number="23"></td>
        <td id="file-program-cs-LC23">            }</td>
      </tr>
      <tr>
        <td id="file-program-cs-L24" data-line-number="24"></td>
        <td id="file-program-cs-LC24">            <span>DoWork</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L25" data-line-number="25"></td>
        <td id="file-program-cs-LC25">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L26" data-line-number="26"></td>
        <td id="file-program-cs-LC26">            <span>Console</span>.<span>ReadLine</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L27" data-line-number="27"></td>
        <td id="file-program-cs-LC27">        }</td>
      </tr>
      <tr>
        <td id="file-program-cs-L28" data-line-number="28"></td>
        <td id="file-program-cs-LC28">    }</td>
      </tr>
      <tr>
        <td id="file-program-cs-L29" data-line-number="29"></td>
        <td id="file-program-cs-LC29">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L30" data-line-number="30"></td>
        <td id="file-program-cs-LC30">    <span>public</span> <span>class</span> <span>MyService</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L31" data-line-number="31"></td>
        <td id="file-program-cs-LC31">    {</td>
      </tr>
      <tr>
        <td id="file-program-cs-L32" data-line-number="32"></td>
        <td id="file-program-cs-LC32">        <span>public</span> <span>async</span> <span>Task</span>&lt;<span>string</span>&gt; <span>DoWorkAsync</span>()</td>
      </tr>
      <tr>
        <td id="file-program-cs-L33" data-line-number="33"></td>
        <td id="file-program-cs-LC33">        {</td>
      </tr>
      <tr>
        <td id="file-program-cs-L34" data-line-number="34"></td>
        <td id="file-program-cs-LC34">            <span>return</span> <span>await</span> <span>Task</span>.<span>FromResult</span>(<span><span>"</span>This is an async method<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L35" data-line-number="35"></td>
        <td id="file-program-cs-LC35">        }</td>
      </tr>
      <tr>
        <td id="file-program-cs-L36" data-line-number="36"></td>
        <td id="file-program-cs-LC36">    }</td>
      </tr>
      <tr>
        <td id="file-program-cs-L37" data-line-number="37"></td>
        <td id="file-program-cs-LC37">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<p>Imagine now, being able to do the same but in a simpler way ? itâ€™s still possible with <strong>Top-level program</strong> feature. You will still be able to do the same:</p>



<div id="gist103869118">
    <div>
      <div>
        <div>
  <div id="file-program-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-program-cs-L1" data-line-number="1"></td>
        <td id="file-program-cs-LC1"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-program-cs-L2" data-line-number="2"></td>
        <td id="file-program-cs-LC2"><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;</td>
      </tr>
      <tr>
        <td id="file-program-cs-L3" data-line-number="3"></td>
        <td id="file-program-cs-LC3">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L4" data-line-number="4"></td>
        <td id="file-program-cs-LC4"><span><span>//</span> Accessing an argument passed to the program</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L5" data-line-number="5"></td>
        <td id="file-program-cs-LC5"><span>var</span> <span>param</span> <span>=</span> <span>args</span>[<span>0</span>];</td>
      </tr>
      <tr>
        <td id="file-program-cs-L6" data-line-number="6"></td>
        <td id="file-program-cs-LC6"><span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>You passed the param {<span>param</span>}<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L7" data-line-number="7"></td>
        <td id="file-program-cs-LC7">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L8" data-line-number="8"></td>
        <td id="file-program-cs-LC8"><span><span>//</span> Calling an async service</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L9" data-line-number="9"></td>
        <td id="file-program-cs-LC9"><span>var</span> <span>myservice</span> <span>=</span> <span>new</span> <span>MyService</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L10" data-line-number="10"></td>
        <td id="file-program-cs-LC10"><span>var</span> <span>result</span> <span>=</span> <span>await</span> <span>myservice</span>.<span>DoWorkAsync</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L11" data-line-number="11"></td>
        <td id="file-program-cs-LC11"><span>Console</span>.<span>WriteLine</span>(<span>result</span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L12" data-line-number="12"></td>
        <td id="file-program-cs-LC12">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L13" data-line-number="13"></td>
        <td id="file-program-cs-LC13"><span><span>//</span> Calling Local function </span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L14" data-line-number="14"></td>
        <td id="file-program-cs-LC14"><span>void</span> <span>DoWork</span>()</td>
      </tr>
      <tr>
        <td id="file-program-cs-L15" data-line-number="15"></td>
        <td id="file-program-cs-LC15">{</td>
      </tr>
      <tr>
        <td id="file-program-cs-L16" data-line-number="16"></td>
        <td id="file-program-cs-LC16">    <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>This is a local function<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-program-cs-L17" data-line-number="17"></td>
        <td id="file-program-cs-LC17">}</td>
      </tr>
      <tr>
        <td id="file-program-cs-L18" data-line-number="18"></td>
        <td id="file-program-cs-LC18"><span>DoWork</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L19" data-line-number="19"></td>
        <td id="file-program-cs-LC19">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L20" data-line-number="20"></td>
        <td id="file-program-cs-LC20"><span>Console</span>.<span>ReadLine</span>();</td>
      </tr>
      <tr>
        <td id="file-program-cs-L21" data-line-number="21"></td>
        <td id="file-program-cs-LC21">
</td>
      </tr>
      <tr>
        <td id="file-program-cs-L22" data-line-number="22"></td>
        <td id="file-program-cs-LC22"><span><span>/*</span> The following service must be defined in a separate file</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L23" data-line-number="23"></td>
        <td id="file-program-cs-LC23"><span>public class MyService</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L24" data-line-number="24"></td>
        <td id="file-program-cs-LC24"><span>{</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L25" data-line-number="25"></td>
        <td id="file-program-cs-LC25"><span>    public async Task&lt;string&gt; DoWorkAsync()</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L26" data-line-number="26"></td>
        <td id="file-program-cs-LC26"><span>    {</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L27" data-line-number="27"></td>
        <td id="file-program-cs-LC27"><span>        return await Task.FromResult("This is an async method");</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L28" data-line-number="28"></td>
        <td id="file-program-cs-LC28"><span>    }</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L29" data-line-number="29"></td>
        <td id="file-program-cs-LC29"><span>}</span></td>
      </tr>
      <tr>
        <td id="file-program-cs-L30" data-line-number="30"></td>
        <td id="file-program-cs-LC30"><span><span>*/</span></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<p>No needs anymore to write <strong>class Program</strong> and <strong>void (or async Task) Main(string[] args)</strong>. You will be able in the same way to call <strong>async </strong>code, accessing <strong>args </strong>before and even declare <strong>local functions</strong> and more! </p>



<p>Great isnâ€™t it ? ðŸ˜‰</p>

			</div> <!-- col md end -->
		</div> <!-- row end -->
			</div><!-- end row -->

</article>		<div>
			<div>
				<div>
					
	<nav role="navigation" aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>
	<div>
		<div>
			<div>
				<p><img alt="" src="https://secure.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/?s=192&amp;d=mm&amp;r=g 2x" height="96" width="96"></p>
			</div>
			<div>
				<div><h3>
					Written by</h3>
					<h2>anthonygiretti</h2>
					<p>Anthony is a specialist in Web technologies (14 years of experience), in particular Microsoft .NET and learns the Cloud Azure platform.
He has received twice the Microsoft MVP award and he is also certified Microsoft MCSD and Azure Fundamentals.</p>
				</div>
			</div>
		</div>
	</div>
	

				</div>
			</div>
		</div>
									</div>
							</div>
						</div>

						<!-- styled_blog right content -->
						
					</div>
				</div>
			</div>
		</section>
	</main>
</div>

	</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>