<!DOCTYPE html>
<html lang="en">
<head>
    <title>
davidfowl/FeatherHttp - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="davidfowl/FeatherHttp - linksfor.dev(s)"/>
    <meta property="article:author" content="davidfowl"/>
    <meta property="og:description" content="A lightweight low ceremony API for .NET Core services. - davidfowl/FeatherHttp"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/davidfowl/FeatherHttp"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - davidfowl/FeatherHttp</title>
<div class="readable">
        <h1>davidfowl/FeatherHttp</h1>
            <div>by davidfowl</div>
            <div>Reading time: 5-7 minutes</div>
        <div>Posted here: 25 Nov 2019</div>
        <p><a href="https://github.com/davidfowl/FeatherHttp">https://github.com/davidfowl/FeatherHttp</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text"><h2>Feather HTTP</h2>
<p><a href="https://f.feedz.io/davidfowl/featherhttp/packages/FeatherHttp/latest/download" rel="nofollow"><img src="https://camo.githubusercontent.com/56843c5035eb5a7c02dad929349e13f7e792b61c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f656e64706f696e742e7376673f75726c3d6874747073253341253246253246662e666565647a2e696f2532466461766964666f776c2532466665617468657268747470253246736869656c6425324646656174686572487474702532466c6174657374266c6162656c3d4665617468657248747470" alt="feedz.io" data-canonical-src="https://img.shields.io/badge/endpoint.svg?url=https%3A%2F%2Ff.feedz.io%2Fdavidfowl%2Ffeatherhttp%2Fshield%2FFeatherHttp%2Flatest&amp;label=FeatherHttp"></a></p>
<p>A lightweight low ceremony APIs for .NET Core applications.</p>
<ul>
<li>Built on the same primitives as .NET Core</li>
<li>Optimized for building HTTP APIs quickly</li>
<li>Take advantage of existing .NET Core middleware and frameworks</li>
</ul>
<h3>Hello World</h3>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Http</span>;

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>app</span> <span>=</span> <span>WebApplication</span>.<span>Create</span>(<span>args</span>);

        <span>app</span>.<span>MapGet</span>(<span><span>"</span>/<span>"</span></span>, <span>async</span> <span>context</span> <span>=&gt;</span>
        {
            <span>await</span> <span>context</span>.<span>Response</span>.<span>WriteAsync</span>(<span><span>"</span>Hello World<span>"</span></span>);
        });

        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h3>HTTP APIs</h3>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Mvc</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>DependencyInjection</span>;

<span>public</span> <span>class</span> <span>HomeController</span>
{
    [<span>HttpGet</span>(<span><span>"</span>/<span>"</span></span>)]
    <span>public</span> <span>string</span> <span>HelloWorld</span>() <span>=&gt;</span> <span><span>"</span>Hello World<span>"</span></span>;
}

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>builder</span> <span>=</span> <span>WebApplication</span>.<span>CreateBuilder</span>(<span>args</span>);
        
        <span>builder</span>.<span>Services</span>.<span>AddControllers</span>();
        
        <span>var</span> <span>app</span> <span>=</span> <span>builder</span>.<span>Build</span>();

        <span>app</span>.<span>MapControllers</span>();
        
        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h3>Carter</h3>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Carter</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Http</span>;

<span>public</span> <span>class</span> <span>HomeModule</span> : <span>CarterModule</span>
{
    <span>public</span> <span>HomeModule</span>()
    {
        <span>Get</span>(<span><span>"</span>/<span>"</span></span>, <span>async</span> (<span>req</span>, <span>res</span>) <span>=&gt;</span> <span>await</span> <span>res</span>.<span>WriteAsync</span>(<span><span>"</span>Hello from Carter!<span>"</span></span>));
    }
}

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>builder</span> <span>=</span> <span>WebApplication</span>.<span>CreateBuilder</span>(<span>args</span>);

        <span>builder</span>.<span>Services</span>.<span>AddCarter</span>();

        <span>var</span> <span>app</span> <span>=</span> <span>builder</span>.<span>Build</span>();

        <span>app</span>.<span>MapCarter</span>();

        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h3>SignalR</h3>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>SignalR</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>DependencyInjection</span>;

<span>class</span> <span>Chat</span> : <span>Hub</span>
{
    <span>public</span> <span>Task</span> <span>Send</span>(<span>string</span> <span>message</span>) <span>=&gt;</span> <span>Clients</span>.<span>All</span>.<span>SendAsync</span>(<span><span>"</span>Send<span>"</span></span>, <span>message</span>);
}

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>builder</span> <span>=</span> <span>WebApplication</span>.<span>CreateBuilder</span>(<span>args</span>);
        
        <span>builder</span>.<span>Services</span>.<span>AddSignalR</span>();

        <span>var</span> <span>app</span> <span>=</span> <span>builder</span>.<span>Build</span>();
        
        <span>app</span>.<span>MapHub</span>&lt;<span>Chat</span>&gt;(<span><span>"</span>/chat<span>"</span></span>);
        
        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h3>GRPC</h3>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Grpc</span>.<span>Core</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>DependencyInjection</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Logging</span>;

<span>public</span> <span>class</span> <span>GreeterService</span> : <span>Greeter</span>.<span>GreeterBase</span>
{
    <span>public</span> <span>override</span> <span>Task</span>&lt;<span>HelloReply</span>&gt; <span>SayHello</span>(<span>HelloRequest</span> <span>request</span>, <span>ServerCallContext</span> <span>context</span>)
    {
        <span>return</span> <span>Task</span>.<span>FromResult</span>(<span>new</span> <span>HelloReply</span>
        {
            <span>Message</span> <span>=</span> <span><span>"</span>Hello <span>"</span></span> <span>+</span> <span>request</span>.<span>Name</span>
        });
    }
}

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>builder</span> <span>=</span> <span>WebApplication</span>.<span>CreateBuilder</span>(<span>args</span>);
       
        <span>builder</span>.<span>Services</span>.<span>AddGrpc</span>();

        <span>var</span> <span>app</span> <span>=</span> <span>builder</span>.<span>Build</span>();
        
        <span>app</span>.<span>Listen</span>(<span><span>"</span>https://localhost:3000<span>"</span></span>);

        <span>app</span>.<span>MapGrpcService</span>&lt;<span>GreeterService</span>&gt;();
        
        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h3>Uber Example</h3>
<ul>
<li>Serilog for logging</li>
<li>Autofac for DI</li>
<li>Yaml configuration provider</li>
</ul>
<div><pre><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;
<span>using</span> <span>Autofac</span>;
<span>using</span> <span>Autofac</span>.<span>Extensions</span>.<span>DependencyInjection</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;
<span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Http</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Configuration</span>;
<span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Hosting</span>;
<span>using</span> <span>Serilog</span>;

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>async</span> <span>Task</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>builder</span> <span>=</span> <span>WebApplication</span>.<span>CreateBuilder</span>(<span>args</span>);

        <span>builder</span>.<span>Configuration</span>.<span>AddYamlFile</span>(<span><span>"</span>appsettings.yml<span>"</span></span>, <span>optional</span>: <span>true</span>);

        <span>builder</span>.<span>Host</span>.<span>UseSerilog</span>((<span>context</span>, <span>configuration</span>) 
            <span>=</span><span>&gt;</span> <span>configuration</span>
                .<span>Enrich</span>
                .<span>FromLogContext</span>()
                .<span>WriteTo</span>
                .<span>Console</span>()
            );

        <span>builder</span>.<span>Host</span>.<span>UseServiceProviderFactory</span>(<span>new</span> <span>AutofacServiceProviderFactory</span>());

        <span>builder</span>.<span>Host</span>.<span>ConfigureContainer</span>&lt;<span>ContainerBuilder</span>&gt;(<span>b</span> <span>=&gt;</span>
        {
            <span><span>//</span> Register services using Autofac specific methods here</span>
        });

        <span>var</span> <span>app</span> <span>=</span> <span>builder</span>.<span>Build</span>();
        
        <span>app</span>.<span>Listen</span>(<span><span>"</span>http://localhost:3000<span>"</span></span>);
        
        <span>if</span> (<span>app</span>.<span>Environment</span>.<span>IsDevelopment</span>())
        {
            <span>app</span>.<span>UseDeveloperExceptionPage</span>();
        }

        <span><span>//</span> Be explicit about the routing middleware</span>
        <span>app</span>.<span>UseRouting</span>();

        <span>app</span>.<span>MapGet</span>(<span><span>"</span>/<span>"</span></span>, <span>async</span> <span>context</span> <span>=&gt;</span>
        {
            <span>await</span> <span>context</span>.<span>Response</span>.<span>WriteAsync</span>(<span><span>"</span>Hello World<span>"</span></span>);
        });

        <span>await</span> <span>app</span>.<span>RunAsync</span>();
    }
}</pre></div>
<h2>Using CI Builds</h2>
<p>To use the <code>dotnet new</code> template, use the following command</p>
<pre><code>dotnet new -i FeatherHttp.Templates::{version} --nuget-source https://f.feedz.io/davidfowl/featherhttp/nuget/index.json
</code></pre>
<p>Once you've installed the template, run:</p>
<pre><code>dotnet new feather -n {name}
</code></pre>
<p>This will create a new project using FeatherHttp.</p>
<p>To use CI builds add the following nuget feed:</p>
<div><pre>&lt;?<span>xml</span><span> version</span>=<span><span>"</span>1.0<span>"</span></span><span> encoding</span>=<span><span>"</span>utf-8<span>"</span></span>?&gt;
&lt;<span>configuration</span>&gt;
    &lt;<span>packageSources</span>&gt;
        &lt;<span>clear</span> /&gt;
        &lt;<span>add</span> <span>key</span>=<span><span>"</span>featherhttp<span>"</span></span> <span>value</span>=<span><span>"</span>https://f.feedz.io/davidfowl/featherhttp/nuget/index.json<span>"</span></span> /&gt;
        &lt;<span>add</span> <span>key</span>=<span><span>"</span>NuGet.org<span>"</span></span> <span>value</span>=<span><span>"</span>https://api.nuget.org/v3/index.json<span>"</span></span> /&gt;
    &lt;/<span>packageSources</span>&gt;
&lt;/<span>configuration</span>&gt;</pre></div>
<p>See the list of <a href="https://f.feedz.io/davidfowl/featherhttp/nuget/v3/packages/FeatherHttp/index.json" rel="nofollow">versions</a></p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
</body>
</html>