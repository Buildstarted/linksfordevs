<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Forms and Validation in Razor Components -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Forms and Validation in Razor Components</h1><div><div class="BlogPost-Content"><p><span class="featured">Let's look at the new forms and validation feature just added to Razor Components. We'll start with an overview of the forms and validation implementation, then look at what is included out of the box. We'll finish with an example of how to use it all.</span></p><p>It's been another great release for Blazor/Razor Components fans. We've had some cool new additions including pre-rendering and improved event handling, but I think the big one is forms and validation.</p><p>In this post, I'm going to give you a first look at this new feature. We'll start with an overview of how everything works, then take a look at the new components we have available to us, and finished up by looking at an example of their usage.</p><h2 id="overview-of-forms-and-validation">Overview of Forms and Validation</h2><p>Many of you may be glad to hear, that, out of the box, validation is based on data annotation, similar to MVC. This is a great starting point, as it's already such a well-established pattern in ASP.NET&nbsp;(MVC, Razor Pages).</p><p>Again, for anyone who's had experience with forms and validation in ASP.NET previously, there are a couple of familiar components. There's a validation summary component and a validation message component, which work in the same way as their namesakes in MVC.</p><p>But what if you're not a fan of data annotations? Well, that's ok too. As has been the case with Blazor since the start, the team has been very good at giving developers options where they can. Forms and validation are no different.</p><p>Although out of the box data annotations are included, you are free to swap them out for another validation system of your choice and fluent validations perhaps? If you don't like the default behavior of the new input controls, you can create your own. You can pretty much tailor the forms and validation system to your liking.</p><h2 id="whats-in-the-box">What's in the Box?</h2><p>Let's have a quick look over the new components that are included with forms and validation. As I said before, if you have any experience with ASP.NET&nbsp;MVC applications, then some of the names are probably going to look familiar to you.</p><h3 id="editform">EditForm</h3><p>This is your starting point when creating a form. This component wraps all form controls, it provides the infrastructure for managing form validation, and it provides some useful events to hook into when submitting the form: <code class="lang-csharp">OnValidSubmit</code>, <code class="lang-csharp">OnInvalidSubmit</code> and <code class="lang-csharp">OnSubmit</code>.</p><p>You can use <code class="lang-csharp">OnValidSubmit</code> and <code class="lang-csharp">OnInvalidSubmit</code> together, but <code class="lang-csharp">OnSubmit</code> can only be used alone. When using <code class="lang-csharp">OnValidSubmit</code> the framework will trigger validation for you, but when using <code class="lang-csharp">OnSubmit</code> you are responsible for making sure the form is valid.</p><p>The other important parameter to know about is the <code class="lang-csharp">Model</code> parameter. This is the top level model object for the form. It's in this object where you would specify your data annotations that the form will use for validation.</p><h3 id="dataannotationsvalidator">DataAnnotationsValidator</h3><p>The <code class="lang-csharp">DataAnnotationsValidator</code> component enables data annotations support for the form. If you wanted to use a different method for validation, then you could swap this component out and replace it with another implementation.</p><h3 id="validationsummary">ValidationSummary</h3><p>This component will list out the validation errors in your form as a simple list. You would usually place this at the top of your form. Again, this will sound very familiar if you've had previous experience with data annotations validation.</p><h3 id="validationmessage">ValidationMessage</h3><p>Very similar to the <code class="lang-csharp">ValidationSummary</code> component, the <code class="lang-csharp">ValidationMessage</code> component differs by showing the validation errors for a specific input field, specified using the <code class="lang-csharp">For</code> parameter. You would usually place this component close to the field it's validating.</p><h3 id="input-components">Input Components</h3><p>There are now six new components covering various input types. These are designed to work seamlessly with the components above to handle validation.</p><ul><li><code class="lang-csharp">InputText</code></li><li><code class="lang-csharp">InputTextArea</code></li><li><code class="lang-csharp">InputNumber</code></li><li><code class="lang-csharp">InputCheckbox</code></li><li><code class="lang-csharp">InputSelect</code></li><li><code class="lang-csharp">InputDate</code></li></ul><p>The names are pretty self-explanatory, but it's worth pointing out that <code class="lang-csharp">InputData</code> and <code class="lang-csharp">InputNumber</code> have some basic value parsing so an invalid date or a non-number value will automatically show as a validation error, which is neat. You may have also noticed that there is no radio button component out of the box. If you need to validate radio buttons, for now, you will need to write your own.</p><h2 id="usage-example">Usage Example</h2><p>Now that we know what the building blocks are, let's have a look at how we can use them. We'll set up a simple form using the following model.</p><pre><code class="lang-csharp">public class Film
{
  [Required, StringLength(50, ErrorMessage = "Title must be 50 characters or less")]
  public string Title { get; set; }

  [Required]
  public DateTime ReleaseDate { get; set; }

  [Range(1, 5, ErrorMessage = "Rating must be from 1 to 5")]
  public int Rating { get; set; }

  [Required]
  public string Genre { get; set; }

  public bool IsWatched { get; set; }

  [StringLength(500, ErrorMessage ="Comments must be 500 characters or less")]
  public string Comments { get; set; }
}</code></pre><p>I'm going to add the code for the form and then we can break it down to make sure it all makes sense.</p><pre><code class="lang-aspnet lang-markup">&lt;EditForm Model="@film" OnValidSubmit="@HandleFormSubmit"&gt;
  &lt;DataAnnotationsValidator /&gt;
  &lt;ValidationSummary /&gt;
  &lt;div&gt;
    &lt;label for="title"&gt;Title: &lt;/label&gt;
    &lt;InputText Id="title" bind-Value="@film.Title" /&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="release-date"&gt;Release Date: &lt;/label&gt;
    &lt;InputDate Id="release-date" bind-Value="@film.ReleaseDate" /&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="rating"&gt;Rating&lt;/label&gt;
    &lt;InputNumber Id="rating" bind-Value="@film.Rating" /&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="genre"&gt;Genre&lt;/label&gt;
    &lt;InputSelect bind-Value="@film.Genre"&gt;
      &lt;option value="horror"&gt;Horror&lt;/option&gt;
      &lt;option value="thriller"&gt;Thriller&lt;/option&gt;
      &lt;option value="comedy"&gt;Comedy&lt;/option&gt;
      &lt;option value="action"&gt;Action&lt;/option&gt;
      &lt;option value="romance"&gt;Romance&lt;/option&gt;
    &lt;/InputSelect&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="watched"&gt;Watched&lt;/label&gt;
    &lt;InputCheckbox Id="watched" bind-Value="@film.IsWatched" /&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="comments"&gt;Comments&lt;/label&gt;
    &lt;InputTextArea Id="comments" bind-Value="@film.Comments" /&gt;
  &lt;/div&gt;
  &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/EditForm&gt;

@functions {
  Film film = new Film();
  
  void HandleFormSubmit()
  {
    Console.WriteLine("Form is valid! Send the data.");
  }
}</code></pre><p>To start with, we're using the <code class="lang-csharp">EditForm</code> component to define the form. The <code class="lang-csharp">Model</code> parameter is set to the film instance declared in the functions block, and the <code class="lang-csharp">HandleFormSubmit</code> method is registered to the <code class="lang-csharp">OnValidSubmit</code> event.</p><p>Next is the <code class="lang-csharp">DataAnnotationsValidator</code>. This tells the form that we want to use data annotations to validate our fields. Then we have a <code class="lang-csharp">ValidationSummary</code> component, which will display any validation errors our form has.</p><p>The rest of the form is declaring the various input controls for the properties on our film object. Notice that they use the <code class="lang-csharp">bind-Value</code> syntax. If you've not seen this before, it is two-way binding. There are other options for binding values that offer greater control, but they are out of the scope of this post.</p><p>If we run the above code, it will look something like this:</p><p><img src="https://d585tldpucybw.cloudfront.net/sfimages/default-source/blogs/2019/2019-03/formsandvalidation.gif" alt="Forms and Validation Example"></p><h2 id="summary">Summary</h2><p>In this post we had a first look at the new forms and validation feature in Razor Components. We did an overview of how forms and validation works, looked at what's included out of the box, as well as covered a simple usage example.</p><h3>For More on Building Apps with Blazor</h3><p>Want to learn about creating great user interfaces with Blazor? Check out <a href="https://www.telerik.com/blazor-ui" title="" class="" target="">Telerik UI for Blazor</a>. It's currently in public preview, so give it a try and please let us know what you think. You can learn about the latest release (at time of writing that's 0.3) <a href="https://www.telerik.com/blogs/telerik-ui-for-blazor-0-3-0-is-released" title="" class="" target="">here</a>.</p><hr></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>