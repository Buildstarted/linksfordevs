<!DOCTYPE html>
<html lang="en">
<head>
    <title>
 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content=" - linksfor.dev(s)"/>
    <meta property="og:description" content="It is a lazy Tuesday afternoon. Perhaps you were idly browsing your favorite news aggregator, or visiting The Orange Website to wade through murky startup groupthink in search of interesting links."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://nsl.com/papers/denial.html"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - </title>
<div class="readable">
        <h1></h1>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 09 Mar 2020</div>
        <p><a href="http://nsl.com/papers/denial.html">http://nsl.com/papers/denial.html</a></p>
        <hr/>
<div id="readability-page-1" class="page">

<p>It is a lazy Tuesday afternoon. Perhaps you were idly browsing your favorite news aggregator, or visiting The Orange Website to wade through murky startup groupthink in search of interesting links.</p>

<p>Today, though, you arrived at an enigma. A proprietary, closed-source, commercial programming language. A bizarre anachronism. The programs, if you can call them that, resemble the results of a prolonged fistfight with a keyboard. The language is simply called “<a href="https://en.wikipedia.org/wiki/K_(programming_language)">K</a>”. You snort at the vulgar presumptuousness of a single-letter name, before self-consciously averting your eyes from the C compiler output in a nearby terminal.</p>

<p>One K example looks like this:</p>

<pre><code>+/!100
</code></pre>

<p>Completely illegible. Fortunately, another soul has provided a translation into something intuitive and natural:</p>

<pre><code>int sum = 0;
for (int i = 0; i &lt; 100; i++) {
	sum += i;
}
</code></pre>

<p>There is no visible correspondence between the structure of these programs. You discern no parts of speech in the K, no names to grasp onto to extract meaning. Frustrating, and yet… intriguing. K seems to be one of these “code golf” languages designed for writing cryptic one-liners that minimize (key)strokes and demonstrate one’s cleverness. Who doesn’t like to demonstrate their own cleverness? Then you scowl and remember that <em>clever</em> code is impossible to maintain.</p>

<p>Before a treatise can work its way out of your fingers on the value of <em>simple</em> code which is comprehensible to even the most junior Stanford-educated Google employee, (optimization being the root of all evil, as you once read, paraphrased) someone else points out that a more direct translation into <em>another</em> language might look like:</p>

<pre><code>sum = range(100).reduce(plus, 0)
</code></pre>

<p>The correspondence is clearer now. If each punctuation character in the K is a separate part of speech, and you reverse their order…</p>

<pre><code> +      /     !   100
plus reduce range 100
</code></pre>

<p>Backwards! You stifle a chuckle. What next? Still dubious, but increasingly invested in this puzzle, you spend some time reading more about K. A few <a href="https://github.com/kevinlawler/kona">rogue</a> <a href="https://github.com/JohnEarnest/ok">lunatics</a> have <a href="https://bitbucket.org/ngn/k/src/master/">furnished</a> mostly-working open source interpreters for dialects of the language, so you give them a try. You read a few <a href="http://archive.vector.org.uk/art10010830">essays</a> and <a href="https://github.com/JohnEarnest/ok/blob/gh-pages/docs/Programming.md">tutorials</a>, flip through the <a href="http://web.archive.org/web/20050504070651/http://www.kx.com/technical/documents/kreflite.pdf">manual for K2</a> that serves as the primary comprehensive reference for the language, and have a go at solving some <a href="https://projecteuler.net/">Project Euler</a> problems.</p>

<p>In the course of your reading you briefly encounter <a href="https://en.wikipedia.org/wiki/J_%28programming_language%29">J</a> and <a href="https://en.wikipedia.org/wiki/APL_(programming_language)">APL</a>, which seem even <em>more</em> alien than K, and yet… the same in many ways. J and APL have K’s right-to-left evaluation (in annoying defiance of <a href="https://pemdas.info/">PEMDAS</a>, for some reason), the <code>/</code> symbol means “reduce”, and you can add 5 to an entire matrix at once as easily as a single number. <em>Why</em> you would want this property remains elusive- it seems rather <em>academic</em> and <em>mathy</em>- but you can’t help but admit that it’s rather neat. You have a growing impression that K is not simply a one-off oddity, but rather a member of a whole family tree.</p>

<p>Fine, K has some appeal. Being able to dash off <code>,/</code> to flatten a list is nice. The “grade” operators <code>&lt;</code> and <code>&gt;</code> seemed like a clumsy way to sort at first, but you’re starting to see that “permutation vectors” have many other uses. There’s something deeply <em>right</em> about how list indexing and function application are the same operation. K seems too domain-specific to use for <em>real</em> work, but maybe it would be handy to implement some of the K primitives as a library for your favorite language?</p>

<p>The symbols still feel like a problem. Wouldn’t it be clearer and more readable to simply use spelled-out names? Maybe instead of writing:</p>

<pre><code>*&gt;#:'=
</code></pre>

<p>You could factor the definition apart and use more explicit syntax:</p>

<pre><code>groupIndices: {[list]
	: =list
}
countEach: {[dict]
	: #:'dict
}
maxIndex: {[list]
	: *&gt;list
}
mostCommon: {[list]
	: maxIndex[countEach[groupIndices[list]]]
}
</code></pre>

<p>In principle, this should be more readable and easier to understand. You have dutifully broken down the definition into reusable parts and given them clear, meaningful names, a best-practice that you learned in your earliest programming courses and have carried forward throughout your professional career. Still, <em>this time</em> there’s something worryingly unsatisfying about the results. The name “mostCommon” is longer than the <em>entire definition</em> in K if you write it more succinctly.</p>

<p>It is possible to write K as if it were a strange-looking Lisp, <a href="https://en.wikipedia.org/wiki/M-expression">M-Expressions</a> and all:</p>

<pre><code>fibs: {[n]
	if[less[n;3];:iota[n]]
	fibrec:{[list]
		if[equal[n;count[list]];:list]
		a:list[minus[count[list];1]]
		b:list[minus[count[list];2]]
		:_f[join[list;plus[a;b]]]
	}
	:fibrec[(0;1)]
}
</code></pre>

<p>Or you could express the same idea without conditionals, recursion, or any explicitly named variables:</p>

<pre><code>{x#x{x,+/-2#x}/0 1}
</code></pre>

<p>Does giving a K idiom a name make it <em>clearer</em>, or does it obscure what is <em>actually happening</em>?</p>

<pre><code>sum:     +/
raze:    ,/
ordinal: &lt;&lt;
</code></pre>

<p>The word “ordinal” can mean anything, but the composition <code>&lt;&lt;</code> has exactly one meaning. (That one took a while to click, but it was satisfying when it did.) If the primitive “group” was just that word to begin with, would you have known what it <em>did</em> any more than if you saw the symbol <code>=</code>?</p>

<pre><code>square: {[number] number*number}
square: {[n] n*n}
square: {x*x}
{x*x}
</code></pre>

<p>Sometimes a long name is more descriptive, but sometimes it’s just… longer.</p>

<p>You feel a perverse urge:</p>

<pre><code>sum:0
i:0
while[i&lt;100
	sum+:i
	i+:1
]
</code></pre>

<p>It’s more <em>explicit</em> than <code>+/!100</code>, but now it leaves a bad taste in your mouth.</p>

<p>Your old languages don’t feel quite the same.</p>

<p>Reviewing a patch one of your coworkers submitted today, you recognize a loop with a familiar structure:</p>

<pre><code>let max = list[0];
for (let i = 0; i &lt; list.length; i++) {
	if (list[i] &gt; max) { max = list[i]; }
}
</code></pre>

<p>You suggest an alternative, wincing slightly at the lambda notation you need to avoid running afoul of JavaScript’s variadic <code>Math.max()</code>:</p>

<pre><code>list.reduce((x,y)=&gt;Math.max(x,y))
</code></pre>

<p>Your suggestion is rebuffed as cryptic and overly complex. Lambdas are hard to understand, not to mention <a href="https://www.artima.com/weblogs/viewpost.jsp?thread=98196"><code>reduce()</code></a>. A for loop is much more intuitive, natural, and readable, it is argued. If you used clever tricks everwhere in the codebase, it would be impossible to maintain. A compromise is committed:</p>

<pre><code>let max = list[0];
for (let i = 0; i &lt; list.length; i++) {
	max = Math.max(list[i], max);
}
</code></pre>

<p>On The Orange Website, someone has started a thread about an obscure language with a single-letter name. Commenters are quick to express incredulity at how unreadable it is.</p>

<p>Leaning back in your chair, you think to yourself:</p>

<pre><code>|/
</code></pre>
</div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>