<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Core Updates in .NET 5 Preview 7 | ASP.NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ASP.NET Core Updates in .NET 5 Preview 7 | ASP.NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="Sourabh ShirhattiFollow"/>
    <meta property="og:description" content=".NET 5 Preview 7 is now available and is ready for evaluation. Here&#x2019;s what&#x2019;s new in this release: Blazor WebAssembly apps now target .NET 5 Updated debugging requirements for Blazor WebAssembly Blazor accessibility improvements Blazor performance improvements Certificate authentication performance improvements Sending HTTP/2 PING frames Support for additional endpoints types in the Kestrel sockets transport Custom header decoding in Kestrel Other minor improvements Get started To get started with ASP.NET Core in .NET 5 Preview 7 install the .NET 5 SDK."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-5-preview-7/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ASP.NET Core Updates in .NET 5 Preview 7 | ASP.NET Blog</title>
<div class="readable">
        <h1>ASP.NET Core Updates in .NET 5 Preview 7 | ASP.NET Blog</h1>
            <div>by Sourabh ShirhattiFollow</div>
            <div>Reading time: 8-10 minutes</div>
        <div>Posted here: 21 Jul 2020</div>
        <p><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-5-preview-7/">https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-5-preview-7/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured">

	<div>
                
         <div><div><div><p><img src="https://secure.gravatar.com/avatar/07efe6bbd54a0f6649a09f43acb183d8?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar"></p><p>Sourabh</p></div></div></div>     
        <p>July 21st, 2020</p><!-- .entry-meta -->

		<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0-preview7/">.NET 5 Preview 7 is now available</a> and is ready for evaluation. Here’s what’s new in this release:</p>
<ul>
<li>Blazor WebAssembly apps now target .NET 5</li>
<li>Updated debugging requirements for Blazor WebAssembly</li>
<li>Blazor accessibility improvements</li>
<li>Blazor performance improvements</li>
<li>Certificate authentication performance improvements</li>
<li>Sending HTTP/2 PING frames</li>
<li>Support for additional endpoints types in the Kestrel sockets transport</li>
<li>Custom header decoding in Kestrel</li>
<li>Other minor improvements</li>
</ul>
<h2>Get started</h2>
<p>To get started with ASP.NET Core in .NET 5 Preview 7 <a href="https://dotnet.microsoft.com/download/dotnet-core/5.0" target="_blank">install the .NET 5 SDK</a>.</p>
<p>You need to use <a href="https://visualstudio.microsoft.com/vs/preview/" target="_blank">Visual Studio 2019 16.7 Preview 5</a> or newer to use .NET 5 Preview 7. .NET 5 is also supported with the latest <a href="https://docs.microsoft.com/visualstudio/mac/install-preview" target="_blank">preview</a> of <a href="https://visualstudio.microsoft.com/" target="_blank">Visual Studio for Mac</a>. To use .NET 5 with <a href="https://visualstudio.microsoft.com/" target="_blank">Visual Studio Code</a>, install the latest version of the <a href="https://code.visualstudio.com/Docs/languages/csharp" target="_blank">C# extension</a>.</p>
<h2>Upgrade an existing project</h2>
<p>To upgrade an existing ASP.NET Core app from .NET 5 Preview 6 to .NET 5 Preview 7:</p>
<ul>
<li>Update all Microsoft.AspNetCore.* package references to <code><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>7.</span><span>*</span></code>.</li>
<li>Update all Microsoft.Extensions.* package references to <code><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>7.</span><span>*</span></code>.</li>
<li>Update System.Net.Http.Json package references to <code><span>5.0</span><span>.</span><span>0</span><span>-</span><span>preview</span><span>.</span><span>7.</span><span>*</span></code>.</li>
</ul>
<p>See the full list of <a href="https://github.com/aspnet/announcements/issues?q=is%3Aopen+is%3Aissue+milestone%3A5.0+label%3A%22Breaking+change%22" target="_blank">breaking changes</a> in ASP.NET Core for .NET 5.</p>
<h3>Upgrade existing Blazor WebAssembly projects</h3>
<p>To upgrade an existing Blazor WebAssembly project, update the following properties:</p>
<p><strong>From</strong></p>
<pre><code><span><span>&lt;TargetFramework&gt;</span></span><span><span>netstandard2.1</span></span><span><span>&lt;/TargetFramework&gt;</span></span><span><span>
</span></span><span><span>&lt;RazorLangVersoin&gt;</span></span><span><span>3.0</span></span><span><span>&lt;/RazorLangVersion&gt;</span></span></code></pre>
<p><strong>To</strong></p>
<pre><code><span><span>&lt;TargetFramework&gt;</span></span><span><span>net5.0</span></span><span><span>&lt;/TargetFramework&gt;</span></span><span><span>
</span></span><span><span>&lt;RuntimeIdentifier&gt;</span></span><span><span>browser-wasm</span></span><span><span>&lt;/RuntimeIdentifier&gt;</span></span><span><span>
</span></span><span><span>&lt;UseBlazorWebAssembly&gt;</span></span><span><span>true</span></span><span><span>&lt;/UseBlazorWebAssembly&gt;</span></span></code></pre>
<p>Also, remove any package references to <code><span>Microsoft</span><span>.</span><span>AspNetCore</span><span>.</span><span>Components</span><span>.</span><span>WebAssembly</span><span>.</span><span>Build</span></code>, as it is no longer needed.</p>
<h2>What’s new?</h2>
<h3>Blazor WebAssembly apps now target .NET 5</h3>
<p>Blazor WebAssembly 3.2 apps have access only to the .NET Standard 2.1 API set. With this release, Blazor WebAssembly projects now target .NET 5 (<code><span>net5</span><span>.</span><span>0</span></code>) and have access to a much wider set of APIs. Implementing Blazor WebAssembly support for the APIs in .NET 5 is a work in progress, so some APIs may throw a <code><span>PlatformNotSupportedException</span></code> at runtime. We’d love to hear from you if you’re blocked by the lack of support for specific APIs.</p>
<h3>Updated debugging requirements for Blazor WebAssembly</h3>
<p>To enable debugging of Blazor WebAssembly apps in Visual Studio Code, you previously needed to install the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.js-debug-nightly" target="_blank">JavaScript Debugger (Nightly) extension</a>. This is no longer required as the <a href="https://github.com/microsoft/vscode-js-debug#nightly-extension" target="_blank">JavaScript debugger extension is now shipped as part of VS Code</a>. If you’ve previously installed the JavaScript Debugger (Nightly) extension you can now uninstall it. Enabling the preview version of the JavaScript debugger through the Visual Studio Code settings is still required.</p>
<h3>Blazor accessibility improvements</h3>
<p>The built-in Blazor input components that derive from <code><span>InputBase</span></code> now render <code><span>aria</span><span>-</span><span>invalid</span></code> automatically when the validation fails.</p>
<h3>Blazor performance improvements</h3>
<p>One of the major areas of investment for Blazor WebAssembly in .NET 5 is improving runtime performance. This is a multifaceted effort. Below are some of the high-level areas being optimized:</p>
<ul>
<li>.NET runtime execution</li>
<li>JSON serialization</li>
<li>JavaScript interop</li>
<li>Blazor component rendering</li>
</ul>
<p>Improving Blazor WebAssembly runtime performance for .NET 5 in an ongoing effort. This release contains some initial performance improvements, and we expect to share more details on the results of this performance work for future .NET 5 updates.</p>
<h3>Certificate authentication performance improvements</h3>
<p>We have added caching to certificate authentication in ASP.NET Core. Caching certificate validation significantly improves the performance of certificate authentication. Our benchmarks show a 400% improvement in requests per second once caching was enabled.</p>
<p>You don’t need to make any changes to your app to take advantage of performance improvements; caching is on by default. There are options to tune or disable caching if you wish.</p>
<p>Find out more about certificate authentication in ASP.NET Core <a href="https://docs.microsoft.com/aspnet/core/security/authentication/certauth" target="_blank">in the docs</a>.</p>
<h3>Sending HTTP/2 PING frames</h3>
<p>HTTP/2 has a mechanism for sending PING frames as a way of ensuring whether an idle connection is still functional. This is especially useful to have when working with long-lived streams that are often idle but only intermittently see activity (for example, gRPC streams). We have added the ability to send periodic PING frames in Kestrel by setting limits on <code><span>KestrelServerOptions</span></code>.</p>
<pre><code><span><span>public</span></span><span><span> </span></span><span><span>static</span></span><span><span> </span></span><span><span>IHostBuilder</span></span><span><span> </span></span><span><span>CreateHostBuilder</span></span><span><span>(</span></span><span><span>string</span></span><span><span>[]</span></span><span><span> args</span></span><span><span>)</span></span><span><span> </span></span><span><span>=&gt;</span></span><span><span>
    </span></span><span><span>Host</span></span><span><span>.</span></span><span><span>CreateDefaultBuilder</span></span><span><span>(</span></span><span><span>args</span></span><span><span>)</span></span><span><span>
        </span></span><span><span>.</span></span><span><span>ConfigureWebHostDefaults</span></span><span><span>(</span></span><span><span>webBuilder </span></span><span><span>=&gt;</span></span><span><span>
        </span></span><span><span>{</span></span><span><span>
            webBuilder</span></span><span><span>.</span></span><span><span>ConfigureKestrel</span></span><span><span>(</span></span><span><span>options </span></span><span><span>=&gt;</span></span><span><span>
            </span></span><span><span>{</span></span><span><span>
                options</span></span><span><span>.</span></span><span><span>Limits</span></span><span><span>.</span></span><span><span>Http2</span></span><span><span>.</span></span><span><span>KeepAlivePingInterval</span></span><span><span> </span></span><span><span>=</span></span><span><span> </span></span><span><span>TimeSpan</span></span><span><span>.</span></span><span><span>FromSeconds</span></span><span><span>(</span></span><span><span>10</span></span><span><span>);</span></span><span><span>
                options</span></span><span><span>.</span></span><span><span>Limits</span></span><span><span>.</span></span><span><span>Http2</span></span><span><span>.</span></span><span><span>KeepAlivePingTimeout</span></span><span><span> </span></span><span><span>=</span></span><span><span> </span></span><span><span>TimeSpan</span></span><span><span>.</span></span><span><span>FromSeconds</span></span><span><span>(</span></span><span><span>1</span></span><span><span>);</span></span><span><span>
            </span></span><span><span>});</span></span><span><span>
            webBuilder</span></span><span><span>.</span></span><span><span>UseStartup</span></span><span><span>&lt;</span></span><span><span>Startup</span></span><span><span>&gt;();</span></span><span><span>
        </span></span><span><span>});</span></span></code></pre>
<h3>Support for additional endpoints types in the Kestrel sockets transport</h3>
<p>Building upon new API introduced in <code><span>System</span><span>.</span><span>Net</span><span>.</span><span>Sockets</span></code>, the sockets transport (default) in Kestrel now allows you to bind to both existing file handles and unix domain sockets. Support for binding to existing file handles enables using the existing Systemd integration without requiring you to use the libuv transport.</p>
<h3>Custom header decoding in Kestrel</h3>
<p>We added the ability to specify which <code><span>System</span><span>.</span><span>Text</span><span>.</span><span>Encoding</span></code> to use to interpret incoming headers based on the header name instead of defaulting to UTF-8. You can set the <code><span>RequestHeaderEncodingSelector</span></code> property on <code><span>KestrelServerOptions</span></code> to specify which encoding to use.</p>
<pre><code><span><span>public</span></span><span><span> </span></span><span><span>static</span></span><span><span> </span></span><span><span>IHostBuilder</span></span><span><span> </span></span><span><span>CreateHostBuilder</span></span><span><span>(</span></span><span><span>string</span></span><span><span>[]</span></span><span><span> args</span></span><span><span>)</span></span><span><span> </span></span><span><span>=&gt;</span></span><span><span>
    </span></span><span><span>Host</span></span><span><span>.</span></span><span><span>CreateDefaultBuilder</span></span><span><span>(</span></span><span><span>args</span></span><span><span>)</span></span><span><span>
        </span></span><span><span>.</span></span><span><span>ConfigureWebHostDefaults</span></span><span><span>(</span></span><span><span>webBuilder </span></span><span><span>=&gt;</span></span><span><span>
        </span></span><span><span>{</span></span><span><span>
            webBuilder</span></span><span><span>.</span></span><span><span>ConfigureKestrel</span></span><span><span>(</span></span><span><span>options </span></span><span><span>=&gt;</span></span><span><span>
            </span></span><span><span>{</span></span><span><span>
                options</span></span><span><span>.</span></span><span><span>RequestHeaderEncodingSelector</span></span><span><span> </span></span><span><span>=</span></span><span><span> encoding </span></span><span><span>=&gt;</span></span><span><span>
                </span></span><span><span>{</span></span><span><span>
                    </span></span><span><span>switch</span></span><span><span> </span></span><span><span>(</span></span><span><span>encoding</span></span><span><span>)</span></span><span><span>
                    </span></span><span><span>{</span></span><span><span>
                        </span></span><span><span>case</span></span><span><span> </span></span><span><span>"Host"</span></span><span><span>:</span></span><span><span>
                            </span></span><span><span>return</span></span><span><span> </span></span><span><span>System</span></span><span><span>.</span></span><span><span>Text</span></span><span><span>.</span></span><span><span>Encoding</span></span><span><span>.</span></span><span><span>Latin1</span></span><span><span>;</span></span><span><span>
                        </span></span><span><span>default</span></span><span><span>:</span></span><span><span>
                            </span></span><span><span>return</span></span><span><span> </span></span><span><span>System</span></span><span><span>.</span></span><span><span>Text</span></span><span><span>.</span></span><span><span>Encoding</span></span><span><span>.</span></span><span><span>UTF8</span></span><span><span>;</span></span><span><span>
                    </span></span><span><span>}</span></span><span><span>
                </span></span><span><span>};</span></span><span><span>
            </span></span><span><span>});</span></span><span><span>
            webBuilder</span></span><span><span>.</span></span><span><span>UseStartup</span></span><span><span>&lt;</span></span><span><span>Startup</span></span><span><span>&gt;();</span></span><span><span>
        </span></span><span><span>});</span></span></code></pre>
<h3>Other improvements</h3>
<ul>
<li>For preview 7, we’ve started applying nullable annotations to ASP.NET Core assemblies. We intend on annotating most of the common public API surface of the framework during the 5.0 release.</li>
<li><code><span>CompareAttribute</span></code> can now be applied to properties on Razor Page model. </li>
<li>Parameters and properties bound from the body are considered required by default.</li>
<li>We’ve started applying nullable annotations to ASP.NET Core assemblies. We intend to annotate most of the common public API surface of the framework during the .NET 5 release.</li>
<li>Authorization when using endpoint routing now receives the <code><span>HttpContext</span></code> rather than the endpoint instance. This allows the authorization middleware to access the <code><span>RouteData</span></code> and other properties of the <code><span>HttpContext</span></code> that were not accessible though the <code><span>Endpoint</span></code> class. The endpoint can be fetched from the context using <code><span>context</span><span>.</span><span>GetEndpoint</span><span>()</span></code>.</li>
<li>The default format for <code><span>System</span><span>.</span><span>Diagnostics</span><span>.</span><span>Activity</span></code> now defaults to the W3C format. This makes distributed tracing support in ASP.NET Core interoperable with more frameworks by default.</li>
<li><code><span>CompareAttribute</span></code> can now be applied to properties on a Razor Page model. </li>
<li>
<p><code><span>FromBodyAttribute</span></code> now supports configuring an option that allows these parameters or properties to be considered optional:</p>
<p><code><span>C</span><span># public IActionResult Post([FromBody(EmptyBodyBehavior = EmptyBodyBehavior.Allow)] MyModel model) { ... }</span></code></p>
</li>
</ul>
<h2>Give feedback</h2>
<p>We hope you enjoy this release of ASP.NET Core in .NET 5! We are eager to hear about your experiences with this latest .NET 5 release. Let us know what you think by filing issues on <a href="https://github.com/dotnet/aspnetcore/issues" target="_blank">GitHub</a>.</p>
<p>Thanks for trying out ASP.NET Core!</p>
        
        
        
        

		        
        
        
	</div><!-- .entry-content -->
    
    </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>