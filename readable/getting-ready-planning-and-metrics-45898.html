<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments - linksfor.dev(s)"/>
    <meta property="article:author" content="&#x200B;&#x200B;Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments"/>
    <meta property="og:description" content="The final version will be published on @SmashingMag early January."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://paper.dropbox.com/doc/Front-End-Performance-Checklist-2020--ArV_0GPxc1G6Q59C6PXVkyr_Ag-TQq0j3asMeEV6a1TRZGpS"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments</title>
<div class="readable">
        <h1>Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments</h1>
            <div>by &#x200B;&#x200B;Draft: Front-End Performance Checklist 2020 &#x2014; Please add your comments</div>
            <div>Reading time: 109-139 minutes</div>
        <div>Posted here: 30 Dec 2019</div>
        <p><a href="https://paper.dropbox.com/doc/Front-End-Performance-Checklist-2020--ArV_0GPxc1G6Q59C6PXVkyr_Ag-TQq0j3asMeEV6a1TRZGpS">https://paper.dropbox.com/doc/Front-End-Performance-Checklist-2020--ArV_0GPxc1G6Q59C6PXVkyr_Ag-TQq0j3asMeEV6a1TRZGpS</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-zone-id="0" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>The final version will be published on @SmashingMag early January.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Let’s make 2020… fast! An annual front-end performance checklist</i></span><span><i> </i></span><span><i>(PDF/Apple</i></span><span><i> Pages/MS Word), with everything you need to know to create fast experiences on the web today. Updated since 2016.</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Web performance is a tricky beast, isn’t it? How do we actually know where we stand in terms of performance, and what our performance bottlenecks </span><span><i>exactly</i></span><span> are? Is it expensive JavaScript, slow web font delivery, heavy images, or sluggish rendering? Is it worth exploring tree-shaking, scope hoisting, code-splitting, and all the fancy loading patterns with intersection observer, server push, clients hints, HTTP/2, service workers and — oh my — edge workers? And, most importantly, </span><span><b>where do we even start improving performance</b></span><span> and how do we establish a performance culture long-term?</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Back in the day, performance was often a mere </span><span><i>afterthought</i></span><span>. Often deferred till the very end of the project, it would boil down to minification, concatenation, asset optimization and potentially a few fine adjustments on the server’s </span><span>config</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> file. Looking back now, things seem to have changed quite significantly.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Performance isn’t just a technical concern: it affects everything from accessibility to usability to search engine optimization, and when baking it into the workflow, design decisions have to be informed by their performance implications. </span><span><b>Performance has to be measured, monitored and refined continually</b></span><span>, and the growing complexity of the web poses new challenges that make it hard to keep track of metrics, because metrics will vary significantly depending on the device, browser, protocol, network type and latency</span><span> </span><span>(CDNs,</span><span> ISPs, caches, proxies, firewalls, load balancers and servers all play a role in performance).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>So, if we created an overview of all the things we have to keep in mind when improving performance — from the very start of the process until the final release of the website — what would that list look like? Below you’ll find a</span><span> </span><span>(hopefully</span><span> unbiased and objective) </span><span><b>front-end performance checklist for 2020</b></span><span> — an updated overview of the issues you might need to consider to ensure that your response times are fast, user interaction is smooth and your sites don’t drain user’s bandwidth.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>TABLE OF CONTENTS</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-28"><h2 data-usually-unique-id="333243719800568594017842"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Getting Ready: Planning And Metrics</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Micro-optimizations are great for keeping performance on track, but it’s critical to have clearly defined targets in mind — </span><span><i>measurable</i></span><span> goals that would influence any decisions made throughout the process. There are a couple of different models, and the ones discussed below are quite opinionated — just make sure to set your own priorities early on.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Establish a performance culture.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In many organizations, front-end developers know exactly what common underlying problems are and what loading patterns should be used to fix them. However, as long as there is no established endorsement of the performance culture, each decision will turn into a battlefield of departments, breaking up the organization into silos. You need a business stakeholder buy-in, and to get it, you need to establish a case study, or </span><span><a data-target-href="https://medium.com/@armelpingault/how-to-convince-your-client-to-focus-on-web-performance-a-case-study-35f12385689" href="https://medium.com/@armelpingault/how-to-convince-your-client-to-focus-on-web-performance-a-case-study-35f12385689" rel="noreferrer nofollow noopener">a proof of concept</a></span><span> using the </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Performance" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance" rel="noreferrer nofollow noopener">Performance API</a></span><span> on how speed benefits metrics and Key Performance Indicators</span><span> </span><span>(</span><span><i>KPIs</i></span><span>)</span><span> they care about.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Without a strong alignment between dev/design and business/marketing teams, performance isn’t going to sustain long-term. Study common complaints coming into customer service and sales team, study analytics for high bounce rates and conversion drops. Explore how improving performance can help relieve some of these common problems. </span><span><a data-target-href="https://youtu.be/SE0HhF4TO0Q?t=1052" href="https://youtu.be/SE0HhF4TO0Q?t=1052" rel="noreferrer nofollow noopener">Adjust the argument</a></span><span> depending on the group of stakeholders you are speaking to.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Run performance experiments and measure outcomes — both on mobile and on desktop</span><span> </span><span>(for</span><span> example, </span><span><a data-target-href="https://dev.to/thegreengreek/show-me-the-money-justifying-performance-improvements-using-google-analytics-3231" href="https://dev.to/thegreengreek/show-me-the-money-justifying-performance-improvements-using-google-analytics-3231" rel="noreferrer nofollow noopener">with Google Analytics</a></span><span>). It will help you build up a company-tailored case study with real data. Furthermore, using data from case studies and experiments published on </span><span><a data-target-href="https://wpostats.com/" href="https://wpostats.com/" rel="noreferrer nofollow noopener">WPO Stats</a></span><span> will help increase sensitivity for business about why performance matters, and what impact it has on user experience and business metrics. Stating that performance matters alone isn’t enough though — you also need to establish some measurable and trackable goals and observe them over time.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-1"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7191d628-f0a1-490c-afca-c8abcdfd4823/brad-perf-budget-builder.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7191d628-f0a1-490c-afca-c8abcdfd4823/brad-perf-budget-builder.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption341593275453212661423074&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:111}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: brad-perf-budget-builder.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F7191d628-f0a1-490c-afca-c8abcdfd4823%2Fbrad-perf-budget-builder.png&amp;hmac=4bZ6vgQyDpQ%2FbLqB1mZouWuvnMiFEqGyCRsfnVQhCGM%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/7191d628-f0a1-490c-afca-c8abcdfd4823/brad-perf-budget-builder.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption341593275453212661423074"><div data-zone-id="caption341593275453212661423074" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Brad Frost and Jonathan Fielding’s Performance Budget Calculator</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Goal: Be at least 20% faster than your fastest competitor.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>According to </span><span><a data-target-href="https://www.smashingmagazine.com/2015/09/why-performance-matters-the-perception-of-time/#the-need-for-performance-optimization-the-20-rule" href="https://www.smashingmagazine.com/2015/09/why-performance-matters-the-perception-of-time/#the-need-for-performance-optimization-the-20-rule" rel="noreferrer nofollow noopener">psychological research</a></span><span>, if you want users to feel that your website is faster than your competitor’s website, you need to be </span><span><i>at least</i></span><span> 20% faster. Study your main competitors, collect metrics on how they perform on mobile and desktop and set thresholds that would help you outpace them. To get accurate results and goals though, first make sure to get a through picture of your users' experience by studying your analytics. You can then mimic the 90th percentile’s experience for testing.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: If you use </span><span><a data-target-href="https://developers.google.com/speed/pagespeed/insights/" href="https://developers.google.com/speed/pagespeed/insights/" rel="noreferrer nofollow noopener">Page Speed Insights</a></span><span> </span><span>(no,</span><span> it isn’t deprecated), you can get CrUX performance data for specific pages instead of just the aggregates. This data can be much more useful for setting performance targets for assets like</span><span> </span><span>“landing</span><span> page” or</span><span> </span><span>“product</span><span> listing”. And if you are using CI to test the budgets, you need to make sure your tested environment matches CrUX if you used CrUX for setting the target</span><span> </span><span>(</span><span><i>thanks</i></span><span><i> Patrick Meenan!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Collect data, set up a </span><span><a data-target-href="http://danielmall.com/articles/how-to-make-a-performance-budget/" href="http://danielmall.com/articles/how-to-make-a-performance-budget/" rel="noreferrer nofollow noopener">spreadsheet</a></span><span>, shave off 20%, and set up your goals</span><span> </span><span>(</span><span><i>performance</i></span><span><i> budgets</i></span><span>) this way. Now you have something measurable to test against. If you’re keeping the budget in mind and trying to ship down just the minimal payload to get a quick time-to-interactive, then you’re on a reasonable path.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Need resources to get started?</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-54"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Addy Osmani has written a very detailed write-up on </span><span><a data-target-href="https://medium.com/@addyosmani/start-performance-budgeting-dabde04cf6a3" href="https://medium.com/@addyosmani/start-performance-budgeting-dabde04cf6a3" rel="noreferrer nofollow noopener">how to start performance budgeting</a></span><span>, how to quantify the impact of new features and where to start when you are over budget.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-58"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, make both performance budget and current performance </span><span><i>visible</i></span><span> by setting up dashboards with graphs reporting build sizes. There are many tools allowing you to achieve that: </span><span><a data-target-href="https://www.sitespeed.io/" href="https://www.sitespeed.io/" rel="noreferrer nofollow noopener">SiteSpeed.io dashboard</a></span><span> </span><span>(open</span><span> source), </span><span><a data-target-href="http://speedcurve.com/" href="http://speedcurve.com/" rel="noreferrer nofollow noopener">SpeedCurve</a></span><span> and </span><span><a data-target-href="https://calibreapp.com/" href="https://calibreapp.com/" rel="noreferrer nofollow noopener">Calibre</a></span><span> are just a few of them, and you can find more tools on </span><span><a data-target-href="http://perf.rocks/tools/" href="http://perf.rocks/tools/" rel="noreferrer nofollow noopener">perf.rocks</a></span><span>.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>Performance awareness shouldn’t come from performance budgets alone though. Just like </span></span><span><span><a data-target-href="https://medium.com/@Pinterest_Engineering/a-one-year-pwa-retrospective-f4a2f4129e05" href="https://medium.com/@Pinterest_Engineering/a-one-year-pwa-retrospective-f4a2f4129e05" rel="noreferrer nofollow noopener">Pinterest</a></span></span><span><span>, you could create </span></span><span><span>a custom </span></span><span><span><i>eslint</i></span></span><span><span> rule</span></span><span> that disallows importing from files and directories that are known to be dependency-heavy and would bloat the bundle. Set up a listing of</span><span> </span><span>“safe”</span><span> packages that can be shared across the entire team.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, think about critical customer tasks that are most beneficial to your business. Study, discuss and define acceptable </span><span><b>time thresholds for critical actions</b></span><span> and establish</span><span> </span><span>"UX</span><span> ready" user timing marks that the entire organization has approved. In many cases, user journeys will touch on the work of many different departments, so alignment in terms of acceptable timings will help support or prevent performance discussions down the road. Make sure that additional costs of added resources and features are visible and understood.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, as Patrick Meenan suggested, it’s worth to </span><span><b>plan out a loading sequence and trade-offs</b></span><span> during the design process. If you prioritize early on which parts are more critical, and define the order in which they should appear, you will also know what can be delayed. Ideally, that order will also reflect the sequence of your CSS and JavaScript imports, so handling them during the build process will be easier. Also, consider what the visual experience should be in</span><span> </span><span>"in-between"-states,</span><span> while the page is being loaded</span><span> </span><span>(e.g.</span><span> when web fonts aren’t loaded yet).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Planning, planning, planning.</i></span><span> It might be tempting to get into quick</span><span> </span><span>"low-hanging-fruits"-optimizations</span><span> early on — and eventually it might be a good strategy for quick wins — but it will be very hard to keep performance a priority without planning and setting realistic, company-tailored performance goals.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Choose the right metrics.</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://speedcurve.com/blog/rendering-metrics/" href="https://speedcurve.com/blog/rendering-metrics/" rel="noreferrer nofollow noopener">Not all metrics are equally important</a></span><span>. Study what metrics matter most to your application: usually it will be </span><span><span>defined by how fast</span></span><span> you can start render </span><span><i>most important pixels of your interface</i></span><span> and how quickly you can provide input responsiveness for these rendered pixels. This knowledge will give you the best optimization target for ongoing efforts. In the end, it’s the load events or server response times that define the experience, but the perception of how snappy the interface </span><span><i>feels</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>What does it mean? Rather than focusing on full page loading time</span><span> </span><span>(via</span><span> </span><span><i>onLoad</i></span><span> and </span><span><i>DOMContentLoaded</i></span><span> timings, for example), prioritize page loading </span><span><span><a data-target-href="https://web.dev/user-centric-performance-metrics/" href="https://web.dev/user-centric-performance-metrics/" rel="noreferrer nofollow noopener">as perceived by your customers</a></span></span><span>. That means focusing on a slightly different set of metrics. In fact, choosing the right metric is a process without obvious winners.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Based on Tim Kadlec’s research and Marcos Iglesias’ notes in </span><span><a data-target-href="https://docs.google.com/presentation/d/e/2PACX-1vTk8geAszRTDisSIplT02CacJybNtrr6kIYUCjW3-Y_7U9kYSjn_6TbabEQDnk9Ao8DX9IttL-RD_p7/pub?start=false&amp;loop=false&amp;delayms=10000&amp;slide=id.g3ccc19d32d_0_98" href="https://docs.google.com/presentation/d/e/2PACX-1vTk8geAszRTDisSIplT02CacJybNtrr6kIYUCjW3-Y_7U9kYSjn_6TbabEQDnk9Ao8DX9IttL-RD_p7/pub?start=false&amp;loop=false&amp;delayms=10000&amp;slide=id.g3ccc19d32d_0_98" rel="noreferrer nofollow noopener">his talk</a></span><span>, traditional metrics could be grouped into a few sets. Usually, we’ll need all of them to get a complete picture of performance, and in your particular case some of them might be more important than others.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-79"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Quantity-based metrics</i></span><span> measure the number of requests, weight and a performance score. Good for raising alarms and monitoring changes over time, not so good for understanding user experience.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-80"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Milestone metrics</i></span><span> use states in the lifetime of the loading process, e.g. </span><span><i>Time To First Byte</i></span><span> and </span><span><i>Time To Interactive</i></span><span>. Good for describing the user experience and monitoring, not so good for knowing what happens between the milestones.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-81"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Rendering metrics</i></span><span> provide an estimate of how fast content renders</span><span> </span><span>(e.g.</span><span> </span><span><i>Start Render</i></span><span> time, </span><span><i>Speed Index</i></span><span>). Good for measuring and tweaking rendering performance, but not so good for measuring when </span><span><i>important</i></span><span> content appears and can be interacted with.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-82"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Custom metrics</i></span><span> measure a particular, custom event for the user, e.g. Twitter’s </span><span><a data-target-href="https://blog.alexmaccaw.com/time-to-first-tweet" href="https://blog.alexmaccaw.com/time-to-first-tweet" rel="noreferrer nofollow noopener">Time To First Tweet</a></span><span> and Pinterest’s </span><span><a data-target-href="https://medium.com/@Pinterest_Engineering/driving-user-growth-with-performance-improvements-cfc50dafadd7" href="https://medium.com/@Pinterest_Engineering/driving-user-growth-with-performance-improvements-cfc50dafadd7" rel="noreferrer nofollow noopener">PinnerWaitTime</a></span><span>. Good for describing the user experience precisely, not so good for scaling the metrics and comparing with with competitors.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>To complete the picture, we’d usually look out for useful metrics among all of these groups. Usually, the most specific and relevant ones are:</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-87"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The point at which layout has stabilized, key webfonts are visible, and the main thread is available enough to handle user input — basically the time mark when a user can interact with the UI. The key metrics for understanding how much </span><span><i>wait</i></span><span> a user has to experience to use the site without a lag.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-89"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The time from when a user first interacts with your site to the time when the browser is actually able to respond to that interaction. Complements TTI very well as it describes the missing part of the picture: what happens when a user actually interacts with the site. Intended as a RUM metric only. There is a </span><span><a data-target-href="https://github.com/GoogleChromeLabs/first-input-delay" href="https://github.com/GoogleChromeLabs/first-input-delay" rel="noreferrer nofollow noopener">JavaScript library</a></span><span> for measuring FID in the browser.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-91"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Marks the point in the page load timeline when the page’s important content has likely loaded. The assumption is that the most important element of the page is </span><span><a data-target-href="https://medium.com/speedrank-app/new-performance-metric-what-is-largest-contentful-paint-dc784a497dd5" href="https://medium.com/speedrank-app/new-performance-metric-what-is-largest-contentful-paint-dc784a497dd5" rel="noreferrer nofollow noopener">the largest one visible in the user’s viewport</a></span><span>. If elements are rendered both above and below the fold, only the visible part is considered relevant. Currently a hidden metric in Lighthouse, to be rolled out if it proves to be valuable.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-93"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A new metric that helps quantify the severity of how non-interactive a page is prior to it becoming reliably interactive</span><span> </span><span>(that</span><span> is, the main thread has been free of any tasks running over 50ms</span><span> </span><span>(</span><span><i>long</i></span><span><i> tasks</i></span><span>) for at least five seconds). The metric measures the total amount of time between the first paint and Time to Interactive</span><span> </span><span>(TTI)</span><span> where the main thread was blocked for long enough to prevent input responsiveness.</span><span> </span><span><i>(thanks,</i></span><span><i> Artem, Phil)</i></span></li></ul></div><div dir="auto" id="editor-1-ace-line-95"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The metric highlights how often users experience unexpected layout shifts</span><span> </span><span>(</span><span><i>reflows</i></span><span>)</span><span> when accessing the site. It examines </span><span><i>unstable</i></span><span> elements and their impact on the overall experience. The lower the score, the better.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-97"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Measures how quickly the page contents are visually populated; the lower the score, the better. The Speed Index score is computed based on the speed of visual progress, but it’s merely a computed value. It’s also sensitive to the viewport size, so you need to define a range of testing configurations that match your target audience</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> </i></span><span><a data-target-href="https://twitter.com/borisschapira" href="https://twitter.com/borisschapira" rel="noreferrer nofollow noopener"><i>Boris</i></a></span><span><i>!</i></span><span>).</span></li></ul></div><div dir="auto" id="editor-1-ace-line-99"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A metric that shows </span><span><i>how often</i></span><span> and </span><span><i>how long</i></span><span> the main thread is blocked, working on painting, rendering, scripting and loading. High CPU time is a clear indicator of a </span><span><i>janky</i></span><span> experience, i.e. when the user experiences a noticeable lag between their action and a response. With WebPageTest, you can </span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener">select</a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener">"Capture</a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener"> Dev Tools Timeline" on the</a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener">"Chrome"</a></span><span><a data-target-href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" href="https://deanhume.com/ten-things-you-didnt-know-about-webpagetest-org/" rel="noreferrer nofollow noopener"> tab</a></span><span> to expose the breakdown of the main thread as it runs on any device using WebPageTest.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-101"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Just like with the </span><span><i>CPU time spent</i></span><span>, this metric, proposed by Stoyan Stefanov, explores the impact of JavaScript on CPU. The idea is to use CPU instruction count per component to understand its impact on the overall experience, in isolation. Could be implemented </span><span><a data-target-href="https://calendar.perfplanet.com/2019/javascript-component-level-cpu-costs/" href="https://calendar.perfplanet.com/2019/javascript-component-level-cpu-costs/" rel="noreferrer nofollow noopener">using Puppeteer and Chrome</a></span><span>.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-103"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If your site depends on the revenue generated by advertising, it’s useful to track the weight of ad related code. Paddy Ganti’s </span><span><a data-target-href="https://calendar.perfplanet.com/2017/measuring-adweight/" href="https://calendar.perfplanet.com/2017/measuring-adweight/" rel="noreferrer nofollow noopener">script</a></span><span> constructs two URLs</span><span> </span><span>(one</span><span> normal and one blocking the ads), prompts the generation of a video comparison via WebPageTest and reports a delta.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-105"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As </span><span><a data-target-href="https://phabricator.wikimedia.org/phame/live/7/post/117/performance_testing_in_a_controlled_lab_environment_-_the_metrics/" href="https://phabricator.wikimedia.org/phame/live/7/post/117/performance_testing_in_a_controlled_lab_environment_-_the_metrics/" rel="noreferrer nofollow noopener">noted by Wikipedia engineers</a></span><span>, data of how much variance exists in your results could inform you how reliable your instruments are, and how much attention you should pay to deviations and outlers. Large variance is an indicator of adjustments needed in the setup. It also helps understand if certain pages are more difficult to measure reliably, e.g. due to third-party scripts causing significant variation. It might also be a good idea to track browser version to understand bumps in performance when a new browser version is rolled out.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-107"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Custom metrics are defined by your business needs and customer experience. It requires you to identify </span><span><i>important</i></span><span> pixels, </span><span><i>critical</i></span><span> scripts, </span><span><i>necessary</i></span><span> CSS and </span><span><i>relevant</i></span><span> assets and measure how quickly they get delivered to the user. For that one, you can monitor </span><span><a data-target-href="https://speedcurve.com/blog/web-performance-monitoring-hero-times/" href="https://speedcurve.com/blog/web-performance-monitoring-hero-times/" rel="noreferrer nofollow noopener">Hero Rendering Times</a></span><span>, or use </span><span><a data-target-href="https://css-tricks.com/breaking-performance-api/" href="https://css-tricks.com/breaking-performance-api/" rel="noreferrer nofollow noopener">Performance API</a></span><span>, marking particular timestamps for events that are important for your business. Also, you can </span><span><a data-target-href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/custom-metrics" href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/custom-metrics" rel="noreferrer nofollow noopener">collect custom metrics with WebPagetest</a></span><span> by executing arbitrary JavaScript at the end of a test.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note </b></span><span>that the</span><span><b> </b></span><span><a data-target-href="https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint" href="https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint" rel="noreferrer nofollow noopener">First Meaningful Paint</a></span><span> </span><span><i>(FMP)</i></span><span> doesn't appear in the overview above. It used to provide an insight into how quickly the server outputs </span><span><i>any</i></span><span> data. Long FMP usually indicated JavaScript blocking the main thread, but could be related to back-end/server issues as well. However, the metric has been </span><span><a data-target-href="https://calendar.perfplanet.com/2019/developing-the-largest-contentful-paint-metric/" href="https://calendar.perfplanet.com/2019/developing-the-largest-contentful-paint-metric/" rel="noreferrer nofollow noopener">deprecated</a></span><span> recently as it appears not to be accurate in about 20% of the cases. It will </span><span><a data-target-href="https://www.youtube.com/watch?v=iaWLXf1FgI0&amp;feature=youtu.be&amp;t=505" href="https://www.youtube.com/watch?v=iaWLXf1FgI0&amp;feature=youtu.be&amp;t=505" rel="noreferrer nofollow noopener">no longer be supported</a></span><span> in the next versions of Lighthouse.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Steve Souders has a </span><span><a data-target-href="https://speedcurve.com/blog/rendering-metrics/" href="https://speedcurve.com/blog/rendering-metrics/" rel="noreferrer nofollow noopener">detailed explanation of most of these metrics</a></span><span>. It’s important to notice that while Time-To-Interactive is measured by running automated audits in the so-called </span><span><i>lab environment</i></span><span>, First Input Delay represents the </span><span><i>actual</i></span><span> user experience, with </span><span><i>actual</i></span><span> users experiencing a noticeable lag. In general, it’s probably a good idea to always measure and track both of them.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: both FID and TTI do not account for scrolling behavior; scrolling can happen independently since it’s off-main-thread, so for many content consumption sites these metrics might be much less important</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Patrick!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-2"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption035031052129677267403188&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:193}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: network-requests-first-input-delay.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F5d80f91c-9807-4565-b616-a4735fcd4949%2Fnetwork-requests-first-input-delay.png&amp;hmac=K2CYzGNXVTCrifgRT5%2FmrtG8Gf7rUpK4j10tJs0RX6Y%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption035031052129677267403188"><div data-zone-id="caption035031052129677267403188" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>User-centric performance metrics provide a better insight into the actual user experience. </i></span><span><a data-target-href="https://developers.google.com/web/updates/2018/05/first-input-delay" href="https://developers.google.com/web/updates/2018/05/first-input-delay" rel="noreferrer nofollow noopener"><i>First Input Delay</i></a></span><span><i> </i></span><span><i>(FID)</i></span><span><i> is a new metric that tries to achieve just that.</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5d80f91c-9807-4565-b616-a4735fcd4949/network-requests-first-input-delay.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Gather data on a device representative of your audience.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To gather accurate data, we need to thoroughly choose devices to test on. In most companies, that means looking into analytics and creating user profiles based on most common device types. Yet often, analytics alone doesn’t provide a complete picture. A significant portion of the target audience might be abandoning the site</span><span> </span><span>(and</span><span> not returning back) just because their experience is too slow, and their devices are unlikely to show up as most popular devices in analytics. So additionally conducting research on common devices in your target group might be a good idea.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A representative device, then, is an Android device that is </span><span><b>at least 24 months old</b></span><span>, costing $200 or less, running on slow 3G, 400ms RTT and 400kbps transfer, just to be slightly more pessimistic. This might be very different for your company, of course, but that’s a close enough approximation of a majority of customers out there. In fact, it might be a good idea to look into current </span><span><a data-target-href="https://www.amazon.co.uk/gp/bestsellers/electronics/356496011/ref=sr_bs_1" href="https://www.amazon.co.uk/gp/bestsellers/electronics/356496011/ref=sr_bs_1" rel="noreferrer nofollow noopener">Amazon Best Sellers</a></span><span> for your target market.</span><span> </span><span>(</span><span><i>Thanks</i></span><span><i> to Tim Kadlec, Henri Helvetica and Alex Russel for the pointers!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>What test devices to choose then? The ones that fit well with the profile outlined above. It’s a good option to </span><span><a data-target-href="https://twitter.com/katiehempenius/statuses/1067969800205422593" href="https://twitter.com/katiehempenius/statuses/1067969800205422593" rel="noreferrer nofollow noopener">choose a Moto G4/G5 Plus</a></span><span>, a mid-range Samsung device</span><span> </span><span>(Galaxy</span><span> A50, S8), a good middle-of-the-road device like a Nexus 5X, Xiaomi Mi A3 or Xiaomi Redmi Note 7 and a slow device like Alcatel 1X or Cubot X19, perhaps in an </span><span><a data-target-href="https://www.smashingmagazine.com/2016/11/worlds-best-open-device-labs/" href="https://www.smashingmagazine.com/2016/11/worlds-best-open-device-labs/" rel="noreferrer nofollow noopener">open device lab</a></span><span>. For testing on slower thermal-throttled devices, you could also get a Nexus 4, which costs just around $100.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, check the chipsets used in each device and </span><span><b>do not over-represent one chipset</b></span><span>: a few generations of Snapdragon and Apple as well as low-end Rockchip, Mediatek would be enough</span><span> </span><span><i>(thanks,</i></span><span><i> Patrick!)</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you don’t have a device at hand, emulate mobile experience on desktop by testing on a </span><span><b>throttled 3G network</b></span><span> </span><span>(e.g.</span><span> 300ms RTT, 1.6 Mbps down, 0.8 Mbps up) with a throttled CPU</span><span> </span><span>(5×</span><span> slowdown). Eventually switch over to regular 3G, slow 4G</span><span> </span><span>(e.g.</span><span> 170ms RTT, 9 Mbps down, 9Mbps up), and Wi-Fi. To make the performance impact more visible, you could even introduce </span><span><a data-target-href="https://www.theverge.com/2015/10/28/9625062/facebook-2g-tuesdays-slow-internet-developing-world" href="https://www.theverge.com/2015/10/28/9625062/facebook-2g-tuesdays-slow-internet-developing-world" rel="noreferrer nofollow noopener">2G Tuesdays</a></span><span> or set up a </span><span><a data-target-href="https://twitter.com/thommaskelly/status/938127039403610112" href="https://twitter.com/thommaskelly/status/938127039403610112" rel="noreferrer nofollow noopener">throttled 3G/4G network in your office</a></span><span> for faster testing.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Keep in mind that on a mobile device, we should be expecting a </span><span><a data-target-href="https://youtu.be/JvJ0v5OohNg?t=892" href="https://youtu.be/JvJ0v5OohNg?t=892" rel="noreferrer nofollow noopener">4×–5× slowdown compared to desktop machines</a></span><span>. Mobile devices have different GPUs, CPU, memory and different battery characteristics. That’s why it’s important to have a good profile of an average device and always </span><span><a data-target-href="https://www.webpagetest.org/easy" href="https://www.webpagetest.org/easy" rel="noreferrer nofollow noopener">test on an such a device</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-3"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dfe1a4ec-2088-4e39-8a39-9f2010380a53/tuesday-2g-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dfe1a4ec-2088-4e39-8a39-9f2010380a53/tuesday-2g-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption005665827286285178767717&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:400}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: tuesday-2g-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fdfe1a4ec-2088-4e39-8a39-9f2010380a53%2Ftuesday-2g-opt.png&amp;hmac=3WRi6z8ZgpjvcZzXCgQRn4M6FkHg72Gk8dJ7aeIEdck%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/dfe1a4ec-2088-4e39-8a39-9f2010380a53/tuesday-2g-opt.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption005665827286285178767717"><div data-zone-id="caption005665827286285178767717" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Introducing the slowest day of the week</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Introducing the slowest day of the week. Facebook has introduced </i></span><span><a data-target-href="https://www.theverge.com/2015/10/28/9625062/facebook-2g-tuesdays-slow-internet-developing-world" href="https://www.theverge.com/2015/10/28/9625062/facebook-2g-tuesdays-slow-internet-developing-world" rel="noreferrer nofollow noopener"><i>2G Tuesdays</i></a></span><span><i> to increase visibility and sensitivity of slow connections.</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="http://www.businessinsider.com/facebook-2g-tuesdays-to-slow-employee-internet-speeds-down-2015-10?IR=T" href="http://www.businessinsider.com/facebook-2g-tuesdays-to-slow-employee-internet-speeds-down-2015-10?IR=T" rel="noreferrer nofollow noopener"><i>Image</i></a></span><span><a data-target-href="http://www.businessinsider.com/facebook-2g-tuesdays-to-slow-employee-internet-speeds-down-2015-10?IR=T" href="http://www.businessinsider.com/facebook-2g-tuesdays-to-slow-employee-internet-speeds-down-2015-10?IR=T" rel="noreferrer nofollow noopener"><i> source</i></a></span><span><i>)</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Luckily, there are many great options that help you automate the collection of data and measure how your website performs over time according to these metrics. Keep in mind that a good performance picture covers a set of performance metrics, </span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/speed-tools/" href="https://developers.google.com/web/fundamentals/performance/speed-tools/" rel="noreferrer nofollow noopener">lab data and field data</a></span><span>:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-137"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Synthetic testing tools</b></span><span> collect </span><span><i>lab data</i></span><span> in a reproducible environment with predefined device and network settings</span><span> </span><span>(e.g.</span><span> </span><span><i>Lighthouse</i></span><span>, </span><span><i>WebPageTest</i></span><span>) and</span></li></ul></div><div dir="auto" id="editor-1-ace-line-138"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Real User Monitoring</b></span><span> </span><span>(</span><span><i>RUM</i></span><span>)</span><span> tools evaluate user interactions continuously and collect </span><span><i>field data</i></span><span> </span><span>(e.g.</span><span> </span><span><i>SpeedCurve</i></span><span>, </span><span><span><i>Calibre</i></span></span><span><span>,</span></span><span> </span><span><i>New Relic</i></span><span> — the tools provide synthetic testing, too).</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The former is particularly useful during </span><span><i>development</i></span><span> as it will help you identify, isolate and fix performance issues while working on the product. The latter is useful for long-term </span><span><i>maintenance</i></span><span> as it will help you understand your performance bottlenecks as they are happening live — when users actually access the site.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-142"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>By tapping into built-in RUM APIs such as </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API" rel="noreferrer nofollow noopener">Navigation Timing</a></span><span>, </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API" href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API" rel="noreferrer nofollow noopener">Resource Timing</a></span><span>, </span><span><a data-target-href="https://css-tricks.com/paint-timing-api/" href="https://css-tricks.com/paint-timing-api/" rel="noreferrer nofollow noopener">Paint Timing</a></span><span>, </span><span><a data-target-href="https://w3c.github.io/longtasks/" href="https://w3c.github.io/longtasks/" rel="noreferrer nofollow noopener">Long Tasks</a></span><span>, etc., synthetic testing tools and RUM together provide a complete picture of performance in your application. You could use </span><span><a data-target-href="https://github.com/paulirish/pwmetrics" href="https://github.com/paulirish/pwmetrics" rel="noreferrer nofollow noopener">PWMetrics</a></span><span>, </span><span><a data-target-href="https://calibreapp.com/" href="https://calibreapp.com/" rel="noreferrer nofollow noopener">Calibre</a></span><span>, </span><span><a data-target-href="https://speedcurve.com/" href="https://speedcurve.com/" rel="noreferrer nofollow noopener">SpeedCurve</a></span><span>, </span><span><a data-target-href="https://www.soasta.com/performance-monitoring/" href="https://www.soasta.com/performance-monitoring/" rel="noreferrer nofollow noopener">mPulse</a></span><span> and </span><span><a data-target-href="https://github.com/yahoo/boomerang" href="https://github.com/yahoo/boomerang" rel="noreferrer nofollow noopener">Boomerang</a></span><span>, </span><span><a data-target-href="https://www-origin.sitespeed.io/" href="https://www-origin.sitespeed.io/" rel="noreferrer nofollow noopener">Sitespeed.io</a></span><span>, which all are great options for performance monitoring. Furthermore, with </span><span><a data-target-href="https://www.smashingmagazine.com/2018/10/performance-server-timing/" href="https://www.smashingmagazine.com/2018/10/performance-server-timing/" rel="noreferrer nofollow noopener">Server Timing header</a></span><span>, you could even monitor back-end and front-end performance all in one place.</span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: It’s always a safer bet to choose </span><span><a data-target-href="https://calendar.perfplanet.com/2016/testing-with-realistic-networking-conditions/" href="https://calendar.perfplanet.com/2016/testing-with-realistic-networking-conditions/" rel="noreferrer nofollow noopener">network-level throttlers</a></span><span>, external to the browser, as, for example, DevTools has issues interacting with HTTP/2 push, due to the way it’s implemented</span><span> </span><span>(thanks,</span><span> Yoav, Patrick!). For Mac OS, we can use </span><span><a data-target-href="https://nshipster.com/network-link-conditioner/" href="https://nshipster.com/network-link-conditioner/" rel="noreferrer nofollow noopener">Network Link Conditioner</a></span><span>, for Windows </span><span><a data-target-href="https://github.com/WPO-Foundation/win-shaper/releases" href="https://github.com/WPO-Foundation/win-shaper/releases" rel="noreferrer nofollow noopener">Windows Traffic Shaper</a></span><span>, for Linux </span><span><a data-target-href="https://wiki.linuxfoundation.org/networking/netem" href="https://wiki.linuxfoundation.org/networking/netem" rel="noreferrer nofollow noopener">netem</a></span><span>, and for FreeBSD </span><span><a data-target-href="http://info.iet.unipi.it/~luigi/dummynet/" href="http://info.iet.unipi.it/~luigi/dummynet/" rel="noreferrer nofollow noopener">dummynet</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-4"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a85a91a7-fb37-4596-8658-a40c1900a0d6/lighthouse-screenshot.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a85a91a7-fb37-4596-8658-a40c1900a0d6/lighthouse-screenshot.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption386520039254450944570215&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:282}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: lighthouse-screenshot.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fa85a91a7-fb37-4596-8658-a40c1900a0d6%2Flighthouse-screenshot.png&amp;hmac=UGzzHnEeXVw7wjYxnxYSVEo%2FvTNjHGFqqWPnbsJlVzU%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a85a91a7-fb37-4596-8658-a40c1900a0d6/lighthouse-screenshot.png" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Set up</b></span><span><b> </b></span><span><b>"clean"</b></span><span><b> and</b></span><span><b> </b></span><span><b>"customer"</b></span><span><b> profiles for testing.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>While running tests in passive monitoring tools, it’s a common strategy to turn off anti-virus and background CPU tasks, remove background bandwidth transfers and test with a clean user profile without browser extensions to avoid skewed results</span><span> </span><span>(</span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Multiple_profiles" href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Multiple_profiles" rel="noreferrer nofollow noopener">Firefox</a></span><span>,</span><span> </span><span><a data-target-href="https://support.google.com/chrome/answer/2364824?hl=en&amp;co=GENIE.Platform=Desktop" href="https://support.google.com/chrome/answer/2364824?hl=en&amp;co=GENIE.Platform=Desktop" rel="noreferrer nofollow noopener">Chrome</a></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>However, it’s also a good idea to study which extensions your customers are using frequently, and test with a dedicated</span><span> </span><span><i>"customer"</i></span><span><i> profile</i></span><span> as well. In fact, some extensions might have a </span><span><a data-target-href="https://twitter.com/denar90_/statuses/1065712688037277696" href="https://twitter.com/denar90_/statuses/1065712688037277696" rel="noreferrer nofollow noopener">profound performance impact</a></span><span> </span><span>(</span><span><a data-target-href="https://www.debugbear.com/blog/measuring-the-performance-impact-of-chrome-extensions" href="https://www.debugbear.com/blog/measuring-the-performance-impact-of-chrome-extensions" rel="noreferrer nofollow noopener">study</a></span><span>)</span><span> on your application, and if your users use them a lot, you might want to account for it up front.</span><span> </span><span>"Clean"</span><span> profile results alone are overly optimistic and can be crushed in real-life scenarios.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Share the performance goals with your colleagues.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Make sure that performance goals are familiar to every member of your team to avoid misunderstandings down the line. Every decision — be it design, marketing or anything in-between — has performance implications, and distributing responsibility and ownership across the entire team would streamline performance-focused decisions later on. Map design decisions against performance budget and the priorities defined early on.</span></p><p dir="auto" id="editor-1-ace-line-155"><h2 data-usually-unique-id="744526205174212074417573"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Setting Realistic Goals</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>100-millisecond response time, 60 fps.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For an interaction to feel smooth, the interface has 100ms to respond to user’s input. Any longer than that, and the user perceives the app as laggy. The </span><span><a data-target-href="https://www.smashingmagazine.com/2015/10/rail-user-centric-model-performance/" href="https://www.smashingmagazine.com/2015/10/rail-user-centric-model-performance/" rel="noreferrer nofollow noopener">RAIL, a user-centered performance model</a></span><span> gives you healthy targets: To allow for &lt;100 milliseconds response, the page must yield control back to main thread at latest after every &lt;50 milliseconds. </span><span><span><a data-target-href="https://developers.google.com/web/tools/lighthouse/audits/estimated-input-latency" href="https://developers.google.com/web/tools/lighthouse/audits/estimated-input-latency" rel="noreferrer nofollow noopener">Estimated Input Latency</a></span></span><span> tells us if we are hitting that threshold, and ideally, it should be below 50ms. For high-pressure points like animation, it’s best to do nothing else where you can and the absolute minimum where you can't.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-5"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c91c910d-e934-4610-9dc5-369ec9071b57/rail-perf-model-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c91c910d-e934-4610-9dc5-369ec9071b57/rail-perf-model-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption790711529675674845780002&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:145}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: rail-perf-model-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fc91c910d-e934-4610-9dc5-369ec9071b57%2Frail-perf-model-opt.png&amp;hmac=IfN8zrpsxruX8mZbzMPXl3xWkEkcQjPY7yh8KXIdwYc%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c91c910d-e934-4610-9dc5-369ec9071b57/rail-perf-model-opt.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption790711529675674845780002"><div data-zone-id="caption790711529675674845780002" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/rail" href="https://developers.google.com/web/fundamentals/performance/rail" rel="noreferrer nofollow noopener"><i>RAIL</i></a></span><span><i>, a user-centric performance model.</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, each frame of animation should be completed in less than 16 milliseconds, thereby achieving 60 frames per second</span><span> </span><span>(1</span><span> second ÷ 60 = 16.6 milliseconds) — preferably under 10 milliseconds. Because the browser needs time to paint the new frame to the screen, your code should finish executing before hitting the 16.6 milliseconds mark. We’re </span><span><span>starting to have conversations</span></span><span> about 120fps</span><span> </span><span>(e.g.</span><span> iPad Pro’s screens run at 120Hz) and Surma has covered some </span><span><a data-target-href="https://dassur.ma/things/120fps/" href="https://dassur.ma/things/120fps/" rel="noreferrer nofollow noopener">rendering performance solutions for 120fps</a></span><span>, but that’s probably not a target we’re looking at </span><span><i>just yet</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Speed Index &lt; 3s, FID &lt; 100ms, TTI &lt; 5s on 3G, Critical file size budget &lt; 170KB</b></span><span><b> </b></span><span><b>(gzipped).</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Although it might be very difficult to achieve, a good ultimate goal would be </span><span><a data-target-href="https://web.dev/speed-index/" href="https://web.dev/speed-index/" rel="noreferrer nofollow noopener">Speed Index</a></span><span> under 3s and </span><span><a data-target-href="https://www.youtube.com/watch?v=_srJ7eHS3IM&amp;feature=youtu.be&amp;t=6m21s" href="https://www.youtube.com/watch?v=_srJ7eHS3IM&amp;feature=youtu.be&amp;t=6m21s" rel="noreferrer nofollow noopener">Time to Interactive under 5s</a></span><span>, and for repeat visits, aim for under 2s</span><span> </span><span>(achievable</span><span> only with a service worker). Aim for </span><span><i>First Meaningful Paint</i></span><span>, or better </span><span><i>Largest Contentful Paint</i></span><span> of under 1s. An acceptable </span><span><i>First Input Delay</i></span><span> </span><span>(highlighted</span><span> as </span><span><i>Max Potential First Input Delay</i></span><span> in Lighthouse) is under 130–100ms. As mentioned above, we’re considering the baseline being a $200 Android phone</span><span> </span><span>(e.g.</span><span> Moto G4) on a slow 3G network, emulated at 400ms RTT and 400kbps transfer speed.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We have two major constraints that effectively shape a </span><span><i>reasonable</i></span><span> target for speedy delivery of the content on the web. On the one hand, we have </span><span><b>network delivery constraints</b></span><span> due to </span><span><a data-target-href="https://hpbn.co/building-blocks-of-tcp/#slow-start" href="https://hpbn.co/building-blocks-of-tcp/#slow-start" rel="noreferrer nofollow noopener">TCP Slow Start</a></span><span>. The first 14KB of the HTML — 10 TCP packets, each 1460 bytes, making around 14.25 KB, </span><span><a data-target-href="https://www.tunetheweb.com/blog/critical-resources-and-the-first-14kb/" href="https://www.tunetheweb.com/blog/critical-resources-and-the-first-14kb/" rel="noreferrer nofollow noopener">albeit not to be taken literally</a></span><span> — is the most critical payload chunk, and the only part of the budget that can be delivered in the first roundtrip</span><span> </span><span>(which</span><span> is all you get in 1 sec at 400ms RTT due to mobile wake-up times).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>(</span><span><b>Note</b></span><span>: as TCP generally under-utilizes network connection by a significant amount, Google has developed </span><span><a data-target-href="https://cloud.google.com/blog/products/gcp/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster" href="https://cloud.google.com/blog/products/gcp/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster" rel="noreferrer nofollow noopener">TCP Bottleneck Bandwidth and RRT</a></span><span> </span><span>(</span><span><i>BBR</i></span><span>),</span><span> a relatively new TCP delay-controlled </span><span><a data-target-href="https://medium.com/google-cloud/tcp-bbr-magic-dust-for-network-performance-57a5f1ccf437" href="https://medium.com/google-cloud/tcp-bbr-magic-dust-for-network-performance-57a5f1ccf437" rel="noreferrer nofollow noopener">TCP flow control algorithm</a></span><span> that </span><span><a data-target-href="https://aws.amazon.com/blogs/networking-and-content-delivery/tcp-bbr-congestion-control-with-amazon-cloudfront/" href="https://aws.amazon.com/blogs/networking-and-content-delivery/tcp-bbr-congestion-control-with-amazon-cloudfront/" rel="noreferrer nofollow noopener">is significantly faster</a></span><span> but also works differently, essentially lifting the 14KB limitation. It's still important to prioritize critical resources as early as possible, but 14 KB might not be that relevant with BBR in place.)</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Victor, Barry!</i></span><span>)</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>On the other hand, we have </span><span><b>hardware constraints</b></span><span> on memory and CPU due to JavaScript parsing times</span><span> </span><span>(we’ll</span><span> talk about them in detail later). To achieve the goals stated in the first paragraph, we have to consider the critical file size budget for JavaScript. Opinions vary on what that budget should be</span><span> </span><span>(and</span><span> it heavily depends on the nature of your project), but a budget of 170KB JavaScript gzipped already would take up to 1s to parse and compile on an average phone. Assuming that 170KB expands to 3× that size when decompressed</span><span> </span><span>(0.7MB),</span><span> that already could be the death knell of a</span><span> </span><span>"decent"</span><span> user experience on a Moto G4/G5 Plus.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In fact, Google’s </span><span><span>Alex Russel</span></span><span> recommends to </span><span><a data-target-href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/" href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/" rel="noreferrer nofollow noopener">aim for 130–170KB gzipped</a></span><span> as a reasonable upper boundary. In real-life world, most products aren’t even close: an median bundle size today is around </span><span><a data-target-href="https://beta.httparchive.org/reports/state-of-javascript#bytesJs" href="https://beta.httparchive.org/reports/state-of-javascript#bytesJs" rel="noreferrer nofollow noopener">417KB</a></span><span>, which is up 42% compared to early 2015. On a middle-class mobile device, that accounts for 15–25 seconds for </span><span><i>Time-To-Interactive</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We could also go beyond the bundle size budget though. For example, we could set performance budgets based on the activities of the browser’s main thread, i.e. paint time before start render, or </span><span><a data-target-href="https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/" href="https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/" rel="noreferrer nofollow noopener">track down front-end CPU hogs</a></span><span>. Tools such as </span><span><a data-target-href="https://calibreapp.com/" href="https://calibreapp.com/" rel="noreferrer nofollow noopener">Calibre</a></span><span>, </span><span><a data-target-href="https://speedcurve.com/" href="https://speedcurve.com/" rel="noreferrer nofollow noopener">SpeedCurve</a></span><span> and </span><span><a data-target-href="https://github.com/siddharthkp/bundlesize" href="https://github.com/siddharthkp/bundlesize" rel="noreferrer nofollow noopener">Bundlesize</a></span><span> can help you keep your budgets in check, and can be integrated into your build process.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Finally, a performance budget probably shouldn’t be a fixed value. Depending on the network connection, </span><span><a data-target-href="https://twitter.com/katiehempenius/status/1075478356311924737" href="https://twitter.com/katiehempenius/status/1075478356311924737" rel="noreferrer nofollow noopener">performance budgets should adapt</a></span><span>, but payload on slower connection is much more</span><span> </span><span>"expensive",</span><span> regardless of how they’re used.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: It might sound strange to set such rigid budgets in times of wide-spread HTTP/2, </span><span><a data-target-href="https://www.speedtest.net/ookla-5g-map" href="https://www.speedtest.net/ookla-5g-map" rel="noreferrer nofollow noopener">upcoming 5G</a></span><span>, rapidly evolving mobile phones and flourishing SPAs. However, they do sound reasonable when we deal with the unpredictable nature of the network and hardware, including everything from congested networks to slowly developing infrastructure, to </span><span><a data-target-href="https://youtu.be/JvJ0v5OohNg?t=397" href="https://youtu.be/JvJ0v5OohNg?t=397" rel="noreferrer nofollow noopener">data caps</a></span><span>, proxy browsers, </span><span><a data-target-href="https://timkadlec.com/remembers/2019-08-29-save-data-usage/" href="https://timkadlec.com/remembers/2019-08-29-save-data-usage/" rel="noreferrer nofollow noopener">save-data mode</a></span><span> and sneaky roaming charges.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-6"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3bb4ab9e-978a-4db0-83c3-57a93d70516d/file-size-budget-fast-default-addy-osmani-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3bb4ab9e-978a-4db0-83c3-57a93d70516d/file-size-budget-fast-default-addy-osmani-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption326172164992177850214626&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:224,&quot;thread-673674644466851859369592&quot;:&quot;false&quot;}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: file-size-budget-fast-default-addy-osmani-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F3bb4ab9e-978a-4db0-83c3-57a93d70516d%2Ffile-size-budget-fast-default-addy-osmani-opt.png&amp;hmac=XDYlBkqfDO7yJ5y6%2FZQ29EUnx15McOJq7b5iK5YgQ%2F4%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3bb4ab9e-978a-4db0-83c3-57a93d70516d/file-size-budget-fast-default-addy-osmani-opt.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption326172164992177850214626"><div data-zone-id="caption326172164992177850214626" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>From</span><span> </span><span>'Fast</span><span> By Default: Modern Loading Best Practices' by Addy Osmani</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-7"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption746193379402486306393869&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:200}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: perf-budgets-network-connection.jpg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F949e5601-04e7-48ee-91a5-10bd7af19a0f%2Fperf-budgets-network-connection.jpg&amp;hmac=By5S%2BrT4vZOX55ExcWbYKc5Y1mu0Acnpc6%2FYtH7Ufss%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption746193379402486306393869"><div data-zone-id="caption746193379402486306393869" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Performance budgets should adapt depending on the network conditions for an average mobile device.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> source: </i></span><span><a data-target-href="https://twitter.com/katiehempenius/status/1075478356311924737" href="https://twitter.com/katiehempenius/status/1075478356311924737" rel="noreferrer nofollow noopener"><i>Katie Hempenius</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/949e5601-04e7-48ee-91a5-10bd7af19a0f/perf-budgets-network-connection.jpg" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-183"><h2 data-usually-unique-id="950224662339515858038879"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Defining The Environment</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Choose and set up your build tools.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://24ways.org/2017/all-that-glisters/" href="https://24ways.org/2017/all-that-glisters/" rel="noreferrer nofollow noopener">Don’t pay too much attention to what’s supposedly cool</a></span><span> </span><span><a data-target-href="https://2018.stateofjs.com/" href="https://2018.stateofjs.com/" rel="noreferrer nofollow noopener">these days</a></span><span>. Stick to your environment for building, be it Grunt, Gulp, Webpack, Parcel, or a combination of tools. As long as you are getting results you need and you have no issues maintaining your build process, you’re doing just fine.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Among the build tools, </span><span><span>Webpack seems to be the most established one</span></span><span>, with literally hundreds of plugins available to optimize the size of your builds. Getting started with Webpack can be tough though. So if you want to get started, there are some great resources out there:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-191"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://frontendmasters.com/courses/webpack-fundamentals/" href="https://frontendmasters.com/courses/webpack-fundamentals/" rel="noreferrer nofollow noopener">Webpack Fundamentals</a></span><span> is a very comprehensive 4h course with Sean Larkin, released by FrontendMasters.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-194"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://github.com/webpack-contrib/awesome-webpack" href="https://github.com/webpack-contrib/awesome-webpack" rel="noreferrer nofollow noopener">awesome-webpack</a></span><span> is a curated list of useful Webpack resources, libraries and tools, including articles, videos, courses, books and examples for Angular, React and framework-agnostic projects.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Use progressive enhancement as a default.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Still, after all these years, keeping </span><span><a data-target-href="https://www.aaron-gustafson.com/notebook/insert-clickbait-headline-about-progressive-enhancement-here/" href="https://www.aaron-gustafson.com/notebook/insert-clickbait-headline-about-progressive-enhancement-here/" rel="noreferrer nofollow noopener">progressive enhancement</a></span><span> as the guiding principle of your front-end architecture and deployment is a safe bet. Design and build the core experience first, and then enhance the experience with advanced features for capable browsers, creating </span><span><a data-target-href="https://resilientwebdesign.com/" href="https://resilientwebdesign.com/" rel="noreferrer nofollow noopener">resilient</a></span><span> experiences. If your website runs fast on a slow machine with a poor screen in a poor browser on a sub-optimal network, then it will only run faster on a fast machine with a good browser on a decent network.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In fact, with </span><span><a data-target-href="https://www.youtube.com/watch?v=puUPpVrIRkc&amp;t=488s" href="https://www.youtube.com/watch?v=puUPpVrIRkc&amp;t=488s" rel="noreferrer nofollow noopener">adaptive module serving</a></span><span>, we seem to be taking progressive enhancement to another level, serving</span><span> </span><span>"lite"</span><span> core experiences to low-end devices, and enhancing with more sophisticated features for high-end devices. Progressive enhancement isn't likely to fade away any time soon, so it seems.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Choose a strong performance baseline.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With so many unknowns impacting loading — the network, thermal throttling, cache eviction, third-party scripts, parser blocking patterns, disk I/O, IPC latency, installed extensions, antivirus software and firewalls, background CPU tasks, hardware and memory constraints, differences in L2/L3 caching, RTTS — </span><span><a data-target-href="https://v8.dev/blog/cost-of-javascript-2019" href="https://v8.dev/blog/cost-of-javascript-2019" rel="noreferrer nofollow noopener">JavaScript has the heaviest cost of the experience</a></span><span>, next to web fonts blocking rendering by default and images often consuming too much memory. With the performance bottlenecks </span><span><a data-target-href="https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/" href="https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/" rel="noreferrer nofollow noopener">moving away from the server to the client</a></span><span>, as developers, we have to consider all of these unknowns in much more detail.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With a 170KB budget that already contains the critical-path HTML/CSS/JavaScript, router, state management, utilities, framework and the application logic, we have to thoroughly </span><span><a data-target-href="https://www.twitter.com/kristoferbaxter/status/908144931125858304" href="https://www.twitter.com/kristoferbaxter/status/908144931125858304" rel="noreferrer nofollow noopener">examine network transfer cost, the parse/compile time and the runtime cost</a></span><span> of the framework of our choice. Luckily, we’ve seen a huge improvement over the last few years in </span><span><a data-target-href="https://v8.dev/blog/cost-of-javascript-2019" href="https://v8.dev/blog/cost-of-javascript-2019" rel="noreferrer nofollow noopener">how fast browsers can parse and compile scripts</a></span><span>. Yet the execution of JavaScript is still the main bottleneck, so paying close attention to script execution time and network can be impactful.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As </span><span><a data-target-href="https://twitter.com/sebmarkbage/status/829733454119989248" href="https://twitter.com/sebmarkbage/status/829733454119989248" rel="noreferrer nofollow noopener">noted</a></span><span> by Seb Markbåge, a good way to measure start-up costs for frameworks is to first render a view, then delete it and then render again as it can tell you how the framework scales. The first render tends to warm up a bunch of lazily compiled code, which a larger tree can benefit from when it scales. The second render is basically an emulation of how code reuse on a page affects the performance characteristics as the page grows in complexity.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Evaluate frameworks and dependencies.</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It might sound obvious but worth stating: some projects can also benefit </span><span><a data-target-href="https://twitter.com/jaffathecake/status/925320026411950080" href="https://twitter.com/jaffathecake/status/925320026411950080" rel="noreferrer nofollow noopener">benefit from removing an existing framework</a></span><span> altogether. Once a framework is chosen, you’ll be staying with it for at least a few years, so if you need to use one, make sure your choice </span><span><a data-target-href="https://www.youtube.com/watch?v=6I_GwgoGm1w" href="https://www.youtube.com/watch?v=6I_GwgoGm1w" rel="noreferrer nofollow noopener">is informed</a></span><span> and </span><span><a data-target-href="https://medium.com/@ZombieCodeKill/choosing-a-javascript-framework-535745d0ab90#.2op7rjakk" href="https://medium.com/@ZombieCodeKill/choosing-a-javascript-framework-535745d0ab90#.2op7rjakk" rel="noreferrer nofollow noopener">well considered</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Inian Parameshwaran </span><span><a data-target-href="https://youtu.be/wVY3-acLIoI?t=699" href="https://youtu.be/wVY3-acLIoI?t=699" rel="noreferrer nofollow noopener">has measured performance footprint of top 50 frameworks</a></span><span> </span><span>(against</span><span> </span><span><a data-target-href="https://developers.google.com/web/tools/lighthouse/audits/first-contentful-paint" href="https://developers.google.com/web/tools/lighthouse/audits/first-contentful-paint" rel="noreferrer nofollow noopener"><i>First Contentful Paint</i></a></span><span> — the time from navigation to the time when the browser renders the first bit of content from the DOM). Inian discovered that, out there in the wild, Vue and Preact are the fastest across the board — both on desktop and mobile, followed by React</span><span> </span><span>(</span><span><a data-target-href="https://drive.google.com/file/d/1CoCQP7qyvkSQ4VG9L_PTWD5AF9wF28XT/view" href="https://drive.google.com/file/d/1CoCQP7qyvkSQ4VG9L_PTWD5AF9wF28XT/view" rel="noreferrer nofollow noopener">slides</a></span><span>).</span><span> You could examine your framework candidates and the proposed architecture, and study how most solutions out there perform, e.g. with server-side rendering or client-side rendering, on average.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Baseline performance cost matters. According to a </span><span><a data-target-href="https://blog.uncommon.is/the-baseline-costs-of-javascript-frameworks-f768e2865d4a" href="https://blog.uncommon.is/the-baseline-costs-of-javascript-frameworks-f768e2865d4a" rel="noreferrer nofollow noopener">study by Ankur Sethi</a></span><span>,</span><span> </span><span>"your</span><span> React application will never load faster than about 1.1 seconds on an average phone in India, no matter how much you optimize it. Your Angular app will always take at least 2.7 seconds to boot up. The users of your Vue app will need to wait at least 1 second before they can start using it." You might not be targeting India as your primary market anyway, but users accessing your site with suboptimal network conditions will have a comparable experience. In exchange, your team gains maintainability and developer efficiency, of course. But this consideration needs to be deliberate.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>You could go as far as evaluating a framework</span><span> </span><span>(or</span><span> any JavaScript library) on Sacha Greif’s </span><span><a data-target-href="https://medium.freecodecamp.org/the-12-things-you-need-to-consider-when-evaluating-any-new-javascript-library-3908c4ed3f49" href="https://medium.freecodecamp.org/the-12-things-you-need-to-consider-when-evaluating-any-new-javascript-library-3908c4ed3f49" rel="noreferrer nofollow noopener">12-point scale scoring system</a></span><span> by exploring features, accessibility, stability, performance, package ecosystem, community, learning curve, documentation, tooling, track record, team, compatibility, security for example. But on a tough schedule, it’s a good idea to consider </span><span><i>at least</i></span><span> the total cost on size + initial parse times before choosing an option; lightweight options such as </span><span><a data-target-href="https://github.com/developit/preact" href="https://github.com/developit/preact" rel="noreferrer nofollow noopener">Preact</a></span><span>, </span><span><a data-target-href="https://github.com/infernojs/inferno" href="https://github.com/infernojs/inferno" rel="noreferrer nofollow noopener">Inferno</a></span><span>, </span><span><a data-target-href="https://vuejs.org/" href="https://vuejs.org/" rel="noreferrer nofollow noopener">Vue</a></span><span>, </span><span><a data-target-href="https://svelte.technology/" href="https://svelte.technology/" rel="noreferrer nofollow noopener">Svelte</a></span><span> or </span><span><a data-target-href="https://github.com/Polymer/polymer" href="https://github.com/Polymer/polymer" rel="noreferrer nofollow noopener">Polymer</a></span><span> can get the job done just fine. The size of your baseline will define the constraints for your application’s code.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>There are many tools to help you make an informed decision about the impact of your dependencies and viable alternatives:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A good starting point is to choose a good default stack for your application. </span><span><a data-target-href="http://gatsbyjs.org/" href="http://gatsbyjs.org/" rel="noreferrer nofollow noopener">Gatsby.js</a></span><span> </span><span>(React),</span><span> </span><span><a data-target-href="https://github.com/developit/preact-cli" href="https://github.com/developit/preact-cli" rel="noreferrer nofollow noopener">Preact CLI</a></span><span>, and </span><span><a data-target-href="https://github.com/Polymer/pwa-starter-kit" href="https://github.com/Polymer/pwa-starter-kit" rel="noreferrer nofollow noopener">PWA Starter Kit</a></span><span> provide reasonable defaults for fast loading out of the box on average mobile hardware.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Consider using PRPL pattern and app shell architecture.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Different frameworks will have different effects on performance and will require different strategies of optimization, so you have to clearly understand all of the nuts and bolts of the framework you’ll be relying on. When building a web app, look into the </span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" rel="noreferrer nofollow noopener">PRPL pattern</a></span><span> and </span><span><a data-target-href="https://developers.google.com/web/updates/2015/11/app-shell" href="https://developers.google.com/web/updates/2015/11/app-shell" rel="noreferrer nofollow noopener">application shell architecture</a></span><span>. The idea is quite straightforward: Push the minimal code needed to get interactive for the initial route to render quickly, then use service worker for caching and pre-caching resources and then lazy-load routes that you need, asynchronously.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-8"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bb4716e5-d25b-4b80-b468-f28d07bae685/app-build-components-dibweb-c-scalew-879-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bb4716e5-d25b-4b80-b468-f28d07bae685/app-build-components-dibweb-c-scalew-879-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption819424132917100503435684&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:216}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: app-build-components-dibweb-c-scalew-879-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fbb4716e5-d25b-4b80-b468-f28d07bae685%2Fapp-build-components-dibweb-c-scalew-879-opt.png&amp;hmac=6evt5pVWlWkHOG2OsHKC0XRFV0S8hVBIJ2Es7NcuLE4%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bb4716e5-d25b-4b80-b468-f28d07bae685/app-build-components-dibweb-c-scalew-879-opt.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption819424132917100503435684"><div data-zone-id="caption819424132917100503435684" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>PRPL Pattern in the application shell architecture</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" rel="noreferrer nofollow noopener"><i>PRPL</i></a></span><span><i> stands for Pushing critical resource, Rendering initial route, Pre-caching remaining routes and Lazy-loading remaining routes on demand.</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-9"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6423db84-4717-4aeb-9174-7ae96bf4f3aa/appshell-1-o0t8qd-c-scalew-799-opt.jpg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6423db84-4717-4aeb-9174-7ae96bf4f3aa/appshell-1-o0t8qd-c-scalew-799-opt.jpg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption948102069868494676012503&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:295}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: appshell-1-o0t8qd-c-scalew-799-opt.jpg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F6423db84-4717-4aeb-9174-7ae96bf4f3aa%2Fappshell-1-o0t8qd-c-scalew-799-opt.jpg&amp;hmac=kFb90GZBIwXlXPJfynApCjfgfyNwoOYDAo%2FHls2jsD4%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6423db84-4717-4aeb-9174-7ae96bf4f3aa/appshell-1-o0t8qd-c-scalew-799-opt.jpg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption948102069868494676012503"><div data-zone-id="caption948102069868494676012503" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>An </i></span><span><a data-target-href="https://developers.google.com/web/updates/2015/11/app-shell" href="https://developers.google.com/web/updates/2015/11/app-shell" rel="noreferrer nofollow noopener"><i>application shell</i></a></span><span><i> is the minimal HTML, CSS, and JavaScript powering a user interface.</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Have you optimized the performance of your APIs?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>APIs are communication channels for an application to expose data to internal and third-party applications via so-called </span><span><i>endpoints</i></span><span>. When </span><span><a data-target-href="https://www.smashingmagazine.com/2012/10/designing-javascript-apis-usability/" href="https://www.smashingmagazine.com/2012/10/designing-javascript-apis-usability/" rel="noreferrer nofollow noopener">designing and building an API</a></span><span>, we need a reasonable protocol to enable the communication between the server and third-party requests. </span><span><a data-target-href="https://www.smashingmagazine.com/2018/01/understanding-using-rest-api/" href="https://www.smashingmagazine.com/2018/01/understanding-using-rest-api/" rel="noreferrer nofollow noopener">Representational State Transfer</a></span><span> </span><span>(</span><span><a data-target-href="http://web.archive.org/web/20130116005443/http://tomayko.com/writings/rest-to-my-wife" href="http://web.archive.org/web/20130116005443/http://tomayko.com/writings/rest-to-my-wife" rel="noreferrer nofollow noopener"><i>REST</i></a></span><span>)</span><span> is a well-established, logical choice: it defines a set of constraints that developers follow to make content accessible in a performant, reliable and scalable fashion. Web services that conform to the REST constraints, are called </span><span><i>RESTful web services</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As with good ol' HTTP requests, when data is retrieved from an API, any delay in server response will propagate to the end user, hence delaying rendering. When a resource wants to retrieve some data from an API, it will need to request the data from the corresponding endpoint. A component that renders data from several resources, such as an article with comments and author photos in each comment, may need several roundtrips to the server to fetch all the data before it can be rendered. Furthermore, the amount of data returned through REST is often more than what is needed to render that component.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If many resources require data from an API, the API might become a performance bottleneck. </span><span><a data-target-href="https://graphql.org/" href="https://graphql.org/" rel="noreferrer nofollow noopener">GraphQL</a></span><span> provides a performant solution to these issues. Per se, GraphQL is a query language for your API, and a server-side runtime for executing queries by using a type system you define for your data. Unlike REST, GraphQL can retrieve all data in a single request, and the response will be exactly what is required, without </span><span><i>over</i></span><span> or </span><span><i>under</i></span><span>-fetching data as it typically happens with REST.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-10"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption836589188524564878301862&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:353}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: redux-rest-apollo-graphql.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F5fda8d85-1151-4d0b-b2f6-da354ebae345%2Fredux-rest-apollo-graphql.png&amp;hmac=YafwdhWGkWPL1uTSd%2BJnn%2F%2F6qZpQShA1kl%2BKxdu83yc%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption836589188524564878301862"><div data-zone-id="caption836589188524564878301862" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>A difference between REST and GraphQL, illustrated via a conversation between Redux + REST on the left, an Apollo + GraphQL on the right.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> source: </i></span><span><a data-target-href="https://hackernoon.com/how-graphql-replaces-redux-3fff8289221d" href="https://hackernoon.com/how-graphql-replaces-redux-3fff8289221d" rel="noreferrer nofollow noopener"><i>Hacker Noon</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/5fda8d85-1151-4d0b-b2f6-da354ebae345/redux-rest-apollo-graphql.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Will you be using AMP or Instant Articles?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Depending on the priorities and strategy of your organization, you might want to consider using Google’s </span><span><a data-target-href="https://www.ampproject.org/" href="https://www.ampproject.org/" rel="noreferrer nofollow noopener">AMP</a></span><span> or Facebook’s </span><span><a data-target-href="https://instantarticles.fb.com/" href="https://instantarticles.fb.com/" rel="noreferrer nofollow noopener">Instant Articles</a></span><span> or Apple’s </span><span><a data-target-href="https://www.apple.com/news/" href="https://www.apple.com/news/" rel="noreferrer nofollow noopener">Apple News</a></span><span>. You can achieve good performance without them, but AMP </span><span><i>does</i></span><span> provide a solid performance framework with a free content delivery network</span><span> </span><span>(CDN),</span><span> while Instant Articles will boost your visibility and performance on Facebook.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The seemingly obvious benefit of these technologies for users is </span><span><i>guaranteed performance</i></span><span>, so at times they might even prefer AMP-/Apple News/Instant Pages-links over</span><span> </span><span>"regular"</span><span> and potentially bloated pages. For content-heavy websites that are dealing with a lot of third-party content, these options could potentially help speed up render times dramatically.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><a data-target-href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/" href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/" rel="noreferrer nofollow noopener">Unless they don't</a></span></span><span><a data-target-href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/" href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/" rel="noreferrer nofollow noopener">.</a></span><span> According to Tim Kadlec, for example,</span><span> </span><span>"AMP</span><span> documents tend to be faster than their counterparts, but they don’t necessarily mean a page is performant. AMP is not what makes the biggest difference from a performance perspective."</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A benefit for the website owner is obvious: discoverability of these formats on their respective platforms and </span><span><a data-target-href="https://ethanmarcotte.com/wrote/ampersand/" href="https://ethanmarcotte.com/wrote/ampersand/" rel="noreferrer nofollow noopener">increased visibility in search engines</a></span><span>. You could build </span><span><a data-target-href="https://www.smashingmagazine.com/2016/12/progressive-web-amps/" href="https://www.smashingmagazine.com/2016/12/progressive-web-amps/" rel="noreferrer nofollow noopener">progressive web AMPs</a></span><span>, too, by reusing AMPs as a data source for your PWA. Downside? Obviously, a presence in a walled garden places developers in a position to produce and maintain a separate version of their content, and in case of Instant Articles and Apple News </span><span><a data-target-href="https://www.w3.org/blog/TAG/2017/07/27/distributed-and-syndicated-content-whats-wrong-with-this-picture/" href="https://www.w3.org/blog/TAG/2017/07/27/distributed-and-syndicated-content-whats-wrong-with-this-picture/" rel="noreferrer nofollow noopener">without actual URLs</a></span><span> </span><span><i>(thanks</i></span><span><i> Addy, Jeremy!)</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Choose your CDN wisely.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Depending on how much dynamic data you have, you might be able to</span><span> </span><span>"outsource"</span><span> some part of the content to a </span><span><a data-target-href="https://www.staticgen.com/" href="https://www.staticgen.com/" rel="noreferrer nofollow noopener">static site generator</a></span><span>, pushing it to a CDN and serving a static version from it, thus avoiding database requests. You could even choose a </span><span><a data-target-href="https://www.smashingmagazine.com/2015/11/modern-static-website-generators-next-big-thing/" href="https://www.smashingmagazine.com/2015/11/modern-static-website-generators-next-big-thing/" rel="noreferrer nofollow noopener">static-hosting platform</a></span><span> based on a CDN, enriching your pages with interactive components as enhancements</span><span> </span><span>(</span><span><a data-target-href="https://jamstack.org/" href="https://jamstack.org/" rel="noreferrer nofollow noopener">JAMStack</a></span><span>).</span><span> In fact, some of those generators</span><span> </span><span>(like</span><span> </span><span><a data-target-href="https://www.gatsbyjs.org/blog/2017-09-13-why-is-gatsby-so-fast/" href="https://www.gatsbyjs.org/blog/2017-09-13-why-is-gatsby-so-fast/" rel="noreferrer nofollow noopener">Gatsby</a></span><span> on top of React) are actually </span><span><a data-target-href="https://tomdale.net/2017/09/compilers-are-the-new-frameworks/" href="https://tomdale.net/2017/09/compilers-are-the-new-frameworks/" rel="noreferrer nofollow noopener">website compilers</a></span><span> with many automated optimizations provided out of the box. As compilers add optimizations over time, the compiled output gets smaller and faster over time.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Notice that CDNs can serve</span><span> </span><span>(and</span><span> offload) dynamic content as well. So, restricting your CDN to static assets is not necessary. Double-check whether your CDN performs compression and conversion</span><span> </span><span>(e.g.</span><span> image optimization in terms of formats, compression and resizing at the edge), </span><span><a data-target-href="https://www.filamentgroup.com/lab/servers-workers.html" href="https://www.filamentgroup.com/lab/servers-workers.html" rel="noreferrer nofollow noopener">support for servers workers</a></span><span>, edge-side includes, which assemble static and dynamic parts of pages at the CDN’s edge</span><span> </span><span>(i.e.</span><span> the server closest to the user), and other tasks. </span><span><span>If you want to be on the edge, check </span></span><span><span><a data-target-href="https://blog.cloudflare.com/the-quicening/" href="https://blog.cloudflare.com/the-quicening/" rel="noreferrer nofollow noopener">if your CDN supports HTTP over QUIC</a></span></span><span><span><a data-target-href="https://blog.cloudflare.com/the-quicening/" href="https://blog.cloudflare.com/the-quicening/" rel="noreferrer nofollow noopener"> </a></span></span><span><span><a data-target-href="https://blog.cloudflare.com/the-quicening/" href="https://blog.cloudflare.com/the-quicening/" rel="noreferrer nofollow noopener">(HTTP/3)</a></span></span><span><span> as well.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: based on research by Patrick Meenan and Andy Davies, HTTP/2 prioritization is </span><span><a data-target-href="https://github.com/andydavies/http2-prioritization-issues#cdns--cloud-hosting-services" href="https://github.com/andydavies/http2-prioritization-issues#cdns--cloud-hosting-services" rel="noreferrer nofollow noopener">effectively broken on many CDNs</a></span><span>, so be careful when choosing a CDN. Patrick has more details in his recent talk on </span><span><a data-target-href="https://youtu.be/sgjxuhFQktE?t=2626" href="https://youtu.be/sgjxuhFQktE?t=2626" rel="noreferrer nofollow noopener">HTTP/2 Prioritization</a></span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Barry!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-264"><h2 data-usually-unique-id="601002317882442518864404"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Assets Optimizations</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Use Brotli for plain text compression.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The catch is that compressing all assets with Brotli is quite expensive, so a number of servers can’t use it just because of the cost overhead it produces. In fact, at the highest level of compression, Brotli is so slow that any potential gains in file size could be nullified by the amount of time it takes for the server to begin sending the response as it waits to dynamically compress the asset. With static compression, however, </span><span><a data-target-href="https://css-tricks.com/brotli-static-compression/" href="https://css-tricks.com/brotli-static-compression/" rel="noreferrer nofollow noopener">higher compression settings are preferred</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you can bypass the cost of dynamically compressing static assets, it’s worth the effort. Brotli can be used for any plaintext payload — HTML, CSS, SVG, JavaScript, and so on.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The strategy? </span><span><a data-target-href="https://css-tricks.com/brotli-static-compression/" href="https://css-tricks.com/brotli-static-compression/" rel="noreferrer nofollow noopener">Pre-compress static assets with Brotli+Gzip</a></span><span> at the highest level and compress</span><span> </span><span>(dynamic)</span><span> HTML on the fly with Brotli at level 3–5. Make sure that the server handles content negotiation for Brotli or gzip properly.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-11"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption106617819077979081441121&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:247}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 04-compression-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fce5cfe14-7c4d-40e3-8047-07dfdb877bf5%2F04-compression-front-end-performance-checklist-2020.png&amp;hmac=ldFSAdDnlFx%2FG7hzxCCunzQzRk3P2D%2FfYLOYQWEHhT0%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption106617819077979081441121"><div data-zone-id="caption106617819077979081441121" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Both on desktop and on mobile, only 15% of all requests are compressed with Brotli. Around 65% are compressed with gzip. The rest isn’t compressed at all.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> source: </i></span><span><a data-target-href="https://almanac.httparchive.org/en/2019/compression" href="https://almanac.httparchive.org/en/2019/compression" rel="noreferrer nofollow noopener"><i>Web Almanac: Compression</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce5cfe14-7c4d-40e3-8047-07dfdb877bf5/04-compression-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Use responsive images and WebP.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As far as possible, use </span><span><a data-target-href="https://www.smashingmagazine.com/2014/05/responsive-images-done-right-guide-picture-srcset/" href="https://www.smashingmagazine.com/2014/05/responsive-images-done-right-guide-picture-srcset/" rel="noreferrer nofollow noopener">responsive images</a></span><span> with </span><span>srcset</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>sizes</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and the </span><span>&lt;picture&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> element. While you’re at it, you could also make use of the </span><span><a data-target-href="https://www.smashingmagazine.com/2015/10/webp-images-and-performance/" href="https://www.smashingmagazine.com/2015/10/webp-images-and-performance/" rel="noreferrer nofollow noopener">WebP format</a></span><span> </span><span>(supported</span><span> in all modern browsers except Safari and iOS Safari) by serving WebP images with the </span><span>&lt;picture&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> element and a JPEG fallback</span><span> </span><span>(see</span><span> Andreas Bovens' </span><span><a data-target-href="https://dev.opera.com/articles/responsive-images/#different-image-types-use-case" href="https://dev.opera.com/articles/responsive-images/#different-image-types-use-case" rel="noreferrer nofollow noopener">code snippet</a></span><span>) or by using content negotiation</span><span> </span><span>(using</span><span> </span><span>Accept</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> headers). Ire Aderinokun has a very detailed </span><span><a data-target-href="https://bitsofco.de/why-and-how-to-use-webp-images-today/" href="https://bitsofco.de/why-and-how-to-use-webp-images-today/" rel="noreferrer nofollow noopener">tutorial on converting images to WebP</a></span><span>, too.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It’s important to note that while WebP image file sizes </span><span><a data-target-href="https://www.ctrl.blog/entry/webp-vs-guetzli-zopfli" href="https://www.ctrl.blog/entry/webp-vs-guetzli-zopfli" rel="noreferrer nofollow noopener">compared to equivalent Guetzli and Zopfli</a></span><span>, the format </span><span><a data-target-href="https://youtu.be/jTXhYj2aCDU?t=630" href="https://youtu.be/jTXhYj2aCDU?t=630" rel="noreferrer nofollow noopener">doesn’t support progressive rendering like JPEG</a></span><span>, which is why users might see an actual image faster with a good ol' JPEG although WebP images might get faster through the network. With JPEG, we can serve a</span><span> </span><span>"decent"</span><span> user experience with the half or even quarter of the data and load the rest later, rather than have a half-empty image as it is in the case of WebP. Your decision will depend on what you are after: with WebP, you’ll reduce the payload, and with JPEG you’ll improve perceived performance.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>On Smashing Magazine, we use the postfix</span><span> </span><span>-opt</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> for image names — for example, </span><span>brotli-compression-opt.png</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>; whenever an image contains that postfix, everybody on the team knows that the image has already been optimized. And — </span><span><i>shameless plug!</i></span><span> — Jeremy Wagner even </span><span><a data-target-href="https://www.smashingmagazine.com/ebooks/the-webp-manual/" href="https://www.smashingmagazine.com/ebooks/the-webp-manual/" rel="noreferrer nofollow noopener">published a Smashing book on WebP</a></span><span>.</span></p><div dir="auto" data-line-manager="gallery" contenteditable="false" id="editor-1-ace-line-285"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-12"><span><span data-reactroot=""><div><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/db62c469-bbfc-4959-839d-590abb41b64e/responsive-breakpoints-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/db62c469-bbfc-4959-839d-590abb41b64e/responsive-breakpoints-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption090471867395888181791336&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:229}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: responsive-breakpoints-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fdb62c469-bbfc-4959-839d-590abb41b64e%2Fresponsive-breakpoints-opt.png&amp;hmac=qgJKuiHu8oYEkkY3towUQl9eSH%2F2zBiIX4QuCyCgcdc%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/db62c469-bbfc-4959-839d-590abb41b64e/responsive-breakpoints-opt.png" contenteditable="false"></span></span></span></span></span></span></span></p></div></span></span></span></span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are images properly optimized?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>When you’re working on a landing page on which it’s critical that a particular image loads blazingly fast, make sure that JPEGs are progressive and compressed with </span><span><a data-target-href="https://github.com/mozilla/mozjpeg" href="https://github.com/mozilla/mozjpeg" rel="noreferrer nofollow noopener">mozJPEG</a></span><span> </span><span>(which</span><span> improves the start rendering time by manipulating scan levels) or take a look at </span><span><a data-target-href="https://github.com/google/guetzli" href="https://github.com/google/guetzli" rel="noreferrer nofollow noopener">Guetzli</a></span><span>, Google’s </span><span><span>new</span></span><span> open-source encoder focusing on perceptual performance, and utilizing learnings from Zopfli and WebP. </span><span><a data-target-href="https://medium.com/@fox/talk-the-state-of-the-web-3e12f8e413b3" href="https://medium.com/@fox/talk-the-state-of-the-web-3e12f8e413b3" rel="noreferrer nofollow noopener">The only downside</a></span><span>: slow processing times</span><span> </span><span>(a</span><span> minute of CPU per megapixel). For PNG, we can use </span><span><a data-target-href="http://css-ig.net/pingo" href="http://css-ig.net/pingo" rel="noreferrer nofollow noopener">Pingo</a></span><span>, and for SVG, we can use </span><span><a data-target-href="https://www.npmjs.com/package/svgo" href="https://www.npmjs.com/package/svgo" rel="noreferrer nofollow noopener">SVGO</a></span><span> or </span><span><a data-target-href="https://jakearchibald.github.io/svgomg/" href="https://jakearchibald.github.io/svgomg/" rel="noreferrer nofollow noopener">SVGOMG</a></span><span>. And if you need to quickly preview and copy or download all the SVG assets from a website, </span><span><a data-target-href="https://chrome.google.com/webstore/detail/svg-grabber-get-all-the-s/ndakggdliegnegeclmfgodmgemdokdmg" href="https://chrome.google.com/webstore/detail/svg-grabber-get-all-the-s/ndakggdliegnegeclmfgodmgemdokdmg" rel="noreferrer nofollow noopener">svg-grabber</a></span><span> can do that for you, too.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Every single image optimization article would state it, but keeping vector assets clean and tight is always worth reminding. Make sure to clean up unused assets, remove unnecessary metadata and reduces the amount of path points in artwork</span><span> </span><span>(and</span><span> thus SVG code).</span><span> </span><span>(</span><span><i>Thanks,</i></span><span><i> Jeremy!</i></span><span>)</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>There are more advanced options though. You could:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-294"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Use </span><span><a data-target-href="https://squoosh.app/" href="https://squoosh.app/" rel="noreferrer nofollow noopener">Squoosh</a></span><span> to compress, resize and manipulate images at the optimal compression levels</span><span> </span><span>(lossy</span><span> or lossless),</span></li></ul></div><div dir="auto" id="editor-1-ace-line-296"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To check the efficiency of your responsive markup, you can use </span><span><a data-target-href="https://github.com/filamentgroup/imaging-heap" href="https://github.com/filamentgroup/imaging-heap" rel="noreferrer nofollow noopener">imaging-heap</a></span><span>, a command line tool that measure the efficiency across viewport sizes and device pixel ratios.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-297"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Lazy load images and iframes with </span><span><a data-target-href="https://www.smashingmagazine.com/2019/05/hybrid-lazy-loading-progressive-migration-native/" href="https://www.smashingmagazine.com/2019/05/hybrid-lazy-loading-progressive-migration-native/" rel="noreferrer nofollow noopener">hybrid lazy-loading</a></span><span>, utilizing native lazy-oading and </span><span><a data-target-href="https://github.com/verlok/lazyload" href="https://github.com/verlok/lazyload" rel="noreferrer nofollow noopener">lazyload</a></span><span>, a library that detects any visibility changes triggered through user interaction</span><span> </span><span>(or</span><span> IntersectionObserver which we’ll explore later).</span></li></ul></div><div dir="auto" id="editor-1-ace-line-298"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Watch out for images that are loaded by default, but might never be displayed — e.g. in carousels, accordions and image galleries.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-301"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To optimize storage interally, you could use Dropbox’s new </span><span><a data-target-href="https://github.com/dropbox/lepton" href="https://github.com/dropbox/lepton" rel="noreferrer nofollow noopener">Lepton format</a></span><span> for losslessly compressing JPEGs by an average of 22%.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-303"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you feel adventurous, you could chop and rearrange HTTP/2 streams using </span><span><a data-target-href="https://youtu.be/jTXhYj2aCDU?t=854" href="https://youtu.be/jTXhYj2aCDU?t=854" rel="noreferrer nofollow noopener">Edge workers</a></span><span>, basically a real-time filter living on the CDN, to send images faster through the network. Edge workers use JavaScript streams that use chunks which you can control</span><span> </span><span>(basically</span><span> they are JavaScript that runs on the CDN edge that can modify the streaming responses), so you can control the delivery of images. With service worker it’s too late as you can’t control what’s on the wire, but it does work with Edge workers. So you can use them on top of static JPEGs saved progressively for a particular landing page.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-13"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/8422076c-6eea-4b35-a98c-b15445cb2dff/viewport-percentage-match.jpg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/8422076c-6eea-4b35-a98c-b15445cb2dff/viewport-percentage-match.jpg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption293299141290441168427507&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:261}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: viewport-percentage-match.jpg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F8422076c-6eea-4b35-a98c-b15445cb2dff%2Fviewport-percentage-match.jpg&amp;hmac=Q6H9CSfBNI7DulwvZ4cZj%2Fb7MbduV3inJgX5a7k2ruU%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/8422076c-6eea-4b35-a98c-b15445cb2dff/viewport-percentage-match.jpg" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The future of responsive images might change dramatically with the adoption of </span><span><a data-target-href="https://cloudfour.com/thinks/responsive-images-201-client-hints/" href="https://cloudfour.com/thinks/responsive-images-201-client-hints/" rel="noreferrer nofollow noopener">client hints</a></span><span>. Client hints are HTTP request header fields, e.g. </span><span>DPR</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>Viewport-Width</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>Width</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>Save-Data</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>Accept</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(to</span><span> specify image format preferences) and others. They are supposed to inform the server about the specifics of user’s browser, screen, connection etc. As a result, the server can decide how to fill in the layout with appropriately sized images, and serve only these images in desired formats. With client hints, we move the resource selection from HTML markup and into the request-response negotiation between the client and server.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As Ilya Grigorik </span><span><a data-target-href="https://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints" href="https://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints" rel="noreferrer nofollow noopener">noted</a></span><span>, client hints complete the picture — they aren’t an alternative to responsive images.</span><span> </span><span>"The</span><span> </span><span>&lt;picture&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> element provides the necessary art-direction control in the HTML markup. Client hints provide annotations on resulting image requests that enable resource selection automation. Service Worker provides full request and response management capabilities on the client." A service worker could, for example, append new client hints headers values to the request, rewrite the URL and point the image request to a CDN, adapt response based on connectivity and user preferences, etc. It holds true not only for image assets but for pretty much all other requests as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>For clients that support client hints, one could measure </span></span><span><span><a data-target-href="https://twitter.com/igrigorik/status/1032657105998700544" href="https://twitter.com/igrigorik/status/1032657105998700544" rel="noreferrer nofollow noopener">42% byte savings on images</a></span></span><span><span> and 1MB+ fewer bytes for 70th+ percentile. On Smashing Magazine, we could measure </span></span><span><span><a data-target-href="https://www.smashingmagazine.com/2016/01/leaner-responsive-images-client-hints/" href="https://www.smashingmagazine.com/2016/01/leaner-responsive-images-client-hints/" rel="noreferrer nofollow noopener">19-32% improvement</a></span></span><span><span>, too. Unfortunately, client hints still have to </span></span><span><span><a data-target-href="http://caniuse.com/#search=client-hints" href="http://caniuse.com/#search=client-hints" rel="noreferrer nofollow noopener">gain some browser support</a></span></span><span><span>. Still under consideration in </span></span><span><span><a data-target-href="https://bugzilla.mozilla.org/show_bug.cgi?id=935216" href="https://bugzilla.mozilla.org/show_bug.cgi?id=935216" rel="noreferrer nofollow noopener">Firefox</a></span></span><span><span>. However, if you supply both the normal responsive images markup and the </span></span><span><span>&lt;meta&gt;</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span> tag for Client Hints, then the browser will evaluate the responsive images markup and request the appropriate image source using the Client Hints HTTP headers.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Not good enough? Well, you can also improve perceived performance for images with the </span><span><a data-target-href="http://csswizardry.com/2016/10/improving-perceived-performance-with-multiple-background-images/" href="http://csswizardry.com/2016/10/improving-perceived-performance-with-multiple-background-images/" rel="noreferrer nofollow noopener">multiple</a></span><span> </span><span><a data-target-href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/" href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/" rel="noreferrer nofollow noopener">background</a></span><span> </span><span><a data-target-href="https://manu.ninja/dominant-colors-for-lazy-loading-images#tiny-thumbnails" href="https://manu.ninja/dominant-colors-for-lazy-loading-images#tiny-thumbnails" rel="noreferrer nofollow noopener">images</a></span><span> </span><span><a data-target-href="https://css-tricks.com/the-blur-up-technique-for-loading-background-images/" href="https://css-tricks.com/the-blur-up-technique-for-loading-background-images/" rel="noreferrer nofollow noopener">technique</a></span><span>. Keep in mind that </span><span><a data-target-href="https://css-tricks.com/contrast-swap-technique-improved-image-performance-css-filters/" href="https://css-tricks.com/contrast-swap-technique-improved-image-performance-css-filters/" rel="noreferrer nofollow noopener">playing with contrast</a></span><span> and blurring out unnecessary details</span><span> </span><span>(or</span><span> removing colors) can reduce file size as well. Ah, you need to enlarge a small photo without losing quality? Consider using </span><span><a data-target-href="https://letsenhance.io/" href="https://letsenhance.io/" rel="noreferrer nofollow noopener">Letsenhance.io</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>These optimizations so far cover just the basics. Addy Osmani has published a </span><span><a data-target-href="https://images.guide/" href="https://images.guide/" rel="noreferrer nofollow noopener">very detailed guide on Essential Image Optimization</a></span><span> that goes very deep into details of image compression and color management. For example, you could blur out unnecessary parts of the image</span><span> </span><span>(by</span><span> applying a Gaussian blur filter to them) to reduce the file size, and eventually you might even start removing colors or turn the picture into black and white to reduce the size even further. For background images, exporting photos from Photoshop with 0 to 10% quality can be absolutely acceptable as well. Ah, and </span><span><a data-target-href="https://calendar.perfplanet.com/2018/dont-use-jpeg-xr-on-the-web/" href="https://calendar.perfplanet.com/2018/dont-use-jpeg-xr-on-the-web/" rel="noreferrer nofollow noopener">don’t use JPEG-XR on the web</a></span><span> —</span><span> </span><span>"the</span><span> processing of decoding JPEG-XRs software-side on the CPU nullifies and even outweighs the potentially positive impact of byte size savings, especially in the context of SPAs".</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-14"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption138604725648807691439144&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:225}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: replace-animated-gifs.jpg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fc987b182-0a0e-40e5-8f8d-dd81feb991f5%2Freplace-animated-gifs.jpg&amp;hmac=W89RoaLSUeXVZEoy4A%2FtVDAXq0uirm0j%2FxY9mCaj4hs%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption138604725648807691439144"><div data-zone-id="caption138604725648807691439144" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Addy Osmani </i></span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/" rel="noreferrer nofollow noopener"><i>recommends</i></a></span><span><i> to replace animated GIFs with looping inline videos. The file size difference is noticeable</i></span><span><i> </i></span><span><i>(80%</i></span><span><i> savings).</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c987b182-0a0e-40e5-8f8d-dd81feb991f5/replace-animated-gifs.jpg" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are videos properly optimized?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We covered images so far, but we’ve avoided a conversation about good ol' GIFs. Frankly, instead of loading heavy animated GIFs which impact both rendering performance and bandwidth, it’s a good idea to switch either to animated WebP</span><span> </span><span>(with</span><span> GIF being a fallback) or replace them with </span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/" rel="noreferrer nofollow noopener">looping HTML5 videos</a></span><span> altogether. Yes, unlike with images, browsers do not preload </span><span>&lt;video&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> content, but HTML5 videos tend to be lighter and smaller than GIFs. Not an option? Well, at least we can add lossy compression to GIFs with </span><span><a data-target-href="https://kornel.ski/lossygif" href="https://kornel.ski/lossygif" rel="noreferrer nofollow noopener">Lossy GIF</a></span><span>, </span><span><a data-target-href="https://github.com/kohler/gifsicle" href="https://github.com/kohler/gifsicle" rel="noreferrer nofollow noopener">gifsicle</a></span><span> or </span><span><a data-target-href="https://github.com/pornel/giflossy" href="https://github.com/pornel/giflossy" rel="noreferrer nofollow noopener">giflossy</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Tests show that inline videos within </span><span>img</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> tags </span><span><a data-target-href="https://calendar.perfplanet.com/2017/animated-gif-without-the-gif/" href="https://calendar.perfplanet.com/2017/animated-gif-without-the-gif/" rel="noreferrer nofollow noopener">display 20× faster and decode 7× faster</a></span><span> than the GIF equivalent, in addition to being a fraction in file size.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In the land of good news, video formats have been advancing massively over the years. For a long time, we had hoped that WebM would become the format to rule them all, and WebP</span><span> </span><span>(which</span><span> is basically one still image inside of the WebM video container) will become a replacement for dated image formats. But despite WebP and WebM </span><span><a data-target-href="https://caniuse.com/webp" href="https://caniuse.com/webp" rel="noreferrer nofollow noopener">gaining</a></span><span> </span><span><a data-target-href="https://caniuse.com/#feat=webm" href="https://caniuse.com/#feat=webm" rel="noreferrer nofollow noopener">support</a></span><span> these days, the breakthrough didn’t happen.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In 2018, the Alliance of Open Media has released a new promising video format called </span><span><i>AV1</i></span><span>. AV1 has compression similar to H.265 codec</span><span> </span><span>(the</span><span> evolution of H.264) but unlike the latter, AV1 is free. The H.265 license pricing pushed browser vendors to adopting a comparably performant AV1 instead: </span><span><b>AV1</b></span><span><b> </b></span><span><b>(just</b></span><span><b> like H.265) compresses twice as good as WebM</b></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-15"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b5a4354f-4a9b-420d-8979-bd7abb87aebc/av1-logo-2018-full.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b5a4354f-4a9b-420d-8979-bd7abb87aebc/av1-logo-2018-full.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption030967804890567344154206&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:231}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: av1-logo-2018-full.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fb5a4354f-4a9b-420d-8979-bd7abb87aebc%2Fav1-logo-2018-full.png&amp;hmac=omH8Mhsjv5LKoOnSsYH9xTCLswBk0%2BylawyuZ7VXjNs%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b5a4354f-4a9b-420d-8979-bd7abb87aebc/av1-logo-2018-full.png" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In fact, Apple currently uses HEIF format and HEVC</span><span> </span><span>(H.265),</span><span> and all the photos and videos on the latest iOS are saved in these formats, not JPEG. While </span><span><a data-target-href="https://caniuse.com/#search=heif" href="https://caniuse.com/#search=heif" rel="noreferrer nofollow noopener">HEIF</a></span><span> and </span><span><a data-target-href="https://caniuse.com/#search=hevc" href="https://caniuse.com/#search=hevc" rel="noreferrer nofollow noopener">HEVC</a></span><span><a data-target-href="https://caniuse.com/#search=hevc" href="https://caniuse.com/#search=hevc" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://caniuse.com/#search=hevc" href="https://caniuse.com/#search=hevc" rel="noreferrer nofollow noopener">(H.265)</a></span><span> aren’t properly exposed to the web</span><span> </span><span>(yet?),</span><span> AV1 is — and </span><span><a data-target-href="https://caniuse.com/#feat=av1" href="https://caniuse.com/#feat=av1" rel="noreferrer nofollow noopener">it’s gaining browser support</a></span><span>. So adding the </span><span>AV1</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> source in your </span><span>&lt;video&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> tag is reasonable, as all browser vendors seem to be on board.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For now, the most widely used and supported encoding is H.264, served by MP4 files, so before serving the file, make sure that your MP4s are processed with a </span><span><a data-target-href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" rel="noreferrer nofollow noopener">multipass-encoding</a></span><span>, blurred with the </span><span><a data-target-href="https://yalantis.com/blog/experiments-with-ffmpeg-filters-and-frei0r-plugin-effects/" href="https://yalantis.com/blog/experiments-with-ffmpeg-filters-and-frei0r-plugin-effects/" rel="noreferrer nofollow noopener">frei0r iirblur effect</a></span><span> </span><span>(if</span><span> applicable) and </span><span><a data-target-href="http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html" href="http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html" rel="noreferrer nofollow noopener">moov atom metadata</a></span><span> is moved to the head of the file, while your server </span><span><a data-target-href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" rel="noreferrer nofollow noopener">accepts byte serving</a></span><span>. Boris Schapira provides </span><span><a data-target-href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" href="https://medium.com/@borisschapira/optimize-your-mp4-video-for-better-performance-dareboost-blog-fb2f3f3dce77" rel="noreferrer nofollow noopener">exact instructions for FFmpeg</a></span><span> to optimize videos to the maximum. Of course, providing WebM format as an alternative would help, too.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Video playback performance is a </span><span><a data-target-href="https://dougsillars.com/2019/09/16/state-of-the-web-video-playback-metrics/" href="https://dougsillars.com/2019/09/16/state-of-the-web-video-playback-metrics/" rel="noreferrer nofollow noopener">story on its own</a></span><span>, and if you’d like to dive into it in details, take a look at Doug Sillar’s series on </span><span><a data-target-href="https://www.smashingmagazine.com/2018/10/video-playback-on-the-web-part-1/" href="https://www.smashingmagazine.com/2018/10/video-playback-on-the-web-part-1/" rel="noreferrer nofollow noopener">The Current State of Video</a></span><span> and </span><span><a data-target-href="https://www.smashingmagazine.com/2018/10/video-playback-on-the-web-part-2/" href="https://www.smashingmagazine.com/2018/10/video-playback-on-the-web-part-2/" rel="noreferrer nofollow noopener">Video Delivery Best Practices</a></span><span> that include details on video delivery metrics, video preloading, compression and streaming.</span></p><div dir="auto" data-line-manager="gallery" contenteditable="false" id="editor-1-ace-line-332"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-16"><span><span data-reactroot=""><div><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb634666-55ab-4db3-aa40-4b146a859041/font-loading-strategies-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb634666-55ab-4db3-aa40-4b146a859041/font-loading-strategies-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption159391586522569467784027&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:243}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: font-loading-strategies-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Feb634666-55ab-4db3-aa40-4b146a859041%2Ffont-loading-strategies-opt.png&amp;hmac=BHbsXxbr0796Qu%2FsV91%2BnwMiQED0NH%2BtktnKWTF4%2B6g%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/eb634666-55ab-4db3-aa40-4b146a859041/font-loading-strategies-opt.png" contenteditable="false"></span></span></span></span></span></span></span></p></div></span></span></span></span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are web fonts optimized?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The first question that’s worth asking if you can get away with </span><span><a data-target-href="https://www.smashingmagazine.com/2015/11/using-system-ui-fonts-practical-guide/" href="https://www.smashingmagazine.com/2015/11/using-system-ui-fonts-practical-guide/" rel="noreferrer nofollow noopener">using UI system fonts</a></span><span> in the first place — just make sure to </span><span><a data-target-href="http://fontfamily.io/Roboto,Segoe_UI,TImes,Helvetica,sans-serif" href="http://fontfamily.io/Roboto,Segoe_UI,TImes,Helvetica,sans-serif" rel="noreferrer nofollow noopener">double check that they appear correctly</a></span><span> on various platforms. If it’s not the case, chances are high that the web fonts you are serving include glyphs and extra features and weights that aren’t being used. You can ask your type foundry to subset web fonts or if you are using open-source fonts, subset them on your own with </span><span><a data-target-href="https://www.afasterweb.com/2018/03/09/subsetting-fonts-with-glyphhanger/" href="https://www.afasterweb.com/2018/03/09/subsetting-fonts-with-glyphhanger/" rel="noreferrer nofollow noopener">Glyphhanger</a></span><span> or </span><span><a data-target-href="https://www.fontsquirrel.com/tools/webfont-generator" href="https://www.fontsquirrel.com/tools/webfont-generator" rel="noreferrer nofollow noopener">Fontsquirrel</a></span><span>. You can even automate your entire workflow with Peter Müller’s </span><span><a data-target-href="https://github.com/Munter/subfont#readme" href="https://github.com/Munter/subfont#readme" rel="noreferrer nofollow noopener">subfont</a></span><span>, a command line tool that statically analyses your page in order to generate the most optimal web font subsets, and then inject them into your page.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="http://caniuse.com/#search=woff2" href="http://caniuse.com/#search=woff2" rel="noreferrer nofollow noopener">WOFF2 support</a></span><span> is great, and you can use WOFF as fallback for browsers that don’t support it — or perhaps legacy browsers could be served well enough with system fonts instead. There are </span><span><i>many, many, many</i></span><span> options for web font loading, and you can choose one of the strategies from Zach Leatherman’s</span><span> </span><span>"</span><span><a data-target-href="https://www.zachleat.com/web/comprehensive-webfonts/" href="https://www.zachleat.com/web/comprehensive-webfonts/" rel="noreferrer nofollow noopener">Comprehensive</a></span><span><a data-target-href="https://www.zachleat.com/web/comprehensive-webfonts/" href="https://www.zachleat.com/web/comprehensive-webfonts/" rel="noreferrer nofollow noopener"> Guide to Font-Loading Strategies</a></span><span>,"</span><span> </span><span>(code</span><span> snippets also available as </span><span><a data-target-href="https://github.com/zachleat/web-font-loading-recipes" href="https://github.com/zachleat/web-font-loading-recipes" rel="noreferrer nofollow noopener">Web font loading recipes</a></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Probably the better options to consider today are </span><span><a data-target-href="https://www.zachleat.com/web/comprehensive-webfonts/#critical-foft-preload" href="https://www.zachleat.com/web/comprehensive-webfonts/#critical-foft-preload" rel="noreferrer nofollow noopener">Critical FOFT with </a></span><span><a data-target-href="https://www.zachleat.com/web/comprehensive-webfonts/#critical-foft-preload" href="https://www.zachleat.com/web/comprehensive-webfonts/#critical-foft-preload" rel="noreferrer nofollow noopener">preload</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and</span><span> </span><span><a data-target-href="https://www.zachleat.com/web/the-compromise/" href="https://www.zachleat.com/web/the-compromise/" rel="noreferrer nofollow noopener">"The</a></span><span><a data-target-href="https://www.zachleat.com/web/the-compromise/" href="https://www.zachleat.com/web/the-compromise/" rel="noreferrer nofollow noopener"> Compromise" method</a></span><span>. Both of them use a two-stage render for delivering web fonts in steps — first a small supersubset required to render the page fast and accurately with the web font, and then load the rest of the family async. The difference is that</span><span> </span><span>"The</span><span> Compromise" technique loads polyfill asynchronously only if </span><span><a data-target-href="https://www.igvita.com/2014/01/31/optimizing-web-font-rendering-performance/#font-load-events" href="https://www.igvita.com/2014/01/31/optimizing-web-font-rendering-performance/#font-load-events" rel="noreferrer nofollow noopener">font load events</a></span><span> are not supported, so you don’t need to load the polyfill by default. Need a quick win? Zach Leatherman has a </span><span><a data-target-href="https://www.zachleat.com/web/23-minutes/" href="https://www.zachleat.com/web/23-minutes/" rel="noreferrer nofollow noopener">quick 23-min tutorial and case study</a></span><span> to get your fonts in order.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In general, it might be a good idea to use the </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> resource hint to preload fonts, but in your markup include the hints </span><span><i>after</i></span><span> the link to critical CSS and JavaScript. With </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, there is a </span><span><a data-target-href="https://andydavies.me/blog/2019/02/12/preloading-fonts-and-the-puzzle-of-priorities/" href="https://andydavies.me/blog/2019/02/12/preloading-fonts-and-the-puzzle-of-priorities/" rel="noreferrer nofollow noopener">puzzle of priorities</a></span><span>, so consider injecting </span><span>rel="preload"</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> elements into the DOM just before the external blocking scripts. According to Andy Davies,</span><span> </span><span>"resources</span><span> injected using a script are hidden from the browser until the script executes, and we can use this behaviour to delay when the browser discovers the </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> hint." Otherwise, font loading will cost you in the first render time.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It’s a good idea to </span><span><a data-target-href="https://youtu.be/FbguhX3n3Uc?t=1637" href="https://youtu.be/FbguhX3n3Uc?t=1637" rel="noreferrer nofollow noopener">be selective</a></span><span> and choose files that matter most, e.g. the ones that are critical for rendering or that would help you avoiding visible and disruptive text reflows. In general, Zach advises to </span><span><b>preload one or two fonts of each family</b></span><span> — it also makes sense to delay some font loading if they are less critical.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It has become quite common to use </span><span>local()</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> value</span><span> </span><span>(which</span><span> refers to a lo­cal font by name) when defining a </span><span>font-family</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> in the </span><span>@font-face</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> rule:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><code data-code-line-number="1" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>/* Warning! Probably not a good idea! */</span></code></p><p><code data-code-line-number="2" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>@font-face {</span></code></p><p><code data-code-line-number="3" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>&nbsp; font-family: Open Sans;</span></code></p><p><code data-code-line-number="4" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>&nbsp; src: local('Open Sans Regular'),</span></code></p><p><code data-code-line-number="5" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>&nbsp; &nbsp; &nbsp; &nbsp;local('OpenSans-Regular'),</span></code></p><p><code data-code-line-number="6" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>&nbsp; &nbsp; &nbsp; &nbsp;url('opensans.woff2') format ('woff2'),</span></code></p><p><code data-code-line-number="7" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>&nbsp; &nbsp; &nbsp; &nbsp;url('opensans.woff') format('woff');</span></code></p><p><code data-code-line-number="8" spellcheck="false"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>}</span></code></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The idea is reasonable: some popular open source fonts such as Open Sans are coming pre-installed with some drivers or apps, so if the font is avail­able lo­cally, the browser does­n’t need to down­load the web font and can dis­play the lo­cal font im­me­di­ately. As </span><span><a data-target-href="https://www.bramstein.com/writing/web-font-anti-patterns-local-fonts.html" href="https://www.bramstein.com/writing/web-font-anti-patterns-local-fonts.html" rel="noreferrer nofollow noopener">Bram Stein noted</a></span><span>,</span><span> </span><span>"though</span><span> a lo­cal font matches the name of a web font, it most likely isn't the same font. Many web fonts dif­fer from their</span><span> </span><span>"desk­top"</span><span> ver­sion. The text might be ren­dered dif­fer­ently, some char­ac­ters may fall back to other fonts, Open­Type fea­tures can be miss­ing en­tirely, or the line height may be dif­fer­ent."</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, as typefaces evolve over time, the locally installed version might be very different from the web font, with characters looking very different. So, according to Bram, it's better to </span><span><b>never mix lo­cally in­stalled fonts and web fonts</b></span><span> in </span><span>@font-face</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> rules.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Nobody likes waiting for the content to be displayed. With the </span><span><a data-target-href="https://font-display.glitch.me/" href="https://font-display.glitch.me/" rel="noreferrer nofollow noopener">font-display</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://font-display.glitch.me/" href="https://font-display.glitch.me/" rel="noreferrer nofollow noopener"> CSS descriptor</a></span><span>, we can control the font loading behavior and enable content to be readable </span><span><i>immediately</i></span><span> </span><span>(</span><span>font-display: optional</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>) or </span><span><i>almost immediately</i></span><span> </span><span>(</span><span>font-display: swap</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>). However, if you want to </span><span><a data-target-href="https://www.zachleat.com/web/font-display-reflow/" href="https://www.zachleat.com/web/font-display-reflow/" rel="noreferrer nofollow noopener">avoid text reflows</a></span><span>, we still need to use the Font Loading API, specifically to </span><span><b>group repaints</b></span><span>, or when you are using third party hosts. Unless you can use </span><span><a data-target-href="https://blog.cloudflare.com/fast-google-fonts-with-cloudflare-workers/" href="https://blog.cloudflare.com/fast-google-fonts-with-cloudflare-workers/" rel="noreferrer nofollow noopener">Google Fonts with Cloudflare Workers</a></span><span>, of course.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In general, if you use </span><span>font-display: optional</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, it </span><span><a data-target-href="https://www.zachleat.com/web/preload-font-display-optional/" href="https://www.zachleat.com/web/preload-font-display-optional/" rel="noreferrer nofollow noopener">might not be a good idea</a></span><span> to also use </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> as it will trigger that web font request early</span><span> </span><span>(causing</span><span> network congestion if you have other critical path resources that need to be fetched). Use </span><span>preconnect</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> for faster cross-origin font requests, but be cautious with </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> as preloading fonts from a different origin wlll incur network contention. All of these techniques are covered in Zach’s </span><span><a data-target-href="https://github.com/zachleat/web-font-loading-recipes" href="https://github.com/zachleat/web-font-loading-recipes" rel="noreferrer nofollow noopener">Web font loading recipes</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It might be a good idea to opt out of web fonts</span><span> </span><span>(or</span><span> at least second stage render) if the user has enabled </span><span><a data-target-href="https://webkit.org/blog/7551/responsive-design-for-motion/" href="https://webkit.org/blog/7551/responsive-design-for-motion/" rel="noreferrer nofollow noopener">Reduce Motion</a></span><span> in accessibility preferences or has opted in for Data Saver Mode</span><span> </span><span>(see</span><span> </span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/" rel="noreferrer nofollow noopener">Save-Data</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/" rel="noreferrer nofollow noopener"> header</a></span><span>). Or when the user happens to have slow connectivity</span><span> </span><span>(via</span><span> </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API" href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API" rel="noreferrer nofollow noopener">Network Information API</a></span><span>). We might also have </span><span><a data-target-href="https://github.com/w3c/csswg-drafts/issues/2370" href="https://github.com/w3c/csswg-drafts/issues/2370" rel="noreferrer nofollow noopener">prefers-reduced-data</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> available at some point soon, exposing if the </span><span>Save-Data</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> request header from the Client Hint HTTP extension is on/off to allow for usage with CSS.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To measure the web font loading performance, consider the </span><span><a data-target-href="https://noti.st/zachleat/KNaZEg/the-five-whys-of-web-font-loading-performance#s5IYiho" href="https://noti.st/zachleat/KNaZEg/the-five-whys-of-web-font-loading-performance#s5IYiho" rel="noreferrer nofollow noopener"><i>All Text Visible</i></a></span><span> metric</span><span> </span><span>(the</span><span> moment when all fonts have loaded and all content is displayed in web fonts), as well as </span><span><a data-target-href="https://noti.st/zachleat/KNaZEg/the-five-whys-of-web-font-loading-performance#sJw0KSc" href="https://noti.st/zachleat/KNaZEg/the-five-whys-of-web-font-loading-performance#sJw0KSc" rel="noreferrer nofollow noopener"><i>Web Font Reflow Count</i></a></span><span> after first render. Obviously, the lower both metrics are, the better the performance is. It’s important to notice that </span><span><a data-target-href="https://alistapart.com/blog/post/variable-fonts-for-responsive-design" href="https://alistapart.com/blog/post/variable-fonts-for-responsive-design" rel="noreferrer nofollow noopener">variable</a></span><span> </span><span><a data-target-href="https://www.smashingmagazine.com/2017/09/new-font-technologies-improve-web/" href="https://www.smashingmagazine.com/2017/09/new-font-technologies-improve-web/" rel="noreferrer nofollow noopener">fonts</a></span><span> might require a </span><span><a data-target-href="https://youtu.be/FbguhX3n3Uc?t=2161" href="https://youtu.be/FbguhX3n3Uc?t=2161" rel="noreferrer nofollow noopener">significant performance consideration</a></span><span>. They give designers a much broader design space for typographic choices, but it comes at the cost of a single serial request opposed to a number of individual file requests. That single request might be slow, blocking the rendering of the content on a page. So subsetting and splitting the font into character sets will still matter. On the good side though, with a variable font in place, we’ll get exactly one reflow by default, so no JavaScript will be required to group repaints.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Now, what would make a </span><span><b>bulletproof web font loading strategy</b></span><span> then? Subset fonts and prepare them for the 2-stage-render, declare them with a </span><span>font-display</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> descriptor, use Font Loading API to group repaints and store fonts in a persistent service worker’s cache. On the first visit, inject the preloading of scripts just before the blocking external scripts. You could fall back to Bram Stein’s </span><span><a data-target-href="https://github.com/bramstein/fontfaceobserver" href="https://github.com/bramstein/fontfaceobserver" rel="noreferrer nofollow noopener">Font Face Observer</a></span><span> if necessary. And if you’re interested in measuring the performance of font loading, Andreas Marschke explores </span><span><a data-target-href="https://www.andreas-marschke.name/posts/2017/12/29/Fonts-API-UserTiming-Boomerang.html" href="https://www.andreas-marschke.name/posts/2017/12/29/Fonts-API-UserTiming-Boomerang.html" rel="noreferrer nofollow noopener">performance tracking with Font API and UserTiming API</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Finally, don’t forget to include </span><span><a data-target-href="https://www.nccgroup.trust/uk/about-us/newsroom-and-events/blogs/2015/august/how-to-subset-fonts-with-unicode-range/" href="https://www.nccgroup.trust/uk/about-us/newsroom-and-events/blogs/2015/august/how-to-subset-fonts-with-unicode-range/" rel="noreferrer nofollow noopener">unicode-range</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> to break down a large font into smaller language-specific fonts, and use Monica Dinculescu’s </span><span><a data-target-href="https://meowni.ca/font-style-matcher/" href="https://meowni.ca/font-style-matcher/" rel="noreferrer nofollow noopener">font-style-matcher</a></span><span> to minimize a jarring shift in layout, due to sizing discrepancies between the fallback and the web fonts.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Does the future look bright? With </span><span><a data-target-href="https://rwt.io/typography-tips/progressive-font-enrichment-reinventing-web-font-performance" href="https://rwt.io/typography-tips/progressive-font-enrichment-reinventing-web-font-performance" rel="noreferrer nofollow noopener">progressive font enrichment</a></span><span>, eventually we might be able to</span><span> </span><span>"download</span><span> only the required part of the font on any given page, and for subsequent requests for that font to dynamically</span><span> </span><span>‘patch’</span><span> the original download with additional sets of glyphs as required on successive page views", as Jason Pamental explains it. </span><span><a data-target-href="https://fonts.gstatic.com/experimental/incxfer_demo" href="https://fonts.gstatic.com/experimental/incxfer_demo" rel="noreferrer nofollow noopener">Incremental Transfer Demo</a></span><span> is already available, and it’s </span><span><a data-target-href="https://www.w3.org/Fonts/WG/webfonts-2018.html#normative" href="https://www.w3.org/Fonts/WG/webfonts-2018.html#normative" rel="noreferrer nofollow noopener">work in progress</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-376"><h2 data-usually-unique-id="293353168925434015561346"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Build Optimizations</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Set your priorities straight.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It’s a good idea to know what you are dealing with first. Run an inventory of all of your assets</span><span> </span><span>(JavaScript,</span><span> images, fonts, third-party scripts and</span><span> </span><span>"expensive"</span><span> modules on the page, such as carousels, complex infographics and multimedia content), and break them down in groups.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Set up a spreadsheet. Define the basic </span><span><i>core</i></span><span> experience for legacy browsers</span><span> </span><span>(i.e.</span><span> fully accessible core content), the </span><span><i>enhanced</i></span><span> experience for capable browsers</span><span> </span><span>(i.e.</span><span> the enriched, full experience) and the </span><span><i>extras</i></span><span> </span><span>(assets</span><span> that aren’t absolutely required and can be lazy-loaded, such as web fonts, unnecessary styles, carousel scripts, video players, social media buttons, large images). A while back, we published an article on</span><span> </span><span>"</span><span><a data-target-href="https://www.smashingmagazine.com/2014/09/improving-smashing-magazine-performance-case-study/" href="https://www.smashingmagazine.com/2014/09/improving-smashing-magazine-performance-case-study/" rel="noreferrer nofollow noopener">Improving</a></span><span><a data-target-href="https://www.smashingmagazine.com/2014/09/improving-smashing-magazine-performance-case-study/" href="https://www.smashingmagazine.com/2014/09/improving-smashing-magazine-performance-case-study/" rel="noreferrer nofollow noopener"> Smashing Magazine’s Performance</a></span><span>," which describes this approach in detail.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>When optimizing for performance we need to reflect our priorities. Load the </span><span><i>core experience</i></span><span> immediately, then </span><span><i>enhancements</i></span><span>, and then the </span><span><i>extras</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Use native JavaScript modules in production.</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>As Philip Walton writes,</span></span><span><span> </span></span><span><span>"the</span></span><span><span> technique uses bundlers and transpilers to generate two versions of your codebase, one with modern syntax</span></span><span><span> </span></span><span><span>(loaded</span></span><span><span> via </span></span><span><span>&lt;script type="module"&gt;</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>) and one with ES5 syntax</span></span><span><span> </span></span><span><span>(loaded</span></span><span><span> via </span></span><span><span>&lt;script nomodule&gt;</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>)." Modern browsers would interpret the script as a JavaScript module and run it as expected, while legacy browsers wouldn’t recognize the attribute and ignore it because it’s unknown HTML syntax. We can ship significantly less code to module-supporting browsers, and it’s now supported by most frameworks and CLIs.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: It’s worth stating that feature detection alone isn’t enough to make an informed decision about the payload to ship to that browser. On its own, we can’t deduce device capability from browser version. For example, cheap Android phones in developing countries mostly run Chrome and will cut the mustard despite their limited memory and CPU capabilities.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Eventually, using the </span><span><a data-target-href="https://github.com/w3c/device-memory" href="https://github.com/w3c/device-memory" rel="noreferrer nofollow noopener">Device Memory Client Hints Header</a></span><span>, we’ll be able to target low-end devices more reliably. At the moment of writing, the header is supported only in Blink</span><span> </span><span>(it</span><span> goes for </span><span><a data-target-href="https://caniuse.com/#search=client%20hints" href="https://caniuse.com/#search=client%20hints" rel="noreferrer nofollow noopener">client hints</a></span><span> in general). Since Device Memory also has a JavaScript API which is </span><span><a data-target-href="https://developers.google.com/web/updates/2017/12/device-memory" href="https://developers.google.com/web/updates/2017/12/device-memory" rel="noreferrer nofollow noopener">available in Chrome</a></span><span>, one option could be to feature detect based on the API, and fall back to module/nomodule technique if it’s not supported</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Yoav!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are you using tree-shaking, scope hoisting and code-splitting?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/fundamentals/performance/optimizing-javascript/tree-shaking/" href="https://developers.google.com/web/fundamentals/performance/optimizing-javascript/tree-shaking/" rel="noreferrer nofollow noopener">Tree-shaking</a></span><span> is a way to clean up your build process by only including code that is actually used in production and eliminate unused imports </span><span><a data-target-href="http://www.2ality.com/2015/12/webpack-tree-shaking.html" href="http://www.2ality.com/2015/12/webpack-tree-shaking.html" rel="noreferrer nofollow noopener">in Webpack</a></span><span>. With Webpack and Rollup, we also have </span><span><a data-target-href="https://medium.com/webpack/brief-introduction-to-scope-hoisting-in-webpack-8435084c171f" href="https://medium.com/webpack/brief-introduction-to-scope-hoisting-in-webpack-8435084c171f" rel="noreferrer nofollow noopener">scope hoisting</a></span><span> that allows both tools to detect where </span><span>import</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> chaining can be flattened and converted into one inlined function without compromising the code. With Webpack, we can also use </span><span><a data-target-href="https://react-etc.net/entry/json-tree-shaking-lands-in-webpack-4-0" href="https://react-etc.net/entry/json-tree-shaking-lands-in-webpack-4-0" rel="noreferrer nofollow noopener">JSON Tree Shaking</a></span><span> as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://webpack.js.org/guides/code-splitting/" href="https://webpack.js.org/guides/code-splitting/" rel="noreferrer nofollow noopener">Code-splitting</a></span><span> is another Webpack feature that splits your code base into</span><span> </span><span>"chunks"</span><span> that are loaded on demand. Not all of the JavaScript has to be downloaded, parsed and compiled right away. Once you define split points in your code, Webpack can take care of the dependencies and outputted files. It enables you to keep the initial download small and to request code on demand when requested by the application. Alexander Kondrov has a </span><span><a data-target-href="https://hackernoon.com/lessons-learned-code-splitting-with-webpack-and-react-f012a989113" href="https://hackernoon.com/lessons-learned-code-splitting-with-webpack-and-react-f012a989113" rel="noreferrer nofollow noopener">fantastic introduction to code-splitting with Webpack and React</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>Consider using </span></span><span><span><a data-target-href="https://github.com/GoogleChromeLabs/preload-webpack-plugin" href="https://github.com/GoogleChromeLabs/preload-webpack-plugin" rel="noreferrer nofollow noopener">preload-webpack-plugin</a></span></span><span><span> that takes routes you code-split and then prompts browser to preload them using </span></span><span><span>&lt;link rel="preload"&gt;</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span> or </span></span><span><span>&lt;link rel="prefetch"&gt;</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>. </span></span><span><span><a data-target-href="https://webpack.js.org/guides/code-splitting/#prefetching-preloading-modules" href="https://webpack.js.org/guides/code-splitting/#prefetching-preloading-modules" rel="noreferrer nofollow noopener">Webpack inline directives</a></span></span><span><span> also give some control over </span></span><span><span>preload</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>/</span></span><span><span>prefetch</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Where to define split points? By tracking which chunks of CSS/JavaScript are used, and which aren’t used. Umar Hansa </span><span><a data-target-href="https://vimeo.com/235431630#t=11m37s" href="https://vimeo.com/235431630#t=11m37s" rel="noreferrer nofollow noopener">explains</a></span><span> how you can use Code Coverage from Devtools to achieve it.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you aren’t using Webpack, note that </span><span><a data-target-href="http://rollupjs.org/" href="http://rollupjs.org/" rel="noreferrer nofollow noopener">Rollup</a></span><span> shows significantly better results than good ol' Browserify exports. While we’re at it, you might want to check out </span><span><a data-target-href="https://github.com/ampproject/rollup-plugin-closure-compiler" href="https://github.com/ampproject/rollup-plugin-closure-compiler" rel="noreferrer nofollow noopener">rollup-plugin-closure-compiler</a></span><span> and </span><span><a data-target-href="https://github.com/nolanlawson/rollupify" href="https://github.com/nolanlawson/rollupify" rel="noreferrer nofollow noopener">Rollupify</a></span><span>, which converts ECMAScript 2015 modules into one big CommonJS module — because small modules can have a </span><span><a data-target-href="https://nolanlawson.com/2016/08/15/the-cost-of-small-modules/" href="https://nolanlawson.com/2016/08/15/the-cost-of-small-modules/" rel="noreferrer nofollow noopener">surprisingly high performance cost</a></span><span> depending on your choice of bundler and module system.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>So, what’s the best way to code-split aggressively, but not too aggressively? According to Phil Walton,</span><span> </span><span>"in</span><span> addition to code-splitting via dynamic imports,</span><span> </span><span>[we</span><span> could] also use </span><span><b>code-splitting at the package level</b></span><span>, where each imported node modules get put into a chunk based on its package’s name." Phil provides a </span><span><a data-target-href="https://philipwalton.com/articles/using-native-javascript-modules-in-production-today/" href="https://philipwalton.com/articles/using-native-javascript-modules-in-production-today/" rel="noreferrer nofollow noopener">tutorial on how to build it</a></span><span> as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Can you offload JavaScript into a Web Worker?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To reduce the negative impact to Time-to-Interactive, it might be a good idea to look into offloading heavy JavaScript into a </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" rel="noreferrer nofollow noopener">Web Worker</a></span><span> or caching via a Service Worker.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As the code base keeps growing, the UI performance bottlenecks will show up, slowing down the user’s experience. That’s </span><span><a data-target-href="https://medium.com/google-developer-experts/running-fetch-in-a-web-worker-700dc33ac854" href="https://medium.com/google-developer-experts/running-fetch-in-a-web-worker-700dc33ac854" rel="noreferrer nofollow noopener">because DOM operations are running alongside your JavaScript</a></span><span> on the main thread. With </span><span><a data-target-href="https://flaviocopes.com/web-workers/" href="https://flaviocopes.com/web-workers/" rel="noreferrer nofollow noopener">web workers</a></span><span>, we can move these expensive operations to a background process that’s running on a different thread. Typical use cases for web workers are </span><span><a data-target-href="https://blog.sessionstack.com/how-javascript-works-the-building-blocks-of-web-workers-5-cases-when-you-should-use-them-a547c0757f6a" href="https://blog.sessionstack.com/how-javascript-works-the-building-blocks-of-web-workers-5-cases-when-you-should-use-them-a547c0757f6a" rel="noreferrer nofollow noopener">prefetching data and Progressive Web Apps</a></span><span> to load and store some data in advance so that you can use it later when needed. And you could use </span><span><a data-target-href="https://github.com/GoogleChromeLabs/comlink" href="https://github.com/GoogleChromeLabs/comlink" rel="noreferrer nofollow noopener">Comlink</a></span><span> to streamline the communication between the main page and the worker. Still some work to do, but we are getting there.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>How to get started? Here are a few resources that are worth looking into:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-420"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://github.com/developit/workerize" href="https://github.com/developit/workerize" rel="noreferrer nofollow noopener">Workerize</a></span><span> allows you to move a module into a Web Worker, automatically reflecting exported functions as asynchronous proxies.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Note that Web Workers don’t have access to the DOM because the DOM is not</span><span> </span><span>"thread-safe",</span><span> and the code that they execute needs to be contained in a separate file.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Can you offload</b></span><span><b> </b></span><span><b>"hot</b></span><span><b> paths" to WebAssembly?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Of course WebAssembly isn’t supposed to replace JavaScript, but it can complement it in cases when you notice CPU hogs. For most web apps, JavaScript is a better fit, and WebAssembly is best used for computationally intensive web apps, such as web games.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you’d like to learn more about WebAssembly:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-432"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Lin Clark has written a </span><span><a data-target-href="https://hacks.mozilla.org/2017/02/a-cartoon-intro-to-webassembly/" href="https://hacks.mozilla.org/2017/02/a-cartoon-intro-to-webassembly/" rel="noreferrer nofollow noopener">thorough series to WebAssembly</a></span><span> and Milica Mihajlija provides a </span><span><a data-target-href="https://blog.logrocket.com/webassembly-how-and-why-559b7f96cd71" href="https://blog.logrocket.com/webassembly-how-and-why-559b7f96cd71" rel="noreferrer nofollow noopener">general overview</a></span><span> of how to run native code in the browser, why you might want to do that, and what it all means for JavaScript and the future of web development.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-433"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Patrick Hamann has been speaking about </span><span><a data-target-href="https://www.youtube.com/watch?v=Z6ZhIA8i_8g" href="https://www.youtube.com/watch?v=Z6ZhIA8i_8g" rel="noreferrer nofollow noopener">the growing role of WebAssembly</a></span><span>, and he’s debunking some myths about WebAssembly, explores its challenges and we can use it practically in applications today.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-434"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Google Codelabs provides an </span><span><a data-target-href="https://codelabs.developers.google.com/codelabs/web-assembly-intro/index.html" href="https://codelabs.developers.google.com/codelabs/web-assembly-intro/index.html" rel="noreferrer nofollow noopener">Introduction to WebAssembly</a></span><span>, a 60 min course in which you’ll learn how to take native code—in C and compile it to WebAssembly, and then call it directly from JavaScript.</span></li></ul></div><div dir="auto" data-line-manager="gallery" contenteditable="false" id="editor-1-ace-line-436"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-17"><span><span data-reactroot=""><div><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bbb2ea83-7674-47d8-9cad-89a2de009915/how-webassembly-works.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bbb2ea83-7674-47d8-9cad-89a2de009915/how-webassembly-works.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption583622088141163887182396&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:198}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: how-webassembly-works.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fbbb2ea83-7674-47d8-9cad-89a2de009915%2Fhow-webassembly-works.png&amp;hmac=ClnDoQpioXDfVQ5Q3Dc%2FVnvAjeQYz%2FgbfJudDZO%2BBQ4%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/bbb2ea83-7674-47d8-9cad-89a2de009915/how-webassembly-works.png" contenteditable="false"></span></span></span></span></span></span></span></p></div></span></span></span></span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are you using an ahead-of-time compiler?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Serve legacy code only to legacy browsers.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Note that these days we can write module-based JavaScript that runs natively in the browser, without transpilers or bundlers. </span><span><a data-target-href="https://developers.google.com/web/updates/2017/12/modulepreload" href="https://developers.google.com/web/updates/2017/12/modulepreload" rel="noreferrer nofollow noopener">&lt;link rel="modulepreload"&gt;</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/updates/2017/12/modulepreload" href="https://developers.google.com/web/updates/2017/12/modulepreload" rel="noreferrer nofollow noopener"> header</a></span><span> provides a way to initiate early</span><span> </span><span>(and</span><span> high-priority) loading of module scripts. Basically, it’s a nifty way to help in maximizing bandwidth usage, by telling the browser about what it needs to fetch so that it’s not stuck with anything to do during those long roundtrips. Also, Jake Archibald has published a detailed article with </span><span><span><a data-target-href="https://jakearchibald.com/2017/es-modules-in-browsers/" href="https://jakearchibald.com/2017/es-modules-in-browsers/" rel="noreferrer nofollow noopener">gotchas and things t keep in mind with ES Modules</a></span></span><span> that’s worth reading.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For lodash, </span><span><a data-target-href="https://github.com/lodash/babel-plugin-lodash" href="https://github.com/lodash/babel-plugin-lodash" rel="noreferrer nofollow noopener">use </a></span><span><a data-target-href="https://github.com/lodash/babel-plugin-lodash" href="https://github.com/lodash/babel-plugin-lodash" rel="noreferrer nofollow noopener">babel-plugin-lodash</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> that will load only modules that you are using in your source. Your dependencies might also depend on other versions of Lodash, so </span><span><a data-target-href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" rel="noreferrer nofollow noopener">transform generic lodash </a></span><span><a data-target-href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" rel="noreferrer nofollow noopener">requires</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" rel="noreferrer nofollow noopener"> to cherry-picked ones</a></span><span> to avoid code duplication. This might save you quite a bit of JavaScript payload.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" data-line-manager="gallery" contenteditable="false" id="editor-1-ace-line-449"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-18"><span><span data-reactroot=""><div><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d46ddc8b-4bd7-4627-b738-baf62807b26f/inline-scripts-deferred.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d46ddc8b-4bd7-4627-b738-baf62807b26f/inline-scripts-deferred.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption032762317966030528065040&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:244}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: inline-scripts-deferred.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fd46ddc8b-4bd7-4627-b738-baf62807b26f%2Finline-scripts-deferred.png&amp;hmac=ZzKPryN%2F8NLhMGCygP4Su1P%2B6%2FhrONIuVuRiMVG9Ej4%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d46ddc8b-4bd7-4627-b738-baf62807b26f/inline-scripts-deferred.png" contenteditable="false"></span></span></span></span></span></span></span></p></div></span></span></span></span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are you using differential serving for JavaScript?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We want to send just the necessary JavaScript through the network, yet it means being slightly more focused and granular about the delivery of those assets. </span><span><span>A while back Philip Walton introduced the idea of </span></span><span><span><a data-target-href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/" href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/" rel="noreferrer nofollow noopener">module/nomodule pattern</a></span></span><span>. The idea is to compile and serve two separate JavaScript bundles: the</span><span> </span><span>“regular”</span><span> build, the one with Babel-transforms and polyfills and serve them only to legacy browsers that actually need them, and another bundle</span><span> </span><span>(same</span><span> functionality) that has no transforms or polyfills.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As a result, we help reduce blocking of the main thread by reducing the amount of scripts the browser needs to process. Jeremy Wagner has published a </span><span><a data-target-href="https://calendar.perfplanet.com/2018/doing-differential-serving-in-2019/" href="https://calendar.perfplanet.com/2018/doing-differential-serving-in-2019/" rel="noreferrer nofollow noopener">comprehensive article on differential serving</a></span><span> and how to set it up in your build pipeline, from setting up Babel, to what tweaks you’ll need to make in Webpack, as well as the benefits of doing all this work.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Identify and rewrite legacy code with incremental decoupling</b></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Long-living projects have a tendency to gather dust and dated code. Revisit your dependencies and assess how much time would be required to refactor or rewrite legacy code that has been causing trouble lately. Of course, it’s always a big undertaking, but once you know the impact of the legacy code, you could start with </span><span><a data-target-href="https://githubengineering.com/removing-jquery-from-github-frontend/" href="https://githubengineering.com/removing-jquery-from-github-frontend/" rel="noreferrer nofollow noopener">incremental decoupling</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>First, set up metrics that tracks if the ratio of legacy code calls is staying constant or going down, not up. Publicly discourage the team from using the library and make sure that your CI </span><span><a data-target-href="https://github.com/dgraham/eslint-plugin-jquery" href="https://github.com/dgraham/eslint-plugin-jquery" rel="noreferrer nofollow noopener">alerts</a></span><span> developers if it’s used in pull requests. </span><span><a data-target-href="https://githubengineering.com/removing-jquery-from-github-frontend/#polyfills" href="https://githubengineering.com/removing-jquery-from-github-frontend/#polyfills" rel="noreferrer nofollow noopener">polyfills</a></span><span> could help transition from legacy code to rewritten codebase that uses standard browser features.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Identify and remove unused CSS/JS</b></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/updates/2017/04/devtools-release-notes#coverage" href="https://developers.google.com/web/updates/2017/04/devtools-release-notes#coverage" rel="noreferrer nofollow noopener">CSS and JavaScript code coverage</a></span><span> in Chrome allows you to learn which code has been executed/applied and which hasn't. You can start recording the coverage, perform actions on a page, and then explore the code coverage results. Once you’ve detected unused code, </span><span><a data-target-href="https://twitter.com/TheLarkInn/status/1012429019063578624" href="https://twitter.com/TheLarkInn/status/1012429019063578624" rel="noreferrer nofollow noopener">find those modules and lazy load with </a></span><span><a data-target-href="https://twitter.com/TheLarkInn/status/1012429019063578624" href="https://twitter.com/TheLarkInn/status/1012429019063578624" rel="noreferrer nofollow noopener">import()</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(see</span><span> the entire thread). Then repeat the coverage profile and validate that it’s now shipping less code on initial load.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Furthermore, </span><span><a data-target-href="https://github.com/FullHuman/purgecss" href="https://github.com/FullHuman/purgecss" rel="noreferrer nofollow noopener">purgecss</a></span><span>, </span><span><a data-target-href="https://github.com/giakki/uncss" href="https://github.com/giakki/uncss" rel="noreferrer nofollow noopener">UnCSS</a></span><span> and </span><span><a data-target-href="https://github.com/geuis/helium-css" href="https://github.com/geuis/helium-css" rel="noreferrer nofollow noopener">Helium</a></span><span> can help you remove unused styles from CSS. And if you aren’t certain if a suspicious piece of code is used somewhere, you can follow </span><span><a data-target-href="https://csswizardry.com/2018/01/finding-dead-css/" href="https://csswizardry.com/2018/01/finding-dead-css/" rel="noreferrer nofollow noopener">Harry Roberts' advice</a></span><span>: create a 1×1px transparent GIF for a particular class and drop it into a </span><span>dead/</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> directory, e.g. </span><span>/assets/img/dead/comments.gif</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. After that, you set that specific image as a background on the corresponding selector in your CSS, sit back and wait for a few months if the file is going to appear in your logs. If there are no entries, nobody had that legacy component rendered on their screen: you can probably go ahead and delete it all.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For the </span><span><i>I-feel-adventurous</i></span><span>-department, you could even automate gathering on unused CSS through a set of pages by </span><span><a data-target-href="http://blog.cowchimp.com/monitoring-unused-css-by-unleashing-the-devtools-protocol/" href="http://blog.cowchimp.com/monitoring-unused-css-by-unleashing-the-devtools-protocol/" rel="noreferrer nofollow noopener">monitoring DevTools using DevTools</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Trim the size of your JavaScript bundles.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As Addy Osmani </span><span><a data-target-href="https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4" href="https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4" rel="noreferrer nofollow noopener">noted</a></span><span>, there’s a high chance you’re shipping full JavaScript libraries when you only need a fraction, along with dated polyfills for browsers that don’t need them, or just duplicate code. To avoid the overhead, consider using </span><span><a data-target-href="https://github.com/GoogleChromeLabs/webpack-libs-optimizations" href="https://github.com/GoogleChromeLabs/webpack-libs-optimizations" rel="noreferrer nofollow noopener">webpack-libs-optimizations</a></span><span> that removes unused methods and polyfills during the build process.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Add bundle auditing into your regular workflow as well. There might be some lightweight alternatives to heavy libraries you’ve added years ago, e.g. Moment.js could be replaced with </span><span><a data-target-href="https://blog.logrocket.com/4-alternatives-to-moment-js-for-internationalizing-dates/" href="https://blog.logrocket.com/4-alternatives-to-moment-js-for-internationalizing-dates/" rel="noreferrer nofollow noopener">native Internationalization API</a></span><span>, </span><span><a data-target-href="https://github.com/date-fns/date-fns" href="https://github.com/date-fns/date-fns" rel="noreferrer nofollow noopener">date-fns</a></span><span> or </span><span><a data-target-href="https://moment.github.io/luxon/" href="https://moment.github.io/luxon/" rel="noreferrer nofollow noopener">Luxon</a></span><span>. Benedikt Rötsch’s research </span><span><a data-target-href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" rel="noreferrer nofollow noopener">showed</a></span><span> that a switch from Moment.js to date-fns could shave around 300ms for First paint on 3G and a low-end mobile phone.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Feeling adventurous? You could look into </span><span><a data-target-href="https://gist.github.com/gaearon/d85dccba72b809f56a9553972e5c33c4" href="https://gist.github.com/gaearon/d85dccba72b809f56a9553972e5c33c4" rel="noreferrer nofollow noopener">Prepack</a></span><span>. It compiles JavaScript to equivalent JavaScript code, but unlike Babel or Uglify, it lets you write normal JavaScript code, and outputs equivalent JavaScript code that runs faster.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>“lternatively to shipping the entire framework, you could even trim your framework and compile it into a raw JavaScript bundle that does not require additional code. </span><span><a data-target-href="https://svelte.technology/" href="https://svelte.technology/" rel="noreferrer nofollow noopener">Svelte does it</a></span><span>, and so does </span><span><a data-target-href="https://github.com/sokra/rawact" href="https://github.com/sokra/rawact" rel="noreferrer nofollow noopener">Rawact Babel plugin</a></span><span> which transpiles React.js components to native DOM operations at build-time. Why? Well, as maintainers explain,</span><span> </span><span>"react-dom</span><span> includes code for every possible component/HTMLElement that can be rendered, including code for incremental rendering, scheduling, event handling, etc. But there are applications which do not need all these features</span><span> </span><span>(at</span><span> initial page load). For such applications, it might make sense to use native DOM operations to build the interactive user interface."</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-19"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption499976894936224880432994&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:151}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: webpack-comparison.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fe30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff%2Fwebpack-comparison.png&amp;hmac=2w6dan5qa7a0VUVNTJrIKf6c%2FxY4xwIR%2BJfZ7CR33ok%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption499976894936224880432994"><div data-zone-id="caption499976894936224880432994" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>In </i></span><span><a data-target-href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" href="https://www.contentful.com/blog/2017/10/27/put-your-webpack-bundle-on-a-diet-part-3/" rel="noreferrer nofollow noopener"><i>his article</i></a></span><span><i>, Benedikt Rötsch’s showed that a switch from Moment.js to date-fns could shave around 300ms for First paint on 3G and a low-end mobile phone.</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e30c7d5b-ef8b-46ba-b0fc-b1d5a31cefff/webpack-comparison.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are you using predictive prefetching for JavaScript chunks?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We could use heuristics to decide when to preload JavaScript chunks. </span><span><a data-target-href="https://github.com/guess-js/guess" href="https://github.com/guess-js/guess" rel="noreferrer nofollow noopener">Guess.js</a></span><span> is a set of tools and libraries that use Google Analytics data to determine which page a user is mostly likely to visit next from a given page. Based on user navigation patterns collected from Google Analytics or other sources, Guess.js builds a machine-learning model to predict and prefetch JavaScript that will be required in each subsequent page.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Hence, every interactive element is receiving a probability score for engagement, and based on that score, a client-side script decides to prefetch a resource ahead of time. You can integrate the technique to your </span><span><a data-target-href="https://github.com/mgechev/guess-next" href="https://github.com/mgechev/guess-next" rel="noreferrer nofollow noopener">Next.js application</a></span><span>, </span><span><a data-target-href="https://blog.mgechev.com/2018/03/18/machine-learning-data-driven-bundling-webpack-javascript-markov-chain-angular-react/" href="https://blog.mgechev.com/2018/03/18/machine-learning-data-driven-bundling-webpack-javascript-markov-chain-angular-react/" rel="noreferrer nofollow noopener">Angular and React</a></span><span>, and there is a </span><span><a data-target-href="https://github.com/guess-js/guess/tree/master/packages/guess-webpack" href="https://github.com/guess-js/guess/tree/master/packages/guess-webpack" rel="noreferrer nofollow noopener">Webpack plugin</a></span><span> which automates the setup process as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Obviously, you might be prompting the browser to consume unneeded data and prefetch undesirable pages, so it’s a good idea to be quite conservative in the number of prefetched requests. A good use case would be prefetching validation scripts required in the checkout, or speculative prefetch when a critical call-to-action comes into the viewport.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Need something less sophisticated?</span><span><span> </span></span><span><span><a data-target-href="https://github.com/GoogleChromeLabs/quicklink" href="https://github.com/GoogleChromeLabs/quicklink" rel="noreferrer nofollow noopener">Quicklink</a></span></span><span><span> and </span></span><span><span><a data-target-href="https://instant.page/" href="https://instant.page/" rel="noreferrer nofollow noopener">Instant.page</a></span></span><span><span> are small libraries that automatically prefetch links in the viewport during idle time in attempt to make next-page navigations load faster.</span></span><span> Quicklink is data-considerate, so it doesn’t prefetch on 2G or if </span><span>Data-Saver</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> is on, and so is Instant.page if set to use </span><span><i>viewport prefetching</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Take advantage of optimizations for your target JavaScript engine.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Study what JavaScript engines dominate in your user base, then explore ways of optimizing for them. For example, when optimizing for V8 which is used in Blink-browsers, Node.js runtime and Electron, make use of </span><span><a data-target-href="https://blog.chromium.org/2015/03/new-javascript-techniques-for-rapid.html" href="https://blog.chromium.org/2015/03/new-javascript-techniques-for-rapid.html" rel="noreferrer nofollow noopener">script streaming</a></span><span> for monolithic scripts.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Script streaming allows </span><span>async</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> or </span><span>defer scripts</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> to be parsed on a separate background thread once downloading begins, hence in some cases improving page loading times by up to 10%. Practically, </span><span><a data-target-href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" rel="noreferrer nofollow noopener">use </a></span><span><a data-target-href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" rel="noreferrer nofollow noopener">&lt;script defer&gt;</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> in the </span><span>&lt;head&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, so that the </span><span><a data-target-href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201#3498" rel="noreferrer nofollow noopener">browsers can discover the resource</a></span><span> early and then parse it on the background thread.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Caveat</b></span><span>: </span><span><i>Opera Mini </i></span><span><a data-target-href="https://caniuse.com/#search=defer" href="https://caniuse.com/#search=defer" rel="noreferrer nofollow noopener"><i>doesn’t support script deferment</i></a></span><span><i>, so if you are developing for India or Africa,</i></span><span> </span><span>defer</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span><i>will be ignored, resulting in blocking rendering until the script has been evaluated</i></span><span><i> </i></span><span><i>(thanks</i></span><span><i> Jeremy!)</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>You could also hook into </span><span><a data-target-href="https://v8.dev/blog/code-caching-for-devs" href="https://v8.dev/blog/code-caching-for-devs" rel="noreferrer nofollow noopener">V8’s code caching</a></span><span> as well, by splitting out libraries from code using them, or the other way around, merge libraries and their uses into a single script, group small files together and avoid inline scripts. Or perhaps even use </span><span><a data-target-href="https://www.npmjs.com/package/v8-compile-cache" href="https://www.npmjs.com/package/v8-compile-cache" rel="noreferrer nofollow noopener">v8-compile-cache</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-20"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ab06acd3-833a-4634-abf9-fc8d91939250/fmp-and-tti-opt.jpeg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ab06acd3-833a-4634-abf9-fc8d91939250/fmp-and-tti-opt.jpeg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption112938689944635929813318&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:191}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: fmp-and-tti-opt.jpeg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fab06acd3-833a-4634-abf9-fc8d91939250%2Ffmp-and-tti-opt.jpeg&amp;hmac=E21u1tZy1qZl%2FZhPwz2Ae41KkDTlDOtnvKike2LRa58%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ab06acd3-833a-4634-abf9-fc8d91939250/fmp-and-tti-opt.jpeg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption112938689944635929813318"><div data-zone-id="caption112938689944635929813318" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/" href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/" rel="noreferrer nofollow noopener"><i>Progressive booting</i></a></span><span><i> means using server-side rendering to get a quick first meaningful paint, but also include some minimal JavaScript to keep the time-to-interactive close to the first meaningful paint.</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Client-side rendering or server-side rendering? Both!</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>That's a quite heated conversation to have. Ultimately, the decision has to be driven by performance of the application. The ultimate approach would be to set up some sort of </span><span><a data-target-href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/" href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/" rel="noreferrer nofollow noopener">progressive booting</a></span><span>: Use server-side rendering to get a quick first meaningful paint, but also include some minimal necessary JavaScript to keep the time-to-interactive close to the first meaningful paint. If JavaScript is coming too late after the First Meaningful Paint, the browser will </span><span><a data-target-href="https://davidea.st/articles/measuring-server-side-rendering-performance-is-tricky" href="https://davidea.st/articles/measuring-server-side-rendering-performance-is-tricky" rel="noreferrer nofollow noopener">lock up the main thread</a></span><span> while parsing, compiling and executing late-discovered JavaScript, hence handcuffing the </span><span><a data-target-href="https://philipwalton.com/articles/why-web-developers-need-to-care-about-interactivity/" href="https://philipwalton.com/articles/why-web-developers-need-to-care-about-interactivity/" rel="noreferrer nofollow noopener">interactivity of site or application</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To avoid it, always break up the execution of functions into separate, asynchronous tasks, and where possible use </span><span>requestIdleCallback</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. Consider lazy loading parts of the UI using WebPack’s </span><span><a data-target-href="https://developers.google.com/web/updates/2017/11/dynamic-import" href="https://developers.google.com/web/updates/2017/11/dynamic-import" rel="noreferrer nofollow noopener">dynamic </a></span><span><a data-target-href="https://developers.google.com/web/updates/2017/11/dynamic-import" href="https://developers.google.com/web/updates/2017/11/dynamic-import" rel="noreferrer nofollow noopener">import()</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/updates/2017/11/dynamic-import" href="https://developers.google.com/web/updates/2017/11/dynamic-import" rel="noreferrer nofollow noopener"> support</a></span><span>, avoiding the load, parse, and compile cost until users really need them</span><span> </span><span>(</span><span><i>thanks</i></span><span><i> Addy!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In its essence, Time to Interactive</span><span> </span><span>(TTI)</span><span> tells us the time between navigation and interactivity. The metric is defined by looking at the first five-second window after the initial content is rendered, in which no JavaScript tasks take longer than 50ms. If a task over 50ms occurs, the search for a five-second window starts over. As a result, the browser will first assume that it reached </span><span><i>Interactive</i></span><span>, just to switch to </span><span><i>Frozen</i></span><span>, just to eventually switch back to </span><span><i>Interactive</i></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Once we reached </span><span><i>Interactive</i></span><span>, we can then — either on demand or as time allows — boot non-essential parts of the app. Unfortunately, as </span><span><a data-target-href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/#which-to-use-progressive-booting" href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/#which-to-use-progressive-booting" rel="noreferrer nofollow noopener">Paul Lewis noticed</a></span><span>, frameworks typically have no simple concept of priority that can be surfaced to developers, and hence progressive booting isn't easy to implement with most libraries and frameworks.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Still, we are getting there. These days there are a couple of choices we can explore, and Houssein Djirdeh and Jason Miller provide an excellent overview of these options in their talk on </span><span><a data-target-href="https://www.youtube.com/watch?v=k-A2VfuUROg" href="https://www.youtube.com/watch?v=k-A2VfuUROg" rel="noreferrer nofollow noopener">Rendering on the Web</a></span><span>. The overview below is based on their talk.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-516"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Full Server-Side Rendering</b></span><span> </span><span>(SSR)</span></li></ul></div><div dir="auto" id="editor-1-ace-line-517"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In classic SSR, such as WordPress, all requests are handled entirely on the server. The requested content is returned as a finished HTML page and browsers can render it right away. Hence, SSR-apps can't really make use of the DOM APIs, for example. The gap between First Contentful Paint and Time to Interactive is usually small, and the page can be rendered right away as HTML is being streamed to the browser. However, we end up with longer server think time and consequently Time To First Byte and we don't make use of responsive and rich features of modern applications.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-520"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We build out the product as a single page application, but all pages are prerendered to static HTML with minimal JavaScript as a build step. Thus, we can display a landing page quickly and then prefetch a SPA-framework for subsequent pages. </span><span><a data-target-href="https://medium.com/dev-channel/a-netflix-web-performance-case-study-c0bcde26a9d9" href="https://medium.com/dev-channel/a-netflix-web-performance-case-study-c0bcde26a9d9" rel="noreferrer nofollow noopener">Netflix has adopted this approach</a></span><span> decreasing loading and Time-to-Interactive by 50%.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-522"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Server-Side Rendering With</b></span><span><b> </b></span><span><b>(Re)Hydration</b></span><span> </span><span>(SSR</span><span> + CSR)</span></li></ul></div><div dir="auto" id="editor-1-ace-line-523"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With hydration in the mix, the HTML page returned from the server also contains a script that loads a fully-fledged client-side application. With React, we can </span><span><a data-target-href="https://alligator.io/react/server-side-rendering/" href="https://alligator.io/react/server-side-rendering/" rel="noreferrer nofollow noopener">use </a></span><span><a data-target-href="https://alligator.io/react/server-side-rendering/" href="https://alligator.io/react/server-side-rendering/" rel="noreferrer nofollow noopener">ReactDOMServer</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://alligator.io/react/server-side-rendering/" href="https://alligator.io/react/server-side-rendering/" rel="noreferrer nofollow noopener"> module on a Node server like Express</a></span><span>, and then call the </span><span>renderToString</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> method to render the top level components as a static HTML string. With Vue, we can </span><span><a data-target-href="https://ssr.vuejs.org/" href="https://ssr.vuejs.org/" rel="noreferrer nofollow noopener">use the vue-server-renderer</a></span><span> to render a Vue instance into HTML using </span><span>renderToString</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. In Angular, we can </span><span><a data-target-href="https://angular.io/guide/universal" href="https://angular.io/guide/universal" rel="noreferrer nofollow noopener">use </a></span><span><a data-target-href="https://angular.io/guide/universal" href="https://angular.io/guide/universal" rel="noreferrer nofollow noopener">@nguniversal</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> to turn client requests into fully server-rendered HTML pages.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-525"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A fully server-rendered experience can also be achieved out of the box with </span><span><a data-target-href="https://nextjs.org/" href="https://nextjs.org/" rel="noreferrer nofollow noopener">Next.js</a></span><span> </span><span>(React)</span><span> or </span><span><a data-target-href="https://nuxtjs.org/" href="https://nuxtjs.org/" rel="noreferrer nofollow noopener">Nuxt.js</a></span><span> </span><span>(Vue).</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-527"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The approach has its downsides. As a result, we do gain full flexibility of client-side apps while providing faster server-side rendering, but we also end up with a longer gap between First Meaningful Paint and Time To Interactive and increased First Input Delay. </span><span><a data-target-href="https://addyosmani.com/blog/rehydration/" href="https://addyosmani.com/blog/rehydration/" rel="noreferrer nofollow noopener">Rehydration is very expensive</a></span><span>, and usually this strategy alone will not be good enough as it heavily delays Time To Interactive.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-529"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Streaming Server-Side Rendering With Progressive Hydration</b></span><span> </span><span>(SSR</span><span> + CSR)</span></li></ul></div><div dir="auto" id="editor-1-ace-line-530"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To minimize the gap between Time To Interactive and First Contentful Paint, we render multiple requests at once and send down content in chunks as they get generated. So we don't have to wait for the full string of HTML before sending content to the browser, and hence improve Time To First Byte.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-531"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In React, instead of </span><span>renderToString</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, we can use </span><span><a data-target-href="https://reactjs.org/docs/react-dom-server.html#rendertonodestream" href="https://reactjs.org/docs/react-dom-server.html#rendertonodestream" rel="noreferrer nofollow noopener">renderToNodeStream</a></span><span> to pipe the response and send the HTML down in chunks. In Vue, we can use </span><span><a data-target-href="https://ssr.vuejs.org/guide/streaming.html" href="https://ssr.vuejs.org/guide/streaming.html" rel="noreferrer nofollow noopener">renderToStream</a></span><span> that can be piped and streamed. With React Suspense on the horizon, we might use </span><span><a data-target-href="https://medium.com/maxime-heckel/asynchronous-rendering-with-react-c323cda68f41" href="https://medium.com/maxime-heckel/asynchronous-rendering-with-react-c323cda68f41" rel="noreferrer nofollow noopener">asynchronous rendering</a></span><span> for that purpose, too.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-532"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>On the client-side, rather than booting the entire application at once, we </span><span><b>boot up components progressively</b></span><span>. Sections of the applications are first broken down into standalone scripts with code splitting, and then hydrated gradually, in order of our priorities. In fact, we can hydrate critical components first, while the rest could be hydrated later. The role of client-side and server-side rendering can then be defined differently per component. We can then also </span><span><b>defer hydration</b></span><span> of some components until they come into view, or are needed for user interaction, or when the browser is idle.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-536"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With service workers in place, we can use streaming server rendering for initial/non-JS navigations, and then have the service worker taking on rendering of HTML for navigations after it has been installed. In that case, service worker prerenders content and enables SPA-style navigations for rendering new views in the same session. Works well when you can share the same templating and routing code between the server, client page, and service worker.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-21"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption873329514478820137104948&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:252}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 08-trisomorphic-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fd1c78c47-f803-4923-96ff-99c6a4a14cbb%2F08-trisomorphic-front-end-performance-checklist-2020.png&amp;hmac=O0j9exvh9eInvKuy2C3h8akTAG9l9%2FC6Tvpgo0svvnk%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption873329514478820137104948"><div data-zone-id="caption873329514478820137104948" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Trisomorphic rendering, with the same code rendering in any 3 places: on the server, in the DOM or in a service worker.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> source: </i></span><span><a data-target-href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web#trisomorphic" href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web#trisomorphic" rel="noreferrer nofollow noopener"><i>Google Developers</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d1c78c47-f803-4923-96ff-99c6a4a14cbb/08-trisomorphic-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><div dir="auto" id="editor-1-ace-line-539"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Prerendering is similar to server-side rendering but rather than rendering pages on the server dynamically, we render the application to static HTML at build time.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-540"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://www.gatsbyjs.org/" href="https://www.gatsbyjs.org/" rel="noreferrer nofollow noopener">Gatsby</a></span><span>, an open source static site generator that uses React, uses </span><span>renderToStaticMarkup</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> method instead of </span><span>renderToString</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> method during builds, with main JS chunk being preloaded and future routes are prefetched, without DOM attributes that aren't needed for simple static pages. For Vue, we can use </span><span><a data-target-href="https://vuepress.vuejs.org/" href="https://vuepress.vuejs.org/" rel="noreferrer nofollow noopener">Vuepress</a></span><span> to achieve the same goal. You can also use </span><span><a data-target-href="https://github.com/GoogleChromeLabs/prerender-loader" href="https://github.com/GoogleChromeLabs/prerender-loader" rel="noreferrer nofollow noopener">prerender-loader with Webpack</a></span><span>.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-541"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The result is a better Time To First Byte and First Contentful Paint, and we reduce the gap between Time To Interactive and First Contentful Paint. We can't use the approach if content is expected to change much. Plus, all URLs have to be known ahead of time to generate all the pages. So some components might be rendered using prerendering, but if we need something dynamic, we have to rely on the app to fetch the content.</span></li></ul></div><div dir="auto" id="editor-1-ace-line-542"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Full Client-Side Rendering</b></span><span> </span><span>(CSR)</span></li></ul></div><div dir="auto" id="editor-1-ace-line-543"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>All logic, rendering and booting are done on the client. The result is usually a huge gap between Time-To-Interactive and First Contentful Paint. As a result, applications feel sluggish as the entire app has to be booted on the client to render anything. In general, </span><span><a data-target-href="https://itnext.io/server-side-rendering-with-react-redux-and-react-router-fa5b67d4965e" href="https://itnext.io/server-side-rendering-with-react-redux-and-react-router-fa5b67d4965e" rel="noreferrer nofollow noopener">SSR is faster than CSR</a></span><span>. Yet still, It's a most frequent implementation for many apps out there.</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>So, client-side or server-side? In general, it's a good idea to </span><span><b>limit the use of fully client-side frameworks</b></span><span> to pages that absolutely require them. For advanced applications, it's not a good idea to rely on server-side rendering alone either. Both server-rendering and client-rendering are a disaster if done poorly.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Whether you are leaning towards CSR or SSR, make sure that you are rendering important pixels as soon as possible and minimize the gap between that rendering and Time To Interactive. Consider prerendering if your pages don't change much, and defer the booting of frameworks if you can. </span><span><b>Stream HTML in chunks</b></span><span> with server-side rendering, and implement </span><span><b>progressive hydration</b></span><span> for client-side rendering — and hydrate on visibility, interaction or during idle time to get the best of both worlds.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-22"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e8d2728f-ab3c-4b56-a265-e6c6d456e600/03-jason-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e8d2728f-ab3c-4b56-a265-e6c6d456e600/03-jason-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption219741401396704874299370&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:265}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 03-jason-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fe8d2728f-ab3c-4b56-a265-e6c6d456e600%2F03-jason-front-end-performance-checklist-2020.png&amp;hmac=VHaZCz%2FQwTiWKu177HUbhypsLZyugG3nPNstnfM0Z4k%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e8d2728f-ab3c-4b56-a265-e6c6d456e600/03-jason-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-23"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7b675e3-6338-40ea-b7a1-5a07ee6e52cc/08-progressive-hydration-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7b675e3-6338-40ea-b7a1-5a07ee6e52cc/08-progressive-hydration-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption207667021308785094327876&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:224}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 08-progressive-hydration-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Ff7b675e3-6338-40ea-b7a1-5a07ee6e52cc%2F08-progressive-hydration-front-end-performance-checklist-2020.png&amp;hmac=CirQaJBzLegYlmk5lXrab60YjiFJpcPVXkUQ8mBMZ20%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7b675e3-6338-40ea-b7a1-5a07ee6e52cc/08-progressive-hydration-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Constrain the impact of third-party scripts.</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With all performance optimizations in place, often we can’t control third-party scripts coming from business requirements. Third-party-scripts metrics aren’t influenced by end-user experience, so too often one single script ends up calling a long tail of obnoxious third-party scripts, hence ruining a dedicated performance effort. To contain and mitigate performance penalties that these scripts bring along, it’s not enough to just load them asynchronously</span><span> </span><span>(</span><span><a data-target-href="https://www.twnsnd.com/posts/performant_third_party_scripts.html" href="https://www.twnsnd.com/posts/performant_third_party_scripts.html" rel="noreferrer nofollow noopener">probably</a></span><span><a data-target-href="https://www.twnsnd.com/posts/performant_third_party_scripts.html" href="https://www.twnsnd.com/posts/performant_third_party_scripts.html" rel="noreferrer nofollow noopener"> via defer</a></span><span>) and accelerate them via resource hints such as </span><span>dns-prefetch</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> or </span><span>preconnect</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>57% of all JavaScript code excution time is spent on third-party code, so regularly auditing your dependencies and tag managers is important.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As Yoav Weiss explained in his </span><span><a data-target-href="http://conffab.com/video/taking-back-control-over-third-party-content/" href="http://conffab.com/video/taking-back-control-over-third-party-content/" rel="noreferrer nofollow noopener">must-watch talk on third-party scripts</a></span><span>, in many cases these scripts download resources that are dynamic. The resources change between page loads, so we don’t necessarily know which hosts the resources will be downloaded from and what resources they would be.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>What options do we have then? Consider </span></span><span><span><b>using service workers by racing the resource download with a timeout</b></span></span><span><span> and if the resource hasn’t responded within a certain timeout, return an empty response to tell the browser to carry on with parsing of the page. You can also log or block third-party requests that aren’t successful or don’t fulfill certain criteria. If you can, </span></span><span><span><a data-target-href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" rel="noreferrer nofollow noopener">load the 3rd-party-script from your own server</a></span></span><span><span> rather than from the vendor’s server.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Another option is to establish a </span><span><b>Content Security Policy</b></span><span><b> </b></span><span><b>(CSP)</b></span><span> to restrict the impact of third-party scripts, e.g. disallowing the download of audio or video. The best option is to embed scripts via </span><span>&lt;iframe&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> so that the scripts are running in the context of the iframe and hence don’t have access to the DOM of the page, and can’t run arbitrary code on your domain. Iframes can be further constrained using the </span><span>sandbox</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> attribute, so you can disable any functionality that iframe may do, e.g. prevent scripts from running, prevent alerts, form submission, plugins, access to the top navigation, and so on.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For example, it’s probably going to be necessary to allow scripts to run with </span><span>&lt;iframe sandbox="allow-scripts"&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. Each of the limitations can be lifted via various </span><span>allow</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> values on the </span><span>sandbox</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> attribute</span><span> </span><span>(</span><span><a data-target-href="https://caniuse.com/#search=sandbox" href="https://caniuse.com/#search=sandbox" rel="noreferrer nofollow noopener">supported</a></span><span><a data-target-href="https://caniuse.com/#search=sandbox" href="https://caniuse.com/#search=sandbox" rel="noreferrer nofollow noopener"> almost everywhere</a></span><span>), so constrain them to the bare minimum of what they should be allowed to do.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Consider using Intersection Observer; that would enable ads to be iframed while still dispatching events or getting the information that they need from the DOM</span><span> </span><span>(e.g.</span><span> ad visibility). Watch out for new policies such as </span><span><a data-target-href="https://www.smashingmagazine.com/2018/12/feature-policy/" href="https://www.smashingmagazine.com/2018/12/feature-policy/" rel="noreferrer nofollow noopener">Feature policy</a></span><span>, resource size limits and CPU/Bandwidth priority to limit harmful web features and scripts that would slow down the browser, e.g. synchronous scripts, synchronous XHR requests, document.write and outdated implementations.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-24"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/23658f0d-97bc-4dac-a2e5-e6705d7a8deb/03-thirdparty-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/23658f0d-97bc-4dac-a2e5-e6705d7a8deb/03-thirdparty-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption559278638249043355427259&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:198}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 03-thirdparty-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F23658f0d-97bc-4dac-a2e5-e6705d7a8deb%2F03-thirdparty-front-end-performance-checklist-2020.png&amp;hmac=PmtQyCRelLO4Orwg%2BK4PMhnnq0wLnn0%2BRx7wCgsSqaE%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/23658f0d-97bc-4dac-a2e5-e6705d7a8deb/03-thirdparty-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption559278638249043355427259"><div data-zone-id="caption559278638249043355427259" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Casper.com published a detailed case study on how they managed to shave 1.7 seconds off the site by self-hosting Optimizely. It might be worth it.</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" rel="noreferrer nofollow noopener"><i>Image</i></a></span><span><a data-target-href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" href="https://medium.com/caspertechteam/we-shaved-1-7-seconds-off-casper-com-by-self-hosting-optimizely-2704bcbff8ec" rel="noreferrer nofollow noopener"><i> source</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cf570272-840e-4cf8-92de-76808a12422c/casper-case-study-optimizely.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cf570272-840e-4cf8-92de-76808a12422c/casper-case-study-optimizely.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cf570272-840e-4cf8-92de-76808a12422c/casper-case-study-optimizely.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cf570272-840e-4cf8-92de-76808a12422c/casper-case-study-optimizely.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Set HTTP cache headers properly.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Double-check that </span><span>expires</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>max-age</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>cache-control</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, and other HTTP cache headers have been set properly. In general, resources should be cacheable either for a </span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener">very short time</a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener">(if</a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener"> they are likely to change) or indefinitely</a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener">(if</a></span><span><a data-target-href="https://jakearchibald.com/2016/caching-best-practices/" href="https://jakearchibald.com/2016/caching-best-practices/" rel="noreferrer nofollow noopener"> they are static)</a></span><span> — you can just change their version in the URL when needed. </span><span><span>Disable the </span></span><span><span>Last-Modified</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span> header as any asset with it will result in a conditional request with an </span></span><span><span>If-Modified-Since</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>-header even if the resource is in cache. Same with </span></span><span><span>Etag</span></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Remember the </span><span><a data-target-href="https://www.fastly.com/blog/stale-while-revalidate-stale-if-error-available-today" href="https://www.fastly.com/blog/stale-while-revalidate-stale-if-error-available-today" rel="noreferrer nofollow noopener">stale-while-revalidate</a></span><span>? As you probably know, we specify the caching time with the </span><span>Cache-Control</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> response header, e.g. </span><span>Cache-Control: max-age=604800</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. After 604800 seconds have passed, the cache will re-fetch the requested content, causing the page to load slower. This slowdown can be avoided by using </span><span>stale-while-revalidate</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>; it basically defines an extra window of time during which a cache can use a stale asset as long as it revalidates it async in the background. Thus, it</span><span> </span><span>"hides"</span><span> latency</span><span> </span><span>(both</span><span> in the network and on the server) from clients.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In June–July 2019, </span><span><b>Chrome and Firefox launched support</b></span><span> of </span><span>stale-while-revalidate</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> in HTTP Cache-Control header, so as a result, it should improve subsequent page load latencies as stale assets are no longer in the critical path. Result: </span><span><a data-target-href="https://twitter.com/RyanTownsend/status/1072443651844911104" href="https://twitter.com/RyanTownsend/status/1072443651844911104" rel="noreferrer nofollow noopener">zero RTT for repeat views</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, double-check that you aren’t sending </span><span><a data-target-href="https://www.fastly.com/blog/headers-we-dont-want" href="https://www.fastly.com/blog/headers-we-dont-want" rel="noreferrer nofollow noopener">unnecessary headers</a></span><span> </span><span>(e.g.</span><span> </span><span>x-powered-by</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>pragma</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>x-ua-compatible</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>expires</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and others) and that you include </span><span><a data-target-href="https://www.fastly.com/blog/headers-we-want" href="https://www.fastly.com/blog/headers-we-want" rel="noreferrer nofollow noopener">useful security and performance headers</a></span><span> </span><span>(such</span><span> as </span><span>Content-Security-Policy</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>X-XSS-Protection</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>X-Content-Type-Options</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and others). Finally, keep in mind the </span><span><a data-target-href="https://medium.com/@ankur_anand/the-terrible-performance-cost-of-cors-api-on-the-single-page-application-spa-6fcf71e50147" href="https://medium.com/@ankur_anand/the-terrible-performance-cost-of-cors-api-on-the-single-page-application-spa-6fcf71e50147" rel="noreferrer nofollow noopener">performance cost of CORS requests</a></span><span> in single-page applications.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do you load all JavaScript libraries asynchronously?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>When the user requests a page, the browser fetches the HTML and constructs the DOM, then fetches the CSS and constructs the CSSOM, and then generates a rendering tree by matching the DOM and CSSOM. If any JavaScript needs to be resolved, the browser won’t start rendering the page until it’s resolved, thus delaying rendering. As developers, we have to explicitly tell the browser not to wait and to start rendering the page. The way to do this for scripts is with the </span><span>defer</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>async</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> attributes in HTML.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In practice, it turns out we should </span><span><a data-target-href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" rel="noreferrer nofollow noopener">prefer </a></span><span><a data-target-href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" rel="noreferrer nofollow noopener">defer</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" rel="noreferrer nofollow noopener"> to </a></span><span><a data-target-href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/" rel="noreferrer nofollow noopener">async</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(at</span><span> a </span><span><a data-target-href="https://github.com/h5bp/lazyweb-requests/issues/42" href="https://github.com/h5bp/lazyweb-requests/issues/42" rel="noreferrer nofollow noopener">cost to users of Internet Explorer</a></span><span> up to and including version 9, because you’re likely to break scripts for them). According to </span><span><a data-target-href="https://youtu.be/RwSlubTBnew?t=1034" href="https://youtu.be/RwSlubTBnew?t=1034" rel="noreferrer nofollow noopener">Steve Souders</a></span><span>, once </span><span>async</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> scripts arrive, they are executed immediately. If that happens very fast, for example when the script is in cache aleady, it can actually block HTML parser. With </span><span>defer</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, browser doesn’t execute scripts until HTML is parsed. So, unless you need JavaScript to execute before start render, it’s better to use </span><span>defer</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Lazy load expensive components with IntersectionObserver and priority hints.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In general, it’s a good idea to lazy-load all expensive components, such as heavy JavaScript, videos, iframes, widgets, and potentially images. </span><span><a data-target-href="https://web.dev/native-lazy-loading/" href="https://web.dev/native-lazy-loading/" rel="noreferrer nofollow noopener">Native lazy-loading</a></span><span> is already available for images and iframes, and we can use </span><span><a data-target-href="https://developers.google.com/web/updates/2019/02/priority-hints#using_priority_hints" href="https://developers.google.com/web/updates/2019/02/priority-hints#using_priority_hints" rel="noreferrer nofollow noopener">importance</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://developers.google.com/web/updates/2019/02/priority-hints#using_priority_hints" href="https://developers.google.com/web/updates/2019/02/priority-hints#using_priority_hints" rel="noreferrer nofollow noopener"> attribute</a></span><span> </span><span>(</span><span>high</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> or </span><span>low</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>) on a </span><span>&lt;script&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>&lt;img&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, or </span><span>&lt;link&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> element</span><span> </span><span>(Blink</span><span> only). In fact, it’s a great way to deprioritize images in carousels or fectes, as well as re-prioritize scripts. However, sometimes we might need a bit more granular control.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The most performant way to do lazy load script is by using the </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" rel="noreferrer nofollow noopener">Intersection Observer API</a></span><span> that provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document’s viewport. Basically, you need to create a new </span><span>IntersectionObserver</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> object, which receives a callback function and a set of options. Then we add a target to observe.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The callback function executes when the target becomes visible or invisible, so when it intercepts the viewport, you can start taking some actions before the element becomes visible. In fact, we have a granular control over when the observer’s callback should be invoked, with </span><span>rootMargin</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(margin</span><span> around the root) and </span><span>threshold</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(a</span><span> single number or an array of numbers which indicate at what percentage of the target’s visibility we are aiming).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, watch out for the </span><span><a data-target-href="https://www.chromestatus.com/feature/5641405942726656" href="https://www.chromestatus.com/feature/5641405942726656" rel="noreferrer nofollow noopener">Feature policy: LazyLoad</a></span><span> will provide a mechanism that allows us to force opting in or out of LazyLoad functionality on a per-domain basis</span><span> </span><span>(similar</span><span> to how </span><span><a data-target-href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" rel="noreferrer nofollow noopener">Content Security Policies</a></span><span> work).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Check again what else you could lazy load. Even </span><span><b>lazy-loading translation strings</b></span><span> and emoji could help. By doing so, Mobile Twitter managed to achieve 80% faster JavaScript execution from the new internationalization pipeline. Via @addyosmani.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-25"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption496154570930715753364639&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:225}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 01-internationalization-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fd4d6866d-7897-48bd-bc0c-c62a108e3c48%2F01-internationalization-front-end-performance-checklist-2020.png&amp;hmac=l9cwjANQ%2FiQr3EG%2FE%2FENqh7Q9MmseaYQnmvHQRK4Hgs%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption496154570930715753364639"><div data-zone-id="caption496154570930715753364639" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>By lazy-loading translation strings, Mobile Twitter managed to achieve 80% faster JavaScript execution from the new internationalization pipeline.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> credit: </i></span><span><a data-target-href="https://twitter.com/addyosmani" href="https://twitter.com/addyosmani" rel="noreferrer nofollow noopener"><i>Addy Osmani</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d4d6866d-7897-48bd-bc0c-c62a108e3c48/01-internationalization-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Load images progressively.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>You could even take lazy loading to the next level by adding </span><span><a data-target-href="https://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/" href="https://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/" rel="noreferrer nofollow noopener">progressive image loading</a></span><span> to your pages. Similarly to Facebook, Pinterest and Medium, you could load low quality or even blurry images first, and then as the page continues to load, replace them with the full quality versions by using the </span><span><a data-target-href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" rel="noreferrer nofollow noopener">LQIP</a></span><span><a data-target-href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" rel="noreferrer nofollow noopener"> </a></span><span><a data-target-href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" rel="noreferrer nofollow noopener">(Low</a></span><span><a data-target-href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" href="https://www.guypo.com/introducing-lqip-low-quality-image-placeholders" rel="noreferrer nofollow noopener"> Quality Image Placeholders) technique</a></span><span> proposed by Guy Podjarny.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Opinions differ if these techniques improve user experience or not, but it definitely improves time to first meaningful paint. We can even automate it by using </span><span><a data-target-href="https://github.com/technopagan/sqip" href="https://github.com/technopagan/sqip" rel="noreferrer nofollow noopener">SQIP</a></span><span> that creates a low quality version of an image as an SVG placeholder, or </span><span><a data-target-href="https://calendar.perfplanet.com/2018/gradient-image-placeholders/" href="https://calendar.perfplanet.com/2018/gradient-image-placeholders/" rel="noreferrer nofollow noopener">Gradient Image Placeholders</a></span><span> with CSS linear gradients. These placeholders could be embedded within HTML as they naturally compress well with text compression methods. In his article, Dean Hume </span><span><a data-target-href="https://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/" href="https://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/" rel="noreferrer nofollow noopener">has described</a></span><span> how this technique can be implemented using Intersection Observer.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Browser support? </span><span><a data-target-href="https://caniuse.com/#feat=intersectionobserver" href="https://caniuse.com/#feat=intersectionobserver" rel="noreferrer nofollow noopener">Decent</a></span><span>, with Chrome, Firefox, Edge and Samsung Internet being on board. WebKit status is currently </span><span><a data-target-href="https://webkit.org/status/#specification-intersection-observer" href="https://webkit.org/status/#specification-intersection-observer" rel="noreferrer nofollow noopener">supported in preview</a></span><span>. Fallback? If the browser doesn’t support intersection observer, we can still </span><span><a data-target-href="https://medium.com/@aganglada/intersection-observer-in-action-efc118062366" href="https://medium.com/@aganglada/intersection-observer-in-action-efc118062366" rel="noreferrer nofollow noopener">lazy load</a></span><span> a </span><span><a data-target-href="https://github.com/jeremenichelli/intersection-observer-polyfill" href="https://github.com/jeremenichelli/intersection-observer-polyfill" rel="noreferrer nofollow noopener">polyfill</a></span><span> or load the images immediately. And there is even a </span><span><a data-target-href="https://github.com/ApoorvSaxena/lozad.js" href="https://github.com/ApoorvSaxena/lozad.js" rel="noreferrer nofollow noopener">library</a></span><span> for it.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Want to go fancier? You could </span><span><a data-target-href="https://jmperezperez.com/svg-placeholders/" href="https://jmperezperez.com/svg-placeholders/" rel="noreferrer nofollow noopener">trace your images</a></span><span> and use primitive shapes and edges to create a lightweight SVG placeholder, load it first, and then transition from the placeholder vector image to the</span><span> </span><span>(loaded)</span><span> bitmap image.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-26"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7f56052-6abb-4d18-a5aa-8d84102d812e/jmperez-composition-primitive-full.jpg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7f56052-6abb-4d18-a5aa-8d84102d812e/jmperez-composition-primitive-full.jpg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption874397999543366799692950&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:201}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: jmperez-composition-primitive-full.jpg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Ff7f56052-6abb-4d18-a5aa-8d84102d812e%2Fjmperez-composition-primitive-full.jpg&amp;hmac=nMXd%2BCyYzAlIGivZngazZs5%2BkOieg%2F0CbrSaW1mFVJc%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f7f56052-6abb-4d18-a5aa-8d84102d812e/jmperez-composition-primitive-full.jpg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption874397999543366799692950"><div data-zone-id="caption874397999543366799692950" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>SVG lazy loading technique by José M. Pérez</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do you send critical CSS?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To ensure that browsers start rendering your page as quickly as possible, it’s become a </span><span><a data-target-href="https://www.smashingmagazine.com/2015/08/understanding-critical-css/" href="https://www.smashingmagazine.com/2015/08/understanding-critical-css/" rel="noreferrer nofollow noopener">common practice</a></span><span> to collect all of the CSS required to start rendering the first visible portion of the page</span><span> </span><span>(known</span><span> as</span><span> </span><span>"critical</span><span> CSS" or</span><span> </span><span>"above-the-fold</span><span> CSS") and add it inline in the </span><span>&lt;head&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> of the page, thus reducing roundtrips. Due to the limited size of packages exchanged during the slow start phase, your budget for critical CSS is around 14 KB.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you go beyond that, the browser will need additional roundtrips to fetch more styles. </span><span><a data-target-href="https://github.com/filamentgroup/criticalCSS" href="https://github.com/filamentgroup/criticalCSS" rel="noreferrer nofollow noopener">CriticalCSS</a></span><span> and </span><span><a data-target-href="https://github.com/addyosmani/critical" href="https://github.com/addyosmani/critical" rel="noreferrer nofollow noopener">Critical</a></span><span> enable you to discover critical CSS. You might need to do it for every template you’re using.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you </span><span><b>load your full CSS asynchronously</b></span><span> with libraries such as </span><span><a data-target-href="https://github.com/filamentgroup/loadCSS" href="https://github.com/filamentgroup/loadCSS" rel="noreferrer nofollow noopener">loadCSS</a></span><span>, it’s not really necessary. With </span><span>media="print"</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> on </span><span>link</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, you can </span><span><a data-target-href="https://www.filamentgroup.com/lab/load-css-simpler/" href="https://www.filamentgroup.com/lab/load-css-simpler/" rel="noreferrer nofollow noopener">trick browser into fetching the CSS asynchronously</a></span><span> but applying to the screen environment once it loads.</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Scott!</i></span><span>)</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With HTTP/2, critical CSS could be stored in a separate CSS file and delivered via a </span><span><a data-target-href="https://www.filamentgroup.com/lab/modernizing-delivery.html" href="https://www.filamentgroup.com/lab/modernizing-delivery.html" rel="noreferrer nofollow noopener">server push</a></span><span> without bloating the HTML. The catch is that server pushing is </span><span><span><a data-target-href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/" href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/" rel="noreferrer nofollow noopener">troublesome</a></span></span><span><span> </span></span><span>with many gotchas and race conditions across browsers. It isn’t supported consistently and has some caching issues</span><span> </span><span>(see</span><span> slide 114 onwards of </span><span><a data-target-href="http://www.slideshare.net/Fastly/http2-what-no-one-is-telling-you" href="http://www.slideshare.net/Fastly/http2-what-no-one-is-telling-you" rel="noreferrer nofollow noopener">Hooman Beheshti’s presentation</a></span><span>). The effect could, in fact, </span><span><a data-target-href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/" href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/" rel="noreferrer nofollow noopener">be negative</a></span><span> and bloat the network buffers, preventing genuine frames in the document from being delivered. Also, it appears that server pushing is much </span><span><a data-target-href="https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0/edit" href="https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0/edit" rel="noreferrer nofollow noopener">more effective on warm connections</a></span><span> due to the TCP slow start.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Even with HTTP/1, putting </span><span><span>critical CSS</span></span><span> in a separate file on the root domain </span><span><a data-target-href="http://www.jonathanklein.net/2014/02/revisiting-cookieless-domain.html" href="http://www.jonathanklein.net/2014/02/revisiting-cookieless-domain.html" rel="noreferrer nofollow noopener">has benefits</a></span><span>, sometimes even more than inlining due to caching. Chrome speculatively opens a second HTTP connection to the root domain when requesting the page, which removes the need for a TCP connection to fetch this CSS</span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Philip!</i></span><span>)</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A few gotchas to keep in mind: unlike </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> that can trigger preload from any domain, you can only push resources from your own domain or domains you are authoritative for. It can be initiated as soon as the server gets the very first request from the client. Server pushed resources land in the Push cache and are removed when the connection is terminated. However, since an HTTP/2 connection can be re-used across multiple tabs, pushed resources can be claimed by requests from other tabs as well. We can't depend on it though, especially </span><span><a data-target-href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/#multiple-pages-can-use-the-same-http2-connection" href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/#multiple-pages-can-use-the-same-http2-connection" rel="noreferrer nofollow noopener">in Safari and Edge</a></span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Inian, Barry!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>At the moment, there is no simple way for the server to know if pushed resources are already in </span><span><a data-target-href="https://blog.yoav.ws/tale-of-four-caches/" href="https://blog.yoav.ws/tale-of-four-caches/" rel="noreferrer nofollow noopener">one of the user’s caches</a></span><span>, so resources will keep being pushed with every user’s visit. You may then need to create a </span><span><a data-target-href="https://css-tricks.com/cache-aware-server-push/" href="https://css-tricks.com/cache-aware-server-push/" rel="noreferrer nofollow noopener">cache-aware HTTP/2 server push mechanism</a></span><span>. If fetched, you could try to get them from a cache based on the index of what’s already in the cache, avoiding secondary server pushes altogether.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For a while, </span><span><a data-target-href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" rel="noreferrer nofollow noopener">the </a></span><span><a data-target-href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" rel="noreferrer nofollow noopener">cache-digest</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" href="http://calendar.perfplanet.com/2016/cache-digests-http2-server-push/" rel="noreferrer nofollow noopener"> specification</a></span><span> was considered to help negate the need to manually build such</span><span> </span><span>"cache-aware"</span><span> servers, basically declaring a new frame type in HTTP/2 to communicate what’s already in the cache for that hostname. However, </span><span><a data-target-href="https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html" href="https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html" rel="noreferrer nofollow noopener">cache-digest</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html" href="https://lists.w3.org/Archives/Public/ietf-http-wg/2019JanMar/0033.html" rel="noreferrer nofollow noopener"> spec was abandoned</a></span><span> </span><span>(</span><span><i>thanks,</i></span><span><i> Barry!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For dynamic content, when a server needs some time to generate a response, the browser isn’t able to make any requests since it’s not aware of any sub-resources that the page might reference. For that case, we can warm up the connection and increase the TCP congestion window size, so that future requests can be completed faster. Also, all inlined assets are usually good candidates for server pushing. In fact, Inian Parameshwaran </span><span><a data-target-href="https://dexecure.com/blog/http2-push-vs-http-preload/" href="https://dexecure.com/blog/http2-push-vs-http-preload/" rel="noreferrer nofollow noopener">did remarkable research comparing HTTP/2 Push vs. HTTP Preload</a></span><span>, and it’s a fantastic read with all the details you might need.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Bottom line: As Sam Saccone </span><span><a data-target-href="https://medium.com/@samccone/performance-futures-bundling-281543d9a0d5" href="https://medium.com/@samccone/performance-futures-bundling-281543d9a0d5" rel="noreferrer nofollow noopener">noted</a></span><span>, </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> is good for moving the start download time of an asset closer to the initial request, while Server Push is good for cutting out a full RTT</span><span> </span><span>(</span><span><a data-target-href="https://blog.yoav.ws/being_pushy/" href="https://blog.yoav.ws/being_pushy/" rel="noreferrer nofollow noopener">or</a></span><span><a data-target-href="https://blog.yoav.ws/being_pushy/" href="https://blog.yoav.ws/being_pushy/" rel="noreferrer nofollow noopener"> more</a></span><span>, depending on your server think time) — if you have a service worker to prevent unnecessary pushing, that is.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Experiment with regrouping your CSS rules.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We’ve got used to critical CSS, but there are a few optimizations that could go beyond that. Harry Roberts conducted a </span><span><a data-target-href="https://csswizardry.com/2018/11/css-and-network-performance/" href="https://csswizardry.com/2018/11/css-and-network-performance/" rel="noreferrer nofollow noopener">remarkable research</a></span><span> with quite surprising results. For example, it might be a good idea to split the main CSS file out into its individual media queries. That way, the browser will retrieve critical CSS with high priority, and everything else with low priority — completely off the critical path.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Also, avoid placing </span><span>&lt;link rel="stylesheet" /&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> before </span><span>async</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> snippets. If scripts don’t depend on stylesheets, consider placing blocking scripts above blocking styles. If they do, split that JavaScript in two and load it either side of your CSS.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Scott Jehl solved another interesting problem by </span><span><a data-target-href="https://www.filamentgroup.com/lab/inlining-cache.html" href="https://www.filamentgroup.com/lab/inlining-cache.html" rel="noreferrer nofollow noopener">caching an inlined CSS file with a service worker</a></span><span>, a common problem familiar if you’re using critical CSS. Basically, we add an ID attribute onto the </span><span>style</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> element so that it’s easy to find it using JavaScript, then a small piece of JavaScript finds that CSS and uses the Cache API to store it in a local browser cache</span><span> </span><span>(with</span><span> a content type of </span><span>text/css</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>) for use on subsequent pages. To avoid inlining on subsequent pages and instead reference the cached assets externally, we then set a cookie on the first visit to a site. </span><span><i>Voilà!</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do you stream responses?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Often forgotten and neglected, </span><span><a data-target-href="https://streams.spec.whatwg.org/" href="https://streams.spec.whatwg.org/" rel="noreferrer nofollow noopener">streams</a></span><span> provide an interface for reading or writing asynchronous chunks of data, only a subset of which might be available in memory at any given time. Basically, they allow the page that made the original request to start working with the response as soon as the first chunk of data is available, and use parsers that are optimized for streaming to progressively display the content.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>We could create one stream from multiple sources. For example, instead of serving an empty UI shell and letting JavaScript populate it, you can let the service worker construct a stream where the shell comes from a cache, but the body comes from the network. As Jeff Posnick </span><span><a data-target-href="https://developers.google.com/web/updates/2016/06/sw-readablestreams" href="https://developers.google.com/web/updates/2016/06/sw-readablestreams" rel="noreferrer nofollow noopener">noted</a></span><span>, if your web app is powered by a CMS that server-renders HTML by stitching together partial templates, that model translates directly into using streaming responses, with the templating logic replicated in the service worker instead of your server. Jake Archibald’s </span><span><a data-target-href="https://jakearchibald.com/2016/streams-ftw/" href="https://jakearchibald.com/2016/streams-ftw/" rel="noreferrer nofollow noopener">The Year of Web Streams</a></span><span> article highlights how exactly you could build it. Performance boost is </span><span><a data-target-href="https://www.youtube.com/watch?v=Cjo9iq8k-bc" href="https://www.youtube.com/watch?v=Cjo9iq8k-bc" rel="noreferrer nofollow noopener">quite noticeable</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>One important advantage of streaming the entire HTML response is that HTML rendered during the initial navigation request can take full advantage of the browser’s streaming HTML parser. Chunks of HTML that are inserted into a document after the page has loaded</span><span> </span><span>(as</span><span> is common with content populated via JavaScript) can’t take advantage of this optimization.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Consider making your components connection-aware.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Data can be </span><span><a data-target-href="https://whatdoesmysitecost.com/" href="https://whatdoesmysitecost.com/" rel="noreferrer nofollow noopener">expensive</a></span><span> and with growing payload, we need to respect users who choose to opt into data savings while accessing our sites or apps. The </span><span><a data-target-href="https://developers.google.com/web/updates/2016/02/save-data" href="https://developers.google.com/web/updates/2016/02/save-data" rel="noreferrer nofollow noopener">Save-Data client hint request header</a></span><span> allows us to customize the application and the payload to cost- and performance-constrained users. In fact, you could </span><span><a data-target-href="https://css-tricks.com/help-users-save-data/" href="https://css-tricks.com/help-users-save-data/" rel="noreferrer nofollow noopener">rewrite requests for high DPI images to low DPI images</a></span><span>, remove web fonts, fancy parallax effects, preview thumbnails and infinite scroll, turn off video autoplay, server pushes, reduce the number of displayed items and downgrade image quality, or even change how you </span><span><a data-target-href="https://dev.to/addyosmani/adaptive-serving-using-javascript-and-the-network-information-api-331p" href="https://dev.to/addyosmani/adaptive-serving-using-javascript-and-the-network-information-api-331p" rel="noreferrer nofollow noopener">deliver markup</a></span><span>. Tim Vereecke has published a very detailed article on </span><span><a data-target-href="https://calendar.perfplanet.com/2018/data-shaver-strategies/" href="https://calendar.perfplanet.com/2018/data-shaver-strategies/" rel="noreferrer nofollow noopener">data-s(h)aver strategies</a></span><span> featuring many options for data saving.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The header is currently supported only in Chromium, on the Android version of Chrome or via the Data Saver extension on a desktop device. Finally, you can also use the </span><span><a data-target-href="https://googlechrome.github.io/samples/network-information/" href="https://googlechrome.github.io/samples/network-information/" rel="noreferrer nofollow noopener">Network Information API</a></span><span> to deliver </span><span><a data-target-href="https://justmarkup.com/log/2017/11/network-based-image-loading/" href="https://justmarkup.com/log/2017/11/network-based-image-loading/" rel="noreferrer nofollow noopener">low/high resolution images</a></span><span> and videos based on the network type. Network Information API and specifically </span><span>navigator.connection.effectiveType</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> use </span><span>RTT</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>downlink</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>effectiveType</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> values</span><span> </span><span>(and</span><span> a few </span><span><a data-target-href="https://wicg.github.io/netinfo/" href="https://wicg.github.io/netinfo/" rel="noreferrer nofollow noopener">others</a></span><span>) to provide a representation of the connection and the data that users can handle.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In this context, Max Stoiber speaks of </span><span><a data-target-href="https://mxb.at/blog/connection-aware-components/" href="https://mxb.at/blog/connection-aware-components/" rel="noreferrer nofollow noopener">connection-aware components</a></span><span> and Addy Osmani speaks of </span><span><a data-target-href="https://youtu.be/puUPpVrIRkc?t=975" href="https://youtu.be/puUPpVrIRkc?t=975" rel="noreferrer nofollow noopener">adaptive module serving</a></span><span>. For example, with React, we could write a component that renders differently for different connection types. As Max suggested, a </span><span>&lt;Media /&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> component in a news article might output:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-663"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Offline</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>: a placeholder with </span><span>alt</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> text,</span></li></ul></div><div dir="auto" id="editor-1-ace-line-664"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>2G</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> / </span><span>save-data</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> mode: a low-resolution image,</span></li></ul></div><div dir="auto" id="editor-1-ace-line-665"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>3G</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> on non-Retina screen: a mid-resolution image,</span></li></ul></div><div dir="auto" id="editor-1-ace-line-666"><ul><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>3G</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> on Retina screens: high-res Retina image,</span></li></ul></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Dean Hume provides a </span><span><a data-target-href="https://deanhume.com/dynamic-resources-using-the-network-information-api-and-service-workers/" href="https://deanhume.com/dynamic-resources-using-the-network-information-api-and-service-workers/" rel="noreferrer nofollow noopener">practical implementation of a similar logic</a></span><span> using a service worker. For a video, we could display a video poster by default, and then display the</span><span> </span><span>"Play"</span><span> icon as well as the video player shell, meta-data of the video etc. on better connections. As a fallback for non-supporting browsers, we could </span><span><a data-target-href="https://benrobertson.io/front-end/lazy-load-connection-speed" href="https://benrobertson.io/front-end/lazy-load-connection-speed" rel="noreferrer nofollow noopener">listen to </a></span><span><a data-target-href="https://benrobertson.io/front-end/lazy-load-connection-speed" href="https://benrobertson.io/front-end/lazy-load-connection-speed" rel="noreferrer nofollow noopener">canplaythrough</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://benrobertson.io/front-end/lazy-load-connection-speed" href="https://benrobertson.io/front-end/lazy-load-connection-speed" rel="noreferrer nofollow noopener"> event</a></span><span> and use </span><span>Promise.race()</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> to timeout the source loading if the </span><span>canplaythrough</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> event doesn’t fire within 2 seconds.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you want to dive in a bit deeper, here are a couple of resources to get started:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Consider making your components device memory-aware.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Network connection gives us only one perspective at the context of the user though. Going further, you could also dynamically </span><span><a data-target-href="https://calendar.perfplanet.com/2018/dynamic-resources-browser-network-device-memory/" href="https://calendar.perfplanet.com/2018/dynamic-resources-browser-network-device-memory/" rel="noreferrer nofollow noopener">adjust resources based on available device memory</a></span><span>, with the </span><span><a data-target-href="https://developers.google.com/web/updates/2017/12/device-memory" href="https://developers.google.com/web/updates/2017/12/device-memory" rel="noreferrer nofollow noopener">Device Memory API</a></span><span>. </span><span>navigator.deviceMemory</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> returns how much RAM the device has in gigabytes, rounded down to the nearest power of two. The API also features a Client Hints Header, </span><span>Device-Memory</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, that reports the same value.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-27"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/34f6f27f-88a9-425a-910e-39100034def3/devtools-priority-segixq.gif" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/34f6f27f-88a9-425a-910e-39100034def3/devtools-priority-segixq.gif&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption149440657134180685501362&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:136}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: devtools-priority-segixq.gif" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F34f6f27f-88a9-425a-910e-39100034def3%2Fdevtools-priority-segixq.gif&amp;hmac=PkIaLFYdokYfT8NaFyNUPq9j3UOtM9NGSdD0vElN5Yw%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/34f6f27f-88a9-425a-910e-39100034def3/devtools-priority-segixq.gif" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Warm up the connection to speed up delivery.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Use </span><span><a data-target-href="https://w3c.github.io/resource-hints" href="https://w3c.github.io/resource-hints" rel="noreferrer nofollow noopener">resource hints</a></span><span> to save time on </span><span><a data-target-href="http://caniuse.com/#search=dns-prefetch" href="http://caniuse.com/#search=dns-prefetch" rel="noreferrer nofollow noopener">dns-prefetch</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(which</span><span> performs a DNS lookup in the background), </span><span><a data-target-href="http://www.caniuse.com/#search=preconnect" href="http://www.caniuse.com/#search=preconnect" rel="noreferrer nofollow noopener">preconnect</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(which</span><span> asks the browser to start the connection handshake</span><span> </span><span>(DNS,</span><span> TCP, TLS) in the background), </span><span><a data-target-href="http://caniuse.com/#search=prefetch" href="http://caniuse.com/#search=prefetch" rel="noreferrer nofollow noopener">prefetch</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(which</span><span> asks the browser to request a resource) and </span><span><a data-target-href="https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/" href="https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/" rel="noreferrer nofollow noopener">preload</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> </span><span>(which</span><span> prefetches resources without executing them, among other things).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Remember </span><span><a data-target-href="https://www.w3.org/TR/resource-hints/#dfn-prerender" href="https://www.w3.org/TR/resource-hints/#dfn-prerender" rel="noreferrer nofollow noopener">prerender</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>? The resource hint used to prompt browser to build out the entire page in the background for next navigation. The implementations issues </span><span><a data-target-href="https://vimeo.com/356819848#t=1632s" href="https://vimeo.com/356819848#t=1632s" rel="noreferrer nofollow noopener">were quite problematic</a></span><span>, ranging from a huge memory footprint and bandwidth usage to multiple registered analytics hits and ad impressions.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Unsurprinsingly, it was deprecated, but the Chrome team has brought it back as </span><span><a data-target-href="https://developers.google.com/web/updates/2018/07/nostate-prefetch" href="https://developers.google.com/web/updates/2018/07/nostate-prefetch" rel="noreferrer nofollow noopener">NoState Prefetch mechanism</a></span><span>. In fact, Chrome treats the </span><span>prerender</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> hint as a NoState Prefetch instead, so we can use it today. As Katie Hempenius explains in </span><span><span>that</span></span><span> article,</span><span> </span><span>"like</span><span> prerendering, NoState Prefetch fetches resources in advance; but unlike prerendering it does not execute JavaScript or render any part of the page in advance." NoState Prefetch only uses ~45MiB of memory and subresources that are fetched will be fetched with an </span><span>IDLE</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> Net Priority. Since Chrome 69, NoState Prefetch adds the header </span><span><i>Purpose: Prefetch</i></span><span> to all requests in order to make them distinguishable from normal browsing.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Most of the time these days, we’ll be using at least </span><span>preconnect</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>dns-prefetch</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, and we’ll be cautious with using </span><span>prefetch</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>prerender</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>; the former should only be used if you are confident about what assets the user will need next</span><span> </span><span>(for</span><span> example, in a purchasing funnel).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Note that even with </span><span>preconnect</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>dns-prefetch</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, the browser has a limit on the number of hosts it will look up/connect to in parallel, so it’s a safe bet to order them based on priority</span><span> </span><span>(</span><span><i>thanks</i></span><span><i> </i></span><span><span><i>Philip</i></span></span><span><i>!</i></span><span>).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In fact, using resource hints is probably the easiest way to boost performance, and </span><span><a data-target-href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" rel="noreferrer nofollow noopener">it works well indeed</a></span><span>. When to use what? As Addy Osmani </span><span><a data-target-href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" rel="noreferrer nofollow noopener">has explained</a></span><span>, it's a good idea to preload resources that we have high-confidence will be used in the current page. Prefetch resources likely to be used for future navigations across multiple navigation boundaries, e.g. Webpack bundles needed for pages the user hasn’t visited yet.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Addy’s article on</span><span> </span><span><a data-target-href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" rel="noreferrer nofollow noopener">"Loading</a></span><span><a data-target-href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf" rel="noreferrer nofollow noopener"> Priorities in Chrome"</a></span><span> shows how </span><span><i>exactly</i></span><span> Chrome interprets resource hints, so once you’ve decided which assets are critical for rendering, you can assign high priority to them. To see how your requests are prioritized, you can enable a</span><span> </span><span>"priority"</span><span> column in the Chrome DevTools network request table</span><span> </span><span>(as</span><span> well as Safari).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-28"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f2dbec5f-c859-4aa6-b10b-f017be63fc3b/resources-in-chrome.jpeg" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f2dbec5f-c859-4aa6-b10b-f017be63fc3b/resources-in-chrome.jpeg&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption542663114432702426374083&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:416}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: resources-in-chrome.jpeg" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Ff2dbec5f-c859-4aa6-b10b-f017be63fc3b%2Fresources-in-chrome.jpeg&amp;hmac=dnuPkidapiCMjHRV0L56DBoljEGoCBihonD4%2B5YOR74%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/f2dbec5f-c859-4aa6-b10b-f017be63fc3b/resources-in-chrome.jpeg" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption542663114432702426374083"><div data-zone-id="caption542663114432702426374083" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A break-down showing how different resources are prioritized in Blink as of Chrome 46 and beyond.&nbsp;</span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A few </span><span><a data-target-href="https://dexecure.com/blog/http2-push-vs-http-preload/" href="https://dexecure.com/blog/http2-push-vs-http-preload/" rel="noreferrer nofollow noopener">gotchas to keep in mind</a></span><span>: </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> is good for </span><span><a data-target-href="https://www.youtube.com/watch?v=RWLzUnESylc" href="https://www.youtube.com/watch?v=RWLzUnESylc" rel="noreferrer nofollow noopener">moving the start download time of an asset</a></span><span> closer to the initial request, but preloaded assets land in the memory cache which is tied to the page making the request. </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> plays well with the HTTP cache: a network request is never sent if the item is already there in the HTTP cache.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Hence, it’s useful for late-discovered resources, a hero image loaded via background-image, inlining critical CSS</span><span> </span><span>(or</span><span> JavaScript) and pre-loading the rest of the CSS</span><span> </span><span>(or</span><span> JavaScript). Also, a </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> tag can initiate a preload only after the browser has received the HTML from the server and the lookahead parser has found the </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> tag.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Preloading via the HTTP header </span><span><span>is a bit faster</span></span><span> since we don’t to wait for the browser to parse the HTML to start the request. </span><span><span><a data-target-href="https://www.fastly.com/blog/faster-websites-early-priority-hints" href="https://www.fastly.com/blog/faster-websites-early-priority-hints" rel="noreferrer nofollow noopener">Early Hints</a></span></span><span><span> will help even further</span></span><span>, enabling preload to kick in even before the response headers for the HTML are sent and </span><span><a data-target-href="https://github.com/WICG/priority-hints" href="https://github.com/WICG/priority-hints" rel="noreferrer nofollow noopener">Priority Hints</a></span><span> will help us indicate loading priorities for scripts.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Use service workers for caching and network fallbacks.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>No performance optimization over a network can be faster than a locally stored cache on a user’s machine. If your website is running over HTTPS, use the</span><span> </span><span>"</span><span><a data-target-href="https://github.com/lyzadanger/pragmatist-service-worker" href="https://github.com/lyzadanger/pragmatist-service-worker" rel="noreferrer nofollow noopener">Pragmatist’s</a></span><span><a data-target-href="https://github.com/lyzadanger/pragmatist-service-worker" href="https://github.com/lyzadanger/pragmatist-service-worker" rel="noreferrer nofollow noopener"> Guide to Service Workers</a></span><span>" to cache static assets in a service worker cache and store offline fallbacks</span><span> </span><span>(or</span><span> even offline pages) and retrieve them from the user’s machine, rather than going to the network. Also, check Jake’s </span><span><a data-target-href="https://jakearchibald.com/2014/offline-cookbook/" href="https://jakearchibald.com/2014/offline-cookbook/" rel="noreferrer nofollow noopener">Offline Cookbook</a></span><span> and the free Udacity course</span><span> </span><span>"</span><span><a data-target-href="https://www.udacity.com/course/offline-web-applications--ud899" href="https://www.udacity.com/course/offline-web-applications--ud899" rel="noreferrer nofollow noopener">Offline</a></span><span><a data-target-href="https://www.udacity.com/course/offline-web-applications--ud899" href="https://www.udacity.com/course/offline-web-applications--ud899" rel="noreferrer nofollow noopener"> Web Applications</a></span><span>."</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Browser support? As stated above, it’s </span><span><a data-target-href="http://caniuse.com/#search=serviceworker" href="http://caniuse.com/#search=serviceworker" rel="noreferrer nofollow noopener">widely supported</a></span><span> and the fallback is the network anyway. Does it help boost performance? </span><span><a data-target-href="https://developers.google.com/web/showcase/2016/service-worker-perf" href="https://developers.google.com/web/showcase/2016/service-worker-perf" rel="noreferrer nofollow noopener">Oh yes, it does</a></span><span>. And it’s getting better, e.g. with Background Fetch allowing background uploads/downloads from a service worker.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>There are a few gotchas to keep in mind though. With a service worker in place, we need to </span><span><a data-target-href="https://philna.sh/blog/2018/10/23/service-workers-beware-safaris-range-request/" href="https://philna.sh/blog/2018/10/23/service-workers-beware-safaris-range-request/" rel="noreferrer nofollow noopener">beware range requests in Safari</a></span><span> </span><span>(if</span><span> you are using Workbox for a service worker it has a </span><span><a data-target-href="https://developers.google.com/web/tools/workbox/modules/workbox-range-requests" href="https://developers.google.com/web/tools/workbox/modules/workbox-range-requests" rel="noreferrer nofollow noopener">range request module</a></span><span>). If you ever stumbled upon </span><span>DOMException: Quota exceeded.</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> error in the browser console, then look into Gerardo’s article </span><span><a data-target-href="https://cloudfour.com/thinks/when-7-kb-equals-7-mb/" href="https://cloudfour.com/thinks/when-7-kb-equals-7-mb/" rel="noreferrer nofollow noopener">When 7KB equals 7MB</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>A good starting point for using service workers would be </span><span><a data-target-href="https://developers.google.com/web/tools/workbox/" href="https://developers.google.com/web/tools/workbox/" rel="noreferrer nofollow noopener">Workbox</a></span><span>, a set of service worker libraries built specifically for building progressive web apps.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Are you using service workers on the CDN/Edge, e.g. for A/B testing?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>At this point, we are quite used to running service workers on the client, but with </span><span><a data-target-href="https://blog.cloudflare.com/introducing-cloudflare-workers/" href="https://blog.cloudflare.com/introducing-cloudflare-workers/" rel="noreferrer nofollow noopener">CDNs implementing them on the server</a></span><span>, we could use them to tweak performance on the edge as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-29"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption379981478133431965324694&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:232}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 05-serviceworker-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fb59f5d44-e03c-41b9-a5e0-6f4be94dbf04%2F05-serviceworker-front-end-performance-checklist-2020.png&amp;hmac=xLhK%2FSiNtwQv6gjUBBoknDMQRIzVSIVYz3IPNkVtKw0%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption379981478133431965324694"><div data-zone-id="caption379981478133431965324694" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>Timeseries of service worker installation. Only 0.44% of all desktop pages register a service worker, according to </i></span><span><a data-target-href="https://almanac.httparchive.org/en/2019/pwa" href="https://almanac.httparchive.org/en/2019/pwa" rel="noreferrer nofollow noopener"><i>Web Almanac</i></a></span><span><i>.</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b59f5d44-e03c-41b9-a5e0-6f4be94dbf04/05-serviceworker-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Optimize rendering performance.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Isolate expensive components with </span><span><a data-target-href="http://caniuse.com/#search=contain" href="http://caniuse.com/#search=contain" rel="noreferrer nofollow noopener">CSS containment</a></span><span> — for example, to limit the scope of the browser’s styles, of layout and paint work for off-canvas navigation, or of third-party widgets. Make sure that there is no lag when scrolling the page or when an element is animated, and that you’re consistently hitting 60 frames per second. If that’s not possible, then at least making the frames per second consistent is preferable to a mixed range of 60 to 15. Use CSS’ </span><span><a data-target-href="http://caniuse.com/#feat=will-change" href="http://caniuse.com/#feat=will-change" rel="noreferrer nofollow noopener">will-change</a></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> to inform the browser of which elements and properties will change.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><b>Note</b></span><span>: changes to GPU-composited layers are the </span><span><a data-target-href="https://blog.algolia.com/performant-web-animations/" href="https://blog.algolia.com/performant-web-animations/" rel="noreferrer nofollow noopener">least expensive</a></span><span>, so if you can get away by triggering only compositing via </span><span>opacity</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>transform</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, you’ll be on the right track. Anna Migas has provided a lot of practical advice in her talk on </span><span><a data-target-href="https://vimeo.com/302791098" href="https://vimeo.com/302791098" rel="noreferrer nofollow noopener">Debugging UI Rendering Performance</a></span><span>, too.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Have you optimized rendering experience?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>While the sequence of how components appear on the page, and the strategy of how we serve assets to the browser matter, we shouldn’t underestimate the role of </span><span><a data-target-href="https://www.smashingmagazine.com/2015/09/why-performance-matters-the-perception-of-time/" href="https://www.smashingmagazine.com/2015/09/why-performance-matters-the-perception-of-time/" rel="noreferrer nofollow noopener">perceived performance</a></span><span>, too. The concept deals with psychological aspects of waiting, basically keeping customers busy or engaged while something else is happening. That’s where </span><span><a data-target-href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/" href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/" rel="noreferrer nofollow noopener">perception management</a></span><span>, </span><span><a data-target-href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/#preemptive-start" href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/#preemptive-start" rel="noreferrer nofollow noopener">preemptive start</a></span><span>, </span><span><a data-target-href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/#early-completion" href="https://www.smashingmagazine.com/2015/11/why-performance-matters-part-2-perception-management/#early-completion" rel="noreferrer nofollow noopener">early completion</a></span><span> and </span><span><a data-target-href="https://www.smashingmagazine.com/2015/12/performance-matters-part-3-tolerance-management/" href="https://www.smashingmagazine.com/2015/12/performance-matters-part-3-tolerance-management/" rel="noreferrer nofollow noopener">tolerance management</a></span><span> come into play.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>What does it all mean? While loading assets, we can try to always be one step ahead of the customer, so the experience feels swift while there is quite a lot happening in the background. To keep the customer engaged, we can test </span><span><a data-target-href="https://twitter.com/lukew/status/665288063195594752" href="https://twitter.com/lukew/status/665288063195594752" rel="noreferrer nofollow noopener">skeleton screens</a></span><span> </span><span>(</span><span><a data-target-href="https://twitter.com/razvancaliman/status/734088764960690176" href="https://twitter.com/razvancaliman/status/734088764960690176" rel="noreferrer nofollow noopener">implementation</a></span><span><a data-target-href="https://twitter.com/razvancaliman/status/734088764960690176" href="https://twitter.com/razvancaliman/status/734088764960690176" rel="noreferrer nofollow noopener"> demo</a></span><span>) instead of loading indicators, add transitions/animations and basically </span><span><a data-target-href="https://blog.stephaniewalter.fr/en/cheating-ux-perceived-performance-and-user-experience/" href="https://blog.stephaniewalter.fr/en/cheating-ux-perceived-performance-and-user-experience/" rel="noreferrer nofollow noopener">cheat the UX</a></span><span> when there is nothing more to optimize. Beware though: skeleton screens should be tested before deploying as some </span><span><a data-target-href="https://www.viget.com/articles/a-bone-to-pick-with-skeleton-screens/" href="https://www.viget.com/articles/a-bone-to-pick-with-skeleton-screens/" rel="noreferrer nofollow noopener">tests showed that skeleton screens can perform the worst</a></span><span> by all metrics.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do you prevent layout shifts and repaints?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>In the realm of perceived performance probably one of the more disruptive experiences is </span><span><b>layout shifting</b></span><span>, or </span><span><i>reflows</i></span><span>, caused by rescaled images and videos, web fonts, injected ads or late-discovered scripts that populate components with actual content. As a result, a customer might start reading an article just to be interrupted by a layout jump above the reading area. The experience is often abrupt and quite disorienting: and that's probably a case of loading priorities that need to be reconsidered.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>The community has developed a couple of techniques and workarounds to avoid reflows. Always </span><span><a data-target-href="https://www.youtube.com/watch?v=4-d_SoCHeWE" href="https://www.youtube.com/watch?v=4-d_SoCHeWE" rel="noreferrer nofollow noopener">set width</a></span><span> </span><span><a data-target-href="https://twitter.com/addyosmani/status/1169813271009886208" href="https://twitter.com/addyosmani/status/1169813271009886208" rel="noreferrer nofollow noopener">and height</a></span><span> attributes on images, so modern browsers allocate the box and reserve the space by default</span><span> </span><span>(Firefox,</span><span> Chrome).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>For both images or videos, we can use an </span><span><a data-target-href="https://css-tricks.com/preventing-content-reflow-from-lazy-loaded-images/" href="https://css-tricks.com/preventing-content-reflow-from-lazy-loaded-images/" rel="noreferrer nofollow noopener">SVG placeholder</a></span><span> to reserve the display box in which the media will appear in. That means that the area will be reserved properly when you need to maintain the its aspect ratio as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Instead of lazy-loading images with external scripts, consider using </span><span><a data-target-href="https://web.dev/native-lazy-loading/" href="https://web.dev/native-lazy-loading/" rel="noreferrer nofollow noopener">native lazy-loading</a></span><span>, or </span><span><a data-target-href="https://www.smashingmagazine.com/2019/05/hybrid-lazy-loading-progressive-migration-native/" href="https://www.smashingmagazine.com/2019/05/hybrid-lazy-loading-progressive-migration-native/" rel="noreferrer nofollow noopener">hybrid lazy-loading</a></span><span> when we load an external script only if native lazy-loading isn't supported.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>As mentioned above, always </span><span><a data-target-href="https://www.zachleat.com/web/comprehensive-webfonts/#fout-class" href="https://www.zachleat.com/web/comprehensive-webfonts/#fout-class" rel="noreferrer nofollow noopener">group web font repaints</a></span><span> and transition from </span><span><i>all</i></span><span> fallback fonts to </span><span><i>all</i></span><span> web fonts at once — just make sure that that switch isn’t too abrupt, by adjusting line-height and spacing between the fonts with </span><span><a data-target-href="https://meowni.ca/font-style-matcher/" href="https://meowni.ca/font-style-matcher/" rel="noreferrer nofollow noopener">font-style-matcher</a></span><span>.</span><span> </span><span>(Note</span><span> that adjustments are complicated with complicated font stacks though.)</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To ensure that the impact of reflows is contained, measure the layout stability with the </span><span><a data-target-href="https://wicg.github.io/layout-instability/" href="https://wicg.github.io/layout-instability/" rel="noreferrer nofollow noopener">Layout Instability API</a></span><span>. With it, you can calculate the </span><span><span><a data-target-href="https://web.dev/cls/" href="https://web.dev/cls/" rel="noreferrer nofollow noopener">Cumulative Layout Shift</a></span></span><span> </span><span>(CLS)</span><span> score and include it as a requirement in your tests, so whenever a regression appears, you can track it and fix it.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To calculate the layout shift score, the browser looks at the viewport size and the movement of unstable elements in the viewport between two rendered frames. Ideally, the score would be close to </span><span>0</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>. There is a great guide by Milica Mihajlija and Philip Walton on </span><span><a data-target-href="https://web.dev/cls" href="https://web.dev/cls" rel="noreferrer nofollow noopener">what CLS is and how to measure it</a></span><span>. It's a good starting point to measure and maintain perceived performance and avoid disruption, especially for business-critical tasks.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you’re still running on HTTP, the most time-consuming task will be to </span><span><a data-target-href="https://https.cio.gov/faq/" href="https://https.cio.gov/faq/" rel="noreferrer nofollow noopener">migrate to HTTPS first</a></span><span>, and then adjust your build process to cater for HTTP/2 multiplexing and parallelization. For the rest of this article, I’ll assume that you’re either switching to or have already switched to HTTP/2.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-30"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption928804701063591072235032&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:214}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: 06-http2-front-end-performance-checklist-2020.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fcb35bb51-fa5a-4c78-a3d6-9ba6403ca41d%2F06-http2-front-end-performance-checklist-2020.png&amp;hmac=8vBMj64g%2Fn%2FDZy%2BXYCpffcP4M6ET6U2qf5R1sgmP8X8%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption928804701063591072235032"><div data-zone-id="caption928804701063591072235032" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>54% of all requests are served over HTTP/2 in late 2019, according to Web Almanac — just 4 years after its formal standardization.</i></span><span><i> </i></span><span><i>(Image</i></span><span><i> source: </i></span><span><a data-target-href="https://almanac.httparchive.org/en/2019/http2" href="https://almanac.httparchive.org/en/2019/http2" rel="noreferrer nofollow noopener"><i>Web Almanac</i></a></span><span><i>)</i></span><span><i> </i></span><span><i>(</i></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i>Large</i></a></span><span><a data-target-href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" href="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/cb35bb51-fa5a-4c78-a3d6-9ba6403ca41d/06-http2-front-end-performance-checklist-2020.png" rel="noreferrer nofollow noopener"><i> preview</i></a></span><span><i>)</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Properly deploy HTTP/2.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Again, </span><span><a data-target-href="https://www.youtube.com/watch?v=yURLTwZ3ehk" href="https://www.youtube.com/watch?v=yURLTwZ3ehk" rel="noreferrer nofollow noopener">serving assets over HTTP/2</a></span><span> </span><span><span>can benefit from</span></span><span> a partial overhaul of how you’ve been serving assets so far. You’ll need to find a fine balance between packaging modules and loading many small modules in parallel. At the end of the day, still </span><span><a data-target-href="http://alistapart.com/article/the-best-request-is-no-request-revisited" href="http://alistapart.com/article/the-best-request-is-no-request-revisited" rel="noreferrer nofollow noopener">the best request is no request</a></span><span>, however, the goal is to find a fine balance between quick first delivery of assets and caching.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>On the one hand, you might want to avoid concatenating assets altogether, instead breaking down your entire interface into many small modules, compressing them as a part of the build process and loading them in parallel. A change in one file won’t require the entire style sheet or JavaScript to be re-downloaded. It also </span><span><a data-target-href="https://css-tricks.com/musings-on-http2-and-bundling/" href="https://css-tricks.com/musings-on-http2-and-bundling/" rel="noreferrer nofollow noopener">minimizes parsing time</a></span><span> and keeps the payloads of individual pages low.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>On the other hand, </span><span><a data-target-href="http://engineering.khanacademy.org/posts/js-packaging-http2.htm" href="http://engineering.khanacademy.org/posts/js-packaging-http2.htm" rel="noreferrer nofollow noopener">packaging still matters</a></span><span>. By using many small scripts, </span><span><b>overall compression will suffer</b></span><span>. The compression of a large package will benefit from dictionary reuse, whereas small separate packages will not. There’s standard work to address that, but it’s far out for now. Secondly, browsers have </span><span><b>not yet been optimized</b></span><span> for such workflows. For example, Chrome will trigger </span><span><a data-target-href="https://www.chromium.org/developers/design-documents/inter-process-communication" href="https://www.chromium.org/developers/design-documents/inter-process-communication" rel="noreferrer nofollow noopener">inter-process communications</a></span><span> </span><span>(IPCs)</span><span> linear to the number of resources, so including hundreds of resources will have browser runtime costs.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-31"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/24d7fcb0-40c3-4ada-abb3-22b8524f9b2d/progressive-css-loading-opt.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/24d7fcb0-40c3-4ada-abb3-22b8524f9b2d/progressive-css-loading-opt.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption787619725501170267016908&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:291}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: progressive-css-loading-opt.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F24d7fcb0-40c3-4ada-abb3-22b8524f9b2d%2Fprogressive-css-loading-opt.png&amp;hmac=cP1JtuxiQJpDdKquKmbmKYOnw%2BQshYsX%2F7nfiMvW684%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/24d7fcb0-40c3-4ada-abb3-22b8524f9b2d/progressive-css-loading-opt.png" contenteditable="false"></span></span></span></span><div data-zone-type="caption" data-ace-inner-zone-content-wrapper-zone-id="caption787619725501170267016908"><div data-zone-id="caption787619725501170267016908" contenteditable="false"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>To achieve best results with HTTP/2, consider to </i></span><span><a data-target-href="https://jakearchibald.com/2016/link-in-body/" href="https://jakearchibald.com/2016/link-in-body/" rel="noreferrer nofollow noopener"><i>load CSS progressively</i></a></span><span><i>, as suggested by Chrome’s Jake Archibald.</i></span></p></div></div></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>You could get away with </span><span><a data-target-href="https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/" href="https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/" rel="noreferrer nofollow noopener">HTTP/2 connection coalescing</a></span><span>, which allows you to use domain sharding while benefiting from HTTP/2, but achieving this in practice </span><span><span>is difficult</span></span><span>, and in general, it’s not considered to be good practice.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>What to do? Well, if you’re running over HTTP/2, sending around </span><span><b>6–10 packages</b></span><span> seems like a decent compromise</span><span> </span><span>(and</span><span> isn’t too bad for legacy browsers). Experiment and measure to find the right balance for your website.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do your servers and CDNs support HTTP/2?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Different servers and CDNs support HTTP/2 differently. Use </span><span><a data-target-href="https://istlsfastyet.com/" href="https://istlsfastyet.com/" rel="noreferrer nofollow noopener">Is TLS Fast Yet?</a></span><span> to check your options, or quickly look up how your servers are performing and which features you can expect to be supported.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Do your servers and CDNs support HTTP over QUIC</b></span><span><b> </b></span><span><b>(HTTP/3)?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you feel adventurious or cutting-edge, you might want to check if your servers or CDNs support </span><span><a data-target-href="https://www.youtube.com/watch?v=idViw4anA6E" href="https://www.youtube.com/watch?v=idViw4anA6E" rel="noreferrer nofollow noopener">HTTP over QUIC</a></span><span> </span><span>(also</span><span> known as </span><span><i>HTTP/3</i></span><span>). While HTTP/2 has brought significant improvements, it doesn't perform particularly well in situations when network is slow or unreliable</span><span> </span><span>(significant</span><span> packet loss).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>To address the issue, Google has been working on </span><span><a data-target-href="https://www.chromium.org/quic" href="https://www.chromium.org/quic" rel="noreferrer nofollow noopener">Google QUIC</a></span><span>, which is the protocol used by Chrome for many Google services today. Google has then brought many of the learnings to IETF in 2015 which is </span><span><span><a data-target-href="https://tools.ietf.org/html/draft-ietf-quic-http" href="https://tools.ietf.org/html/draft-ietf-quic-http" rel="noreferrer nofollow noopener">being standardized now</a></span></span><span><span>.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>HTTP/3</span></span><span> is better and more bulletproof: with faster handshakes, better encryption, more reliable independent streams, more </span><span><span>encrypted</span></span><span>, and with 0-RTT if the client previously had a connection with the server. However, it's quite CPU intensive</span><span> </span><span>(2-3x</span><span> CPU usage for the same bandwidth), UDP stacks are unoptimized, and there are some unresolved issues with hardware and TLS layer.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-32"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2102708-944d-46ed-93d9-fa28cd76f232/is-tls-fast-yet-01.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2102708-944d-46ed-93d9-fa28cd76f232/is-tls-fast-yet-01.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption314003174927260556366469&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:292,&quot;thread-711525799348589852894423&quot;:&quot;false&quot;}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: is-tls-fast-yet-01.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2Fc2102708-944d-46ed-93d9-fa28cd76f232%2Fis-tls-fast-yet-01.png&amp;hmac=5rWkpHe3dNO8PfhcGP%2B8iYtURNjJEI%2FsejZMpffd3ig%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c2102708-944d-46ed-93d9-fa28cd76f232/is-tls-fast-yet-01.png" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Is OCSP stapling enabled?</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>By </span></span><span><span><a data-target-href="https://www.digicert.com/enabling-ocsp-stapling.htm" href="https://www.digicert.com/enabling-ocsp-stapling.htm" rel="noreferrer nofollow noopener">enabling OCSP stapling on your server</a></span></span><span><span>, you can speed up your TLS handshakes. The Online Certificate Status Protocol</span></span><span><span> </span></span><span><span>(OCSP)</span></span><span><span> was created as an alternative to the Certificate Revocation List</span></span><span><span> </span></span><span><span>(CRL)</span></span><span><span> protocol. Both protocols are used to check whether an SSL certificate has been revoked. However, the OCSP protocol does not require the browser to spend time downloading and then searching a list for certificate information, hence reducing the time required for a handshake.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><span><b>Have you adopted IPv6 yet?</b></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span>Because we’re </span></span><span><span><a data-target-href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion" href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion" rel="noreferrer nofollow noopener">running out of space with IPv4</a></span></span><span><span> and major mobile networks are adopting IPv6 rapidly</span></span><span><span> </span></span><span><span>(the</span></span><span><span> US has </span></span><span><span><a data-target-href="https://www.google.com/intl/en/ipv6/statistics.html#tab=ipv6-adoption&amp;tab=ipv6-adoption" href="https://www.google.com/intl/en/ipv6/statistics.html#tab=ipv6-adoption&amp;tab=ipv6-adoption" rel="noreferrer nofollow noopener">reached</a></span></span><span><span> a 50% IPv6 adoption threshold), it’s a good idea to </span></span><span><span><a data-target-href="https://www.paessler.com/blog/2016/04/08/monitoring-news/ask-the-expert-current-status-on-ipv6" href="https://www.paessler.com/blog/2016/04/08/monitoring-news/ask-the-expert-current-status-on-ipv6" rel="noreferrer nofollow noopener">update your DNS to IPv6</a></span></span><span><span> to stay bulletproof for the future. Just make sure that dual-stack support is provided across the network — it allows IPv6 and IPv4 to run simultaneously alongside each other. After all, IPv6 is not backwards-compatible. Also, </span></span><span><span><a data-target-href="https://www.cloudflare.com/ipv6/" href="https://www.cloudflare.com/ipv6/" rel="noreferrer nofollow noopener">studies show</a></span></span><span><span> that IPv6 made those websites 10 to 15% faster due to neighbor discovery</span></span><span><span> </span></span><span><span>(NDP)</span></span><span><span> and route optimization.</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Is HPACK compression in use?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If you’re using HTTP/2, double-check that your servers </span><span><a data-target-href="https://blog.cloudflare.com/hpack-the-silent-killer-feature-of-http-2/" href="https://blog.cloudflare.com/hpack-the-silent-killer-feature-of-http-2/" rel="noreferrer nofollow noopener">implement HPACK compression</a></span><span> for HTTP response headers to reduce unnecessary overhead. Because HTTP/2 servers are relatively new, they may not fully support the specification, with HPACK being an example. </span><span><a data-target-href="https://github.com/summerwind/h2spec" href="https://github.com/summerwind/h2spec" rel="noreferrer nofollow noopener">H2spec</a></span><span> is a great</span><span> </span><span>(if</span><span> very technically detailed) </span><span><span>tool to check that</span></span><span>. HPACK’s compression algorithm is quite </span><span><a data-target-href="https://www.mnot.net/blog/2018/11/27/header_compression" href="https://www.mnot.net/blog/2018/11/27/header_compression" rel="noreferrer nofollow noopener">impressive</a></span><span>, and </span><span><a data-target-href="https://www.keycdn.com/blog/http2-hpack-compression/" href="https://www.keycdn.com/blog/http2-hpack-compression/" rel="noreferrer nofollow noopener">it works</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Make sure the security on your server is bulletproof.</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Have you optimized your auditing workflow?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>It might not sound like a big deal, but having the right settings in place at your fingertips might save you quite a bit of time in testing. Consider using Tim Kadlec’s </span><span><a data-target-href="https://github.com/tkadlec/webpagetest-alfred-workflow" href="https://github.com/tkadlec/webpagetest-alfred-workflow" rel="noreferrer nofollow noopener">Alfred Workflow for WebPageTest</a></span><span> for submitting a test to the public instance of WebPageTest.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>And if you need to debug something quickly but your build process seems to be remarkably slow, keep in mind that</span><span> </span><span>"</span><span><a data-target-href="https://slack.engineering/keep-webpack-fast-a-field-guide-for-better-build-performance-f56a5995e8f1" href="https://slack.engineering/keep-webpack-fast-a-field-guide-for-better-build-performance-f56a5995e8f1" rel="noreferrer nofollow noopener">whitespace</a></span><span><a data-target-href="https://slack.engineering/keep-webpack-fast-a-field-guide-for-better-build-performance-f56a5995e8f1" href="https://slack.engineering/keep-webpack-fast-a-field-guide-for-better-build-performance-f56a5995e8f1" rel="noreferrer nofollow noopener"> removal and symbol mangling accounts for 95% of the size reduction</a></span><span> in minified code for most JavaScript — not elaborate code transforms. You can simply disable compression to speed up Uglify builds by 3 to 4 times."</span></p><div dir="auto" data-line-manager="gallery" contenteditable="false" id="editor-1-ace-line-812"><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-33"><span><span data-reactroot=""><div><p><span data-ace-gallery-urls="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/705ed9b1-cd4d-4231-b808-ce8c2e72e070/review-required-checks-pr.png" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/705ed9b1-cd4d-4231-b808-ce8c2e72e070/review-required-checks-pr.png&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption740196938301317599676526&quot;},&quot;naturalWidth&quot;:400,&quot;naturalHeight&quot;:230}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: review-required-checks-pr.png" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fres.cloudinary.com%2Findysigner%2Fimage%2Ffetch%2Ff_auto%2Cq_auto%2Fw_400%2Fhttps%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F705ed9b1-cd4d-4231-b808-ce8c2e72e070%2Freview-required-checks-pr.png&amp;hmac=Y4Vnkn4qUl%2FsaXou%2FVkdHma%2BjK3B3QP99mqVJCR2cCQ%3D" data-faketext="*" data-target-src="https://res.cloudinary.com/indysigner/image/fetch/f_auto,q_auto/w_400/https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/705ed9b1-cd4d-4231-b808-ce8c2e72e070/review-required-checks-pr.png" contenteditable="false"></span></span></span></span></span></span></span></p></div></span></span></span></span></p></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Have you tested in proxy browsers and legacy browsers?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Testing in Chrome and Firefox is not enough. Look into how your website works in proxy browsers and legacy browsers. UC Browser and Opera Mini, for instance, have a </span><span><a data-target-href="http://gs.statcounter.com/#mobile_browser-as-monthly-201511-201611" href="http://gs.statcounter.com/#mobile_browser-as-monthly-201511-201611" rel="noreferrer nofollow noopener">significant market share in Asia</a></span><span> </span><span>(up</span><span> to 35% in Asia). </span><span><a data-target-href="https://www.webworldwide.io/" href="https://www.webworldwide.io/" rel="noreferrer nofollow noopener">Measure average Internet speed</a></span><span> in your countries of interest to avoid big surprises down the road. Test with network throttling, and emulate a high-DPI device. </span><span><a data-target-href="https://www.browserstack.com/" href="https://www.browserstack.com/" rel="noreferrer nofollow noopener">BrowserStack</a></span><span> is fantastic, but test on real devices as well.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span data-preservation-id="magic-gallery-34"><span><span data-reactroot=""><p><span data-ace-gallery-urls="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/96fa3207-4fff-4b7b-bfa0-c115062d826a/demo-unit-perf-tests.gif" data-ace-gallery-clipboard-json="{&quot;items&quot;:[{&quot;type&quot;:&quot;image&quot;,&quot;url&quot;:&quot;https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/96fa3207-4fff-4b7b-bfa0-c115062d826a/demo-unit-perf-tests.gif&quot;,&quot;innerZones&quot;:{&quot;captionZone&quot;:&quot;caption533259437644876254509902&quot;},&quot;naturalWidth&quot;:725,&quot;naturalHeight&quot;:572}]}"><span>&nbsp;</span><span data-gallery-index="0"><span><span><span><span draggable="true"><span></span><span><img unselectable="true" alt="User-uploaded image: demo-unit-perf-tests.gif" src="https://paper.dropbox.com/ep/redirect/image?url=https%3A%2F%2Fcloud.netlifyusercontent.com%2Fassets%2F344dbf88-fdf9-42bb-adb4-46f01eedd629%2F96fa3207-4fff-4b7b-bfa0-c115062d826a%2Fdemo-unit-perf-tests.gif&amp;hmac=VYec8YMbw4ZmFvD8tyoGqNJEaK1Ggg7J1jUcutODxfo%3D" data-faketext="*" data-target-src="https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/96fa3207-4fff-4b7b-bfa0-c115062d826a/demo-unit-perf-tests.gif" contenteditable="false"></span></span></span></span></span></span></span></p></span></span></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><a data-target-href="https://github.com/loadimpact/k6" href="https://github.com/loadimpact/k6" rel="noreferrer nofollow noopener"><i>k6</i></a></span><span><i> allows you write unit tests-alike performance tests.</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Have you tested the accessibility </b></span><span><span><b>performance</b></span></span><span><b>?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>When the browser starts to load a page, it builds a DOM, and if there is an assistive technology like a screen reader running, it also creates an accessibility tree. The screen reader then has to query the accessibility tree to retrieve the information and make it available to the user — sometimes by default, and sometimes on demand. And sometimes it takes time.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>When talking about fast Time to Interactive, usually we mean an indicator of how </span><span><i>soon</i></span><span> a user can interact with the page by clicking or tapping on links and buttons. The context is slightly different with screen readers. In that case, fast Time to Interactive means how much </span><span><i>time</i></span><span> passes by until the screen reader can announce navigation on a given page and a screen reader user can actually hit keyboard to interact.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Léonie Watson has given an </span><span><a data-target-href="https://www.youtube.com/watch?v=n1sXj9oAXFU" href="https://www.youtube.com/watch?v=n1sXj9oAXFU" rel="noreferrer nofollow noopener">eye-opening talk on accessibility performance</a></span><span> and specifically the impact slow loading has on screen reader announcement delays. Screen readers are used to fast-paced announcements and quick navigation, and therefore might potentially be even less patient than sighted users.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Large pages and DOM manipulations with JavaScript will cause delays in screen reader announcements. A rather unexplored area that could use some attention and testing as screen readers are available on literally every platform</span><span> </span><span>(Jaws,</span><span> NVDA, Voiceover, Narrator, Orca).</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span><b>Is continuous monitoring set up?</b></span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Having a private instance of </span><span><a data-target-href="http://www.webpagetest.org/" href="http://www.webpagetest.org/" rel="noreferrer nofollow noopener">WebPagetest</a></span><span> is always beneficial for quick and unlimited tests. However, a continuous monitoring tool — like </span><span><a data-target-href="https://www.sitespeed.io/" href="https://www.sitespeed.io/" rel="noreferrer nofollow noopener">Sitespeed</a></span><span>, </span><span><a data-target-href="https://calibreapp.com/" href="https://calibreapp.com/" rel="noreferrer nofollow noopener">Calibre</a></span><span> and </span><span><a data-target-href="https://speedcurve.com/" href="https://speedcurve.com/" rel="noreferrer nofollow noopener">SpeedCurve</a></span><span> — with automatic alerts will give you a more detailed picture of your performance. Set your own user-timing marks to measure and monitor business-specific metrics. Also, consider adding </span><span><a data-target-href="https://calendar.perfplanet.com/2017/automating-web-performance-regression-alerts/" href="https://calendar.perfplanet.com/2017/automating-web-performance-regression-alerts/" rel="noreferrer nofollow noopener">automated performance regression alerts</a></span><span> to monitor changes over time.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Look into using RUM-solutions to monitor changes in performance over time. For automated unit-test-alike load testing tools, you can use </span><span><a data-target-href="https://github.com/loadimpact/k6" href="https://github.com/loadimpact/k6" rel="noreferrer nofollow noopener">k6</a></span><span> with its scripting API. Also, look into </span><span><a data-target-href="https://speedtracker.org/" href="https://speedtracker.org/" rel="noreferrer nofollow noopener">SpeedTracker</a></span><span>, </span><span><a data-target-href="https://github.com/GoogleChrome/lighthouse" href="https://github.com/GoogleChrome/lighthouse" rel="noreferrer nofollow noopener">Lighthouse</a></span><span> and </span><span><a data-target-href="https://calibreapp.com/" href="https://calibreapp.com/" rel="noreferrer nofollow noopener">Calibre</a></span><span>.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-833"><h2 data-usually-unique-id="171490466024696652659451"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Quick Wins</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>This list is quite comprehensive, and completing all of the optimizations might take quite a while. So, if you had just 1 hour to get significant improvements, what would you do? Let’s boil it all down to </span><span><b>12 low-hanging fruits</b></span><span>. Obviously, before you start and once you finish, measure results, including start rendering time and Speed Index on a 3G and cable connection.</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><div dir="auto" id="editor-1-ace-line-836"><ol start="1"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Measure the real world experience and set appropriate goals. A good goal to aim for is First Meaningful Paint &lt; 1 s, a Speed Index &lt; 3s, Time to Interactive &lt; 5s on slow 3G, for repeat visits, TTI &lt; 2s. Optimize for start rendering time and time-to-interactive.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-837"><ol start="2"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Prepare critical CSS for your main templates, and include it in the </span><span>&lt;head&gt;</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> of the page.</span><span> </span><span>(Your</span><span> budget is 14 KB). For CSS/JS, operate within a critical file size </span><span><a data-target-href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/" href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/" rel="noreferrer nofollow noopener">budget of max. 170KB gzipped</a></span><span> </span><span>(0.7MB</span><span> decompressed).</span></li></ol></div><div dir="auto" id="editor-1-ace-line-838"><ol start="3"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Trim, optimize, defer and lazy-load as many scripts as possible, check lightweight alternatives and limit the impact of third-party scripts.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-840"><ol start="5"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Experiment with regrouping your CSS rules and test in-body CSS.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-841"><ol start="6"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Add resource hints to speed up delivery with faster </span><span>dns-lookup</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>preconnect</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>prefetch</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>, </span><span>preload</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> and </span><span>prerender</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-842"><ol start="7"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Subset web fonts and load them asynchronously, and utilize </span><span>font-display</span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span> in CSS for fast first rendering.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-844"><ol start="9"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Check that HTTP cache headers and security headers are set properly.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-845"><ol start="10"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Enable Brotli compression on the server.</span><span> </span><span>(If</span><span> that’s not possible, don’t forget to enable Gzip compression.)</span></li></ol></div><div dir="auto" id="editor-1-ace-line-846"><ol start="11"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>If HTTP/2 is available, enable HPACK compression </span><span><span>and start monitoring mixed-content warnings. Enable OCSP stapling.</span></span></li></ol></div><div dir="auto" id="editor-1-ace-line-847"><ol start="12"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Cache assets such as fonts, styles, JavaScript and images in a service worker cache.</span></li></ol></div><div dir="auto" id="editor-1-ace-line-848"><ol start="13"><li><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Explore options to avoid rehydration, use progressive hydration and streaming server-side rendering for your SPA.</span></li></ol></div><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-850"><h2 data-usually-unique-id="355643435470144800807642"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Download The Checklist</span><span> </span><span>(PDF,</span><span> Apple Pages)</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>With this checklist in mind, you should be prepared for any kind of front-end performance project. Feel free to download the print-ready PDF of the checklist as well as an </span><span><b>editable Apple Pages document</b></span><span> to customize the checklist for your needs:</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p><p dir="auto" id="editor-1-ace-line-856"><h2 data-usually-unique-id="835836994896849993551169"><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Off We Go!</span></h2></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span>Some of the optimizations might be beyond the scope of your work or budget or might just be overkill given the legacy code you have to deal with. That’s fine! Use this checklist as a general</span><span> </span><span>(and</span><span> hopefully comprehensive) guide, and create your own list of issues that apply to your context. But most importantly, test and measure your own projects to identify issues before optimizing. Happy performance results in 2019, everyone!</span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><span contenteditable="false">&nbsp;</span></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><span><i>A huge thanks to Guy Podjarny, Yoav Weiss, Addy Osmani, Artem Denysov, Denys Mishunov, Ilya Pukhalski, Jeremy Wagner, Colin Bendell, Mark Zeman, Patrick Meenan, Leonardo Losoviz, Andy Davies, Rachel Andrew, Anselm Hannemann, Patrick Hamann, Andy Davies, Tim Kadlec, Rey Bango, Matthias Ott, Peter Bowyer, Phil Walton, Mariana Peralta, Philipp Tellis, Ryan Townsend, Ingrid Bergman, Mohamed Hussain S. H., Jacob Groß, Tim Swalling, Bob Visser, Kev Adamson, Adir Amsalem, Aleksey Kulikov and Rodney Rehm for reviewing this article, as well as our fantastic community which has shared techniques and lessons learned from its work in performance optimization for everybody to use. You are truly smashing!</i></span></p><p><span data-faketext="" data-contentcollector-ignore-space-at="end">​</span><span contenteditable="false" data-faketext=""></span><span data-faketext="" data-contentcollector-ignore-space-at="start">​</span><br></p></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>