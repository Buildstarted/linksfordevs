<!DOCTYPE html>
<html lang="en">
<head>
    <title>
F# 5 and F# tools update for June | .NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="F# 5 and F# tools update for June | .NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="Phillip CarterProgram Manager, .NET and LanguagesFollow"/>
    <meta property="og:description" content="We&#x2019;re excited to announce more updates to F# 5 today! We shipped an initial set of features with F# 5 preview 1, and they have all been stabilizing since that release including a updates from last month. Today, we&#x2019;re happy to announce some new language features,"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/dotnet/f-5-and-f-tools-update-for-june/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - F# 5 and F# tools update for June | .NET Blog</title>
<div class="readable">
        <h1>F# 5 and F# tools update for June | .NET Blog</h1>
            <div>by Phillip CarterProgram Manager, .NET and LanguagesFollow</div>
            <div>Reading time: 20-25 minutes</div>
        <div>Posted here: 27 Jun 2020</div>
        <p><a href="https://devblogs.microsoft.com/dotnet/f-5-and-f-tools-update-for-june/">https://devblogs.microsoft.com/dotnet/f-5-and-f-tools-update-for-june/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured"><div><div><div><div><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2018/10/Phillip-Carter-150x150.png" width="58" height="58" alt="Phillip Carter"></p><p>Phillip</p></div></div></div><p>June 26th, 2020</p><p>We’re excited to announce more updates to F# 5 today! We shipped an initial set of features with <a href="https://devblogs.microsoft.com/dotnet/announcing-f-5-preview-1/">F# 5 preview 1</a>, and they have all been stabilizing since that release including a <a href="https://devblogs.microsoft.com/dotnet/f-5-update-for-net-5-preview-4/">updates from last month</a>. Today, we’re happy to announce some new language features, a sneak peek at using F# in VSCode notebooks, and some F# tooling updates that will align with Visual Studio 2019 Update 16.7.</p><p>You can get the latest F# 5 in these ways</p><ul><li><a href="https://dotnet.microsoft.com/download/dotnet-core/5.0" target="_blank">Install the latest .NET 5 preview SDK</a></li><li><a href="https://github.com/dotnet/interactive/#jupyter-and-nteract" target="_blank">Install .NET for Jupyter/nteract</a></li><li><a href="https://github.com/dotnet/interactive/#visual-studio-code" target="_blank">Install .NET for VSCode Notebooks</a></li></ul><p>If you’re using Visual Studio on Windows, you’ll need both the .NET 5 preview SDK and <a href="https://visualstudio.microsoft.com/vs/preview/" target="_blank">Visual Studio Preview installed</a>.</p><h2>Using F# 5 preview</h2><p>You can use F# 5 preview via the <a href="https://dotnet.microsoft.com/download/dotnet-core/5.0" target="_blank">.NET 5 preview SDK</a>, or through the <a href="https://devblogs.microsoft.com/dotnet/net-interactive-is-here-net-notebooks-preview-2/">.NET and Jupyter Notebooks support</a>.</p><p>If you’re using the .NET 5 preview SDK, check out a <a href="https://github.com/cartermp/fs5preview" target="_blank">sample repository</a> showing off some of what you can do with F# 5. You can play with each of the features there instead of starting from scratch.</p><p>If you’d rather use F# 5 in your own project, you’ll need to add a <code><span>LangVersion</span></code> property with <code><span>preview</span></code> as the value. It should look something like this:</p><div id="gist101878572">
    <div>
      <div>
        <div>
  <div id="file-fs5-sample-proj-fsproj">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fs5-sample-proj-fsproj-L1" data-line-number="1"></td>
        <td id="file-fs5-sample-proj-fsproj-LC1">&lt;<span>Project</span> <span>Sdk</span>=<span><span>"</span>Microsoft.NET.Sdk<span>"</span></span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L2" data-line-number="2"></td>
        <td id="file-fs5-sample-proj-fsproj-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L3" data-line-number="3"></td>
        <td id="file-fs5-sample-proj-fsproj-LC3">  &lt;<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L4" data-line-number="4"></td>
        <td id="file-fs5-sample-proj-fsproj-LC4">    &lt;<span>OutputType</span>&gt;Exe&lt;/<span>OutputType</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L5" data-line-number="5"></td>
        <td id="file-fs5-sample-proj-fsproj-LC5">    &lt;<span>TargetFramework</span>&gt;net5.0&lt;/<span>TargetFramework</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L6" data-line-number="6"></td>
        <td id="file-fs5-sample-proj-fsproj-LC6">    &lt;<span>LangVersion</span>&gt;preview&lt;/<span>LangVersion</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L7" data-line-number="7"></td>
        <td id="file-fs5-sample-proj-fsproj-LC7">  &lt;/<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L8" data-line-number="8"></td>
        <td id="file-fs5-sample-proj-fsproj-LC8">
</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L9" data-line-number="9"></td>
        <td id="file-fs5-sample-proj-fsproj-LC9">  &lt;<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L10" data-line-number="10"></td>
        <td id="file-fs5-sample-proj-fsproj-LC10">    &lt;<span>Compile</span> <span>Include</span>=<span><span>"</span>Program.fs<span>"</span></span> /&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L11" data-line-number="11"></td>
        <td id="file-fs5-sample-proj-fsproj-LC11">  &lt;/<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L12" data-line-number="12"></td>
        <td id="file-fs5-sample-proj-fsproj-LC12">
</td>
      </tr>
      <tr>
        <td id="file-fs5-sample-proj-fsproj-L13" data-line-number="13"></td>
        <td id="file-fs5-sample-proj-fsproj-LC13">&lt;/<span>Project</span>&gt;</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>Alternatively, if you’re using Jupyter Notebooks and want a more interactive experience, check out a <a href="https://gist.github.com/cartermp/6b91c3561c6a5efca4288dca37c15edc" target="_blank">sample notebook</a> that shows the same features, but has a more interactive output.</p><h2>Improvements to nuget references for F# scripts</h2><p>Support for <code><span>#r "nuget:..."</span></code> has now been enhanced to support packages that pull in native dependencies. Prior to this update, some packages weren’t 100% usable if they needed to call into certain kinds of native code. This is now resolved. The following is an example of the <a href="https://www.nuget.org/packages/Flips/" target="_blank">Flips</a> library, which used to fail on the second-to-last line of code where it serialized a model. Now it works!</p><div id="gist103967169">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-1-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-1-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC1">#r <span><span>"</span>nuget: Flips, Version=1.2.3<span>"</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC3"><span>open</span> <span>System</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC4"><span>open</span> <span>Flips.<span>Domain</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC5"><span>open</span> <span>Flips.<span>Solve</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC6">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC7"><span>// Declare the parameters for our model</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC8"><span>let</span> <span>hamburgerProfit</span> <span>=</span> <span>1.50</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC9"><span>let</span> <span>hotdogProfit</span> <span>=</span> <span>1.20</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC10"><span>let</span> <span>hamburgerBuns</span> <span>=</span> <span>300.0</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L11" data-line-number="11"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC11"><span>let</span> <span>hotdogBuns</span> <span>=</span> <span>200.0</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L12" data-line-number="12"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC12"><span>let</span> <span>hamburgerWeight</span> <span>=</span> <span>0.5</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L13" data-line-number="13"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC13"><span>let</span> <span>hotdogWeight</span> <span>=</span> <span>0.4</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L14" data-line-number="14"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC14"><span>let</span> <span>maxTruckWeight</span> <span>=</span> <span>200.0</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L15" data-line-number="15"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC15">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L16" data-line-number="16"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC16"><span>// Create Decision Variable with a Lower Bound of 0.0 and an Upper Bound of Infinity</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L17" data-line-number="17"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC17"><span>let</span> <span>numberOfHamburgers</span> <span>=</span> Decision.createContinuous <span><span>"</span>NumberOfHamburgers<span>"</span></span> <span>0.0</span> infinity</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L18" data-line-number="18"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC18"><span>let</span> <span>numberOfHotdogs</span> <span>=</span> Decision.createContinuous <span><span>"</span>NumberOfHotDogs<span>"</span></span> <span>0.0</span> infinity</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L19" data-line-number="19"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC19">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L20" data-line-number="20"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC20"><span>// Create the Linear Expression for the objective</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L21" data-line-number="21"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC21"><span>let</span> <span>objectiveExpression</span> <span>=</span> hamburgerProfit <span>*</span> numberOfHamburgers <span>+</span> hotdogProfit <span>*</span> numberOfHotdogs</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L22" data-line-number="22"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC22">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L23" data-line-number="23"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC23"><span>// Create an Objective with the name "MaximizeRevenue" the goal of Maximizing</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L24" data-line-number="24"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC24"><span>// the Objective Expression</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L25" data-line-number="25"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC25"><span>let</span> <span>objective</span> <span>=</span> Objective.create <span><span>"</span>MaximizeRevenue<span>"</span></span> Maximize objectiveExpression</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L26" data-line-number="26"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC26">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L27" data-line-number="27"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC27"><span>// Create a Constraint for the max number of Hamburger considering the number of buns</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L28" data-line-number="28"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC28"><span>let</span> <span>maxHamburger</span> <span>=</span> Constraint.create <span><span>"</span>MaxHamburger<span>"</span></span> (numberOfHamburgers <span>&lt;==</span> hamburgerBuns)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L29" data-line-number="29"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC29"><span>// Create a Constraint for the max number of Hot Dogs considering the number of buns</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L30" data-line-number="30"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC30"><span>let</span> <span>maxHotDog</span> <span>=</span> Constraint.create <span><span>"</span>MaxHotDog<span>"</span></span> (numberOfHotdogs <span>&lt;==</span> hotdogBuns)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L31" data-line-number="31"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC31"><span>// Create a Constraint for the Max combined weight of Hamburgers and Hotdogs</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L32" data-line-number="32"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC32"><span>let</span> <span>maxWeight</span> <span>=</span> Constraint.create <span><span>"</span>MaxWeight<span>"</span></span> (numberOfHotdogs <span>*</span> hotdogWeight <span>+</span> numberOfHamburgers <span>*</span> hamburgerWeight <span>&lt;==</span> maxTruckWeight)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L33" data-line-number="33"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC33">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L34" data-line-number="34"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC34"><span>// Create a Model type and pipe it through the addition of the constraitns</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L35" data-line-number="35"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC35"><span>let</span> <span>model</span> <span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L36" data-line-number="36"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC36">    Model.create objective</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L37" data-line-number="37"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC37">    <span>|&gt;</span> Model.addConstraint maxHamburger</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L38" data-line-number="38"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC38">    <span>|&gt;</span> Model.addConstraint maxHotDog</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L39" data-line-number="39"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC39">    <span>|&gt;</span> Model.addConstraint maxWeight</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L40" data-line-number="40"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC40">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L41" data-line-number="41"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC41"><span>// Create a Settings type which tells the Solver which types of underlying solver to use,</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L42" data-line-number="42"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC42"><span>// the time alloted for solving, and whether to write an LP file to disk</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L43" data-line-number="43"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC43"><span>let</span> <span>settings</span> <span>=</span> <span>{</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L44" data-line-number="44"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC44">    SolverType <span>=</span> SolverType.CBC</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L45" data-line-number="45"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC45">    MaxDuration <span>=</span> <span>10_000</span>L</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L46" data-line-number="46"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC46">    WriteLPFile <span>=</span> None</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L47" data-line-number="47"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC47"><span>}</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L48" data-line-number="48"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC48">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L49" data-line-number="49"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC49"><span>// Call the `solve` function in the Solve module to evaluate the model</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L50" data-line-number="50"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC50"><span>let</span> <span>result</span> <span>=</span> solve settings model</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L51" data-line-number="51"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC51">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-1-fsx-L52" data-line-number="52"></td>
        <td id="file-fsharp5-net5p6-1-fsx-LC52">result</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>Additionally, we now support referencing packages where the order of <code><span>.</span><span>dll</span></code> references being passed to a compiler matters, such as <a href="https://www.nuget.org/packages/FParsec/" target="_blank">FParsec</a>. The following script now works:</p><div id="gist103967253">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-2-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-2-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC1">#r <span><span>"</span>nuget: FParsec<span>"</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC3"><span>open</span> <span>FParsec</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC4">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC5"><span>let</span> <span>test</span> <span>p</span> <span>str</span> <span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC6">    <span>match</span> run p str <span>with</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC7">    <span>|</span> Success(result, <span>_</span>, <span>_</span>)   <span>-&gt;</span> printfn <span><span>"</span>Success: %A<span>"</span></span> result</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC8">    <span>|</span> Failure(errorMsg, <span>_</span>, <span>_</span>) <span>-&gt;</span> printfn <span><span>"</span>Failure: %s<span>"</span></span> errorMsg</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC9">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-2-fsx-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-2-fsx-LC10">test pfloat <span><span>"</span>1.234<span>"</span></span></td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>This is also a significant improvement over the “old” way to use a package like this, where you needed to manually ensure the ordering of the <code><span>.</span><span>dlls</span></code> being passed to the compiler to be able to use it in scripts.</p><h2>Better interop with nullable value types</h2><p><a href="https://docs.microsoft.com/dotnet/api/system.nullable-1" target="_blank">Nullable (value) types</a> (called Nullable Types historically) have long been supported by F#, but interacting with them has traditionally been somewhat of a pain since you’d have to construct a <code><span>Nullable</span></code> or <code><span>Nullable</span><span>&lt;</span><span>SomeType</span><span>&gt;</span></code> wrapper every time you wanted to pass a value. Now the compiler will implicitly convert a value type into a <code><span>Nullable</span><span>&lt;</span><span>ThatValueType</span><span>&gt;</span></code> if the target type matches. The following code is now possible:</p><div id="gist103967439">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-3-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-3-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC1">#r <span><span>"</span>nuget: Microsoft.Data.Analysis<span>"</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC3"><span>open</span> <span>Microsoft.<span>Data</span>.<span>Analysis</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC4">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC5"><span>let</span> <span>dateTimes</span> <span>=</span> PrimitiveDataFrameColumn<span>&lt;</span>DateTime<span>&gt;</span>(<span><span>"</span>DateTimes<span>"</span></span>)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC6">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC7"><span>// The following line used to fail to compile</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC8">dateTimes.Append(DateTime.Parse(<span><span>"</span>2019/01/01<span>"</span></span>))</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC9">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC10"><span>// The previous line is now equivalent to this line</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L11" data-line-number="11"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC11">dateTimes.Append(Nullable<span>&lt;</span>DateTime<span>&gt;</span>(DateTime.Parse(<span><span>"</span>2019/01/01<span>"</span></span>)))</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L12" data-line-number="12"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC12">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-3-fsx-L13" data-line-number="13"></td>
        <td id="file-fsharp5-net5p6-3-fsx-LC13">dateTimes</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h2>Improved stack traces in F# async and other computation expressions</h2><p>Thanks to a contribution by <a href="https://github.com/NinoFloris" target="_blank">Nino Floris</a>, stack traces coming from caught exceptions in computation expressions (such as F# async) now retain more information. Consider the following code that uses the Ply library:</p><div id="gist103967896">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-5-fs">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-5-fs-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC1"><span>open</span> <span>FSharp.<span>Control</span>.<span>Tasks</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC2"><span>open</span> <span>System</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC3">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC4"><span>let</span> <span>origin</span> <span>()</span>: <span>unit</span> <span>=</span> invalidOp <span><span>"</span>Generic error message.<span>"</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC5"><span>let</span> <span>caller</span><span>()</span> <span>=</span> <span>task {</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC6">    <span>try</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC7">        <span>return</span> origin<span>()</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC8">    <span>with</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC9">    <span>|</span> <span>:</span>? ArgumentNullException <span>-&gt;</span> <span>return</span> <span>()</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC10">    <span>|</span> <span>:</span>? ArgumentException <span>-&gt;</span> <span>return</span> <span>()</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L11" data-line-number="11"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC11">    <span>// This isn't catching InvalidOperationException, so the stacktrace should stay the same</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L12" data-line-number="12"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC12"><span>}</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L13" data-line-number="13"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC13">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L14" data-line-number="14"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC14"><span>[&lt;EntryPoint&gt;]</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L15" data-line-number="15"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC15"><span>let</span> <span>main</span> <span>argv</span> <span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L16" data-line-number="16"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC16">    <span>try</span> caller<span>()</span>.GetAwaiter<span>()</span>.GetResult<span>()</span> <span>|&gt;</span> ignore</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L17" data-line-number="17"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC17">    <span>with</span> ex <span>-&gt;</span> Console.WriteLine(ex)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-5-fs-L18" data-line-number="18"></td>
        <td id="file-fsharp5-net5p6-5-fs-LC18">    <span>0</span></td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>Prior to this change, the <code><span>origin</span></code> function would not appear in stack traces without a workaround in the Ply library (and any other library where this is a scenario). Now it shows the full trace:</p><div id="gist103969947">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-9-txt">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-9-txt-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC1">System.InvalidOperationException: Generic error message.</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC2">   at Program.origin() in C:\Users\phcart\source\repos\ConsoleApp35\ConsoleApp35\Program.fs:line 5</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC3">   at Program.caller@8-1.Invoke(Unit unitVar) in C:\Users\phcart\source\repos\ConsoleApp35\ConsoleApp35\Program.fs:line 8</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC4">   at Ply.TplPrimitives.tryWith[u](FSharpFunc`2 continuation, FSharpFunc`2 catch)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC5">--- End of stack trace from previous location where exception was thrown ---</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC6">   at Ply.TplPrimitives.tryWith[u](FSharpFunc`2 continuation, FSharpFunc`2 catch)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC7">   at Program.caller@7.Invoke(Unit unitVar) in C:\Users\phcart\source\repos\ConsoleApp35\ConsoleApp35\Program.fs:line 7</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC8">   at Ply.TplPrimitives.ContinuationStateMachine`1.System-Runtime-CompilerServices-IAsyncStateMachine-MoveNext()</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC9">--- End of stack trace from previous location where exception was thrown ---</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-9-txt-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-9-txt-LC10">   at Program.main(String[] argv) in C:\Users\phcart\source\repos\ConsoleApp35\ConsoleApp35\Program.fs:line 17</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h2>What’s coming next</h2><p>There are some more immediate updates we’re making that we hope to release in the next set of .NET 5 previews, now that we’ve resolved some longstanding design issues. There isn’t a way to use these changes in .NET 5 yet, though some may appear in Jupyter/VSCode notebooks before the next .NET 5 release where they can be used anywhere.</p><h3>F# quotations improvements</h3><p>We’re finishing up a fundamental improvement to <a href="https://docs.microsoft.com/dotnet/fsharp/language-reference/code-quotations" target="_blank">F# Code Quotations</a>, a metaprogramming feature that lets you generate and manipulate an abstract syntax tree that represents the F# code.</p><p>Although powerful, F# Code Quotations have had a severe deficiency up until this point: they didn’t carry “trait calls” to sufficiently represent the actual semantics of the code being “quoted” if it relied on type constraints. A common way this could manifest itself was “allowing” code with arithmetic that would merely throw an exception at runtime.</p><p>These enhancements are particularly relevant to translating F# code to run on other runtimes like <a href="https://pytorch.org/" rel="noopener noreferrer" target="_blank">PyTorch </a>or <a href="https://onnx.ai/" rel="noopener noreferrer" target="_blank">ONNX</a>, a key scenario we’re exploring as a means to attract developers in more “analytical” domains to F# and .NET. We also anticipate numerous smaller issues that F# developers using F# Code Quotations today had to work around to be resolved, with the code they expect to “just work” actually live up to that phrase.</p><p>A trivial example of code that now just works is as follows:</p><div id="gist103967629">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-4-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-4-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC1"><span>open</span> <span>FSharp.<span>Linq</span>.<span>RuntimeHelpers</span></span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC3"><span>let</span> <span>eval</span> <span>q</span> <span>=</span> LeafExpressionConverter.EvaluateQuotation q</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC4">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC5"><span>let inline</span> <span>negate</span> <span>x</span> <span>=</span> <span>-</span>x</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC6"><span>// Crucially, 'negate' has the following signature:</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC7"><span>//</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC8"><span>// val inline negate: x: ^a -&gt;  ^a when  ^a : (static member ( ~- ) :  ^a -&gt;  ^a)</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC9"><span>//</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC10"><span>// This constraint is critical to F# type safety and is now retained in quotations</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L11" data-line-number="11"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC11">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L12" data-line-number="12"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC12">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-4-fsx-L13" data-line-number="13"></td>
        <td id="file-fsharp5-net5p6-4-fsx-LC13"><span>&lt;@</span> negate <span>1.0</span> <span>@&gt;</span>  <span>|&gt;</span> eval</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>This used to throw an exception. It now emits <code><span>-</span><span>1</span></code> as you would expect it to.</p><p>We’re also collaborating with the <a href="https://fable.io/" rel="noopener noreferrer" target="_blank">Fable</a> maintainers to ensure the underlying mechanism used to preserve constraints surfaces in the F# Compiler Service so that tools like Fable, WebSharper, etc. can accurately represent this sort of code without their own workarounds.</p><p>To read more about this feature (warning: there is a <em>lot</em> to read about), you can check out the <a href="https://github.com/fsharp/fslang-design/blob/master/preview/FS-1071-witness-passing-quotations.md" rel="noopener noreferrer" target="_blank">RFC that goes over the design in detail</a>.</p><h3>Finishing up nameof</h3><p>We’re finishing up our design changes for the <code><span>nameof</span></code> function and arrived at the following improvements:</p><ul><li>Change <code><span>nameof</span></code> on an operator to generate the symbol in source rather than the compiled name of the operator</li><li>Allow <code><span>nameof</span></code> in <code><span>match</span></code> expressions</li><li>Allowing taking the name of generic type parameters</li></ul><p>The last point was tricky from a design standpoint, and results in <code><span>nameof</span></code> actually having two forms:</p><ul><li><code><span>nameof expr</span></code></li><li><code><span>nameof</span><span>&lt;</span><span>'type-parameter&gt;</span></code> / <code><span>nameof</span><span>&lt;^</span><span>type</span><span>-</span><span>parameter</span><span>&gt;</span></code></li></ul><p>This second form for generic type parameters aligns <code><span>nameof</span></code> with the <code><span>typeof</span></code> and <code><span>typedefof</span></code> intrinsic functions that require a similar form. Here’s what the changes look like in source code:</p><div id="gist103968013">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-6-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-6-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC1">nameof(<span>+</span>) <span>// gives '+'</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC2">nameof op<span>_</span>Addition <span>// gives 'op_Addition'</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC3">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC4"><span>type</span> <span>C&lt;'TType&gt; </span><span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC5">    <span>member</span> <span>_.TypeName</span> <span>=</span> nameof<span>&lt;</span>'TType<span>&gt;</span> <span>// Nameof with a generic type parameter</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC6">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC7"><span>/// Simplified version of EventStore's API</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC8"><span>type</span> <span>RecordedEvent </span><span>=</span> <span>{</span> EventType<span>:</span> string<span>;</span> Data<span>:</span> byte<span>[]</span> <span>}</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L9" data-line-number="9"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC9">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L10" data-line-number="10"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC10"><span>/// My concrete type:</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L11" data-line-number="11"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC11"><span>type</span> <span>MyEvent </span><span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L12" data-line-number="12"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC12">    <span>|</span> A <span>of</span> AData</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L13" data-line-number="13"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC13">    <span>|</span> B <span>of</span> BData</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L14" data-line-number="14"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC14">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L15" data-line-number="15"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC15"><span>// use 'nameof' instead of the string literal in the match expression</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L16" data-line-number="16"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC16"><span>let</span> <span>deserialize</span> (<span>e</span>: <span>RecordedEvent</span>) : <span>MyEvent</span> <span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L17" data-line-number="17"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC17">    <span>match</span> e.EventType <span>with</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L18" data-line-number="18"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC18">    <span>|</span> nameof A <span>-&gt;</span> A (JsonSerializer.Deserialize<span>&lt;</span>AData<span>&gt;</span> e.Data)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L19" data-line-number="19"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC19">    <span>|</span> nameof B <span>-&gt;</span> B (JsonSerializer.Deserialize<span>&lt;</span>BData<span>&gt;</span> e.Data)</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-6-fsx-L20" data-line-number="20"></td>
        <td id="file-fsharp5-net5p6-6-fsx-LC20">    <span>|</span> t <span>-&gt;</span> failwithf <span><span>"</span>Invalid EventType: %s<span>"</span></span> t</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h3>Open type declarations</h3><p>We’re renaming the feature “open static classes” to “open type declarations”. This is because we’re making the following major changes:</p><ul><li>Syntax is now <code><span>open type </span><span>SomeType</span></code> (old syntax was <code><span>open </span><span>SomeType</span></code>)</li><li>You can now open <em>any</em> type, not just a static class like before, and expose static members and constants contained within it</li></ul><p>Code will now look like this:</p><div id="gist103968121">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-7-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-7-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-7-fsx-LC1"><span>open</span> <span>type</span> System.Math</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-7-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-7-fsx-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-7-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-7-fsx-LC3"><span>let</span> <span>x</span> <span>=</span> Min(<span>1.0</span>, <span>2.0</span>)</td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h3>Allow implementing the same interface at different generic instantiations</h3><p>As another example of F# open source community excellence, <a href="https://github.com/0x53A" target="_blank">Lukas Rieger</a> contributed an initial design and implementation of this feature. In a future F# 5 preview, code like this will be able to compile:</p><div id="gist103968173">
    <div>
      <div>
        <div>
  <div id="file-fsharp5-net5p6-8-fsx">
    

  <div itemprop="text">
      
<div><table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-fsharp5-net5p6-8-fsx-L1" data-line-number="1"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC1"><span>type</span> <span>IA&lt;'T&gt; </span><span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L2" data-line-number="2"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC2">    <span>abstract</span> <span>member</span> <span>Get</span> : <span>unit</span> -&gt; <span>obj</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L3" data-line-number="3"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC3">
</td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L4" data-line-number="4"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC4"><span>type</span> <span>MyClass</span><span>()</span> <span>=</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L5" data-line-number="5"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC5">    <span>interface</span> IA<span>&lt;</span>int<span>&gt;</span> <span>with</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L6" data-line-number="6"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC6">        <span>member</span> <span>x.Get</span><span>()</span> <span>=</span> upcast <span>1</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L7" data-line-number="7"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC7">    <span>interface</span> IA<span>&lt;</span>string<span>&gt;</span> <span>with</span></td>
      </tr>
      <tr>
        <td id="file-fsharp5-net5p6-8-fsx-L8" data-line-number="8"></td>
        <td id="file-fsharp5-net5p6-8-fsx-LC8">        <span>member</span> <span>x.Get</span><span>()</span> <span>=</span> upcast <span>2</span></td>
      </tr>
</tbody></table></div>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h2>F# and VSCode notebooks</h2><p>We’re really excited to share the first preview of F# support for VSCode notebooks. It uses the same kernel that powers F# support in Jupyter, except it plugs into a different system that enables a richer overall experience.</p><p>Here’s what it looks like when executing one of the code samples in this blog post:</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08.png" alt="Image Screen Shot 2020 06 26 at 08 22 08" width="1240" height="910" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08.png 1240w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08-300x220.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08-1024x751.png 1024w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.22.08-768x564.png 768w" sizes="(max-width: 1240px) 100vw, 1240px"> </a></p><p>It also supports inline charts (in this case via the XPlot.plotly package):</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/fsharp-charting-vscode-notebooks.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/fsharp-charting-vscode-notebooks.png" alt="Image fsharp charting vscode notebooks" width="997" height="690" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/fsharp-charting-vscode-notebooks.png 997w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/fsharp-charting-vscode-notebooks-300x208.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/fsharp-charting-vscode-notebooks-768x532.png 768w" sizes="(max-width: 997px) 100vw, 997px"> </a></p><p>And you can import/export Jupyter notebooks:</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-interactive-menu.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-interactive-menu.png" alt="Image net interactive menu" width="570" height="175" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-interactive-menu.png 570w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-interactive-menu-300x92.png 300w" sizes="(max-width: 570px) 100vw, 570px"> </a></p><p>It’s an early preview, but it supports some great features already</p><ul><li>Preliminary language service support</li><li>Inline charting and formatting of data</li><li>Compact data format (<code><span>.</span><span>dib</span></code>) that makes code review easy</li><li>Ability to import Jupyter notebooks (<code><span>.</span><span>ipynb</span></code>) and convert to a <code><span>.</span><span>dib</span></code></li><li>Ability to export a <code><span>.</span><span>dib</span></code> notebook as a Jupyter notebook (<code><span>.</span><span>ipynb</span></code>)</li></ul><p>Some features on the more immediate roadmap include:</p><ul><li>Tooltips</li><li>Better IntelliSense</li><li>Sharing F#-defined values with JavaScript cells</li><li>Sharing F#-defined values with C# cells</li></ul><p>We’d love to have you try it out and give us feedback on what you feel needs to be there. To do so, follow the <a href="https://github.com/dotnet/interactive/blob/master/src/dotnet-interactive-vscode/README.md" target="_blank">installation instructions</a>.</p><p>A great way to get started is to download the F# 5 Jupyter notebook and convert it like so:</p><ol><li>Download the file into a folder or existing workspace</li><li>Open the VSCode command palette</li><li>Type in <code><span>&gt;.</span><span>NET </span><span>Interactive</span></code></li><li>Select the option to import a Jupyter notebook</li><li>Name the new file <code><span>FILENAME</span><span>.</span><span>dib</span></code></li></ol><p>If something seems off, doesn’t work right, or a feature is missing, don’t be shy and <a href="https://github.com/dotnet/interactive/" rel="noopener noreferrer" target="_blank">file an issue on GitHub</a>! The team wants your feedback.</p><h2>.NET Framework projects default to SDK-style project files</h2><p>Starting with the Visual Studio 16.7 update, we’ve deprecated the older “long-form” F# projects. They will still load in Visual Studio today, but any new projects you create will only be .NET SDK-style moving forward. The project files now look like this:</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-fsharp-project.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-fsharp-project.png" alt="Image net fsharp project" width="692" height="316" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-fsharp-project.png 692w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/net-fsharp-project-300x137.png 300w" sizes="(max-width: 692px) 100vw, 692px"> </a></p><h3>IntelliSense improvements</h3><p>Keyword descriptions now show in completion lists:</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05.png" alt="Image Screen Shot 2020 06 26 at 08 29 05" width="1470" height="256" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05.png 1470w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05-300x52.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05-1024x178.png 1024w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.29.05-768x134.png 768w" sizes="(max-width: 1470px) 100vw, 1470px"> </a></p><p>Extended completion (showing completion for unimported types, an optional feature) now uses the same built-in UI that C# does. The completion window will dynamically resize depending on the size of the namespace to open:</p><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54.png" alt="Image Screen Shot 2020 06 26 at 08 28 54" width="1394" height="562" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54.png 1394w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54-300x121.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54-1024x413.png 1024w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2020/06/Screen-Shot-2020-06-26-at-08.28.54-768x310.png 768w" sizes="(max-width: 1394px) 100vw, 1394px"> </a></p><p>When typing at the top of a file (such as in an F# script), using a code fixer via IntelliSense to add a necessary <code><span>open</span></code> declaration will now work correctly.</p><p>Various improvements to error recovery and data shown in tooltips have been contributed by <a href="https://github.com/auduchinok" target="_blank">Eugene Auduchinok</a> and <a href="https://github.com/mcon" target="_blank">Matt Constable</a>.</p><h3>More performance improvements for Visual Studio tooling</h3><p>The performance work for larger codebases is always ongoing, focused primarily on elminating some unnecessary memory usage over time. <a href="https://github.com/forki/" target="_blank">Steffen Forkmann</a> also helped in this effort with some improvements.</p><p>Additionally, <a href="https://github.com/saul" target="_blank">Saul Rennison</a> contributed an improvement to CPU time spend building F# projects at design-time in Visual Studio, a process that happens ambiently and many times over a session. The bottleneck identified has had its CPU time reduced by ~90%. If you have a lot of F# projects in a solution, you may notice that various things feel “quicker” than before.</p><p>Thank you to everyone who has contributed! F# is continually improving because of your work.</p><h2>The continuing F# 5 journey</h2><p>We’re still not done with F# 5, and aside from what I mentioned earlier about what’s next, we’ll be focused on these three things:</p><ol><li>Continuing inclusion of language features when their design and implementations are stable</li><li>Continuing to improve the tooling performance for larger F# codebases</li><li>Making F# in Jupyter and Visual Studio Code Notebooks the best language for data science and analytical work</li></ol><p>Later this year we will “close down” on F# 5, marking a period of time where we focus on stabilization and planning for the next F# language version. We don’t have a date in mind for that year, but we’re thinking it will be near the end of the Summer. Until that point, If you’d like to follow along on a much more detailed level, you can check out the <a href="https://github.com/dotnet/fsharp" target="_blank">F# development repository</a>. We’re tracking the work we’re focused on with a GitHub issue roughly each month, and we encourage you all to provide input to the list of things and let us know what you think.</p><p>Cheers, and happy F# coding!</p></div></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>