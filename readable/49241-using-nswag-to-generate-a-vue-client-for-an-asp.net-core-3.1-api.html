<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Using NSwag to Generate a Vue Client for an ASP.NET Core 3.1 API -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div class="entry-content">
<p>This week we are going to add a <a href="https://vuejs.org/">Vue</a> project that will utilize the contacts API we created a few weeks ago using a client-generated by NSwag. This post is part of the revamp of the ASP.NET Core Basics repo that was kicked off when .NET Core 3.0 was released which is now targeting .NET Core 3.1. For details on how the associated samples got to their current point check out the following posts.</p>
<p><a href="https://elanderson.net/2019/10/swagger-openapi-with-nswag-and-asp-net-core-3/">Swagger/OpenAPI with NSwag and ASP.NET Core 3</a><br>
<a href="https://elanderson.net/2019/11/asp-net-core-3-add-entity-framework-core-to-existing-project/">ASP.NET Core 3: Add Entity Framework Core to Existing Project</a><br>
<a href="https://elanderson.net/2019/12/new-razor-pages-application-backed-with-an-api/">New Razor Pages Project Backed with an API</a><br>
<a href="https://elanderson.net/2019/12/using-nswag-to-generate-angular-client-for-an-asp-net-core-3-api/">Using NSwag to Generate Angular Client for an ASP.NET Core 3 API</a><br>
<a href="https://elanderson.net/2019/12/using-nswag-to-generate-react-client-for-an-asp-net-core-3-api/">Using NSwag to Generate React Client for an ASP.NET Core 3 API</a><br>
<a href="https://elanderson.net/2020/01/using-nswag-to-generate-blazor-server-client-for-an-asp-net-core-3-1-api/">Using NSwag to Generate Blazor Server Client for an ASP.NET Core 3.1 API</a></p>
<p>The sample code before any changes from this post can be found <a href="https://github.com/elanderson/ASP.NET-Core-Basics-Refresh/tree/0ac0e84ca999545e5cac7764a019b14ce76353c8">here</a>.</p>
<div><img class="wp-image-4566 size-medium alignnone jetpack-lazy-image" src="https://i0.wp.com/elanderson.net/wp-content/uploads/2020/01/555px-Vue.js_Logo_2.svg_.png?resize=300%2C260&amp;is-pending-load=1#038;ssl=1" alt width="300" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><img class="alignnone wp-image-4567 jetpack-lazy-image" src="https://i1.wp.com/elanderson.net/wp-content/uploads/2020/01/600px-.NET_Core_Logo.svg_.png?resize=260%2C260&amp;is-pending-load=1#038;ssl=1" alt width="260" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></div>
<h3>Create the Vue Project</h3>
<p>Unlike the rest of the projects in this series, there is no .NET CLI template from Microsoft that has Vue support so to crate the Vue project we will be using the <a href="https://cli.vuejs.org/guide/">Vue CLI</a>. Before getting started ensure you have <a href="https://www.npmjs.com/get-npm">npm installed</a>.</p>
<p>Install the Vue CLI using the following command from a command prompt.</p>
<pre class="EnlighterJSRAW">npm install -g @vue/cli</pre>
<p>Next, use the following command to start the project creation process using the Vue CLI. Keep in mind that the CLI creates a directory with the project name.</p>
<pre class="EnlighterJSRAW">vue create contacts-vue</pre>
<p>The above command kicks off a series of questions about the application. This sample is going to use TypeScript which means that the default can&#x2019;t be used so we need to select <strong>Manually select features</strong>.</p>
<p><img class="aligncenter size-full wp-image-4560 jetpack-lazy-image" src="https://i1.wp.com/elanderson.net/wp-content/uploads/2019/12/vueCliPresetManuallySelectFeaturesSelected.png?resize=219%2C67&amp;is-pending-load=1#038;ssl=1" alt width="219" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>For the next question, we need to select <strong>TypeScript</strong>. I also included the Router and Linter / Formatter. I also found out later in the process that Babel was needed so feel free to select it on this question.</p>
<p><img class="aligncenter size-full wp-image-4561 jetpack-lazy-image" src="https://i1.wp.com/elanderson.net/wp-content/uploads/2019/12/vueCliProjectFeaturesSelected.png?resize=395%2C197&amp;is-pending-load=1#038;ssl=1" alt width="395" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>The project creation process asked a bunch more questions that I basically took the defaults on. Here is a screenshot of all the questions and the options I used.</p>
<p><img class="aligncenter size-full wp-image-4562 jetpack-lazy-image" src="https://i0.wp.com/elanderson.net/wp-content/uploads/2019/12/vueCliRestOfQuestions.png?resize=525%2C121&amp;is-pending-load=1#038;ssl=1" alt width="525" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Now that the project is created if we need to change directories to the one created in the above process.</p>
<pre class="EnlighterJSRAW">cd contacts-vue</pre>
<p>Use the following command to run the new project.</p>
<pre class="EnlighterJSRAW">npm run serve</pre>
<h3>Use NSwagStudio to Generate an API Client</h3>
<p>NSwag provides multiple options for client generation including a CLI, code, or a Windows application. This post is going to use the Windows application which is called NSwagStudio. NSwagStudio can be downloaded and installed from <a href="http://rsuter.com/Projects/NSwagStudio/installer.php">here</a>.</p>
<p>Next, make sure your API is running and get the URL of its OpenAPI/Swagger specification URL. For example, using a local instance of the sample solution&#x2019;s Contacts API the URL is <strong>https://localhost:5001/swagger/v1/swagger.json</strong>. If you are using the Swagger UI you can find a link to your swagger.json under the API title.</p>
<p><img class="aligncenter size-full wp-image-4354 jetpack-lazy-image" src="https://i1.wp.com/elanderson.net/wp-content/uploads/2019/10/swaggerUiSpecLinkSelected.png?resize=339%2C202&amp;is-pending-load=1#038;ssl=1" alt width="339" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Now that we have the OpenAPI/Swager specification URL for the API switch over to NSwagStudio. The application will open with a new document ready to go. There are a few options we will need to set. First, select the <strong>OpenAPI/Swagger Specification</strong> tab and enter your API&#x2019;s specification URL in the&#xA0;<strong>Specification URL</strong> box.</p>
<p><img class="aligncenter size-full wp-image-4355 jetpack-lazy-image" src="https://i0.wp.com/elanderson.net/wp-content/uploads/2019/10/nswagStudioInputSetup.png?resize=525%2C342&amp;is-pending-load=1#038;ssl=1" alt width="525" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>In the&#xA0;<strong>Outputs</strong> section check the <strong>TypeScript Client</strong> checkbox and then select the <strong>TypeScript Client</strong> tab. There are a lot of options to play with, the highlighted options are the ones that are important for this sample. First, make sure <strong>Module name </strong>and <strong>Namespace </strong>are both empty. I&#x2019;m sure there is a way to get the client working with a module or namespace, but I didn&#x2019;t have any luck. &#xA0; For <strong>Template</strong>, we just need a <strong>Fetch</strong> based client. The final option that needs to be set is the <strong>Output file</strong> path and this is the location you want the generated file to be. I output to the Vue project directory under /src/apis/contactApi.ts. After all the options are set click <strong>Generate Files</strong>.</p>
<h3>Create UI and Use Generated Client</h3>
<p>Note that I haven&#x2019;t touch Vue in a long time so the actually UI bits may or may not be the &#x201C;proper&#x201D; way to do this stuff in Vue, but it should be understandable enough that you can see how the API client is used. As with the other post in this same vein, we are going to create a contact list that gets its data from an API.</p>
<p>First, we are going to create a new component for the contact list in the /src/component directory with the filename of <strong>ContactList.vue</strong> with the following contents. The lines specific to the usage of the NSwag generated client are highlighted.</p>
<pre class="EnlighterJSRAW">&lt;template&gt;
  &lt;div&gt;
    &lt;table class=&quot;table table-striped&quot; aria-labelledby=&quot;tabelLabel&quot;&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Name&lt;/th&gt;
          &lt;th&gt;Address&lt;/th&gt;
          &lt;th&gt;City&lt;/th&gt;
          &lt;th&gt;State&lt;/th&gt;
          &lt;th&gt;Postal Code&lt;/th&gt;
          &lt;th&gt;Phone&lt;/th&gt;
          &lt;th&gt;Email&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr v-for=&quot;contact in contacts&quot; v-bind:key=&quot;contact.id&quot;&gt;
          &lt;td&gt;{{contact.name}}&lt;/td&gt;
          &lt;td&gt;{{contact.address}}&lt;/td&gt;
          &lt;td&gt;{{contact.city}}&lt;/td&gt;
          &lt;td&gt;{{contact.state}}&lt;/td&gt;
          &lt;td&gt;{{contact.postalCode}}&lt;/td&gt;
          &lt;td&gt;{{contact.phone}}&lt;/td&gt;
          &lt;td&gt;{{contact.email}}&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
import { Component, Prop, Vue } from &apos;vue-property-decorator&apos;
import { ContactsClient, Contact } from &apos;../apis/contactsApi&apos;
@Component
export default class HelloWorld extends Vue {
  name: string = &apos;ContactList&apos;;
  contacts: Contact[] = [];
  private created () {
    let client = new ContactsClient()
    client.getContacts().then(data =&gt; (this.contacts = data))
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
&lt;/style&gt;</pre>
<p>As you can see from the <strong>created</strong> function above we are creating a new instance of the <strong>ContactsClient</strong> and calling its <strong>getContacts</strong> function and using the data we get back from the API to replace the <strong>contacts</strong> field with the results of the API call.</p>
<p>Next, we are going to create a <strong>ContactList.vue</strong> under the /src/views directory with the following code. This is basically a wrapper around the component we created above.</p>
<pre class="EnlighterJSRAW">&lt;template&gt;
  &lt;div&gt;
    &lt;ContactListComponent/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import ContactListComponent from &apos;@/components/ContacList&apos;
export default {
  name: &apos;contactList&apos;,
  components: {
    ContactListComponent
  }
}
&lt;/script&gt;</pre>
<p>Now that we have our view ready we need to add a link to the application&#x2019;s navigation so a user can get to the contact list. Open <strong>App.vue</strong> and a router link to the nav div for the contact list.</p>
<pre class="EnlighterJSRAW">&lt;div id=&quot;nav&quot;&gt;
    &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; |
    &lt;router-link to=&quot;/contactList&quot;&gt;Contacts&lt;/router-link&gt; |
    &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;
&lt;/div&gt;</pre>
<p>Now we need to add the new component to the routes for the application. Open <strong>index.ts</strong> in the /src/router directory and add an import for the contact list view.</p>
<pre class="EnlighterJSRAW">import ContactList from &apos;../views/ContactList.vue&apos;</pre>
<p>Finally, add the contact list to the routes array.</p>
<pre class="EnlighterJSRAW">const routes = [
  {
    path: &apos;/&apos;,
    name: &apos;home&apos;,
    component: Home
  },
  {
    path: &apos;/contactList&apos;,
    name: &apos;contactList&apos;,
    component: ContactList
  },
  {
    path: &apos;/about&apos;,
    name: &apos;about&apos;,
    // route level code-splitting
    // this generates a separate chunk (about.[hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: &quot;about&quot; */ &apos;../views/About.vue&apos;)
  }
]</pre>
<h3>Wrapping Up</h3>
<p>As always NSwag makes it very easy to create a client to interact with an API. Hopefully, this was useful even if my Vue code might not be idiomatic.</p>
<p>The sample projects after all the changes in this post can be found <a href="https://github.com/elanderson/ASP.NET-Core-Basics-Refresh/tree/a7e807f6fb4195caafb357c4b037d01cf41a33aa">here</a>.</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>