<!DOCTYPE html>
<html lang="en">
<head>
    <title>
How to set up Docker within Windows System for Linux (WSL2) on Windows 10 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="How to set up Docker within Windows System for Linux (WSL2) on Windows 10 - linksfor.dev(s)"/>
    <meta property="article:author" content="Scott Hanselman"/>
    <meta property="og:description" content="I&#x27;ve written about WSL2 and it&#x27;s glorious wonders many times. As its release (presumably) grows closer - as of this ..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.hanselman.com/blog/HowToSetUpDockerWithinWindowsSystemForLinuxWSL2OnWindows10.aspx"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - How to set up Docker within Windows System for Linux (WSL2) on Windows 10</title>
<div class="readable">
        <h1>How to set up Docker within Windows System for Linux (WSL2) on Windows 10</h1>
            <div>by Scott Hanselman</div>
            <div>Reading time: 7-8 minutes</div>
        <div>Posted here: 28 Feb 2020</div>
        <p><a href="https://www.hanselman.com/blog/HowToSetUpDockerWithinWindowsSystemForLinuxWSL2OnWindows10.aspx">https://www.hanselman.com/blog/HowToSetUpDockerWithinWindowsSystemForLinuxWSL2OnWindows10.aspx</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section>
	<section>
          
		<p><a href="https://www.hanselman.com/blog/YouCanNowDownloadTheNewOpenSourceWindowsTerminal.aspx"><img title="Magic" alt="Magic" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_205dcf48-e7fa-4620-8f13-4fbb7572df30_f7a750f0-2828-408e-bc3d-9839bddc91e1.png" width="300" height="203"></a>I've written about WSL2 and it's glorious wonders many times. As its release (presumably) grows closer - as of this writing it's on Windows Insiders Slow and Fast - I wanted to update a few posts. I've blogged about a few cool thing around WSL and Docker</p> <ul> <li><a href="https://www.hanselman.com/blog/DockerDesktopForWSL2IntegratesWindows10AndLinuxEvenCloser.aspx">Docker Desktop for WSL 2 integrates Windows 10 and Linux even closer</a>  </li><li><a href="https://www.hanselman.com/blog/RemoteDebuggingANETCoreLinuxAppInWSL2FromVisualStudioOnWindows.aspx">Remote Debugging a .NET Core Linux app in WSL2 from Visual Studio on Windows</a>  </li><li><a href="https://www.hanselman.com/blog/CoolWSLWindowsSubsystemForLinuxTipsAndTricksYouOrIDidntKnowWerePossible.aspx">Cool WSL (Windows Subsystem for Linux) tips and tricks you (or I) didn't know were possible</a>  </li><li><a href="https://www.hanselman.com/blog/RubyOnRailsOnWindowsIsNotJustPossibleItsFabulousUsingWSL2AndVSCode.aspx">Ruby on Rails on Windows is not just possible, it's fabulous using WSL2 and VS Code</a>  </li><li><a href="https://www.hanselman.com/blog/EasilyMoveWSLDistributionsBetweenWindows10MachinesWithImportAndExport.aspx">Easily move WSL distributions between Windows 10 machines with import and export!</a>  </li><li><a href="https://www.hanselman.com/blog/WhatsTheDifferenceBetweenAConsoleATerminalAndAShell.aspx">What's the difference between a console, a terminal, and a shell?</a></li></ul> <p>Here's a little <strong>HanselFAQ</strong> and some resources.</p> <h3>I want to run Linux on Windows</h3> <p>You can certainly use HyperV or VirtualBox and run a standard Virtual Machine. Download an ISO and mount it and run "a square within a square." It won't be seamlessly integrated within Windows - it'll be like the movie Inception - but it's time-tested.</p> <p>Better yet, install WSL or WSL2. It'll take 5-10 minutes tops if your Windows 10 is somewhat up to date.</p> <ul> <li><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10?WT.mc_id=-blog-scottha">How to install WSL on Windows 10</a>  <ul> <li>WSL doesn't include a Linux kernel. Its Linux file system access is kinda slow, but it accesses Windows files super fast. If you use Cygwin, you'll love this, because it's really Linux, just the kernel is emulated.</li></ul> </li><li><a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-install?WT.mc_id=-blog-scottha">How to install WSL2 on Windows 10</a>  <ul> <li>WSL2 ships an actual Linux kernel and its Linux file system is 5x-10x faster than WSL. WSL2 uses a tiny utility VM that expands contracts its memory and you can manage distros with the <a href="https://docs.microsoft.com/en-us/windows/wsl/reference?WT.mc_id=-blog-scottha">wsl command line</a>.  </li><li>Do all your development work inside here, while still using VS Code on Windows. <a href="https://www.hanselman.com/blog/RemoteDebuggingANETCoreLinuxAppInWSL2FromVisualStudioOnWindows.aspx">It's amazing</a>. Watch me set up a friend with WSL2, <a href="https://www.youtube.com/watch?v=j0PPcUUtHlw">LIVE on YouTube</a>.</li></ul></li></ul> <h3>I want to SSH into Linux stuff from Windows</h3> <p>There's 15 years of websites telling you to install Putty but you might not need it. <a href="https://devblogs.microsoft.com/commandline/openssh-in-windows-10/?WT.mc_id=-blog-scottha">OpenSSH has been shipping in Windows 10</a> for over two years. You can add them with Windows Features, or if you like, grab a release and <a href="https://github.com/PowerShell/Win32-OpenSSH/releases?WT.mc_id=-blog-scottha">put it on your PATH</a>.</p> <p>You can also do things like set up keys to <a href="https://www.hanselman.com/blog/HowToUseWindows10sBuiltinOpenSSHToAutomaticallySSHIntoARemoteLinuxMachine.aspx">use Windows 10's built-in OpenSSH to automatically SSH into a remote Linux machine</a>. I also like to <a href="https://www.hanselman.com/blog/HowToSetupSignedGitCommitsWithAYubiKeyNEOAndGPGAndKeybaseOnWindows.aspx">setup Signed Git Commits with a YubiKey NEO and GPG and Keybase on Windows</a>.</p> <h3>I need a better Terminal in Windows</h3> <p>The new <a href="https://www.hanselman.com/blog/HowToMakeAPrettyPromptInWindowsTerminalWithPowerlineNerdFontsCascadiaCodeWSLAndOhmyposh.aspx">Windows Terminal</a> is for you. Download <a href="https://www.microsoft.com/p/windows-terminal-preview/9n0dx20hk701?activetab=pivot:overviewtab&amp;WT.mc_id=-blog-scottha">Windows Terminal now</a> for free. It's open source. You can then run the Win64/Win32 ssh from above, or run any Linux distros SSH. Have fun. It's <a href="https://www.hanselman.com/blog/ItsTimeForYouToInstallWindowsTerminal.aspx">time</a>.</p> <blockquote> <p>NOTE: Have you already downloaded the Terminal, maybe a while back? Enough has changed that you should <a href="https://www.hanselman.com/blog/NowIsTheTimeToMakeAFreshNewWindowsTerminalProfilesjson.aspx">delete your profiles.json and start over</a>.</p></blockquote> <p>You can download the Windows Terminal from the <a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701?WT.mc_id=-blog-scottha">Microsoft Store</a> or from the <a href="https://github.com/microsoft/terminal/releases?WT.mc_id=-blog-scottha">GitHub releases page</a>. There's also an unofficial <a href="https://github.com/microsoft/terminal?WT.mc_id=-blog-scottha">Chocolatey release</a>. I recommend the Store version if possible.</p> <h3>My prompt and fonts are ugly</h3> <p>Make them <a href="https://www.hanselman.com/blog/HowToMakeAPrettyPromptInWindowsTerminalWithPowerlineNerdFontsCascadiaCodeWSLAndOhmyposh.aspx">pretty</a>. You deserve the best. Go get <a href="https://github.com/microsoft/cascadia-code/releases?WT.mc_id=-blog-scottha">Cascadia Code's CascadiaPL.ttf</a> and PowerLine and buckle up buttercup. Get a <a href="https://terminalsplash.com/">nice theme</a> and maybe a <a href="https://www.hanselman.com/blog/AddingReactionGifsForYourBuildSystemAndTheWindowsTerminal.aspx">GIF background</a>.</p><figure><a href="https://www.hanselman.com/blog/HowToMakeAPrettyPromptInWindowsTerminalWithPowerlineNerdFontsCascadiaCodeWSLAndOhmyposh.aspx"><img title="image_e2447ddd-416e-4036-9584-e728455e6d9d" alt="image_e2447ddd-416e-4036-9584-e728455e6d9d" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_e2447ddd-416e-4036-9584-e728455e6d9d_4fe6eed6-e8cf-48a3-9f9a-7a5a0ca515a7.png" width="999" height="308"></a></figure>  <h3>I want to use Docker on Windows and I want it to not suck</h3> <p>Surprise, it's actually awesome. You may have had some challenges with Docker a few years ago on Windows and gave up, but come back. There's been <a href="https://www.docker.com/blog/docker-hearts-wsl-2/">a huge (and fascinating) architecture of Docker on Windows</a>. It's very nicely <a href="https://www.hanselman.com/blog/DockerDesktopForWSL2IntegratesWindows10AndLinuxEvenCloser.aspx">integrated if you have WSL2</a>.</p> <p>If you have WSL2 set up nicely, then get <a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/">Docker Desktop WSL2.</a> This version of Docker for Windows uses WSL2 as its engine allowing you to share your docker context across Windows and Linux on the same machine! As the maker intended!</p> <blockquote> <p>WSL 2 introduces a significant architectural change as it is a full Linux kernel built by Microsoft, allowing Linux containers to run natively without emulation. With Docker Desktop running on WSL 2, users can leverage Linux workspaces and avoid having to maintain both Linux and Windows build scripts.</p></blockquote> <p>So that means</p> <ol> <li>Install Windows 10 Insider Preview build 19018 or higher  </li><li>Enable WSL 2 feature on Windows. For detailed instructions, refer to the <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-install?WT.mc_id=-blog-scottha">Microsoft documentation</a>.  </li><li>Download <a href="https://download.docker.com/win/edge/40807/Docker%20Desktop%20Installer.exe">Docker Desktop Edge 2.1.6.0</a> or a <a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/">later release</a>.</li></ol> <p>Ensure your default WSL instances is WSL2. You can do that with <code>wsl -l -v</code>, and then <code>wsl --set-version&nbsp; &lt;distro&gt; 2</code></p> <p>Then within Docker Desktop for Windows you've got two things to check. First, are you using WSL2 as your backend?</p><figure><img title="Docker for Windows | Enable WSL2" alt="Docker for Windows | Enable WSL2" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_ad34c5bd-6322-45ff-86e3-94ca7d2e9d1e.png" width="999" height="588"></figure>  <p>And then, the often missed setup, check under Resources | WSL Integration and tell Docker which WSL2 distros you want to use to access Docker. If you're paying attention you may notice that Docker Desktop tries to prompt you with a notification in Action Center but you might miss it.</p><figure><img title="Docker | Resources | WSL Integration" alt="Docker | Resources | WSL Integration" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_a68df51d-a06a-4e5b-80eb-2203ee350137.png" width="999" height="588"></figure>  <blockquote> <p>NOTE: If you used an early Tech Preview, you might have an extra now-vestigial Docker context named "wsl." You want to use the Default one, not the WSL one. </p></blockquote> <p>This isn't intuitive or obvious and you might get weird errors like these</p><pre>docker wsl open //./pipe/docker_wsl: The system cannot find the file specified.</pre>
<p>or</p><pre><code>error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_wsl/v1.40/images/json?all=1: open //./pipe/docker_wsl: The system cannot find the file specified.
</code></pre>
<p>You can see if you have an extra context from before like below. That "wsl" one is older (if you have it) and you want to use default in both Windows and WSL2.</p><pre>docker context ls<br>NAME                DESCRIPTION                               DOCKER ENDPOINT                  KUBERNETES ENDPOINT      <br>default *           Current DOCKER_HOST based configuration   npipe:////./pipe/docker_engine   https://kubernetes.docker<br>wsl                 Docker daemon hosted in WSL 2             npipe:////./pipe/docker_wsl</pre>
<p>I actually removed that one to avoid confusion with <code>docker context rm wsl</code>.</p>
<p>Here's Ubuntu on my Windows machine</p><figure><img title="Docker in Ubuntu" alt="Docker in Ubuntu" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_68b1842a-14a5-4eef-994d-ee4e34cce0c8.png" width="999" height="329"></figure> 
<p>And here's my Windows machine. Note that docker images in both instances returns the same list. They are the same Docker backend!</p><figure><img title="Docker on Windows" alt="Docker on Windows" src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/f8dbcb0aacb7_1221B/image_e547504e-93a3-49fc-ab35-e428517755f6.png" width="999" height="312"></figure> 
<h3>I want to code in VS Code on Windows but compile on Linux</h3>
<p>At this point once I've set things up I can go bananas. I can do Container-based development, where I use <a href="https://www.hanselman.com/blog/VisualStudioCodeRemoteDevelopmentMayChangeEverything.aspx">VS Code to run all my developer tools</a> and builds insider a container...maybe I never event install Go or PHP or .NET Core. It's all just <a href="https://code.visualstudio.com/docs/remote/containers?WT.mc_id=-blog-scottha">inside a container</a>.</p>
<p>Oh, by the way, please <a href="https://www.youtube.com/playlist?list=PL0M0zPgJ3HSdI26ZdgX-F8aAKnh9sq6on">Subscribe to my YouTube</a>! I talk a lot about this stuff over there.</p>
<hr>

<p><strong>Sponsor: </strong>Couchbase gives developers the power of SQL with the flexibility of JSON. <a href="https://hnsl.mn/3bRG10z">Start using it today for free</a> with technologies including Kubernetes, Java, .NET, JavaScript, Go, and Python. </p>


  
		
<div>
	<div>
	    <h4>About Scott</h4>
        <div>
			<p>Scott Hanselman is a former professor, former Chief Architect in finance, now speaker, consultant, father, diabetic, and Microsoft employee. He is a failed stand-up comic, a cornrower, and a book author.</p>
            <p><a href="https://facebook.com/shanselman"><img src="https://www.hanselman.com/images/icon-fb.png" alt="facebook"></a>
            <a href="https://twitter.com/shanselman"><img src="https://www.hanselman.com/images/icon-twitter.png" alt="twitter"></a>
            <a href="https://plus.google.com/108573066018819777334?rel=author" rel="author"><img src="https://www.hanselman.com/images/icon-gplus.png" alt="g+"></a>
            <a href="http://feeds.hanselman.com/ScottHanselman"><img src="https://www.hanselman.com/images/icon-rss.png" alt="subscribe"></a><br>
            <a href="http://hanselman.com/about">About</a> &nbsp; <a href="http://www.hanselman.com/newsletter">Newsletter</a>
        </p></div>
	</div> 
    
      <div>
          
         <p><strong>Hosting By</strong><br>
                <a rel="nofollow" href="https://sherweb.com/"><img alt="Dedicated Windows Server Hosting by SherWeb" width="125" height="125" src="https://images.sherweb.com/OrcsWeb/SherWebPoweredbyLogo_V-250x250Color.png"></a>
          </p>        

     </div>
</div>
  
  
		



		
		
		
		
		
  </section>
</section></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>