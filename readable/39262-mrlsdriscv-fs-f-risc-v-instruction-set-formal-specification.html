<!DOCTYPE html>
<html lang="en">
<head>
    <title>
mrLSD/riscv-fs: F# RISC-V Instruction Set formal specification -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>mrLSD/riscv-fs: F# RISC-V Instruction Set formal specification</h1><div><div id="" class="markdown-body entry-content p-5"><p><a href="https://travis-ci.org/mrLSD/riscv-fs" rel="nofollow"><img src="https://camo.githubusercontent.com/30955f74d5ba44438029df97a160aa7536f3d8d6/68747470733a2f2f7472617669732d63692e6f72672f6d724c53442f72697363762d66732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mrLSD/riscv-fs.svg?branch=master"></a></p><p><strong>Copyright Â© Evgeny Ukhanov</strong></p><p>This is a formal (and executable) specification for the
RISC-V ISA (Instruction Set Architecture), written in
<strong>F# purely functional style</strong>. We deliberately choose
an "<em>extremely elementary</em>" implementation of F# to make it
readable and usable by wide audience who do not know F# and who
do not plan to learn F#.</p><p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/d89e3afb30e100ce30826eefd5d371a95846828f/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f323437342f312a38385a6a2d514a713438495a54694347556f356d53512e706e67"><img src="https://camo.githubusercontent.com/d89e3afb30e100ce30826eefd5d371a95846828f/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f323437342f312a38385a6a2d514a713438495a54694347556f356d53512e706e67" alt="F# RISC-V ISA Formal Specification" data-canonical-src="https://miro.medium.com/max/2474/1*88Zj-QJq48IZTiCGUo5mSQ.png"></a></p><p>This is a work-in-progress, one of several similar concurrent
efforts within the <strong>ISA Formal Specification</strong>
Technical Group constituted by The RISC-V Foundation
(<a href="https://riscv.org" rel="nofollow">https://riscv.org</a>). We welcome your feedback, comments and suggestions.</p><h2><a id="user-content-content" class="anchor" aria-hidden="true" href="#content"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Content</h2><h2><a id="user-content-features--current-status" class="anchor" aria-hidden="true" href="#features--current-status"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features &amp; Current status</h2><h2><a id="user-content-reading-the-code" class="anchor" aria-hidden="true" href="#reading-the-code"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reading the code</h2><p>We expect that many people might use this as a reading
reference (whether or not they build and execute it) to
clarify their understanding of RISC-V ISA semantics.</p><p>Main part for reading Specification:</p><ul><li><p><strong>Decode*.fs</strong></p><p>Decodes contain decoders for specific instructions set
and notified with instruction/extension set symbol. For example <code>DecodeI.fs</code></p></li><li><p><strong>Execute*.fs</strong></p><p>Executes contain executions for specific instructions set
and notified with instruction/extension set symbol. For example <code>ExecuteI.fs</code></p></li><li><p>Utilities:</p><ul><li><p><code>CLI.fs</code></p><p>Contain helper function and types for
building effective CLI commands and options.</p></li><li><p><code>Bits.fs</code></p><p>Basic type specific functions for
manipulations with <code>bits</code>.</p></li><li><p><code>Run.fs</code></p><p>Basic Run flow - fetch, decode, execute,
logging execution flow.</p></li></ul></li><li><p>Architecture</p><ul><li><p><code>Arch.fs</code></p><p>Basic architecture types for RISC-V specification.</p></li><li><p><code>MachineState.fs</code></p><p>Basic type and functions described
RISC-V machine state.</p></li></ul></li><li><p>Main app</p><p>Main application to execute <strong>RISC-V simulator/emulator</strong>.</p></li><li><p>Test</p><ul><li><p><code>Test/*.fs</code></p><p>Contain unit-tests for instructions set
and extensions</p></li><li><p>Test/asm/</p><p>Contain Assembler test programs for
manual testing RISC-V CPI implementation.
It depend on <strong>risc-v toolchain</strong> and
it has special auto-build <code>Makefile</code>.</p></li></ul></li></ul><h2><a id="user-content-how-to-build-and-run-it-on-risc-v-binaries" class="anchor" aria-hidden="true" href="#how-to-build-and-run-it-on-risc-v-binaries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to build and run it on RISC-V binaries</h2><p>Application can be executed as a <em>sequential RISC-V simulator</em>
(sequential, one-instruction-at-a-time semantics), by
building and executing it as a standard F# program.</p><p>Supported OS:</p><p>Supported <strong>.NET SDK</strong>:</p><h3><a id="user-content-install-net-sdk" class="anchor" aria-hidden="true" href="#install-net-sdk"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install .NET SDK</h3><p>For Windows preferred way to use Visual Studio.</p><p>Other examples will be for Linux.
Please follow to instruction <a href="https://dotnet.microsoft.com/download" rel="nofollow">https://dotnet.microsoft.com/download</a></p><p>For Ubuntu:</p><pre><code>$ wget -q https://packages.microsoft.com/config/ubuntu/16.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
$ sudo dpkg -i packages-microsoft-prod.deb
$ sudo apt-get update
$ sudo apt-get install apt-transport-https
$ sudo apt-get update
$ sudo apt-get install dotnet-sdk-3.0
</code></pre><p>To check installation:</p><p><code>$ dotnet --version</code></p><p>will tell you what version of <code>dotnet</code> you have.</p><h3><a id="user-content-make-the-application-executable" class="anchor" aria-hidden="true" href="#make-the-application-executable"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make the application executable</h3><p>You can build the application executable with:</p><p><code>$ dotnet build</code></p><h3><a id="user-content-run-the-application-executable" class="anchor" aria-hidden="true" href="#run-the-application-executable"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run the application executable</h3><p>Most simple way to run immediately <code>run</code> (without
additional <code>build</code> command) to see command-line
options on the executable:</p><p><code>$ dotnet run -- --help</code></p><p>If you run the application without option:</p><p><code>$ dotnet run</code></p><p>you'll receive error message:</p><blockquote><p>Wrong parameters put --help to get more information</p></blockquote><p><strong>Example</strong> to run specific ISA with extensions, verbosity
output and ELF file for execution in RISC-V CPI simulator:</p><p><code>$ dotnet run -- -A rv32i -v myapp.elf</code></p><h2><a id="user-content-how-to-contribute" class="anchor" aria-hidden="true" href="#how-to-contribute"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to Contribute</h2><p>Please read file <a href="/mrLSD/riscv-fs/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></p><h2><a id="user-content-references" class="anchor" aria-hidden="true" href="#references"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h2><h2><a id="user-content-licence" class="anchor" aria-hidden="true" href="#licence"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Licence</h2><p><strong>MIT License</strong></p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>