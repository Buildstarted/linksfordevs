<!DOCTYPE html>
<html lang="en">
<head>
    <title>
.NET Internals Cookbook Part 9 &#x2014; Finalizers, queues, card tables and other GC stuff &#x2013; Random IT Utensils -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>.NET Internals Cookbook Part 9 — Finalizers, queues, card tables and other GC stuff – Random IT Utensils</h1><div><div class="post-content"><blockquote><p>This is the ninth part of the .NET Internals Cookbook series. For your convenience you can find other parts in the table of contents in <a href="https://blog.adamfurmanek.pl/2019/02/16/net-internals-cookbook-part-0/">Part 0 – Table of contents</a></p></blockquote><h6>59. What happens if an exception is thrown in finalizer? What about infinite loop?</h6><p>Let’s see this code:</p><div id="crayon-5e4201b0b24ee424558580" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Testing Foo");

            var foo = new Foo();
            foo = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();

            Console.WriteLine("Testing Bar");

            var bar = new Bar();
            bar = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();

            Console.WriteLine("Done!");
        }
    }
}

class Foo
{
    ~Foo()
    {
        Console.WriteLine("Good destructor");
    }
}

class Bar
{
    ~Bar()
    {
        Console.WriteLine("Destructor with exception");
        throw new Exception();
    }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-28">28</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-30">30</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-32">32</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-34">34</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-36">36</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-38">38</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-40">40</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24ee424558580-42">42</p><p class="crayon-num" data-line="crayon-5e4201b0b24ee424558580-43">43</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Testing Foo"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">WaitForPendingFinalizers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Testing Bar"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Bar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">WaitForPendingFinalizers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Done!"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-26"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-28"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-29"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">~</span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Good destructor"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-34"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-36"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-37"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">~</span><span class="crayon-e">Bar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Destructor with exception"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">throw</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Exception</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24ee424558580-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b24ee424558580-43"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>If you run it in <a href="https://dotnetfiddle.net/FiVjvw">dotnetfiddle</a> you get this:</p><div id="crayon-5e4201b0b24f8651155812" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">Run-time exception (line -1): Exception of type 'System.Exception' was thrown.

Stack Trace:

[System.Exception: Exception of type 'System.Exception' was thrown.]
   at Bar.Finalize()</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b24f8651155812-1"><span class="crayon-v">Run</span><span class="crayon-o">-</span><span class="crayon-e">time </span><span class="crayon-e">exception</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">line</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Exception </span><span class="crayon-e">of </span><span class="crayon-i">type</span><span class="crayon-h"></span><span class="crayon-s">'System.Exception'</span><span class="crayon-h"></span><span class="crayon-e">was </span><span class="crayon-v">thrown</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b24f8651155812-3"><span class="crayon-e">Stack </span><span class="crayon-v">Trace</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b24f8651155812-5"><span class="crayon-sy">[</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Exception</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Exception </span><span class="crayon-e">of </span><span class="crayon-i">type</span><span class="crayon-h"></span><span class="crayon-s">'System.Exception'</span><span class="crayon-h"></span><span class="crayon-e">was </span><span class="crayon-v">thrown</span><span class="crayon-sy">.</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24f8651155812-6"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">at </span><span class="crayon-v">Bar</span><span class="crayon-sy">.</span><span class="crayon-e">Finalize</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td></tr></tbody></table></div></div><p>So you don’t see anything printed out but you do see the exception.</p><p>If you try it in <a href="https://tio.run/##rVDLTsMwEDzHX2F6Sg/0ByoutKQXkCqB1APi4DpLasnxRl6n4aHy62EdpwUhygnJK8szu@PZ0XSpSfd9S8ZV8v6VAtRzIZyqgRqlQa49Vl7V4l1kTbu1RkttFdEJz5g4MhRU4GuPppR3yricgmfZxyepfEVTbozN2QIdoYXZxpsAt8ZBPnkACtFAgTiZzmNTrL3y8hlRXkkHXeTyxI1Ya@3wXC1mC7QWdBh5BjbKhAL9GlzJuoVxypo38JR/qf9h41r5Hza2XMkGc6PIiP2/jSU6uEgGDoLPQYgUOkfACX4MScQof5ldIZay5D18qwOmNb4psPuoMCxxRmF5GpadCTsJLxqaYNAlR2HnsRuSuDkS@fhJ338C">tio</a>:</p><div id="crayon-5e4201b0b24fd793882963" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">Testing Foo
Good destructor
Testing Bar
Done!
Destructor with exception

Microsoft (R) Build Engine version 16.0.0.0 for Mono
Copyright (C) Microsoft Corporation. All rights reserved.


Unhandled Exception:
System.Exception: Exception of type 'System.Exception' was thrown.
  at Bar.Finalize () [0x0000d] in &lt;fb493746d55b41718381c31bf369d391&gt;:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.Exception: Exception of type 'System.Exception' was thrown.
  at Bar.Finalize () [0x0000d] in &lt;fb493746d55b41718381c31bf369d391&gt;:0 

Real time: 2.698 s
User time: 2.186 s
Sys. time: 0.489 s
CPU share: 99.17 %
Exit code: 255</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b24fd793882963-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b24fd793882963-21">21</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-1"><span class="crayon-e">Testing </span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-2"><span class="crayon-e">Good </span><span class="crayon-e">destructor</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-3"><span class="crayon-e">Testing </span><span class="crayon-e">Bar</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-4"><span class="crayon-v">Done</span><span class="crayon-o">!</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-5"><span class="crayon-e">Destructor </span><span class="crayon-e">with </span><span class="crayon-e">exception</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-7"><span class="crayon-e">Microsoft</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">Build </span><span class="crayon-e">Engine </span><span class="crayon-i">version</span><span class="crayon-h"></span><span class="crayon-cn">16.0.0.0</span><span class="crayon-h"></span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-e">Mono</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-8"><span class="crayon-e">Copyright</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">C</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">Microsoft </span><span class="crayon-v">Corporation</span><span class="crayon-sy">.</span><span class="crayon-h"></span><span class="crayon-e">All </span><span class="crayon-e">rights </span><span class="crayon-v">reserved</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-11"><span class="crayon-e">Unhandled </span><span class="crayon-v">Exception</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-12"><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Exception</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Exception </span><span class="crayon-e">of </span><span class="crayon-i">type</span><span class="crayon-h"></span><span class="crayon-s">'System.Exception'</span><span class="crayon-h"></span><span class="crayon-e">was </span><span class="crayon-v">thrown</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-13"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">at </span><span class="crayon-v">Bar</span><span class="crayon-sy">.</span><span class="crayon-e">Finalize</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-cn">0x0000d</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-st">in</span><span class="crayon-h"></span><span class="crayon-o">&lt;</span><span class="crayon-v">fb493746d55b41718381c31bf369d391</span><span class="crayon-o">&gt;</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-14"><span class="crayon-sy">[</span><span class="crayon-v">ERROR</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-e">FATAL </span><span class="crayon-e">UNHANDLED </span><span class="crayon-v">EXCEPTION</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Exception</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Exception </span><span class="crayon-e">of </span><span class="crayon-i">type</span><span class="crayon-h"></span><span class="crayon-s">'System.Exception'</span><span class="crayon-h"></span><span class="crayon-e">was </span><span class="crayon-v">thrown</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">at </span><span class="crayon-v">Bar</span><span class="crayon-sy">.</span><span class="crayon-e">Finalize</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-cn">0x0000d</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-st">in</span><span class="crayon-h"></span><span class="crayon-o">&lt;</span><span class="crayon-v">fb493746d55b41718381c31bf369d391</span><span class="crayon-o">&gt;</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-17"><span class="crayon-e">Real </span><span class="crayon-v">time</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">2.698</span><span class="crayon-h"></span><span class="crayon-i">s</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-18"><span class="crayon-e">User </span><span class="crayon-v">time</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">2.186</span><span class="crayon-h"></span><span class="crayon-i">s</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-19"><span class="crayon-v">Sys</span><span class="crayon-sy">.</span><span class="crayon-h"></span><span class="crayon-v">time</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0.489</span><span class="crayon-h"></span><span class="crayon-i">s</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b24fd793882963-20"><span class="crayon-e">CPU </span><span class="crayon-v">share</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">99.17</span><span class="crayon-h"></span><span class="crayon-o">%</span></p><p class="crayon-line" id="crayon-5e4201b0b24fd793882963-21"><span class="crayon-e">Exit </span><span class="crayon-v">code</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">255</span></p></div></td></tr></tbody></table></div></div><p>So you see all lines and exception thrown out of bands.</p><p>And if I try it locally with VS 2017:</p><div id="crayon-5e4201b0b2500834324760" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">Testing Foo
Good destructor
Testing Bar
Destructor with exception

Unhandled Exception: System.Exception: Exception of type 'System.Exception' was thrown.
   at Bar.Finalize() in C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs:line 41
Press any key to continue . . .</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2500834324760-1"><span class="crayon-e">Testing </span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2500834324760-2"><span class="crayon-e">Good </span><span class="crayon-e">destructor</span></p><p class="crayon-line" id="crayon-5e4201b0b2500834324760-3"><span class="crayon-e">Testing </span><span class="crayon-e">Bar</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2500834324760-4"><span class="crayon-e">Destructor </span><span class="crayon-e">with </span><span class="crayon-e">exception</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2500834324760-6"><span class="crayon-e">Unhandled </span><span class="crayon-v">Exception</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Exception</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Exception </span><span class="crayon-e">of </span><span class="crayon-i">type</span><span class="crayon-h"></span><span class="crayon-s">'System.Exception'</span><span class="crayon-h"></span><span class="crayon-e">was </span><span class="crayon-v">thrown</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b2500834324760-7"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">at </span><span class="crayon-v">Bar</span><span class="crayon-sy">.</span><span class="crayon-e">Finalize</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-st">in</span><span class="crayon-h"></span><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">cs</span><span class="crayon-o">:</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">41</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2500834324760-8"><span class="crayon-e">Press </span><span class="crayon-e">any </span><span class="crayon-e">key </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-st">continue</span><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-h"></span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><p>So it looks like your mileage may vary. However, it kills the application, generally, as specified <a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.finalize?redirectedfrom=MSDN&amp;view=netframework-4.7.2#System_Object_Finalize">in documentation</a>:</p><div id="crayon-5e4201b0b2503051858813" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">If Finalize or an override of Finalize throws an exception, and the runtime is not hosted by an application that overrides the default policy, the runtime terminates the process and no active try/finally blocks or finalizers are executed. This behavior ensures process integrity if the finalizer cannot free or destroy resources.</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><p class="crayon-num" data-line="crayon-5e4201b0b2503051858813-1">1</p></td><td class="crayon-code"><p class="crayon-line" id="crayon-5e4201b0b2503051858813-1"><span class="crayon-st">If</span><span class="crayon-h"></span><span class="crayon-e">Finalize </span><span class="crayon-st">or</span><span class="crayon-h"></span><span class="crayon-e">an </span><span class="crayon-e">override </span><span class="crayon-e">of </span><span class="crayon-e">Finalize </span><span class="crayon-e">throws </span><span class="crayon-e">an </span><span class="crayon-v">exception</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-st">and</span><span class="crayon-h"></span><span class="crayon-e">the </span><span class="crayon-e">runtime </span><span class="crayon-st">is</span><span class="crayon-h"></span><span class="crayon-st">not</span><span class="crayon-h"></span><span class="crayon-e">hosted </span><span class="crayon-e">by </span><span class="crayon-e">an </span><span class="crayon-e">application </span><span class="crayon-e">that </span><span class="crayon-e">overrides </span><span class="crayon-e">the </span><span class="crayon-st">default</span><span class="crayon-h"></span><span class="crayon-v">policy</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-e">the </span><span class="crayon-e">runtime </span><span class="crayon-e">terminates </span><span class="crayon-e">the </span><span class="crayon-e">process </span><span class="crayon-st">and</span><span class="crayon-h"></span><span class="crayon-e">no </span><span class="crayon-e">active </span><span class="crayon-st">try</span><span class="crayon-o">/</span><span class="crayon-st">finally</span><span class="crayon-h"></span><span class="crayon-e">blocks </span><span class="crayon-st">or</span><span class="crayon-h"></span><span class="crayon-e">finalizers </span><span class="crayon-e">are </span><span class="crayon-v">executed</span><span class="crayon-sy">.</span><span class="crayon-h"></span><span class="crayon-r">This</span><span class="crayon-h"></span><span class="crayon-e">behavior </span><span class="crayon-e">ensures </span><span class="crayon-e">process </span><span class="crayon-e">integrity </span><span class="crayon-st">if</span><span class="crayon-h"></span><span class="crayon-e">the </span><span class="crayon-e">finalizer </span><span class="crayon-e">cannot </span><span class="crayon-e">free </span><span class="crayon-st">or</span><span class="crayon-h"></span><span class="crayon-e">destroy </span><span class="crayon-v">resources</span><span class="crayon-sy">.</span></p></td></tr></tbody></table></div></div><p>Since finalizers are run on a separate thread, you get <a href="https://dotnetfiddle.net/EDWMjL">deadlock with infinite loop</a>:</p><div id="crayon-5e4201b0b2506024053079" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
	public class Program
	{
		public static void Main(string[] args)
		{
			Console.WriteLine("Testing Foo");
			
			var foo = new Foo();
			foo = null;
			GC.Collect();
			GC.WaitForPendingFinalizers();
			
			Console.WriteLine("Testing Bar");
			
			var bar = new Bar();
			bar = null;
			GC.Collect();
			GC.WaitForPendingFinalizers();
			
			Console.WriteLine("Done!");
		}
	}
}

class Foo{
	~Foo(){
		Console.WriteLine("Good destructor");
	}
}

class Bar{
	~Bar(){
		Console.WriteLine("Destructor with infinite loop");
		while(true){}
	}
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-28">28</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-30">30</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-32">32</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-34">34</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-36">36</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2506024053079-38">38</p><p class="crayon-num" data-line="crayon-5e4201b0b2506024053079-39">39</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2506024053079-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-5"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-6"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-7"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-8"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-9"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Testing Foo"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-11"><span class="crayon-h"></span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-12"><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-13"><span class="crayon-h"></span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-14"><span class="crayon-h"></span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">WaitForPendingFinalizers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-16"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Testing Bar"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-18"><span class="crayon-h"></span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Bar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-19"><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-20"><span class="crayon-h"></span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-21"><span class="crayon-h"></span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">WaitForPendingFinalizers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-23"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Done!"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-24"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-25"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-26"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-28"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-29"><span class="crayon-h"></span><span class="crayon-o">~</span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-30"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Good destructor"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-31"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-32"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-34"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-35"><span class="crayon-h"></span><span class="crayon-o">~</span><span class="crayon-e">Bar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-36"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Destructor with infinite loop"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-37"><span class="crayon-h"></span><span class="crayon-st">while</span><span class="crayon-sy">(</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2506024053079-38"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b2506024053079-39"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b2509728731088" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">Testing Foo
Good destructor
Testing Bar
Destructor with infinite loop
Fatal Error: Execution time limit was exceeded</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2509728731088-1"><span class="crayon-e">Testing </span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2509728731088-2"><span class="crayon-e">Good </span><span class="crayon-e">destructor</span></p><p class="crayon-line" id="crayon-5e4201b0b2509728731088-3"><span class="crayon-e">Testing </span><span class="crayon-e">Bar</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2509728731088-4"><span class="crayon-e">Destructor </span><span class="crayon-e">with </span><span class="crayon-e">infinite </span><span class="crayon-e">loop</span></p><p class="crayon-line" id="crayon-5e4201b0b2509728731088-5"><span class="crayon-e">Fatal </span><span class="crayon-v">Error</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Execution </span><span class="crayon-e">time </span><span class="crayon-e">limit </span><span class="crayon-e">was </span><span class="crayon-v">exceeded</span></p></div></td></tr></tbody></table></div></div><h6>60. What is finalization queue? What is f-reachable queue?</h6><p>When your object has a destructor (finalizer), it is stored in finalization queue when allocated. Later, when the object is not reachable anymore and GC detects that, it puts it to f-reachable queue. Finalizers are not called directly, they are called on a separate thread which gets the objects to cleanup from f-reachable queue.</p><p>Let’s take this code:</p><div id="crayon-5e4201b0b250d662804694" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Allocating");
            var foo = new Foo();
            Console.ReadLine();

            Console.WriteLine("Collecting");
            foo = null;
            GC.Collect();
            Console.ReadLine();

            Console.WriteLine("Finalizing");
            GC.WaitForPendingFinalizers();
            Console.ReadLine();

            Console.WriteLine("Done!");
        }
    }
}

class Foo
{
    ~Foo()
    {
        Console.WriteLine("Good destructor");
    }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-28">28</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-30">30</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b250d662804694-32">32</p><p class="crayon-num" data-line="crayon-5e4201b0b250d662804694-33">33</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b250d662804694-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Allocating"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Collecting"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Finalizing"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">WaitForPendingFinalizers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Done!"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-25"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-27"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-28"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">~</span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"Good destructor"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b250d662804694-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b250d662804694-33"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>Let’s start it and attach debugger on first line read:</p><div id="crayon-5e4201b0b2512085842939" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; !finalizequeue
SyncBlocks to be cleaned up: 0
Free-Threaded Interfaces to be released: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 8 finalizable objects (0063a018-&gt;0063a038)
generation 1 has 0 finalizable objects (0063a018-&gt;0063a018)
generation 2 has 0 finalizable objects (0063a018-&gt;0063a018)
Ready for finalization 0 objects (0063a038-&gt;0063a038)
Statistics for all finalizable objects (including all objects ready for finalization):
      MT    Count    TotalSize Class Name
02484dc0        1           12 Foo
7253c188        1           20 Microsoft.Win32.SafeHandles.SafeFileMappingHandle
7253c138        1           20 Microsoft.Win32.SafeHandles.SafeViewOfFileHandle
7252dde8        1           20 Microsoft.Win32.SafeHandles.SafePEFileHandle
72531888        2           40 Microsoft.Win32.SafeHandles.SafeFileHandle
725312e0        1           44 System.Threading.ReaderWriterLock
7252f734        1           52 System.Threading.Thread
Total 8 objects</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b2512085842939-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2512085842939-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2512085842939-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-e">finalizequeue</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-2"><span class="crayon-e">SyncBlocks </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-e">cleaned </span><span class="crayon-v">up</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-3"><span class="crayon-v">Free</span><span class="crayon-o">-</span><span class="crayon-e">Threaded </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-4"><span class="crayon-e">MTA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-5"><span class="crayon-e">STA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-6"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-7"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a038</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-8"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a018</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-9"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">2</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a018</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-10"><span class="crayon-e">Ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-i">finalization</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a038</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a038</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-11"><span class="crayon-e">Statistics </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-e">all </span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-e">including </span><span class="crayon-e">all </span><span class="crayon-e">objects </span><span class="crayon-e">ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-v">finalization</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MT&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Count&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TotalSize </span><span class="crayon-t">Class</span><span class="crayon-h"></span><span class="crayon-i">Name</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-13"><span class="crayon-cn">02484dc0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">12</span><span class="crayon-h"></span><span class="crayon-i">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-14"><span class="crayon-cn">7253c188</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeFileMappingHandle</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-15"><span class="crayon-cn">7253c138</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeViewOfFileHandle</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-16"><span class="crayon-cn">7252dde8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafePEFileHandle</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-17"><span class="crayon-cn">72531888</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">40</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeFileHandle</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-18"><span class="crayon-cn">725312e0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">44</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Threading</span><span class="crayon-sy">.</span><span class="crayon-i">ReaderWriterLock</span></p><p class="crayon-line" id="crayon-5e4201b0b2512085842939-19"><span class="crayon-cn">7252f734</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">52</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Threading</span><span class="crayon-sy">.</span><span class="crayon-e">Thread</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2512085842939-20"><span class="crayon-i">Total</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-v">objects</span></p></div></td></tr></tbody></table></div></div><p>So we can see that there is a <code>Foo</code> object in finalization queue. We can see its roots:</p><div id="crayon-5e4201b0b2516845918269" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; !dumpheap -type Foo
 Address       MT     Size
02684170 02484dc0       12     

Statistics:
      MT    Count    TotalSize Class Name
02484dc0        1           12 Foo
Total 1 objects</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2516845918269-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">dumpheap</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-e">type </span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2516845918269-2"><span class="crayon-e"></span><span class="crayon-e">Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">MT&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">Size</span></p><p class="crayon-line" id="crayon-5e4201b0b2516845918269-3"><span class="crayon-cn">02684170</span><span class="crayon-h"></span><span class="crayon-cn">02484dc0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">12</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="crayon-line" id="crayon-5e4201b0b2516845918269-5"><span class="crayon-v">Statistics</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2516845918269-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MT&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Count&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TotalSize </span><span class="crayon-t">Class</span><span class="crayon-h"></span><span class="crayon-i">Name</span></p><p class="crayon-line" id="crayon-5e4201b0b2516845918269-7"><span class="crayon-cn">02484dc0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">12</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2516845918269-8"><span class="crayon-i">Total</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">objects</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b2519636524560" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; !gcroot -all 02684170 
Thread 2e74:
    0055f150 025604a0 Program.Program.Main(System.String[]) [C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 11]
        ebp+8: 0055f160
            -&gt;  02684170 Foo

Found 1 roots.</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2519636524560-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">gcroot</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-i">all</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2519636524560-2"><span class="crayon-i">Thread</span><span class="crayon-h"></span><span class="crayon-cn">2e74</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b2519636524560-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">0055f150</span><span class="crayon-h"></span><span class="crayon-cn">025604a0</span><span class="crayon-h"></span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">11</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2519636524560-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ebp</span><span class="crayon-o">+</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0055f160</span></p><p class="crayon-line" id="crayon-5e4201b0b2519636524560-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">02684170</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line" id="crayon-5e4201b0b2519636524560-7"><span class="crayon-i">Found</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">roots</span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b251b821427191" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; !gcroot -nostacks 02684170 
Finalizer Queue:
    02684170
    -&gt; 02684170 Foo

Warning: These roots are from finalizable objects that are not yet ready for finalization.
This is to handle the case where objects re-register themselves for finalization.
These roots may be false positives.
Found 1 unique roots (run '!GCRoot -all' to see all roots).</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b251b821427191-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">gcroot</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-i">nostacks</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251b821427191-2"><span class="crayon-e">Finalizer </span><span class="crayon-v">Queue</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b251b821427191-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">02684170</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251b821427191-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251b821427191-6"><span class="crayon-v">Warning</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">These </span><span class="crayon-e">roots </span><span class="crayon-e">are </span><span class="crayon-e">from </span><span class="crayon-e">finalizable </span><span class="crayon-e">objects </span><span class="crayon-e">that </span><span class="crayon-e">are </span><span class="crayon-st">not</span><span class="crayon-h"></span><span class="crayon-e">yet </span><span class="crayon-e">ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-v">finalization</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b251b821427191-7"><span class="crayon-r">This</span><span class="crayon-h"></span><span class="crayon-st">is</span><span class="crayon-h"></span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">handle </span><span class="crayon-e">the </span><span class="crayon-st">case</span><span class="crayon-h"></span><span class="crayon-e">where </span><span class="crayon-e">objects </span><span class="crayon-v">re</span><span class="crayon-o">-</span><span class="crayon-e">register </span><span class="crayon-e">themselves </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-v">finalization</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251b821427191-8"><span class="crayon-e">These </span><span class="crayon-e">roots </span><span class="crayon-e">may </span><span class="crayon-e">be </span><span class="crayon-t">false</span><span class="crayon-h"></span><span class="crayon-v">positives</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e4201b0b251b821427191-9"><span class="crayon-i">Found</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-e">unique </span><span class="crayon-e">roots</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-i">run</span><span class="crayon-h"></span><span class="crayon-s">'!GCRoot -all'</span><span class="crayon-h"></span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">see </span><span class="crayon-e">all </span><span class="crayon-v">roots</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><p>So there is one normal root (our variable) and a finalization queue.</p><p>Before we move on, let’s freeze the GC thread:</p><div id="crayon-5e4201b0b251e051865504" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; !threads
ThreadCount:      2
UnstartedThread:  0
BackgroundThread: 1
PendingThread:    0
DeadThread:       0
Hosted Runtime:   no
                                                                         Lock  
       ID OSID ThreadOBJ    State GC Mode     GC Alloc Context  Domain   Count Apt Exception
   0    1 2e74 0062a498     2a020 Preemptive  02684548:00000000 006241e8 1     MTA 
   5    2 2464 0063afd0     2b220 Preemptive  00000000:00000000 006241e8 0     MTA (Finalizer) </textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b251e051865504-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-e">threads</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251e051865504-2"><span class="crayon-v">ThreadCount</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-5e4201b0b251e051865504-3"><span class="crayon-v">UnstartedThread</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251e051865504-4"><span class="crayon-v">BackgroundThread</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-5e4201b0b251e051865504-5"><span class="crayon-v">PendingThread</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251e051865504-6"><span class="crayon-v">DeadThread</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b251e051865504-7"><span class="crayon-e">Hosted </span><span class="crayon-v">Runtime</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">no</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251e051865504-8"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">Lock&nbsp;&nbsp;</span></p><p class="crayon-line" id="crayon-5e4201b0b251e051865504-9"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">ID </span><span class="crayon-e">OSID </span><span class="crayon-e">ThreadOBJ&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">State </span><span class="crayon-e">GC </span><span class="crayon-e">Mode&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">GC </span><span class="crayon-e">Alloc </span><span class="crayon-e">Context&nbsp;&nbsp;</span><span class="crayon-e">Domain&nbsp;&nbsp; </span><span class="crayon-e">Count </span><span class="crayon-e">Apt </span><span class="crayon-i">Exception</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b251e051865504-10"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-cn">2e74</span><span class="crayon-h"></span><span class="crayon-cn">0062a498</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">2a020</span><span class="crayon-h"></span><span class="crayon-i">Preemptive</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">02684548</span><span class="crayon-o">:</span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-cn">006241e8</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">MTA</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e4201b0b251e051865504-11"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">5</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-h"></span><span class="crayon-cn">2464</span><span class="crayon-h"></span><span class="crayon-cn">0063afd0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">2b220</span><span class="crayon-h"></span><span class="crayon-i">Preemptive</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">00000000</span><span class="crayon-o">:</span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-cn">006241e8</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">MTA</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">Finalizer</span><span class="crayon-sy">)</span><span class="crayon-h"></span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b2521365321720" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; ~
   0  Id: 484.2e74 Suspend: 1 Teb: 0021d000 Unfrozen
   1  Id: 484.2368 Suspend: 1 Teb: 00220000 Unfrozen
   2  Id: 484.1e10 Suspend: 1 Teb: 00223000 Unfrozen
   3  Id: 484.1ef0 Suspend: 1 Teb: 00226000 Unfrozen
   4  Id: 484.3530 Suspend: 1 Teb: 00229000 Unfrozen
   5  Id: 484.2464 Suspend: 1 Teb: 0022c000 Unfrozen
.  6  Id: 484.1c6c Suspend: 1 Teb: 0022f000 Unfrozen</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2521365321720-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">~</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2521365321720-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">0</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.2e74</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0021d000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2521365321720-3"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.2368</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">00220000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2521365321720-4"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.1e10</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">00223000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2521365321720-5"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">3</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.1ef0</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">00226000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2521365321720-6"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">4</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.3530</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">00229000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2521365321720-7"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-cn">5</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.2464</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0022c000</span><span class="crayon-h"></span><span class="crayon-i">Unfrozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2521365321720-8"><span class="crayon-sy">.</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">6</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">Id</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">484.1c6c</span><span class="crayon-h"></span><span class="crayon-v">Suspend</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">Teb</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0022f000</span><span class="crayon-h"></span><span class="crayon-v">Unfrozen</span></p></div></td></tr></tbody></table></div></div><p>Let’s carry on and look for a trash (just hit enter twice and get to the third line read), break in debugger and check:</p><div id="crayon-5e4201b0b2528440114811" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:006&gt; g
System 0: 1 of 7 threads are frozen
System 0: 1 of 8 threads were frozen
System 0: 1 of 8 threads are frozen
System 0: 1 of 7 threads were frozen
System 0: 1 of 7 threads are frozen
System 0: 1 of 8 threads were frozen
System 0: 1 of 8 threads are frozen
System 0: 1 of 9 threads were frozen
System 0: 1 of 9 threads are frozen
System 0: 1 of 9 threads were frozen
(484.34d0): Break instruction exception - code 80000003 (first chance)
eax=00238000 ebx=00000000 ecx=772e9e80 edx=772e9e80 esi=772e9e80 edi=772e9e80
eip=772b48b0 esp=04f4fc80 ebp=04f4fcac iopl=0         nv up ei pl zr na pe nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000246
ntdll!DbgBreakPoint:
772b48b0 cc              int     3</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2528440114811-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2528440114811-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2528440114811-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">006</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-i">g</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-2"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">are </span><span class="crayon-e">frozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-3"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">were </span><span class="crayon-e">frozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-4"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">are </span><span class="crayon-e">frozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-5"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">were </span><span class="crayon-e">frozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-6"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">are </span><span class="crayon-e">frozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-7"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">were </span><span class="crayon-e">frozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-8"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">are </span><span class="crayon-e">frozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-9"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">were </span><span class="crayon-e">frozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-10"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">are </span><span class="crayon-e">frozen</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-11"><span class="crayon-i">System</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">of</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-h"></span><span class="crayon-e">threads </span><span class="crayon-e">were </span><span class="crayon-e">frozen</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-12"><span class="crayon-sy">(</span><span class="crayon-cn">484.34d0</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-st">Break</span><span class="crayon-h"></span><span class="crayon-e">instruction </span><span class="crayon-v">exception</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-h"></span><span class="crayon-i">code</span><span class="crayon-h"></span><span class="crayon-cn">80000003</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-e">first </span><span class="crayon-v">chance</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-13"><span class="crayon-v">eax</span><span class="crayon-o">=</span><span class="crayon-cn">00238000</span><span class="crayon-h"></span><span class="crayon-v">ebx</span><span class="crayon-o">=</span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-v">ecx</span><span class="crayon-o">=</span><span class="crayon-cn">772e9e80</span><span class="crayon-h"></span><span class="crayon-v">edx</span><span class="crayon-o">=</span><span class="crayon-cn">772e9e80</span><span class="crayon-h"></span><span class="crayon-v">esi</span><span class="crayon-o">=</span><span class="crayon-cn">772e9e80</span><span class="crayon-h"></span><span class="crayon-v">edi</span><span class="crayon-o">=</span><span class="crayon-cn">772e9e80</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-14"><span class="crayon-v">eip</span><span class="crayon-o">=</span><span class="crayon-cn">772b48b0</span><span class="crayon-h"></span><span class="crayon-v">esp</span><span class="crayon-o">=</span><span class="crayon-cn">04f4fc80</span><span class="crayon-h"></span><span class="crayon-v">ebp</span><span class="crayon-o">=</span><span class="crayon-cn">04f4fcac</span><span class="crayon-h"></span><span class="crayon-v">iopl</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">nv </span><span class="crayon-e">up </span><span class="crayon-e">ei </span><span class="crayon-e">pl </span><span class="crayon-e">zr </span><span class="crayon-e">na </span><span class="crayon-e">pe </span><span class="crayon-e">nc</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-15"><span class="crayon-v">cs</span><span class="crayon-o">=</span><span class="crayon-cn">0023</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ss</span><span class="crayon-o">=</span><span class="crayon-cn">002b</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ds</span><span class="crayon-o">=</span><span class="crayon-cn">002b</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">es</span><span class="crayon-o">=</span><span class="crayon-cn">002b</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">fs</span><span class="crayon-o">=</span><span class="crayon-cn">0053</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">gs</span><span class="crayon-o">=</span><span class="crayon-cn">002b</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">efl</span><span class="crayon-o">=</span><span class="crayon-cn">00000246</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2528440114811-16"><span class="crayon-v">ntdll</span><span class="crayon-o">!</span><span class="crayon-v">DbgBreakPoint</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b2528440114811-17"><span class="crayon-cn">772b48b0</span><span class="crayon-h"></span><span class="crayon-e">cc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">3</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b252b439444315" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:008&gt; !finalizequeue
SyncBlocks to be cleaned up: 0
Free-Threaded Interfaces to be released: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 0 finalizable objects (0063a034-&gt;0063a034)
generation 1 has 7 finalizable objects (0063a018-&gt;0063a034)
generation 2 has 0 finalizable objects (0063a018-&gt;0063a018)
Ready for finalization 1 objects (0063a034-&gt;0063a038)
Statistics for all finalizable objects (including all objects ready for finalization):
      MT    Count    TotalSize Class Name
02484dc0        1           12 Foo
7253c188        1           20 Microsoft.Win32.SafeHandles.SafeFileMappingHandle
7253c138        1           20 Microsoft.Win32.SafeHandles.SafeViewOfFileHandle
7252dde8        1           20 Microsoft.Win32.SafeHandles.SafePEFileHandle
72531888        2           40 Microsoft.Win32.SafeHandles.SafeFileHandle
725312e0        1           44 System.Threading.ReaderWriterLock
7252f734        1           52 System.Threading.Thread
Total 8 objects</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b252b439444315-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b252b439444315-20">20</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b252b439444315-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">008</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-e">finalizequeue</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-2"><span class="crayon-e">SyncBlocks </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-e">cleaned </span><span class="crayon-v">up</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-3"><span class="crayon-v">Free</span><span class="crayon-o">-</span><span class="crayon-e">Threaded </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-4"><span class="crayon-e">MTA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-5"><span class="crayon-e">STA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-6"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-7"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a034</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a034</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-8"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a034</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-9"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">2</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a018</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-10"><span class="crayon-e">Ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-i">finalization</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a034</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a038</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-11"><span class="crayon-e">Statistics </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-e">all </span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-e">including </span><span class="crayon-e">all </span><span class="crayon-e">objects </span><span class="crayon-e">ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-v">finalization</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MT&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Count&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TotalSize </span><span class="crayon-t">Class</span><span class="crayon-h"></span><span class="crayon-i">Name</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-13"><span class="crayon-cn">02484dc0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">12</span><span class="crayon-h"></span><span class="crayon-i">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-14"><span class="crayon-cn">7253c188</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeFileMappingHandle</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-15"><span class="crayon-cn">7253c138</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeViewOfFileHandle</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-16"><span class="crayon-cn">7252dde8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">20</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafePEFileHandle</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-17"><span class="crayon-cn">72531888</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">40</span><span class="crayon-h"></span><span class="crayon-v">Microsoft</span><span class="crayon-sy">.</span><span class="crayon-v">Win32</span><span class="crayon-sy">.</span><span class="crayon-v">SafeHandles</span><span class="crayon-sy">.</span><span class="crayon-i">SafeFileHandle</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-18"><span class="crayon-cn">725312e0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">44</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Threading</span><span class="crayon-sy">.</span><span class="crayon-i">ReaderWriterLock</span></p><p class="crayon-line" id="crayon-5e4201b0b252b439444315-19"><span class="crayon-cn">7252f734</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">52</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Threading</span><span class="crayon-sy">.</span><span class="crayon-e">Thread</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252b439444315-20"><span class="crayon-i">Total</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-v">objects</span></p></div></td></tr></tbody></table></div></div><p>So our object is still there, let’s find its roots:</p><div id="crayon-5e4201b0b252e242904425" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:008&gt; !gcroot -all 02684170 
Found 0 roots.</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b252e242904425-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">008</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">gcroot</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-i">all</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b252e242904425-2"><span class="crayon-i">Found</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-v">roots</span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b2531142788937" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:008&gt; !gcroot -nostacks 02684170 
Found 0 unique roots (run '!GCRoot -all' to see all roots).</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2531142788937-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">008</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">gcroot</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-i">nostacks</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2531142788937-2"><span class="crayon-i">Found</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">unique </span><span class="crayon-e">roots</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-i">run</span><span class="crayon-h"></span><span class="crayon-s">'!GCRoot -all'</span><span class="crayon-h"></span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">see </span><span class="crayon-e">all </span><span class="crayon-v">roots</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b253c076723867" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:008&gt; !finalizequeue -allReady
SyncBlocks to be cleaned up: 0
Free-Threaded Interfaces to be released: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 0 finalizable objects (0063a034-&gt;0063a034)
generation 1 has 7 finalizable objects (0063a018-&gt;0063a034)
generation 2 has 0 finalizable objects (0063a018-&gt;0063a018)
Finalizable but not rooted:  
Ready for finalization 1 objects (0063a034-&gt;0063a038)
Statistics for all finalizable objects that are no longer rooted:
      MT    Count    TotalSize Class Name
02484dc0        1           12 Foo
Total 1 objects</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b253c076723867-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">008</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-v">finalizequeue</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-e">allReady</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-2"><span class="crayon-e">SyncBlocks </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-e">cleaned </span><span class="crayon-v">up</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-3"><span class="crayon-v">Free</span><span class="crayon-o">-</span><span class="crayon-e">Threaded </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-4"><span class="crayon-e">MTA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-5"><span class="crayon-e">STA </span><span class="crayon-e">Interfaces </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">be </span><span class="crayon-v">released</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-6"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-7"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a034</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a034</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-8"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a034</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-9"><span class="crayon-i">generation</span><span class="crayon-h"></span><span class="crayon-cn">2</span><span class="crayon-h"></span><span class="crayon-i">has</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-e">finalizable </span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a018</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a018</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-10"><span class="crayon-e">Finalizable </span><span class="crayon-e">but </span><span class="crayon-st">not</span><span class="crayon-h"></span><span class="crayon-v">rooted</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-11"><span class="crayon-e">Ready </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-i">finalization</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-e">objects</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">0063a034</span><span class="crayon-o">-&gt;</span><span class="crayon-cn">0063a038</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-12"><span class="crayon-e">Statistics </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-e">all </span><span class="crayon-e">finalizable </span><span class="crayon-e">objects </span><span class="crayon-e">that </span><span class="crayon-e">are </span><span class="crayon-e">no </span><span class="crayon-e">longer </span><span class="crayon-v">rooted</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MT&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Count&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TotalSize </span><span class="crayon-t">Class</span><span class="crayon-h"></span><span class="crayon-i">Name</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253c076723867-14"><span class="crayon-cn">02484dc0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">12</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line" id="crayon-5e4201b0b253c076723867-15"><span class="crayon-i">Total</span><span class="crayon-h"></span><span class="crayon-cn">1</span><span class="crayon-h"></span><span class="crayon-v">objects</span></p></div></td></tr></tbody></table></div></div><p>So it is not held by anything and ready to be cleaned up — it is now in f-reachable queue:</p><div id="crayon-5e4201b0b253f197321183" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:008&gt; s -d 0 L?0xFFFFFFFF 02684170	
0055f15c  02684170 00000000 026823b4 0055f174  pAh......#h.t.U.
0063a034  02684170 00000000 00000000 00000000  pAh.............</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b253f197321183-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">008</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-v">s</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-h"></span><span class="crayon-v">L</span><span class="crayon-sy">?</span><span class="crayon-cn">0xFFFFFFFF</span><span class="crayon-h"></span><span class="crayon-cn">02684170</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b253f197321183-2"><span class="crayon-cn">0055f15c</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">02684170</span><span class="crayon-h"></span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-cn">026823b4</span><span class="crayon-h"></span><span class="crayon-cn">0055f174</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">pAh</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-p">#h.t.U.</span></p><p class="crayon-line" id="crayon-5e4201b0b253f197321183-3"><span class="crayon-cn">0063a034</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">02684170</span><span class="crayon-h"></span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-cn">00000000</span><span class="crayon-h"></span><span class="crayon-cn">00000000</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">pAh</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td></tr></tbody></table></div></div><p>The address <code>0063a034</code> was in a finalization queue (see previous outputs). Since we froze the finalizer thread, the object is not cleaned up.</p><h6>61. What is object pinning?</h6><p>When you pass an object to some external (non-managed) code it is important to not move the object as the external code may have a pointer to it. Since GC can move the object when compacting the heap, we need to ask GC to not move it. This is called pinning.</p><p>To pin an object you can use either <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/fixed-statement">fixed keyword</a> or <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.gchandle.alloc?redirectedfrom=MSDN&amp;view=netframework-4.7.2#System_Runtime_InteropServices_GCHandle_Alloc_System_Object_">GC.Alloc</a>.</p><h6>62. Does P/Invoke pins objects?</h6><p>Yes, but only for the time of the method execution. You need to pin them manually if you pass them to some asynchronous code (which will use the object after P/Invoke call returns).</p><h6>63. What is a write barrier?</h6><p>This is a general term used in garbage collection, not something internal to .NET. Some GC algorithms need to be aware of any write you perform, for instance to update the card tables or reference counters. So when you perform assignment, you call write barrier doing some bookkeeping. See this code:</p><div id="crayon-5e4201b0b2545250261477" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var foo = new Foo();
            GC.Collect();

            Console.WriteLine(GC.GetGeneration(foo));
            foo.Bar = new Bar();
            Console.ReadLine();
        }
    }
}

class Foo
{
    public Bar Bar;
}

class Bar
{

}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2545250261477-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b2545250261477-27">27</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2545250261477-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">GetGeneration</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Bar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-17"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-19"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-20"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">Bar </span><span class="crayon-v">Bar</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-22"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2545250261477-24"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-25"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2545250261477-27"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>When you run it you should see that after the collection <code>foo</code> object is in generation 1. Let’s decompile it:</p><div id="crayon-5e4201b0b2548028028027" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">// Metadata version: v4.0.30319
.assembly extern mscorlib
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .ver 4:0:0:0
}
.assembly '3aecb992-09ec-4656-9a7f-15f021299e85'
{
  .hash algorithm 0x00008004
  .ver 0:0:0:0
}
.module '3aecb992-09ec-4656-9a7f-15f021299e85.dll'
// MVID: {62F0FDE5-D531-4A79-97F4-C94E38ADF85C}
.imagebase 0x10000000
.file alignment 0x00000200
.stackreserve 0x00100000
.subsystem 0x0003       // WINDOWS_CUI
.corflags 0x00000001    //  ILONLY
// Image base: 0x00F00000


// =============== CLASS MEMBERS DECLARATION ===================

.class private auto ansi beforefieldinit Foo
       extends [mscorlib]System.Object
{
  .field public class Bar Bar
  .method public hidebysig specialname rtspecialname 
          instance void  .ctor() cil managed
  {
    // 
    .maxstack  8
    IL_0000:  ldarg.0
    IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
    IL_0006:  nop
    IL_0007:  ret
  } // end of method Foo::.ctor

} // end of class Foo

.class private auto ansi beforefieldinit Bar
       extends [mscorlib]System.Object
{
  .method public hidebysig specialname rtspecialname 
          instance void  .ctor() cil managed
  {
    // 
    .maxstack  8
    IL_0000:  ldarg.0
    IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
    IL_0006:  nop
    IL_0007:  ret
  } // end of method Bar::.ctor

} // end of class Bar

.class public auto ansi beforefieldinit Program.Program
       extends [mscorlib]System.Object
{
  .method public hidebysig static void  Main(string[] args) cil managed
  {
    // 
    .maxstack  2
    .locals init ([0] class Foo foo)
    .language '{3F5162F8-07C6-11D3-9053-00C04FA302A1}', '{994B45C4-E6E9-11D2-903F-00C04FA302A1}', '{5A869D0B-6611-11D3-BD2A-0000F80849BD}'
    .line 8,8 : 9,10 ''
    IL_0000:  nop
    .line 9,9 : 13,33 ''
    IL_0001:  newobj     instance void Foo::.ctor()
    IL_0006:  stloc.0
    .line 10,10 : 13,26 ''
    IL_0007:  call       void [mscorlib]System.GC::Collect()
    IL_000c:  nop
    .line 12,12 : 13,54 ''
    IL_000d:  ldloc.0
    IL_000e:  call       int32 [mscorlib]System.GC::GetGeneration(object)
    IL_0013:  call       void [mscorlib]System.Console::WriteLine(int32)
    IL_0018:  nop
    .line 13,13 : 13,33 ''
    IL_0019:  ldloc.0
    IL_001a:  newobj     instance void Bar::.ctor()
    IL_001f:  stfld      class Bar Foo::Bar
    .line 14,14 : 13,32 ''
    IL_0024:  call       string [mscorlib]System.Console::ReadLine()
    IL_0029:  pop
    .line 15,15 : 9,10 ''
    IL_002a:  ret
  } // end of method Program::Main

  .method public hidebysig specialname rtspecialname 
          instance void  .ctor() cil managed
  {
    // 
    .maxstack  8
    IL_0000:  ldarg.0
    IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
    IL_0006:  nop
    IL_0007:  ret
  } // end of method Program::.ctor

} // end of class Program.Program


// =============================================================

// </textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-28">28</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-30">30</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-32">32</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-34">34</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-36">36</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-38">38</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-40">40</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-42">42</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-44">44</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-46">46</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-48">48</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-50">50</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-52">52</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-54">54</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-56">56</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-58">58</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-60">60</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-62">62</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-64">64</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-65">65</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-66">66</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-67">67</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-68">68</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-69">69</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-70">70</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-71">71</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-72">72</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-73">73</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-74">74</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-75">75</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-76">76</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-77">77</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-78">78</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-79">79</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-80">80</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-81">81</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-82">82</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-83">83</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-84">84</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-85">85</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-86">86</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-87">87</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-88">88</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-89">89</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-90">90</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-91">91</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-92">92</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-93">93</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-94">94</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-95">95</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-96">96</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-97">97</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-98">98</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-99">99</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-100">100</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-101">101</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-102">102</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-103">103</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-104">104</p><p class="crayon-num" data-line="crayon-5e4201b0b2548028028027-105">105</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2548028028027-106">106</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2548028028027-1"><span class="crayon-c">// Metadata version: v4.0.30319</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-2"><span class="crayon-sy">.</span><span class="crayon-e">assembly </span><span class="crayon-e">extern</span><span class="crayon-h"></span><span class="crayon-e">mscorlib</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-3"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-v">publickeytoken</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-i">B7</span><span class="crayon-h"></span><span class="crayon-cn">7A</span><span class="crayon-h"></span><span class="crayon-cn">5C</span><span class="crayon-h"></span><span class="crayon-cn">56</span><span class="crayon-h"></span><span class="crayon-cn">19</span><span class="crayon-h"></span><span class="crayon-cn">34</span><span class="crayon-h"></span><span class="crayon-i">E0</span><span class="crayon-h"></span><span class="crayon-cn">89</span><span class="crayon-h"></span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// .z\V.4..</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">ver</span><span class="crayon-h"></span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-6"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-7"><span class="crayon-sy">.</span><span class="crayon-i">assembly</span><span class="crayon-h"></span><span class="crayon-s">'3aecb992-09ec-4656-9a7f-15f021299e85'</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-8"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">hash </span><span class="crayon-i">algorithm</span><span class="crayon-h"></span><span class="crayon-cn">0x00008004</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">ver</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-11"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-12"><span class="crayon-sy">.</span><span class="crayon-i">module</span><span class="crayon-h"></span><span class="crayon-s">'3aecb992-09ec-4656-9a7f-15f021299e85.dll'</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-13"><span class="crayon-c">// MVID: {62F0FDE5-D531-4A79-97F4-C94E38ADF85C}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-14"><span class="crayon-sy">.</span><span class="crayon-i">imagebase</span><span class="crayon-h"></span><span class="crayon-cn">0x10000000</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-15"><span class="crayon-sy">.</span><span class="crayon-e">file </span><span class="crayon-i">alignment</span><span class="crayon-h"></span><span class="crayon-cn">0x00000200</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-16"><span class="crayon-sy">.</span><span class="crayon-i">stackreserve</span><span class="crayon-h"></span><span class="crayon-cn">0x00100000</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-17"><span class="crayon-sy">.</span><span class="crayon-i">subsystem</span><span class="crayon-h"></span><span class="crayon-cn">0x0003</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// WINDOWS_CUI</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-18"><span class="crayon-sy">.</span><span class="crayon-i">corflags</span><span class="crayon-h"></span><span class="crayon-cn">0x00000001</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//&nbsp;&nbsp;ILONLY</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-19"><span class="crayon-c">// Image base: 0x00F00000</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-22"><span class="crayon-c">// =============== CLASS MEMBERS DECLARATION ===================</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-24"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">private</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">beforefieldinit </span><span class="crayon-e">Foo</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-25"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-26"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-27"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">field </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar </span><span class="crayon-i">Bar</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-28"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-e">specialname </span><span class="crayon-e">rtspecialname </span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-29"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-30"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// </span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">8</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldarg</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-36"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-37"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Foo::.ctor</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-39"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of class Foo</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-41"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">private</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">beforefieldinit </span><span class="crayon-e">Bar</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-42"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-43"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-44"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-e">specialname </span><span class="crayon-e">rtspecialname </span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-45"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-46"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// </span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">8</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldarg</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-52"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-53"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Bar::.ctor</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-55"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of class Bar</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-57"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">beforefieldinit </span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-58"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-59"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-60"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-61"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// </span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">2</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">locals </span><span class="crayon-e">init</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo </span><span class="crayon-v">foo</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">language</span><span class="crayon-h"></span><span class="crayon-s">'{3F5162F8-07C6-11D3-9053-00C04FA302A1}'</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-s">'{994B45C4-E6E9-11D2-903F-00C04FA302A1}'</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-s">'{5A869D0B-6611-11D3-BD2A-0000F80849BD}'</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-cn">8</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">10</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">33</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">newobj&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-v">Foo</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">stloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-cn">10</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">26</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">GC</span><span class="crayon-o">::</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_000c</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">12</span><span class="crayon-sy">,</span><span class="crayon-cn">12</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">54</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_000d</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_000e</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">int32</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">GC</span><span class="crayon-o">::</span><span class="crayon-e">GetGeneration</span><span class="crayon-sy">(</span><span class="crayon-t">object</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0013</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">int32</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0018</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">13</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">33</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0019</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_001a</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">newobj&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-v">Bar</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_001f</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">stfld&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar </span><span class="crayon-v">Foo</span><span class="crayon-o">::</span><span class="crayon-i">Bar</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">14</span><span class="crayon-sy">,</span><span class="crayon-cn">14</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">32</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0024</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">string</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0029</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">pop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">line</span><span class="crayon-h"></span><span class="crayon-cn">15</span><span class="crayon-sy">,</span><span class="crayon-cn">15</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">10</span><span class="crayon-h"></span><span class="crayon-s">''</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_002a</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">ret</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-88"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Program::Main</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-90"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-e">specialname </span><span class="crayon-e">rtspecialname </span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-91"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-92"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// </span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">8</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldarg</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-98"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-99"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Program::.ctor</span></p><p class="crayon-line" id="crayon-5e4201b0b2548028028027-101"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of class Program.Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-104"><span class="crayon-c">// =============================================================</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2548028028027-106"><span class="crayon-c">// </span></p></div></td></tr></tbody></table></div></div><p>There is nothing special in line <code>foo.Bar = new Bar();</code>. Let’s see it with WinDBG:</p><div id="crayon-5e4201b0b254d729450915" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:005&gt; !name2ee ConsoleApp3!Program.Main
Module:      005d4024
Assembly:    ConsoleApp3.exe
Token:       06000003
MethodDesc:  005d4d34
Name:        Program.Program.Main(System.String[])
JITTED Code Address: 007a0448</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b254d729450915-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">005</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-e">name2ee </span><span class="crayon-v">ConsoleApp3</span><span class="crayon-o">!</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Main</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b254d729450915-2"><span class="crayon-v">Module</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">005d4024</span></p><p class="crayon-line" id="crayon-5e4201b0b254d729450915-3"><span class="crayon-v">Assembly</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">.</span><span class="crayon-e">exe</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b254d729450915-4"><span class="crayon-v">Token</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-cn">06000003</span></p><p class="crayon-line" id="crayon-5e4201b0b254d729450915-5"><span class="crayon-v">MethodDesc</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">005d4d34</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b254d729450915-6"><span class="crayon-v">Name</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b254d729450915-7"><span class="crayon-e">JITTED </span><span class="crayon-e">Code </span><span class="crayon-v">Address</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">007a0448</span></p></div></td></tr></tbody></table></div></div><div id="crayon-5e4201b0b2564140248027" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:005&gt; !U 007a0448
Normal JIT generated code
Program.Program.Main(System.String[])
Begin 007a0448, size 93
*** WARNING: Unable to verify checksum for C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\bin\Debug\ConsoleApp3.exe

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 8:
&gt;&gt;&gt; 007a0448 55              push    ebp
007a0449 8bec            mov     ebp,esp
007a044b 83ec18          sub     esp,18h
007a044e 33c0            xor     eax,eax
007a0450 8945f0          mov     dword ptr [ebp-10h],eax
007a0453 8945f8          mov     dword ptr [ebp-8],eax
007a0456 8945ec          mov     dword ptr [ebp-14h],eax
007a0459 8945e8          mov     dword ptr [ebp-18h],eax
007a045c 894dfc          mov     dword ptr [ebp-4],ecx
007a045f 833dd0425d0000  cmp     dword ptr ds:[5D42D0h],0
007a0466 7405            je      007a046d
007a0468 e8c33e0d73      call    clr!JIT_DbgIsJustMyCode (73874330)
007a046d 33d2            xor     edx,edx
007a046f 8955f4          mov     dword ptr [ebp-0Ch],edx
007a0472 90              nop

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 9:
007a0473 b9bc4d5d00      mov     ecx,5D4DBCh (MT: Foo)
007a0478 e84b2ce2ff      call    005c30c8 (JitHelp: CORINFO_HELP_NEWSFAST)
007a047d 8945f0          mov     dword ptr [ebp-10h],eax
007a0480 8b4df0          mov     ecx,dword ptr [ebp-10h]
007a0483 ff15dc4d5d00    call    dword ptr ds:[5D4DDCh] (Foo..ctor(), mdToken: 06000001)
007a0489 8b45f0          mov     eax,dword ptr [ebp-10h]
007a048c 8945f4          mov     dword ptr [ebp-0Ch],eax

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 10:
007a048f e850f84372      call    mscorlib_ni+0xb5fce4 (72bdfce4) (System.GC.Collect(), mdToken: 06000e9b)
007a0494 90              nop

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 12:
007a0495 8b4df4          mov     ecx,dword ptr [ebp-0Ch]
007a0498 e863abe072      call    clr!GCInterface::GetGeneration (735ab000)
007a049d 8945f8          mov     dword ptr [ebp-8],eax
007a04a0 8b4df8          mov     ecx,dword ptr [ebp-8]
007a04a3 e8547f4372      call    mscorlib_ni+0xb583fc (72bd83fc) (System.Console.WriteLine(Int32), mdToken: 06000b6e)
007a04a8 90              nop

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 13:
007a04a9 b9184e5d00      mov     ecx,5D4E18h (MT: Bar)
007a04ae e8152ce2ff      call    005c30c8 (JitHelp: CORINFO_HELP_NEWSFAST)
007a04b3 8945ec          mov     dword ptr [ebp-14h],eax
007a04b6 8b4dec          mov     ecx,dword ptr [ebp-14h]
007a04b9 ff15384e5d00    call    dword ptr ds:[5D4E38h] (Bar..ctor(), mdToken: 06000002)
007a04bf 8b55f4          mov     edx,dword ptr [ebp-0Ch]
007a04c2 8b45ec          mov     eax,dword ptr [ebp-14h]
007a04c5 8d5204          lea     edx,[edx+4]
007a04c8 e8b3e2d872      call    clr!JIT_WriteBarrierEAX (7352e780)

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 14:
007a04cd e82a7e4372      call    mscorlib_ni+0xb582fc (72bd82fc) (System.Console.ReadLine(), mdToken: 06000b65)
007a04d2 8945e8          mov     dword ptr [ebp-18h],eax
007a04d5 90              nop

C:\Users\adafurma\source\repos\ConsoleApp3\ConsoleApp3\Program.cs @ 15:
007a04d6 90              nop
007a04d7 8be5            mov     esp,ebp
007a04d9 5d              pop     ebp
007a04da c3              ret</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-2">2</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-4">4</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-6">6</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-8">8</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-10">10</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-12">12</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-14">14</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-16">16</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-18">18</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-20">20</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-22">22</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-24">24</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-26">26</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-28">28</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-30">30</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-32">32</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-34">34</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-36">36</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-38">38</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-40">40</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-42">42</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-44">44</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-46">46</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-48">48</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-50">50</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-52">52</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-54">54</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-56">56</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-58">58</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-60">60</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-62">62</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e4201b0b2564140248027-64">64</p><p class="crayon-num" data-line="crayon-5e4201b0b2564140248027-65">65</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e4201b0b2564140248027-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">005</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-i">U</span><span class="crayon-h"></span><span class="crayon-cn">007a0448</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-2"><span class="crayon-e">Normal </span><span class="crayon-e">JIT </span><span class="crayon-e">generated </span><span class="crayon-e">code</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-3"><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-4"><span class="crayon-i">Begin</span><span class="crayon-h"></span><span class="crayon-cn">007a0448</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-i">size</span><span class="crayon-h"></span><span class="crayon-cn">93</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-5"><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-h"></span><span class="crayon-v">WARNING</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Unable </span><span class="crayon-st">to</span><span class="crayon-h"></span><span class="crayon-e">verify </span><span class="crayon-e">checksum </span><span class="crayon-st">for</span><span class="crayon-h"></span><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">bin</span><span class="crayon-sy">\</span><span class="crayon-v">Debug</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">.</span><span class="crayon-i">exe</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-7"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">8</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"></span><span class="crayon-cn">007a0448</span><span class="crayon-h"></span><span class="crayon-cn">55</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">push&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">ebp</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-9"><span class="crayon-cn">007a0449</span><span class="crayon-h"></span><span class="crayon-cn">8bec</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ebp</span><span class="crayon-sy">,</span><span class="crayon-i">esp</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-10"><span class="crayon-cn">007a044b</span><span class="crayon-h"></span><span class="crayon-cn">83ec18</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">sub&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">esp</span><span class="crayon-sy">,</span><span class="crayon-cn">18h</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-11"><span class="crayon-cn">007a044e</span><span class="crayon-h"></span><span class="crayon-cn">33c0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">xor</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">eax</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-12"><span class="crayon-cn">007a0450</span><span class="crayon-h"></span><span class="crayon-cn">8945f0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">10h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-13"><span class="crayon-cn">007a0453</span><span class="crayon-h"></span><span class="crayon-cn">8945f8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">8</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-14"><span class="crayon-cn">007a0456</span><span class="crayon-h"></span><span class="crayon-cn">8945ec</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">14h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-15"><span class="crayon-cn">007a0459</span><span class="crayon-h"></span><span class="crayon-cn">8945e8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">18h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-16"><span class="crayon-cn">007a045c</span><span class="crayon-h"></span><span class="crayon-cn">894dfc</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">ecx</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-17"><span class="crayon-cn">007a045f</span><span class="crayon-h"></span><span class="crayon-cn">833dd0425d0000</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">cmp&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-e">ptr </span><span class="crayon-v">ds</span><span class="crayon-o">:</span><span class="crayon-sy">[</span><span class="crayon-cn">5D42D0h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-18"><span class="crayon-cn">007a0466</span><span class="crayon-h"></span><span class="crayon-cn">7405</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">je</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">007a046d</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-19"><span class="crayon-cn">007a0468</span><span class="crayon-h"></span><span class="crayon-e">e8c33e0d73&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">clr</span><span class="crayon-o">!</span><span class="crayon-e">JIT_DbgIsJustMyCode</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">73874330</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-20"><span class="crayon-cn">007a046d</span><span class="crayon-h"></span><span class="crayon-cn">33d2</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">xor</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">edx</span><span class="crayon-sy">,</span><span class="crayon-i">edx</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-21"><span class="crayon-cn">007a046f</span><span class="crayon-h"></span><span class="crayon-cn">8955f4</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">0Ch</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">edx</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-22"><span class="crayon-cn">007a0472</span><span class="crayon-h"></span><span class="crayon-cn">90</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-24"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">9</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-25"><span class="crayon-cn">007a0473</span><span class="crayon-h"></span><span class="crayon-e">b9bc4d5d00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-cn">5D4DBCh</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">MT</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">Foo</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-26"><span class="crayon-cn">007a0478</span><span class="crayon-h"></span><span class="crayon-e">e84b2ce2ff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">call</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">005c30c8</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">JitHelp</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">CORINFO_HELP_NEWSFAST</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-27"><span class="crayon-cn">007a047d</span><span class="crayon-h"></span><span class="crayon-cn">8945f0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">10h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-28"><span class="crayon-cn">007a0480</span><span class="crayon-h"></span><span class="crayon-cn">8b4df0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">10h</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-29"><span class="crayon-cn">007a0483</span><span class="crayon-h"></span><span class="crayon-e">ff15dc4d5d00&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">dword </span><span class="crayon-e">ptr </span><span class="crayon-v">ds</span><span class="crayon-o">:</span><span class="crayon-sy">[</span><span class="crayon-cn">5D4DDCh</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">Foo</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-v">mdToken</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">06000001</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-30"><span class="crayon-cn">007a0489</span><span class="crayon-h"></span><span class="crayon-cn">8b45f0</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">eax</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">10h</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-31"><span class="crayon-cn">007a048c</span><span class="crayon-h"></span><span class="crayon-cn">8945f4</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">0Ch</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-33"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">10</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-34"><span class="crayon-cn">007a048f</span><span class="crayon-h"></span><span class="crayon-e">e850f84372&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mscorlib_ni</span><span class="crayon-o">+</span><span class="crayon-cn">0xb5fce4</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">72bdfce4</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">GC</span><span class="crayon-sy">.</span><span class="crayon-e">Collect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-v">mdToken</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">06000e9b</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-35"><span class="crayon-cn">007a0494</span><span class="crayon-h"></span><span class="crayon-cn">90</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-37"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">12</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-38"><span class="crayon-cn">007a0495</span><span class="crayon-h"></span><span class="crayon-cn">8b4df4</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">0Ch</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-39"><span class="crayon-cn">007a0498</span><span class="crayon-h"></span><span class="crayon-e">e863abe072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">clr</span><span class="crayon-o">!</span><span class="crayon-v">GCInterface</span><span class="crayon-o">::</span><span class="crayon-e">GetGeneration</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">735ab000</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-40"><span class="crayon-cn">007a049d</span><span class="crayon-h"></span><span class="crayon-cn">8945f8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">8</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-41"><span class="crayon-cn">007a04a0</span><span class="crayon-h"></span><span class="crayon-cn">8b4df8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">8</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-42"><span class="crayon-cn">007a04a3</span><span class="crayon-h"></span><span class="crayon-e">e8547f4372&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mscorlib_ni</span><span class="crayon-o">+</span><span class="crayon-cn">0xb583fc</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">72bd83fc</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">Int32</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-v">mdToken</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">06000b6e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-43"><span class="crayon-cn">007a04a8</span><span class="crayon-h"></span><span class="crayon-cn">90</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-45"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">13</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-46"><span class="crayon-cn">007a04a9</span><span class="crayon-h"></span><span class="crayon-e">b9184e5d00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-cn">5D4E18h</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">MT</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">Bar</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-47"><span class="crayon-cn">007a04ae</span><span class="crayon-h"></span><span class="crayon-e">e8152ce2ff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">call</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">005c30c8</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">JitHelp</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">CORINFO_HELP_NEWSFAST</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-48"><span class="crayon-cn">007a04b3</span><span class="crayon-h"></span><span class="crayon-cn">8945ec</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">14h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-49"><span class="crayon-cn">007a04b6</span><span class="crayon-h"></span><span class="crayon-cn">8b4dec</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">ecx</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">14h</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-50"><span class="crayon-cn">007a04b9</span><span class="crayon-h"></span><span class="crayon-e">ff15384e5d00&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">dword </span><span class="crayon-e">ptr </span><span class="crayon-v">ds</span><span class="crayon-o">:</span><span class="crayon-sy">[</span><span class="crayon-cn">5D4E38h</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">Bar</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-v">mdToken</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">06000002</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-51"><span class="crayon-cn">007a04bf</span><span class="crayon-h"></span><span class="crayon-cn">8b55f4</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">edx</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">0Ch</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-52"><span class="crayon-cn">007a04c2</span><span class="crayon-h"></span><span class="crayon-cn">8b45ec</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">eax</span><span class="crayon-sy">,</span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">14h</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-53"><span class="crayon-cn">007a04c5</span><span class="crayon-h"></span><span class="crayon-cn">8d5204</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">lea&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">edx</span><span class="crayon-sy">,</span><span class="crayon-sy">[</span><span class="crayon-v">edx</span><span class="crayon-o">+</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-54"><span class="crayon-cn">007a04c8</span><span class="crayon-h"></span><span class="crayon-e">e8b3e2d872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">clr</span><span class="crayon-o">!</span><span class="crayon-e">JIT_WriteBarrierEAX</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">7352e780</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-56"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">14</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-57"><span class="crayon-cn">007a04cd</span><span class="crayon-h"></span><span class="crayon-e">e82a7e4372&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mscorlib_ni</span><span class="crayon-o">+</span><span class="crayon-cn">0xb582fc</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">72bd82fc</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"></span><span class="crayon-v">mdToken</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">06000b65</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-58"><span class="crayon-cn">007a04d2</span><span class="crayon-h"></span><span class="crayon-cn">8945e8</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">dword </span><span class="crayon-i">ptr</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">ebp</span><span class="crayon-o">-</span><span class="crayon-cn">18h</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-i">eax</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-59"><span class="crayon-cn">007a04d5</span><span class="crayon-h"></span><span class="crayon-cn">90</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-61"><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Users</span><span class="crayon-sy">\</span><span class="crayon-v">adafurma</span><span class="crayon-sy">\</span><span class="crayon-v">source</span><span class="crayon-sy">\</span><span class="crayon-v">repos</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">ConsoleApp3</span><span class="crayon-sy">\</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-i">cs</span><span class="crayon-h"></span><span class="crayon-sy">@</span><span class="crayon-h"></span><span class="crayon-cn">15</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-62"><span class="crayon-cn">007a04d6</span><span class="crayon-h"></span><span class="crayon-cn">90</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">nop</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-63"><span class="crayon-cn">007a04d7</span><span class="crayon-h"></span><span class="crayon-cn">8be5</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mov&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">esp</span><span class="crayon-sy">,</span><span class="crayon-i">ebp</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e4201b0b2564140248027-64"><span class="crayon-cn">007a04d9</span><span class="crayon-h"></span><span class="crayon-cn">5d</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">pop&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">ebp</span></p><p class="crayon-line" id="crayon-5e4201b0b2564140248027-65"><span class="crayon-cn">007a04da</span><span class="crayon-h"></span><span class="crayon-e">c3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ret</span></p></div></td></tr></tbody></table></div></div><p>You can see the write barrier here:</p><div id="crayon-5e4201b0b2572524065728" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">007a04c8 e8b3e2d872      call    clr!JIT_WriteBarrierEAX (7352e780)</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><p class="crayon-num" data-line="crayon-5e4201b0b2572524065728-1">1</p></td><td class="crayon-code"><p class="crayon-line" id="crayon-5e4201b0b2572524065728-1"><span class="crayon-cn">007a04c8</span><span class="crayon-h"></span><span class="crayon-e">e8b3e2d872&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">clr</span><span class="crayon-o">!</span><span class="crayon-e">JIT_WriteBarrierEAX</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-cn">7352e780</span><span class="crayon-sy">)</span></p></td></tr></tbody></table></div></div><p>See the next question to understand how it can be used in .NET.</p><h6>64. What is a card table? Brick table?</h6><p>GC is capable of cleaning generation 0 only. What happens if the only reference to some object X (being in generation 0) is in a field of object Y which is in generation 1? How does GC know that it cannot remove X from the memory? This is thanks to the card table.</p><p>Object X must have been assigned to field in Y somehow. When this assignment was performed, .NET executed the write barrier (see previous question) which updated the card table.</p><p>Card table is a list of bits where each bit maintains 128 (in x86) or 256 (in x64) bytes of memory. When a bit is set, GC knows to include those bytes of memory as roots when performing the marking phase. Since card tables can be pretty big, they are grouped in card bundles (sometimes called card decks).</p><p>Brick table is similar structure covering 2kB and 4kB of memory (in x86 and x64 respectively). It is used by the GC to locate objects (technically plugs).</p><h6>Bonus — where do I learn more?</h6><p><a href="https://prodotnetmemory.com/">Pro .NET Memory Management</a> by Konrad Kokosa is a great book describing .NET GC into a great depth. If you want to learn more about memory reclamation internals then it is a must read.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>