<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Unwind the stack around every invoke by kripken &#xB7; Pull Request #6702 &#xB7; emscripten-core/emscripten - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Unwind the stack around every invoke by kripken &#xB7; Pull Request #6702 &#xB7; emscripten-core/emscripten - linksfor.dev(s)"/>
    <meta property="article:author" content="kripken"/>
    <meta property="og:description" content="That ensures the stack is unwound from any functions we entered during the invoke, which may not unwind themselves due to an exception or longjmp being called.&#xA;This adds some overhead - a call in e..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/emscripten-core/emscripten/pull/6702"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Unwind the stack around every invoke by kripken &#xB7; Pull Request #6702 &#xB7; emscripten-core/emscripten</title>
<div class="readable">
        <h1>Unwind the stack around every invoke by kripken &#xB7; Pull Request #6702 &#xB7; emscripten-core/emscripten</h1>
            <div>by kripken</div>
            <div>Reading time: 6-8 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://github.com/emscripten-core/emscripten/pull/6702">https://github.com/emscripten-core/emscripten/pull/6702</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <main id="js-repo-pjax-container" data-pjax-container="">
      
<!-- base sha1: &quot;eb9fd18499250ae198868878bcd0f76afbe7df9a&quot; -->
<!-- head sha1: &quot;34d90d406ab8751d8b2b05e581afff463520c540&quot; -->

  




  









  


<div>
  <div>

    
    
  <div data-pjax="">
    
      <div data-prompt="signup">
    <div>
      <div>
        <h3>Join GitHub today</h3>
        <p>GitHub is home to over 40 million developers working together to host and review code, manage projects, and build software together.</p>
        <p><a data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;files signup prompt&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/emscripten-core/emscripten/pull/6702&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="2d50c1509d367b2f9ee00616f062cf5423d5b63d8f514c9d313f50da521a35ba" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up" href="https://github.com/join?source=prompt-pr-show&amp;source_repo=emscripten-core%2Femscripten">Sign up</a>
      </p></div>
    </div>
  </div>



  


  <div>
    
  


      <include-fragment src="/emscripten-core/emscripten/pull/6702/show_partial?partial=pull_requests%2Ftabs">
    


  </include-fragment>


    <h2>Conversation</h2>
    <div id="discussion_bucket" data-channel="pull_request:195022281:timeline">
      
<div>

  <div>
        <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">
      <div data-channel="marked-as-read:pull-request:195022281">

        



        

  


  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0Q29tbWl0MTk1MDIyMjgxOmFiMWNkMTUwMjE3MzQyYTc1ZThlMThkZDc3Nzc2MzcyODk2NTg2MTQ=">
  
      <div>
  <div>
      <div>
        
        <div>
          

<div data-channel="repo:1357796:commit:ab1cd150217342a75e8e18dd7777637289658614" data-url="/emscripten-core/emscripten/pull/6702/commits/ab1cd150217342a75e8e18dd7777637289658614/_render_node/commit/pull_condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">
          <img height="20" width="20" alt="@kripken" src="https://avatars3.githubusercontent.com/u/173661?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>â€¦nd from any functions we entered during the invoke, which may not unwind themselves due to an exception or longjmp being called. <span aria-label="This commit closes issue #6666.">fixes</span> <a data-error-text="Failed to load issue title" data-id="330459666" data-permission-text="Issue title is private" data-url="https://github.com/emscripten-core/emscripten/issues/6666" data-hovercard-type="issue" data-hovercard-url="/emscripten-core/emscripten/issues/6666/hovercard" href="https://github.com/emscripten-core/emscripten/issues/6666">#6666</a></pre>
    </div>
</div>


        </div>
      </div>
  </div>
</div>


</div>

  
  


  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0Q29tbWl0MTk1MDIyMjgxOjRiYWE2ZmFkMmJiNzA4NTdlMWUyYzYzZDViYWUwOWZhMDAyODQxZDA=">
  
      <div>
    
  <div>
      <div>
        
        <div>
          

<div data-channel="repo:1357796:commit:4baa6fad2bb70857e1e2c63d5bae09fa002841d0" data-url="/emscripten-core/emscripten/pull/6702/commits/4baa6fad2bb70857e1e2c63d5bae09fa002841d0/_render_node/commit/pull_condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">
          <img height="20" width="20" alt="@kripken" src="https://avatars3.githubusercontent.com/u/173661?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
</div>


        </div>
      </div>
      <div>
        
        <div>
          

<div data-channel="repo:1357796:commit:34d90d406ab8751d8b2b05e581afff463520c540" data-url="/emscripten-core/emscripten/pull/6702/commits/34d90d406ab8751d8b2b05e581afff463520c540/_render_node/commit/pull_condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">
          <img height="20" width="20" alt="@kripken" src="https://avatars3.githubusercontent.com/u/173661?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
</div>


        </div>
      </div>
  </div>
</div>


</div>

  
  



  
  
<div data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDE2OTcwODEzNjU=">
  
        
  <div id="event-1697081366">
  
  <div>

      <p>

      <a data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken"><img height="20" width="20" alt="@kripken" src="https://avatars3.githubusercontent.com/u/173661?s=60&amp;v=4"></a>
  <a data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">kripken</a>
  


      merged commit <a href="https://github.com/emscripten-core/emscripten/commit/563e137e3fe506c5689f3835aa3518ee54d089fb"><code>563e137</code></a>
    into
    <span>
      <span title="emscripten-core/emscripten:incoming">
        <span>incoming</span>
      </span>
    </span></p><a href="https://github.com/emscripten-core/emscripten/pull/6702#event-1697081366"><relative-time datetime="2018-06-23T03:36:40Z" title="Jun 22, 2018, 8:36 PM PDT">on Jun 22, 2018</relative-time></a>

      <p>
        21 checks passed
      </p>

      <div>
        
        <div>
            <div>
              
              <p><strong>
                  ci/circleci: build
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23743?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: flake8
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23742?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-ab
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23749?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-binaryen0
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23760?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-binaryen1
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23754?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-binaryen2
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23759?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-binaryen3
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23751?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-browser
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23744?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-c
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23752?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-d
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23758?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-e
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23748?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-f
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23753?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-ghi
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23745?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-jklmno
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23756?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-other
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23747?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-p
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23755?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-qrst
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23746?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-sanity
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23757?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  ci/circleci: test-uvwxyz
                </strong>
                Your tests passed on CircleCI!
              </p>

                <p><a href="https://circleci.com/gh/kripken/emscripten/23750?utm_campaign=vcs-integration-link&amp;utm_medium=referral&amp;utm_source=github-build-link">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  continuous-integration/travis-ci/pr
                </strong>
                The Travis CI build passed
              </p>

                <p><a href="https://travis-ci.org/kripken/emscripten/builds/395624470?utm_source=github_status&amp;utm_medium=notification">Details</a>
            </p></div>
            <div>
              
              <p><strong>
                  continuous-integration/travis-ci/push
                </strong>
                The Travis CI build passed
              </p>

                <p><a href="https://travis-ci.org/kripken/emscripten/builds/395624433?utm_source=github_status&amp;utm_medium=notification">Details</a>
            </p></div>
        </div>
      </div>
  </div>
</div>



  


  

  <div>
  <div id="ref-commit-dac1f30">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">kripken</a> 

      added a commit
      that referenced
      this pull request

    </p><a href="#ref-commit-dac1f30">
      <relative-time datetime="2018-07-01T18:27:26Z" title="Jul 1, 2018, 11:27 AM PDT">on Jul 1, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:1357796:commit:dac1f30720276eb2dcfcd51c103539c8eb403dbb" data-url="/emscripten-core/emscripten/commit/dac1f30720276eb2dcfcd51c103539c8eb403dbb/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/kripken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kripken">
          <img height="20" width="20" alt="@kripken" src="https://avatars3.githubusercontent.com/u/173661?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>A couple of tiny followups to the recent emterpretify-async and async ccall changes :

*    Docs and code comments for <a data-error-text="Failed to load issue title" data-id="326491497" data-permission-text="Issue title is private" data-url="https://github.com/emscripten-core/emscripten/issues/6586" data-hovercard-type="pull_request" data-hovercard-url="/emscripten-core/emscripten/pull/6586/hovercard" href="https://github.com/emscripten-core/emscripten/pull/6586">#6586</a>
*   Test improvements, including running a few more async tests on the bots, adds more coverage for stuff in <a data-error-text="Failed to load issue title" data-id="326491497" data-permission-text="Issue title is private" data-url="https://github.com/emscripten-core/emscripten/issues/6586" data-hovercard-type="pull_request" data-hovercard-url="/emscripten-core/emscripten/pull/6586/hovercard" href="https://github.com/emscripten-core/emscripten/pull/6586">#6586</a>
*   Fix a test we don't run by default that broke due to the combination of <a data-error-text="Failed to load issue title" data-id="335591623" data-permission-text="Issue title is private" data-url="https://github.com/emscripten-core/emscripten/issues/6749" data-hovercard-type="pull_request" data-hovercard-url="/emscripten-core/emscripten/pull/6749/hovercard" href="https://github.com/emscripten-core/emscripten/pull/6749">#6749</a> and <a data-error-text="Failed to load issue title" data-id="332570044" data-permission-text="Issue title is private" data-url="https://github.com/emscripten-core/emscripten/issues/6702" data-hovercard-type="pull_request" data-hovercard-url="/emscripten-core/emscripten/pull/6702/hovercard" href="https://github.com/emscripten-core/emscripten/pull/6702">#6702</a> - we now unwind the stack in each invoke, and we may call invokes during async stack recreation, so we need to be ok with running stackSave/stackRestore and not throw a spurious error.</pre>
    </div>
</div>


    </div>
  </div>
</div>



</div>






<!-- Rendered timeline since 2018-07-01 11:27:26 -->



      </div>

      
    </div>

</div>

    
</div>



    </div>
  </div>
  


  </div>


  </div>
</div>

    </main>
  </div>
  

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>