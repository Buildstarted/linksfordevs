<!DOCTYPE html>
<html lang="en">
<head>
    <title>
.NET 5 preview support in OmniSharp and C# Extension for VS Code - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content=".NET 5 preview support in OmniSharp and C# Extension for VS Code - linksfor.dev(s)"/>
    <meta property="og:description" content="As we all know, we have recently been spoiled with the first preview release of .NET 5. Additionaly, Preview 2 is just around the corner and is already available via dotnet-install scripts."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.strathweb.com/2020/03/net-5-preview-support-in-omnisharp-and-c-extension-for-vs-code/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - .NET 5 preview support in OmniSharp and C# Extension for VS Code</title>
<div class="readable">
        <h1>.NET 5 preview support in OmniSharp and C# Extension for VS Code</h1>
            <div>Reading time: 3-4 minutes</div>
        <div>Posted here: 30 Mar 2020</div>
        <p><a href="https://www.strathweb.com/2020/03/net-5-preview-support-in-omnisharp-and-c-extension-for-vs-code/">https://www.strathweb.com/2020/03/net-5-preview-support-in-omnisharp-and-c-extension-for-vs-code/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="main-wrapper">	

<!-- begin #main -->
        <div id="main">
        	<!-- Main Menu -->
						<section id="content">
						<!-- begin article -->
				<article>
					
						
						<div>
														<p>As we all know, we have recently been spoiled with the first preview release of <a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0-preview-1/">.NET 5</a>. Additionaly, Preview 2 is just around the corner and is already available via <a href="https://dotnet.microsoft.com/download/dotnet-core/scripts">dotnet-install scripts</a>.</p>
<p>While it's still early days, we would want that OmniSharp users can work with .NET 5 as soon as possible, so we have just added support for .NET 5 in OmniSharp. </p>
<p>Let me quickly walk you through what you need to do to take advantage of that.
</p>

<h3 id="toc_1">OmniSharp 1.34.15</h3>
<p>The magic number is <a href="https://github.com/OmniSharp/omnisharp-roslyn/blob/master/CHANGELOG.md#13415---2020-03-25">1.34.15</a> – that's the build of OmniSharp that supports .NET 5, and it was published on 25 March. If you are consuming OmniSharp in editor other than VS Code, you need to ensure that you use at least that version.</p>
<p>If you are in VS Code, with the C# Extension installed, you could – more conveniently than juggling the OmniSharp builds – install the pre-release 1.21.16 of the C# Extension, which can be found <a href="https://github.com/OmniSharp/omnisharp-vscode/releases/tag/v1.21.16">here</a>. You'd need to download the VSIX and <a href="https://github.com/OmniSharp/omnisharp-vscode/wiki/Installing-Beta-Releases#installing-a-beta-release-of-the-c-extension">follow the simple instructions</a>.</p>
<p>That pre-release build 1.21.16 already contains OmniSharp 1.34.15. This build should ship as stable into the VS Code Marketplace at some point next week (starting on Monday 30 March)</p>
<h3 id="toc_2">But it still doesn't work!</h3>
<p>In principle, to support .NET 5, we need to things:</p>
<ul>
<li>latest <em>NuGet.</em>* packages (<em>5.6.0</em>) – to be able to correctly handle the <em>net5.0</em> TFM (introduced in preview 2)</li>
<li><em>MsBuild 16.5.0</em></li>
</ul>
<p>When OmniSharp starts it needs to choose the most appropriate MsBuild to use. It will use one of the two options:</p>
<ul>
<li>use it's own bundled minimal MsBuild (which in this case, supports .NET 5 already)</li>
<li>use global MsBuild from your global Mono installation (if you are on *nix and have Mono &gt;= 6.4.0) or your global Visual Studio installation (if you are on Windows and have VS &gt;= 16.3) installed</li>
</ul>
<p>If you are in the situation where the first option takes effect (so you have no global Mono or no global VS), then the aforementioned OmniSharp 1.34.15 guarantees that you will have .NET 5 preview support.</p>
<p>If you are in the second category (so you have do have global Mono or global VS), then even if you have OmniSharp 1.34.15 / VS Code Extension 1.21.16, an outdated global Mono or VS will prrevent you from enjoying support for .NET 5. In those cases you'd need to upgrade:</p>
<ul>
<li>global Mono to at least <a href="https://www.mono-project.com/docs/about-mono/releases/">6.10.0</a>, which is the preview version at the time of writing</li>
<li>Visual Studio to at least <a href="https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-preview#16.6.0-pre.2.0">16.6P2</a></li>
</ul>
<p>Additionally, though this is generally not recommend, if you are *nix systems, you can disable the usage of global Mono completely by adding the following VS Code setting:</p>
<div><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5e7e1ff08015d124250515" data-settings=" minimize scroll-mouseover wrap">
		
			
			
			
			<div>
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>"omnisharp.useGlobalMono"</span><span>:</span><span> </span><span>"never"</span></p></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
</div>
<p>This will actually force OmniSharp to be launched only with its bundled minimal MsBuild and its own bundled minimal Mono runtime.</p>
<h3 id="toc_3">Future</h3>
<p>In the future we will raise the minimum versions of the discovered global Mono (as mentioned, currently &gt;= 6.4.0) and global VS (currently &gt;= 16.3) to align with .NET 5 support, however at the moment it is too early to do so. Hope this helps.</p>
						</div>
										</article>
			<!-- end article -->
			<hr>
			
			
					</section>

        </div>
        <!-- end #main -->

<!-- begin aside -->
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>