<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Support asp-items for datalist element &#xB7; Issue #7663 &#xB7; dotnet/aspnetcore &#xB7; GitHub -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Support asp-items for datalist element Â· Issue #7663 Â· dotnet/aspnetcore Â· GitHub</h1><div><div id="" class="d-block comment-body markdown-body  js-comment-body"><p>The more I look into this, the more scenarios appear and thus the more complicated it seems <g-emoji class="g-emoji" alias="smile" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png">ðŸ˜„</g-emoji></p><p>Some baseline points (facts, hopefully):</p><ul><li><code>&lt;datalist&gt;</code> has no rendering and should never be visual in its own right (so no need to support styling or other attributes on its element tag)</li><li>a single <code>&lt;datalist&gt;</code> can be used by multiple controls</li><li>a control specifies the <code>&lt;datalist&gt;</code> it wishes to use via the <code>list</code> attribute containing the <code>id</code> of the <code>&lt;datalist&gt;</code> element</li><li>the <code>list</code> attribute is only support on the <code>&lt;input&gt;</code> element (<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#list" rel="nofollow">as far as I can tell anyway</a>)</li><li><code>&lt;option&gt;</code> elements nested under a <code>&lt;datalist&gt;</code> can only specify the <code>value</code> attribute. None of the other attributes typically associated with <code>&lt;option&gt;</code> when using under a <code>&lt;select&gt;</code> apply, e.g. <code>selected</code>, etc.</li></ul><p>Anything provided by a Tag Helper would want to keep the above in mind and ensure it leads folks to the "pit of success" while not preventing scenarios that are supported by the underlying element behavior itself.</p><p>As a strawman, let's consider two main usage scenarios:</p><ol><li>Easy way to provide a list of suggestions for a text field from a single <code>IEnumerable&lt;string&gt;</code></li><li>Easy way to populate the <code>&lt;option&gt;</code> elements for a <code>&lt;datalist&gt;</code> from a single <code>IEnumerable&lt;string&gt;</code></li></ol><h2>Scenario 1</h2><p>For scenario 1, we add an <code>asp-list</code> attribute (<code>IEnumerable&lt;string&gt;</code>) to the <code>&lt;input /&gt;</code> element that generates a sibling <code>&lt;datalist&gt;</code> with a derived <code>id</code> (e.g. <code>[InputFieldId-List]</code>) and sets the <code>input</code> element's <code>list</code> attribute to that id, e.g.</p><p><strong>Model</strong></p><div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span><span class="pl-smi">string</span><span class="pl-smi">State</span> { <span class="pl-smi">get</span>; <span class="pl-smi">set</span>; }
<span class="pl-k">public</span><span class="pl-en">List</span>&lt;<span class="pl-en">String</span>&gt; <span class="pl-smi">StateSuggestions</span> =&gt; <span class="pl-smi">new</span><span class="pl-smi">List</span>&lt;<span class="pl-smi">string</span>&gt; { "<span class="pl-smi">VIC</span>", "<span class="pl-smi">NSW</span>", "<span class="pl-smi">QLD</span>", "<span class="pl-smi">NT</span>", "<span class="pl-smi">WA</span>", "<span class="pl-smi">SA</span>", "<span class="pl-smi">TAS</span>", "<span class="pl-smi">ACT</span>" }</pre></div><p><strong>CSHTML Source</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>State<span class="pl-pds">"</span></span><span class="pl-e">asp-list</span>=<span class="pl-s"><span class="pl-pds">"</span>Model.StateSuggestions<span class="pl-pds">"</span></span> /&gt;</pre></div><p><strong>HTML Output</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>State<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>State.List<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">datalist</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>State.List<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>VIC<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>NSW<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>QLD<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>NT<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>WA<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>SA<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>TAS<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>ACT<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
&lt;/<span class="pl-ent">datalist</span>&gt;</pre></div><h2>Scenario 2</h2><p>Scenario 2 supports slightly more advanced cases, including where folks want to reuse a single <code>&lt;datalist&gt;</code> across multiple text fields, or mix statically declared option values with those from C# expression/model. For these cases, we add an <code>asp-items</code> attribute (<code>IEnumerable&lt;string&gt;</code>) to the <code>&lt;datalist&gt;</code> element that generates the requisite <code>&lt;option&gt;</code> elements <strong>after</strong> any existing content in the <code>&lt;datalist&gt;</code> element as it's declared (i.e. it appends them). It wouldn't do anything to generate an <code>id</code> attribute, e.g.</p><p><strong>Model</strong></p><div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span><span class="pl-smi">string</span><span class="pl-smi">FeelingMorning</span> { <span class="pl-smi">get</span>; <span class="pl-smi">set</span>; }
<span class="pl-k">public</span><span class="pl-smi">string</span><span class="pl-smi">FeelingAfternoon</span> { <span class="pl-smi">get</span>; <span class="pl-smi">set</span>; }
<span class="pl-k">public</span><span class="pl-smi">string</span><span class="pl-smi">FeelingEvening</span> { <span class="pl-smi">get</span>; <span class="pl-smi">set</span>; }
<span class="pl-k">public</span><span class="pl-en">List</span>&lt;<span class="pl-en">String</span>&gt; <span class="pl-smi">FeelingSuggestions</span> =&gt; <span class="pl-smi">new</span><span class="pl-smi">List</span>&lt;<span class="pl-smi">string</span>&gt; { "<span class="pl-smi">Happy</span>", "<span class="pl-smi">Sad</span>", "<span class="pl-smi">Joyful</span>", "<span class="pl-smi">Angry</span>" }</pre></div><p><strong>CSHTML Source</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingMorning<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingAfternoon<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingEvening<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">datalist</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span><span class="pl-e">asp-list</span>=<span class="pl-s"><span class="pl-pds">"</span>Model.FeelingSuggestions<span class="pl-pds">"</span></span> /&gt;</pre></div><p><strong>HTML Output</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingMorning<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingAfternoon<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingEvening<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">datalist</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Happy<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Sad<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Joyful<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Angry<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
&lt;/<span class="pl-ent">datalist</span>&gt;</pre></div><p>One could also statically declare options in the <code>&lt;datalist&gt;</code> inline:</p><p><strong>CSHTML Source</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingMorning<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingAfternoon<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">asp-for</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingEvening<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">datalist</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span><span class="pl-e">asp-list</span>=<span class="pl-s"><span class="pl-pds">"</span>Model.FeelingSuggestions<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Stressed<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
&lt;/<span class="pl-ent">datalist</span>&gt;</pre></div><p><strong>HTML Output</strong></p><div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingMorning<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingAfternoon<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">input</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FeelingEvening<span class="pl-pds">"</span></span><span class="pl-e">list</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">datalist</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>feelings<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Stressed<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Happy<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Sad<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Joyful<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
    &lt;<span class="pl-ent">option</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Angry<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">option</span>&gt;
&lt;/<span class="pl-ent">datalist</span>&gt;</pre></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>