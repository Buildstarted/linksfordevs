<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Debugging Dapr application using Tye tool - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Debugging Dapr application using Tye tool - linksfor.dev(s)"/>
    <meta property="article:author" content="Thang Chung"/>
    <meta property="og:description" content="This article shows you how to debug the Dapr application using Tye"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://dev.to/thangchung/debugging-dapr-application-using-tye-tool-1djb"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Debugging Dapr application using Tye tool</title>
<div class="readable">
        <h1>Debugging Dapr application using Tye tool</h1>
            <div>by Thang Chung</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 31 Mar 2020</div>
        <p><a href="https://dev.to/thangchung/debugging-dapr-application-using-tye-tool-1djb">https://dev.to/thangchung/debugging-dapr-application-using-tye-tool-1djb</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="article-show-container" data-author-id="18771" data-live="false" data-path="/thangchung/debugging-dapr-application-using-tye-tool-1djb" data-published="true">
    <article itemscope="" itemtype="http://schema.org/Article" itemprop="mainEntity">
      <meta itemprop="url" content="https://dev.to/thangchung/debugging-dapr-application-using-tye-tool-1djb">
      <meta itemprop="image" content="https://dev.to/social_previews/article/295816.png">
      
      <section>
          
      </section>
      <header id="main-title">
        
        <h3>
          
            <a href="http://github.com/thangchung"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 438.549 438.549" role="img" aria-labelledby="aee0ima7tffgny6l54r253ddryqp29td"><title id="aee0ima7tffgny6l54r253ddryqp29td">github logo</title><path d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736 15.166 259.057 5.365 219.27 5.365c-39.78 0-76.47 9.804-110.062 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.853 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.42-1.996 2.474-2.282 3.71-5.14 3.71-8.562 0-.57-.05-5.708-.144-15.417-.098-9.71-.144-18.18-.144-25.406l-6.567 1.136c-4.187.767-9.47 1.092-15.846 1-6.375-.09-12.992-.757-19.843-2-6.854-1.23-13.23-4.085-19.13-8.558-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.9-9.233-8.992-14.56-4.093-5.33-8.232-8.944-12.42-10.847l-1.998-1.43c-1.332-.952-2.568-2.1-3.71-3.43-1.143-1.33-1.998-2.663-2.57-3.997-.57-1.335-.097-2.43 1.428-3.29 1.525-.858 4.28-1.275 8.28-1.275l5.708.853c3.807.763 8.516 3.042 14.133 6.85 5.615 3.807 10.23 8.755 13.847 14.843 4.38 7.807 9.657 13.755 15.846 17.848 6.184 4.093 12.42 6.136 18.7 6.136 6.28 0 11.703-.476 16.273-1.423 4.565-.95 8.848-2.382 12.847-4.284 1.713-12.758 6.377-22.56 13.988-29.41-10.847-1.14-20.6-2.857-29.263-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.98-3.9-12.373-5.852-26.647-5.852-42.825 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.38-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.284 18.794 7.953 23.84 10.995 5.046 3.04 9.09 5.618 12.135 7.708 17.706-4.947 35.977-7.42 54.82-7.42s37.116 2.473 54.822 7.42l10.85-6.85c7.418-4.57 16.18-8.757 26.26-12.564 10.09-3.806 17.803-4.854 23.135-3.14 8.562 21.51 9.325 40.923 2.28 58.24 15.035 16.18 22.558 35.788 22.558 58.818 0 16.178-1.958 30.497-5.853 42.966-3.9 12.47-8.94 22.457-15.125 29.98-6.19 7.52-13.9 13.85-23.13 18.985-9.233 5.14-18.183 8.85-26.84 11.135-8.663 2.286-18.416 4.004-29.264 5.146 9.894 8.563 14.842 22.078 14.842 40.54v60.237c0 3.422 1.19 6.28 3.572 8.562 2.38 2.278 6.136 2.95 11.276 1.994 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.16 41.826-81.126 41.826-128.906-.01-39.77-9.818-76.454-29.414-110.05z"></path></svg>
</a>
            <time itemprop="datePublished" datetime="2020-03-31T14:19:37Z" title="Tuesday, March 31, 2020, 7:19:37 AM">Mar 31</time>
          <span>ãƒ»5 min read</span>
          <span id="action-space">&nbsp;</span>
        </h3>
          
      </header>
      <div data-article-id="295816" id="article-body" itemprop="articleBody">
        <p>Currently, Microsoft has announced and published <code>Dapr</code> to simplify the infrastructure tasks on local development and Kubernetes. It built for a developer who only wants to focus on the development of the application which inherently has a lot of complex business logic. </p>

<blockquote>
<p>Dapr - An event-driven, portable runtime for building microservices on cloud and edge. See more at <a href="https://dapr.io/">https://dapr.io</a></p>
</blockquote>

<p>But with <code>Dapr</code>, developers also need to care about how to run and compose docker images and a lot of Helm charts which are really complex too. So recently, they have published another tooling with named <code>tye</code>.</p>

<blockquote>
<p>Tye - A tool that makes developing, testing, and deploying microservices and distributed applications easier. Project Tye includes a local orchestrator to make developing microservices easier and the ability to deploy microservices to Kubernetes with minimal configuration. See more at <a href="https://github.com/dotnet/tye">https://github.com/dotnet/tye</a></p>
</blockquote>

<p>As a developer, we want to build a great application with the best behavior and usability for end-users. But to build something that great also comes up with a lot of trouble when we are trying to find and fix bugs in the application. Normally, we are using a debug tool to overcome that obstacle. </p>

<p>At the moment, some guys at Microsoft have published some of the Visual Code extensions for <a href="https://github.com/dapr/docs/tree/master/howto/vscode-debugging-daprd">debug the Dapr app</a>. And one question that just comes to my mind that whether we can debug it using Visual Studio (forgive me because of my habit of using Visual Studio for a long time, and one more reason is using Resharper to increase my productivity in coding and refactoring codes). So I got no clue to find the way to debug the Dapr app on my Visual Studio so far.</p>

<p>But this week, when some of my colleagues at the company keeps talking a lot about <code>tye</code> - a tool which helps to simplify the development with <code>Docker</code> and without need to use <code>docker-compose</code> as well as <code>Helm</code> chart. After came home, I gave it a try and found out some of the interesting features of it. I spent sometimes to deep dive into it and raised some questions at <a href="https://github.com/dotnet/tye/issues/246">its Github repository</a> as well as doing some of <a href="https://github.com/thangchung/practical-dapr">the practice with Dapr</a>. Thank you <a href="https://twitter.com/davidfowl">@davidfowl</a> for his passion to explain and guide me to start with <code>tye</code>. By walking through its documentation, I found out the way to debug the Dapr apps with this new tool. The remaining of this article will show you how to debug the Dapr application with it.</p>

<p>First off, we start with the high-level architecture of my application as below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Hw5C--Wv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/pwr4etxlxbfkj8p11btb.jpg"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Hw5C--Wv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/pwr4etxlxbfkj8p11btb.jpg" alt="Alt Text" loading="lazy"></a></p>

<blockquote>
<p>Plz, forget ports inside the application on the picture above</p>
</blockquote>

<p>The project structure is following</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9nl9GWDO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/ut0p5bcg8xr1nazzq0n4.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9nl9GWDO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/ut0p5bcg8xr1nazzq0n4.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>In this article, I will show you how to debug the <code>inventory-api</code> which is hosted as the gRPC protocol on Dapr gRPC Server. And it is called <code>product-catalog-api</code>.</p>

<p>The relationship of how our applications, <code>tye</code>, and <code>Dapr</code> as below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--L6bWs0vM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/25bj28fpfwf03xxd9b7l.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--L6bWs0vM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/25bj28fpfwf03xxd9b7l.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>We have <code>tye.yaml</code> file at the root of the project as below<br>
</p>

<div><pre><code><span>name</span><span>:</span> <span>practical-dapr</span>
<span>extensions</span><span>:</span>
<span>-</span> <span>name</span><span>:</span> <span>dapr</span>
<span>registry</span><span>:</span> <span>dapracr.azurecr.io</span>
<span>services</span><span>:</span>
<span>-</span> <span>name</span><span>:</span> <span>sqlserver</span>
  <span>image</span><span>:</span> <span>mcr.microsoft.com/mssql/server:2017-latest</span>
  <span>env</span><span>:</span>
    <span>-</span> <span>name</span><span>:</span> <span>SA_PASSWORD</span>
      <span>value</span><span>:</span> <span>"</span><span>P@ssw0rd"</span>
    <span>-</span> <span>name</span><span>:</span> <span>ACCEPT_EULA</span>
      <span>value</span><span>:</span> <span>"</span><span>Y"</span>
  <span>bindings</span><span>:</span>
    <span>-</span> <span>port</span><span>:</span> <span>1433</span>
<span>-</span> <span>name</span><span>:</span> <span>redis</span>
  <span>image</span><span>:</span> <span>redis</span>
  <span>bindings</span><span>:</span>
    <span>-</span> <span>port</span><span>:</span> <span>6973</span>
<span>-</span> <span>name</span><span>:</span> <span>graph-api</span>
  <span>project</span><span>:</span> <span>src/GraphApi/CoolStore.GraphApi/CoolStore.GraphApi.csproj</span>
<span>-</span> <span>name</span><span>:</span> <span>product-catalog-api</span>
  <span>project</span><span>:</span> <span>src/ProductCatalog/CoolStore.ProductCatalogApi/CoolStore.ProductCatalogApi.csproj</span>
<span>-</span> <span>name</span><span>:</span> <span>inventory-api</span>
  <span>project</span><span>:</span> <span>src/Inventory/CoolStore.InventoryApi/CoolStore.InventoryApi.csproj</span>
</code></pre></div>



<p>Open up the terminal and run<br>
</p>





<p>It will let you run all services and its docker image related. Open your browser and type <code>http://localhost:8000</code>, you should see</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1tqHmxBu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/np6y66rntkzh7wsj365v.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1tqHmxBu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/np6y66rntkzh7wsj365v.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>All the applications with <code>host</code> and <code>port</code> have already been binding.</p>

<p>Now is the time we debug it. Close it and go back to your terminal and <code>Ctrl + C</code>, then type<br>
</p>

<div><pre><code><span>$ </span>tye run <span>--debug</span> src/Inventory/CoolStore.InventoryApi
</code></pre></div>



<blockquote>
<p>You can type <code>tye run --debug *</code> to debug all the applications</p>
</blockquote>

<p>Now open up <code>http://localhost:8000</code>, again</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--3vWkQY2O--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/9yo9mmc7z1cg04p5v09w.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3vWkQY2O--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/9yo9mmc7z1cg04p5v09w.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>What you can see here is the difference between <code>host</code> and <code>port</code> of all Dapr applications in the project which means <code>tye</code> will take care of <code>dynamic host</code> and <code>dynamic port</code> binding for our application. You don't need to care about declare your ports in your Dapr applications.</p>

<p>Open up your Visual Studio, and type <code>Ctrl + Alt  + P</code>, then choose the process with the name <code>CoolStore.InventoryApi</code> as the picture below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Dvxo8dCW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/3cnlsb9x3xe3rvcmemtp.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Dvxo8dCW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/3cnlsb9x3xe3rvcmemtp.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>Then go to your <code>inventory-api</code> to set your debug point as </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--9EEYxUoQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/hp1pmqmyq1a9x25ar8hh.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--9EEYxUoQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/hp1pmqmyq1a9x25ar8hh.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>Now, back to your browser and click to <code>http://localhost:64203</code>, and it should redirect you to the GraphQL playground, and type as below<br>
</p>

<div><pre><code><span>{</span>
  <span>products</span> <span>{</span>
    <span>edges</span> <span>{</span>
      <span>name</span>
      <span>categoryName</span>
      <span>inventoryLocation</span>
    <span>}</span>
    <span>totalCount</span>
  <span>}</span>
<span>}</span>
</code></pre></div>



<p>Click to <code>Play</code> button, button as below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kcBGhBdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/flixt1werhez1oub9sis.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kcBGhBdR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/flixt1werhez1oub9sis.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>After clicking it, you should see the debug break-point will appear as below</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--erELcWDd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/19y2xus086i0i6yeekti.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--erELcWDd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/19y2xus086i0i6yeekti.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>Then, you can add a watch as</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--E9ON04dY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kf7rp5l9kivy4pyikvod.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--E9ON04dY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kf7rp5l9kivy4pyikvod.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>Finally, the result should output like</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2Ys_6GJZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/mdt8u62l5m7ree3pn6dd.JPG"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2Ys_6GJZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/mdt8u62l5m7ree3pn6dd.JPG" alt="Alt Text" loading="lazy"></a></p>

<p>As you see, we can debug <code>Dapr</code> applications with Visual Studio smoothly, it still a <code>Dapr</code> application, can communicate with other <code>Dapr</code> applications, but it is intercepted by <code>tye</code> tool. Brilliant, right? </p>

<ul>
<li>OS
</li>
</ul>





<ul>
<li>Dapr
</li>
</ul>

<div><pre><code><span>$ </span>dapr <span>--version</span>
CLI version: 0.5.0
Runtime version: 0.5.0
</code></pre></div>



<ul>
<li>Tye
</li>
</ul>

<div><pre><code><span>$ </span>tye <span>--version</span>
0.1.0-alpha.20179.5+4f73950de52831e655463851ada7ae366f95b28c
</code></pre></div>



<p>You need to have <a href="https://www.docker.com/products/docker-desktop">Docker for Desktop</a> on your machine to get starting.</p>

<p>Dapr - <a href="https://github.com/dapr/docs/tree/master/getting-started">https://github.com/dapr/docs/tree/master/getting-started</a><br>
Tye - <a href="https://github.com/dotnet/tye/blob/master/docs/getting_started.md">https://github.com/dotnet/tye/blob/master/docs/getting_started.md</a></p>

<p>I hope you like this hacking and happy coding. Don't believe what I said, try it!</p>

<p>Source code of our project is at <a href="https://github.com/thangchung/practical-dapr">https://github.com/thangchung/practical-dapr</a><br>
Thank you for your reading!</p>


      </div>
      
      

    </article>
        

    
      

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>