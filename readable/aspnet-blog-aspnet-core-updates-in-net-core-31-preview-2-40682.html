<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2 - linksfor.dev(s)"/>
    <meta property="article:author" content="Daniel RothPrincipal Program Manager,&#xA0;ASP.NETFollow Daniel"/>
    <meta property="og:description" content=".NET Core 3.1 Preview 2 is now available. This release is primarily focused on bug fixes, but it contains a few new features as well.&#xA;Here&#x2019;s what&#x2019;s new in this release for ASP.NET Core:&#xA;&#xA;New component tag helper&#xA;Prevent default actions for events in Blazor apps&#xA;Stop event propagation in Blazor apps&#xA;Validation of nested models in Blazor forms&#xA;Detailed errors during Blazor app development&#xA;&#xA;See the release notes for additional details and known issues."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-2/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2</title>
<div class="readable">
        <h1>ASP.NET Blog | ASP.NET Core updates in .NET Core 3.1 Preview 2</h1>
            <div>by Daniel RothPrincipal Program Manager,&#xA0;ASP.NETFollow Daniel</div>
            <div>Reading time: 7-8 minutes</div>
        <div>Posted here: 04 Nov 2019</div>
        <p><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-2/">https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-1-preview-2/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured">

	<div>
                
         <div><div><div><p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/02/DaniethRothPhoto-150x150.jpeg" width="58" height="58" alt="Daniel Roth"></p><p>Daniel</p></div></div></div>     
        <p>November 4th, 2019</p><!-- .entry-meta -->

		<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1-preview-2/">.NET Core 3.1 Preview 2 is now available</a>. This release is primarily focused on bug fixes, but it contains a few new features as well.</p>
<p>Here‚Äôs what‚Äôs new in this release for ASP.NET Core:</p>
<ul>
<li>New component tag helper</li>
<li>Prevent default actions for events in Blazor apps</li>
<li>Stop event propagation in Blazor apps</li>
<li>Validation of nested models in Blazor forms</li>
<li>Detailed errors during Blazor app development</li>
</ul>
<p>See the <a href="https://github.com/dotnet/core/blob/master/release-notes/3.1" target="_blank">release notes</a> for additional details and known issues.</p>
<h2>Get started</h2>
<p>To get started with ASP.NET Core in .NET Core 3.1 Preview 2 <a href="https://dotnet.microsoft.com/download/dotnet-core/3.1" target="_blank">install the .NET Core 3.1 Preview 2 SDK</a>.</p>
<p>If you‚Äôre on Windows using Visual Studio, for the best experience we recommend <a href="https://visualstudio.com/preview" target="_blank">installing the latest preview of Visual Studio 2019 16.4</a>. Installing Visual Studio 2019 16.4 will also install .NET Core 3.1 Preview 2, so you don‚Äôt need to separately install it. For Blazor development with .NET Core 3.1, Visual Studio 2019 16.4 is <em>required</em>.</p>
<p>Alongside this .NET Core 3.1 Preview 2 release, we‚Äôve also released a Blazor WebAssembly update. To install the latest Blazor WebAssembly template also run the following command:</p>
<pre><code><span>dotnet </span><span>new</span><span> </span><span>-</span><span>i </span><span>Microsoft</span><span>.</span><span>AspNetCore</span><span>.</span><span>Blazor</span><span>.</span><span>Templates</span><span>::</span><span>3.1</span><span>.</span><span>0</span><span>-</span><span>preview2</span><span>.</span><span>19528.8</span></code></pre>
<h2>Upgrade an existing project</h2>
<p>To upgrade an existing ASP.NET Core 3.1 Preview 1 project to 3.1 Preview 2:</p>
<ul>
<li>Update all Microsoft.AspNetCore.* package references to 3.1.0-preview2.19528.8</li>
</ul>
<p>See also the full list of <a href="https://github.com/aspnet/announcements/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+label%3A3.1.0+label%3A%22Breaking+change%22" target="_blank">breaking changes</a> in ASP.NET Core 3.1.</p>
<p>That‚Äôs it! You should now be all set to use .NET Core 3.1 Preview 2!</p>
<h2>New component tag helper</h2>
<p>Using Razor components from views and pages is now more convenient with the new component tag helper.</p>
<p>Previously, rendering a component from a view or page involved using the <code>RenderComponentAsync</code> HTML helper.</p>
<pre><code><span>@(</span><span>await </span><span>Html</span><span>.</span><span>RenderComponentAsync</span><span>&lt;</span><span>Counter</span><span>&gt;(</span><span>RenderMode</span><span>.</span><span>ServerPrerendered</span><span>,</span><span> </span><span>new</span><span> </span><span>{</span><span> </span><span>IncrementAmount</span><span> </span><span>=</span><span> </span><span>10</span><span> </span><span>}))</span></code></pre>
<p>The new component tag helper simplifies the syntax for rendering components from pages and views. Simply specify the type of the component you wish to render as well as the desired render mode. You can also specify component parameters using attributes prefixed with <code>param-</code>.</p>
<pre><code><span>&lt;component</span><span> </span><span>type</span><span>=</span><span>"typeof(Counter)"</span><span> </span><span>render-mode</span><span>=</span><span>"ServerPrerendered"</span><span> </span><span>param-IncrementAmount</span><span>=</span><span>"10"</span><span> </span><span>/&gt;</span></code></pre>
<p>The different render modes allow you to control how the component is rendered:</p>
<table>
<thead>
<tr>
<th>RenderMode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Static</td>
<td>Renders the component into static HTML.</td>
</tr>
<tr>
<td>Server</td>
<td>Renders a marker for a Blazor Server application. This doesn‚Äôt include any output from the component. When the user-agent starts, it uses this marker to bootstrap the Blazor app.</td>
</tr>
<tr>
<td>ServerPrerendered</td>
<td>Renders the component into static HTML and includes a marker for a Blazor Server app. When the user-agent starts, it uses this marker to bootstrap the Blazor app.</td>
</tr>
</tbody>
</table>
<h2>Prevent default actions for events in Blazor apps</h2>
<p>You can now prevent the default action for events in Blazor apps using the new <code>@oneventname:preventDefault</code> directive attribute. For example, the following component displays a count in a text box that can be changed by pressing the ‚Äú+‚Äù or ‚Äú-‚Äù keys:</p>
<pre><code><span>&lt;p&gt;</span><span>Press "+" or "-" in change the count.</span><span>&lt;/p&gt;</span><span>
</span><span>&lt;input</span><span> </span><span>value</span><span>=</span><span>"@count"</span><span> @</span><span>onkeypress</span><span>=</span><span>"</span><span>@KeyHandler</span><span>"</span><span> @</span><span>onkeypress:preventDefault</span><span> </span><span>/&gt;</span><span>

@code {
    int count = 0;

    void KeyHandler(KeyboardEventArgs ev)
    {
        if (ev.Key == "+")
        {
            count++;
        }
        else if (ev.Key == "-")
        {
            count--;
        }
    }
}</span></code></pre>
<p>The <code>@onkeypress:preventDefault</code> directive attribute prevents the default action of showing the text typed by the user in the text box. Specifying this attribute without a value is equivalent to <code>@onkeypress:preventDefault="true"</code>. The value of the attribute can also be an expression: <code>@onkeypress:preventDefault="shouldPreventDefault"</code>. You don‚Äôt have to define an event handler to prevent the default action; both features can be used independently.</p>
<h2>Stop event propagation in Blazor apps</h2>
<p>Use the new <code>@oneventname:stopPropagation</code> directive attribute to stop event propagation in Blazor apps.</p>
<p>In the following example, checking the checkbox prevents click events from the child <code>div</code> from propagating to the parent <code>div</code>:</p>
<pre><code><span>&lt;input</span><span> @</span><span>bind</span><span>=</span><span>"stopPropagation"</span><span> </span><span>type</span><span>=</span><span>"checkbox"</span><span> </span><span>/&gt;</span><span>
</span><span>&lt;div</span><span> @</span><span>onclick</span><span>=</span><span>"</span><span>OnClickParentDiv</span><span>"</span><span>&gt;</span><span>
    Parent div
    </span><span>&lt;div</span><span> @</span><span>onclick</span><span>=</span><span>"</span><span>OnClickChildDiv</span><span>"</span><span> @</span><span>onclick:stopPropagation</span><span>=</span><span>"stopPropagation"</span><span>&gt;</span><span>
        Child div
    </span><span>&lt;/div&gt;</span><span>
</span><span>&lt;/div&gt;</span><span>

</span><span>&lt;button</span><span> @</span><span>onclick</span><span>=</span><span>"</span><span>OnClick</span><span>"</span><span>&gt;</span><span>Click me!</span><span>&lt;/button&gt;</span><span>

@code {
    bool stopPropagation;

    void OnClickParentDiv() =&gt; Console.WriteLine("Parent div clicked.");
    void OnClickChildDiv() =&gt; Console.WriteLine("Child div clicked.");
}</span></code></pre>
<h2>Detailed errors during Blazor app development</h2>
<p>When your Blazor app isn‚Äôt functioning properly during development, it‚Äôs important to get detailed error information so that you can troubleshoot and fix the issues. Blazor apps now display a gold bar at the bottom of the screen when an error occurs.</p>
<p>During development, in Blazor Server apps, the gold bar will direct you to the browser console where you can see the exception that has occurred.</p>
<p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/11/blazor-detailed-errors-dev.png" alt="Blazor detailed errors in development"></p>
<p>In production, the gold bar notifies the user that something has gone wrong, and recommends the user to refresh the browser.</p>
<p><img src="https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/11/blazor-detailed-errors-prod.png" alt="Blazor detailed errors in production"></p>
<p>The UI for this error handling experience is part of the updated Blazor project templates so that it can be easily customized:</p>
<p><em>_Host.cshtml</em></p>
<pre><code><span>&lt;div</span><span> </span><span>id</span><span>=</span><span>"blazor-error-ui"</span><span>&gt;</span><span>
    </span><span>&lt;environment</span><span> </span><span>include</span><span>=</span><span>"Staging,Production"</span><span>&gt;</span><span>
        An error has occurred. This application may no longer respond until reloaded.
    </span><span>&lt;/environment&gt;</span><span>
    </span><span>&lt;environment</span><span> </span><span>include</span><span>=</span><span>"Development"</span><span>&gt;</span><span>
        An unhandled exception has occurred. See browser dev tools for details.
    </span><span>&lt;/environment&gt;</span><span>
    </span><span>&lt;a</span><span> </span><span>href</span><span>=</span><span>""</span><span> </span><span>class</span><span>=</span><span>"reload"</span><span>&gt;</span><span>Reload</span><span>&lt;/a&gt;</span><span>
    </span><span>&lt;a</span><span> </span><span>class</span><span>=</span><span>"dismiss"</span><span>&gt;</span><span>üóô</span><span>&lt;/a&gt;</span><span>
</span><span>&lt;/div&gt;</span></code></pre>
<h2>Validation of nested models in Blazor forms</h2>
<p>Blazor provides support for validating form input using data annotations with the built-in <code>DataAnnotationsValidator</code>. However, the <code>DataAnnotationsValidator</code> only validates top-level properties of the model bound to the form.</p>
<p>To validate the entire object graph of the bound model, try out the new <code>ObjectGraphDataAnnotationsValidator</code> available in the experimental Microsoft.AspNetCore.Blazor.DataAnnotations.Validation package:</p>
<pre><code><span>&lt;EditForm</span><span> </span><span>Model</span><span>=</span><span>"@model"</span><span> </span><span>OnValidSubmit</span><span>=</span><span>"</span><span>@HandleValidSubmit</span><span>"</span><span>&gt;</span><span>
    </span><span>&lt;ObjectGraphDataAnnotationsValidator</span><span> </span><span>/&gt;</span><span>
    ...
</span><span>&lt;/EditForm&gt;</span></code></pre>
<p>The Microsoft.AspNetCore.Blazor.DataAnnotations.Validation is not slated to ship with .NET Core 3.1, but is provided as an experimental package to get early feedback.</p>
<h2>Give feedback</h2>
<p>We hope you enjoy the new features in this preview release of ASP.NET Core! Please let us know what you think by filing issues on <a href="https://github.com/aspnet/aspnetcore/issues" target="_blank">GitHub</a>.</p>
<p>Thanks for trying out ASP.NET Core!</p>
        
        
        
        

		        
        
        
	</div><!-- .entry-content -->
    
    </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>