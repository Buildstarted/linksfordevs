<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Dear Google Cloud: Your Deprecation Policy is Killing You - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Dear Google Cloud: Your Deprecation Policy is Killing You - linksfor.dev(s)"/>
    <meta property="article:author" content="https://medium.com/@steve.yegge"/>
    <meta property="og:description" content="God dammit, I didn&#x2019;t want to blog again. I have so much stuff to do. Blogging takes time and energy and creativity that I could be putting&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://medium.com/@steve.yegge/dear-google-cloud-your-deprecation-policy-is-killing-you-ee7525dc05dc"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Dear Google Cloud: Your Deprecation Policy is Killing You</title>
<div class="readable">
        <h1>Dear Google Cloud: Your Deprecation Policy is Killing You</h1>
            <div>by https://medium.com/@steve.yegge</div>
            <div>Reading time: 28-36 minutes</div>
        <div>Posted here: 15 Aug 2020</div>
        <p><a href="https://medium.com/@steve.yegge/dear-google-cloud-your-deprecation-policy-is-killing-you-ee7525dc05dc">https://medium.com/@steve.yegge/dear-google-cloud-your-deprecation-policy-is-killing-you-ee7525dc05dc</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section><div><div><div><div><div><div><div><a rel="noopener" href="https://medium.com/@steve.yegge?source=post_page-----ee7525dc05dc----------------------"><div><p><img alt="Steve Yegge" src="https://miro.medium.com/fit/c/96/96/1*OrBdZ2GUUicWcT6x8KSYZg.png" width="48" height="48"></p></div></a></div></div></div></div></div><p id="a428" data-selectable-paragraph="">God dammit, I didn’t want to blog again. I have so much stuff to do. Blogging takes time and energy and creativity that I could be putting to good use: my novels, my <a href="https://www.youtube.com/watch?v=VK244wAQ3Qo" target="_blank" rel="noopener nofollow">music</a>, my game, and so on. But you get me riled enough, and I have to blog.</p><p id="983a" data-selectable-paragraph="">Let’s get this over with, then.</p><p id="b6e0" data-selectable-paragraph="">I’ll begin with a small but pretty neat story from my early days at Google. For the record, I know I’ve said some perhaps unkind things about Google lately, because it’s frustrating when your corporate alma mater makes incompetent business decisions on the regular. But Google’s internal infrastructure is really quite extraordinary, and you could argue that there is still none better today. The people who built Google were far better engineers than I will <em>ever</em> be, as this anecdote should serve to illustrate.</p><p id="2586" data-selectable-paragraph="">First a wee bit of background: Google has a storage technology called <a href="https://en.wikipedia.org/wiki/Bigtable" target="_blank" rel="noopener nofollow">Bigtable</a>. Bigtable was a remarkable technical achievement, being one of the first (if not <em>the</em> first) “infinitely scalable” key-value stores: the beginning of NoSQL, basically. These days Bigtable still holds up well in the rather crowded space of K/V stores, but back in the day (2005) it was breathtakingly cool.</p><p id="2f06" data-selectable-paragraph="">One fun bit of trivia about Bigtable is that they had these internal control-plane entities (as part of the implementation) called tablet servers, which had large indexes, and at some point they became a scaling bottleneck. So the Bigtable engineers scratched their heads over how to make it scale, and realized that they could replace the tablet servers with Bigtables to unblock the scaling. So Bigtable is part of its own implementation. It’s Bigtables all the way down.</p><p id="0205" data-selectable-paragraph="">Another cool bit of trivia is that for a time, Bigtables became popular and ubiquitous inside Google and everyone their dog had one. So at one Friday’s TGIF all-hands, Larry Page casually asked in passing, “Why do we have more than one Bigtable? Why isn’t there just one?” Because in theory, one Bigtable should have sufficed for all Google’s storage needs. Of course they never did migrate to just one, for practical software engineering reasons (e.g. blast radius), but the theory was interesting. One database for the whole universe. <em>(Side note: Anyone know if Sable does this at Amazon?)</em></p><p id="04cd" data-selectable-paragraph="">Anyway, here’s my story, to get us started on my rant.</p><p id="fceb" data-selectable-paragraph="">One day, after I’d been working at Google for just over 2 years, I got an email from the Bigtable engineering team. It said something along the lines of:</p><p id="d48c" data-selectable-paragraph=""><em>Dear Steve,</em></p><p id="0bf7" data-selectable-paragraph=""><em>Greetings from the Bigtable team. We wanted to let you know that you are running a very, very old Bigtable binary in the [some data center name] data center. That version is no longer supported, and we would like to work with you to help you upgrade to the latest version.</em></p><p id="02a5" data-selectable-paragraph=""><em>Please let us know if you can schedule some time to work with us on this.</em></p><p id="0770" data-selectable-paragraph=""><em>Best,</em></p><p id="b3af" data-selectable-paragraph=""><em>Bigtable Team</em></p><p id="4a24" data-selectable-paragraph="">You get a lot of email at Google, as you can imagine, and when I glanced at this one, this is what I first perceived it to be saying:</p><p id="03d2" data-selectable-paragraph=""><em>Dear </em><strong><em>RECIPIENT</em></strong><em>,</em></p><p id="f81e" data-selectable-paragraph=""><em>Greetings from Some Team. We wanted to let you know blah blah blah blah blah blah blah. Blah blah blah blah blah blah blah BLAH, and blah blah blah blah immediately.</em></p><p id="ead9" data-selectable-paragraph=""><em>Please let us know if you can schedule some of your precious time to blah blah blah.</em></p><p id="702a" data-selectable-paragraph=""><em>Best,</em></p><p id="7355" data-selectable-paragraph=""><em>Some Team</em></p><p id="5b9c" data-selectable-paragraph="">I almost deleted it on the spot, but there was this lingering, nagging feeling that it didn’t <em>quite</em> feel like a form letter, even though it <em>obviously</em> wasn’t for me, since I didn’t have a Bigtable.</p><p id="e46e" data-selectable-paragraph="">But it was weird.</p><p id="d293" data-selectable-paragraph="">For the rest of the day, as I was alternating between working and deciding which species of gummy shark to try next in the micro-kitchens, of which there were at least three close enough to hit from my seat with a well-aimed biscuit, I thought about that email with a growing sense of mild anxiety.</p><p id="9431" data-selectable-paragraph="">They had used my name specifically. And the email had been sent to my email address and nobody else’s, and not by cc: or bcc:. The tone was very personal and pointed. Maybe it was some sort of mistake?</p><p id="19bc" data-selectable-paragraph="">Curiosity finally got the better of me, and I went to look at my Borg console in the data center they’d mentioned in the email.</p><p id="8645" data-selectable-paragraph="">And sure enough, I was running a Bigtable there. Whaaaaat? I looked at its contents, and lo! It was from the Bigtable codelab I’d run back in my first week as a Noogler, in June 2005. The codelab had you fire up a Bigtable so you could programmatically write some values to it, and I had apparently never shut it down afterwards. It was still running there, over 2 years later.</p><p id="9f7b" data-selectable-paragraph="">There are several remarkable aspects to this story. One is that running a Bigtable was so inconsequential to Google’s scale that it took 2 years before anyone even noticed it, and even then, only because the version was old. As a point of comparison, I considered using <a href="https://cloud.google.com/bigtable" target="_blank" rel="noopener nofollow">Google Cloud Bigtable</a> for my online game, but it costs an estimated $16,000/year for an <em>empty</em> Bigtable on GCP. I’m not saying they’re gouging you, but in my own personal opinion, that feels like a lot of money for an empty fucking database.</p><p id="b925" data-selectable-paragraph="">Another remarkable aspect is that <em>it was still running after 2 years</em>. WTF? Data centers come and go; they experience outages, they undergo routine maintenance, they change all the time. Hardware gets upgraded, network switches swap out, everything is constantly being improved. How the heck were they able to keep my software running for 2 years in the face of all that change? It may feel like a humdrum achievement in 2020, but in 2005–2007 it was pretty impressive.</p><p id="73e4" data-selectable-paragraph="">And then there is in my opinion the most remarkable aspect of all, which is that an unrelated engineering team in some other state was reaching out to <em>me</em>, the owner of some tiny mostly-empty Bigtable instance which had had <em>zero traffic</em> for the past 2 years, asking if they could help me upgrade.</p><p id="d0bb" data-selectable-paragraph="">I thanked them and shut it down and life went on. But I still think about that letter, thirteen years later. Because I sometimes get similar letters from the Google Cloud Platform. They look like this:</p><p id="c068" data-selectable-paragraph=""><em>Dear Google Cloud Platform User,</em></p><p id="ec5e" data-selectable-paragraph=""><em>We are writing to remind you that we are sunsetting [Important Service you are using] as of August 2020, after which you will not be able to perform any updates or upgrades on your instances. We encourage you to upgrade to the latest version, which is in Beta, has no documentation, no migration path, and which we have kindly deprecated in advance for you</em>.</p><p id="9bff" data-selectable-paragraph=""><em>We are committed to ensuring that all developers of Google Cloud Platform are minimally disrupted by this change.</em></p><p id="1d71" data-selectable-paragraph=""><em>Besties Forever,</em></p><p id="b8c9" data-selectable-paragraph=""><em>Google Cloud Platform</em></p><p id="191d" data-selectable-paragraph="">But I barely skim them, because what they are really saying is:</p><p id="9035" data-selectable-paragraph=""><em>Dear </em><strong><em>RECIPIENT</em></strong><em>,</em></p><p id="63a8" data-selectable-paragraph=""><em>Fuck yooooouuuuuuuu. Fuck you, fuck you, Fuck You. Drop whatever you are doing because it’s not important. What is important is OUR time. It’s costing us time and money to support our shit, and we’re tired of it, so we’re not going to support it anymore. So drop your fucking plans and go start digging through our shitty documentation, begging for scraps on forums, and oh by the way, our new shit is COMPLETELY different from the old shit, because well, we fucked that design up pretty bad, heh, but hey, that’s YOUR problem, not our problem.</em></p><p id="6aa7" data-selectable-paragraph=""><em>We remain committed as always to ensuring everything you write will be unusable within 1 year.</em></p><p id="7d39" data-selectable-paragraph=""><em>Please go fuck yourself,</em></p><p id="589b" data-selectable-paragraph=""><em>Google Cloud Platform</em></p><p id="f3b8" data-selectable-paragraph="">And the thing is, I get these about once a month. It happens so often and so reliably that I have been inexorably pushed <em>away</em> from GCP, towards cloud agnosticism. I no longer take dependencies on their proprietary service offerings, because it actually winds up being less DevOps work, on average, to support open-source systems running on bare VMs, than to try to keep up with Google’s deprecation treadmill.</p><p id="77c1" data-selectable-paragraph="">Before I return to shitting on Google Cloud Platform, because boyo I am nowhere <em>near</em> finished yet, let’s go visit how software engineering works in some other domains. Google engineers pride themselves on their software engineering discipline, and that’s actually what gets them into trouble. Pride is a trap for the unwary, and it has ensnared many a Google team into thinking that their decisions are always right, and that correctness (by some vague fuzzy definition) is more important than customer focus.</p><p id="1b8c" data-selectable-paragraph="">I’m going to pick a few somewhat arbitrary examples from other big software systems, but hopefully you’ll be able to start spotting the pattern everywhere; that pattern being: <strong>Backwards compatibility keeps systems alive and relevant for decades</strong>.</p><p id="c284" data-selectable-paragraph="">Backwards compatibility is a design goal of all successful systems that are designed for <em>open</em> use; that is, implemented as open source, and/or guided by open standards. I feel like I’m stating something that’s so obvious that we should all be awkwardly embarrassed, but no. It’s a political issue, so I need examples.</p><p id="94db" data-selectable-paragraph="">The first system I’ll pick is the oldest: GNU Emacs, which is a sort of hybrid between Windows Notepad, a monolithic-kernel operating system, and the International Space Station. It’s a bit tricky to explain, but in a nutshell, Emacs is a platform written in 1976 (yes, almost half a century ago) for writing software to make you more productive, masquerading as a text editor.</p><p id="6e9d" data-selectable-paragraph="">I use Emacs every single day. Yes, I’m also using IntelliJ every day, and that has grown into a powerful tooling platform in its own right. But writing software extensions for IntelliJ is a much more ambitious and complex undertaking than writing extensions for Emacs. And more importantly, stuff lasts <em>forever</em> on Emacs.</p><p id="673f" data-selectable-paragraph="">I’m still using software that I wrote for Emacs back in 1995. And I’m sure there are people who are still using software they wrote for Emacs from the mid-80s, if not earlier. Every once in a while it might require a minor tweak, but it’s really quite rare. I’m not aware of anything I’ve ever written for Emacs (and I’ve written a lot) that was ever forced into re-architecture.</p><p id="cf77" data-selectable-paragraph="">Emacs does have a deprecation facility called make-obsolete. Emacs’ terminology for fundamental software engineering concepts (like what is a “window”) are often different from the industry conventions, because Emacs invented them long, long ago. The perils of being before your time: Your names are all wrong. But Emacs does indeed have deprecation, called <em>obsolescence</em> in their lingo.</p><p id="2bec" data-selectable-paragraph="">However, the Emacs folks seem to have a different working definition. A different underlying philosophy, if you will.</p><p id="f6c6" data-selectable-paragraph="">In the Emacs world (and in many other domains, some of which we’ll explore below), when they make an API obsolete, they are basically saying: “You really shouldn’t use this approach, because even though it works, it suffers from various deficiencies which we enumerate here. But in the end it’s your call.”</p><p id="cf46" data-selectable-paragraph="">Whereas in the Google world, deprecation means: “We are breaking our commitments to you.” It really does. That’s what it ultimately means. It means they are going to force you to do some work, possibly a large amount of rework, <em>on a regular basis</em>, as punishment for doing what they told you to do originally — as punishment for listening to their glossy marketing on their <a href="https://cloud.google.com/gcp" target="_blank" rel="noopener nofollow">website</a>: Better software. Faster! You do <em>everything</em> they tell you to do, and you launch your application or service, and then, bang, a year or two later it breaks down.</p><p id="9f63" data-selectable-paragraph="">This is like selling you a used car that they know is going to break down in under 1000 miles.</p><p id="4411" data-selectable-paragraph="">These are two very, very different philosophical definitions of “deprecation”. Google’s definition reeks of <a href="https://en.wikipedia.org/wiki/Planned_obsolescence" target="_blank" rel="noopener nofollow">planned obsolescence</a>. I don’t believe that it’s <em>actually</em> planned obsolescence in the same sense that, say, Apple perpetrates. But Google definitely plans to break your stuff, in a roundabout way. I know because I worked there as a software engineer for 12+ years. They have loose internal guidelines about how much backwards compatibility to bake into service offerings, but in the end it’s up to each individual team or service. There are no corporate-level or engineering-level guidelines, and the <em>longest</em> anyone has the courage to recommend, in terms of deprecation cycles, is “try to give your customers 6–12 months to upgrade before you drape them over the barrel.”</p><p id="de52" data-selectable-paragraph="">This is hurting them far more than they realize, and it will continue to hurt them for years to come, because it’s not part of their DNA to care about customers. More on this below.</p><p id="6928" data-selectable-paragraph="">For the moment, I’m going to make the bold assertion that Emacs is successful in large part, perhaps even <em>mostly</em>, because they take backwards compatibility so seriously. In fact, that’s the thesis of this essay. <mark>Successful long-lived open systems owe their success to building decades-long micro-communities around </mark><mark><em>extensions/plugins</em></mark><mark>, also known as a </mark><mark><em>marketplace</em></mark><mark>.</mark> I’ve ranted about Platforms before, and how important they are, and how Google has never once in their entire corporate history ever really understood what goes into making a successful open Platform, not counting Android or Chrome.</p><p id="33e4" data-selectable-paragraph="">Actually I should talk about Android briefly, because you’re probably thinking, hey, what about Android?</p><p id="c8f6" data-selectable-paragraph="">First, <em>Android is not Google</em>. They have almost nothing to do with each other. Android is a company that was purchased by Google in July 2005, and that company has been allowed to run more or less autonomously, and in fact has remained largely intact through the intervening years. Android is an infamously hairy tech stack, and a just-as-infamously prickly organization. As one Googler put it, “One does not simply walk into Android.”</p><p id="17a1" data-selectable-paragraph="">I’ve done my share of ranting about how bad some of Android’s early design decisions have been. Heck, at the time I was doing that ranting, they were busy rolling out shit like Instant Apps, which is now (surprise!) <a href="https://android-developers.googleblog.com/2019/04/google-play-instant-feature-plugin.html#:~:text=When%20building%20your%20app%2C%20you,bundle%20as%20soon%20as%20possible." target="_blank" rel="noopener nofollow">deprecated</a>, and haha on you if you were dumb enough to listen to them when they told you to port all your stuff to Instant Apps.</p><p id="f23b" data-selectable-paragraph="">But there’s a difference here, a material difference, which is that the Android folks actually DO understand how important Platforms are, they go <em>well out of their way</em> to prevent breaking your old Android code. In fact, their efforts to keep backward compatibility are so extreme that even I, during my brief stint in Android-land a few years back, found myself trying to convince them to drop support for some of the oldest devices and APIs. (I was wrong, as I’ve been about many other things past and present. Sorry Android folks! Now that I’ve visited Indonesia, I see why we need them.)</p><p id="377f" data-selectable-paragraph="">The Android folks take backwards compatibility to almost unimaginable extremes, which piles on massive amounts of legacy technical debt in their systems and toolchains. Oh boy, you should see some of the crazy stuff they have to do in their build system, all in the name of compatibility.</p><p id="bde0" data-selectable-paragraph="">For this, I award Android the coveted You’re Not Google award. You really don’t want to be Google. They don’t know how to build platforms that can last, whereas Android <em>does</em> know how to do it. And so Google is being very wise in one respect: letting the Android folks do things their way.</p><p id="3ec4" data-selectable-paragraph="">Instant Apps was a pretty dumb idea, though. You know why? Because it required you to <em>rewrite and re-architect your application!</em> As if people are just going to up and rewrite 2 million apps. I’m guessing Instant Apps was probably a Googler’s idea.</p><p id="cef2" data-selectable-paragraph="">But you see the difference here. Backwards compatibility comes with a steep cost, and Android has chosen to bear the burden of that cost, whereas Google insists that <em>you</em>, the paying customer, bear that burden.</p><p id="4d09" data-selectable-paragraph="">You can see Android’s commitment to backwards compatibility in their APIs. It’s a sure sign, when there are four or five different coexisting subsystems for doing literally the same thing, that underlying it all is a commitment to backwards compatibility. Which in the Platforms world, is synonymous with commitment to your customers, and to your marketplace.</p><p id="50ec" data-selectable-paragraph="">Google’s pride in their software engineering hygiene is what gets them into trouble here. They don’t like it when there are lots of different ways to do the same thing, with older, less-desirable ways sitting alongside newer fancier ways. It increases the learning curve for newcomers to the system, it increases the burden of supporting the legacy APIs, it slows down new feature velocity, and the worst sin of all: it’s ugly. Google is like Lady Ascot in Tim Burton’s Alice in Wonderland:</p><p id="f219" data-selectable-paragraph=""><strong>Lady Ascot</strong>: Alice, do you know what I fear most?</p><p id="8b14" data-selectable-paragraph=""><strong>Alice Kingsley</strong>: The decline of the aristocracy?</p><p id="87b2" data-selectable-paragraph=""><strong>Lady Ascot</strong>: <em>Ugly grandchildren</em>.</p><p id="e941" data-selectable-paragraph="">To explore the tradeoff of Ugly vs Practical, let’s take a peek at a third successful platform (after Emacs and Android) and see how it fares: Java itself.</p><p id="0fbb" data-selectable-paragraph="">Java has <em>tons</em> of deprecated APIs. Deprecation is super popular with Java programmers, more so than for most programming languages. Java itself, the core language and libraries, deprecates APIs all the time.</p><p id="f717" data-selectable-paragraph="">To take just one of thousands of examples, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Thread.html#stop()" target="_blank" rel="noopener nofollow">killing threads</a> is deprecated. It’s been deprecated since Java 1.2, released in December 1998. It’s been 22 years since they deprecated it.</p><p id="2b55" data-selectable-paragraph="">My live production code still kills threads <em>every day</em>. Is that a good thing? Absolutely! I mean, obviously if I were to rewrite the code today I’d do it differently. But my game code, which has been able to make hundreds of thousands of people happy over the past 2 decades, was written to kill worker threads that take too long, and <em>I’ve never had to change it.</em> I know my system best, and I have literally 25 years of experience with running it in production, and I can tell you: In my use case, killing these particular worker threads is <em>harmless</em>. It is not worth it to focus my time and energy on rewriting that code, and praise be unto Larry Ellison (I guess), since Oracle has never made me rewrite it.</p><p id="dd33" data-selectable-paragraph="">I guess Oracle understands Platforms too. Go figure.</p><p id="06d9" data-selectable-paragraph="">You can see evidence all through Java’s core APIs of waves of deprecation, like glacier lines in a canyon. There are easily five or six different keyboard focus managers in Java Swing. In fact it’s hard to find a Java API that isn’t deprecated. But they all still work! I think the only time the Java core team will actually <em>remove</em> an API is if it causes a blatant security problem.</p><p id="d186" data-selectable-paragraph="">Here’s the thing, folks: We software developers are all super busy, and we are also faced with competing alternatives in <em>every</em> software domain. At any given time, programmers in language X are looking at language Y as a possible replacement. Oh, you don’t believe me? What about Swift? Everyone’s migrating *to* Swift, not away from it, right? Oho, how little you know. Businesses are taking a mercenary’s accounting of their dual mobile teams (iOS and Android), and starting to realize that those phony-sounding dog-and-pony-show cross-platform development systems like Flutter and React Native have real teeth, and using them could cut their mobile team sizes in half, or alternately, make them twice as productive. There’s real money at stake here. Yes, there are trade-offs, but on the other hand, mooooooooney.</p><p id="12dc" data-selectable-paragraph="">Let’s say hypothetically that Apple was dumb enough to pull a Guido van Rossum, and declare that Swift 6.0 is backwards-incompatible with Swift 5.0, much in the way that Python 3 is incompatible with Python 2.</p><p id="5064" data-selectable-paragraph="">I probably told this story ten years ago, but about fifteen years ago I was at O’Reilly’s Foo Camp with Guido, sitting in a tent with Paul Graham and a bunch of other at-the-time mucky-mucks, waiting for Larry Page to fly out in his personal helicopter, and Guido was droning on tonelessly in the sweltering heat about “Python 3000”, which he had named in honor of the number of years it would take everyone to migrate to it. We kept asking him why he was breaking compatibility, and he’d answer, “Unicode”. And we’d ask him, hey, if we have to rewrite our code, then what other benefits are we going to see? And he’d answer, “Yoooooooooooooouuuuuuuniiiiiiicoooooooode”.</p><p id="a1d3" data-selectable-paragraph="">If you install the Google Cloud Platform “gcloud” SDK, you’ll get this notice:</p><p id="3fdb" data-selectable-paragraph=""><em>Dear RECIPIENT,</em></p><p id="ec71" data-selectable-paragraph=""><em>We would like to remind you that support for Python 2 is deprecated, so fuuuuuuck yoooooooooooooooooooouuuuuu</em></p><p id="0c3c" data-selectable-paragraph="">…and so on. The Circle of Life.</p><p id="856f" data-selectable-paragraph="">But the thing is, every single developer has choices. And if you make them rewrite their code enough times, some of those <em>other</em> choices are going to start looking mighty appealing. They’re not your hostages, as much as you’d like them to be. They are your guests. Python is still a very popular programming language, to be sure — but <em>golly</em> did Python 3(000) create a huge mess for themselves, their communities, and the <em>users</em> of their communities’ software — one that has been a train-wreck in progress for fifteen years and is still kicking.</p><p id="ed33" data-selectable-paragraph="">How much Python software was rewritten in Go (or Ruby, or some other alternative) because of that backwards incompatibility? How much <em>new</em> software was written in something other than Python, which <em>might</em> have been written in Python if Guido hadn’t burned everyone’s house down? It’s hard to say, but I can tell you, it hasn’t been <em>good</em> for Python. It’s a huge mess and everyone is miserable.</p><p id="4135" data-selectable-paragraph="">So let’s say Apple pulls a Guido and breaks compatibility. What do you think will happen? Well, maybe 80–90% of the developers will rewrite their software, if they’re lucky. Which is the same thing as saying, they’re going to lose 10–20% of their user base to some competing language, e.g. Flutter.</p><p id="a8af" data-selectable-paragraph="">Do that a few times, and you’ve lost half your user base. And like in sports, momentum in the programming world is <em>everything</em>. Anyone who shows up on the charts as “lost half their users in the past 5 years” is being flagged as a Big Fat Loser. You don’t want to be trending down in the Platforms world. But that’s exactly where deprecation — the “removing APIs” kind, not the “warning but permitting” kind — will get you, over time: Trending down. Because every time you shake loose some of your developers, you’ve (a) lost them for good, because they are angry at you for breaking your contract, and (b) given them to your competitors.</p><p id="6886" data-selectable-paragraph="">Ironically, I played a role in helping Google become the deprecation-happy prima donnas that they are today, when I built Grok, which is a source-code understanding engine that facilitates automation and tooling on source code itself — similar to an IDE, but as a cloud-based service that stores materialized representations of Google’s entire multi-billion-line source graph in a big datastore.</p><p id="08aa" data-selectable-paragraph="">Grok provided Googlers with a powerful foundation for doing automated refactorings across the entire code base (literally all of Google). Grok can figure out not just your upstream dependencies (who you depend on), but also your <em>downstream</em> dependencies (who depends on you), so when you change an API, you know everyone you’re breaking! So you can make a change and know that every consumer of your API is being updated to the replacement version; in fact, often, via a tool they wrote called Rosie, you can automate it entirely.</p><p id="1652" data-selectable-paragraph="">This permits Google’s code base internally to be almost preternaturally “clean”, as they have these automated mice scurrying about the house, <em>There Will Come Soft Rains</em>-style, cleaning up the dust balls as they rename SomeDespicablyLongFunctionName to SomeDespicablyLongMethodName because someone decided it was an ugly grandchild and it needed to be euthanized.</p><p id="222b" data-selectable-paragraph="">And honestly it works pretty well for Google… <em>internally</em>. I mean, yes, the Go community within Google does get some good-natured laughs at the expense of the Google Java community over the latter’s habit of gratuitous continuous refactoring. If you keep twiddling with something N times, then it implies that not only did you fuck it up N-1 times, but after a while it’s pretty clear you’ve probably fucked it up on the Nth try as well. But by and large, they stay on top of it, and stuff stays “clean”.</p><p id="4ee1" data-selectable-paragraph="">The problem begins when they take that attitude and try to impose it on their Cloud customers and other API users.</p><p id="e703" data-selectable-paragraph="">I’ve walked you a bit through Emacs, Android, and Java; let’s look at one last successful long-lived platform: The Web itself. Boy, HTTP sure has gone through a lot of iterations since 1995 when we were all using blink tags and under-construction signs in our handwritten HTML pages.</p><p id="0e11" data-selectable-paragraph="">But it still works! And those pages still work! That’s right, folks, browsers are some of the world champions at backwards compatibility. Chrome is another example of a rare Google Platform that has their heads screwed on straight, and, you guessed it, Chrome acts effectively like a separate company from the rest of Google.</p><p id="7203" data-selectable-paragraph="">I’ll also give a shout-out to our friends in the Operating Systems business: Windows, Linux, NOT APPLE FUCK YOU APPLE, FreeBSD, and so on, for doing such a great job of backwards compatibility on their successful platforms. (Apple gets like a C-minus at best, since they break shit all the time for no good reason, but somehow the community papers over it on each release, and so far, containers haven’t completely obsoleted OS X… yet.)</p><p id="02d5" data-selectable-paragraph="">But wait, you say. Aren’t you comparing apples to oranges, with standalone single-machine software systems like Emacs/JDK/Android/Chrome to multi-machine systems and APIs like Clouds?</p><p id="c6fd" data-selectable-paragraph="">Well, I tweeted this yesterday, but as a Larry Wall “sucks/rules”-style yardstick, I searched for “deprecated” on Google and Amazon’s developer sites, respectively, and even though AWS has <em>hundreds</em> more service offerings than GCP, Google’s developer docs mention deprecation around 7x as often.</p><p id="e94d" data-selectable-paragraph="">At this point, if anyone at Google is reading this, they’re probably ready to pull out charts, Donald Trump interview style, showing me how they’re actually doing really well, and that I can’t do unfair comparisons like “deprecation mentions as a function of number of service offerings”.</p><p id="6f3d" data-selectable-paragraph="">But after all these years, Google Cloud is still #3 (I still haven’t written my “<strong>How to Aim For #2 and Miss</strong>” blog post about this), and according to some internal sources, there’s some concern that they may sink to #4 soon.</p><p id="8ada" data-selectable-paragraph="">I don’t have a slam-dunk silver-bullet argument for you here, to “prove” my thesis. All I have are the colorful examples I’ve shared, which I’ve accumulated over 30 years as a developer. I’ve alluded to the deeply philosophical nature of this problem; in a sense, it’s politicized within the software communities. Some folks believe that platform <em>developers</em> should shoulder the costs of compatibility, and others believe that platform <em>users</em> (developers themselves) should bear the costs. It’s really that simple. And isn’t politics always about who has to shoulder costs for shared problems?</p><p id="5e62" data-selectable-paragraph="">So it’s political. And there will be angry responses to this rant.</p><p id="475e" data-selectable-paragraph="">As a <em>user</em> of Google Cloud Platform, and also (at Grab) of AWS for 2 years, I can tell you that there’s a <em>world</em> of difference between the philosophies of Amazon and Google when it comes to priorities. I’m not actively developing on AWS, so I don’t have as much of a sense for how often they sunset APIs that they have previously dangled alluringly before unwitting developers. But I have a suspicion it’s nowhere <em>near</em> as often as happens at Google, and I believe wholeheartedly that this source of constant friction, and frustration, in GCP, is one of the biggest factors holding it back.</p><p id="981e" data-selectable-paragraph="">I know I haven’t gone into a lot of specific details about GCP’s deprecations. I can tell you that virtually everything I’ve used, from networking (legacy to VPC) to storage (Cloud SQL v1 to v2) to Firebase (now Firestore with a totally different API) to App Engine (don’t even get me started) to Cloud Endpoints to… I dunno, <em>everything</em>, has forced me to rewrite it all after at most 2–3 years, and they <em>never</em> automate it for you, and often there is <a href="https://stackoverflow.com/questions/47716433/migrate-from-legacy-network-in-gce" target="_blank" rel="noopener nofollow">no documented migration path</a> at all. It’s just crickets.</p><p id="dff5" data-selectable-paragraph="">And every time, I look over at AWS, and I ask myself what the fuck I’m still doing on GCP. They clearly don’t want customers. They want <em>shoppers</em>. Do you see the difference? Let me show you.</p><p id="1e76" data-selectable-paragraph="">Google Cloud has a <a href="https://cloud.google.com/marketplace" target="_blank" rel="noopener nofollow">Marketplace</a> in which people can offer their software solutions, and in order to avoid the empty-restaurant effect, they had to populate it with some offerings, so they contracted with a company called Bitnami to create a bunch of “click to deploy” solutions, or perhaps I should write “solutions”, because they don’t solve a fucking thing. They’re just there as checkboxes, as marketing filler, and Google never gave a shit whether any of them worked from Day One. I know the PMs who were driving it and I can assure you, those men do not give a shit.</p><p id="e7a5" data-selectable-paragraph="">Take <a href="https://console.cloud.google.com/marketplace/details/click-to-deploy-images/percona" target="_blank" rel="noopener nofollow">click-to-deploy Percona</a>, for instance. I was getting fed up with Google Cloud SQL’s shenanigans, and started looking into setting up my own Percona cluster as an alternative. And for once, Google was going to have done something right, and they were going to save me some time and effort with the click of a button!</p><p id="87a3" data-selectable-paragraph="">Go ahead, I dare you. Follow the link and click the button. Choose “yes” to get all the default parameters and deploy the cluster to your Google Cloud project. Haha, joke’s on you; it doesn’t work. None of that shit works. It’s never tested, starts bit-rotting the minute they roll it out, and it wouldn’t surprise me if over half the click-to-deploy “solutions” (now we understand the air quotes) don’t work <em>at all.</em> It’s a completely embarrassing dark alley that you don’t want to wander down.</p><p id="2f76" data-selectable-paragraph="">But Google is straight-up <em>encouraging</em> you to use it. They want you to <em>buy</em> it. It’s transactional for them. They don’t want to <em>support</em> anything. It’s not part of Google’s DNA. Yes, the engineers support each other, as evidenced by my Bigtable anecdote. But for their customer-facing products and services, they have <em>always</em> been ruthless in <a href="https://killedbygoogle.com/" target="_blank" rel="noopener nofollow">shutting down any offering</a> that doesn’t meet their money bar, even if it has millions of users.</p><p id="6d12" data-selectable-paragraph="">And this presents a real problem for GCP, because that DNA is behind all their Cloud offerings. They aren’t committed to supporting anything; it’s well-known that they refuse to host (as a managed service) any third-party software until <em>after</em> AWS has already done the same thing and built a successful business around it, at which point their customers hold them at gunpoint. But that’s the bar, to get Google to support something.</p><p id="9e2f" data-selectable-paragraph="">This lack of a support culture, combined with a “let’s break it in the name of making it prettier” deprecation treadmill, is alienating their developers.</p><p id="fff6" data-selectable-paragraph="">And that’s not a good thing if you want to build a long-lived platform.</p><p id="a964" data-selectable-paragraph="">Google, wake the fuck up. It’s 2020. You are still losing. It’s time to take a hard look in the mirror and answer for yourselves whether you really want to be in the Cloud business.</p><p id="d4be" data-selectable-paragraph="">If you do, then <strong>stop breaking shit</strong>. You guys are rich. We developers are not. So when it comes to shouldering the burden of compatibility, <em>you need to pay for it.</em> Not us.</p><p id="733a" data-selectable-paragraph="">Because there are at least three other really good Clouds out there. They are beckoning.</p><p id="86a6" data-selectable-paragraph="">And now I’ll get back to trying to fix all my broken stuff. Sigh.</p><p id="4b72" data-selectable-paragraph="">Tune in next time!</p></div></div></section></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>