<!DOCTYPE html>
<html lang="en">
<head>
    <title>
This is what end-to-end encryption should look like! - Jitsi - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="This is what end-to-end encryption should look like! - Jitsi - linksfor.dev(s)"/>
    <meta property="og:description" content="Work in Progress! Some of the people watching our repos have been asking us what the deal was with this little new HIPS project (which by the way stands for Hidden In Plain Sight). Well, &#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://jitsi.org/blog/e2ee/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - This is what end-to-end encryption should look like! - Jitsi</title>
<div class="readable">
        <h1>This is what end-to-end encryption should look like! - Jitsi</h1>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 23 Apr 2020</div>
        <p><a href="https://jitsi.org/blog/e2ee/">https://jitsi.org/blog/e2ee/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
				<p><span><strong>Blog</strong></span></p>
				
				
<p><iframe src="https://www.youtube.com/embed/QNKemVNrCbI" width="600" height="400" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p>Some of the people watching our repos have been asking us what the deal was with this little new HIPS project (which by the way stands for Hidden In Plain Sight). Well, now you know! HIPS is about using a new <a href="https://www.chromestatus.com/feature/6321945865879552">Chrome WebRTC API called “Insertable Streams”</a> to add a second layer of end-to-end encryption to media streams in a way that would make them inaccessible to the video router.</p>
<p>While there is a ton of work left on getting authentication and key distribution to work, the project is already advanced enough for us to engage in two very important steps:</p>
<h2>1. Request for Comments</h2>
<p>We are calling out to all crypto enthusiasts to have a look tell us if they see anything wrong with what we are doing. The code is here:</p>
<p><a href="https://github.com/jitsi/lib-jitsi-meet/blob/master/modules/e2ee/E2EEContext.js">https://github.com/jitsi/lib-jitsi-meet/blob/master/modules/e2ee/E2EEContext.js</a></p>
<p>And here’s an explanation of what we meant to achieve with it:</p>
<p><a href="https://github.com/jitsi/lib-jitsi-meet/blob/master/doc/e2ee.md">https://github.com/jitsi/lib-jitsi-meet/blob/master/doc/e2ee.md</a></p>
<h2>2. Demo: an end-to-end encrypted call in Jitsi Meet</h2>
<p>In order to enable quick demos of the feature we allowed for e2ee keys to be passed to Jitsi Meet via a URL parameter. This is already enabled on our alpha deployments as well as on <a href="https://meet.jit.si/">meet.jit.si</a> and people will be able to start playing with it as the necessary features start trickling down the Chrome release pipeline.</p>
<p><em><strong>IMPORTANT NOTE:&nbsp;</strong>This is a demo of an e2e encrypted call and the feature is NOT YET intended for general availability, so play with it all you want, but, for now, in matters where security is paramount we still recommend deploying your own Jitsi Meet instance.&nbsp;</em></p>
<p>Now, let’s see exactly how the demo works. In this case,&nbsp; Yana, Fippo and Saúl are having an end-to-end encrypted conversation using the new e2eekey param. At a glance, other than the amazing people on the call, nothing about it seems noteworthy:</p>
<p><img src="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-1.jpg" alt="" width="700" height="476" srcset="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-1.jpg 700w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-1-300x204.jpg 300w" sizes="(max-width: 700px) 100vw, 700px"></p>
<p>Things get interesting when Emil decides to join the call. What he sees in there is just … an endless stream of rubbish:</p>
<p><img src="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/screenshot-0-rubbish.jpg" alt="" width="1000" height="773" srcset="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/screenshot-0-rubbish.jpg 1000w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/screenshot-0-rubbish-300x232.jpg 300w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/screenshot-0-rubbish-768x594.jpg 768w" sizes="(max-width: 1000px) 100vw, 1000px"></p>
<p>If Emil was a rogue service provider running the bridge for the meeting, he would no longer be able to eavesdrop on it and an attempt to do so would only yield, well we already said that: an endless stream of rubbish.</p>
<p>The only way for Emil to actually participate in the meeting would be if he was made privy to the e2ee key. In this case he was and once he enters it, everything goes back to normal:</p>
<p><img src="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-2-1.jpg" alt="" width="700" height="544" srcset="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-2-1.jpg 700w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/Screen-Shot-2-1-300x233.jpg 300w" sizes="(max-width: 700px) 100vw, 700px"></p>
<p>And that’s it! Now everyone sees everyone else and the conversation can continue in full trust and privacy.</p>

<p>Let’s take a step back. We would very likely all agree that we need our meetings to be protected and secure.</p>
<p>Deciding how to protect them, who to protect them from and how exactly to do this is a significantly more complex topic, that we believe everyone in our community should be informed about. We have <a href="https://jitsi.org/security">already discussed</a> how Jitsi Meet gives you protection by using ephemeral rooms and passwords, so no one undesirable can join your meetings, and how all information sent on the network is strongly encrypted using DTLS-SRTP, so that no one who happens to intercept it can actually understand it.</p>
<p>The final piece missing in this puzzle comes from the fact that DTLS-SRTP in WebRTC is strictly tied to a PeerConnection which means that, when using a video router (like Jitsi Videobridge) is involved, WebRTC and DTLS-SRTP can only provide hop-by-hop encryption. In such scenarios Jitsi Videobridge (JVB) ends up establishing as many encrypted channels as there are participants. This is what protects all data on the network. In order for media from one participant to reach another however, it needs to be extracted from the sender’s crypto context and re-encrypted with the receiver’s.</p>

<p><img src="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/hbh.png" alt="" width="733" height="239" srcset="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/hbh.png 1024w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/hbh-300x98.png 300w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/hbh-768x251.png 768w" sizes="(max-width: 733px) 100vw, 733px"></p>
<p>The need to decrypt information while it traverses Jitsi Videobridge, technically provides whoever controls the JVB machine with an opportunity to access the data. They are hence in a position&nbsp; to hear and see everyone on the meeting.</p>
<p>So far, our only answer to this has been that people who feel they cannot trust existing service providers not to eavesdrop on their meetings, can run their own bridges. We spend considerable effort to make sure this is very easy to do, but however much work we throw at streamlining the deployment process it will never be as simple or as hassle-free as a single click on a link.</p>

<p>Around three years ago, IETF’s <a href="https://datatracker.ietf.org/wg/perc/about/">PERC working group</a> (Privacy Enhanced RTP Conferencing) settled on a transport design that could allow a reasonable path to end-to-end&nbsp; encryption (e2ee) in WebRTC conferences. The idea is that rather than try and tweak the existing DTLS-SRTP implementation, conferences can simply add the additional layer of e2e protection on top of the existing one.</p>

<p><img src="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/e2ee.png" alt="" width="733" srcset="https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/e2ee.png 1021w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/e2ee-300x94.png 300w, https://335wvf48o1332cksy23mw1pj-wpengine.netdna-ssl.com/wp-content/uploads/2020/04/e2ee-768x241.png 768w" sizes="(max-width: 1021px) 100vw, 1021px"></p>
<p>The great news is that the approach just became implementable! The Google WebRTC team is currently in the process of adding a brand new feature to the Chromium ecosystem known as <a href="https://www.chromestatus.com/feature/6321945865879552">Insertable Streams</a>. The feature provides WebRTC apps with access to audio and video frames after they have been encoded but before they have been sent on the network.</p>
<p>Fippo has just published a brilliant description of how insertable streams work in a <a href="https://webrtchacks.com/true-end-to-end-encryption-with-webrtc-insertable-streams">webrtcHacks post</a>. Do give it a read!</p>
<p>And this, friends, is all we were waiting for! So, we rolled our sleeves and got started.</p>


<p>As we already pointed out, passing keys as URL parameters is a demo thing only. Aside from being impractical it also carries risks given that URL params are stored in browser history.</p>
<p>Our next step is therefore to work out exactly how key management and exchange would work. We expect we will be using&nbsp; <a href="https://signal.org/docs/specifications/doubleratchet/">The Double Ratchet Algorithm</a> through <a href="https://gitlab.matrix.org/matrix-org/olm">libolm</a> but the details are still to be ironed out.</p>
<p>The important part is: end-to-end encryption is on its way to protect your Jitsi Meetings. So, stay tuned!</p>
<p>Love,</p>
<p>Your Personal Jitsi Team</p>



							</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>