<!DOCTYPE html>
<html lang="en">
<head>
    <title>
UniFi - How to Migrate from Cloud Key to Cloud Key or UDM - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="UniFi - How to Migrate from Cloud Key to Cloud Key or UDM - linksfor.dev(s)"/>
    <meta property="og:description" content="Overview&#xA;&#xA;This article describes how to export your UniFi Network Controller from one UniFi device to another. It is applicable for UniFi Network Controller migrations regardless of type of host: b..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://help.ubnt.com/hc/en-us/articles/360008976393-UniFi-How-to-Migrate-from-Cloud-Key-to-Cloud-Key-or-UDM"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - UniFi - How to Migrate from Cloud Key to Cloud Key or UDM</title>
<div class="readable">
        <h1>UniFi - How to Migrate from Cloud Key to Cloud Key or UDM</h1>
            <div>Reading time: 7-8 minutes</div>
        <div>Posted here: 12 Apr 2020</div>
        <p><a href="https://help.ubnt.com/hc/en-us/articles/360008976393-UniFi-How-to-Migrate-from-Cloud-Key-to-Cloud-Key-or-UDM">https://help.ubnt.com/hc/en-us/articles/360008976393-UniFi-How-to-Migrate-from-Cloud-Key-to-Cloud-Key-or-UDM</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        <hr>

<hr>
<p>This article describes how to export your UniFi Network Controller from one UniFi device to another. It is applicable for UniFi Network Controller migrations regardless of type of host: between Cloud Keys of different generations, same generation, from Cloud Keys to UniFi Dream Machines, etc.&nbsp;</p>
<div><div><table>
<tbody>
<tr>
<td><img src="https://help-center-assets.ubnt.com/book.svg"></td>
<td>
<p><span> <strong>NOTES &amp; REQUIREMENTS: </strong>Please upgrade both host devices involved to the latest version available, as well as the UniFi Controller Software. It is recommended to <a href="https://help.ubnt.com/hc/en-us/articles/204952144#2" target="_blank" rel="noopener">create a backup</a> of your current Controller before beginning.</span></p>
</td>
</tr>
</tbody>
</table></div></div>
<hr>
<h2>Table of Contents</h2>
<hr>
<ol>
<li><a href="#1">Introduction</a></li>
<li><a href="#2">How to Migrate with Backup and Restore</a></li>
<li><a href="#3" target="_self">Troubleshooting Duplicate Controllers</a></li>
<li><a href="#4">Related Articles</a></li>
</ol>
<hr>


<hr>
<p><span><a href="#top">Back to Top</a></span></p>
<p>The Controller migration procedure is the same regardless of the device used (UCK or UDM),&nbsp;<span data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;UniFi Cloud Key&quot;}" data-sheets-userformat="{&quot;2&quot;:34603585,&quot;3&quot;:[null,0],&quot;9&quot;:0,&quot;12&quot;:0,&quot;23&quot;:1,&quot;28&quot;:1}" data-sheets-formula="=HYPERLINK(&quot;https://www.ubnt.com/unifi/unifi-cloud-key/&quot;,&quot;UniFi Cloud Key&quot;)">Cloud Key</span> generation&nbsp;or method of hosting the Controller, as long as the new Controller version (the one you will be migrating to) is the <em>same or newer</em> than the original Controller's.&nbsp;</p>
<hr>


<hr>
<p><span><a href="#top">Back to Top</a></span></p>
<p>Follow these steps to download a backup of the original Cloud Key's Controller and migrate it to a new Cloud Key. The Backup and Restore method will migrate settings and historical data (if selected), as well as all sites and devices.&nbsp;</p>
<div><div><table>
<tbody>
<tr>
<td><img src="https://help-center-assets.ubnt.com/info.svg"></td>
<td>
<div>
<p><span> <strong>NOTE:</strong>&nbsp;You will only be able to restore the backup on a device with a Controller version that is <em>the same or newer</em> than the one original host. You will be able to upgrade your new Cloud Key or UDM even before you adopt it from the&nbsp;</span><a href="https://unifi.ui.com/" target="_blank" rel="noopener">Cloud Access Portal</a> page. If you happen to be running a beta version on the original Cloud Key Controller, then <a href="https://help.ubnt.com/hc/en-us/articles/216655518" target="_blank" rel="noopener">upgrade the new Cloud Key's Controller via SSH</a>. On a new Cloud Key or UDM, where you haven't set your own password, use <em>root</em> as username and&nbsp;<em>ubnt</em> as password for SSH access.</p>
</div>
</td>
</tr>
</tbody>
</table></div></div>
<p>1. In the original Cloud Key's UniFi Network Controller go to&nbsp;<strong>Settings &gt; Backup &gt; Backup / Restore&nbsp;</strong>section&nbsp;(or in new settings:&nbsp;<span><strong>Settings &gt; Backup &gt; Backup / Restore</strong>)</span><strong>. </strong>Use the drop down to modify the data retention to include historical data, or only save your Settings before downloading, then click<strong> Download</strong><strong>&nbsp;</strong>to generate and save a new UniFi backup file (<code>.unf</code>).&nbsp;</p>
<p><img src="https://help.ubnt.com/hc/article_attachments/360062111554/settings.controller_settings.backup.backup_restore.png" alt="settings.controller_settings.backup.backup_restore.png"></p>
<p>2. To avoid having duplicate Controllers shut down the old Cloud Key once the backup download is complete. Scroll down in the <strong>Controller&nbsp;</strong><strong>Settings &gt; Maintenance &gt; Cloud Key Operations</strong> and click the&nbsp;<strong>Shut Down Cloud Key</strong> button.</p>
<p><img src="https://help.ubnt.com/hc/article_attachments/360062996253/Settings.Maintenance.CloudKeyOperations.ShutDownCloudKey.png" alt="Settings.Maintenance.CloudKeyOperations.ShutDownCloudKey.png"></p>
<p>3. The backup can be uploaded to the new host in two different ways: either by setting up the new device first (use this method when migrating to a UniFi Dream Machine); or by starting the Setup Wizard and selecting "Restore from a previous backup" option. Both methods are described below.</p>
<p><strong>Method 3A: Setting Up Host Device First (for UniFi Dream Machines)</strong></p>
<p>Set up the new device as you usually would, following <a href="https://help.ubnt.com/hc/en-us/articles/219051528#3" target="_blank" rel="noopener">initial setup</a> instructions and installing a new Controller instance. Once installed, in&nbsp;<span>the new controller go to&nbsp;<strong>Settings &gt; Controller Settings &gt; Backup &gt; Backup / Restore</strong>&nbsp;and click Choose File (or&nbsp;<strong>Settings &gt; Backup &gt; Backup / Restore</strong> in classic settings view)<strong>.</strong> Select your recently downloaded .unf file.&nbsp;Note that this will also restore the Controller credentials from your original Cloud Key.&nbsp;</span></p>
<p><span>After the system has restored all configurations, it might appear as a duplicate and with the same host IP address as the old controller's in the <a href="https://network.unifi.ui.com/" target="_blank" rel="noopener">Cloud Access Portal</a>. Use the one that is online to launch the controller. Skip down to step 4.</span></p>
<p><strong>Method 3B: Using the Startup Wizard to Restore</strong></p>
<p>Set up the new device as you usually would, following <a href="https://help.ubnt.com/hc/en-us/articles/219051528#3" target="_blank" rel="noopener">initial setup</a> instructions. Launch the Setup Wizard by discovering the new Cloud Key and then clicking Adopt&nbsp;in the <a href="https://unifi.ui.com/" target="_blank" rel="noopener">Cloud Access Portal</a>.</p>
<p><img src="https://help-center-assets.ubnt.com/hc/unifi-screenshots/cloud_portal.controller.pending.adoption.png"></p>
<p>Once the Setup Wizard launches, the first page will offer the option to&nbsp;<strong>restore from a previous backup. </strong>Click that link and&nbsp;select&nbsp;your recently downloaded&nbsp;<code>.unf</code>&nbsp;file. Note that this will also restore the Controller credentials from your original Cloud Key.&nbsp;</p>
<p><img src="https://help.ubnt.com/hc/article_attachments/360062129934/startup_wizard.restore_setup.png" alt="startup_wizard.restore_setup.png" width="659" height="430"><br> 4. Wait until the backup is restored. Once UniFi finishes working, you will be presented with the login screen for the new Controller. Remember to use the username and password from the old Controller.&nbsp;<br><img src="https://help.ubnt.com/hc/article_attachments/360062130874/Login_Screen.png" alt="Login_Screen.png" width="493" height="506"></p>
<p>5. Once you have confirmed that all devices and settings have migrated successfully to the new Cloud Key, it is strongly recommended to reset the old Cloud Key to factory defaults to avoid duplicate Controllers if it is ever connected again. To reset the old Cloud Key follow these steps:</p>
<ol>
<li>Connect the old Cloud Key to power. Press and hold the&nbsp;<span>reset</span>&nbsp;button for 10 seconds.</li>
<li>Release the button (the LED on the device will stop glowing).</li>
<li>Do&nbsp;not&nbsp;disconnect the Cloud Key from its power source during the reboot process.</li>
<li>The Cloud Key will restore factory settings.</li>
</ol>
<p>6. Close the browser page with the&nbsp;<a href="https://unifi.ui.com/" target="_blank" rel="noopener">Cloud Access Portal</a>&nbsp;from where you launched the Controller Wizard. To open the Cloud Access Portal again, go to&nbsp;<strong>Settings &gt; Remote Access</strong> and click the Dashboard link from there.</p>
<hr>


<hr>
<p><span><a href="#top">Back to Top</a></span></p>
<h4>Disconnected Devices After Migration</h4>
<p>If after migrating the controller to its new host, the devices appear as disconnected in the Devices section, it could mean there is a duplicate controller issue, or that the devices are still adopted by the old controller.</p>
<p><span><img src="https://help.ubnt.com/hc/article_attachments/360061732854/Disconnected_devices.png" alt="Disconnected_devices.png"></span></p>
<p><span>To verify, log into the UniFi Cloud Access portal using your Ubiquiti SSO account:&nbsp;<a href="https://network.unifi.ui.com/">https://network.unifi.ui.com/</a>&nbsp;and see how many controllers appear listed.<span><img src="https://help.ubnt.com/hc/article_attachments/360062645053/Networks_account.png" alt="Networks_account.png"></span></span>If you see something similar to the image above, where both controllers are still listed, it probably means both controllers are running on the same LAN, at the same time. This will create an adoption failure and other connectivity issues.</p>
<p><span>To address this, physically disconnect the host of the old controller to make sure there is no confusion. Refresh the new controller and after a moment, the old controller should disappear from the UniFi Cloud Access Portal list, and the devices in the new controller should begin to appear as adopted. Please see the articles below for more troubleshooting help.<br></span></p>
<h4>UniFi Mobile App Warning: Controllers with Same UUIDs</h4>
<p>For cases where the error "Controllers with Same UUID" is seen, please follow these instructions to solve:</p>
<p>1. Remove and <a href="https://help.ubnt.com/hc/en-us/articles/115012240067" target="_blank" rel="noopener">disable Cloud Access</a>&nbsp;under <strong>Settings &gt; Remote Access &gt; Disable and Remove Cloud Access</strong>.</p>
<p>2. Forget both controllers from the <a href="https://network.unifi.ui.com/" target="_blank" rel="noopener">Cloud Access Portal</a> list, by clicking on Forget on each controller row.</p>
<p>3. Enable and reconfigure Cloud Access once again in Settings &gt; Remote Access.</p>
<p>4. Rename the new controller to make sure it is not confused with the old one in&nbsp;<strong>Settings &gt; Controller &gt;&nbsp;Controller Name</strong>.<span></span><span></span></p>
<hr>


<hr>
<p><span><a href="#top">Back to Top</a></span>&nbsp;</p>
<p><span data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;UniFi - Controller FAQ&quot;}" data-sheets-userformat="{&quot;2&quot;:1061377,&quot;3&quot;:[null,0],&quot;12&quot;:0,&quot;15&quot;:&quot;Arial&quot;,&quot;16&quot;:10,&quot;23&quot;:1}" data-sheets-formula="=HYPERLINK(&quot;https://help.ubnt.com/hc/en-us/articles/360008240754&quot;,&quot;UniFi - Controller FAQ&quot;)"><a href="https://help.ubnt.com/hc/en-us/articles/205146020">UniFi - Advanced Adoption of a "Managed By Other" UAP</a></span></p>
<p><span data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;UniFi - Controller FAQ&quot;}" data-sheets-userformat="{&quot;2&quot;:1061377,&quot;3&quot;:[null,0],&quot;12&quot;:0,&quot;15&quot;:&quot;Arial&quot;,&quot;16&quot;:10,&quot;23&quot;:1}" data-sheets-formula="=HYPERLINK(&quot;https://help.ubnt.com/hc/en-us/articles/360008240754&quot;,&quot;UniFi - Controller FAQ&quot;)"><a href="https://help.ubnt.com/hc/en-us/articles/360000128688" target="_blank" rel="noopener">UniFi - Troubleshooting Offline Cloud Key and Other Stability Issues</a></span></p>
<p><span data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;UniFi - Controller FAQ&quot;}" data-sheets-userformat="{&quot;2&quot;:1061377,&quot;3&quot;:[null,0],&quot;12&quot;:0,&quot;15&quot;:&quot;Arial&quot;,&quot;16&quot;:10,&quot;23&quot;:1}" data-sheets-formula="=HYPERLINK(&quot;https://help.ubnt.com/hc/en-us/articles/360008240754&quot;,&quot;UniFi - Controller FAQ&quot;)"><a href="https://help.ubnt.com/hc/en-us/articles/360008240754" target="_blank" rel="noopener">UniFi - Controller FAQ</a></span></p>
<p><a href="https://help.ubnt.com/hc/en-us/articles/204952144" target="_blank" rel="noopener noreferrer">UniFi - How to Create and Restore a Backup</a></p>
<hr>
      </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>