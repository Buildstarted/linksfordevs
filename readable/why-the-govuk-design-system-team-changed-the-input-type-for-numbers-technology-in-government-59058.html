<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Why the GOV.UK Design System team changed the input type for numbers - Technology in government - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Why the GOV.UK Design System team changed the input type for numbers - Technology in government - linksfor.dev(s)"/>
    <meta property="article:author" content="Hanna Laakso, GDS, Frontend Developer"/>
    <meta property="og:description" content="About digital and technology projects in government."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Why the GOV.UK Design System team changed the input type for numbers - Technology in government</title>
<div class="readable">
        <h1>Why the GOV.UK Design System team changed the input type for numbers - Technology in government</h1>
            <div>by Hanna Laakso, GDS, Frontend Developer</div>
            <div>Reading time: 5-6 minutes</div>
        <div>Posted here: 27 Feb 2020</div>
        <p><a href="https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/">https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><p>https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/</p><div>
      <p><img src="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/design_system_number_input.jpg" alt="A screenshot of the new number input guidance" width="613" height="420" srcset="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/design_system_number_input.jpg 613w, https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/design_system_number_input-300x206.jpg 300w, https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/design_system_number_input-435x298.jpg 435w" sizes="(max-width: 613px) 100vw, 613px"></p>
<p><span>To provide users with a good service, government organisations usually need to collect data. Lots of data. The GOV.UK Design System team creates patterns and components that let users enter their data in an easy and accessible way. The last thing we want to do is create barriers to users completing a task and force them to find an alternative method of using the service, such as phoning a helpline.&nbsp;</span></p>
<p><span>Numbers are one of the most commonly asked for pieces of data, typically used in dates. We know from user research that some users prefer the large buttoned number keyboard (resembling a telephone keypad) for entering numbers on mobile. Until now, the GOV.UK Design System date input component used the HTML element <code>&lt;input type=”number”&gt;</code> to provide this number keypad when a user enters dates.</span></p>
<figure id="attachment_4462"><img src="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/number_pad.jpg" alt="A large buttoned keypad used on Android devices" width="512" height="351" srcset="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/number_pad.jpg 512w, https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/number_pad-300x206.jpg 300w, https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/number_pad-435x298.jpg 435w" sizes="(max-width: 512px) 100vw, 512px"><figcaption>Large buttoned, easy to use number keypad on Android</figcaption></figure>
<p><span>However, we recently moved away from <code>&lt;input type=”number”&gt;</code> to <code>&lt;input type=”text” inputmode=”numeric” pattern="[0-9]*"&gt;</code> and published new </span><a href="https://design-system.service.gov.uk/components/text-input/#numbers"><span>guidance on how to ask users for numbers</span></a><span>.</span></p>
<h2><b>Why type=number is problematic</b></h2>
<p><span>Although we have user research from 2017 that didn’t flag any major issues with <code>&lt;input type=”number”&gt;</code>, we identified many usability problems with this input type.</span></p>
<h3><b>1. Accessibility</b></h3>
<p><span>We found that <code>&lt;input type=”number”&gt;</code> :</span></p>
<ul>
<li><span>cannot be <a href="https://github.com/alphagov/reported-bugs/issues/34">dictated or selected when using Dragon Naturally Speaking</a></span></li>
<li><span>appears as </span><a href="https://github.com/alphagov/reported-bugs/issues/41"><span>unlabeled in NVDA's element list</span></a></li>
<li><span>appears as a <a href="https://github.com/nvaccess/nvda/issues/9675#issuecomment-499977041">spin button in NVDA's object navigation, which has an edit field and two buttons inside</a></span>&nbsp;<span>- those buttons are unlabeled, but decrease/increase the value</span></li>
<li><span>is reported as </span><a href="https://github.com/nvaccess/nvda/issues/9675#issuecomment-499977041"><span>unlabeled edit field</span></a><span> when using nvda+tab</span></li>
</ul>
<h3><b>2. Incrementable numbers</b></h3>
<p>It's <span>reasonable to assume that <code>&lt;input type=”number”&gt;</code> can be used for collecting any numeric data: it contains the word “number”, after all. A <a href="https://html.spec.whatwg.org/multipage/input.html#when-number-is-not-appropriate">note in the HTML specification</a> states that <code>&lt;input type=”number”&gt;</code> is “not appropriate for input that happens to only consist of numbers but isn't strictly speaking a number”.</span></p>
<p><span>This means that <code>&lt;input type=”number”&gt;</code> can only be used for incrementable numbers, such as dates or the number of people in a household. Using <code>&lt;input type=”number”&gt;</code> for collecting numbers that are not incrementable can cause problems with browsers validating them in that way.</span></p>
<p><span>For example, browsers attempt to round large numbers when incrementing or decrementing (pressing up or down key), and in the case of very large numbers they are converted to exponential notation.</span></p>
<figure id="attachment_4463"><img src="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/reference_number.gif" alt="A gif of numbers changing when a user presses the up or down arrow" width="483" height="147"><figcaption>Chrome 79.0: type=number displays large numbers in exponential format if user presses the up or down arrows on their keyboard.</figcaption></figure>
<p><span>Once the number is parsed by the browser as an exponent, as shown above, and possibly by mistake, t</span><span>he </span><span>action cannot be reversed by the user. This could confuse users.&nbsp;</span></p>
<p><span>If users access your site using older versions of Safari, <code>&lt;input type=”number”&gt;</code> can also be problematic when collecting values of 16 or more digits. In Safari 6, the browser rounds the number when a user leaves the field, so no mistake with up or down keys is required.</span></p>
<figure id="attachment_4465"><img src="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/safari-6-type-number-bug.gif" alt="A gif of Safari 6 rounding a number down" width="573" height="359"><figcaption>Safari 6 rounds the last digit on blur</figcaption></figure>
<p><span>Safari 5.1 attempts to make values with at least 16 digits more readable by inserting commas.</span></p>
<figure id="attachment_4464"><img src="https://technology.blog.gov.uk/wp-content/uploads/sites/31/2020/02/safari-5.1-type-number-bug.gif" alt="A gif of Safari adding commas into a 16 digit credit card number" width="573" height="359"><figcaption>Safari 5.1 attempting a more human readable number on blur</figcaption></figure>
<h3><b>3. Letters&nbsp;</b></h3>
<p><span>The </span><a href="https://html.spec.whatwg.org/multipage/input.html#number-state-(type=number)"><span>HTML spec</span></a><span> states that when using <code>&lt;input type=”number”&gt;</code>, “user agents must not allow the user to set the value to a non-empty string that is not a valid floating-point number”. The web and Android versions of Chrome implement this by silently discarding all letter input except the letter ‘e’.</span></p>
<p>This means <a href="https://github.com/w3c/html/issues/1355"><span>users are not given feedback</span></a><span> on what type of characters </span><span><code>&lt;input type=”number”&gt;</code></span><span> accepts, and assistive technologies don’t alert the user that their input has been silently discarded.</span></p>
<h3><b>4. Scrolling&nbsp;</b></h3>
<p><span>Users can accidentally increase or decrease the number using the scroll wheel on the mouse or the scroll gesture on their trackpad. This feature can be useful when collecting countable data but bad if entering data such as passport numbers.</span></p>
<h2><b>The solution</b></h2>
<p><span>Using <code>&lt;input type=”text” inputmode=”numeric” pattern="[0-9]*"&gt;</code> allows for a degree of separation between how the user enters data (“input mode”), what the browser expects the user input to contain (type equals number), and potentially how it tries to validate it.&nbsp;</span></p>
<p><span>Prior to 2019 there wasn’t enough browser support, especially on mobile devices, for us to feel confident in rolling this out instead of using <code>&lt;input type=”number”&gt;</code>. However the <code>inputmode</code> attribute is now supported by all the <a href="https://www.gov.uk/service-manual/technology/designing-for-different-browsers-and-devices#browsers-to-test-in">mobile browsers we test in</a>.</span></p>
<p><span>We still include the <code>pattern</code> attribute for </span><a href="https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html"><span>backwards compatibility with older iOS devices</span></a><span>. </span></p>
<p><span>We’ve now updated the </span><a href="https://design-system.service.gov.uk/components/date-input/"><span>date input component </span></a><span>and the </span><a href="https://design-system.service.gov.uk/patterns/bank-details/"><span>rest of the relevant patterns</span></a><span>.</span></p>
<p><span>We’ve also published some </span><a href="https://design-system.service.gov.uk/components/text-input/#numbers"><span>guidance</span></a><span> to help users to understand how to collect numbers in HTML forms.</span></p>
<p><span>Finally, we’ve proposed a change to the HTML spec guidance to cross reference <code>inputmode</code> when </span><a href="https://html.spec.whatwg.org/multipage/input.html#when-number-is-not-appropriate"><span>using <code>&lt;input type=”text”&gt;</code> with content that is only numbers</span></a><span>.&nbsp;</span></p>
<p><span>You can take a look at the </span><a href="https://design-system.service.gov.uk/community/backlog/"><span>GOV.UK Design System backlog</span></a><span> to see what else we’re working on.</span></p>
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>