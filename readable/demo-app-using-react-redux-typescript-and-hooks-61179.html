<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Demo app using React/Redux/Typescript and hooks - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Demo app using React/Redux/Typescript and hooks - linksfor.dev(s)"/>
    <meta property="article:author" content="Sacha Barber"/>
    <meta property="og:description" content="Small demo app using React/Redux and hooks"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.codeproject.com/Articles/5266424/Demo-app-using-React-Redux-Typescript-and-hooks"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Demo app using React/Redux/Typescript and hooks</title>
<div class="readable">
        <h1>Demo app using React/Redux/Typescript and hooks</h1>
            <div>by Sacha Barber</div>
            <div>Reading time: 47-60 minutes</div>
        <div>Posted here: 29 Apr 2020</div>
        <p><a href="https://www.codeproject.com/Articles/5266424/Demo-app-using-React-Redux-Typescript-and-hooks">https://www.codeproject.com/Articles/5266424/Demo-app-using-React-Redux-Typescript-and-hooks</a></p>
        <hr/>
<div id="readability-page-1" class="page"><p>This is a small demo article which shows how to use React with Redux using Typescript and React/Redux hooks. It also makes use of a D3 graph and a few custom components. Hopefully by reading this you will learn a bit about Redux hooks as well as React hooks</p><div id="contentdiv">
						



<ul>
	<li><a href="#Overview">Overview</a>

	<ul>
		<li><a href="#So-what-does-the-app-do?">So what does the app do?</a></li>	</ul>
	</li>	<li><a href="#Demo-Video">Demo Video</a></li>	<li><a href="#Where-is-the-code?">Where is the code?</a></li>	<li><a href="#BackEnd">BackEnd</a>
	<ul>
		<li><a href="#GenreController">GenreController</a></li>	</ul>
	</li>	<li><a href="#FrontEnd">FrontEnd</a>
	<ul>
		<li><a href="#General-Idea">General Idea</a></li>		<li><a href="#Create-React-App-/-.NET-Core-React/Redux-Starter-Template">Create React App / .NET Core React/Redux Starter Template</a></li>		<li><a href="#Libraries-Used">Libraries Used</a>
		<ul>
			<li><a href="#Redux">Redux</a></li>			<li><a href="#ReduxThunk">ReduxThunk</a></li>			<li><a href="#ScrollBars">ScrollBars</a></li>		</ul>
		</li>		<li><a href="#Utilities">Utilities</a></li>		<li><a href="#Routing">Routing</a>
		<ul>
			<li><a href="#HoverImage-Component">HoverImage Component</a></li>		</ul>
		</li>		<li><a href="#Home-Component">Home Component</a>
		<ul>
			<li><a href="#Scrollbars2">Scrollbars</a></li>			<li><a href="#D3-force-directed-graph">D3 force directed graph</a></li>			<li><a href="#Redux2">Redux</a></li>			<li><a href="#SlidingPanel">SlidingPanel</a></li>		</ul>
		</li>		<li><a href="#Search-Component">Search Component</a>
		<ul>
			<li><a href="#Scrollbars3">Scrollbars</a></li>			<li><a href="#Redux3">Redux</a></li>			<li><a href="#Boostrap-popup">Boostrap popup</a></li>		</ul>
		</li>	</ul>
	</li>	<li><a href="#Conclusion">Conclusion</a></li></ul>

<h2><a id="Overview" name="Overview">Overview</a></h2>

<p>It has been a while since I wrote an article here at Codeproject and since I stopped writing articles I have seen many interesting articles, many by Honey The Code Witch, and I thought it was time I started writing articles again. This one is around React/Redux/TypeScript, which I know there are already lots of. But what I wanted to do is explore using <a href="https://protect-eu.mimecast.com/s/WBN3C1rxvhK1ML8hLl0DD?domain=reactjs.org">React hooks</a>, and <a href="https://protect-eu.mimecast.com/s/XZchC2vzwTAvp07c1NMOA?domain=react-redux.js.org">Redux hooks</a>. As such this article will be based around a simple WebApi backend and a fairly straight forward React front end that uses Redux and hooks where possible.</p>

<p>Hooks are a fairly new feature that allow to use state and other React features without creating classes</p>

<p>There are numerous posts on how to convert your existing React classes into Hook based components such as these</p>

<ul>
	<li><a href="https://protect-eu.mimecast.com/s/ztlvC32BxIVwpWZT2LUN2?domain=alligator.io">https://alligator.io/react/converting-to-a-hook/</a></li>	<li><a href="https://protect-eu.mimecast.com/s/t4-YC4REyhGyBRrTW13I0?domain=medium.com">https://medium.com/@olinations/10-steps-to-convert-a-react-class-component-to-a-functional-component-with-hooks-ab198e0fa139</a></li>	<li><a href="https://protect-eu.mimecast.com/s/BQ_IC59JzfOoZwAFxYscL?domain=medium.com">https://medium.com/better-programming/convert-your-class-component-to-a-functional-one-with-react-hooks-ab5f4d11f9bc</a></li>	<li><a href="https://protect-eu.mimecast.com/s/pdkJC6RLAhxErZXtLs6FL?domain=scotch.io">https://scotch.io/tutorials/5-ways-to-convert-react-class-components-to-functional-components-w-react-hooks</a></li></ul>

<p>As such I will not be covering that in any depth</p>

<h2><a id="So-what-does-the-app-do?" name="So-what-does-the-app-do?">So what does the app do?</a></h2>

<p>The app is quite simple it does the following</p>

<ul>
	<li>Has 2 pages <strong>Home</strong> and <strong>Search</strong> which are made routable via React Router</li>	<li>The <strong>Home</strong> page shows a d3 force directed graph of electronic music genres. This is hard coded list. When you click on a node it will call a backend WebApi and gather some data (Lorem Ipsum text) about the node you selected, which will be shown in a slide out panel</li>	<li>The <strong>Search</strong> page allows you to pick from a hardcoded list of genres, and once one is selected a call to the backend WebApi will happen, at which point some images of some hardcoded (server side) items matching the selected genre will be shown. You can think click on them and see more info in a <strong>Boostrap</strong> popup</li></ul>

<p>That is all it does, however as we will see there is enough meat here to get our teeth into, this small demo app is enough to demonstrate things like</p>

<ul>
	<li>Using d3 with TypeScript</li>	<li>Using Redux with TypeScript</li>	<li>How to create custom components using both <a href="https://protect-eu.mimecast.com/s/WBN3C1rxvhK1ML8hLl0DD?domain=reactjs.org">React hooks</a>, and <a href="https://protect-eu.mimecast.com/s/XZchC2vzwTAvp07c1NMOA?domain=react-redux.js.org">Redux hooks</a></li></ul>

<h2><a id="Demo-Video" name="Demo-Video">Demo Video</a></h2>

<p>There is a demo of the finished demo app here: <a href="https://protect-eu.mimecast.com/s/MjYwC7LNBu9vAnLT0v5Qj?domain=youtube.com">https://www.youtube.com/watch?v=yA1jAHkPSzY</a></p>


<h2><a id="Where-is-the-code?" name="Where-is-the-code?">Where is the code?</a></h2>

<p>The code for this article is all available at : <a href="https://protect-eu.mimecast.com/s/FRqSC86PDhxl6B9tRztGS?domain=github.com"> https://github.com/sachabarber/DotNetReactRedux</a>, you just need to run<code> npm install </code>after you download it then it should just run as normal from within VisualStudio</p>

<h2><a id="BackEnd" name="BackEnd">BackEnd</a></h2>

<p>As I say the backend for this article is a simple WebApi, where the following <code>Controller </code>class is used</p>

<h2><a id="GenreController" name="GenreController">GenreController</a></h2>

<p>There are essentially 2 routes</p>

<ul>
	<li><code>info/{genre}</code> : This is used by the D3 force directed graph on the Home page of the FrontEnd site which we will see later. Basically what happens is when you click a node in the graph it calls this endpoint, and will display some Lorem Ipsum text for the selected nodes Genre</li>	<li><code>details/{genre}</code>: This is used on the search screen where we get a list of some hardcoded genre items, which are displayed in response to a search</li></ul>

<p>The only other thing of note here is that I use the Nuget package <a href="https://protect-eu.mimecast.com/s/0uJrC9QREfPvkr8TGAQxB?domain=nuget.org">LoremNET</a> to generate the Lorem Ipsum</p>

<p><span id="prehide25731" onclick="processCodeBlocks.togglePre(25731);">Hide</span>  &nbsp; <span id="preShrink25731" onclick="processCodeBlocks.shrinkExpand(25731);">Shrink</span> <img id="preimg25731" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(25731);">  &nbsp; <span id="copycode25731" onclick="return processCodeBlocks.copyCode(25731);">Copy Code</span></p><pre lang="cs" data-lang-orig="cs" id="pre25731" processed="true"><span>using</span> System;
<span>using</span> System.Collections.Generic;
<span>using</span> System.Linq;
<span>using</span> System.Threading;
<span>using</span> DotNetCoreReactRedux.Models;
<span>using</span> Microsoft.AspNetCore.Mvc;
<span>using</span> Microsoft.AspNetCore.Mvc.Formatters;

<span>namespace</span> DotNetCoreReactRedux.Controllers
{
    [ApiController]
    [Route(<span>"</span><span>[controller]"</span>)]
    <span>public</span> <span>class</span> GenreController : ControllerBase
    {
        [Route(<span>"</span><span>info/{genre}"</span>)]
        [HttpGet]
        <span>public</span> GenreInfo Get(<span>string</span> genre)
        {
            <span>var</span> paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>8</span>, <span>11</span>);

            <span>return</span> <span>new</span> GenreInfo()
            {
                GenreName = genre,
                Paragraphs = paragraphs.ToArray()
            };
        }

        [Route(<span>"</span><span>details/{genre}"</span>)]
        [HttpGet]
        <span>public</span> GenreDetailedItemContainer GetDetailed(<span>string</span> genre)
        {
            <span>if</span> (GenreDetailsFactory.Items.Value.ContainsKey(genre.ToLower()))
            {
                <span>return</span> <span>new</span> GenreDetailedItemContainer()
                {
                    GenreName = genre,
                    Items = GenreDetailsFactory.Items.Value[genre.ToLower()]
                };
            }
            <span>return</span> <span>new</span> GenreDetailedItemContainer()
            {
                GenreName = genre,
                Items = <span>new</span> List&lt;GenreDetailedItem&gt;()
            };
        }
    }


    <span>public</span> <span>static</span> <span>class</span> GenreDetailsFactory
    {
        <span>public</span> <span>static</span> Lazy&lt;Dictionary&lt;string, List&lt;GenreDetailedItem&gt;&gt;&gt; Items = <span>new</span> Lazy&lt;Dictionary&lt;string, List&lt;GenreDetailedItem&gt;&gt;&gt;(CreateItems, LazyThreadSafetyMode.None);


        <span>private</span> <span>static</span> Dictionary&lt;string, List&lt;GenreDetailedItem&gt;&gt; CreateItems()
        {
            <span>var</span> items = <span>new</span> Dictionary&lt;string, List&lt;GenreDetailedItem&gt;&gt;();


            items.Add(<span>"</span><span>gabber"</span>, <span>new</span> List&lt;GenreDetailedItem&gt;()
            {
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>3</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Rotterdam Termination Squad"</span>,
                    Title = <span>"</span><span>Poing"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/OvgtN_-O-4MapL7Hr9L5NUNalF8=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-146496-1140115140.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>7</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>De Klootzakken"</span>,
                    Title = <span>"</span><span>Dominee Dimitri"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/nJ2O1mYa4c5nkIZcuKK_6wN-lH0=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-114282-1085597479.jpg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>8</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Neophyte"</span>,
                    Title = <span>"</span><span>Protracker Ep"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/YC8l_-aoYt-OcLNTntu57FIA5w8=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-5039-1149857244.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>2</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Disciples Of Belial"</span>,
                    Title = <span>"</span><span>Goat Of Mendes"</span>,
                    ImageUrl =
                       <span>"</span><span>https://img.discogs.com/vHAvCPck9EHzi78PG5HDtAMxv0M=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-160557-1546568764-3706.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>7</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Bloodstrike"</span>,
                    Title = <span>"</span><span>Pathogen"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/SAqIcgp3kiqPaSVZsGn-oh8E4RE=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-18210-1448556049-2613.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>3</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Mind Of Kane"</span>,
                    Title = <span>"</span><span>The Mind EP"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/Hc_is4Ga5A1704qshrkXp9LkhKM=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-160262-1557585935-9794.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>5</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Stickhead"</span>,
                    Title = <span>"</span><span>Worlds Hardest Kotzaak"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/HFKhwj9ZfVEwLW0YJm_rUHx75lU=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-20557-1352933734-5019.jpeg.jpg"</span>
                },



            });

            items.Add(<span>"</span><span>acid house"</span>, <span>new</span> List&lt;GenreDetailedItem&gt;()
            {
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>5</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Various"</span>,
                    Title = <span>"</span><span>ACid House"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/WmSfj73-GK0TQhpLZTnLaEqWvdU=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-1224150-1264336074.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>3</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Rififi"</span>,
                    Title = <span>"</span><span>Dr Acid And Mr House"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/3w5QDa6y7PK7tYZ99hzPnMdxIVE=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-195695-1484590974-8359.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>6</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Tyree"</span>,
                    Title = <span>"</span><span>Acid Over"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/rQVeuPgGK0ksQ-g2xJEWrx1ktnc=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-61941-1080462105.jpg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>2</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Acid Jack"</span>,
                    Title = <span>"</span><span>Acid : Can You Jack"</span>,
                    ImageUrl =
                       <span>"</span><span>https://img.discogs.com/ojC7tbyzBe9XLpC9-sPtYiSfu4g=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-466567-1155405490.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>5</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Bam Bam"</span>,
                    Title = <span>"</span><span>Wheres Your Child"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/RIsPWasW9OV6iJlGW1dF7x5B_Hg=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-43506-1356639075-5067.jpeg.jpg"</span>
                },




            });

            items.Add(<span>"</span><span>drum &amp; bass"</span>, <span>new</span> List&lt;GenreDetailedItem&gt;()
            {
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>8</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Bad Company"</span>,
                    Title = <span>"</span><span>Bad Company Classics"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/uArBfSolc15i_Ys5S4auaHYTo8w=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-1138493-1195902484.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>4</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Adam F"</span>,
                    Title = <span>"</span><span>F Jam"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/99njVrjJq6ES0l6Va2eTFcjP1AU=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-5849-1237314693.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>2</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Diesel Boy"</span>,
                    Title = <span>"</span><span>A Soldier's Story - A Drum And Bass DJ Mix"</span>,
                    ImageUrl =
                        <span>"</span><span>https://img.discogs.com/cFV--pJXg69KkvlJ6q8EV8pg218=/fit-in/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-3353-1175897684.jpeg.jpg"</span>
                },
                <span>new</span> GenreDetailedItem()
                {
                    Paragraphs = LoremNET.Lorem.Paragraphs(<span>8</span>, <span>9</span>, <span>4</span>, <span>5</span>, <span>4</span>, <span>11</span>).ToArray(),
                    Band = <span>"</span><span>Future Mind"</span>,
                    Title = <span>"</span><span>Drum &amp; Bass"</span>,
                    ImageUrl =
                       <span>"</span><span>https://img.discogs.com/R46K8de0GA89HoYxJDjUBDexmgs=/300x300/filters:strip_icc():format(jpeg):mode_rgb():quality(40)/discogs-images/R-4685019-1372172049-9885.jpeg.jpg"</span>
                },
            });

            <span>return</span> items;
        }
    }
}</pre>

<h2><a id="FrontEnd" name="FrontEnd">FrontEnd</a></h2>

<p>The front end is all based around React/ReactRouter/TypeScript and Redux, where we will use hooks if possible.</p>

<h2><a id="General-Idea" name="General-Idea">General Idea</a></h2>

<p>As stated in the overview the basic idea is this, where the app</p>

<ul>
	<li>Has 2 pages <strong>Home</strong> and <strong>Search</strong> which are made routable via React Router</li>	<li>The <strong>Home</strong> page shows a d3 force directed graph of electronic music genres. This is hard coded list. When you click on a node it will call a backend WebApi and gather some data (Lorem Ipsum text) about the node you selected, which will be shown in a slide out panel</li>	<li>The <strong>Search</strong> page allows you to pick from a hardcoded list of genres, and once one is selected a call to the backend WebApi will happen, at which point some images of some hardcoded (server side) items matching the selected genre will be shown. You can think click on them and see more info in a <strong>Boostrap</strong> popup</li></ul>

<p>When you first start the app it should look like this</p>

<p><img alt="Image 1" height="322" src="https://www.codeproject.com/KB/scripting/5266424/Home.png" width="630" data-sizes="auto" data-srcset="/KB/scripting/5266424/Home-r-400.png 400w, /KB/scripting/5266424/Home.png 630w" srcset="/KB/scripting/5266424/Home-r-400.png 400w, /KB/scripting/5266424/Home.png 630w"></p>

<p>From here you can click on the nodes in the d3 graph, which will show a slide in information panel, or you can use the <strong>Search</strong> page as described above</p>



<h2><a id="Create-React-App-/-.NET-Core-React/Redux-Starter-Template" name="Create-React-App-/-.NET-Core-React/Redux-Starter-Template">Create React App / .NET Core React/Redux Starter Template</a></h2>

<p>The application was started using the .NET Core command line <code>dotnet new reactredux</code>. This gives you some starter code, which includes a sample WebApi/Router/Redux code using TypeScript which is also use the CreateReactApp template internally. So it is VERY good starting point</p>

<h2><a id="Libraries-Used" name="Libraries-Used">Libraries Used</a></h2>

<p>I have used the following 3rd party libraries in the application</p>

<h3><a name="Redux">Redux</a></h3>

<p>I am using <a href="https://redux.js.org/introduction/getting-started">Redux</a>, and there are tonnes of articles on this, so I won't labout this point too much. But for those that don't know <a href="https://redux.js.org/introduction/getting-started">Redux</a> provides a state store that happens to work very well with React.</p>

<p>It allows a nice flow where the following occurs</p>

<ul>
	<li>React components dispatch actions, which are picked up via a dispatcher</li>	<li>The dispatcher pushes the actions through a reducer which is reposible for determining the new state for the store</li>	<li>The reducer that creates the new state</li>	<li>The React components are made aware of the new state either by using Connect or via hooks. This article uses hooks</li></ul>

<p><img alt="Image 2" height="459" src="https://www.codeproject.com/KB/scripting/5266424/redux.png" width="630" data-src="/KB/scripting/5266424/redux.png" data-sizes="auto" data-srcset="/KB/scripting/5266424/redux-r-400.png 400w, /KB/scripting/5266424/redux.png 630w" srcset="/KB/scripting/5266424/redux-r-400.png 400w, /KB/scripting/5266424/redux.png 630w"></p>

<p>We are able to configure the store and reducers like this</p>

<p><span id="prehide236114" onclick="processCodeBlocks.togglePre(236114);">Hide</span>  &nbsp; <span id="preShrink236114" onclick="processCodeBlocks.shrinkExpand(236114);">Shrink</span> <img id="preimg236114" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(236114);">  &nbsp; <span id="copycode236114" onclick="return processCodeBlocks.copyCode(236114);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre236114" processed="true"><span>import</span> { applyMiddleware, combineReducers, compose, createStore } from <span>'</span><span>redux'</span>;
<span>import</span> thunk from <span>'</span><span>redux-thunk'</span>;
<span>import</span> { connectRouter, routerMiddleware } from <span>'</span><span>connected-react-router'</span>;
<span>import</span> { History } from <span>'</span><span>history'</span>;
<span>import</span> { ApplicationState, reducers } from <span>'</span><span>./'</span>;

<span>export</span> <span>default</span> <span>function</span> configureStore(<span>history</span>: History, initialState?: ApplicationState) {
    <span>const</span> middleware = [
        thunk,
        routerMiddleware(<span>history</span>)
    ];

    <span>const</span> rootReducer = combineReducers({
        ...reducers,
        router: connectRouter(<span>history</span>)
    });

    <span>const</span> enhancers = [];
    <span>const</span> windowIfDefined = <span>typeof</span> <span>window</span> === <span>'</span><span>undefined'</span> ? <span>null</span> : <span>window</span> as any;
    <span>if</span> (windowIfDefined &amp;&amp; windowIfDefined.__REDUX_DEVTOOLS_EXTENSION__) {
        enhancers.push(windowIfDefined.__REDUX_DEVTOOLS_EXTENSION__());
    }

    <span>return</span> createStore(
        rootReducer,
        initialState,
        compose(applyMiddleware(...middleware), ...enhancers)
    );
}</pre>

<p>And this</p>

<p><span id="prehide991597" onclick="processCodeBlocks.togglePre(991597);">Hide</span>  &nbsp; <span id="copycode991597" onclick="return processCodeBlocks.copyCode(991597);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre991597"><span>import</span> * as Genre from <span>'</span><span>./Genre'</span>;
<span>import</span> * as Search from <span>'</span><span>./Search'</span>;



<span>export</span> <span>interface</span> ApplicationState {
    genres: Genre.GenreInfoState | <span>undefined</span>;
    search: Search.SearchState | <span>undefined</span>;
}




<span>export</span> <span>const</span> reducers = {
    genres: Genre.reducer,
    search: Search.reducer
};



<span>export</span> <span>interface</span> AppThunkAction&lt;TAction&gt; {
    (dispatch: (action: TAction) =&gt; <span>void</span>, getState: () =&gt; ApplicationState): <span>void</span>;
}</pre>

<h3><a id="ReduxThunk" name="ReduxThunk">ReduxThunk</a></h3>

<div><p><a href="https://github.com/reduxjs/redux-thunk">ReduxThunk</a> is a bit of middleware that allows you dispatch functions to the Redux store. With a plain basic Redux store, you can only do simple synchronous updates by dispatching an action. Middleware extend the store's abilities, and let you write async logic that interacts with the store.</p><p>

Thunks are the recommended middleware for basic Redux side effects logic, including complex synchronous logic that needs access to the store, and simple async logic like AJAX requests.</p></div>

<p>This is the entire source code for <a href="https://github.com/reduxjs/redux-thunk">ReduxThunk</a>, pretty nifty no?</p>

<p><span id="prehide873020" onclick="processCodeBlocks.togglePre(873020);">Hide</span>  &nbsp; <span id="copycode873020" onclick="return processCodeBlocks.copyCode(873020);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre873020"><span>function</span> createThunkMiddleware(extraArgument) {
  <span>return</span> ({ dispatch, getState }) =&gt; (next) =&gt; (action) =&gt; {
    <span>if</span> (<span>typeof</span> action === <span>'</span><span>function'</span>) {
      <span>return</span> action(dispatch, getState, extraArgument);
    }

    <span>return</span> next(action);
  };
}

<span>const</span> thunk = createThunkMiddleware();
thunk.withExtraArgument = createThunkMiddleware;

<span>export</span> <span>default</span> thunk;</pre>

<p>Where this may be an example of using <a href="https://github.com/reduxjs/redux-thunk">ReduxThunk</a></p>

<p><span id="prehide912050" onclick="processCodeBlocks.togglePre(912050);">Hide</span>  &nbsp; <span id="copycode912050" onclick="return processCodeBlocks.copyCode(912050);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre912050">

<span>export</span> <span>interface</span> AppThunkAction&lt;TAction&gt; {
    (dispatch: (action: TAction) =&gt; <span>void</span>, getState: () =&gt; ApplicationState): <span>void</span>;
}

<span>export</span> <span>const</span> actionCreators = {
    requestSearchInfo: (genre: string): AppThunkAction&lt;KnownAction&gt; =&gt; (dispatch, getState) =&gt; {
        
        <span>const</span> appState = getState();
        <span>if</span> (appState &amp;&amp; appState.search &amp;&amp; genre !== appState.search.searchInfo.genreName) {
            fetch(<span>`</span>genre/details/${genre}`)
                .then(response =&gt; response.json() as Promise<span>&lt;</span><span>GenreDetailedItemContainer</span><span>&gt;</span>)
                .then(data =&gt; {
                    dispatch({ type: 'RECEIVE_SEARCH_INFO', genre: genre, searchInfo: data });
                });

            dispatch({ type: 'REQUEST_SEARCH_INFO', genre: genre });
        }
    }
};</pre>

<h3><a id="ScrollBars" name="ScrollBars">ScrollBars</a></h3>

<p>I make use of this React component <a href="https://protect-eu.mimecast.com/s/CM3ICAPjYhMgNGjTpSdrA?domain=github.com"> https://github.com/malte-wessel/react-custom-scrollbars</a>, to achieve nice fancy Scroll Bars in the app. Which gives you nice scroll bars like this</p>

<p><img alt="Image 3" height="415" src="https://www.codeproject.com/KB/scripting/5266424/scrollbars.png" width="568" data-src="/KB/scripting/5266424/scrollbars.png" data-sizes="auto" data-srcset="/KB/scripting/5266424/scrollbars-r-400.png 400w, /KB/scripting/5266424/scrollbars.png 568w" srcset="/KB/scripting/5266424/scrollbars-r-400.png 400w, /KB/scripting/5266424/scrollbars.png 568w"></p>

<p>The component is fairly easy to use you just need to install it via NPM and then use this in your TSX file</p>

<p><span id="prehide603207" onclick="processCodeBlocks.togglePre(603207);">Hide</span>  &nbsp; <span id="copycode603207" onclick="return processCodeBlocks.copyCode(603207);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre603207"><span>import</span> { Scrollbars } from <span>'</span><span>react-custom-scrollbars'</span>;

&lt;Scrollbars
	autoHeight
	autoHeightMin={<span>200</span>}
	autoHeightMax={<span>600</span>}
	style={{ width: <span>300</span> }}&gt;
	&lt;div&gt;Some content <span>in</span> scroll<span>&lt;/</span><span>div</span><span>&gt;</span>
<span>&lt;/</span><span>Scrollbars</span><span>&gt;</span></pre>

<h2><a id="Utilities" name="Utilities">Utilities</a></h2>

<p>I like the idea of internal mediator types buses, and as such I have included a RxJs based on&nbsp; in the demo code here. This is what the service itself looks like</p>

<p><span id="prehide946107" onclick="processCodeBlocks.togglePre(946107);">Hide</span>  &nbsp; <span id="preShrink946107" onclick="processCodeBlocks.shrinkExpand(946107);">Shrink</span> <img id="preimg946107" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(946107);">  &nbsp; <span id="copycode946107" onclick="return processCodeBlocks.copyCode(946107);">Copy Code</span></p><pre lang="cs" data-lang-orig="cs" id="pre946107" processed="true">import { Subject, Observable } <span>from</span> <span>'</span><span>rxjs'</span>;

export <span>interface</span> IEventMessager
{
    publish(message: IMessage): <span>void</span>;
    observe(): Observable&lt;IMessage&gt;;
}


export <span>interface</span> IMessage {
    
}

export <span>class</span> ShowInfoInSidePanel implements IMessage {

    <span>private</span> _itemClicked: <span>string</span>;

    <span>public</span> constructor(itemClicked: <span>string</span>) {
        <span>this</span>._itemClicked = itemClicked;
    }

    <span>get</span> itemClicked(): <span>string</span> {
        <span>return</span> <span>this</span>._itemClicked;
    }
}


export <span>class</span> EventMessager implements IEventMessager {

    <span>private</span> subject = <span>new</span> Subject&lt;IMessage&gt;();

    publish(message: IMessage) {
        <span>this</span>.subject.next(message);
    }

    observe(): Observable&lt;IMessage&gt; {
        <span>return</span> <span>this</span>.subject.asObservable();
    }
}</pre>

<p>And this is what usage of it may look like</p>

<p><span id="prehide205708" onclick="processCodeBlocks.togglePre(205708);">Hide</span>  &nbsp; <span id="preShrink205708" onclick="processCodeBlocks.shrinkExpand(205708);">Shrink</span> <img id="preimg205708" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(205708);">  &nbsp; <span id="copycode205708" onclick="return processCodeBlocks.copyCode(205708);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre205708" processed="true"><span>import</span> React, { useState, useEffect } from <span>'</span><span>react'</span>;
<span>import</span> { useDispatch, useSelector } from <span>'</span><span>react-redux'</span>;
<span>import</span> { IEventMessager } from <span>"</span><span>./utils/EventMessager"</span>;
<span>import</span> { IMessage, ShowInfoInSidePanel } from <span>"</span><span>./utils/EventMessager"</span>;
<span>import</span> { filter, map } from <span>'</span><span>rxjs/operators'</span>;

<span>export</span> <span>interface</span> HomeProps {
    eventMessager: IEventMessager;
}

<span>const</span> Home: React.FunctionComponent&lt;HomeProps&gt; = (props) =&gt; {

    <span>const</span> dispatch = useDispatch();

    <span>const</span> [currentState, setState] = useState(initialState);
                
    useEffect(() =&gt; {

        <span>const</span> sub = props.eventMessager.observe()
        .pipe(
            filter((event: IMessage) =&gt; event <span>instanceof</span> ShowInfoInSidePanel),
            map((event: IMessage) =&gt; event as ShowInfoInSidePanel)
        )
        .subscribe(x =&gt; {
            ....
        });

        <span>return</span> () =&gt; {
            sub.unsubscribe();
        }
    }, [props.eventMessager]);

}

<span>export</span> <span>default</span> Home;</pre>

<h2><a id="Routing" name="Routing">Routing</a></h2>

<p>The demo app makes use of <strong>ReactRouter</strong>, and <strong>Redux</strong>, as such the main mount point looks like this. It should be noted that we make use of a <code>ConnectedRouter</code> which is because we are using Redux, where we provide the store in the outer <code>Provider</code> component</p>

<p><span id="prehide360282" onclick="processCodeBlocks.togglePre(360282);">Hide</span>  &nbsp; <span id="preShrink360282" onclick="processCodeBlocks.shrinkExpand(360282);">Shrink</span> <img id="preimg360282" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(360282);">  &nbsp; <span id="copycode360282" onclick="return processCodeBlocks.copyCode(360282);">Copy Code</span></p><pre lang="cs" data-lang-orig="cs" id="pre360282" processed="true">import <span>'</span><span>bootstrap/dist/css/bootstrap.css'</span>;

import * <span>as</span> React <span>from</span> <span>'</span><span>react'</span>;
import * <span>as</span> ReactDOM <span>from</span> <span>'</span><span>react-dom'</span>;
import { Provider } <span>from</span> <span>'</span><span>react-redux'</span>;
import { ConnectedRouter } <span>from</span> <span>'</span><span>connected-react-router'</span>;
import { createBrowserHistory } <span>from</span> <span>'</span><span>history'</span>;
import configureStore <span>from</span> <span>'</span><span>./store/configureStore'</span>;
import App <span>from</span> <span>'</span><span>./App'</span>;
import registerServiceWorker <span>from</span> <span>'</span><span>./registerServiceWorker'</span>;

import <span>'</span><span>bootstrap/dist/css/bootstrap.min.css'</span>;
import <span>'</span><span>bootstrap/dist/js/bootstrap.min.js'</span>;


<span>const</span> baseUrl = document.getElementsByTagName(<span>'</span><span>base'</span>)[<span>0</span>].getAttribute(<span>'</span><span>href'</span>) <span>as</span> <span>string</span>;
<span>const</span> history = createBrowserHistory({ basename: baseUrl });


<span>const</span> store = configureStore(history);

ReactDOM.render(
    &lt;Provider store={store}<span>&gt;</span>
        &lt;ConnectedRouter history={history}<span>&gt;</span>
            &lt;App /&gt;
        <span>&lt;/</span><span>ConnectedRouter</span><span>&gt;</span>
    <span>&lt;/</span><span>Provider</span><span>&gt;</span>,
    document.getElementById(<span>'</span><span>root'</span>));

registerServiceWorker();</pre>

<p>Which makes use of <code>App</code>, which looks like this</p>

<p><span id="prehide624604" onclick="processCodeBlocks.togglePre(624604);">Hide</span>  &nbsp; <span id="copycode624604" onclick="return processCodeBlocks.copyCode(624604);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre624604"><span>import</span> * as React from <span>'</span><span>react'</span>;
<span>import</span> { Route } from <span>'</span><span>react-router'</span>;
<span>import</span> Layout from <span>'</span><span>./components/Layout'</span>;
<span>import</span> Home from <span>'</span><span>./components/Home'</span>;
<span>import</span> Search from <span>'</span><span>./components/Search'</span>;
<span>import</span> { EventMessager } from <span>"</span><span>./components/utils/EventMessager"</span>;
<span>import</span> <span>'</span><span>./custom.css'</span>

<span>let</span> eventMessager = <span>new</span> EventMessager();

<span>export</span> <span>default</span> () =&gt; (
    &lt;Layout&gt;
        &lt;Route exact path=<span>'</span><span>/'</span> render={(props: any) =&gt; &lt;Home {...props} eventMessager={eventMessager} /&gt;} /&gt;
        &lt;Route path=<span>'</span><span>/search'</span> component={Search} /&gt;
    <span>&lt;/</span><span>Layout</span><span>&gt;</span>
);</pre>

<p>Which in turn uses this <code>Layout</code> component</p>

<p><span id="prehide841822" onclick="processCodeBlocks.togglePre(841822);">Hide</span>  &nbsp; <span id="copycode841822" onclick="return processCodeBlocks.copyCode(841822);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre841822"><span>import</span> * as React from <span>'</span><span>react'</span>;
<span>import</span> { Container } from <span>'</span><span>reactstrap'</span>;
<span>import</span> NavMenu from <span>'</span><span>./NavMenu'</span>;

<span>export</span> <span>default</span> (props: { children?: React.ReactNode }) =&gt; (
    &lt;React.Fragment&gt;
        &lt;NavMenu/&gt;
        &lt;Container className=<span>"</span><span>main"</span>&gt;
            {props.children}
        <span>&lt;/</span><span>Container</span><span>&gt;</span>
    <span>&lt;/</span><span>React.Fragment</span><span>&gt;</span>
);</pre>

<p>Whilch ultimately uses the <code>NavMenu</code> component, which is as below</p>

<p><span id="prehide269479" onclick="processCodeBlocks.togglePre(269479);">Hide</span>  &nbsp; <span id="preShrink269479" onclick="processCodeBlocks.shrinkExpand(269479);">Shrink</span> <img id="preimg269479" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(269479);">  &nbsp; <span id="copycode269479" onclick="return processCodeBlocks.copyCode(269479);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre269479" processed="true"><span>import</span> * as React from <span>'</span><span>react'</span>;
<span>import</span> { NavItem, NavLink } from <span>'</span><span>reactstrap'</span>;
<span>import</span> { Link } from <span>'</span><span>react-router-dom'</span>;
<span>import</span> <span>'</span><span>./css/NavMenu.css'</span>;
<span>import</span> HoverImage from <span>'</span><span>./HoverImage'</span>;

<span>import</span> homeLogo from <span>'</span><span>./img/Home.png'</span>;
<span>import</span> homeHoverLogo from <span>'</span><span>./img/HomeHover.png'</span>;
<span>import</span> searchLogo from <span>'</span><span>./img/Search.png'</span>;
<span>import</span> searchHoverLogo from <span>'</span><span>./img/SearchHover.png'</span>;

<span>const</span> NavMenu: React.FunctionComponent = () =&gt; {

    <span>return</span> (
        &lt;div className=<span>"</span><span>sidenav"</span>&gt;
            &lt;NavItem&gt;
                &lt;NavLink tag={Link} style={{ textDecoration: <span>'</span><span>none'</span> }} to=<span>"</span><span>/"</span>&gt;
                    &lt;HoverImage hoverSrc={homeHoverLogo} src={homeLogo} /&gt;
                <span>&lt;/</span><span>NavLink</span><span>&gt;</span>
            <span>&lt;/</span><span>NavItem</span><span>&gt;</span>
            &lt;NavItem&gt;
                &lt;NavLink tag={Link} style={{ textDecoration: <span>'</span><span>none'</span> }} to=<span>"</span><span>/search"</span>&gt;
                    &lt;HoverImage hoverSrc={searchHoverLogo} src={searchLogo} /&gt;
                <span>&lt;/</span><span>NavLink</span><span>&gt;</span>
            <span>&lt;/</span><span>NavItem</span><span>&gt;</span>
        <span>&lt;/</span><span>div</span><span>&gt;</span>
    );
}

<span>export</span> <span>default</span> NavMenu</pre>

<p>The more eagle eyed amongst you will see that this also uses a special <code>HoverImage</code> component, which is a simple component I wrote to use images to allow navigation. This is shown below</p>

<h3><a id="HoverImage-Component" name="HoverImage-Component">HoverImage Component</a></h3>

<p>As shown above the routing makes use of a simple <code>HoverImage </code> component, which simply allows the user to show a different image on MouseOver. This is the Components code</p>

<p><span id="prehide309205" onclick="processCodeBlocks.togglePre(309205);">Hide</span>  &nbsp; <span id="preShrink309205" onclick="processCodeBlocks.shrinkExpand(309205);">Shrink</span> <img id="preimg309205" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(309205);">  &nbsp; <span id="copycode309205" onclick="return processCodeBlocks.copyCode(309205);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre309205" processed="true"><span>import</span> React, { useState } from <span>'</span><span>react'</span>;

<span>export</span> <span>interface</span> HoverImageProps {
    src?: string;
    hoverSrc?: string;
}

<span>const</span> HoverImage: React.FunctionComponent&lt;HoverImageProps&gt; = (props) =&gt; {

    
    <span>const</span> [imgSrc, setSource] = useState(props.src);

    <span>return</span> (
        &lt;div&gt;
            &lt;img
                src={imgSrc}
                onMouseOver={() =&gt; setSource(props.hoverSrc)}
                onMouseOut={() =&gt; setSource(props.src)} /&gt;
        <span>&lt;/</span><span>div</span><span>&gt;</span>
    );
}

HoverImage.defaultProps = {

    src: <span>'</span><span>'</span>,
    hoverSrc:<span>'</span><span>'</span>,
}

<span>export</span> <span>default</span> HoverImage</pre>

<h2><a id="Home-Component" name="Home-Component">Home Component</a></h2>

<p>The Home component is a top level route component, which looks like this</p>

<p><img alt="Image 4" height="339" src="https://www.codeproject.com/KB/scripting/5266424/Home2.png" width="630" data-src="/KB/scripting/5266424/Home2.png" data-sizes="auto" data-srcset="/KB/scripting/5266424/Home2-r-400.png 400w, /KB/scripting/5266424/Home2.png 630w" srcset="/KB/scripting/5266424/Home2-r-400.png 400w, /KB/scripting/5266424/Home2.png 630w"></p>

<p>This component makes use of Redux, and calls a backend WebApi using Redux, and also makes use of ReduxThunk.The Redux flow is this</p>

<ul>
	<li>We dispatch the <code>requestGenreInfo </code>action</li>	<li>We use teh Redux hook to listen to state changes for the <code>Genres </code>State</li></ul>

<p>The most important part of the <code>Home </code>component markup is shown below</p>

<p><span id="prehide756336" onclick="processCodeBlocks.togglePre(756336);">Hide</span>  &nbsp; <span id="preShrink756336" onclick="processCodeBlocks.shrinkExpand(756336);">Shrink</span> <img id="preimg756336" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(756336);">  &nbsp; <span id="copycode756336" onclick="return processCodeBlocks.copyCode(756336);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre756336" processed="true"><span>import</span> React, { useState, useEffect } from <span>'</span><span>react'</span>;
<span>import</span> { useDispatch, useSelector } from <span>'</span><span>react-redux'</span>;
<span>import</span> ForceGraph from <span>'</span><span>./graph/ForceGraph'</span>;
<span>import</span> data from <span>"</span><span>./electronic-genres"</span>;
<span>import</span> { Scrollbars } from <span>'</span><span>react-custom-scrollbars'</span>;
<span>import</span> SlidingPanel, { PanelType } from <span>'</span><span>./slidingpanel/SlidingPanel'</span>;
<span>import</span> <span>'</span><span>./css/SlidingPanel.css'</span>;
<span>import</span> { IEventMessager } from <span>"</span><span>./utils/EventMessager"</span>;
<span>import</span> { IMessage, ShowInfoInSidePanel } from <span>"</span><span>./utils/EventMessager"</span>;
<span>import</span> { filter, map } from <span>'</span><span>rxjs/operators'</span>;
<span>import</span> HoverImage from <span>'</span><span>./HoverImage'</span>;
<span>import</span> circleLogo from <span>'</span><span>./img/circle.png'</span>;
<span>import</span> circleHoverLogo from <span>'</span><span>./img/circleHover.png'</span>;



<span>import</span> <span>'</span><span>./css/ForceGraph.css'</span>;



<span>import</span> { ApplicationState } from <span>'</span><span>../store'</span>;
<span>import</span> * as GenreStore from <span>'</span><span>../store/Genre'</span>;

<span>export</span> <span>interface</span> HomeProps {
    eventMessager: IEventMessager;
}


<span>const</span> initialState = {
    isopen: <span>false</span>,
    selectedNodeText : <span>'</span><span>'</span>
}


<span>const</span> Home: React.FunctionComponent&lt;HomeProps&gt; = (props) =&gt; {

    <span>const</span> dispatch = useDispatch();

    <span>const</span> [currentState, setState] = useState(initialState);
                
    useEffect(() =&gt; {
        <span>const</span> sub = props.eventMessager.observe()
        .pipe(
            filter((event: IMessage) =&gt; event <span>instanceof</span> ShowInfoInSidePanel),
            map((event: IMessage) =&gt; event as ShowInfoInSidePanel)
        )
        .subscribe(x =&gt; {
            
            
            setState(
                (currentState) =&gt; ({
                    ...currentState,
                    isopen: <span>true</span>,
                    selectedNodeText: x.itemClicked
                })
            );
        });

        <span>return</span> () =&gt; {
            sub.unsubscribe();
        }
    }, [props.eventMessager]);


    React.useEffect(() =&gt; {
        dispatch(GenreStore.actionCreators.requestGenreInfo(currentState.selectedNodeText));
    }, [currentState.selectedNodeText]);


    <span>const</span> storeState: GenreStore.GenreInfoState = useSelector(
        (state: ApplicationState) =&gt; state.genres as GenreStore.GenreInfoState
    );


    <span>return</span> (
        &lt;div&gt;
            ....
                    &lt;ForceGraph
                        width={<span>window</span>.<span>screen</span>.availHeight}
                        height={<span>window</span>.<span>screen</span>.availHeight}
                        eventMessager={props.eventMessager}
                        graph={data} /&gt;
            ....
		<span>&lt;/</span><span>div</span><span>&gt;</span>
    );
}

<span>export</span> <span>default</span> Home;</pre>

<h3><a id="Scrollbars2" name="Scrollbars2">Scrollbars</a></h3>

<p>This is the same ScrollBars as mentioned above</p>

<h3><a id="D3-force-directed-graph" name="D3-force-directed-graph">D3 force directed graph</a></h3>

<p>At the heart of the Home component is a d3 force directed graph. But as I was trying to do things nicely I wanted to do the d3 Graph in TypeScript. So I started with this great blog post : <a href="https://protect-eu.mimecast.com/s/-8M7CBLlYu317zvckJmd5?domain=spin.atomicobject.com"> https://spin.atomicobject.com/2017/07/20/d3-react-typescript/</a> and expanded from there.The example on that blog post breaks the graph down into these 4 areas</p>

<ul>
	<li>ForceGraph</li>	<li>Labels</li>	<li>Links</li>	<li>Nodes</li></ul>

<p><strong>ForceGraph</strong></p>

<p>This is the main component which holds the others. And it is this one that is used on the Home component. Here is the code for it</p>

<p><span id="prehide364299" onclick="processCodeBlocks.togglePre(364299);">Hide</span>  &nbsp; <span id="preShrink364299" onclick="processCodeBlocks.shrinkExpand(364299);">Shrink</span> <img id="preimg364299" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(364299);">  &nbsp; <span id="copycode364299" onclick="return processCodeBlocks.copyCode(364299);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre364299" processed="true"><span>import</span> * as React from <span>'</span><span>react'</span>;
<span>import</span> * as d3 from <span>'</span><span>d3'</span>;
<span>import</span> { d3Types } from <span>"</span><span>./GraphTypes"</span>;
<span>import</span> Links from <span>"</span><span>./Links"</span>;
<span>import</span> Nodes from <span>"</span><span>./Nodes"</span>;
<span>import</span> Labels from <span>"</span><span>./Labels"</span>;
<span>import</span> <span>'</span><span>../css/ForceGraph.css'</span>;
<span>import</span> { IEventMessager } from <span>"</span><span>../utils/EventMessager"</span>;

<span>interface</span> ForceGraphProps {
    width: number;
    height: number;
    graph: d3Types.d3Graph;
    eventMessager: IEventMessager;
}

<span>export</span> <span>default</span> <span>class</span> App <span>extends</span> React.Component&lt;ForceGraphProps, {}&gt; {
    simulation: any;

    <span>constructor</span>(props: ForceGraphProps) {
        <span>super</span>(props);
        <span>this</span>.simulation = d3.forceSimulation()
            .force(<span>"</span><span>link"</span>, d3.forceLink().id(<span>function</span> (node: any, i: number, nodesData: d3.SimulationNodeDatum[]) {
                <span>return</span> node.id;
            }))
            .force(<span>"</span><span>charge"</span>, d3.forceManyBody().strength(-100))
            .force(<span>"</span><span>center"</span>, d3.forceCenter(<span>this</span>.props.width / <span>2</span>, <span>this</span>.props.height / <span>2</span>))
            .nodes(<span>this</span>.props.graph.nodes as d3.SimulationNodeDatum[]);

        <span>this</span>.simulation.force(<span>"</span><span>link"</span>).links(<span>this</span>.props.graph.links);
    }

    componentDidMount() {
        <span>const</span> node = d3.selectAll(<span>"</span><span>.node"</span>);
        <span>const</span> link = d3.selectAll(<span>"</span><span>.link"</span>);
        <span>const</span> label = d3.selectAll(<span>"</span><span>.label"</span>);

        <span>this</span>.simulation.nodes(<span>this</span>.props.graph.nodes).on(<span>"</span><span>tick"</span>, ticked);

        <span>function</span> ticked() {
            link
                .attr(<span>"</span><span>x1"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.source.x;
                })
                .attr(<span>"</span><span>y1"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.source.y;
                })
                .attr(<span>"</span><span>x2"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.target.x;
                })
                .attr(<span>"</span><span>y2"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.target.y;
                });

            node
                .attr(<span>"</span><span>cx"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.x;
                })
                .attr(<span>"</span><span>cy"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.y;
                });

            label
                .attr(<span>"</span><span>x"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.x + <span>5</span>;
                })
                .attr(<span>"</span><span>y"</span>, <span>function</span> (d: any) {
                    <span>return</span> d.y + <span>5</span>;
                });
        }
    }

    render() {
        <span>const</span> { width, height, graph, eventMessager } = <span>this</span>.props;
        <span>return</span> (
            &lt;svg className=<span>"</span><span>graph-container"</span>
                width={width} height={height}&gt;
                &lt;Links links={graph.links} /&gt;
                &lt;Nodes nodes={graph.nodes} simulation={<span>this</span>.simulation} eventMessager={eventMessager}/&gt;
                &lt;Labels nodes={graph.nodes} /&gt;
            <span>&lt;/</span><span>svg</span><span>&gt;</span>
        );
    }
}</pre>

<p><strong>Labels</strong></p>

<p>The labels represent the labels for the link, and here is the code</p>

<p><span id="prehide801502" onclick="processCodeBlocks.togglePre(801502);">Hide</span>  &nbsp; <span id="preShrink801502" onclick="processCodeBlocks.shrinkExpand(801502);">Shrink</span> <img id="preimg801502" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(801502);">  &nbsp; <span id="copycode801502" onclick="return processCodeBlocks.copyCode(801502);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre801502" processed="true"><span>import</span> * as React from <span>"</span><span>react"</span>;
<span>import</span> * as d3 from <span>"</span><span>d3"</span>;
<span>import</span> { d3Types } from <span>"</span><span>./GraphTypes"</span>;

<span>class</span> Label <span>extends</span> React.Component&lt;{ node: d3Types.d3Node }, {}&gt; {
    ref!: SVGTextElement;

    componentDidMount() {
        d3.select(<span>this</span>.ref).data([<span>this</span>.props.node]);
    }

    render() {
        <span>return</span> &lt;text className=<span>"</span><span>label"</span> ref={(ref: SVGTextElement) =&gt; <span>this</span>.ref = ref}&gt;
                   {<span>this</span>.props.node.id}
               <span>&lt;/</span><span>text</span><span>&gt;</span>;
    }
}

<span>export</span> <span>default</span> <span>class</span> Labels <span>extends</span> React.Component&lt;{ nodes: d3Types.d3Node[] }, {}&gt; {
    render() {
        <span>const</span> labels = <span>this</span>.props.nodes.map((node: d3Types.d3Node, index: number) =&gt; {
            <span>return</span> &lt;Label key={index} node={node} /&gt;;
        });

        <span>return</span> (
            &lt;g className=<span>"</span><span>labels"</span>&gt;
                {labels}
            <span>&lt;/</span><span>g</span><span>&gt;</span>
        );
    }
}</pre>

<p><strong>Links</strong></p>

<p>The labels represent the links for the graph, and here is the code</p>

<p><span id="prehide296735" onclick="processCodeBlocks.togglePre(296735);">Hide</span>  &nbsp; <span id="preShrink296735" onclick="processCodeBlocks.shrinkExpand(296735);">Shrink</span> <img id="preimg296735" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(296735);">  &nbsp; <span id="copycode296735" onclick="return processCodeBlocks.copyCode(296735);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre296735" processed="true"><span>import</span> * as React from <span>"</span><span>react"</span>;
<span>import</span> * as d3 from <span>"</span><span>d3"</span>;
<span>import</span> { d3Types } from <span>"</span><span>./GraphTypes"</span>;

<span>class</span> Link <span>extends</span> React.Component&lt;{ link: d3Types.d3Link }, {}&gt; {
    ref!: SVGLineElement;

    componentDidMount() {
        d3.select(<span>this</span>.ref).data([<span>this</span>.props.link]);
    }

    render() {
        <span>return</span> &lt;line className=<span>"</span><span>link"</span> ref={(ref: SVGLineElement) =&gt; <span>this</span>.ref = ref}
                     strokeWidth={<span>Math</span>.sqrt(<span>this</span>.props.link.value)} /&gt;;
    }
}

<span>export</span> <span>default</span> <span>class</span> Links <span>extends</span> React.Component&lt;{ links: d3Types.d3Link[] }, {}&gt; {
    render() {
        <span>const</span> links = <span>this</span>.props.links.map((link: d3Types.d3Link, index: number) =&gt; {
            <span>return</span> &lt;Link key={index} link={link} /&gt;;
        });

        <span>return</span> (
            &lt;g className=<span>"</span><span>links"</span>&gt;
                {links}
            <span>&lt;/</span><span>g</span><span>&gt;</span>
        );
    }
}</pre>

<p><strong>Nodes</strong></p>

<p>The labels represent the nodes for the graph, and here is the code</p>

<p><span id="prehide98645" onclick="processCodeBlocks.togglePre(98645);">Hide</span>  &nbsp; <span id="preShrink98645" onclick="processCodeBlocks.shrinkExpand(98645);">Shrink</span> <img id="preimg98645" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(98645);">  &nbsp; <span id="copycode98645" onclick="return processCodeBlocks.copyCode(98645);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre98645" processed="true"><span>import</span> * as React from <span>"</span><span>react"</span>;
<span>import</span> * as d3 from <span>"</span><span>d3"</span>;
<span>import</span> { d3Types } from <span>"</span><span>./GraphTypes"</span>;
<span>import</span> { IEventMessager } from <span>"</span><span>../utils/EventMessager"</span>;
<span>import</span> { ShowInfoInSidePanel } from <span>"</span><span>../utils/EventMessager"</span>;

<span>class</span> Node <span>extends</span> React.Component&lt;{ node: d3Types.d3Node, color: string, eventMessager: IEventMessager }, {}&gt; {
    ref!: SVGCircleElement;

    componentDidMount() {
        d3.select(<span>this</span>.ref).data([<span>this</span>.props.node]);
    }

    render() {
        <span>return</span> (
            &lt;circle className=<span>"</span><span>node"</span> r={<span>5</span>} fill={<span>this</span>.props.color}
                ref={(ref: SVGCircleElement) =&gt; <span>this</span>.ref = ref}
                onClick={() =&gt; {
                    <span>this</span>.props.eventMessager.publish(<span>new</span> ShowInfoInSidePanel(<span>this</span>.props.node.id));
                }}&gt;&gt;
                &lt;title&gt;{<span>this</span>.props.node.id}<span>&lt;/</span><span>title</span><span>&gt;</span>
            <span>&lt;/</span><span>circle</span><span>&gt;</span>
        );
    }
}

<span>export</span> <span>default</span> <span>class</span> Nodes <span>extends</span> React.Component&lt;{ nodes: d3Types.d3Node[], simulation: any, eventMessager: IEventMessager }, {}&gt; {
    componentDidMount() {
        <span>const</span> simulation = <span>this</span>.props.simulation;
        d3.selectAll&lt;any,any&gt;(<span>"</span><span>.node"</span>)
            .call(d3.drag()
                .on(<span>"</span><span>start"</span>, onDragStart)
                .on(<span>"</span><span>drag"</span>, onDrag)
                .on(<span>"</span><span>end"</span>, onDragEnd));

        <span>function</span> onDragStart(d: any) {
            <span>if</span> (!d3.event.active) {
                simulation.alphaTarget(<span>0</span>.<span>3</span>).restart();
            }
            d.fx = d.x;
            d.fy = d.y;
        }

        <span>function</span> onDrag(d: any) {
            d.fx = d3.event.x;
            d.fy = d3.event.y;
        }

        <span>function</span> onDragEnd(d: any) {
            <span>if</span> (!d3.event.active) {
                simulation.alphaTarget(<span>0</span>);
            }
            d.fx = <span>null</span>;
            d.fy = <span>null</span>;
        }
    }

    render() {
        <span>const</span> nodes = <span>this</span>.props.nodes.map((node: d3Types.d3Node, index: number) =&gt; {
            <span>return</span> &lt;Node key={index} node={node} color=<span>"</span><span>blue"</span> eventMessager={<span>this</span>.props.eventMessager} /&gt;;
        });

        <span>return</span> (
            &lt;g className=<span>"</span><span>nodes"</span>&gt;
                {nodes}
            <span>&lt;/</span><span>g</span><span>&gt;</span>
        );
    }
}</pre>

<p>The important part of the node code is that there is <code>onClick </code>handler which dispatches a message using the <code>EventMessager</code> class back to the <code>Home</code> component which will listen to this event and make the Redux call to get the data for the selected node text</p>

<h3><a id="Redux2" name="Redux2">Redux</a></h3>

<p>This is the Redux code that wires the action creator and Redux store state changes together for the <code>Home </code>component, where it can be seen that this accepts the <code> requestGenreInfo </code>which is sent to the backend WebApi (the <code>fetch(`genre/info/${genre}`)</code>) and a new <code>GenreInfoState </code>is constructed based on the results which is dispatched via the Redus store back to the <code>Search </code>components Redux <a href="https://protect-eu.mimecast.com/s/oiBNCD9pVfQ15DXsQCOYO?domain=react-redux.js.org">useSelector</a> hook which is listening for this state change</p>

<p><span id="prehide573882" onclick="processCodeBlocks.togglePre(573882);">Hide</span>  &nbsp; <span id="preShrink573882" onclick="processCodeBlocks.shrinkExpand(573882);">Shrink</span> <img id="preimg573882" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(573882);">  &nbsp; <span id="copycode573882" onclick="return processCodeBlocks.copyCode(573882);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre573882" processed="true"><span>import</span> { Action, Reducer } from <span>'</span><span>redux'</span>;
<span>import</span> { AppThunkAction } from <span>'</span><span>./'</span>;




<span>export</span> <span>interface</span> GenreInfoState {
    isLoading: <span>boolean</span>;
    genre: string;
    genreInfo: GenreInfo;
}

<span>export</span> <span>interface</span> GenreInfo {
    genreName: string;
    paragraphs: Array&lt;string&gt;;
}





<span>interface</span> RequestGenreInfoAction {
    type: <span>'</span><span>REQUEST_GENRE_INFO'</span>;
    genre: string;
}

<span>interface</span> ReceiveGenreInfoAction {
    type: <span>'</span><span>RECEIVE_GENRE_INFO'</span>;
    genre: string;
    genreInfo: GenreInfo;
}



type KnownAction = RequestGenreInfoAction | ReceiveGenreInfoAction;





<span>export</span> <span>const</span> actionCreators = {
    requestGenreInfo: (genre: string): AppThunkAction&lt;KnownAction&gt; =&gt; (dispatch, getState) =&gt; {
        
        <span>const</span> appState = getState();
        <span>if</span> (appState &amp;&amp; appState.genres &amp;&amp; genre !== appState.genres.genre) {
            fetch(<span>`</span>genre/info/${genre}`)
                .then(response =&gt; response.json() as Promise<span>&lt;</span><span>GenreInfo</span><span>&gt;</span>)
                .then(data =&gt; {
                    dispatch({ type: 'RECEIVE_GENRE_INFO', genre: genre, genreInfo: data });
                });

            dispatch({ type: 'REQUEST_GENRE_INFO', genre: genre });
        }
    }
};

// ----------------
// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.
let pars: string[] = [];
const emptyGenreInfo = { genreName: '', paragraphs: pars };
const unloadedState: GenreInfoState = { genre: '', genreInfo: emptyGenreInfo, isLoading: false };

export const reducer: Reducer<span>&lt;</span><span>GenreInfoState</span><span>&gt;</span> = (state: GenreInfoState | undefined, incomingAction: Action): GenreInfoState =&gt; {
    if (state === undefined) {
        return unloadedState;
    }

    const action = incomingAction as KnownAction;
    switch (action.type) {
        case 'REQUEST_GENRE_INFO':
            return {
                genre: action.genre,
                genreInfo: state.genreInfo,
                isLoading: true
            };
        case 'RECEIVE_GENRE_INFO':
            // Only accept the incoming data if it matches the most recent request. This ensures we correctly
            // handle out-of-order responses.
            var castedAction = action as ReceiveGenreInfoAction;
            if (action.genre === state.genre) {
                return {
                    genre: castedAction.genre,
                    genreInfo: castedAction.genreInfo,
                    isLoading: false
                };
            }
            break;
    }

    return state;
};</pre>



<h3><a id="SlidingPanel" name="SlidingPanel">SlidingPanel</a></h3>

<p>As shown in the demo video at the start of this article, when a D3 node gets clicked we use a cool sliding panel which shows the results of the node that was clicked. Where a call to the backend WebApi controller was done for the selected node text. The idea is that the node use the <code>EventMessager </code>RX class to dispatch an message which the <code>Home </code>component listens to, and will then set a prop value <code>isOpen </code>which controls whether the <code> SlidingPanel </code>is transitioned in or not.</p>

<p>This subscription code is shown below</p>

<p><span id="prehide766239" onclick="processCodeBlocks.togglePre(766239);">Hide</span>  &nbsp; <span id="copycode766239" onclick="return processCodeBlocks.copyCode(766239);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre766239">useEffect(() =&gt; {
	<span>const</span> sub = props.eventMessager.observe()
	.pipe(
		filter((event: IMessage) =&gt; event <span>instanceof</span> ShowInfoInSidePanel),
		map((event: IMessage) =&gt; event as ShowInfoInSidePanel)
	)
	.subscribe(x =&gt; {
		
		
		setState(
			(currentState) =&gt; ({
				...currentState,
				isopen: <span>true</span>,
				selectedNodeText: x.itemClicked
			})
		);
	});

	<span>return</span> () =&gt; {
		sub.unsubscribe();
	}
}, [props.eventMessager]);</pre>

<p>And this is the <code>SlidingPanel</code> compoenent, which I adapted from this JSX version into TypeScript : <a href="https://protect-eu.mimecast.com/s/9Y1-CE9rVfKm3kBh6Fbbj?domain=github.com"> https://github.com/BenedicteGiraud/react-sliding-side-panel/blob/master/src/index.jsx</a></p>

<p><span id="prehide450848" onclick="processCodeBlocks.togglePre(450848);">Hide</span>  &nbsp; <span id="preShrink450848" onclick="processCodeBlocks.shrinkExpand(450848);">Shrink</span> <img id="preimg450848" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(450848);">  &nbsp; <span id="copycode450848" onclick="return processCodeBlocks.copyCode(450848);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre450848" processed="true"><span>import</span> React from <span>'</span><span>react'</span>;
<span>import</span> { CSSTransition } from <span>'</span><span>react-transition-group'</span>;
<span>import</span> <span>'</span><span>../css/SlidingPanel.css'</span>;


<span>export</span> <span>enum</span> PanelType {
    Top = <span>1</span>,
    Right,
    Bottom,
    Left,
}

type Nullable&lt;T&gt; = T | <span>null</span>;
<span>export</span> <span>interface</span> SliderProps {
    type: PanelType;
    size: number;
    panelClassName?: string;
    isOpen: <span>boolean</span>;
    children: Nullable&lt;React.ReactElement&gt;;
    backdropClicked: () =&gt; <span>void</span>;
}


<span>const</span> getPanelGlassStyle = (type: PanelType, size: number, hidden: <span>boolean</span>): React.CSSProperties =&gt; {
    <span>const</span> horizontal = type === PanelType.Bottom || type === PanelType.Top;
    <span>return</span> {
        width: horizontal ? <span>`</span>${hidden ? '0' : '100'}vw` : `${100 - size}vw`,
        height: horizontal ? `${100 - size}vh` : `${hidden ? '0' : '100'}vh`,
        ...(type === PanelType.Right &amp;&amp; { left: 0 }),
        ...(type === PanelType.Top &amp;&amp; { bottom: 0 }),
        position: 'inherit',
    };
};

const getPanelStyle = (type: PanelType, size: number): React.CSSProperties =&gt; {
    const horizontal = type === PanelType.Bottom || type === PanelType.Top;
    return {
        width: horizontal ? '100vw' : `${size}vw`,
        height: horizontal ? `${size}vh` : '100vh',
        ...(type === PanelType.Right &amp;&amp; { right: 0 }),
        ...(type === PanelType.Bottom &amp;&amp; { bottom: 0 }),
        position: 'inherit',
        overflow: 'auto',
    };
};


function getNameFromPanelTypeEnum(type: PanelType): string {

    let result = "";
    switch (type) {
        case PanelType.Right:
            result = "right";
            break;
        case PanelType.Left:
            result = "left";
            break;
        case PanelType.Top:
            result = "top";
            break;
        case PanelType.Bottom:
            result = "bottom";
            break;
    }
    return result;
}

const SlidingPanel: React.SFC<span>&lt;</span><span>SliderProps</span><span>&gt;</span> = (props) =&gt; {

    const glassBefore = props.type === PanelType.Right || props.type === PanelType.Bottom;
    const horizontal = props.type === PanelType.Bottom || props.type === PanelType.Top;
    return (
        <span>&lt;</span><span>div</span><span>&gt;</span>
            <span>&lt;</span><span>div</span><span> </span><span>className</span><span>=</span><span>{`sliding-panel-container </span><span>${props.isOpen</span><span> </span><span>?</span><span> </span><span>'active'</span><span> </span><span>:</span><span> </span><span>''}</span><span> </span><span>'click-through'</span><span> </span><span>`}</span><span>&gt;</span>
                <span>&lt;</span><span>div</span><span> </span><span>className</span><span>=</span><span>{`sliding-panel-container </span><span>${props.isOpen</span><span> </span><span>?</span><span> </span><span>'active'</span><span> </span><span>:</span><span> </span><span>''}</span><span> </span><span>'click-through'</span><span> </span><span>`}</span><span>&gt;</span>
                    <span>&lt;</span><span>CSSTransition</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>in</span><span>=</span><span>{props.isOpen}
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>timeout</span><span>=</span><span>{500}
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>classNames</span><span>=</span><span>{`panel-container-${getNameFromPanelTypeEnum(props.type)}`}
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>unmountOnExit</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>style</span><span>=</span><span>{{ </span><span>display:</span><span> </span><span>horizontal</span><span> </span><span>?</span><span> </span><span>'block'</span><span> </span><span>:</span><span> </span><span>'flex'</span><span> </span><span>}}</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>&gt;</span>
                        <span>&lt;</span><span>div</span><span>&gt;</span>
                            {glassBefore &amp;&amp; (
                                <span>&lt;</span><span>div</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>className</span><span>="</span><span>glass"</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>style</span><span>=</span><span>{getPanelGlassStyle(props.type, </span><span>props.size,</span><span> </span><span>false)}</span><span>
</span><span>
</span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span>onClick</span><span>=</span><span>{(e: </span><span>React.MouseEvent&lt;HTMLDivElement,</span><span> </span><span>MouseEvent</span><span>&gt;</span>) =&gt; { props.backdropClicked(); }}
                                /&gt;
                            )}
                            &lt;div className=<span>"</span><span>panel"</span> style={getPanelStyle(props.type, props.size)}&gt;
                                &lt;div className={<span>`</span>panel-content ${props.panelClassName || ''}`}&gt;{props.children}<span>&lt;/</span><span>div</span><span>&gt;</span>
                            <span>&lt;/</span><span>div</span><span>&gt;</span>
                            {!glassBefore &amp;&amp; (
                                &lt;div
                                    className=<span>"</span><span>glass"</span>
                                    style={getPanelGlassStyle(props.type, props.size, <span>false</span>)}
                                    onClick={(e: React.MouseEvent&lt;HTMLDivElement, MouseEvent&gt;) =&gt; { props.backdropClicked(); }}
                                /&gt;
                            )}
                        <span>&lt;/</span><span>div</span><span>&gt;</span>
                    <span>&lt;/</span><span>CSSTransition</span><span>&gt;</span>
                <span>&lt;/</span><span>div</span><span>&gt;</span>
            <span>&lt;/</span><span>div</span><span>&gt;</span>
        <span>&lt;/</span><span>div</span><span>&gt;</span>
    );
}


SlidingPanel.defaultProps = {
    type: PanelType.Left,
    size: <span>50</span>,
    panelClassName: <span>'</span><span>'</span>,
    isOpen: <span>false</span>,
    children: <span>null</span>,
    backdropClicked: () =&gt; <span>null</span>
}

<span>export</span> <span>default</span> SlidingPanel;</pre>

<p>Most of the credit for this is really the original authors work. I simplt TypeScripted it up.</p>

<h2><a id="Search-Component" name="Search-Component">Search Component</a></h2>

<p>The Search component is a top level route component, which looks like this</p>

<p><img alt="Image 5" height="540" src="https://www.codeproject.com/KB/scripting/5266424/Search.png" width="629" data-src="/KB/scripting/5266424/Search.png" data-sizes="auto" data-srcset="/KB/scripting/5266424/Search-r-400.png 400w, /KB/scripting/5266424/Search.png 629w" srcset="/KB/scripting/5266424/Search-r-400.png 400w, /KB/scripting/5266424/Search.png 629w"></p>

<p>This component makes use of Redux, and calls a backend WebApi using Redux, and also makes use of ReduxThunk.The Redux flow is this</p>

<ul>
	<li>We dispatch the <code>requestSearchInfo </code>action</li>	<li>We use teh Redux hook to listen to state changes for the <code>Search </code>State</li></ul>

<p>The most important part of the Search component markup is shown below</p>

<p><span id="prehide694566" onclick="processCodeBlocks.togglePre(694566);">Hide</span>  &nbsp; <span id="preShrink694566" onclick="processCodeBlocks.shrinkExpand(694566);">Shrink</span> <img id="preimg694566" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(694566);">  &nbsp; <span id="copycode694566" onclick="return processCodeBlocks.copyCode(694566);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre694566" processed="true"><span>import</span> React, { useState } from <span>'</span><span>react'</span>;
<span>import</span> { useDispatch, useSelector } from <span>'</span><span>react-redux'</span>;
<span>import</span> { Scrollbars } from <span>'</span><span>react-custom-scrollbars'</span>;


<span>import</span> <span>'</span><span>./css/Search.css'</span>;



<span>import</span> { ApplicationState } from <span>'</span><span>../store'</span>;
<span>import</span> * as SearchStore from <span>'</span><span>../store/Search'</span>;

<span>export</span> <span>interface</span> SearchProps {

}

<span>interface</span> ISearchState {
    selectedItem: string;
    selectedSearchItem: SearchStore.GenreDetailedItem;
}

<span>const</span> initialState: ISearchState = {
    selectedItem: <span>'</span><span>'</span>,
    selectedSearchItem: <span>null</span>
}


<span>const</span> Search: React.FunctionComponent&lt;SearchProps&gt; = () =&gt; {

    <span>const</span> dispatch = useDispatch();

    <span>const</span> [currentState, setState] = useState&lt;ISearchState&gt;(initialState);

    <span>const</span> onGenreChange = (e: React.ChangeEvent&lt;HTMLSelectElement&gt;) =&gt; {
        <span>if</span> (e.target.value === <span>'</span><span>--'</span>) {
            <span>return</span>;
        }

        setState(
            {
                selectedItem: e.target.value,
                selectedSearchItem: <span>null</span>
            }
        );
    }

    <span>const</span> onImgMouseDown = (item: SearchStore.GenreDetailedItem) =&gt; {
        setState(
            {
                ...currentState,
                selectedSearchItem: item
            }
        );
    }

    <span>const</span> storeState: SearchStore.SearchState = useSelector(
        (state: ApplicationState) =&gt; state.search as SearchStore.SearchState
    );

    React.useEffect(() =&gt; {
        dispatch(SearchStore.actionCreators.requestSearchInfo(currentState.selectedItem));
    }, [currentState.selectedItem]);

    <span>return</span> (
        &lt;div&gt;
           .....
        <span>&lt;/</span><span>div</span><span>&gt;</span>
    );
}

<span>export</span> <span>default</span> Search;</pre>

<h3><a id="Scrollbars3" name="Scrollbars3">Scrollbars</a></h3>

<p>This is the same ScrollBars as mentioned above</p>

<h3><a id="Redux3" name="Redux3">Redux</a></h3>

<p>This is the Redux code that wires the action creator and Redux store state changes together for the <code>Search </code>component, where it can be seen that this accepts the <code>requestSearchInfo</code> which is sent to the backend WebApi (the <code>fetch(`genre/details/${genre}`)</code>) and a new <code>SearchState </code>is constructed based on the results which is dispatched via the Redus store back to the <code>Search </code>components Redux <a href="https://protect-eu.mimecast.com/s/oiBNCD9pVfQ15DXsQCOYO?domain=react-redux.js.org">useSelector</a> hook which is listening for this state change</p>

<p><span id="prehide80611" onclick="processCodeBlocks.togglePre(80611);">Hide</span>  &nbsp; <span id="preShrink80611" onclick="processCodeBlocks.shrinkExpand(80611);">Shrink</span> <img id="preimg80611" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(80611);">  &nbsp; <span id="copycode80611" onclick="return processCodeBlocks.copyCode(80611);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre80611" processed="true"><span>import</span> { Action, Reducer } from <span>'</span><span>redux'</span>;
<span>import</span> { AppThunkAction } from <span>'</span><span>./'</span>;




<span>export</span> <span>interface</span> SearchState {
    isLoading: <span>boolean</span>;
    genre: string;
    searchInfo: GenreDetailedItemContainer;
}

<span>export</span> <span>interface</span> GenreDetailedItemContainer {
    genreName: string;
    items: Array&lt;GenreDetailedItem&gt;;
}


<span>export</span> <span>interface</span> GenreDetailedItem {
    title: string;
    band: string;
    imageUrl: string;
    paragraphs: Array&lt;string&gt;;
}





<span>interface</span> RequestSearchInfoAction {
    type: <span>'</span><span>REQUEST_SEARCH_INFO'</span>;
    genre: string;
}

<span>interface</span> ReceiveSearchInfoAction {
    type: <span>'</span><span>RECEIVE_SEARCH_INFO'</span>;
    genre: string;
    searchInfo: GenreDetailedItemContainer;
}



type KnownAction = RequestSearchInfoAction | ReceiveSearchInfoAction;





<span>export</span> <span>const</span> actionCreators = {
    requestSearchInfo: (genre: string): AppThunkAction&lt;KnownAction&gt; =&gt; (dispatch, getState) =&gt; {
        
        <span>const</span> appState = getState();
        <span>if</span> (appState &amp;&amp; appState.search &amp;&amp; genre !== appState.search.searchInfo.genreName) {
            fetch(<span>`</span>genre/details/${genre}`)
                .then(response =&gt; response.json() as Promise<span>&lt;</span><span>GenreDetailedItemContainer</span><span>&gt;</span>)
                .then(data =&gt; {
                    dispatch({ type: 'RECEIVE_SEARCH_INFO', genre: genre, searchInfo: data });
                });

            dispatch({ type: 'REQUEST_SEARCH_INFO', genre: genre });
        }
    }
};

// ----------------
// REDUCER - For a given state and action, returns the new state. To support time travel, this must not mutate the old state.
let items: GenreDetailedItem[] = [];
const emptySearchInfo = { genreName: '', items: items };
const unloadedState: SearchState = { genre: '', searchInfo: emptySearchInfo, isLoading: false };

export const reducer: Reducer<span>&lt;</span><span>SearchState</span><span>&gt;</span> = (state: SearchState | undefined, incomingAction: Action): SearchState =&gt; {
    if (state === undefined) {
        return unloadedState;
    }

    const action = incomingAction as KnownAction;
    switch (action.type) {
        case 'REQUEST_SEARCH_INFO':
            return {
                genre: action.genre,
                searchInfo: state.searchInfo,
                isLoading: true
            };
        case 'RECEIVE_SEARCH_INFO':
            // Only accept the incoming data if it matches the most recent request. This ensures we correctly
            // handle out-of-order responses.
            var castedAction = action as ReceiveSearchInfoAction;
            if (action.genre === state.genre) {
                return {
                    genre: castedAction.genre,
                    searchInfo: castedAction.searchInfo,
                    isLoading: false
                };
            }
            break;
    }

    return state;
};</pre>

<h3><a id="Boostrap-popup" name="Boostrap-popup">Boostrap popup</a></h3>

<p>I make use of Bootstrap to show a popup which looks like this when run.</p>

<p><img alt="Image 6" height="445" src="https://www.codeproject.com/KB/scripting/5266424/Popup.png" width="510" data-src="/KB/scripting/5266424/Popup.png" data-sizes="auto" data-srcset="/KB/scripting/5266424/Popup-r-400.png 400w, /KB/scripting/5266424/Popup.png 510w" srcset="/KB/scripting/5266424/Popup-r-400.png 400w, /KB/scripting/5266424/Popup.png 510w"></p>



<p>Where I used this fairly standard BootStrap code</p>

<p><span id="prehide573053" onclick="processCodeBlocks.togglePre(573053);">Hide</span>  &nbsp; <span id="preShrink573053" onclick="processCodeBlocks.shrinkExpand(573053);">Shrink</span> <img id="preimg573053" src="https://www.codeproject.com/images/arrow-up-16.png" onclick="processCodeBlocks.shrinkExpand(573053);">  &nbsp; <span id="copycode573053" onclick="return processCodeBlocks.copyCode(573053);">Copy Code</span></p><pre lang="jscript" data-lang-orig="jscript" id="pre573053" processed="true">&lt;div className=<span>"</span><span>modal fade"</span> id=<span>"</span><span>exampleModal"</span> role=<span>"</span><span>dialog"</span> aria-labelledby=<span>"</span><span>exampleModalLabel"</span> aria-hidden=<span>"</span><span>true"</span>&gt;
    &lt;div className=<span>"</span><span>modal-dialog"</span> role=<span>"</span><span>document"</span>&gt;
        &lt;div className=<span>"</span><span>modal-content"</span>&gt;
            &lt;div className=<span>"</span><span>modal-header"</span>&gt;
                &lt;h5 className=<span>"</span><span>modal-title"</span> id=<span>"</span><span>exampleModalLabel"</span> style={{ color: <span>"</span><span>#0094FF"</span> }}&gt;{currentState.selectedSearchItem.title}<span>&lt;/</span><span>h5</span><span>&gt;</span>
                &lt;button type=<span>"</span><span>button"</span> className=<span>"</span><span>close"</span> data-dismiss=<span>"</span><span>modal"</span> aria-label=<span>"</span><span>Close"</span>&gt;
                    &lt;span aria-hidden=<span>"</span><span>true"</span>&gt;<span>&lt;/</span><span>span</span><span>&gt;</span>
                <span>&lt;/</span><span>button</span><span>&gt;</span>
            <span>&lt;/</span><span>div</span><span>&gt;</span>
            &lt;div className=<span>"</span><span>modal-body"</span>&gt;
                &lt;img className=<span>"</span><span>searchImgPopup"</span> src={currentState.selectedSearchItem.imageUrl} /&gt;
                &lt;Scrollbars
                    autoHeight
                    autoHeightMin={<span>200</span>}
                    autoHeightMax={<span>600</span>}
                    style={{ width: <span>300</span> }}&gt;
                    &lt;div className=<span>"</span><span>mainHeader"</span> style={{ color: <span>"</span><span>#0094FF"</span> }}&gt;{currentState.selectedSearchItem.band}<span>&lt;/</span><span>div</span><span>&gt;</span>
                    &lt;div className=<span>"</span><span>subHeader"</span>&gt;
                        {currentState.selectedSearchItem.paragraphs.map((para, index) =&gt; (
                            &lt;p key={index}&gt;{para}<span>&lt;/</span><span>p</span><span>&gt;</span>
                        ))}
                    <span>&lt;/</span><span>div</span><span>&gt;</span>
                <span>&lt;/</span><span>Scrollbars</span><span>&gt;</span>
            <span>&lt;/</span><span>div</span><span>&gt;</span>
        <span>&lt;/</span><span>div</span><span>&gt;</span>
    <span>&lt;/</span><span>div</span><span>&gt;</span>
<span>&lt;/</span><span>div</span><span>&gt;</span>&nbsp;</pre>

<h2><a id="Conclusion" name="Conclusion">Conclusion</a></h2>

<p>So I had fun writing this small app. I cant definately see that by using the Redux hooks it does clean up the whole Connect -&gt; MapDispatchToProps/MaoStateToProps sort of just cleans that up a bit. I tried to get rid of all my class based components and do pure components or functional components, but I sometimes found the TypeScript got in my way a little bit. Overall though I found it quite doable, and I enjoyed the doing the work.</p>

<p>Anyway hope you all enjoy it, as always votes/comments are welcome</p>


						</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>