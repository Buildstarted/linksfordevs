<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Dev Tip #158: Strongly Typed IDs -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Dev Tip #158: Strongly Typed IDs</h1><div><div id="" class="mcnTextContent">
Primitive obsession is a code smell describing the problem that occurs when developers use primitive types (ints, strings, etc.) instead of better abstractions (custom types) in their designs. Entity ID types are usually integers or GUID types, and in most cases every or nearly-every entity in a given application will have the same type of ID (either int or GUID).<p>The problem with this de facto standard way of designing entities is that it's impossible to tell one ID from another from the type system. You have to rely on context or naming conventions or other weaker signals. You know, just like in dynamic languages like JavaScript. But the whole point of using a strongly-typed language like C# or Java is that you get compile-time checking that you're using the right variable in the right place for the intended purpose.</p><p>The most common bug that results from this code smell is due to transposition errors. For instance, if you need to add an item to an order, is the method signature (itemId, orderId) or is it (orderId, itemId)? You better be sure, because the compiler's not going to save you.</p><p>I've given this topic some thought over the last couple of years and have tried implementing it about a year ago but ran into blockers with how EF Core works with ID types. At the time I wasn't able to get it to work so I brought it up with the product team and figured I'd check back on it later. Well, recently Andrew "Sock" Lock has made some great progress on this front that you should check out if this problem resonates with you. He's written a 4-part series in which he details the problem, solves some issues with using strongly-typed IDs at the UI edges of the system (i.e. how they serialize to JSON), and then moves on to address issues with ORM tools like Dapper and EF Core. I definitely recommend checking it out. The end result requires a fair bit of code for a full solution but he even provides Visual Studio snippets to make it easy to generate the required boilerplate code.
</p><br><em>Do you have a dev tip or programming horror story to share? I'd love to hear it and, with permission, share it with others. Just hit reply and email me.</em></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>