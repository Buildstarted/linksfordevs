<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Document EF Core architecture and internal technical details &#xB7; Issue #1920 &#xB7; dotnet/EntityFramework.Docs - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Document EF Core architecture and internal technical details &#xB7; Issue #1920 &#xB7; dotnet/EntityFramework.Docs - linksfor.dev(s)"/>
    <meta property="article:author" content="ajcvickers"/>
    <meta property="og:description" content="To make it easier for contributors and provider authors to understand the code. Please comment on this issue with internal areas you would like to see documented. Working list of possible topics to..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/dotnet/EntityFramework.Docs/issues/1920"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Document EF Core architecture and internal technical details &#xB7; Issue #1920 &#xB7; dotnet/EntityFramework.Docs</title>
<div class="readable">
        <h1>Document EF Core architecture and internal technical details &#xB7; Issue #1920 &#xB7; dotnet/EntityFramework.Docs</h1>
            <div>by ajcvickers</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 21 Feb 2020</div>
        <p><a href="https://github.com/dotnet/EntityFramework.Docs/issues/1920">https://github.com/dotnet/EntityFramework.Docs/issues/1920</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-channel="marked-as-read:issue:523074274">

              
<div data-gid="MDU6SXNzdWU1MjMwNzQyNzQ=" data-url="/_render_node/MDU6SXNzdWU1MjMwNzQyNzQ=/issues/body" data-channel="issue:523074274">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ajcvickers/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ajcvickers"><img height="40" width="40" alt="@ajcvickers" src="https://avatars0.githubusercontent.com/u/1430078?s=88&amp;v=4"></a>

</p>


  
<div id="issue-523074274">
  <div data-body-version="d07b07a23b146fc87908d79461ad9293" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>To make it easier for contributors and provider authors to understand the code.</p>
<p><strong>Please comment on this issue with internal areas you would like to see documented.</strong></p>
<p>Working list of possible topics to document. This list will evolve in the issue as we make progress. Not everything in the list will necessarily make it to documentation--it will depend on value, resources, etc. as usual.</p>
<ul>
<li>
  <span>
    
  </span> Internal service provider</li>
<li>
  <span>
    
  </span> Singleton options</li>
<li>
  <span>
    
  </span> Dependency objects</li>
<li>
  <span>
    
  </span> DbContext initialization</li>
<li>
  <span>
    
  </span> Context pooling</li>
<li>
  <span>
    
  </span> Change tracking</li>
<li>
  <span>
    
  </span> SaveChanges/update pipeline</li>
<li>
  <span>
    
  </span> Everything query!</li>
<li>
  <span>
    
  </span> Proxies</li>
<li>
  <span>
    
  </span> Lazy-loading</li>
<li>
  <span>
    
  </span> Constructor injection</li>
<li>
  <span>
    
  </span> Everything model building! (<a data-error-text="Failed to load issue title" data-id="333406082" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/EntityFramework.Docs/issues/779" data-hovercard-type="issue" data-hovercard-url="/dotnet/EntityFramework.Docs/issues/779/hovercard" href="https://github.com/dotnet/EntityFramework.Docs/issues/779">#779</a>)</li>
<li>
  <span>
    
  </span> Model building conventions (<a data-error-text="Failed to load issue title" data-id="526332873" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/EntityFramework.Docs/issues/1937" data-hovercard-type="issue" data-hovercard-url="/dotnet/EntityFramework.Docs/issues/1937/hovercard" href="https://github.com/dotnet/EntityFramework.Docs/issues/1937">#1937</a>)</li>
<li>
  <span>
    
  </span> Shadow properties</li>
<li>
  <span>
    
  </span> Logging</li>
<li>
  <span>
    
  </span> Interceptors</li>
<li>
  <span>
    
  </span> Diagnostics</li>
<li>
  <span>
    
  </span> External model building</li>
<li>
  <span>
    
  </span> Metadata interfaces (mutable, etc.)</li>
<li>
  <span>
    
  </span> Weak entity types</li>
<li>
  <span>
    
  </span> Owned entity types</li>
<li>
  <span>
    
  </span> Relational mapping (<a data-error-text="Failed to load issue title" data-id="345998612" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/efcore/issues/12846" data-hovercard-type="issue" data-hovercard-url="/dotnet/efcore/issues/12846/hovercard" href="https://github.com/dotnet/efcore/issues/12846">dotnet/efcore#12846</a>)</li>
<li>
  <span>
    
  </span> Pubternal types</li>
<li>
  <span>
    
  </span> Parameter generation and facets</li>
</ul>
      </div>
</task-lists>


        



    </div>

  </div>
</div>

</div>


              

  


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQwOTQzMQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQwOTQzMQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDQwOTQzMQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ajcvickers/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ajcvickers"><img height="40" width="40" alt="@ajcvickers" src="https://avatars0.githubusercontent.com/u/1430078?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580409431">
    <div>
      

  

<details data-body-version="f1ab4647b139da9c8f518923077da882">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="f1ab4647b139da9c8f518923077da882" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>@aspnet/efteam Please add anything with internals that it might be worth documenting. I would rather have too many things on this list and then trim it, so treat this as brainstorming list--no bad ideas!</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQxODQxOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQxODQxOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDQxODQxOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/bricelam/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bricelam"><img height="40" width="40" alt="@bricelam" src="https://avatars1.githubusercontent.com/u/1226749?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580418418">
    <div>
      

  

<details data-body-version="c2ce5535b6647d19e4ad976f359f8d90">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c2ce5535b6647d19e4ad976f359f8d90" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <ul>
<li>
  <span>
    
  </span> Plugins (type mapping, translators, etc.)</li>
<li>
  <span>
    
  </span> Migrations
<ul>
<li> Diffing (especially how provider model attributes become migration operation attributes)</li>
<li> DDL generation</li>
</ul>
</li>
<li>
  <span>
    
  </span> Scaffolding/Reverse Engineering
<ul>
<li> How design-time services are discovered</li>
<li> Reading database metadata</li>
<li> Provider code hooks (UseMyProvider, literals, etc.)</li>
</ul>
</li>
<li>
  <span>
    
  </span> How the tools work (dotnet-ef and the PMC cmdlets)</li>
</ul>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQ2MjkxMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDQ2MjkxMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDQ2MjkxMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/HamedFathi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/HamedFathi"><img height="40" width="40" alt="@HamedFathi" src="https://avatars2.githubusercontent.com/u/8418700?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580462912">
    <div>
      

  

<details data-body-version="d077abcc65f346680f132ecf1e3082c4">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d077abcc65f346680f132ecf1e3082c4" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Please consider these:</p>
<ol>
<li>
<p>How to get current Table/Column/... information from DbContext. Like <a href="https://stackoverflow.com/questions/42455279/how-to-get-column-name-and-corresponding-database-type-from-dbcontext-in-entity" rel="nofollow">this</a></p>
</li>
<li>
<p>How to call the scaffold/reverse tool by code (Not CLI). Like <a href="https://romiller.com/2017/02/13/ef-core-1-1-run-reverse-engineer-from-code/" rel="nofollow">this</a></p>
</li>
</ol>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDU1NDA5OQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDU1NDA5OQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDU1NDA5OQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/ssg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ssg"><img height="40" width="40" alt="@ssg" src="https://avatars0.githubusercontent.com/u/241217?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580554099">
    <div>
      

  

<details data-body-version="66eb1c36af8a102f9567993982d1c163">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="66eb1c36af8a102f9567993982d1c163" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>I'm not sure if this counts as "internals" but after EF Core 3.0, satisfying the query compiler to run the code on the server-side has been really time consuming. I don't argue the benefits of the change but it's not a straightforward process. I wish there was a documentation comparing client-side running queries with equivalent server-side running ones.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDU5MzU1Nw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDU5MzU1Nw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDU5MzU1Nw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/tudort-iquest/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tudort-iquest"><img height="40" width="40" alt="@tudort-iquest" src="https://avatars1.githubusercontent.com/u/3379622?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580593557">
    <div>
      

  

<details data-body-version="b6d6e9f7acf919a56ebc5ad1ccb04d6b">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="b6d6e9f7acf919a56ebc5ad1ccb04d6b" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>It would be great to see how the major patterns were implemented (or not) in EF - identity map, data mapper, repository, unit-of-work, lazy loading, association table mapping, metadata mapping, query object etc..</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5Njc0Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5Njc0Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDc5Njc0Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/kant2002/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kant2002"><img height="40" width="40" alt="@kant2002" src="https://avatars0.githubusercontent.com/u/4257079?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580796746">
    <div>
      

  

<details data-body-version="908fd61a5844274fc56db0f896dcdc36">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="908fd61a5844274fc56db0f896dcdc36" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>I in general agree with <a data-hovercard-type="user" data-hovercard-url="/users/ssg/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ssg">@ssg</a> , but I want to see how do you generate SQL from different kind of queries. All releases of EF Core starting from betas has changes which require rewriting of the queries to satisfy new version. Expecially many issues I see withing queries which involve GROUP BY or other aggregate functions. If you explain how do you generate SQL using your internal model, it would be easier to write LINQ which will conform to your expected set of queries.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5NzM0NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5NzM0NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDc5NzM0NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/kant2002/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kant2002"><img height="40" width="40" alt="@kant2002" src="https://avatars0.githubusercontent.com/u/4257079?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580797344">
    <div>
      

  

<details data-body-version="9b07836e4c10050db92e32e5643430e0">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="9b07836e4c10050db92e32e5643430e0" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Also what is TPT, TPH, TPC and PMC  ?  It is not very clear.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5OTUxMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDc5OTUxMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDc5OTUxMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/tudort-iquest/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tudort-iquest"><img height="40" width="40" alt="@tudort-iquest" src="https://avatars1.githubusercontent.com/u/3379622?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580799513">
    <div>
      

  

<details data-body-version="190a787978b0ea5b91ea235e098739f0">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="190a787978b0ea5b91ea235e098739f0" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Also what is TPT, TPH, TPC and PMC ? It is not very clear.</p>
</blockquote>
<p>table per type, table per hierarchy, table per concrete class - most O/RMs support these inheritance mapping strategies, maybe under different names..</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDgwNTc5OQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDgwNTc5OQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDgwNTc5OQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/kant2002/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kant2002"><img height="40" width="40" alt="@kant2002" src="https://avatars0.githubusercontent.com/u/4257079?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580805799">
    <div>
      

  

<details data-body-version="5d964f53da723655880919ea1155061e">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="5d964f53da723655880919ea1155061e" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Thanks, I get it. I decipher TPT and PMC myself, but other abbreviations not very often I see in MS documentation (or maybe communication better to say). So that's why I ask. Maybe I'm not alone in that.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDgyMzE3OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU4MDgyMzE3OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU4MDgyMzE3OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/explorer14/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/explorer14"><img height="40" width="40" alt="@explorer14" src="https://avatars3.githubusercontent.com/u/1242932?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-580823178">
    <div>
      

  

<details data-body-version="875de0b7e4b114300a8f1a4805259934">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="875de0b7e4b114300a8f1a4805259934" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <ul>
<li>change tracking</li>
<li>interceptors</li>
<li>save changes</li>
<li>context pooling<br>
, Please!</li>
</ul>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  







<!-- Rendered timeline since 2020-02-10 11:54:53 -->



            </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>