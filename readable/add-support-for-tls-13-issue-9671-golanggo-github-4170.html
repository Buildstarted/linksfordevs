<!DOCTYPE html>
<html lang="en">
<head>
    <title>
crypto/tls: add support for TLS 1.3 &#xB7; Issue #9671 &#xB7; golang/go - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="crypto/tls: add support for TLS 1.3 &#xB7; Issue #9671 &#xB7; golang/go - linksfor.dev(s)"/>
    <meta property="article:author" content="rsc"/>
    <meta property="og:description" content="See https://tools.ietf.org/html/draft-ietf-tls-tls13. Coexistence of IPv4 and IPv6 harms the net package. Coexistence of HTTP/1.x and HTTP/2 will harm the net/http package. For now looks coexistenc..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/golang/go/issues/9671"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - crypto/tls: add support for TLS 1.3 &#xB7; Issue #9671 &#xB7; golang/go</title>
<div class="readable">
        <h1>crypto/tls: add support for TLS 1.3 &#xB7; Issue #9671 &#xB7; golang/go</h1>
            <div>by rsc</div>
            <div>Reading time: 10-13 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://github.com/golang/go/issues/9671">https://github.com/golang/go/issues/9671</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <main id="js-repo-pjax-container" data-pjax-container="">
      
  




  









  

  

  


<div>
  <div>

    
    
  <div data-pjax="">
    
      



  <div id="show_issue" data-channel="issue:55240967:timeline">

    
  



      <div>
      <div>
        <p><span>Assignees</span></p><p><a data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
              <img src="https://avatars2.githubusercontent.com/u/1225294?s=40&amp;v=4" width="20" height="20" alt="@FiloSottile">
</a>        </p>
      </div>

      


      
  </div>


    <h2>Comments</h2>
    <div id="discussion_bucket">
      <div>

  <div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:55240967">

              



              

  


  
  



  
  



  
  


  
  



  
  



  
  



  
  



  
  



  
  



  
  



  
  


  
  



  
  



  
  


  
  



  
  


  
  



  
  



  
  
<div data-gid="MDIwOkNyb3NzUmVmZXJlbmNlZEV2ZW50NDI1MzI4ODY4">
  
        

  


  <div>
  <div id="ref-commit-c1192f5">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">Lekensteyn</a> 

      added a commit
        to Lekensteyn/go
      that referenced
      this issue

    </p><a href="#ref-commit-c1192f5">
      <relative-time datetime="2017-11-23T17:01:42Z" title="Nov 23, 2017, 9:01 AM PST">on Nov 23, 2017</relative-time>
    </a>
    <div>
      

<div data-channel="repo:102609122:commit:c1192f58918d0b258552b1a28124f62b46aea3bf" data-url="/Lekensteyn/go/commit/c1192f58918d0b258552b1a28124f62b46aea3bf/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">
          <img height="20" width="20" alt="@Lekensteyn" src="https://avatars1.githubusercontent.com/u/164530?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds support for RSASSA-PSS signatures in handshake messages as
required by TLS 1.3. Even if TLS 1.2 is negotiated, it must support PSS
when advertised in the Client Hello (this will be done later as the
testdata will change).

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">golang#9671</a>

Change-Id: I8006b92e017453ae408c153233ce5ccef99b5c3f</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-7b9830d">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">Lekensteyn</a> 

      added a commit
        to Lekensteyn/go
      that referenced
      this issue

    </p><a href="#ref-commit-7b9830d">
      <relative-time datetime="2017-11-23T17:01:43Z" title="Nov 23, 2017, 9:01 AM PST">on Nov 23, 2017</relative-time>
    </a>
    <div>
      

<div data-channel="repo:102609122:commit:7b9830d386964435554507ceb393d0b4ca13e8f5" data-url="/Lekensteyn/go/commit/7b9830d386964435554507ceb393d0b4ca13e8f5/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">
          <img height="20" width="20" alt="@Lekensteyn" src="https://avatars1.githubusercontent.com/u/164530?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>PSS signatures in X509 certificates are already supported, and now that
handshake messages also support PSS, let's advertise it in the client
and enable it for the server.

Add test that checks for PSS signatures in (1) handshake messages and
(2) certificates.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">golang#9671</a>

Tested with:

    go test -race crypto/tls -v -test.run TestHandshakeClientCertRSAPSS -args -update

TODO update many other tests since signature_algorithms is updated.
RFC force s_server to disable PSS for other tests, and use PKCS#1 v1.5?
RFC ok to change tests to require openssl from git?

Change-Id: I1b2ce2d13a07f5dda98b918313f3c581ce1d7b1d</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-02a7d0b">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">Lekensteyn</a> 

      added a commit
        to Lekensteyn/go
      that referenced
      this issue

    </p><a href="#ref-commit-02a7d0b">
      <relative-time datetime="2017-11-23T17:07:25Z" title="Nov 23, 2017, 9:07 AM PST">on Nov 23, 2017</relative-time>
    </a>
    <div>
      

<div data-channel="repo:102609122:commit:02a7d0bc9b0b6f67568976006ab10a29c0beb10c" data-url="/Lekensteyn/go/commit/02a7d0bc9b0b6f67568976006ab10a29c0beb10c/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">
          <img height="20" width="20" alt="@Lekensteyn" src="https://avatars1.githubusercontent.com/u/164530?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>This adds support for RSASSA-PSS signatures in handshake messages as
required by TLS 1.3. Even if TLS 1.2 is negotiated, it must support PSS
when advertised in the Client Hello (this will be done later as the
testdata will change).

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">golang#9671</a>

Change-Id: I8006b92e017453ae408c153233ce5ccef99b5c3f</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-8f6324b">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">Lekensteyn</a> 

      added a commit
        to Lekensteyn/go
      that referenced
      this issue

    </p><a href="#ref-commit-8f6324b">
      <relative-time datetime="2017-11-23T17:07:25Z" title="Nov 23, 2017, 9:07 AM PST">on Nov 23, 2017</relative-time>
    </a>
    <div>
      

<div data-channel="repo:102609122:commit:8f6324bf40dc3ed12eea1edf76e64ec65104dc5a" data-url="/Lekensteyn/go/commit/8f6324bf40dc3ed12eea1edf76e64ec65104dc5a/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/Lekensteyn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Lekensteyn">
          <img height="20" width="20" alt="@Lekensteyn" src="https://avatars1.githubusercontent.com/u/164530?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>PSS signatures in X509 certificates are already supported, and now that
handshake messages also support PSS, let's advertise it in the client
and enable it for the server.

Add test that checks for PSS signatures in (1) handshake messages and
(2) certificates.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">golang#9671</a>

Tested with:

    go test -race crypto/tls -v -test.run TestHandshakeClientCertRSAPSS -args -update

TODO update many other tests since signature_algorithms is updated.
RFC force s_server to disable PSS for other tests, and use PKCS#1 v1.5?
RFC ok to change tests to require openssl from git?

Change-Id: I1b2ce2d13a07f5dda98b918313f3c581ce1d7b1d</pre>
    </div>
</div>


    </div>
  </div>
</div>



</div>

  
  




  

    
  



    
  



    
  
<div data-gid="MDE1OlJlZmVyZW5jZWRFdmVudDE5NjEzMjgxNDQ=">
  
        <div>
  <div id="ref-commit-29b01d5">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-29b01d5">
      <relative-time datetime="2018-11-12T20:43:12Z" title="Nov 12, 2018, 12:43 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:29b01d556de22ad0c8b7b24d827123886ae9a701" data-url="/golang/go/commit/29b01d556de22ad0c8b7b24d827123886ae9a701/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Also, add support for the SSLKEYLOGFILE environment variable to the
tests, to simplify debugging of unexpected failures.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: I20a34a5824f083da93097b793d51e796d6eb302b
Reviewed-on: <a href="https://go-review.googlesource.com/c/147417" rel="nofollow">https://go-review.googlesource.com/c/147417</a>
Run-TryBot: Filippo Valsorda &lt;filippo@golang.org&gt;
TryBot-Result: Gobot Gobot &lt;gobot@golang.org&gt;
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-db27e78">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-db27e78">
      <relative-time datetime="2018-11-12T20:43:12Z" title="Nov 12, 2018, 12:43 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:db27e782780fcfe5da39671007374b06a4d8f2d4" data-url="/golang/go/commit/db27e782780fcfe5da39671007374b06a4d8f2d4/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Since TLS 1.3 delivers handshake messages (including KeyUpdate) after
the handshake, the want argument to readRecord had became almost
pointless: it only meant something when set to recordTypeChangeCipherSpec.
Replaced it with a bool to reflect that, and added two shorthands to
avoid anonymous bools in calls.

Took the occasion to simplify and formalize the invariants of readRecord.

The maxConsecutiveEmptyRecords loop became useless when readRecord
started retrying on any non-advancing record in CL 145297.

Replaced panics with errors, because failure is better than undefined
behavior, but contained failure is better than a DoS vulnerability. For
example, I suspect the panic at the top of readRecord was reachable from
handleRenegotiation, which calls readHandshake with handshakeComplete
false. Thankfully it was not a panic in 1.11, and it's allowed now.

Removed Client-TLSv13-RenegotiationRejected because OpenSSL isn't
actually willing to ask for renegotiation over TLS 1.3, the expected
error was due to NewSessionTicket messages, which didn't break the rest
of the tests because they stop too soon.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: I297a81bde5c8020a962a92891b70d6d70b90f5e3
Reviewed-on: <a href="https://go-review.googlesource.com/c/147418" rel="nofollow">https://go-review.googlesource.com/c/147418</a>
Run-TryBot: Filippo Valsorda &lt;filippo@golang.org&gt;
TryBot-Result: Gobot Gobot &lt;gobot@golang.org&gt;
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-dc0be72">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-dc0be72">
      <relative-time datetime="2018-11-12T20:43:42Z" title="Nov 12, 2018, 12:43 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:dc0be727dc6182fb258f9f1048e9a9eef966c563" data-url="/golang/go/commit/dc0be727dc6182fb258f9f1048e9a9eef966c563/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Looks like the introduction of CCS records in the client second flight
gave time to s_server to send NewSessionTicket messages in between the
client application data and close_notify. There seems to be no way of
turning NewSessionTicket messages off, neither by not sending a
psk_key_exchange_modes extension, nor by command line flag.

Interleaving the client write like that tickled an issue akin to <a data-error-text="Failed to load issue title" data-id="201480927" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/18701" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/18701/hovercard" href="https://github.com/golang/go/issues/18701">#18701</a>:
on Windows, the client reaches Close() before the last record is drained
from the send buffer, the kernel notices and resets the connection,
cutting short the last flow. There is no good way of synchronizing this,
so we sleep for a RTT before calling close, like in CL 75210. Sigh.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: I44dc1cca17b373695b5a18c2741f218af2990bd1
Reviewed-on: <a href="https://go-review.googlesource.com/c/147419" rel="nofollow">https://go-review.googlesource.com/c/147419</a>
Run-TryBot: Filippo Valsorda &lt;filippo@golang.org&gt;
TryBot-Result: Gobot Gobot &lt;gobot@golang.org&gt;
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-d669cc4">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-d669cc4">
      <relative-time datetime="2018-11-12T20:43:59Z" title="Nov 12, 2018, 12:43 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:d669cc47ad8bfde5c0a525563803b3cc444fe897" data-url="/golang/go/commit/d669cc47ad8bfde5c0a525563803b3cc444fe897/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Also check original certificate validity when resuming TLS 1.0–1.2. Will
refuse to resume a session if the certificate is expired or if the
original connection had InsecureSkipVerify and the resumed one doesn't.

Support only PSK+DHE to protect forward secrecy even with lack of a
strong session ticket rotation story.

Tested with NSS because s_server does not provide any way of getting the
same session ticket key across invocations. Will self-test like TLS
1.0–1.2 once server side is implemented.

Incorporates CL 128477 by <a data-hovercard-type="user" data-hovercard-url="/users/santoshankr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/santoshankr">@santoshankr</a>.

<span aria-label="This commit closes issue #24919.">Fixes</span> <a data-error-text="Failed to load issue title" data-id="315419081" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/24919" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/24919/hovercard" href="https://github.com/golang/go/issues/24919">#24919</a>
Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: Id3eaa5b6c77544a1357668bf9ff255f3420ecc34
Reviewed-on: <a href="https://go-review.googlesource.com/c/147420" rel="nofollow">https://go-review.googlesource.com/c/147420</a>
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-6435d0c">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-6435d0c">
      <relative-time datetime="2018-11-12T20:44:12Z" title="Nov 12, 2018, 12:44 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:6435d0cfbf72f405f31430e60766add6d6762fe1" data-url="/golang/go/commit/6435d0cfbf72f405f31430e60766add6d6762fe1/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Added some assertions to testHandshake, but avoided checking the error
of one of the Close() because the one that would lose the race would
write the closeNotify to a connection closed on the other side which is
broken on js/wasm (<a data-error-text="Failed to load issue title" data-id="378536976" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/28650" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/28650/hovercard" href="https://github.com/golang/go/issues/28650">#28650</a>). Moved that Close() after the chan sync to
ensure it happens second.

Accepting a ticket with client certificates when NoClientCert is
configured is probably not a problem, and we could hide them to avoid
confusing the application, but the current behavior is to skip the
ticket, and I'd rather keep behavior changes to a minimum.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: I93b56e44ddfe3d48c2bef52c83285ba2f46f297a
Reviewed-on: <a href="https://go-review.googlesource.com/c/147445" rel="nofollow">https://go-review.googlesource.com/c/147445</a>
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-106db71">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-106db71">
      <relative-time datetime="2018-11-12T20:44:34Z" title="Nov 12, 2018, 12:44 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:106db71f3779b0ae3e6dc83b22df0cf04bc36629" data-url="/golang/go/commit/106db71f3779b0ae3e6dc83b22df0cf04bc36629/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Note that the SignatureSchemes passed to GetClientCertificate in TLS 1.2
are now filtered by the requested certificate type. This feels like an
improvement anyway, and the full list can be surfaced as well when
support for signature_algorithms_cert is added, which actually matches
the semantics of the CertificateRequest signature_algorithms in TLS 1.2.

Also, note a subtle behavior change in server side resumption: if a
certificate is requested but not required, and the resumed session did
not include one, it used not to invoke VerifyPeerCertificate. However,
if the resumed session did include a certificate, it would. (If a
certificate was required but not in the session, the session is rejected
in checkForResumption.) This inconsistency could be unexpected, even
dangerous, so now VerifyPeerCertificate is always invoked. Still not
consistent with the client behavior, which does not ever invoke
VerifyPeerCertificate on resumption, but it felt too surprising to
entirely change either.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: Ib2b0dbc30e659208dca3ac07d6c687a407d7aaaf
Reviewed-on: <a href="https://go-review.googlesource.com/c/147599" rel="nofollow">https://go-review.googlesource.com/c/147599</a>
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  <div>
  <div id="ref-commit-46d4aa2">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/gopherbot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gopherbot">gopherbot</a> 

      pushed a commit
      that referenced
      this issue

    </p><a href="#ref-commit-46d4aa2">
      <relative-time datetime="2018-11-12T20:44:43Z" title="Nov 12, 2018, 12:44 PM PST">on Nov 12, 2018</relative-time>
    </a>
    <div>
      

<div data-channel="repo:23096959:commit:46d4aa273d0b7bbfb758f1ac6b03e016ad803623" data-url="/golang/go/commit/46d4aa273d0b7bbfb758f1ac6b03e016ad803623/_render_node/commit/condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/FiloSottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/FiloSottile">
          <img height="20" width="20" alt="@FiloSottile" src="https://avatars1.githubusercontent.com/u/1225294?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>TLS_FALLBACK_SCSV is extremely fragile in the presence of sparse
supported_version, but gave it the best try I could.

Set the server random canaries but don't check them yet, waiting for the
browsers to clear the way of misbehaving middleboxes.

Updates <a data-error-text="Failed to load issue title" data-id="55240967" data-permission-text="Issue title is private" data-url="https://github.com/golang/go/issues/9671" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/9671/hovercard" href="https://github.com/golang/go/issues/9671">#9671</a>

Change-Id: Ie55efdec671d639cf1e716acef0c5f103e91a7ce
Reviewed-on: <a href="https://go-review.googlesource.com/c/147617" rel="nofollow">https://go-review.googlesource.com/c/147617</a>
Reviewed-by: Adam Langley &lt;agl@golang.org&gt;</pre>
    </div>
</div>


    </div>
  </div>
</div>

  

  



</div>

    
  



    
  


    
  



    
  


    
  



    
  



    
  



    
  



    
  


    
  



    
  



    
  



    
  





<!-- Rendered timeline since 2019-10-05 06:48:19 -->



            </div>


            
          </div>

</div>

    
</div>


    </div>
  </div>

  </div>


  </div>
</div>

    </main>
  </div>
  

  </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>