<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <div class="readable">
        <h1>imsnif/bandwhich</h1>
        <p>
by Ma27 <br/>Reading time: 4-5 minutes        </p>
        <p><a href="https://github.com/imsnif/what">https://github.com/imsnif/what</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text">
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/imsnif/bandwhich/blob/master/demo.gif"><img src="https://github.com/imsnif/bandwhich/raw/master/demo.gif" alt="demo"></a></p>
<p>This is a CLI utility for displaying current network utilization by process, connection and remote IP/hostname</p>
<h3>How does it work?</h3>
<p><code>bandwhich</code> sniffs a given network interface and records IP packet size, cross referencing it with the <code>/proc</code> filesystem on linux or <code>lsof</code> on macOS. It is responsive to the terminal window size, displaying less info if there is no room for it. It will also attempt to resolve ips to their host name in the background using reverse DNS on a best effort basis.</p>
<h3>Installation</h3>
<h4>Arch Linux</h4>
<pre><code>pacman -S bandwhich
</code></pre>
<h4>Nix/NixOS</h4>
<p><code>bandwhich</code> is available in <a href="https://github.com/nixos/nixpkgs/blob/master/pkgs/tools/networking/bandwhich/default.nix"><code>nixpkgs</code></a>, and can be installed, for example, with <code>nix-env</code>:</p>
<pre><code>nix-env -iA nixpkgs.bandwhich
</code></pre>
<h4>Void Linux</h4>
<pre><code>xbps-install -S bandwhich
</code></pre>
<h4>Fedora</h4>
<p><code>bandwhich</code> is available in <a href="https://copr.fedorainfracloud.org/coprs/atim/bandwhich/" rel="nofollow">COPR</a>, and can be installed via DNF:</p>
<pre><code>sudo dnf copr enable atim/bandwhich -y &amp;&amp; sudo dnf install bandwhich
</code></pre>
<h4>macOS</h4>
<pre><code>brew install bandwhich
</code></pre>
<h4>Other Linux flavours</h4>
<p><code>bandwhich</code> can be installed using the Rust package manager, cargo. If it's not in your distro repositories or the available version is too old, you can install it via <a href="https://rustup.rs/" rel="nofollow">rustup</a>. You can find additional installation instructions <a href="https://doc.rust-lang.org/book/ch01-01-installation.html" rel="nofollow">here</a>.</p>
<p>The minimum supported Rust version is <strong>1.39.0</strong>.</p>
<pre><code>cargo install bandwhich
</code></pre>
<p>This installs <code>bandwhich</code> to <code>~/.cargo/bin/bandwhich</code> but you need root priviliges to run <code>bandwhich</code>. To fix that, there are a few options:</p>
<ul>
<li>Give the executable elevated permissions: <code>sudo setcap cap_sys_ptrace,cap_dac_read_search,cap_net_raw,cap_net_admin+ep `which bandwhich</code></li>
<li>Run <code>sudo ~/.cargo/bin/bandwhich</code> instead of just <code>bandwhich</code></li>
<li>Create a symlink: <code>sudo ln -s ~/.cargo/bin/bandwhich /usr/local/bin/</code> (or another path on root's PATH)</li>
<li>Set root's PATH to match your own <code>sudo env "PATH=$PATH" bandwhich</code></li>
<li>Pass the desired target directory to cargo: <code>sudo cargo install bandwhich --root /usr/local/bin/</code></li>
</ul>
<h4>Download a prebuilt binary</h4>
<p>If you're on linux, you could also get the generic binary from the releases.</p>
<h4>Windows</h4>
<p>Unfortunately, windows is not supported at the moment - if you'd like to contribute a windows port, it would be very much welcome.</p>
<h3>Usage</h3>
<pre><code>USAGE:
    bandwhich [FLAGS] [OPTIONS]

FLAGS:
    -a, --addresses      Show remote addresses table only
    -c, --connections    Show connections table only
    -h, --help           Prints help information
    -n, --no-resolve     Do not attempt to resolve IPs to their hostnames
    -p, --processes      Show processes table only
    -r, --raw            Machine friendlier output
    -V, --version        Prints version information

OPTIONS:
    -i, --interface &lt;interface&gt;    The network interface to listen on, eg. eth0
</code></pre>
<p><strong>Note that since <code>bandwhich</code> sniffs network packets, it requires root privileges</strong> - so you might want to use it with (for example) <code>sudo</code>.</p>
<p>On Linux, you can give the <code>bandwhich</code> binary a permanent capability to use the required privileges, so that you don't need to use <code>sudo bandwhich</code> anymore:</p>
<div><pre>sudo setcap cap_sys_ptrace,cap_dac_read_search,cap_net_raw,cap_net_admin+ep <span><span>`</span>which bandwhich<span>`</span></span></pre></div>
<p><code>cap_sys_ptrace,cap_dac_read_search</code> gives <code>bandwhich</code> capability to list <code>/proc/&lt;pid&gt;/fd/</code> and resolve symlinks in that directory. It needs this capability to determine which opened port belongs to which process. <code>cap_net_raw,cap_net_admin</code> gives <code>bandwhich</code> capability to capture packets on your system.</p>
<h3>raw_mode</h3>
<p><code>bandwhich</code> also supports an easier-to-parse mode that can be piped or redirected to a file. For example, try:</p>
<pre><code>bandwhich --raw | grep firefox
</code></pre>
<h3>Contributing</h3>
<p>Contributions of any kind are very welcome. If you'd like a new feature (or found a bug), please open an issue or a PR.</p>
<p>To set up your development environment:</p>
<ol>
<li>Clone the project</li>
<li><code>cargo run</code>, or if you prefer <code>cargo run -- -i &lt;network interface name&gt;</code> (you can often find out the name with <code>ifconfig</code> or <code>iwconfig</code>). You might need root privileges to run this application, so be sure to use (for example) sudo.</li>
</ol>
<p>To run tests: <code>cargo test</code></p>
<p>Note that at the moment the tests do not test the os layer (anything in the <code>os</code> folder).</p>
<p>If you are stuck, unsure about how to approach an issue or would like some guidance, you are welcome to contact: <a href="mailto:aram@poor.dev">aram@poor.dev</a></p>
<h3>License</h3>
<p>MIT</p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>