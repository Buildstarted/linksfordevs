<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Testing RESTful Services from the command-line with HttpRepl -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Testing RESTful Services from the command-line with HttpRepl</h1>
    <div class="body" id="article-body"> <p>Tools are the way we get things done and anytime a new one surfaces I am quick to jump in to see if it will help get my job done faster, better, write less code, test more effectively or even just promote ideas for better workflows.</p> <p>This week, the .NET team published a new version on of the <a href="https://github.com/aspnet/HttpRepl">HttpRepl</a>, an open-source command-line tool for interacting with RESTful services.</p> <p>Now, there is already a number of tools for testing APIs. <a href="https://www.getpostman.com/">Postman</a> is well known, <strong>curl</strong> works for simple calls and then there is <a href="https://httpie.org/">HTTPie</a> too for the command line.</p> <p><code>dotnet httprepl</code> is a bit different offering you the ability to work with your service(s) in the same manner you work with file and folders.<br>
</p> <div class="highlight"><pre class="highlight console"><code><span class="go">dotnet httprepl http://localhost:3000
(Disconnected)~ set base &quot;http://localhost:3000&quot; http://localhost:3000/~ set swagger http://localhost:3000/api-docs.json http://localhost:3000/~ ls
. [get]
hello [get]
echo [post]
todo [get|put] http://localhost:3000/~ cd todo
/todo [get|put] http://localhost:3000/todo~ ls
. [get|put]
.. [get]
{id} [get] http://localhost:3000/todo~
</span></code></pre></div> <p>In order to retrieve the list of ToDo items, the <code>get</code> operation is called on the <code>/todo</code> route just as you would do in a browser.</p> <blockquote>
<p>Note that this example is written in Node.js using express. Although this is a .NET Core tool, it can be used for any HTTP RESTful service.<br>
</p>
</blockquote> <div class="highlight"><pre class="highlight console"><code><span class="go">http://localhost:3000/~ get /todo
HTTP/1.1 200 OK
Connection: keep-alive
Content-Length: 150
</span><span class="gp">Content-Type: application/json;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
<span class="go">Date: Thu, 08 Aug 2019 14:27:34 GMT
ETag: W/&quot;96-xKQHQ6FTlo6NIFgo7DqTLvOqhgU&quot;
X-Powered-By: Express [ { &quot;id&quot;: 1, &quot;name&quot;: &quot;School supplies&quot;, &quot;complete&quot;: false }, { &quot;id&quot;: 2, &quot;name&quot;: &quot;Haircut&quot;, &quot;complete&quot;: true }, { &quot;id&quot;: 3, &quot;name&quot;: &quot;Pick up dog from vet&quot;, &quot;complete&quot;: false }
] http://localhost:3000/~
</span></code></pre></div> <h2> <a href="#installing-and-configuration" class="anchor"> </a> Installing and configuration
</h2> <p>The HttpRepl is a <a href="https://docs.microsoft.com/dotnet/core/tools/global-tools?WT.mc_id=devto-blog-shboyer#install-a-global-tool">dotnet global tool</a>, requiring the <a href="https://dotnet.microsoft.com/download/dotnet-core/3.0?WT.mc_id=devto-blog-shboyer">.NET Core SDK</a> to be installed.<br>
</p> <div class="highlight"><pre class="highlight console"><code><span class="go">dotnet tool install -g Microsoft.dotnet-httprepl --version &quot;3.0.0-*&quot;
</span></code></pre></div> <h2> <a href="#enabling-your-http-services" class="anchor"> </a> Enabling your HTTP Services
</h2> <p>Out of the box, there is nothing you need to do to support the HttpRepl global tool. However, in order to support the <code>ls</code> operation to show the endpoints your API or service must have an <a href="https://swagger.io">OpenAPI (aka Swagger)</a> specification to point to. By default, the HttpRepl will look for <code>/swagger/v1/swagger.json</code> </p> <blockquote>
<p>In ASP.NET Core <a href="https://docs.microsoft.com/aspnet/core/tutorials/getting-started-with-nswag?view=aspnetcore-2.2&amp;tabs=visual-studio&amp;WT.mc_id=devto-blog-shboyer">NSwag</a> and <a href="https://docs.microsoft.com/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-2.2&amp;tabs=visual-studio&amp;WT.mc_id=devto-blog-shboyer">Swashbuckle</a> are two options for creating an OpenAPI specification. <a href="https://docs.microsoft.com/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-2.2&amp;WT.mc_id=devto-blog-shboyer">See the docs for how to achieve this in a few steps</a>.</p>
</blockquote> <p>For the Node.js ToDo example, I used <a href="https://www.npmjs.com/package/swagger-jsdoc">swagger-jsdoc</a> and created a route for the Swagger UI at <code>/swagger</code><br>
</p> <div class="highlight"><pre class="highlight javascript"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">&quot;</span><span class="s2">/api-docs.json</span><span class="dl">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">&quot;</span><span class="s2">Content-Type</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">application/json</span><span class="dl">&quot;</span><span class="p">);</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">swaggerSpec</span><span class="p">);</span>
<span class="p">});</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">&quot;</span><span class="s2">/swagger</span><span class="dl">&quot;</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nx">serve</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nx">setup</span><span class="p">(</span><span class="nx">swaggerSpec</span><span class="p">));</span>
</code></pre></div> <p>So I can easily test my API using the UI as well.</p> <p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zwU-BZb0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gjs15twax41hvh0u4ztp.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zwU-BZb0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gjs15twax41hvh0u4ztp.png" alt></a></p> <p>We could easily start the API from VSCode, fire up another terminal and type the starting command to initialize the HttpRepl, but where&apos;s the efficiency in that?</p> <p>Visual Studio Code has the concept of <a href="https://code.visualstudio.com/docs/editor/debugging?WT.mc_id=devto-blog-shboyer#_compound-launch-configurations">compounds allowing you to set up multiple configurations</a> in the launch.json file, starting up multiple debug configs. This is especially helpful in situations where you might have a front-end and back-end system needing to debug as once.</p> <p>In the following configuration, the <strong>nodejsapi</strong> is set to start as well as the <strong>httprepl</strong>.<br>
</p> <div class="highlight"><pre class="highlight javascript"><code><span class="p">{</span> <span class="c1">// Use IntelliSense to learn about possible attributes.</span> <span class="c1">// Hover to view descriptions of existing attributes.</span> <span class="c1">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span> <span class="dl">&quot;</span><span class="s2">version</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">0.2.0</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">compounds</span><span class="dl">&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="dl">&quot;</span><span class="s2">name</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">Launch w/HttpRepl</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">configurations</span><span class="dl">&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="dl">&quot;</span><span class="s2">nodejsapi</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">httprepl</span><span class="dl">&quot;</span> <span class="p">]</span> <span class="p">}</span> <span class="p">],</span> <span class="dl">&quot;</span><span class="s2">configurations</span><span class="dl">&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="dl">&quot;</span><span class="s2">name</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">httprepl</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">type</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">coreclr</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">request</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">launch</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">program</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">dotnet</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">args</span><span class="dl">&quot;</span><span class="p">:</span> <span class="p">[</span><span class="dl">&quot;</span><span class="s2">httprepl</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">http://localhost:3000</span><span class="dl">&quot;</span><span class="p">],</span> <span class="dl">&quot;</span><span class="s2">cwd</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">${workspaceFolder}</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">stopAtEntry</span><span class="dl">&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">console</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">integratedTerminal</span><span class="dl">&quot;</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">&quot;</span><span class="s2">type</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">node</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">request</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">launch</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">name</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">nodejsapi</span><span class="dl">&quot;</span><span class="p">,</span> <span class="dl">&quot;</span><span class="s2">program</span><span class="dl">&quot;</span><span class="p">:</span> <span class="dl">&quot;</span><span class="s2">${workspaceFolder}/nodeapi/app.js</span><span class="dl">&quot;</span> <span class="p">}</span> <span class="p">]</span>
<span class="p">}</span>
</code></pre></div> <p>Hitting F5, or Debug to start the configurations and starts the API as well as the HttpRepl in the integrated terminal and I can test the <code>get /todo</code> and <code>get</code> methods without leaving VS Code and hit the breakpoints. </p> <p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SK4VjvMH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/54ob70x88fmg10wowg54.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SK4VjvMH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/54ob70x88fmg10wowg54.png" alt></a></p> <p>It&apos;s <a href="https://github.com/aspnet/HttpRepl">open-source</a>, please provide feedback on <a href="https://github.com/aspnet/HttpRepl">GitHub</a>! </p> <p>Read the docs, <a href="https://docs.microsoft.com/aspnet/core/web-api/http-repl?view=aspnetcore-2.2&amp;tabs=macos&amp;WT.mc_id=devto-blog-shboyer">Test web APIs with the HTTP REPL</a>. There is much more that you can do with customization, running script files and more.</p> <p>Participate in make your tools better. Thanks!</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>