<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Friends Don&#x27;t Let Friends Use Dodgy WiFi: Introducing Ubiquiti&#x27;s Dream Machine and FlexHD - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Friends Don&#x27;t Let Friends Use Dodgy WiFi: Introducing Ubiquiti&#x27;s Dream Machine and FlexHD - linksfor.dev(s)"/>
    <meta property="article:author" content="Troy Hunt"/>
    <meta property="og:description" content="I hate dodgy WiFi, hate it with a passion. I finally lost my mind with it a few years ago now so I went and shelled out good money on the full suite of good Ubiquiti gear. I bought a security gateway to do DHCP, a couple of switches for"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.troyhunt.com/friends-dont-let-friends-use-dodgy-wifi-introducing-ubiquitis-dream-machine-and-flexhd/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Friends Don&#x27;t Let Friends Use Dodgy WiFi: Introducing Ubiquiti&#x27;s Dream Machine and FlexHD</title>
<div class="readable">
        <h1>Friends Don&#x27;t Let Friends Use Dodgy WiFi: Introducing Ubiquiti&#x27;s Dream Machine and FlexHD</h1>
            <div>by Troy Hunt</div>
            <div>Reading time: 9-12 minutes</div>
        <div>Posted here: 12 Mar 2020</div>
        <p><a href="https://www.troyhunt.com/friends-dont-let-friends-use-dodgy-wifi-introducing-ubiquitis-dream-machine-and-flexhd/">https://www.troyhunt.com/friends-dont-let-friends-use-dodgy-wifi-introducing-ubiquitis-dream-machine-and-flexhd/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><section>
            <p>I hate dodgy WiFi, hate it with a passion. I finally lost my mind with it a few years ago now so <a href="https://www.troyhunt.com/ubiquiti-all-the-things-how-i-finally-fixed-my-dodgy-wifi/">I went and shelled out good money on the full suite of good Ubiquiti gear</a>. I bought a security gateway to do DHCP, a couple of switches for all my connected things, 5 access points for my wireless things and a Cloud Key to control them all. I went overboard and I don't regret it one bit!</p><p>Since that time, Ubiquiti has occasionally sent me new bits to play around with. <a href="https://www.troyhunt.com/how-i-finally-fixed-the-dodgy-wifi-on-my-jet-ski-with-ubiquitis-unifi-mesh/">I fixed the poor Wifi on my jet ski with their UniFi Mesh bits</a> (I know, the most first world of problems). <a href="https://www.troyhunt.com/wiring-a-home-network-from-the-ground-up-with-ubiquiti/">I wired my brother's house from top to bottom with their in-wall units</a>. <a href="https://www.troyhunt.com/how-i-finally-fixed-my-parents-dodgy-wifi-with-amplifi/">I fixed my parents' dodgy WiFi with their consumer line, AmpliFi</a>. And finally, <a href="https://www.troyhunt.com/heres-what-this-ubiquiti-unifi-stuff-is-all-about/">I created a free course to introduce people to the UniFi line of products where I wired up my good mate Raf's Italian restaurant</a>.</p><p>Recently, they sent me over one of their new bits, <a href="https://store.ui.com/collections/routing-switching/products/unifi-dream-machine">the UniFi Dream Machine</a> (UDM):</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/UDM_Back_e5476b1e-d0ef-42a7-9ec1-f323330608a1_1024x1024.png"></figure><p>This is all the bits I put into my own house but combined into one unit. In a way, it's kinda going full circle; the joy of the security gateway, switches, access points and Cloud Key was that it decomposed the network and I could build it out to my heart's content with just the bits I wanted. The joy of the UDM is that it builds it all into one unit so... kinda back where I started from? Kinda, but there are cases where an all-in-one unit make sense. My parents were just fine with the AmpliFi unit. But that's pretty limited compared to the complete UniFi ecosystem I'm running at home. For example, you can't create VLANs on the AmpliFi platform nor is there the same extensibility as you get with <a href="https://unifi-network.ui.com/">the whole suite of UniFi access points and accessories</a>. In that regard, the UDM is a bit of the best of both worlds in that it's pretty much a turnkey solution, but you can build it out as much as you.</p><p>Back to Raf: he's flipping pizzas with full bars of connectivity but when he goes home, the connection goes downhill pretty quickly. His large 2-story house has the telco-provided (Telstra) all-in-one modem and wireless router sitting downstairs in the front room near the phone line:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/IMG_1788.jpg"></figure><p>But head upstairs to the master bedroom on the other side of the house and there was nothing. Nada. Well, <em>almost </em>nada, my iPhone 11 Pro couldn't even connect to the access point but my laptop just managed to make a high-latency, low-bandwidth connection:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/image-2.png"></figure><p>Keep that speed in mind as we'll come back to it later on. Let's jump into the UDM, starting with what's in the box:</p><!--kg-card-begin: markdown--><p><img src="https://www.troyhunt.com/content/images/2020/03/IMG_1790-1.jpg" alt=""></p>
<!--kg-card-end: markdown--><p>That's it. Whilst I had the laptop out right next to it (primarily to run <a href="https://www.metageek.com/products/inssider/">inSSIDer</a> and see just how woeful the signal was in parts of the house), because this is the more consumer-orientated unit I'm going to put my consumer hat on and do the whole config via phone. Easiest way to get started is just to plug the UDM into the power, plug an ethernet cable into its WAN port and a jack on the Telstra modem then check out the surrounding networks:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-38-45.png"></figure><p>Ok, that's <em>way</em> too many networks nearby a big house, what are they all? Most of them are being broadcast by the Telstra box on Raf's shelf: <a href="https://www.troyhunt.com/p/6c670417-5d3b-4c2f-bd3a-a8aac92dac31/fon.com/fon-telstra-wifi-deployment/">Fon WiFi gets bundled into Telstra devices</a>, Telstra Air is... worrying:</p><!--kg-card-begin: html--><twitter-widget id="twitter-widget-0" data-tweet-id="656693274158088192"></twitter-widget> <!--kg-card-end: html--><p>The Telstra network ending with 89900 is the primary SSID Raf's other devices connect to and the one ending in 4C5AA is a neighbour's. But it's the UDM Setup network we're interested in here and <em>one</em> option is to connect to that then fire up the Ubiquiti mobile app (the same one I'm already using to manage all the other UniFi networks I've set up). Another option is that the app can just Bluetooth to the UDM:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-41-31.png"></figure><p>You can see it attempting to connect to my home network in background (the last network I'd connected to), but then prompting me to set up the new newly discovered UDM. Let's do that:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-41-42.png"></figure><p>First up - give it a name. Something creative... (ok, not so much, but I'll get creative later on)</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-42-07.png"></figure><p>Next, let's choose who's going to admin the unit based on their Ubiquiti account. I'm already signed into the app so I pop up straight away:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-42-23.png"></figure><p>I later get Raf to set up his own Ubiquiti account and give him read access to everything. Yes, I know it's his network but if I'm going to be admin then I don't want things arbitrarily changing without me knowing (Raf makes a mean pizza but I'm not confident in his network administration skills).</p><p>Auto-optimise is fine, but I'm going to keep Raf's diagnostic stuff private:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-42-30.png"></figure><p>Now let's give the SSID a name. I've always wanted to create an SSID with an emoji just to see how weird some clients get so let's make it interesting and name the network after the dog <em>and</em> add a dog emoji just for kicks:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-44-49.png"></figure><p>You'll see I've kept the 2.4GHz and 5GHz networks on the same SSID. I've done the same on every install I've ever done and I'm quite happy with clients negotiating which network they'd like to connect to so it's the same on this one.</p><p>This next bit, I <em>really</em> love:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-44-58.png"></figure><p>I made the following comments in my first every blog post about Ubiquiti:</p><blockquote>I had Billion devices before Linksys and I don't think I <em><em>ever</em></em> saw a firmware update over many years which worried me not just because I'm sure there was broken stuff in there, but because it was never <em><em>evolving</em></em>. It was like "here's your router, uh, good luck!"</blockquote><p>I suspect many of you reading this are in the same boat where you've got some legacy piece of equipment that's never updated itself. Just having updates available is enormously important, but auto-updating is even more important in a case like this where Raf is never going to go out and look for firmware updates himself.</p><p>And finally, a speed test:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-45-21.png"></figure><p>That's the good bit - 43Mbps+ which is what his connection maxes out at (yeah, Australia...). However...</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-45-56.png"></figure><p>Check out the upload speed - 1Mbps. That sucks even by Australian standards. This totally threw me and I went through a cycle of connecting back to the Telstra unit and checking the speed (same down, but 18Mbps+ up), back to the UDM, restarting the UDM, checking for updates, Googling and finally finding <a href="https://community.ui.com/questions/Slow-internet-speed-after-1-5-0-1974-firmware-update-Smart-Queues-Enabled/007ba8de-a4ba-4255-ad17-b97fcdabd77c">a piece on how Smart Queues were adversely impacting network speed</a>. As soon as I disabled Smart Queues, everything came good. This was a painful troubleshooting process that I really didn't expect and I wanted to make sure it was included here because regardless of how much I love getting free gear, writing authentic pieces is much more important (plus, it's the only negative thing you'll read here). I've passed this feedback to Ubiquiti and they're looking into it.</p><p>Moving on, here's a summary of the whole setup:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-47-20.png"></figure><p>Yep, looks good, let's finish and wait:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-47-26.png"></figure><p>Once that's done, I can now connect my phone directly to the new network:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-50-45.png"></figure><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-50-53.png"></figure><p>And we're done! I'm now on the network:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-55-39.png"></figure><p>As such, I can use the iOS app to connect to Raf's UDM just as I connect to the other UniFi networks I manage:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-55-46.png"></figure><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--13-56-02.png"></figure><p>Judging by the times on each of those photos, that's a total of 15 minutes from the first setup screen to the last including taking all the screen caps and making notes in a draft blog post (the Smart Queues troubleshooting I did later on). </p><p>Let's now see how different devices handle the new emoji-equipped network, starting with the Apple TV:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--15-14-33.jpg"></figure><p>Cool, 🐶 is accompanying Alfienet. The Samsung TV it's connected to, however, is sans 🐶:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--15-12-02.jpg"></figure><p>But it still connects so no problems there. The old Brother DCP-J4120DW printer was even less happy (and a lot dirtier):</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--15-04-42.jpg"></figure><p>Still connected though, it just doesn't understand how to properly encode emojis.</p><p>And so we kept connecting clients until everything worked. Mostly - the upstairs bedroom was still a dead spot. I fully expected that which I why I brought along a brand new <a href="https://unifi-flexhd.ui.com/">FlexHD</a>:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/195699_feature-1.png"></figure><p>The image pretty much sums it all up; think of it as an additional access point about the size of one of those skinny Coke cans. I sat it down at the absolute other end of the house, still on the same floor as the UDM but directly under the master bedroom with the woeful connectivity:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--15-46-07.jpg"></figure><p>Frankly, that's a better photo of his pool than the FlexHD but I wanted to illustrate how it's an unobtrusive unit that can sit there on a table and blend into the environment. Once we powered that on, I dropped into the UniFi control panel where the UDM had already found the new family member:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/image-13.png"></figure><p>Press "Adopt", give it a few minutes then it's job done. There was a firmware update pending too so I took that and that was the end of the story. With a bunch of clients now connected, here's what the network map looks like:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/image-14.png"></figure><p>Luca had just come home from school and after connecting to Alfienet 🐶 had wandered over to the kitchen where his iPhone seamlessly moved across the mesh network and jumped onto the FlexHD unit. And that's really the whole beauty of the Ubiquiti suite of products whether we're talking UniFi or AmpliFi; it's the ability to extend the network to all corners of the property and have clients pick whichever access point works best for them without the owner ever having to think about it. It's just wifi everywhere all the time.</p><p>Which leads us to the finale of the post - what's the connection speed like in the bedroom now? Check it out:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-3-3-20--14-50-25.png"></figure><p>All the bars and all the Mbps 😎 Plus, remember the speed I got directly from the UDM hardwired to the Telstra modem during setup? That was 43.4Mbps so suffice to say we're losing <em>nothing</em> to the air when communicating internally across different ends of the house.</p><p>The very last thing I did before leaving Raf's was to disable all the wireless radios on the Telstra unit. I checked in just before publishing this blog post and apparently, everything is good:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-12-3-20--17-56-48.png"></figure><p>Plus, there's a nice distribution of clients connecting to both the UDM and the FlexHD satellite unit:</p><figure><img src="https://www.troyhunt.com/content/images/2020/03/Photo-12-3-20--17-57-06.png"></figure><p>Long live Alfienet 🐶</p>

            <section>
                <a href="https://www.troyhunt.com/tag/ubiquiti/">Ubiquiti</a>
            </section>
        </section></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>