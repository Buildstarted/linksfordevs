<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Updating Browsers Quickly: Flags, Respins, and&#xA0;Components -
linksfor.dev(s)
    </title>
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Updating Browsers Quickly: Flags, Respins, and&#xA0;Components</h1>
    <div class="entry-content"> <p>By this point, most browser enthusiasts know that Chrome has a <a href="https://blog.chromium.org/2010/07/release-early-release-often.html">rapid release cycle</a>, releasing a new stable version of the browser <a href="https://www.chromestatus.com/features/schedule">approximately every six weeks</a>. The Edge team intends to <a href="https://blogs.windows.com/msedgedev/2019/04/08/microsoft-edge-preview-channel-details/">adopt that rapid release cadence</a> for our new browser, and we&#x2019;re already releasing new <a href="https://www.microsoftedgeinsider.com/">Edge Dev Channel builds</a> every week.</p>
<p>What might be less obvious is that this six week cadence represents an <em>upper-bound</em> for how long it might take for an important change to make its way to the user.</p>
<h2>Background: Staged Rollouts</h2>
<p>Chrome uses a <a href="https://chromium.googlesource.com/chromium/src/+/master/docs/process/release_cycle.md">staged rollout plan</a>, which means only a small percentage (1%-5%) of users get the new version immediately. If any high-priority problems are flagged by those initial users, the rollout can be paused while the team considers how to best fix the problem. That fix might involve shipping a new build, turning off a feature using the experimentation server, or dynamically updating a component.</p>
<p>Let&#x2019;s look at each.</p>
<h2>Respins</h2>
<p>If a serious security or functionality problem is found in the Stable Channel, the development team generates a&#xA0;<strong>respin&#xA0;</strong>of the release, which is a new build of the browser with the specific issue patched. The major and minor version numbers of the browser stay the same. For instance, on July 15th, Chrome Stable version 75.0.3770.100 was updated to <a href="https://chromereleases.googleblog.com/2019/07/stable-channel-update-for-desktop.html">75.0.3770.142</a>.&#xA0;Users who had already installed the buggy version in the channel are updated automatically, and users who haven&#x2019;t yet updated to the buggy version will just get the fixed version when the rollout reaches them.</p>
<p>If you&#x2019;re curious, you can see exactly which versions of Chrome are being delivered from Google&#x2019;s update servers for each Channel <a href="https://omahaproxy.appspot.com/">using OmahaProxy</a>.</p>
<h2>Field Trial Flags</h2>
<p>In some cases, a problem is discovered in a new feature that the team is experimenting with. In these cases, it&#x2019;s usually easy for the team to simply remotely disable or reconfigure the experiment as needed using the experimental flags. The browser client periodically polls the development team&#x2019;s servers to get the latest experimental configuration settings. Chrome codenames their experimental system &#x201C;Finch,&#x201D; while Microsoft calls ours &#x201C;CFR&#x201D; (Controlled Feature Rollout).</p>
<p>You can see your browser&#x2019;s current field trial configuration by navigating to</p>
<pre>chrome://version/?show-variations-cmd</pre>
<p>The hexadecimal <strong>Variations</strong> list is generally inscrutable, but the <strong>Command-line variations&#xA0;</strong>section later in the page is often more useful and allows you to better understand what trials are underway. You can even use this list to <a href="https://twitter.com/thisIsSebM/status/1136306136943140866">identify the exact trial</a> causing a particular problem.</p>
<p>Regular readers might remember that I&#x2019;ve previously written about <a href="https://textslashplain.com/2017/10/18/chrome-field-trials/">Chrome&#x2019;s Field Trials system</a>.</p>
<h2>Components</h2>
<p>In other cases, a problem is found in a part of the browser implemented as a &#x201C;Component.&#x201D; Components are much like hidden, built-in extensions that can be silently and automatically updated by the <a href="https://chromium.googlesource.com/chromium/src/+/lkgr/components/component_updater/README.md">Component Updater</a>.</p>
<blockquote><p>The primary benefit of components is that they can be updated without an update to Chrome itself, which allows them to have faster (or desynchronized) release cadences, lower bandwidth consumption, and avoids bloat in the (already sizable) Chrome installer. The primary drawback is that they require Chrome to tolerate their absence in a sane way.</p></blockquote>
<p>To me, the <em>coolest</em> part of components is that not only can they update without downloading a new version of the browser, in some cases users <em>don&#x2019;t even need to restart</em> their browser to begin using the updated version of a component. As soon as a new version is downloaded, <a href="https://cs.chromium.org/chromium/src/chrome/browser/component_updater/file_type_policies_component_installer.cc?l=89&amp;rcl=ad4bb9f00da60f19ba096938376cd4992a28c374">it can &#x201C;take over&#x201D;</a> from the prior version.</p>
<p>To see the list of components in the browser, visit</p>
<pre>chrome://components</pre>
<p>In my Chrome Canary instance, I see the following components:</p>
<p><img class="alignnone size-full wp-image-2072" src="https://textplain.files.wordpress.com/2019/07/components.png?w=644" alt="Components" srcset="https://textplain.files.wordpress.com/2019/07/components.png 644w, https://textplain.files.wordpress.com/2019/07/components.png?w=150 150w, https://textplain.files.wordpress.com/2019/07/components.png?w=300 300w" sizes="(max-width: 644px) 100vw, 644px"></p>
<p>As you can see, many of these have rather obtuse names, but here&#x2019;s a quick explanation where I know offhand:</p>
<ul>
<li><strong>MEI Preload</strong> &#x2013; Policies for autoplay (see chrome://media-engagement/ )</li>
<li><strong>Intervention Policy</strong> &#x2013; Controls interventions used on misbehaving web pages</li>
<li><strong>Third Party Module</strong> &#x2013; Used to exempt accessibility and other components from the Code Integrity protections on the browser&#x2019;s process that otherwise forbid injection of DLLs.</li>
<li><strong>Subresource Filter Rules</strong> &#x2013; The <a href="https://easylist.to/">EasyList adblock database</a> used by <a href="https://www.ctrl.blog/entry/chrome-adblocker.html">Chrome&#x2019;s built-in adblocker</a> to remove ads from a webpage when the Safe Browsing service indicates that a site <a href="https://blog.chromium.org/2018/02/how-chromes-ad-filtering-works.html">violates the guidelines</a> in the Better Ads Standard.</li>
<li><strong>Certificate Error Assistant</strong> &#x2013; Helps users understand and recover from certificate errors (e.g. when behind a known WiFi captive portal).</li>
<li><strong>Software Reporter Tool</strong> &#x2013; Collects data about system configuration / malware.</li>
<li><strong>CRLSet&#xA0;</strong>&#x2013;&#xA0;<a href="https://www.imperialviolet.org/2012/02/05/crlsets.html">List of known-bad certificates</a> (used to replace <a href="https://blogs.msdn.microsoft.com/ieinternals/2011/04/07/understanding-certificate-revocation-checks/">OCSP/CRL</a>).</li>
<li><strong>pnacl</strong> &#x2013; Portable Native Client (<a href="https://developer.chrome.com/native-client/migration">overdue for removal</a>)</li>
<li><strong>Chrome Improved Recovery</strong> &#x2013;<em>&#xA0;Unsure, but comments suggest this is related to helping fix broken Google Updater services, etc.</em></li>
<li><strong>File Type Policies&#xA0;</strong>&#x2013; Maps a list of file types to a set of policies concerning how they should be downloaded, what warnings should be presented, etc. See below.</li>
<li><strong>Origin Trials&#xA0;</strong>&#x2013; Used to allow websites to opt-in to experimenting with future web features on their sites. <a href="https://github.com/GoogleChrome/OriginTrials">Explainer</a>.</li>
<li><strong>Adobe Flash Player&#xA0;</strong>&#x2013; The world&#x2019;s most popular plugin, gradually being <a href="https://www.chromium.org/flash-roadmap">phased out</a>; slated for complete removal in <a href="https://www.blog.google/products/chrome/saying-goodbye-flash-chrome/">late 2020</a>.</li>
<li><strong>Widevine Content Decryption</strong> &#x2013; <a href="https://en.wikipedia.org/wiki/Widevine">A DRM system</a> that permit playback of protected video content.</li>
</ul>
<p>If you&#x2019;re using an older Chrome build, you might see:</p> <p>If you&#x2019;re using Edge, you might see:</p> <p>If you&#x2019;re using the Chromium-derived <a href="https://brave.com/">Brave browser</a>, you&#x2019;ll see that brave://components includes a bunch of extra components, including &#x201C;Ad Blocker&#x201D;, &#x201C;Tor Client&#x201D;, &#x201C;PDF Viewer&#x201D;, &#x201C;HTTPS Everywhere&#x201D;, and &#x201C;Local Data Updater.&#x201D;</p>
<p>If you&#x2019;re using Chrome on Android, you might notice that it&#x2019;s only using three components instead of thirteen; the missing components simply aren&#x2019;t used (for various reasons) on the mobile platform. As noted in the developer documentation, &#x201C;<em>The primary drawback [to building a feature using a Component] is that [Components] require Chrome to tolerate their absence in a sane way.</em>&#x201D;</p>
<h3>Case Study: Fast Protection via Component Update</h3>
<p>Let&#x2019;s take a closer look at my favorite component, the <strong>File Type Policies</strong> component.</p>
<p>When the browser downloads a file, it must make a number of decisions for security reasons. In particular, it needs to know whether the file type is potentially harmful to the user&#x2019;s device. If the filetype is innocuous (e.g. plaintext), then the file may be downloaded without any prompts. If the type is potentially dangerous, the user should be warned before the download completes, and security features like SafeBrowsing/SmartScreen should scan the completed download for malicious content.</p>
<p>In the past, this sort of &#x201C;What File Types are Dangerous?&#x201D; list was <a href="https://support.microsoft.com/en-us/help/883260/information-about-the-attachment-manager-in-microsoft-windows">hardcoded</a>&#xA0;into various products. If a file type were later found to be dangerous, patching these products with updated threat information required weeks to months.</p>
<p>In contrast, Chrome delivers this <a href="https://chromium.googlesource.com/chromium/src/+log/HEAD/chrome/browser/resources/safe_browsing/download_file_types.asciipb">file type policy information</a> using the File Type Policies component. The component lets Chrome engineers specify which types are dangerous, which types may be configured to automatically open, which types are archives that contain other files that may require scanning, and so on.</p>
<p>How does this work in the real world? Here&#x2019;s an example.</p>
<p>Around a year ago, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=851528#c4">it was discovered</a> that files with the .SettingsContent-ms file extension could be used to compromise the security of the user&#x2019;s device. Browsers previously didn&#x2019;t take any special care when such files were downloaded, and most users had no idea what the files were or <a href="https://posts.specterops.io/the-tale-of-settingcontent-ms-files-f1ea253e4d39">what would happen</a> if they were opened. Everyone was caught flat-footed.</p>
<p><span>In less than a day after this threat came to light,&#xA0;a Chrome engineer simply&#xA0;</span><a href="https://chromium.googlesource.com/chromium/src/+/HEAD/chrome/browser/resources/safe_browsing/README.md">updated</a><span>&#xA0;a single&#xA0;</span><a href="https://chromium.googlesource.com/chromium/src/+log/HEAD/chrome/browser/resources/safe_browsing/download_file_types.asciipb">file</a><span>&#xA0;to mark the <a href="https://cs.chromium.org/chromium/src/chrome/browser/resources/safe_browsing/download_file_types.asciipb?l=2434&amp;rcl=0ed9db1508bb50dbf192395fc2304b3c3fe0bbf2">settings-content.ms file type</a> as potentially dangerous. The change was picked up by the component builder, and Chrome users across</span> all<span> versions and channels were protected as their browser automatically pulled down the updated component in the background.</span></p> <p>Ever faster!</p>
<p>-Eric</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>