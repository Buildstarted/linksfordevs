<!DOCTYPE html>
<html lang="en">
<head>
    <title>linksfor.dev(s)</title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <meta property="article:author" content="Buildstarted"/>
    <meta property="og:site_name" content="linksfor.dev(s)" />
    <meta property="og:title" content="linksfor.dev(s)" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="A curated list of sources of development information including c#, c++, and other dev related links." />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - fun with variance</title>
<div class="readable">
        <h1>fun with variance</h1>
        <p>
Reading time: 5-6 minutes        </p>
        <p><a href="https://gist.github.com/mgravell/96013fc934fd7eb2fb9cfdb589babdce">https://gist.github.com/mgravell/96013fc934fd7eb2fb9cfdb589babdce</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
  <div id="file-fun-with-variance">
      
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-fun-with-variance-L1" data-line-number="1"></td>
        <td id="file-fun-with-variance-LC1">using System;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L2" data-line-number="2"></td>
        <td id="file-fun-with-variance-LC2">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L3" data-line-number="3"></td>
        <td id="file-fun-with-variance-LC3">interface IFactory&lt;out T&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L4" data-line-number="4"></td>
        <td id="file-fun-with-variance-LC4">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L5" data-line-number="5"></td>
        <td id="file-fun-with-variance-LC5">    T Create();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L6" data-line-number="6"></td>
        <td id="file-fun-with-variance-LC6">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L7" data-line-number="7"></td>
        <td id="file-fun-with-variance-LC7">static class P</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L8" data-line-number="8"></td>
        <td id="file-fun-with-variance-LC8">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L9" data-line-number="9"></td>
        <td id="file-fun-with-variance-LC9">    static void Main()</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L10" data-line-number="10"></td>
        <td id="file-fun-with-variance-LC10">    {</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L11" data-line-number="11"></td>
        <td id="file-fun-with-variance-LC11">        IFactory&lt;Base&gt; ambiguous = new MixedMidFactory();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L12" data-line-number="12"></td>
        <td id="file-fun-with-variance-LC12">        Console.WriteLine(ambiguous.Create()); // MidA</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L13" data-line-number="13"></td>
        <td id="file-fun-with-variance-LC13">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L14" data-line-number="14"></td>
        <td id="file-fun-with-variance-LC14">        ambiguous = new MixedMidFactoryReversed();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L15" data-line-number="15"></td>
        <td id="file-fun-with-variance-LC15">        Console.WriteLine(ambiguous.Create()); // MidB</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L16" data-line-number="16"></td>
        <td id="file-fun-with-variance-LC16">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L17" data-line-number="17"></td>
        <td id="file-fun-with-variance-LC17">        ambiguous = new MixedMidFactoryFull();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L18" data-line-number="18"></td>
        <td id="file-fun-with-variance-LC18">        Console.WriteLine(ambiguous.Create()); // Base</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L19" data-line-number="19"></td>
        <td id="file-fun-with-variance-LC19">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L20" data-line-number="20"></td>
        <td id="file-fun-with-variance-LC20">        ambiguous = new TwoTierFactory();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L21" data-line-number="21"></td>
        <td id="file-fun-with-variance-LC21">        Console.WriteLine(ambiguous.Create()); // MidA</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L22" data-line-number="22"></td>
        <td id="file-fun-with-variance-LC22">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L23" data-line-number="23"></td>
        <td id="file-fun-with-variance-LC23">        ambiguous = new TwoTierFactoryReversed();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L24" data-line-number="24"></td>
        <td id="file-fun-with-variance-LC24">        Console.WriteLine(ambiguous.Create()); // SuperMidA</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L25" data-line-number="25"></td>
        <td id="file-fun-with-variance-LC25">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L26" data-line-number="26"></td>
        <td id="file-fun-with-variance-LC26">        ambiguous = new TwoTierFactoryFull();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L27" data-line-number="27"></td>
        <td id="file-fun-with-variance-LC27">        Console.WriteLine(ambiguous.Create()); // Base</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L28" data-line-number="28"></td>
        <td id="file-fun-with-variance-LC28">    }</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L29" data-line-number="29"></td>
        <td id="file-fun-with-variance-LC29">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L30" data-line-number="30"></td>
        <td id="file-fun-with-variance-LC30">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L31" data-line-number="31"></td>
        <td id="file-fun-with-variance-LC31">class Base { }</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L32" data-line-number="32"></td>
        <td id="file-fun-with-variance-LC32">class MidA : Base { }</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L33" data-line-number="33"></td>
        <td id="file-fun-with-variance-LC33">class MidB : Base { }</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L34" data-line-number="34"></td>
        <td id="file-fun-with-variance-LC34">class SuperMidA : MidA { }</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L35" data-line-number="35"></td>
        <td id="file-fun-with-variance-LC35">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L36" data-line-number="36"></td>
        <td id="file-fun-with-variance-LC36">// implements factories for two subclasses in separate hierarchies</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L37" data-line-number="37"></td>
        <td id="file-fun-with-variance-LC37">class MixedMidFactory : IFactory&lt;MidA&gt;, IFactory&lt;MidB&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L38" data-line-number="38"></td>
        <td id="file-fun-with-variance-LC38">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L39" data-line-number="39"></td>
        <td id="file-fun-with-variance-LC39">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L40" data-line-number="40"></td>
        <td id="file-fun-with-variance-LC40">    MidB IFactory&lt;MidB&gt;.Create() =&gt; new MidB();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L41" data-line-number="41"></td>
        <td id="file-fun-with-variance-LC41">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L42" data-line-number="42"></td>
        <td id="file-fun-with-variance-LC42">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L43" data-line-number="43"></td>
        <td id="file-fun-with-variance-LC43">// only difference to MixedMidFactory is interface declaration order</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L44" data-line-number="44"></td>
        <td id="file-fun-with-variance-LC44">class MixedMidFactoryReversed : IFactory&lt;MidB&gt;, IFactory&lt;MidA&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L45" data-line-number="45"></td>
        <td id="file-fun-with-variance-LC45">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L46" data-line-number="46"></td>
        <td id="file-fun-with-variance-LC46">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L47" data-line-number="47"></td>
        <td id="file-fun-with-variance-LC47">    MidB IFactory&lt;MidB&gt;.Create() =&gt; new MidB();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L48" data-line-number="48"></td>
        <td id="file-fun-with-variance-LC48">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L49" data-line-number="49"></td>
        <td id="file-fun-with-variance-LC49">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L50" data-line-number="50"></td>
        <td id="file-fun-with-variance-LC50">// like MixedMidFactoryReversed, but also implements the actual type requested</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L51" data-line-number="51"></td>
        <td id="file-fun-with-variance-LC51">class MixedMidFactoryFull : IFactory&lt;MidA&gt;, IFactory&lt;MidB&gt;, IFactory&lt;Base&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L52" data-line-number="52"></td>
        <td id="file-fun-with-variance-LC52">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L53" data-line-number="53"></td>
        <td id="file-fun-with-variance-LC53">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L54" data-line-number="54"></td>
        <td id="file-fun-with-variance-LC54">    MidB IFactory&lt;MidB&gt;.Create() =&gt; new MidB();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L55" data-line-number="55"></td>
        <td id="file-fun-with-variance-LC55">    Base IFactory&lt;Base&gt;.Create() =&gt; new Base();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L56" data-line-number="56"></td>
        <td id="file-fun-with-variance-LC56">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L57" data-line-number="57"></td>
        <td id="file-fun-with-variance-LC57">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L58" data-line-number="58"></td>
        <td id="file-fun-with-variance-LC58">// implements factories for two subclasses in the same hierarchy</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L59" data-line-number="59"></td>
        <td id="file-fun-with-variance-LC59">class TwoTierFactory : IFactory&lt;MidA&gt;, IFactory&lt;SuperMidA&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L60" data-line-number="60"></td>
        <td id="file-fun-with-variance-LC60">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L61" data-line-number="61"></td>
        <td id="file-fun-with-variance-LC61">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L62" data-line-number="62"></td>
        <td id="file-fun-with-variance-LC62">    SuperMidA IFactory&lt;SuperMidA&gt;.Create() =&gt; new SuperMidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L63" data-line-number="63"></td>
        <td id="file-fun-with-variance-LC63">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L64" data-line-number="64"></td>
        <td id="file-fun-with-variance-LC64">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L65" data-line-number="65"></td>
        <td id="file-fun-with-variance-LC65">// only difference to TwoTierFactory is interface declaration order</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L66" data-line-number="66"></td>
        <td id="file-fun-with-variance-LC66">class TwoTierFactoryReversed : IFactory&lt;SuperMidA&gt;, IFactory&lt;MidA&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L67" data-line-number="67"></td>
        <td id="file-fun-with-variance-LC67">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L68" data-line-number="68"></td>
        <td id="file-fun-with-variance-LC68">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L69" data-line-number="69"></td>
        <td id="file-fun-with-variance-LC69">    SuperMidA IFactory&lt;SuperMidA&gt;.Create() =&gt; new SuperMidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L70" data-line-number="70"></td>
        <td id="file-fun-with-variance-LC70">}</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L71" data-line-number="71"></td>
        <td id="file-fun-with-variance-LC71">
</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L72" data-line-number="72"></td>
        <td id="file-fun-with-variance-LC72">// like TwoTierFactoryReversed, but also implements the actual type requested</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L73" data-line-number="73"></td>
        <td id="file-fun-with-variance-LC73">class TwoTierFactoryFull : IFactory&lt;SuperMidA&gt;, IFactory&lt;MidA&gt;, IFactory&lt;Base&gt;</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L74" data-line-number="74"></td>
        <td id="file-fun-with-variance-LC74">{</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L75" data-line-number="75"></td>
        <td id="file-fun-with-variance-LC75">    MidA IFactory&lt;MidA&gt;.Create() =&gt; new MidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L76" data-line-number="76"></td>
        <td id="file-fun-with-variance-LC76">    SuperMidA IFactory&lt;SuperMidA&gt;.Create() =&gt; new SuperMidA();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L77" data-line-number="77"></td>
        <td id="file-fun-with-variance-LC77">    Base IFactory&lt;Base&gt;.Create() =&gt; new Base();</td>
      </tr>
      <tr>
        <td id="file-fun-with-variance-L78" data-line-number="78"></td>
        <td id="file-fun-with-variance-LC78">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>