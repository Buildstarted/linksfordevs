<!DOCTYPE html>
<html lang="en">
<head>
    <title>
It&#x27;s like JSON. but fast and small. - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="It&#x27;s like JSON. but fast and small. - linksfor.dev(s)"/>
    <meta property="article:author" content="Salvatore Sanfilippo, creator of Redis"/>
    <meta property="og:description" content="MessagePack is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it&#x27;s faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://msgpack.org/index.html"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - It&#x27;s like JSON. but fast and small.</title>
<div class="readable">
        <h1>It&#x27;s like JSON. but fast and small.</h1>
            <div>by Salvatore Sanfilippo, creator of Redis</div>
            <div>Reading time: 286-364 minutes</div>
        <div>Posted here: 16 Apr 2020</div>
        <p><a href="https://msgpack.org/index.html">https://msgpack.org/index.html</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
    <section id="introduction">
      <div id="description">
        <h2>It's like JSON.<br>but fast and small.</h2>
        <p>MessagePack is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
      </div>

      
    </section>

    
    <section id="usecases">
      <div id="testimonials">
        <div>
          <div>
            <p><a href="https://redis.io/"><img src="https://msgpack.org/images/redis.png" alt="Redis" width="150" height="50"></a></p><p>Redis scripting has support for MessagePack because it is a fast and compact serialization format with a simple to implement specification. I liked it so much that I implemented a MessagePack C extension for Lua just to include it into Redis.</p>
            
          </div>

          <div>
            <p><a href="https://fluentd.org/"><img src="https://msgpack.org/images/fluentd.png" alt="Fluentd" width="245" height="85"></a></p><p>Fluentd uses MessagePack for all internal data representation. It's crazy fast because of zero-copy optimization of msgpack-ruby. Now MessagePack is an essential component of Fluentd to achieve high performance and flexibility at the same time.</p>
            <p>Sadayuki Furuhashi, creator of Fluentd</p>
          </div>
        </div>

        <div>
          <div>
            <p><a href="https://www.treasuredata.com/"><img src="https://msgpack.org/images/treasuredata.png" alt="Treasure Data" width="242" height="52"></a></p><p>Treasure Data built a multi-tenant database optimized for analytical queries using MessagePack. The schemaless database is growing by billions of records every month. We also use MessagePack as a glue between components. Actually we just wanted a fast replacement of JSON, and MessagePack is simply useful.</p>
            <p>Kazuki Ohta, CTO</p>
          </div>

          <div>
            <p><a href="https://www.pinterest.com/pinterest/"><img src="https://msgpack.org/images/pinterest.png" alt="Pinterest" width="197" height="50"></a></p><p>MessagePack has been simply invaluable to us. We use MessagePack + Memcache to cache many of our feeds on Pinterest. These feeds are compressed and very quick to unpack thanks to MessagePack while Memcache gives us fast atomic pushes.</p>
            <p>Marty Weiner, Software Engineer</p>

            <p>Also use MessagePack? <a href="https://github.com/msgpack/website">Waiting for your testimonial!</a></p>
          </div>
        </div>
      </div>

      
    </section>
    

    <section id="usage">
      

      <div id="api">
        <h3>API</h3>
        <h4 id="language"><h4><a href="https://github.com/tkob/mlmsgpack" target="_blank">tkob/mlmsgpack <span>https://github.com/tkob/mlmsgpack</span></a></h4></h4>
        <div id="quickstart">
<div id="readme">
    <article itemprop="text"><h5>
ML-MessagePack</h5>
<p>MessagePack implementation for Standard ML (SML)</p>
<h6>
Features</h6>
<ul>
<li>Portable: Depends only on the required components of the SML Basis Library specification.</li>
<li>Composable: Composable combinators for encoding and decoding.</li>
</ul>
<h6>
Usage</h6>
<h8>
MLton and MLKit</h8>
<p>Include mlmsgpack.mlb in your MLB file.</p>
<h8>
Poly/ML</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8>
SML/NJ</h8>
<p>Use mlmsgpack.cm.</p>
<h8>
Moscow ML</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>large.sml</li>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<p>Makefile.mosml is also provided.</p>
<h8>
HaMLet</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8>
Alice ML</h8>
<p>Makefile.alice is provided.</p>
<pre><code><span>make </span><span>-</span><span>f </span><span>Makefile</span><span>.</span><span>alice
alicerun mlmsgpack</span><span>-</span><span>test</span></code></pre>
<h8>
SML#</h8>
<p>For separate compilation, .smi files are provided. Require mlmsgpack.smi from your .smi file.</p>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h6>
Tutorial</h6>
<p>See TUTORIAL.md.</p>
<h6>
Known Problems</h6>
<p>Our recommendation is MLton, MLKit, Poly/ML and SML#(&gt;=2.0.0) as all tests passed on them.
SML/NJ and Moscow ML are fine if you don't use real values.</p>
<h8>
SML/NJ</h8>
<p>Packing real values fail or produces imprecise results in some cases.</p>
<h8>
Moscow ML</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.</p>
<h8>
HaMLet</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Some functions are very slow, although they work properly. (We tested HaMLet compiled with MLton.)</p>
<h8>
Alice ML</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Also, some unit tests fail.</p>
<h8>
SML#</h8>
<p>Most functions do not work properly because of bugs of SML# prior to version 2.0.0.</p>
<h6>
See Also</h6>
<p>There already exists another MessagePack implemenatation for SML,
called MsgPack-SML, which is targeted for MLton.</p>
<p><a href="https://msgpacksml.codeplex.com/" rel="nofollow">https://msgpacksml.codeplex.com/</a></p>
<p>ML-MessagePack is written from scratch and not a fork of MsgPack-SML.</p>
<p>For information on MessagePack, see:</p>
<p><a href="https://msgpack.org/" rel="nofollow">http://msgpack.org/</a></p>
</article>
  </div>
        </div>
        <p id="quickstart-guide"><a href="https://github.com/msgpack/website/blob/master/README.md#how-to-list-up-your-project-on-msgpackorg">List your implementation here!</a></p>

        
        <div id="qs-msgpack-msgpack-java"><h4><a href="https://github.com/msgpack/msgpack-java" target="_blank">msgpack/msgpack-java <span>https://github.com/msgpack/msgpack-java</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Java</h5>
<p>QuickStart for msgpack-java is available <a href="https://github.com/msgpack/msgpack-java/wiki/QuickStart">here</a>.</p>
<h6>
How to install</h6>
<p>You can install msgpack via maven:</p>
<pre><code><span>&lt;dependencies&gt;</span><span>
  ...
  </span><span>&lt;dependency&gt;</span><span>
    </span><span>&lt;groupId&gt;</span><span>org.msgpack</span><span>&lt;/groupId&gt;</span><span>
    </span><span>&lt;artifactId&gt;</span><span>msgpack</span><span>&lt;/artifactId&gt;</span><span>
    </span><span>&lt;version&gt;</span><span>${msgpack.version}</span><span>&lt;/version&gt;</span><span>
  </span><span>&lt;/dependency&gt;</span><span>
  ...
</span><span>&lt;/dependencies&gt;</span></code></pre>
<h6>
Simple Serialization/Deserialization/Duck Typing using Value</h6>
<pre><code><span>// Create serialize objects.</span><span>
</span><span>List</span><span>&lt;</span><span>String</span><span>&gt;</span><span> src </span><span>=</span><span> </span><span>new</span><span> </span><span>ArrayList</span><span>&lt;</span><span>String</span><span>&gt;();</span><span>
src</span><span>.</span><span>add</span><span>(</span><span>"msgpack"</span><span>);</span><span>
src</span><span>.</span><span>add</span><span>(</span><span>"kumofs"</span><span>);</span><span>
src</span><span>.</span><span>add</span><span>(</span><span>"viver"</span><span>);</span><span>

</span><span>MessagePack</span><span> msgpack </span><span>=</span><span> </span><span>new</span><span> </span><span>MessagePack</span><span>();</span><span>
</span><span>// Serialize</span><span>
</span><span>byte</span><span>[]</span><span> raw </span><span>=</span><span> msgpack</span><span>.</span><span>write</span><span>(</span><span>src</span><span>);</span><span>

</span><span>// Deserialize directly using a template</span><span>
</span><span>List</span><span>&lt;</span><span>String</span><span>&gt;</span><span> dst1 </span><span>=</span><span> msgpack</span><span>.</span><span>read</span><span>(</span><span>raw</span><span>,</span><span> </span><span>Templates</span><span>.</span><span>tList</span><span>(</span><span>Templates</span><span>.</span><span>TString</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst1</span><span>.</span><span>get</span><span>(</span><span>0</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst1</span><span>.</span><span>get</span><span>(</span><span>1</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst1</span><span>.</span><span>get</span><span>(</span><span>2</span><span>));</span><span>

</span><span>// Or, Deserialze to Value then convert type.</span><span>
</span><span>Value</span><span> </span><span>dynamic</span><span> </span><span>=</span><span> msgpack</span><span>.</span><span>read</span><span>(</span><span>raw</span><span>);</span><span>
</span><span>List</span><span>&lt;</span><span>String</span><span>&gt;</span><span> dst2 </span><span>=</span><span> </span><span>new</span><span> </span><span>Converter</span><span>(</span><span>dynamic</span><span>)</span><span>
    </span><span>.</span><span>read</span><span>(</span><span>Templates</span><span>.</span><span>tList</span><span>(</span><span>Templates</span><span>.</span><span>TString</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst2</span><span>.</span><span>get</span><span>(</span><span>0</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst2</span><span>.</span><span>get</span><span>(</span><span>1</span><span>));</span><span>
</span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>dst2</span><span>.</span><span>get</span><span>(</span><span>2</span><span>));</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-d"><h4><a href="https://github.com/msgpack/msgpack-d" target="_blank">msgpack/msgpack-d <span>https://github.com/msgpack/msgpack-d</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><a href="https://travis-ci.org/msgpack/msgpack-d" rel="nofollow"><img src="https://camo.githubusercontent.com/b0b60bcdcaa2322f4c9d394e042ddcb2863dd37b/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d642e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-d.png"></a></p>
<h5>
MessagePack for D</h5>
<p>MessagePack is a binary-based JSON-like serialization library.</p>
<p>MessagePack for D is a pure D implementation of MessagePack.</p>
<h5>
Features</h5>
<ul>
<li>Small size and High performance</li>
<li>Zero copy serialization / deserialization</li>
<li>Streaming deserializer for non-contiguous IO situation</li>
<li>Supports D features (Ranges, Tuples, real type)</li>
</ul>
<p>Note: The <code>real</code> type is only supported in D.
Don't use the <code>real</code> type when communicating with other programming languages.
Note that <code>Unpacker</code> will raise an exception if a loss of precision occurs.</p>
<h6>
Current Limitations</h6>
<ul>
<li>No circular references support</li>
<li>If you want to use the LDC compiler, you need at least version 0.15.2 beta2</li>
</ul>
<h5>
Install</h5>
<p>Use dub to add it as a dependency:</p>

<h5>
Usage</h5>
<p>Example code can be found in the <code>example</code> directory.</p>
<p>The documentation can be found <a href="https://msgpack.github.io/msgpack-d/" rel="nofollow">here</a></p>
<h6>
pack / unpack</h6>
<p>msgpack-d is very simple to use. Use <code>pack</code> for serialization, and <code>unpack</code> for deserialization:</p>
<div><pre><span>import</span> <span>std.file</span>;
<span>import</span> msgpack;

<span>struct</span> <span>S</span> { <span>int</span> x; <span>float</span> y; <span>string</span> z; }

<span>void</span> <span>main</span>()
{
    S input = S(<span>10</span>, <span>25.5</span>, <span><span>"</span>message<span>"</span></span>);

    <span><span>//</span> serialize data</span>
    <span>ubyte</span>[] inData = pack(input);

    <span><span>//</span> write data to a file</span>
    write(<span><span>"</span>file.dat<span>"</span></span>, inData);

    <span><span>//</span> read data from a file</span>
    <span>ubyte</span>[] outData = <span>cast</span>(<span>ubyte</span>[])read(<span><span>"</span>file.dat<span>"</span></span>);

    <span><span>//</span> unserialize the data</span>
    S target = outData.unpack<span>!</span>S();

    <span><span>//</span> verify data is the same</span>
    <span>assert</span>(target.x <span>==</span> input.x);
    <span>assert</span>(target.y <span>==</span> input.y);
    <span>assert</span>(target.z <span>==</span> input.z);
}</pre></div>
<h7>
Feature: Skip serialization/deserialization of a specific field.</h7>
<p>Use the <code>@nonPacked</code> attribute:</p>
<div><pre><span>struct</span> <span>User</span>
{
    <span>string</span> name;
    @nonPacked <span>int</span> level;  <span><span>//</span> pack / unpack will ignore the 'level' field</span>
}</pre></div>
<h7>
Feature: Use your own serialization/deserialization routines for custom class and struct types.</h7>
<p>msgpack-d provides the functions <code>registerPackHandler</code> / <code>registerUnpackHandler</code> to allow you
to use custom routines during the serialization or deserialization of user-defined class and struct types.
This feature is especially useful when serializing a derived class object when that object is statically
typed as a base class object.</p>
<p>For example:</p>
<div><pre><span>class</span> <span>Document</span> { }
<span>class</span> <span>XmlDocument</span> : <span>Document</span>
{
    <span>this</span>() { }
    <span>this</span>(<span>string</span> name) { <span>this</span>.name = name; }
    <span>string</span> name;
}

<span>void</span> <span>xmlPackHandler</span>(<span>ref</span> Packer p, <span>ref</span> XmlDocument xml)
{
    p.pack(xml.name);
}

<span>void</span> <span>xmlUnpackHandler</span>(<span>ref</span> Unpacker u, <span>ref</span> XmlDocument xml)
{
    u.unpack(xml.name);
}

<span>void</span> <span>main</span>()
{
    <span><span>//</span>/ Register the 'xmlPackHandler' and 'xmlUnpackHandler' routines for</span>
    <span><span>//</span>/ XmlDocument object instances.</span>
    registerPackHandler<span>!</span>(XmlDocument, xmlPackHandler);
    registerUnpackHandler<span>!</span>(XmlDocument, xmlUnpackHandler);

    <span><span>//</span>/ Now we can serialize/deserialize XmlDocument object instances via a</span>
    <span><span>//</span>/ base class reference.</span>
    <span>Document</span> doc = <span>new</span> XmlDocument(<span><span>"</span>test.xml<span>"</span></span>);
    <span>auto</span> data = pack(doc);
    XmlDocument xml = unpack<span>!</span>XmlDocument(data);
    <span>assert</span>(xml.name <span>==</span> <span><span>"</span>test.xml<span>"</span></span>);  <span><span>//</span> xml.name is "test.xml"</span>
}</pre></div>
<h6>
The PackerImpl / Unpacker / StreamingUnpacker types</h6>
<p>These types are used by the <code>pack</code> and <code>unpack</code> functions.</p>
<p>See the documentation of <a href="https://msgpack.github.io/msgpack-d/#PackerImpl" rel="nofollow">PackerImpl</a>, <a href="https://msgpack.github.io/msgpack-d/#Unpacker" rel="nofollow">Unpacker</a> and <a href="https://msgpack.github.io/msgpack-d/#StreamingUnpacker" rel="nofollow">StreamingUnpacker</a> for more details.</p>
<h5>
Links</h5>
<ul>
<li>
<p><a href="https://msgpack.org/" rel="nofollow">The MessagePack Project</a></p>
<p>The official MessagePack protocol website.</p>
</li>
<li>
<p><a href="https://github.com/msgpack/msgpack-d/issues">msgpack-d's issue tracker</a></p>
<p>Use this issue tracker to review and file bugs in msgpack-d.</p>
</li>
<li>
<p><a href="https://github.com/msgpack/">MessagePack's Github</a></p>
<p>Other language bindings and implementations of the msgpack protocol can be found here.</p>
</li>
</ul>
<h5>
Copyright</h5>
<pre><code><span>Copyright</span><span> </span><span>(</span><span>c</span><span>)</span><span> </span><span>2010</span><span>-</span><span> </span><span>Masahiro</span><span> </span><span>Nakagawa</span></code></pre>
<h5>
License</h5>
<p>Distributed under the <a href="https://www.boost.org/users/license.html" rel="nofollow">Boost Software License, Version 1.0</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-python"><h4><a href="https://msgpack.org/" target="_blank">msgpack/msgpack-python <span>https://msgpack.org/</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Python</h5>
<a href="https://travis-ci.org/msgpack/msgpack-python" rel="nofollow"><img alt="Build Status" src="https://camo.githubusercontent.com/2f929738ed55128623a4dc2de63caba2a9bff192/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d707974686f6e2e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/msgpack/msgpack-python.svg?branch=master"></a>
<a href="https://msgpack-python.readthedocs.io/en/latest/?badge=latest" rel="nofollow"><img alt="Documentation Status" src="https://camo.githubusercontent.com/b60e58420e792f4843a0ea240669b862ad99effd/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f6d73677061636b2d707974686f6e2f62616467652f3f76657273696f6e3d6c6174657374" data-canonical-src="https://readthedocs.org/projects/msgpack-python/badge/?version=latest"></a>
<a name="user-content-what-s-this"></a>
<h6>
What's this</h6>
<p><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization format.
It lets you exchange data among multiple languages like JSON.
But it's faster and smaller.
This package provides CPython bindings for reading and writing MessagePack data.</p>
<a name="user-content-very-important-notes-for-existing-users"></a>
<h6>
Very important notes for existing users</h6>
<a name="user-content-pypi-package-name"></a>
<h7>
PyPI package name</h7>
<p>TL;DR: When upgrading from msgpack-0.4 or earlier, don't do pip install -U msgpack-python.
Do pip uninstall msgpack-python; pip install msgpack instead.</p>
<p>Package name on PyPI was changed to msgpack from 0.5.
I upload transitional package (msgpack-python 0.5 which depending on msgpack)
for smooth transition from msgpack-python to msgpack.</p>
<p>Sadly, this doesn't work for upgrade install.  After pip install -U msgpack-python,
msgpack is removed and import msgpack fail.</p>
<a name="user-content-deprecating-encoding-option"></a>
<h7>
Deprecating encoding option</h7>
<p>encoding and unicode_errors options are deprecated.</p>
<p>In case of packer, use UTF-8 always.  Storing other than UTF-8 is not recommended.</p>
<p>For backward compatibility, you can use <code>use_bin_type=False</code> and pack <code>bytes</code>
object into msgpack raw type.</p>
<p>In case of unpacker, there is new <code>raw</code> option.  It is <code>True</code> by default
for backward compatibility, but it is changed to <code>False</code> in near future.
You can use <code>raw=False</code> instead of <code>encoding='utf-8'</code>.</p>
<a name="user-content-planned-backward-incompatible-changes"></a>
<h7>
Planned backward incompatible changes</h7>
<p>When msgpack 1.0, I planning these breaking changes:</p>
<ul>
<li>packer and unpacker: Remove <code>encoding</code> and <code>unicode_errors</code> option.</li>
<li>packer: Change default of <code>use_bin_type</code> option from False to True.</li>
<li>unpacker: Change default of <code>raw</code> option from True to False.</li>
<li>unpacker: Reduce all <code>max_xxx_len</code> options for typical usage.</li>
<li>unpacker: Remove <code>write_bytes</code> option from all methods.</li>
</ul>
<p>To avoid these breaking changes breaks your application, please:</p>
<ul>
<li>Don't use deprecated options.</li>
<li>Pass <code>use_bin_type</code> and <code>raw</code> options explicitly.</li>
<li>If your application handle large (&gt;1MB) data, specify <code>max_xxx_len</code> options too.</li>
</ul>
<a name="user-content-install"></a>
<h6>
Install</h6>
<pre>$ pip install msgpack
</pre>
<a name="user-content-pypy"></a>
<h7>
PyPy</h7>
<p>msgpack provides a pure Python implementation.  PyPy can use this.</p>
<a name="user-content-windows"></a>
<h7>
Windows</h7>
<p>When you can't use a binary distribution, you need to install Visual Studio
or Windows SDK on Windows.
Without extension, using pure Python implementation on CPython runs slowly.</p>
<p>For Python 2.7, <a href="https://www.microsoft.com/en-us/download/details.aspx?id=44266" rel="nofollow">Microsoft Visual C++ Compiler for Python 2.7</a>
is recommended solution.</p>
<p>For Python 3.5, <a href="https://www.visualstudio.com/en-us/products/vs-2015-product-editions.aspx" rel="nofollow">Microsoft Visual Studio 2015</a>
Community Edition or Express Edition can be used to build extension module.</p>
<a name="user-content-how-to-use"></a>
<h6>
How to use</h6>
<a name="user-content-one-shot-pack-unpack"></a>
<h7>
One-shot pack &amp; unpack</h7>
<p>Use <code>packb</code> for packing and <code>unpackb</code> for unpacking.
msgpack provides <code>dumps</code> and <code>loads</code> as an alias for compatibility with
<code>json</code> and <code>pickle</code>.</p>
<p><code>pack</code> and <code>dump</code> packs to a file-like object.
<code>unpack</code> and <code>load</code> unpacks from a file-like object.</p>
<div><pre>&gt;&gt;&gt; <span>import</span> msgpack
&gt;&gt;&gt; msgpack.packb([<span>1</span>, <span>2</span>, <span>3</span>], <span>use_bin_type</span><span>=</span><span>True</span>)
'\x93\x01\x02\x03'
&gt;&gt;&gt; msgpack.unpackb(_, <span>raw</span><span>=</span><span>False</span>)
[1, 2, 3]</pre></div>
<p><code>unpack</code> unpacks msgpack's array to Python's list, but can also unpack to tuple:</p>
<div><pre>&gt;&gt;&gt; msgpack.unpackb(<span><span>b</span><span>'</span><span>\x93\x01\x02\x03</span><span>'</span></span>, <span>use_list</span><span>=</span><span>False</span>, <span>raw</span><span>=</span><span>False</span>)
(1, 2, 3)</pre></div>
<p>You should always specify the <code>use_list</code> keyword argument for backward compatibility.
See performance issues relating to <a href="#use-list-option">use_list option</a> below.</p>
<p>Read the docstring for other options.</p>
<a name="user-content-streaming-unpacking"></a>
<h7>
Streaming unpacking</h7>
<p><code>Unpacker</code> is a "streaming unpacker". It unpacks multiple objects from one
stream (or from bytes provided through its <code>feed</code> method).</p>
<div><pre><span>import</span> msgpack
<span>from</span> io <span>import</span> BytesIO

buf <span>=</span> BytesIO()
<span>for</span> i <span>in</span> <span>range</span>(<span>100</span>):
   buf.write(msgpack.packb(i, <span>use_bin_type</span><span>=</span><span>True</span>))

buf.seek(<span>0</span>)

unpacker <span>=</span> msgpack.Unpacker(buf, <span>raw</span><span>=</span><span>False</span>)
<span>for</span> unpacked <span>in</span> unpacker:
    <span>print</span>(unpacked)</pre></div>
<a name="user-content-packing-unpacking-of-custom-data-type"></a>
<h7>
Packing/unpacking of custom data type</h7>
<p>It is also possible to pack/unpack custom data types. Here is an example for
<code>datetime.datetime</code>.</p>
<div><pre><span>import</span> datetime
<span>import</span> msgpack

useful_dict <span>=</span> {
    <span><span>"</span>id<span>"</span></span>: <span>1</span>,
    <span><span>"</span>created<span>"</span></span>: datetime.datetime.now(),
}

<span>def</span> <span>decode_datetime</span>(<span>obj</span>):
    <span>if</span> <span><span>b</span><span>'</span>__datetime__<span>'</span></span> <span>in</span> obj:
        obj <span>=</span> datetime.datetime.strptime(obj[<span><span>"</span>as_str<span>"</span></span>], <span><span>"</span>%Y%m<span>%d</span>T%H:%M:%S.<span>%f</span><span>"</span></span>)
    <span>return</span> obj

<span>def</span> <span>encode_datetime</span>(<span>obj</span>):
    <span>if</span> <span>isinstance</span>(obj, datetime.datetime):
        <span>return</span> {<span><span>'</span>__datetime__<span>'</span></span>: <span>True</span>, <span><span>'</span>as_str<span>'</span></span>: obj.strftime(<span><span>"</span>%Y%m<span>%d</span>T%H:%M:%S.<span>%f</span><span>"</span></span>)}
    <span>return</span> obj


packed_dict <span>=</span> msgpack.packb(useful_dict, <span>default</span><span>=</span>encode_datetime, <span>use_bin_type</span><span>=</span><span>True</span>)
this_dict_again <span>=</span> msgpack.unpackb(packed_dict, <span>object_hook</span><span>=</span>decode_datetime, <span>raw</span><span>=</span><span>False</span>)</pre></div>
<p><code>Unpacker</code>'s <code>object_hook</code> callback receives a dict; the
<code>object_pairs_hook</code> callback may instead be used to receive a list of
key-value pairs.</p>
<a name="user-content-extended-types"></a>
<h7>
Extended types</h7>
<p>It is also possible to pack/unpack custom data types using the <strong>ext</strong> type.</p>
<div><pre>&gt;&gt;&gt; <span>import</span> msgpack
&gt;&gt;&gt; <span>import</span> array
&gt;&gt;&gt; <span>def</span> <span>default</span>(<span>obj</span>):
...     <span>if</span> <span>isinstance</span>(obj, array.array) <span>and</span> obj.typecode <span>==</span> <span><span>'</span>d<span>'</span></span>:
...         <span>return</span> msgpack.ExtType(<span>42</span>, obj.tostring())
...     <span>raise</span> <span>TypeError</span>(<span><span>"</span>Unknown type: <span>%r</span><span>"</span></span> <span>%</span> (obj,))
...
&gt;&gt;&gt; <span>def</span> <span>ext_hook</span>(<span>code</span>, <span>data</span>):
...     <span>if</span> code <span>==</span> <span>42</span>:
...         a <span>=</span> array.array(<span><span>'</span>d<span>'</span></span>)
...         a.fromstring(data)
...         <span>return</span> a
...     <span>return</span> ExtType(code, data)
...
&gt;&gt;&gt; data <span>=</span> array.array(<span><span>'</span>d<span>'</span></span>, [<span>1.2</span>, <span>3.4</span>])
&gt;&gt;&gt; packed <span>=</span> msgpack.packb(data, <span>default</span><span>=</span>default, <span>use_bin_type</span><span>=</span><span>True</span>)
&gt;&gt;&gt; unpacked <span>=</span> msgpack.unpackb(packed, <span>ext_hook</span><span>=</span>ext_hook, <span>raw</span><span>=</span><span>False</span>)
&gt;&gt;&gt; data <span>==</span> unpacked
True</pre></div>
<a name="user-content-advanced-unpacking-control"></a>
<h7>
Advanced unpacking control</h7>
<p>As an alternative to iteration, <code>Unpacker</code> objects provide <code>unpack</code>,
<code>skip</code>, <code>read_array_header</code> and <code>read_map_header</code> methods. The former two
read an entire message from the stream, respectively de-serialising and returning
the result, or ignoring it. The latter two methods return the number of elements
in the upcoming container, so that each element in an array, or key-value pair
in a map, can be unpacked or skipped individually.</p>
<p>Each of these methods may optionally write the packed data it reads to a
callback function:</p>
<div><pre><span>from</span> io <span>import</span> BytesIO

<span>def</span> <span>distribute</span>(<span>unpacker</span>, <span>get_worker</span>):
    nelems <span>=</span> unpacker.read_map_header()
    <span>for</span> i <span>in</span> <span>range</span>(nelems):
        <span><span>#</span> Select a worker for the given key</span>
        key <span>=</span> unpacker.unpack()
        worker <span>=</span> get_worker(key)

        <span><span>#</span> Send the value as a packed message to worker</span>
        bytestream <span>=</span> BytesIO()
        unpacker.skip(bytestream.write)
        worker.send(bytestream.getvalue())</pre></div>
<a name="user-content-notes"></a>
<h6>
Notes</h6>
<a name="user-content-string-and-binary-type"></a>
<h7>
string and binary type</h7>
<p>Early versions of msgpack didn't distinguish string and binary types (like Python 1).
The type for representing both string and binary types was named <strong>raw</strong>.</p>
<p>For backward compatibility reasons, msgpack-python will still default all
strings to byte strings, unless you specify the <code>use_bin_type=True</code> option in
the packer. If you do so, it will use a non-standard type called <strong>bin</strong> to
serialize byte arrays, and <strong>raw</strong> becomes to mean <strong>str</strong>. If you want to
distinguish <strong>bin</strong> and <strong>raw</strong> in the unpacker, specify <code>raw=False</code>.</p>
<p>Note that Python 2 defaults to byte-arrays over Unicode strings:</p>
<div><pre>&gt;&gt;&gt; <span>import</span> msgpack
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span><span>b</span><span>'</span>spam<span>'</span></span>, <span><span>u</span><span>'</span>eggs<span>'</span></span>]))
['spam', 'eggs']
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span><span>b</span><span>'</span>spam<span>'</span></span>, <span><span>u</span><span>'</span>eggs<span>'</span></span>], <span>use_bin_type</span><span>=</span><span>True</span>),
                    raw=False)
['spam', u'eggs']</pre></div>
<p>This is the same code in Python 3 (same behaviour, but Python 3 has a
different default):</p>
<div><pre>&gt;&gt;&gt; <span>import</span> msgpack
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span><span>b</span><span>'</span>spam<span>'</span></span>, <span><span>u</span><span>'</span>eggs<span>'</span></span>]))
[b'spam', b'eggs']
&gt;&gt;&gt; msgpack.unpackb(msgpack.packb([<span><span>b</span><span>'</span>spam<span>'</span></span>, <span><span>u</span><span>'</span>eggs<span>'</span></span>], <span>use_bin_type</span><span>=</span><span>True</span>),
                    raw=False)
[b'spam', 'eggs']</pre></div>
<a name="user-content-ext-type"></a>
<h7>
ext type</h7>
<p>To use the <strong>ext</strong> type, pass <code>msgpack.ExtType</code> object to packer.</p>
<div><pre>&gt;&gt;&gt; <span>import</span> msgpack
&gt;&gt;&gt; packed <span>=</span> msgpack.packb(msgpack.ExtType(<span>42</span>, <span><span>b</span><span>'</span>xyzzy<span>'</span></span>))
&gt;&gt;&gt; msgpack.unpackb(packed)
ExtType(code=42, data='xyzzy')</pre></div>
<p>You can use it with <code>default</code> and <code>ext_hook</code>. See below.</p>
<a name="user-content-note-about-performance"></a>
<h6>
Note about performance</h6>
<a name="user-content-gc"></a>
<h7>
GC</h7>
<p>CPython's GC starts when growing allocated object.
This means unpacking may cause useless GC.
You can use <code>gc.disable()</code> when unpacking large message.</p>
<a name="user-content-use-list-option"></a>
<h7>
use_list option</h7>
<p>List is the default sequence type of Python.
But tuple is lighter than list.
You can use <code>use_list=False</code> while unpacking when performance is important.</p>
<p>Python's dict can't use list as key and MessagePack allows array for key of mapping.
<code>use_list=False</code> allows unpacking such message.
Another way to unpacking such object is using <code>object_pairs_hook</code>.</p>
<a name="user-content-development"></a>
<h6>
Development</h6>
<a name="user-content-test"></a>
<h7>
Test</h7>
<p>MessagePack uses pytest for testing.
Run test with following command:</p>
<blockquote>
$ make test</blockquote>

</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-erlang"><h4><a href="https://github.com/msgpack/msgpack-erlang" target="_blank">msgpack/msgpack-erlang <span>https://github.com/msgpack/msgpack-erlang</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack Erlang</h5>
<p><a href="https://travis-ci.org/msgpack/msgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/9358d19573c928c5d79db88cd634c79abd46ff2c/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d65726c616e672e706e67" alt="Travis" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-erlang.png"></a>
<a href="https://drone.io/github.com/msgpack/msgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/439f5da74417a319e6daddaaa3455f9e9f03bced/68747470733a2f2f64726f6e652e696f2f6769746875622e636f6d2f6d73677061636b2f6d73677061636b2d65726c616e672f7374617475732e706e67" alt="Drone.io" data-canonical-src="https://drone.io/github.com/msgpack/msgpack-erlang/status.png"></a>
<a href="https://hex.pm/packages/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/b137aaf840206a156187b4a3ac441e35e1198c63/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f762f6d73677061636b2e737667" alt="hex.pm version" data-canonical-src="https://img.shields.io/hexpm/v/msgpack.svg"></a></p>
<h6>
Prerequisites for runtime</h6>
<p><a href="http://erlang.org/" rel="nofollow">Erlang/OTP</a>, &gt;= 17.0 Also based on
<a href="https://github.com/msgpack/msgpack/blob/0b8f5ac67cdd130f4d4d4fe6afb839b989fdb86a/spec.md">the new msgpack spec 0b8f5a</a>.</p>
<h6>
edit rebar.config to use in your application</h6>
<div><pre>{<span>deps</span>, [
  {<span>msgpack</span>, <span><span>"</span>.*<span>"</span></span>,
    {<span>git</span>, <span><span>"</span>git://github.com/msgpack/msgpack-erlang.git<span>"</span></span>, {<span>branch</span>, <span><span>"</span>master<span>"</span></span>}}}
]}.</pre></div>
<p>Or as it is <a href="https://hex.pm/packages/msgpack" rel="nofollow">now published at hex.pm</a>, just</p>

<p>might work.</p>
<h6>
Simple deserialization</h6>
<div><pre><span>Ham</span> <span>=</span> <span>msgpack</span>:<span>pack</span>(<span>Spam</span>),
{<span>ok</span>, <span>Spam</span>} <span>=</span> <span>msgpack</span>:<span>unpack</span>(<span>Ham</span>).</pre></div>
<h6>
Stream deserialization</h6>
<div><pre>{<span>Term0</span>, <span>Rest0</span>} <span>=</span> <span>msgpack</span>:<span>unpack_stream</span>(<span>Binary</span>),
{<span>Term1</span>, <span>Rest1</span>} <span>=</span> <span>msgpack</span>:<span>unpack_stream</span>(<span>Rest0</span>),
...</pre></div>
<h6>
Options, for packing and unpacking</h6>
<h7>
<code>{spec, new|old}</code>
</h7>
<p>Both for packing and unpacking. Default is <code>new</code>. Major difference
between old and new spec is:</p>
<ul>
<li>raw family (<code>0xa0~0xbf</code>, <code>0xda</code>, <code>0xdb</code>) becomes new str family</li>
<li>
<code>0xd9</code> is new as str8</li>
<li>new bin space (<code>0xc4, 0xc5, 0xc6</code> as bin8, bin16, bin32)</li>
<li>new ext space (<code>0xc7, 0xc8, 0xc9</code> as ext8, ext16, ext32)</li>
<li>new fixext space (<code>0xd4, 0xd5, 0xd6, 0xd7, 0xd8</code> as fixext1, fixext2, fixext4, fixext8, fixext16),</li>
</ul>
<p>The default is new spec. Old spec mode does not handle these new types but
returns error. To use
<a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">old spec</a>
mode, this option is explicitly added.</p>
<div><pre><span>OldHam</span> <span>=</span> <span>msgpack</span>:<span>pack</span>(<span>Spam</span>, [{<span>spec</span>, <span>old</span>}]),
{<span>ok</span>, <span>Spam</span>} <span>=</span> <span>msgpack</span>:<span>unpack</span>(<span>OldHam</span>, [{<span>spec</span>, <span>old</span>}]).</pre></div>
<h7>
<code>{allow_atom, none|pack}</code>
</h7>
<p>Only in packing. Atoms are packed as binaries. Default value is <code>pack</code>.
Otherwise, any term including atoms throws badarg.</p>
<h7>
<code>{known_atoms, [atom()]}</code>
</h7>
<p>Both in packing and unpacking. In packing, if an atom is in this list
a binary is encoded as a binary. In unpacking, msgpacked binaries are
decoded as atoms with <code>erlang:binary_to_existing_atom/2</code> with encoding
<code>utf8</code>. Default value is an empty list.</p>
<p>Even if <code>allow_atom</code> is <code>none</code>, known atoms are packed.</p>
<h7>
<code>{unpack_str, as_binary|as_list}</code>
</h7>
<p>A switch to choose decoded term style of <code>str</code> type when <em>unpacking</em>.
Only available at new spec. Default is <code>as_list</code>.</p>
<pre><code><span>mode        as_binary    as_list
</span><span>-----------+------------+-------</span><span>
bin         binary</span><span>()</span><span>     binary</span><span>()</span><span>
str         binary</span><span>()</span><span>     </span><span>string</span><span>()</span></code></pre>
<h7>
<code>{validate_string, boolean()}</code>
</h7>
<p>Only in unpacking, UTF-8 validation at unpacking from <code>str</code> type will
be enabled. Default value is <code>false</code>.</p>
<h7>
<code>{pack_str, from_binary|from_list|none}</code>
</h7>
<p>A switch to choose packing of <code>string()</code> when packing. Only available
at new spec. Default is <code>from_list</code> for symmetry with <code>unpack_str</code>
option.</p>
<pre><code><span>mode        from_list    from_binary    none
</span><span>-----------+------------+--------------+-----------------</span><span>
binary</span><span>()</span><span>    bin          str</span><span>*/</span><span>bin       bin
</span><span>string</span><span>()</span><span>    str</span><span>*/</span><span>array   array of </span><span>int</span><span>   array of </span><span>int</span><span>
list</span><span>()</span><span>      array        array          array</span></code></pre>
<p>But the default option pays the cost of performance for symmetry. If
the overhead of UTF-8 validation is unacceptable, choosing <code>none</code> as
the option would be the best.</p>
<ul>
<li>* Tries to pack as <code>str</code> if it is a valid <code>string()</code>.</li>
</ul>
<h7>
<code>{map_format, map|jiffy|jsx}</code>
</h7>
<p>Both at packing and unpacking. Default value is <code>map</code>.</p>
<div><pre><span>msgpack</span>:<span>pack</span>(#{ &lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt; <span>=&gt;</span> &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt; }, []).
<span>msgpack</span>:<span>pack</span>(#{ &lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt; <span>=&gt;</span> &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt; }, [{<span>map_format</span>, <span>map</span>}]).
<span>msgpack</span>:<span>pack</span>({[{&lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt;, &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt;}]}, [{<span>map_format</span>, <span>jiffy</span>}]),
<span>msgpack</span>:<span>pack</span>([{&lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt;, &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt;}], [{<span>map_format</span>, <span>jsx</span>}]).</pre></div>
<h7>
<code>{ext, {msgpack_ext_packer(), msgpack_ext_unpacker()}|module()}</code>
</h7>
<p>At both. The default behaviour in case of facing ext data at decoding
is to ignore them as its length is known.</p>
<p>Now msgpack-erlang supports ext type. Now you can serialize everything
with your original (de)serializer. That will enable us to handle
erlang- native types like <code>pid()</code>, <code>ref()</code> contained in <code>tuple()</code>. See
<code>test/msgpack_ext_example_tests.erl</code> for example code.</p>
<div><pre><span>Packer</span> <span>=</span> <span>fun</span>({<span>ref</span>, <span>Ref</span>}, <span>Opt</span>) <span>when</span> <span>is_reference</span>(<span>Ref</span>) -&gt; {<span>ok</span>, {<span>12</span>, <span>term_to_binary</span>(<span>Ref</span>)}} <span>end</span>,
<span>Unpacker</span> <span>=</span> <span>fun</span>(<span>12</span>, <span>Bin</span>) -&gt; {<span>ok</span>, {<span>ref</span>, <span>binary_to_term</span>(<span>Bin</span>)}} <span>end</span>,
<span>Ref</span> <span>=</span> <span>make_ref</span>(),
<span>Opt</span> <span>=</span> [{<span>ext</span>,{<span>Packer</span>,<span>Unpacker</span>}}],
{<span>ok</span>, {<span>ref</span>, <span>Ref</span>}} <span>=</span> <span>msgpack</span>:<span>unpack</span>(<span>msgpack</span>:<span>pack</span>({<span>ref</span>, <span>Ref</span>}, <span>Opt</span>), <span>Opt</span>).</pre></div>
<h6>
Misc</h6>
<h7>
Float type</h7>
<p>The Float type of Message Pack represents IEEE 754 floating point number, so it includes Nan and Infinity.
In unpacking, msgpack-erlang returns <code>nan</code>, <code>positive_infinity</code> and <code>negative_infinity</code>.</p>
<h6>
License</h6>
<p>Apache License 2.0</p>
<h5>
Release Notes</h5>
<h6>
0.7.0</h6>
<ul>
<li>Support <code>nan</code>, <code>positive_infinity</code> and <code>negative_infinity</code>
</li>
</ul>
<h6>
0.6.0</h6>
<ul>
<li>Support OTP 19.0</li>
</ul>
<h6>
0.5.0</h6>
<ul>
<li>Renewed optional arguments to pack/unpack interface. This is
incompatible change from 0.4 series.</li>
</ul>
<h6>
0.4.0</h6>
<ul>
<li>Deprecate <code>nil</code>
</li>
<li>Moved to rebar3</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 17</li>
<li>Added QuickCheck tests</li>
<li>Since this version OTP older than R16B03-1 are no more supported</li>
</ul>
<h6>
0.3.5 / 0.3.4</h6>
<ul>
<li>0.3 series will be the last versions that supports R16B or older
versions of OTP.</li>
<li>OTP 18.0 support</li>
<li>Promote default map unpacker as default format when OTP is &gt;= 18</li>
</ul>
<h6>
0.3.3</h6>
<ul>
<li>Add OTP 17 series to Travis-CI tests</li>
<li>Fix wrong numbering for ext types</li>
<li>Allow packing maps even when {format,map} is not set</li>
<li>Fix Dialyzer invalid contract warning</li>
<li>Proper use of null for jiffy-style encoding/decoding</li>
</ul>
<h6>
0.3.2</h6>
<ul>
<li>set back default style as jiffy</li>
<li>fix bugs around nil/null handling</li>
</ul>
<h6>
0.3.0</h6>
<ul>
<li>supports map new in 17.0</li>
<li>jiffy-style maps will be deprecated in near future</li>
<li>set default style as map</li>
</ul>
<h6>
0.2.8</h6>
<p>0.2 series works with OTP 17.0, R16, R15, and with MessagePack's new
and old format. But does not support <code>map</code> type introduced in
OTP 17.0.</p>
<p>It also supports JSX-compatible mode.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ruby"><h4><a href="https://github.com/msgpack/msgpack-ruby" target="_blank">msgpack/msgpack-ruby <span>https://github.com/msgpack/msgpack-ruby</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Ruby</h5>
<pre><code><span>require</span><span> </span><span>'msgpack'</span><span>
msg </span><span>=</span><span> </span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>].</span><span>to_msgpack  </span><span>#=&gt; "\x93\x01\x02\x03"</span><span>
</span><span>MessagePack</span><span>.</span><span>unpack</span><span>(</span><span>msg</span><span>)</span><span>   </span><span>#=&gt; [1,2,3]</span></code></pre>
<h6>
Install</h6>
<pre><code><span>gem install msgpack</span></code></pre>
<h6>
Use cases</h6>
<ul>
<li>Create REST API returing MessagePack using Rails + <a href="https://github.com/nesquena/rabl">RABL</a>
</li>
<li>Store objects efficiently in memcached or Redis</li>
<li>Upload data in efficient format from mobile devices. See also MessagePack for <a href="https://github.com/msgpack/msgpack-objectivec">Objective-C</a> and <a href="https://github.com/msgpack/msgpack-java">Java</a>
</li>
</ul>
<h6>
Links</h6>
<ul>
<li><a href="https://github.com/msgpack/msgpack-ruby">Github</a></li>
<li><a href="http://ruby.msgpack.org/" rel="nofollow">API document</a></li>
</ul>
<h6>
Streaming API</h6>
<pre><code><span># serialize a 2-element array [e1, e2]</span><span>
pk </span><span>=</span><span> </span><span>MessagePack</span><span>::</span><span>Packer</span><span>.</span><span>new</span><span>(</span><span>io</span><span>)</span><span>
pk</span><span>.</span><span>write_array_header</span><span>(</span><span>2</span><span>).</span><span>write</span><span>(</span><span>e1</span><span>).</span><span>write</span><span>(</span><span>e2</span><span>).</span><span>flush</span></code></pre>
<pre><code><span># deserialize objects from an IO</span><span>
u </span><span>=</span><span> </span><span>MessagePack</span><span>::</span><span>Unpacker</span><span>.</span><span>new</span><span>(</span><span>io</span><span>)</span><span>
u</span><span>.</span><span>each </span><span>{</span><span> </span><span>|</span><span>obj</span><span>|</span><span> </span><span>...</span><span> </span><span>}</span></code></pre>
<pre><code><span># event-driven deserialization</span><span>
</span><span>def</span><span> on_read</span><span>(</span><span>data</span><span>)</span><span>
  </span><span>@u</span><span> </span><span>||=</span><span> </span><span>MessagePack</span><span>::</span><span>Unpacker</span><span>.</span><span>new</span><span>
  </span><span>@u</span><span>.</span><span>feed_each</span><span>(</span><span>data</span><span>)</span><span> </span><span>{</span><span> </span><span>|</span><span>obj</span><span>|</span><span> </span><span>...</span><span> </span><span>}</span><span>
</span><span>end</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-scala"><h4><a href="https://github.com/msgpack/msgpack-scala" target="_blank">msgpack/msgpack-scala <span>https://github.com/msgpack/msgpack-scala</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Scala</h5>
<p><a href="https://travis-ci.org/msgpack/msgpack-scala" rel="nofollow"><img src="https://camo.githubusercontent.com/e0d1591ccd9b26e78281681c4d0272ceba6abb93/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-scala.svg?branch=master"></a></p>
<ul>
<li>Message Pack specification: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6>
Quick Start</h6>
<p><a href="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-scala_2.12/" rel="nofollow"><img src="https://camo.githubusercontent.com/08e46ae8a383e8f05a7b0db809ea7dd49ab51f1d/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6d73677061636b2f6d73677061636b2d7363616c615f322e31322f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.msgpack/msgpack-scala_2.12/badge.svg"></a></p>
<pre><code><span>libraryDependencies </span><span>+=</span><span> </span><span>"org.msgpack"</span><span> </span><span>%%</span><span> </span><span>"msgpack-scala"</span><span> </span><span>%</span><span> </span><span>"(version)"</span></code></pre>
<p>General usage is the same with msgpack-java. See this <a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-core/src/test/java/org/msgpack/core/example/MessagePackExample.java">example code (Java)</a>.</p>
<h6>
For MessagePack Developers</h6>
<h7>
Basic sbt commands</h7>
<p>Enter the sbt console:</p>
<pre><code><span>$ </span><span>./</span><span>sbt</span></code></pre>
<p>Here is a list of sbt commands for daily development:</p>
<pre><code><span>&gt;</span><span> </span><span>~</span><span>compile                                 </span><span># Compile source codes</span><span>
</span><span>&gt;</span><span> </span><span>~</span><span>test</span><span>:</span><span>compile                            </span><span># Compile both source and test codes</span><span>
</span><span>&gt;</span><span> </span><span>~</span><span>test                                    </span><span># Run tests upon source code change</span><span>
</span><span>&gt;</span><span> </span><span>~</span><span>test</span><span>-</span><span>only </span><span>*</span><span>MessagePackTest</span><span>              </span><span># Run tests in the specified class</span><span>
</span><span>&gt;</span><span> </span><span>~</span><span>test</span><span>-</span><span>only </span><span>*</span><span>MessagePackTest</span><span> </span><span>--</span><span> </span><span>-</span><span>n prim   </span><span># Run the test tagged as "prim"</span><span>
</span><span>&gt;</span><span> project msgpack</span><span>-</span><span>scala                    </span><span># Focus on a specific project</span><span>
</span><span>&gt;</span><span> </span><span>package</span><span>                                  </span><span># Create a jar file in the target folder of each project</span><span>
</span><span>&gt;</span><span> scalafmt                                 </span><span># Reformat source codes</span><span>
</span><span>&gt;</span><span> </span><span>;</span><span> coverage</span><span>;</span><span> test</span><span>;</span><span> coverageReport</span><span>;</span><span> coverageAggregate</span><span>;</span><span>  </span><span># Code coverage</span></code></pre>
<h7>
Publishing</h7>
<pre><code><span>&gt;</span><span> publishLocal            </span><span># Install to local .ivy2 repository</span><span>
</span><span>&gt;</span><span> publish                 </span><span># Publishing a snapshot version to the Sonatype repository</span><span>

</span><span>&gt;</span><span> release                 </span><span># Run the release procedure (set a new version, run tests, upload artifacts, then deploy to Sonatype)</span></code></pre>
<p>For publishing to Maven central, msgpack-scala uses <a href="https://github.com/xerial/sbt-sonatype">sbt-sonatype</a> plugin. Set Sonatype account information (user name and password) in the global sbt settings. To protect your password, never include this file in your project.</p>
<p><em><strong>$HOME/.sbt/(sbt-version)/sonatype.sbt</strong></em></p>
<pre><code><span>credentials </span><span>+=</span><span> </span><span>Credentials</span><span>(</span><span>"Sonatype Nexus Repository Manager"</span><span>,</span><span>
        </span><span>"oss.sonatype.org"</span><span>,</span><span>
        </span><span>"(Sonatype user name)"</span><span>,</span><span>
        </span><span>"(Sonatype password)"</span><span>)</span></code></pre>
</article>
  </div>
        </div>
        
        
        
        
        
        <div id="qs-aaulia-msgpack-haxe"><h4><a href="https://github.com/aaulia/msgpack-haxe" target="_blank">aaulia/msgpack-haxe <span>https://github.com/aaulia/msgpack-haxe</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><a href="https://msgpack.org/aaulia/msgpack-haxe/blob/master/license.txt"><img src="https://camo.githubusercontent.com/d0e25b09a82bc4bfde9f1e048a092752eebbb4f3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e7376673f7374796c653d666c6174" alt="MIT License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat"></a> <a href="http://lib.haxe.org/p/msgpack-haxe" rel="nofollow"><img src="https://camo.githubusercontent.com/04bda7820d398e2be12848541ef70c8dc83556ed/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6161756c69612f6d73677061636b2d686178652e7376673f7374796c653d666c6174266c6162656c3d686178656c6962" alt="Haxelib Version" data-canonical-src="https://img.shields.io/github/release/aaulia/msgpack-haxe.svg?style=flat&amp;label=haxelib"></a></p>
<h5>
msgpack-haxe</h5>
<p>MessagePack (<a href="https://msgpack.org/" rel="nofollow">http://msgpack.org</a>) serialization library for Haxe</p>
<h6>
How to install:</h6>
<p>Simply use <code>haxelib git</code> to use this github repo or <code>haxelib install msgpack-haxe</code> to use the one in the haxelib repository.</p>
<h6>
Supported Type:</h6>
<ul>
<li>Null</li>
<li>Bool</li>
<li>Int</li>
<li>Float</li>
<li>Object</li>
<li>Bytes</li>
<li>String</li>
<li>Array</li>
<li>IntMap/StringMap</li>
</ul>
<h6>
Example code:</h6>
<div><pre><span>package</span>;
<span>import</span> <span>org</span>.<span>msgpack</span>.<span>MsgPack</span>;

<span>class</span> <span>Example</span> {
    <span>public</span> <span>static</span> <span>function</span> <span>main</span>() {
        <span>var</span> <span>i</span> <span>=</span> { <span>a</span>: <span>1</span>, <span>b</span>: <span>2</span>, <span>c</span>: <span><span>"</span>Hello World!<span>"</span></span> };
        <span>var</span> <span>m</span> <span>=</span> <span>MsgPack</span>.<span>encode</span>(<span>i</span>);
        <span>var</span> <span>o</span> <span>=</span> <span>MsgPack</span>.<span>decode</span>(<span>m</span>);

        <span>trace</span>(<span>i</span>);
        <span>trace</span>(<span>m</span>.<span>toHex</span>());
        <span>trace</span>(<span>o</span>);
    }
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-cli"><h4><a href="https://github.com/msgpack/msgpack-cli" target="_blank">msgpack/msgpack-cli <span>https://github.com/msgpack/msgpack-cli</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for CLI</h5>
<p><a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-x2p85" rel="nofollow"><img src="https://camo.githubusercontent.com/912ddc65123a84980714397c3735edae4c294e0f/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f356c6e3775376566776a65706a366f383f7376673d74727565" alt="Build status release" data-canonical-src="https://ci.appveyor.com/api/projects/status/5ln7u7efwjepj6o8?svg=true"></a>
<a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli" rel="nofollow"><img src="https://camo.githubusercontent.com/8ba3e1f2fca1e0b0a1cb26e88db4d337278a619a/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f646c6330763472726f6c776a307432743f7376673d74727565" alt="Build status debug" data-canonical-src="https://ci.appveyor.com/api/projects/status/dlc0v4rrolwj0t2t?svg=true"></a>
<a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-3jme9" rel="nofollow"><img src="https://camo.githubusercontent.com/ca5c771e646653155c2c6d0b3c2ce32e76da58ec/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f636a703870686c6e62776a37676b6a393f7376673d74727565" alt="Build status debug net35" data-canonical-src="https://ci.appveyor.com/api/projects/status/cjp8phlnbwj7gkj9?svg=true"></a>
<a href="https://ci.appveyor.com/project/yfakariya/msgpack-cli-rhnh0" rel="nofollow"><img src="https://camo.githubusercontent.com/346580715957870dec3d514e4862565305f5b8c4/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f316d773738776b787835306a766162313f7376673d74727565" alt="Build status debug net35 CodeDOM" data-canonical-src="https://ci.appveyor.com/api/projects/status/1mw78wkxx50jvab1?svg=true"></a></p>
<h6>
What is it?</h6>
<p>This is MessagePack serialization/deserialization for CLI (Common Language Infrastructure) implementations such as .NET Framework, Silverlight, Mono (including Moonlight.)
This library can be used from ALL CLS compliant languages such as C#, F#, Visual Basic, Iron Python, Iron Ruby, PowerShell, C++/CLI or so.</p>
<h6>
Usage</h6>
<p>You can serialize/deserialize objects as following:</p>
<ol>
<li>Create serializer via <code>MessagePackSerializer.Get</code> generic method. This method creates dependent types serializers as well.</li>
<li>Invoke serializer as following:
** <code>Pack</code> method with destination <code>Stream</code> and target object for serialization.
** <code>Unpack</code> method with source <code>Stream</code>.</li>
</ol>
<div><pre><span><span>//</span> Creates serializer.</span>
<span>var</span> <span>serializer</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Get</span>&lt;<span>T</span>&gt;();
<span><span>//</span> Pack obj to stream.</span>
<span>serializer</span>.<span>Pack</span>(<span>stream</span>, <span>obj</span>);
<span><span>//</span> Unpack from stream.</span>
<span>var</span> <span>unpackedObject</span> <span>=</span> <span>serializer</span>.<span>Unpack</span>(<span>stream</span>);</pre></div>
<div><pre><span>' Creates serializer.</span>
<span>Dim</span> <span>serializer</span> <span>=</span> <span>MessagePackSerializer.Get(</span><span>Of</span> <span>T)()</span>
<span>' Pack obj to stream.</span>
<span>serializer.Pack(stream,</span> <span>obj)</span>
<span>' Unpack from stream.</span>
<span>Dim</span> <span>unpackedObject</span> <span>=</span> <span>serializer.Unpack(stream)</span></pre></div>
<p><strong>For production environment, you should instantiate own <code>SerializationCOntext</code> and manage its lifetime. It is good idea to treat it as singleton because <code>SerializationContext</code> is thread-safe.</strong></p>
<h6>
Features</h6>
<ul>
<li>Fast and interoperable binary format serialization with simple API.</li>
<li>Generating pre-compiled assembly for rapid start up.</li>
<li>Flexible MessagePackObject which represents MessagePack type system naturally.</li>
</ul>
<p><strong>Note: AOT support is limited yet. Use <a href="https://github.com/msgpack/msgpack-cli/wiki/Xamarin-and-Unity">serializer pre-generation</a> with <code>mpu -s</code> utility or API.</strong><br>
If you do not pre-generated serializers, MsgPack for CLI uses reflection in AOT environments, it is slower and it sometimes causes AOT related error (<code>ExecutionEngineException</code> for runtime JIT compilation).</p>
<h6>
Documentation</h6>
<p>See <a href="https://github.com/msgpack/msgpack-cli/wiki">wiki</a></p>
<h6>
Installation</h6>
<ul>
<li>Binary files distributed via the NuGet package <a href="https://www.nuget.org/packages/MsgPack.Cli/" rel="nofollow">MsgPack.Cli</a>.</li>
<li>You can extract binary (DLL) file as following:
<ol>
<li>Download *.zip file from <a href="https://github.com/msgpack/msgpack-cli/releases/">GitHub Release page</a>.</li>
<li>Extract it.</li>
<li>Under the <code>bin</code> directory, binaries are there!</li>
</ol>
<ul>
<li>For mono, you can use <code>net461</code> or <code>net35</code> drops as you run with.</li>
<li>For Unity, <code>unity3d</code> drop is suitable.</li>
</ul>
</li>
</ul>
<h6>
How to build</h6>
<h7>
For .NET Framework</h7>
<ol>
<li>
<p>Install Visual Studio 2017 (Community edition is OK) and 2015 (for MsgPack.Windows.sln).</p>
<ul>
<li>You must install .NET Framework 3.5, 4.x, .NET Core, and Xamarin dev tools to build all builds successfully.
If you do not want to install options, edit <code>&lt;TargetFrameworks&gt;</code> element in <code>*.csproj</code> files to exclude platforms you want to exclude.</li>
</ul>
</li>
<li>
<p>Install latest .NET Core SDK.</p>
</li>
<li>
<p>Run with Visual Studio Developer Command Prompt:</p>
<p>msbuild MsgPack.sln /t:Restore
msbuild MsgPack.sln</p>
</li>
</ol>
<p>Or (for Unity 3D drops):</p>
<pre><code><span>msbuild </span><span>MsgPack</span><span>.</span><span>compats</span><span>.</span><span>sln </span><span>/</span><span>t</span><span>:</span><span>Restore</span><span>
msbuild </span><span>MsgPack</span><span>.</span><span>compats</span><span>.</span><span>sln</span></code></pre>
<p>Or (for Windows Runtime/Phone drops and Silverlight 5 drops):</p>
<pre><code><span>msbuild </span><span>MsgPack</span><span>.</span><span>Windows</span><span>.</span><span>sln </span><span>/</span><span>t</span><span>:</span><span>Restore</span><span>
msbuild </span><span>MsgPack</span><span>.</span><span>Windows</span><span>.</span><span>sln</span></code></pre>
<p>Or (for Xamarin unit testing, you must have Xamarin Business or upper license and Mac machine on the LAN to build on Windows):</p>
<pre><code><span>msbuild </span><span>MsgPack</span><span>.</span><span>Xamarin</span><span>.</span><span>sln </span><span>/</span><span>t</span><span>:</span><span>Restore</span><span>
msbuild </span><span>MsgPack</span><span>.</span><span>Xamarin</span><span>.</span><span>sln</span></code></pre>
<p>Or open one of above solution files in your IDE and run build command in it.</p>
<h7>
For Mono</h7>
<ol>
<li>Install latest Mono and .NET Core SDK.</li>
<li>Now, you can build MsgPack.sln and MsgPack.Xamarin.sln with above instructions and <code>msbuild</code> in latest Mono. Note that <code>xbuild</code> does not work because it does not support latest csproj format.</li>
</ol>
<h7>
Own Unity 3D Build</h7>
<p>First of all, there are binary drops on github release page, you should use it to save your time.<br>
Because we will not guarantee source code organization compatibilities, we might add/remove non-public types or members, which should break source code build.<br>
If you want to import sources, you must include just only described on MsgPack.Unity3D.csproj.<br>
If you want to use ".NET 2.0 Subset" settings, you must use just only described on MsgPack.Unity3D.CorLibOnly.csproj file, and define <code>CORLIB_ONLY</code> compiler constants.</p>
<h7>
Xamarin Android testing</h7>
<p>If you run on Windows, it is recommended to use HXM instead of Hyper-V based emulator.<br>
You can disable Hyper-V from priviledged (administrator) powershell as follows:</p>
<div><pre><span>Disable-WindowsOptionalFeature</span> <span>-</span>Online <span>-</span>FeatureName Microsoft<span>-</span>Hyper<span>-</span>V<span>-</span>Hypervisor</pre></div>
<p>If you want to use Hyper-V again (such as for Docker for Windows etc.), you can do it by following in priviledged (administrator) powershell:</p>
<div><pre><span>Enable-WindowsOptionalFeature</span> <span>-</span>Online <span>-</span>FeatureName Microsoft<span>-</span>Hyper<span>-</span>V<span>-</span>Hypervisor</pre></div>
<h8>
Xamarin Android Trouble shooting tips</h8>
<ul>
<li>Javac shows compilation error.
<ul>
<li>Rebuild the test project and try it run again.</li>
</ul>
</li>
</ul>
<h7>
Xamarin iOS testing</h7>
<p>You must create provisoning profiles in your MacOS devices.<br>
See <a href="https://developer.xamarin.com/guides/ios/getting_started/installation/device_provisioning/free-provisioning/" rel="nofollow">Xamarin documents about provisining</a> for details.</p>
<p>There are bundle IDs of current iOS tests:</p>
<ul>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-packer</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-unpacker</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-unpacking</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-timestamp</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-arrayserialization</code></li>
<li><code>org.msgpack.msgpack-cli-xamarin-ios-test-mapserialization</code></li>
</ul>
<p><em>Note that some reflection based serializer tests failed with AOT related limitation.</em></p>
<h8>
Xamarin iOS Trouble shooting tips</h8>
<p>See <a href="https://developer.xamarin.com/guides/ios/getting_started/installation/windows/connecting-to-mac/troubleshooting/" rel="nofollow">Xamarin's official trouble shooting docs first.</a></p>
<ul>
<li>An error occurred while running unit test project.
<ul>
<li>Rebuild the project and rerun it. Or, login your Mac again, ant retry it.</li>
</ul>
</li>
<li>It is hard to read English.
<ul>
<li>You can read localized Xamarin docs with putting <code>{region}-{lang}</code> as the first component of URL path such as <code>https://developer.xamarin.com/ja-jp/guides/...</code>.</li>
</ul>
</li>
</ul>
<h6>
See also</h6>
<ul>
<li>GitHub Page           : <a href="http://cli.msgpack.org/" rel="nofollow">http://cli.msgpack.org/</a>
</li>
<li>Wiki (documentation)  : <a href="https://github.com/msgpack/msgpack-cli/wiki">https://github.com/msgpack/msgpack-cli/wiki</a>
</li>
<li>API Reference         : <a href="http://cli.msgpack.org/doc/top.html" rel="nofollow">http://cli.msgpack.org/doc/top.html</a>
</li>
<li>Issue tracker         : <a href="https://github.com/msgpack/msgpack-cli/issues">https://github.com/msgpack/msgpack-cli/issues</a>
</li>
<li>MSBuild reference     : <a href="https://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx</a>
</li>
<li>Mono xbuild reference : <a href="https://www.mono-project.com/Microsoft.Build" rel="nofollow">http://www.mono-project.com/Microsoft.Build</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-c"><h4><a href="https://github.com/msgpack/msgpack-c" target="_blank">msgpack/msgpack-c <span>https://github.com/msgpack/msgpack-c</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
<code>msgpack</code> for C/C++</h5>
<p>Version 3.1.1 <a href="https://travis-ci.org/msgpack/msgpack-c" rel="nofollow"><img src="https://camo.githubusercontent.com/3165c63f585cb4407878cac19434ff79dfd6f3bc/68747470733a2f2f7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d632e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/msgpack/msgpack-c.svg?branch=master"></a> <a href="https://ci.appveyor.com/project/redboltz/msgpack-c/branch/master" rel="nofollow"><img src="https://camo.githubusercontent.com/b9c03b99428de22ee2a2c1845ba060563e700a05/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f386b73746367743739716a3132336d772f6272616e63682f6d61737465723f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/8kstcgt79qj123mw/branch/master?svg=true"></a></p>
<p>It's like JSON but smaller and faster.</p>
<h6>
Overview</h6>
<p><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization
format, which lets you exchange data among multiple languages like JSON,
except that it's faster and smaller. Small integers are encoded into a
single byte and short strings require only one extra byte in
addition to the strings themselves.</p>
<h6>
Example</h6>
<p>In C:</p>
<div><pre>#<span>include</span> <span><span>&lt;</span>msgpack.h<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>stdio.h<span>&gt;</span></span>

<span>int</span> <span>main</span>(<span>void</span>)
{
    <span><span>/*</span> msgpack::sbuffer is a simple buffer implementation. <span>*/</span></span>
    msgpack_sbuffer sbuf;
    <span>msgpack_sbuffer_init</span>(&amp;sbuf);

    <span><span>/*</span> serialize values into the buffer using msgpack_sbuffer_write callback function. <span>*/</span></span>
    msgpack_packer pk;
    <span>msgpack_packer_init</span>(&amp;pk, &amp;sbuf, msgpack_sbuffer_write);

    <span>msgpack_pack_array</span>(&amp;pk, <span>3</span>);
    <span>msgpack_pack_int</span>(&amp;pk, <span>1</span>);
    <span>msgpack_pack_true</span>(&amp;pk);
    <span>msgpack_pack_str</span>(&amp;pk, <span>7</span>);
    <span>msgpack_pack_str_body</span>(&amp;pk, <span><span>"</span>example<span>"</span></span>, <span>7</span>);

    <span><span>/*</span> deserialize the buffer into msgpack_object instance. <span>*/</span></span>
    <span><span>/*</span> deserialized object is valid during the msgpack_zone instance alive. <span>*/</span></span>
    msgpack_zone mempool;
    <span>msgpack_zone_init</span>(&amp;mempool, <span>2048</span>);

    msgpack_object deserialized;
    <span>msgpack_unpack</span>(sbuf.<span>data</span>, sbuf.<span>size</span>, <span>NULL</span>, &amp;mempool, &amp;deserialized);

    <span><span>/*</span> print the deserialized object. <span>*/</span></span>
    <span>msgpack_object_print</span>(stdout, deserialized);
    <span>puts</span>(<span><span>"</span><span>"</span></span>);

    <span>msgpack_zone_destroy</span>(&amp;mempool);
    <span>msgpack_sbuffer_destroy</span>(&amp;sbuf);

    <span>return</span> <span>0</span>;
}</pre></div>
<p>See <a href="https://msgpack.org/msgpack/msgpack-c/blob/master/QUICKSTART-C.md"><code>QUICKSTART-C.md</code></a> for more details.</p>
<p>In C++:</p>
<div><pre>#<span>include</span> <span><span>&lt;</span>msgpack.hpp<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>string<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>iostream<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>sstream<span>&gt;</span></span>

<span>int</span> <span>main</span>(<span>void</span>)
{
    msgpack::type::tuple&lt;<span>int</span>, <span>bool</span>, std::string&gt; <span>src</span>(<span>1</span>, <span>true</span>, <span><span>"</span>example<span>"</span></span>);

    <span><span>//</span> serialize the object into the buffer.</span>
    <span><span>//</span> any classes that implements write(const char*,size_t) can be a buffer.</span>
    std::stringstream buffer;
    <span>msgpack::pack</span>(buffer, src);

    <span><span>//</span> send the buffer ...</span>
    buffer.<span>seekg</span>(<span>0</span>);

    <span><span>//</span> deserialize the buffer into msgpack::object instance.</span>
    std::string <span>str</span>(buffer.<span>str</span>());

    msgpack::object_handle oh =
        <span>msgpack::unpack</span>(str.<span>data</span>(), str.<span>size</span>());

    <span><span>//</span> deserialized object is valid during the msgpack::object_handle instance is alive.</span>
    msgpack::object deserialized = oh.<span>get</span>();

    <span><span>//</span> msgpack::object supports ostream.</span>
    std::cout &lt;&lt; deserialized &lt;&lt; std::endl;

    <span><span>//</span> convert msgpack::object instance into the original type.</span>
    <span><span>//</span> if the type is mismatched, it throws msgpack::type_error exception.</span>
    msgpack::type::tuple&lt;<span>int</span>, <span>bool</span>, std::string&gt; dst;
    deserialized.<span>convert</span>(dst);

    <span><span>//</span> or create the new instance</span>
    msgpack::type::tuple&lt;<span>int</span>, <span>bool</span>, std::string&gt; dst2 =
        deserialized.<span>as</span>&lt;msgpack::type::tuple&lt;<span>int</span>, <span>bool</span>, std::string&gt; &gt;();

    <span>return</span> <span>0</span>;
}</pre></div>
<p>See <a href="https://msgpack.org/msgpack/msgpack-c/blob/master/QUICKSTART-CPP.md"><code>QUICKSTART-CPP.md</code></a> for more details.</p>
<h6>
Usage</h6>
<h7>
C++ Header Only Library</h7>
<p>When you use msgpack on C++, you can just add
msgpack-c/include to your include path:</p>
<pre><code><span>g</span><span>++</span><span> </span><span>-</span><span>I msgpack</span><span>-</span><span>c</span><span>/</span><span>include your_source_file</span><span>.</span><span>cpp</span></code></pre>
<p>If you want to use C version of msgpack, you need to build it. You can
also install the C and C++ versions of msgpack.</p>
<h7>
Building and Installing</h7>
<h8>
Install from git repository</h8>
<h5>
Using the Terminal (CLI)</h5>
<p>You will need:</p>
<ul>
<li><code>gcc &gt;= 4.1.0</code></li>
<li><code>cmake &gt;= 2.8.0</code></li>
</ul>
<p>C and C++03:</p>
<pre><code><span>$ git clone https</span><span>:</span><span>//github.com/msgpack/msgpack-c.git</span><span>
$ cd msgpack</span><span>-</span><span>c
$ cmake </span><span>.</span><span>
$ make
$ sudo make install</span></code></pre>
<p>If you want to setup C++11 or C++17 version of msgpack instead,
execute the following commands:</p>
<pre><code><span>$ git clone https</span><span>:</span><span>//github.com/msgpack/msgpack-c.git</span><span>
$ cd msgpack</span><span>-</span><span>c
$ cmake </span><span>-</span><span>DMSGPACK_CXX</span><span>[</span><span>11</span><span>|</span><span>17</span><span>]=</span><span>ON </span><span>.</span><span>
$ sudo make install</span></code></pre>
<p><code>MSGPACK_CXX[11|17]</code> flags are not affected to installing files. Just switching test cases. All files are installed in every settings.</p>
<p>When you use the C part of <code>msgpack-c</code>, you need to build and link the library. By default, both static/shared libraries are built. If you want to build only static library, set <code>BUILD_SHARED_LIBS=OFF</code> to cmake. If you want to build only shared library, set `BUILD_SHARED_L</p>
<h8>
GUI on Windows</h8>
<p>Clone msgpack-c git repository.</p>
<pre><code><span>$ git clone https</span><span>:</span><span>//github.com/msgpack/msgpack-c.git</span></code></pre>
<p>or using GUI git client.</p>
<p>e.g.) tortoise git <a href="https://code.google.com/p/tortoisegit/" rel="nofollow">https://code.google.com/p/tortoisegit/</a></p>
<ol>
<li>
<p>Launch <a href="https://www.cmake.org/cmake/resources/software.html" rel="nofollow">cmake GUI client</a>.</p>
</li>
<li>
<p>Set 'Where is the source code:' text box and 'Where to build
the binaries:' text box.</p>
</li>
<li>
<p>Click 'Configure' button.</p>
</li>
<li>
<p>Choose your Visual Studio version.</p>
</li>
<li>
<p>Click 'Generate' button.</p>
</li>
<li>
<p>Open the created msgpack.sln on Visual Studio.</p>
</li>
<li>
<p>Build all.</p>
</li>
</ol>
<h7>
Documentation</h7>
<p>You can get additional information including the tutorial on the
<a href="https://github.com/msgpack/msgpack-c/wiki">wiki</a>.</p>
<h6>
Contributing</h6>
<p><code>msgpack-c</code> is developed on GitHub at <a href="https://github.com/msgpack/msgpack-c">msgpack/msgpack-c</a>.
To report an issue or send a pull request, use the
<a href="https://github.com/msgpack/msgpack-c/issues">issue tracker</a>.</p>
<p>Here's the list of <a href="https://github.com/msgpack/msgpack-c/graphs/contributors">great contributors</a>.</p>
<h6>
License</h6>
<p><code>msgpack-c</code> is licensed under the Boost Software License, Version 1.0. See
the <a href="https://msgpack.org/msgpack/msgpack-c/blob/master/LICENSE_1_0.txt"><code>LICENSE_1_0.txt</code></a> file for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-ocaml"><h4><a href="https://github.com/msgpack/msgpack-ocaml" target="_blank">msgpack/msgpack-ocaml <span>https://github.com/msgpack/msgpack-ocaml</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MsgPack for OCaml</h5>
<h6>
BULID</h6>
<div><pre>$ make
$ sudo make install</pre></div>
<h6>
EXAMPLE</h6>
<h7>
Serialize/Deserialize for Msgpack Object</h7>
<div><pre><span><span>(*</span> serialize <span>*)</span></span>
<span>let</span> bytes <span>=</span> 
  <span>Msgpack.Serialize.</span>serialize_string (<span>`FixArray</span> [<span>`PFixnum</span> <span>1</span>; <span>`PFixnum</span> <span>2</span>; <span>`PFixnum</span> <span>3</span>])

<span><span>(*</span> deserialize <span>*)</span></span>
<span>let</span> obj <span>=</span>
  <span>Msgpack.Serialize.</span>deserialize_string bytes</pre></div>
<h7>
Serialize/Deserialize for OCaml types (with meta_conv)</h7>
<div><pre><span>open</span> <span>Msgpack_conv</span>

<span>type</span> <span>t </span>= {
  <span>int</span> : <span>int</span><span>;</span>
  <span>str</span> : <span>string</span><span>;</span>
} <span>with</span> <span>conv</span>(<span>msgpack</span>)

<span><span>(*</span> serialize <span>*)</span></span>
<span>let</span> bytes <span>=</span> 
  <span>Msgpack.Serialize.</span>serialize_string (msgpack_of_t { <span>int</span> <span>=</span> <span>42</span>; str <span>=</span> <span><span>"</span>ans<span>"</span></span> })

<span><span>(*</span> deserialize <span>*)</span></span>
<span>let</span> obj <span>=</span>
  t_of_msgpack (<span>Msgpack.Serialize.</span>deserialize_string bytes)</pre></div>
<p>See also, <code>examlpe/</code></p>
<h6>
DEVELOPMENT</h6>
<p>Setup development enviroment with docker:</p>
<div><pre>$ docker-compose build
$ docker-compose run app</pre></div>
<h6>
TEST</h6>
<div><pre>$ ocaml setup.ml -configure --enable-tests
$ make <span>test</span></pre></div>
<h6>
PROOF</h6>
<p>If you want to use msgpack at OCaml, you need not do this section.
This section for user intrested in formal verification.</p>
<p>You need Coq 8.4 and omake.</p>
<div><pre>$ <span>cd</span> proof
$ make
$ cp <span>*</span>.ml<span>*</span> ../lib/core</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-smalltalk"><h4><a href="https://github.com/msgpack/msgpack-smalltalk" target="_blank">msgpack/msgpack-smalltalk <span>https://github.com/msgpack/msgpack-smalltalk</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-smalltalk</h5>
<p>MessagePack serialization library for various Smalltalk dialects.</p>
<ul>
<li>Squeak</li>
<li>Pharo</li>
<li>VisualWorks</li>
<li>VA Smalltalk</li>
<li>Dolphin Smalltalk</li>
<li>GNU Smalltalk (Beta)</li>
<li><a href="https://github.com/mumez/Cuis-Smalltalk-MessagePack">Cuis</a></li>
</ul>
<p>Sources are put as <a href="https://github.com/CampSmalltalk/Cypress/blob/master/README.md">Cypress</a> for the neutral accesses from various Smalltalk dialects.</p>
<h6>
How to use</h6>
<h7>
Serialization</h7>
<div><pre><span>MpMessagePack</span> <span>pack:</span> <span>&lt;</span>your object<span>&gt;</span></pre></div>
<p>or:</p>
<div><pre><span>&lt;</span>your object<span>&gt;</span> messagePacked</pre></div>
<h7>
Deserialization</h7>
<div><pre><span>MpMessagePack</span> <span>unpack:</span> msgpackBytes</pre></div>
<p>or:</p>
<div><pre><span>Object</span> <span>fromMessagePack:</span> msgBytes</pre></div>
<h7>
Samples</h7>
<div><pre>map <span>:=</span> <span>Dictionary</span> <span>new</span>.
map <span>at:</span> <span><span>'</span>someArray<span>'</span></span> asByteArray <span>put:</span> <span>#(1 2.2 #[3 4 5])</span>.
packed <span>:=</span> map messagePacked.
(<span>Object</span> <span>fromMessagePack:</span> packed) inspect.</pre></div>
<div><pre>writeStream <span>:=</span> <span>WriteStream</span> <span>on:</span> <span>ByteArray</span> <span>new</span>.
encoder <span>:=</span> <span>MpEncoder</span> <span>on:</span> writeStream.
encoder <span>nextPut:</span> <span>1</span>.
encoder <span>nextPut:</span> <span>#(2 3)</span>.
dic <span>:=</span> <span>Dictionary</span> <span>new</span>.
dic <span>at:</span> <span>4</span> <span>put:</span> <span>5</span>.
encoder <span>nextPut:</span> dic.
encoder <span>nextPut:</span> <span><span>'</span>four<span>'</span></span> asByteArray.
bytes <span>:=</span> encoder contents.
readStream <span>:=</span> <span>ReadStream</span> <span>on:</span> bytes.
decoder <span>:=</span> <span>MpDecoder</span> <span>on:</span> readStream.
[decoder atEnd] <span>whileFalse:</span> [
        <span>Transcript</span> cr; <span>show:</span> decoder next printString
]</pre></div>
<h7>
How to install</h7>
<p>Please read <a href="https://github.com/msgpack/msgpack-smalltalk/blob/master/doc/HowToInstall.md">HowToInstall.md</a>.</p>
<h7>
Loading the latest development version</h7>
<h8>
Squeak</h8>
<div><pre><span>Installer</span> squeaksource
    <span>project:</span> <span><span>'</span>MessagePack<span>'</span></span>;
    <span>install:</span> <span><span>'</span>ConfigurationOfMessagePack<span>'</span></span>. 
(<span>Smalltalk</span> <span>at:</span> <span>#ConfigurationOfMessagePack</span>) project development load</pre></div>
<h8>
Pharo</h8>
<div><pre><span>Gofer</span> it
    <span>smalltalkhubUser:</span> <span><span>'</span>MasashiUmezawa<span>'</span></span> <span>project:</span> <span><span>'</span>MessagePack<span>'</span></span>;
    configuration;
    load.
(<span>Smalltalk</span> <span>at:</span> <span>#ConfigurationOfMessagePack</span>) project development load</pre></div>
<p>You might need <code>MpTypeMapper initializeAll </code> on new encoder/decoder-related updates.</p>
</article>
  </div>
        </div>
        
        <div id="qs-loteixeira-as3-msgpack"><h4><a href="https://github.com/loteixeira/as3-msgpack" target="_blank">loteixeira/as3-msgpack <span>https://github.com/loteixeira/as3-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><strong>MessagePack for Actionscript3 (Flash, Flex and AIR).</strong></p>
<p>as3-msgpack was designed to work with the interfaces IDataInput and IDataOutput, thus the API might be easily connected with the native classes that handle binary data (such as ByteArray, Socket, FileStream and URLStream).<br>
Moreover, as3-msgpack is capable of decoding data from binary streams.<br>
Get started: <a href="https://loteixeira.github.io/lib/2013/08/19/as3-msgpack/" rel="nofollow">http://loteixeira.github.io/lib/2013/08/19/as3-msgpack/</a></p>
<p><strong>Basic usage (encoding/decoding):</strong></p>
<div><pre><span>// create messagepack object</span>
<span>var</span> msgpack<span>:</span>MsgPack <span>=</span> <span>new</span> MsgPack()<span>;</span>

<span>// encode an array</span>
<span>var</span> <span>bytes</span><span>:</span><span>ByteArray</span> <span>=</span> msgpack<span>.</span>write(<span>[</span><span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span><span>]</span>)<span>;</span>

<span>// rewind the buffer</span>
<span>bytes</span><span>.</span><span>position</span> <span>=</span> <span>0</span><span>;</span>

<span>// print the decoded object</span>
<span>trace</span>(msgpack<span>.</span>read(<span>bytes</span>))<span>;</span></pre></div>
<p>For downloads, source code and further information, check the project repository: <a href="https://github.com/loteixeira/as3-msgpack">https://github.com/loteixeira/as3-msgpack</a>.</p>
</article>
  </div>
        </div>
        
        <div id="qs-msgpack-msgpack-php"><h4><a href="https://github.com/msgpack/msgpack-php" target="_blank">msgpack/msgpack-php <span>https://github.com/msgpack/msgpack-php</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Msgpack for PHP</h5>
<p><a href="https://travis-ci.org/msgpack/msgpack-php" rel="nofollow"><img src="https://camo.githubusercontent.com/875634a635cca813cf3c16de575dfb96917e2ca9/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d73677061636b2f6d73677061636b2d7068702e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/msgpack/msgpack-php.png"></a></p>
<p>This extension provide API for communicating with MessagePack serialization.</p>
<p>MessagePack is a binary-based efficient object serialization library.
It enables to exchange structured objects between many languages like JSON.
But unlike JSON, it is very fast and small.</p>
<h6>
Requirement</h6>
<ul>
<li>PHP 5.0 +</li>
</ul>
<h6>
Install</h6>
<h7>
Install from PECL</h7>
<p>Msgpack is an PECL extension, thus you can simply install it by:</p>
<pre><code><span>pecl install msgpack</span></code></pre>
<h7>
Compile Msgpack from source</h7>
<pre><code><span>$</span><span>/</span><span>path</span><span>/</span><span>to</span><span>/</span><span>phpize
$</span><span>./</span><span>configure 
$make </span><span>&amp;&amp;</span><span> make install</span></code></pre>
<h7>
Example</h7>
<div><pre><span>&lt;?php</span><span></span>
<span><span>$data</span> <span>=</span> <span>array</span>(<span>0</span><span>=&gt;</span><span>1</span>,<span>1</span><span>=&gt;</span><span>2</span>,<span>2</span><span>=&gt;</span><span>3</span>);</span>
<span><span>$msg</span> <span>=</span> msgpack_pack(<span>$data</span>);</span>
<span><span>$data</span> <span>=</span> msgpack_unpack(<span>$msg</span>);</span>
<span></span><span><span>?</span>&gt;</span></pre></div>
<h5>
Resources</h5>
<ul>
<li><a href="https://msgpack.org/" rel="nofollow">msgpack</a></li>
</ul>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-mneumann-rust-msgpack"><h4><a href="https://github.com/mneumann/rust-msgpack" target="_blank">mneumann/rust-msgpack <span>https://github.com/mneumann/rust-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
rust-msgpack <a href="https://travis-ci.org/mneumann/rust-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/7e21da06b68bdd23b5f10b72637cc1a5d5ca2d8a/68747470733a2f2f7472617669732d63692e6f72672f6d6e65756d616e6e2f727573742d6d73677061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mneumann/rust-msgpack.png?branch=master"></a>
</h5>
<p><a href="http://www.msgpack.org/" rel="nofollow">Msgpack</a> implementation for <a href="https://www.rust-lang.org/" rel="nofollow">Rust</a> language.</p>
<h6>
Installation</h6>
<p>Simply include the rust-msgpack in your Cargo dependencies.</p>
<div><pre>[<span>dependencies</span>.<span>msgpack</span>]

<span>git</span> = <span><span>"</span>git@github.com:mneumann/rust-msgpack.git<span>"</span></span></pre></div>
<h6>
Quickstart</h6>
<div><pre><span>extern</span> <span>crate</span> msgpack;

<span>fn</span> <span>main</span>() {
  <span>let</span> arr <span>=</span> <span>vec!</span>[<span>"str1"</span>.<span>to_string</span>(), <span>"str2"</span>.<span>to_string</span>()];
  <span>let</span> <span>str</span> <span>=</span> msgpack<span>::</span>Encoder<span>::</span><span>to_msgpack</span>(<span>&amp;</span>arr).<span>ok</span>().<span>unwrap</span>();
  <span>println!</span>(<span>"Encoded: {}"</span>, <span>str</span>);

  <span>let</span> dec: <span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>=</span> msgpack<span>::</span><span>from_msgpack</span>(<span>str</span>).<span>ok</span>().<span>unwrap</span>();
  <span>println!</span>(<span>"Decoded: {}"</span>, dec);
}</pre></div>
<p>To enable your own data structures to be automatically serialized from and to
msgpack, derive from <code>Encodable</code> and <code>Decodable</code> as shown
in the following example:</p>
<div><pre><span>extern</span> <span>crate</span> serialize;

#[deriving(Encodable,Decodable)]
<span>struct</span> <span>MyStruct</span> {
  a: <span>Vec</span><span>&lt;</span><span>u32</span><span>&gt;</span>,
  s: <span>String</span>
}</pre></div>
<h6>
Testing</h6>
<pre><code><span>cargo test</span></code></pre>
<h6>
License</h6>
<p>This code licensed under the same terms as Rust itself: dual MIT/Apache2 license options.</p>
</article>
  </div>
        </div>
        
        <div id="qs-mururu-msgpack-elixir"><h4><a href="https://github.com/mururu/msgpack-elixir" target="_blank">mururu/msgpack-elixir <span>https://github.com/mururu/msgpack-elixir</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Elixir</h5>
<p><a href="https://travis-ci.org/mururu/msgpack-elixir" rel="nofollow"><img src="https://camo.githubusercontent.com/09452907bf3009b0bf9ac3ecb8e3b5ce6bfb4ce6/68747470733a2f2f7472617669732d63692e6f72672f6d75727572752f6d73677061636b2d656c697869722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/mururu/msgpack-elixir.png?branch=master"></a></p>
<h6>
Installation</h6>
<p>Add <code>:message_pack</code> as a dependency in your <code>mix.exs</code> file.</p>
<div><pre><span>defp</span> <span>deps</span> <span>do</span>
  [{<span>:message_pack</span>, <span><span>"</span>~&gt; 0.2.0<span>"</span></span>}]
<span>end</span></pre></div>
<h6>
Usage</h6>
<div><pre><span><span>#</span> pack</span>
<span>MessagePack</span>.pack([<span>1</span>,<span>2</span>,<span>3</span>]) <span><span>#</span>=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span>MessagePack</span>.pack!([<span>1</span>,<span>2</span>,<span>3</span>]) <span><span>#</span>=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span><span>#</span> unpack</span>
<span>MessagePack</span>.unpack(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; { :ok, [1,2,3] }</span>
<span>MessagePack</span>.unpack!(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; [1,2,3]</span>

<span><span>#</span> unpack_once</span>
<span>MessagePack</span>.unpack_once(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span>MessagePack</span>.unpack_once!(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span></pre></div>
<h6>
Options</h6>
<ul>
<li><code>enable_string</code></li>
</ul>
<p>Support string type. This options is <code>false</code> by default.</p>
<div><pre>iex(<span>1</span>)<span>&gt;</span> { <span>:ok</span>, bin } <span>=</span> <span>MessagePack</span>.pack(<span>&lt;&lt;</span><span>255</span><span>&gt;&gt;</span>)
{<span>:ok</span>, <span>&lt;&lt;</span><span>161</span>, <span>255</span><span>&gt;&gt;</span>}
iex(<span>3</span>)<span>&gt;</span> <span>MessagePack</span>.unpack(<span>&lt;&lt;</span><span>161</span>, <span>255</span><span>&gt;&gt;</span>)
{<span>:ok</span>, <span>&lt;&lt;</span><span>255</span><span>&gt;&gt;</span>}
iex(<span>4</span>)<span>&gt;</span> <span>MessagePack</span>.unpack(<span>&lt;&lt;</span><span>161</span>, <span>255</span><span>&gt;&gt;</span>, <span>enable_string:</span> <span>true</span>)
{<span>:error</span>, {<span>:invalid_string</span>, <span>&lt;&lt;</span><span>255</span><span>&gt;&gt;</span>}}</pre></div>
<ul>
<li><code>ext</code></li>
</ul>
<p>Support extention type.</p>
<p>See <code>test/message_pack_ext_test.exs</code>.</p>
<h6>
License</h6>
<p>MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-ktakashi-r6rs-msgpack"><h4><a href="https://github.com/ktakashi/r6rs-msgpack" target="_blank">ktakashi/r6rs-msgpack <span>https://github.com/ktakashi/r6rs-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for R6RS Scheme</h5>
<p>This is an implementation of <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> for
R6RS Scheme.</p>
<h6>
API references</h6>
<p><em>Function</em> (pack! bv message)<br>
<em>Function</em> (pack! bv message offset)</p>
<p>Pack <em>message</em> to message pack format bytevector and put it into the
<em>bv</em> destructively. Given <em>bv</em> must have enough length to hold the message.</p>
<p>Optional argument <em>offset</em> indicates where to start with, default is 0.</p>
<p><em>Function</em> (pack message)</p>
<p>The same as <strong>pack!</strong> but this one creates a new bytevector.</p>
<p><em>Function</em> (pack-size message)</p>
<p>Calculate the converted message size.</p>
<p><em>Function</em> (unpack bv)<br>
<em>Function</em> (unpack bv offset)</p>
<p>Unpack the given message format bytevector to Scheme object.</p>
<p>Optional argument <em>offset</em> indicates where to start with, default is 0.</p>
<p><em>Function</em> (get-unpack in)</p>
<p>Unpack the given binary input port to Scheme object.</p>
<h6>
Conversion rules</h6>
<p>As you already know, Scheme doesn't have static types so the conversion of
Scheme objects to message pack data might cause unexpected results. To avoid
it, I will describe how conversion works.</p>
<h7>
Scheme to message pack</h7>
<h8>
Integer conversion</h8>
<p>The library automatically decides proper size. More specifically, if it
can fit to message pack's fixnum then library uses it, so are uint8-64.
If the number is too big, then an error is raised. Users must know it tries
to use uint as much as possible. If the given number was negative then
sint will be used.</p>
<h8>
Floating point conversion</h8>
<p>Unfortunately R6RS doesn't have difference between float and double. So
when flonum is given then it always converts to double number.</p>
<h8>
Collection conversion</h8>
<p>Message pack has collections which are map and array. And these are associated
with alist (association list) and vector respectively. When you want to convert
alist to message pack data, then you need to make sure the <em>cdr</em> part will be
the data and if you put <em>(("key" "value))</em>_ then it will be converted to nested
map.</p>
<p>The collection size calculation is done automatically. It tries to use the
smallest size.</p>
<h7>
Message pack to Scheme</h7>
<p>The other way around is easy, it can simply restore the byte data to Scheme
object. Following describes the conversion rules;</p>
<p>Positive fixnum -&gt; integer<br>
Negative fixnum -&gt; integer<br>
uint8, uint16, uint32, uint64 -&gt; integer<br>
sint8, sint16, sint32, sint64 -&gt; integer<br>
Map -&gt; alist<br>
Array -&gt; vector<br>
fixstr, str8, str16, str32 -&gt; string
bit8, bit16, bit32 -&gt; bytevector</p>
<h6>
Tested Scheme implementations</h6>
<p><a href="https://code.google.com/p/sagittarius-scheme/" rel="nofollow">Sagittarius Scheme</a></p>
<p><a href="https://code.google.com/p/mosh-scheme/" rel="nofollow">Mosh Scheme</a></p>
<p><a href="https://code.google.com/p/ypsilon/" rel="nofollow">Ypsilon</a></p>
<p>Your contributions are always welcome.</p>
<h6>
TODO</h6>
<ul>
<li>More testing</li>
<li>Extended type handling</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-Lichtso-netLink"><h4><a href="https://github.com/Lichtso/netLink" target="_blank">Lichtso/netLink <span>https://github.com/Lichtso/netLink</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MsgPack v5 implementation for C++ 11</h5>
<p><a href="https://travis-ci.org/Lichtso/netLink" rel="nofollow"><img src="https://camo.githubusercontent.com/1595d84b723daaced17cd83455a0f07b3722c4c5/68747470733a2f2f7472617669732d63692e6f72672f4c69636874736f2f6e65744c696e6b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/Lichtso/netLink.svg"></a>
<a href="https://en.wikipedia.org/wiki/Zlib_License" rel="nofollow"><img src="https://camo.githubusercontent.com/bd8e513df5763d4db311ba4c3018a661df881989/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d5a4c49422d627269676874677265656e2e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-ZLIB-brightgreen.svg"></a></p>
<h6>
Features</h6>
<ul>
<li>std::streambuf serializer and deserializer</li>
<li>hierarchy or token stream</li>
<li>push and pull parser</li>
<li>byte wise data flow control</li>
</ul>
<h6>
Small Example</h6>
<pre><code><span>MsgPack</span><span>::</span><span>Serializer</span><span> serializer</span><span>(</span><span>socket</span><span>);</span><span>  
std</span><span>::</span><span>vector</span><span>&lt;</span><span>std</span><span>::</span><span>unique_ptr</span><span>&lt;</span><span>MsgPack</span><span>::</span><span>Element</span><span>&gt;&gt;</span><span> arrayWithoutElements</span><span>,</span><span> arrayWith3Elements</span><span>;</span><span>
arrayWith3Elements</span><span>.</span><span>push_back</span><span>(</span><span>MsgPack</span><span>::</span><span>Factory</span><span>(</span><span>true</span><span>));</span><span>
arrayWith3Elements</span><span>.</span><span>push_back</span><span>(</span><span>MsgPack__Factory</span><span>(</span><span>Array</span><span>(</span><span>std</span><span>::</span><span>move</span><span>(</span><span>arrayWithoutElements</span><span>))));</span><span>
arrayWith3Elements</span><span>.</span><span>push_back</span><span>(</span><span>MsgPack</span><span>::</span><span>Factory</span><span>(</span><span>"Hello World!"</span><span>));</span><span>  
serializer </span><span>&lt;&lt;</span><span> </span><span>MsgPack__Factory</span><span>(</span><span>Array</span><span>(</span><span>std</span><span>::</span><span>move</span><span>(</span><span>arrayWith3Elements</span><span>)));</span><span>

</span><span>MsgPack</span><span>::</span><span>Deserializer</span><span> deserializer</span><span>(</span><span>socket</span><span>);</span><span>  
deserializer</span><span>.</span><span>deserialize</span><span>([](</span><span>std</span><span>::</span><span>unique_ptr</span><span>&lt;</span><span>MsgPack</span><span>::</span><span>Element</span><span>&gt;</span><span> parsed</span><span>)</span><span> </span><span>{</span><span>
    std</span><span>::</span><span>cout </span><span>&lt;&lt;</span><span> </span><span>"Parsed: "</span><span> </span><span>&lt;&lt;</span><span> </span><span>*</span><span>parsed </span><span>&lt;&lt;</span><span> </span><span>"\n"</span><span>;</span><span>
    </span><span>return</span><span> </span><span>false</span><span>;</span><span>
</span><span>},</span><span> </span><span>true</span><span>);</span></code></pre>
<h6>
Read More</h6>
<p><a href="https://github.com/Lichtso/netLink/wiki/MsgPack">Tutorial</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-ugorji-go"><h4><a href="https://github.com/ugorji/go" target="_blank">ugorji/go <span>https://github.com/ugorji/go</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><strong>MessagePack and <a href="https://github.com/ugorji/binc">Binc</a> Codec for <a href="https://golang.org/" rel="nofollow">Go</a> Language.</strong></p>
<p><em>A High Performance, Feature-Rich, Idiomatic encode/decode and rpc library</em>.</p>
<p>To install:</p>
<pre><code><span>go </span><span>get</span><span> github</span><span>.</span><span>com</span><span>/</span><span>ugorji</span><span>/</span><span>go</span><span>/</span><span>codec</span></code></pre>
<p>Source: [<a href="https://github.com/ugorji/go">http://github.com/ugorji/go</a>]<br>
Online documentation: [<a href="https://godoc.org/github.com/ugorji/go/codec" rel="nofollow">http://godoc.org/github.com/ugorji/go/codec</a>]</p>
<p>Typical usage:</p>
<div><pre>    <span><span>//</span> create and use decoder/encoder</span>
    <span>var</span> (
        v <span>interface</span>{} <span><span>//</span> value to decode/encode into</span>
        r io.<span>Reader</span>
        w io.<span>Writer</span>
        b []<span>byte</span>
        mh codec.<span>MsgpackHandle</span>
    )
    
    dec = codec.<span>NewDecoder</span>(r, &amp;mh)
    dec = codec.<span>NewDecoderBytes</span>(b, &amp;mh)
    err = dec.<span>Decode</span>(&amp;v) 
    
    enc = codec.<span>NewEncoder</span>(w, &amp;mh)
    enc = codec.<span>NewEncoderBytes</span>(&amp;b, &amp;mh)
    err = enc.<span>Encode</span>(v)
    
    <span><span>//</span>RPC Server</span>
    <span>go</span> <span>func</span>() {
        <span>for</span> {
            <span>conn</span>, <span>err</span> <span>:=</span> listener.<span>Accept</span>()
            <span>rpcCodec</span> <span>:=</span> codec.<span>GoRpc</span>.<span>ServerCodec</span>(conn, h)
            <span><span>//</span>OR rpcCodec := codec.MsgpackSpecRpc.ServerCodec(conn, h)</span>
            rpc.<span>ServeCodec</span>(rpcCodec)
        }
    }()
    
    <span><span>//</span>RPC Communication (client side)</span>
    conn, err = net.<span>Dial</span>(<span><span>"</span>tcp<span>"</span></span>, <span><span>"</span>localhost:5555<span>"</span></span>)
    <span>rpcCodec</span> <span>:=</span> codec.<span>GoRpc</span>.<span>ClientCodec</span>(conn, h)
    <span><span>//</span>OR rpcCodec := codec.MsgpackSpecRpc.ClientCodec(conn, h)</span>
    <span>client</span> <span>:=</span> rpc.<span>NewClientWithCodec</span>(rpcCodec)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-suzukaze-mruby-msgpack"><h4><a href="https://msgpack.org/MessagePack%20for%20mruby" target="_blank">suzukaze/mruby-msgpack <span>MessagePack for mruby</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
mruby-msgpack   <a href="https://travis-ci.org/suzukaze/mruby-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/363e4c78a037f69c0b697b36f5e213eaf4497681/68747470733a2f2f7472617669732d63692e6f72672f73757a756b617a652f6d727562792d6d73677061636b2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/suzukaze/mruby-msgpack.png?branch=master"></a>
</h5>
<h6>
Welcome to MessagePack for mruby</h6>
<p>MessagePack for mruby is MessagePack implimented in mruby language.</p>
<div><pre>msg <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>].to_msgpack  <span><span>#</span>=&gt; "\x93\x01\x02\x03"</span>
<span>MessagePack</span>.unpack(msg)     <span><span>#</span>=&gt; [1, 2, 3]</span></pre></div>
<p>This is early vesion. Please check the methods that work in test folder.</p>
<h6>
Platform</h6>
<p>I test MessagePack for mruby in mac OSX 10.8.4. In the future it will work in Windows and Linux OS.</p>
<h6>
Getting Started</h6>
<ol>
<li>
<p>Download MessagePack for mruby at the command prompt:</p>
<pre><code><span> git clone https</span><span>:</span><span>//github.com/suzukaze/mruby-msgpack.git</span></code></pre>
</li>
<li>
<p>Add config.gem line to <code>build_config.rb</code></p>
</li>
</ol>
<div><pre><span>MRuby</span>::<span>Build</span>.<span>new</span> <span>do</span> |<span>conf</span>|

  <span><span>#</span> ...(snip)...</span>
  conf.gem <span>:git</span> =&gt; <span><span>'</span>https://github.com/suzukaze/mruby-msgpack.git<span>'</span></span>
<span>end</span></pre></div>
<ol start="3">
<li>
<p>Test at the command prompt:</p>
<pre><code><span> rake test</span></code></pre>
</li>
<li>
<p>Build at the command prompt:</p>
<pre><code><span> rake</span></code></pre>
</li>
</ol>
<h6>
msgpack-ruby commit</h6>
<p>mruby-msgpack is based on <a href="https://github.com/msgpack/msgpack-ruby">msgpack-ruby</a>(<code>a7c2dc34ef69c9132167e38009baa8420c460c9b</code>)</p>
<h6>
Contributing</h6>
<p>I encourage you to contribute to MessagePack for mruby!</p>
<h6>
License</h6>
<p>Author : Jun Hiroe</p>
<p>Copyrigh : Copyright (c) 2013 Jun Hiroe</p>
<p>License : MIT License</p>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-jingweno-msgpack_rails"><h4><a href="https://github.com/jingweno/msgpack_rails" target="_blank">jingweno/msgpack_rails <span>https://github.com/jingweno/msgpack_rails</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Rails <a href="https://travis-ci.org/jingweno/msgpack_rails" rel="nofollow"><img src="https://camo.githubusercontent.com/df08185f44e63a7de541fc5fc107a7a0da0f943d/68747470733a2f2f7472617669732d63692e6f72672f6a696e6777656e6f2f6d73677061636b5f7261696c732e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jingweno/msgpack_rails.png?branch=master"></a>
</h5>
<p>The Rails way to serialize/deserialize objects with <a href="https://msgpack.org/" rel="nofollow">Message Pack</a>.
It implements the <a href="https://rubygems.org/gems/activesupport" rel="nofollow">ActiveSupport</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/encoding.rb">encoder</a> &amp; <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activesupport/message_pack/decoding.rb">decoder</a> and the <a href="https://rubygems.org/gems/activemodel" rel="nofollow">ActiveModel</a> <a href="https://github.com/jingweno/msgpack_rails/blob/master/lib/msgpack_rails/activemodel/serializers/message_pack.rb">serializer</a> for Message Pack.</p>
<h6>
Installation</h6>
<p>Add this line to your application's Gemfile:</p>
<pre><code><span>gem </span><span>'msgpack_rails'</span></code></pre>
<p>And then execute:</p>
<pre><code><span>$ bundle</span></code></pre>
<p>Or install it yourself as:</p>
<pre><code><span>$ gem install msgpack_rails</span></code></pre>
<h6>
Usage</h6>
<p><code>msgpack_rails</code> converts data type using <code>as_json</code> before feeding it into <a href="https://rubygems.org/gems/msgpack" rel="nofollow">msgpack</a>.
Here are a few examples:</p>
<pre><code><span>$ </span><span>ActiveSupport</span><span>::</span><span>MessagePack</span><span>.</span><span>encode</span><span>(:</span><span>a </span><span>=&gt;</span><span> </span><span>:</span><span>b</span><span>)</span><span>
</span><span>=&gt;</span><span> </span><span>"\x81\xA1a\xA1b"</span><span>

$ </span><span>ActiveSupport</span><span>::</span><span>MessagePack</span><span>.</span><span>encode</span><span>(</span><span>Time</span><span>.</span><span>now</span><span>)</span><span>
</span><span>=&gt;</span><span> </span><span>"\xB92013-09-11T10:40:39-07:00"</span><span>

$ </span><span>Time</span><span>.</span><span>now</span><span>.</span><span>as_msgpack
</span><span>=&gt;</span><span> </span><span>"2013-09-11T10:48:13-07:00"</span><span>

$ </span><span>Time</span><span>.</span><span>now</span><span>.</span><span>to_msgpack
</span><span>=&gt;</span><span> </span><span>"\xB92013-09-11T10:40:39-07:00"</span><span>

$ </span><span>ActiveSupport</span><span>::</span><span>MessagePack</span><span>.</span><span>decode </span><span>Time</span><span>.</span><span>now</span><span>.</span><span>to_msgpack
</span><span>=&gt;</span><span> </span><span>"2013-09-11T11:23:07-07:00"</span><span>

</span><span># After setting ActiveSupport.parse_msgpack_times to true</span><span>
$ </span><span>ActiveSupport</span><span>::</span><span>MessagePack</span><span>.</span><span>decode </span><span>Time</span><span>.</span><span>now</span><span>.</span><span>to_msgpack
</span><span>=&gt;</span><span> </span><span>Wed</span><span>,</span><span> </span><span>11</span><span> </span><span>Sep</span><span> </span><span>2013</span><span> </span><span>11</span><span>:</span><span>25</span><span>:</span><span>18</span><span> </span><span>-</span><span>0700</span></code></pre>
<p>You can also use it as part of <code>ActiveModel</code>, similar to <code>to_json</code>:</p>
<div><pre><span>class</span> <span>Contact</span>
  <span>include</span> <span>ActiveModel</span>::<span>Serializers</span>::<span>MessagePack</span>

  ...
<span>end</span>

<span>@contact</span> <span>=</span> <span>Contact</span>.<span>new</span>
<span>@contact</span>.name <span>=</span> <span><span>'</span>Owen Ou<span>'</span></span>
<span>@contact</span>.age <span>=</span> <span>28</span>
<span>@contact</span>.created_at <span>=</span> <span>Time</span>.utc(<span>2006</span>, <span>8</span>, <span>1</span>)
<span>@contact</span>.awesome <span>=</span> <span>true</span>
<span>@contact</span>.preferences <span>=</span> { <span><span>'</span>shows<span>'</span></span> =&gt; <span><span>'</span>anime<span>'</span></span> }

<span>@contact</span>.to_msgpack                <span><span>#</span> =&gt; msgpack output</span>
<span>@contact</span>.to_msgpack(<span>:root</span> =&gt; <span>true</span>) <span><span>#</span> =&gt; include root in msgpack output</span></pre></div>
<h6>
Contributing</h6>
<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
</article>
  </div>
        </div>
        
        <div id="qs-vsergeev-u-msgpack-python"><h4><a href="https://github.com/vsergeev/u-msgpack-python" target="_blank">vsergeev/u-msgpack-python <span>https://github.com/vsergeev/u-msgpack-python</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
u-msgpack-python <a href="https://travis-ci.org/vsergeev/u-msgpack-python" rel="nofollow"><img src="https://camo.githubusercontent.com/7549f0bf4ce5ab1b3f94d6f67efa9b5a3d652666/68747470733a2f2f7472617669732d63692e6f72672f76736572676565762f752d6d73677061636b2d707974686f6e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vsergeev/u-msgpack-python.svg?branch=master"></a> <a href="https://github.com/vsergeev/u-msgpack-python"><img src="https://camo.githubusercontent.com/ab84544eb0b5737894f415bf48e523b1100ab1e4/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f76736572676565762f752d6d73677061636b2d707974686f6e2e7376673f6d61784167653d37323030" alt="GitHub release" data-canonical-src="https://img.shields.io/github/release/vsergeev/u-msgpack-python.svg?maxAge=7200"></a> <a href="https://github.com/vsergeev/u-msgpack-python/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/890acbdcb87868b382af9a4b1fac507b9659d9bf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg"></a>
</h5>
<p>u-msgpack-python is a lightweight <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer module written in pure Python, compatible with both Python 2 and 3, as well CPython and PyPy implementations of Python. u-msgpack-python is fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>.</p>
<p>u-msgpack-python is currently distributed on PyPI: <a href="https://pypi.python.org/pypi/u-msgpack-python" rel="nofollow">https://pypi.python.org/pypi/u-msgpack-python</a> and as a single file: <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a></p>
<h6>
Installation</h6>
<p>With pip:</p>
<pre lang="text"><code><span>$ pip install u</span><span>-</span><span>msgpack</span><span>-</span><span>python</span></code></pre>
<p>With easy_install:</p>
<pre lang="text"><code><span>$ easy_install u</span><span>-</span><span>msgpack</span><span>-</span><span>python</span></code></pre>
<p>or simply drop <a href="https://raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py">umsgpack.py</a> into your project!</p>
<pre lang="text"><code><span>$ wget https</span><span>:</span><span>//raw.github.com/vsergeev/u-msgpack-python/master/umsgpack.py</span></code></pre>
<h6>
Examples</h6>
<p>Basic Example:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> <span>import</span> umsgpack
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.packb({<span><span>u</span><span>"</span>compact<span>"</span></span>: <span>True</span>, <span><span>u</span><span>"</span>schema<span>"</span></span>: <span>0</span>})
<span><span>b</span><span>'</span><span>\x82\xa7</span>compact<span>\xc3\xa6</span>schema<span>\x00</span><span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.unpackb(_)
{<span><span>u</span><span>'</span>compact<span>'</span></span>: <span>True</span>, <span><span>u</span><span>'</span>schema<span>'</span></span>: <span>0</span>}
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<p>A more complicated example:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> umsgpack.packb(
<span>...</span>     [<span>1</span>, <span>True</span>, <span>False</span>, <span><span>0x</span>ffffffff</span>, {<span><span>u</span><span>"</span>foo<span>"</span></span>: <span><span>b</span><span>"</span><span>\x80\x01\x02</span><span>"</span></span>,
<span>...</span>      <span><span>u</span><span>"</span>bar<span>"</span></span>: [<span>1</span>,<span>2</span>,<span>3</span>, {<span><span>u</span><span>"</span>a<span>"</span></span>: [<span>1</span>,<span>2</span>,<span>3</span>,{}]}]}, <span>-</span><span>1</span>, <span>2.12345</span>] )
<span><span>b</span><span>'</span><span>\x97\x01\xc3\xc2\xce\xff\xff\xff\xff\x82\xa3</span>foo<span>\xc4\x03\x80\x01</span><span>\</span></span>
<span><span>\x02\xa3</span>bar<span>\x94\x01\x02\x03\x81\xa1</span>a<span>\x94\x01\x02\x03\x80\xff\xcb</span><span>\</span></span>
<span>@<span>\x00\xfc\xd3</span>Z<span>\x85\x87\x94</span><span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.unpackb(_)
[<span>1</span>, <span>True</span>, <span>False</span>, <span>4294967295</span>, {<span><span>u</span><span>'</span>foo<span>'</span></span>: <span><span>b</span><span>'</span><span>\x80\x01\x02</span><span>'</span></span>, \
 <span><span>u</span><span>'</span>bar<span>'</span></span>: [<span>1</span>, <span>2</span>, <span>3</span>, {<span><span>u</span><span>'</span>a<span>'</span></span>: [<span>1</span>, <span>2</span>, <span>3</span>, {}]}]}, <span>-</span><span>1</span>, <span>2.12345</span>]
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<p>Streaming serialization with file-like objects:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> f <span>=</span> <span>open</span>(<span><span>'</span>test.bin<span>'</span></span>, <span><span>'</span>wb<span>'</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.pack({<span><span>u</span><span>"</span>compact<span>"</span></span>: <span>True</span>, <span><span>u</span><span>"</span>schema<span>"</span></span>: <span>0</span>}, f)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.pack([<span>1</span>,<span>2</span>,<span>3</span>], f)
<span>&gt;&gt;</span><span>&gt;</span> f.close()
<span>&gt;&gt;</span><span>&gt;</span> 
<span>&gt;&gt;</span><span>&gt;</span> f <span>=</span> <span>open</span>(<span><span>'</span>test.bin<span>'</span></span>, <span><span>'</span>rb<span>'</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.unpack(f)
{<span><span>u</span><span>'</span>compact<span>'</span></span>: <span>True</span>, <span><span>u</span><span>'</span>schema<span>'</span></span>: <span>0</span>}
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.unpack(f)
[<span>1</span>, <span>2</span>, <span>3</span>]
<span>&gt;&gt;</span><span>&gt;</span> f.close()
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<p>Serializing and deserializing a raw Ext type:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> <span><span>#</span> Create an Ext object with type 0x05 and data b"\x01\x02\x03"</span>
<span>...</span> foo <span>=</span> umsgpack.Ext(<span><span>0x</span>05</span>, <span><span>b</span><span>"</span><span>\x01\x02\x03</span><span>"</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.packb({<span><span>u</span><span>"</span>stuff<span>"</span></span>: foo, <span><span>u</span><span>"</span>awesome<span>"</span></span>: <span>True</span>})
<span><span>b</span><span>'</span><span>\x82\xa5</span>stuff<span>\xc7\x03\x05\x01\x02\x03\xa7</span>awesome<span>\xc3</span><span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> 
<span>&gt;&gt;</span><span>&gt;</span> bar <span>=</span> umsgpack.unpackb(_)
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(bar[<span><span>'</span>stuff<span>'</span></span>])
Ext Object (Type: <span><span>0x</span>05</span>, Data: <span><span>0x</span>01</span> <span><span>0x</span>02</span> <span><span>0x</span>03</span>)
<span>&gt;&gt;</span><span>&gt;</span> bar[<span><span>'</span>stuff<span>'</span></span>].type
<span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> bar[<span><span>'</span>stuff<span>'</span></span>].data
<span><span>b</span><span>'</span><span>\x01\x02\x03</span><span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<p>Serializing and deserializing application-defined types with Ext handlers:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> umsgpack.packb([<span>complex</span>(<span>1</span>,<span>2</span>), decimal.Decimal(<span><span>"</span>0.31<span>"</span></span>)],
<span>...</span>  <span>ext_handlers</span> <span>=</span> {
<span>...</span>   <span>complex</span>: <span>lambda</span> <span>obj</span>:
<span>...</span>     umsgpack.Ext(<span><span>0x</span>30</span>, struct.pack(<span><span>"</span>ff<span>"</span></span>, obj.real, obj.imag)),
<span>...</span>   decimal.Decimal: <span>lambda</span> <span>obj</span>:
<span>...</span>     umsgpack.Ext(<span><span>0x</span>40</span>, <span>str</span>(obj).encode()),
<span>...</span> })
<span><span>b</span><span>'</span><span>\x92\xd7</span>0<span>\x00\x00\x80</span>?<span>\x00\x00\x00</span>@<span>\xd6</span>@0.31<span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.unpackb(_,
<span>...</span>  <span>ext_handlers</span> <span>=</span> {
<span>...</span>   <span><span>0x</span>30</span>: <span>lambda</span> <span>ext</span>:
<span>...</span>     <span>complex</span>(<span>*</span>struct.unpack(<span><span>"</span>ff<span>"</span></span>, ext.data)),
<span>...</span>   <span><span>0x</span>40</span>: <span>lambda</span> <span>ext</span>:
<span>...</span>     decimal.Decimal(ext.data.decode()),
<span>...</span> })
[(<span>1</span><span>+</span><span>2<span>j</span></span>), Decimal(<span><span>'</span>0.31<span>'</span></span>)]
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<p>Python standard library style names <code>dump</code>, <code>dumps</code>, <code>load</code>, <code>loads</code> are also
available:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> umsgpack.dumps({<span><span>u</span><span>"</span>compact<span>"</span></span>: <span>True</span>, <span><span>u</span><span>"</span>schema<span>"</span></span>: <span>0</span>})
<span><span>b</span><span>'</span><span>\x82\xa7</span>compact<span>\xc3\xa6</span>schema<span>\x00</span><span>'</span></span>
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.loads(_)
{<span><span>u</span><span>'</span>compact<span>'</span></span>: <span>True</span>, <span><span>u</span><span>'</span>schema<span>'</span></span>: <span>0</span>}
<span>&gt;&gt;</span><span>&gt;</span> 
<span>&gt;&gt;</span><span>&gt;</span> f <span>=</span> <span>open</span>(<span><span>'</span>test.bin<span>'</span></span>, <span><span>'</span>wb<span>'</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.dump({<span><span>u</span><span>"</span>compact<span>"</span></span>: <span>True</span>, <span><span>u</span><span>"</span>schema<span>"</span></span>: <span>0</span>}, f)
<span>&gt;&gt;</span><span>&gt;</span> f.close()
<span>&gt;&gt;</span><span>&gt;</span> 
<span>&gt;&gt;</span><span>&gt;</span> f <span>=</span> <span>open</span>(<span><span>'</span>test.bin<span>'</span></span>, <span><span>'</span>rb<span>'</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> umsgpack.load(f)
{<span><span>u</span><span>'</span>compact<span>'</span></span>: <span>True</span>, <span><span>u</span><span>'</span>schema<span>'</span></span>: <span>0</span>}
<span>&gt;&gt;</span><span>&gt;</span> </pre></div>
<h6>
More Information</h6>
<p>See the <a href="https://github.com/vsergeev/u-msgpack-python">project page</a> for more information on options, exceptions, behavior, and testing.</p>
<h6>
License</h6>
<p>u-msgpack-python is MIT licensed. See the included <code>LICENSE</code> file for more details.</p>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-JuliaIO-MsgPack-jl"><h4><a href="https://github.com/JuliaIO/MsgPack.jl" target="_blank">JuliaIO/MsgPack.jl <span>https://github.com/JuliaIO/MsgPack.jl</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MsgPack</h5>
<p><a href="https://travis-ci.org/JuliaIO/MsgPack.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/c5b85dac4c466d73253bab04ef46d3bfb0525b0d/68747470733a2f2f7472617669732d63692e6f72672f4a756c6961494f2f4d73675061636b2e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/JuliaIO/MsgPack.jl.svg?branch=master"></a></p>
<p><a href="https://ci.appveyor.com/project/kmsquire/msgpack-jl/branch/master" rel="nofollow"><img src="https://camo.githubusercontent.com/dc922b44a62668ae18df1940278ba4b14b80d086/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f393371626b626e716830666e397172342f6272616e63682f6d61737465723f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/93qbkbnqh0fn9qr4/branch/master?svg=true"></a></p>
<p><a href="https://coveralls.io/github/JuliaIO/MsgPack.jl?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/83abfd00586d732db8f5044428d05c521c7651c0/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f4a756c6961494f2f4d73675061636b2e6a6c2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/JuliaIO/MsgPack.jl/badge.svg?branch=master&amp;service=github"></a></p>
<p><a href="https://codecov.io/github/JuliaIO/MsgPack.jl?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/eb41334663dd0844ba6d9ef2c7fea8e83caca9f2/687474703a2f2f636f6465636f762e696f2f6769746875622f4a756c6961494f2f4d73675061636b2e6a6c2f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/JuliaIO/MsgPack.jl/coverage.svg?branch=master"></a></p>
<p>Provides basic support for the <a href="https://msgpack.org/" rel="nofollow">msgpack</a> format.</p>
<pre><code><span>julia</span><span>&gt;</span><span> </span><span>import</span><span> </span><span>MsgPack</span><span>

julia</span><span>&gt;</span><span> </span><span>MsgPack</span><span>.</span><span>pack</span><span>(</span><span>"hi"</span><span>)</span><span>
</span><span>3</span><span>-</span><span>element </span><span>Array</span><span>{</span><span>Uint8</span><span>,</span><span>1</span><span>}:</span><span>
 </span><span>0xa2</span><span>
 </span><span>0x68</span><span>
 </span><span>0x69</span><span>

julia</span><span>&gt;</span><span> a </span><span>=</span><span> </span><span>MsgPack</span><span>.</span><span>pack</span><span>([</span><span>1</span><span>,</span><span>2</span><span>,</span><span>"hi"</span><span>])</span><span>
</span><span>6</span><span>-</span><span>element </span><span>Array</span><span>{</span><span>Uint8</span><span>,</span><span>1</span><span>}:</span><span>
 </span><span>0x93</span><span>
 </span><span>0x01</span><span>
 </span><span>0x02</span><span>
 </span><span>0xa2</span><span>
 </span><span>0x68</span><span>
 </span><span>0x69</span><span>

julia</span><span>&gt;</span><span> </span><span>MsgPack</span><span>.</span><span>unpack</span><span>(</span><span>MsgPack</span><span>.</span><span>pack</span><span>(</span><span>4.5</span><span>))</span><span>
</span><span>4.5</span><span>

julia</span><span>&gt;</span><span> f </span><span>=</span><span> open</span><span>(</span><span>"in.mp"</span><span>)</span><span>
julia</span><span>&gt;</span><span> </span><span>MsgPack</span><span>.</span><span>unpack</span><span>(</span><span>f</span><span>)</span><span>
</span><span>"hello"</span><span>

julia</span><span>&gt;</span><span> f2 </span><span>=</span><span> open</span><span>(</span><span>"out.mp"</span><span>,</span><span> </span><span>"w"</span><span>)</span><span>
julia</span><span>&gt;</span><span> </span><span>MsgPack</span><span>.</span><span>pack</span><span>(</span><span>f2</span><span>,</span><span> </span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>"hi"</span><span>])</span><span>


</span></code></pre>
<p>NOTE: The standard method for encoding integers in msgpack is to use the most compact representation possible, and to encode negative integers as signed ints and non-negative numbers as unsigned ints.</p>
<p>For compatibility with other implementations, I'm following this convention.  On the unpacking side, every integer type becomes an Int64 in Julia, unless it doesn't fit (ie. values greater than 2^63 are unpacked as Uint64).</p>
<p>I might change this at some point, and/or provide a way to control the unpacked types.</p>
<h7>
The Extension Type</h7>
<p>The MsgPack spec <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#formats-ext">defines</a> the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#types-extension-type">extension type</a> to be a tuple of <code>(typecode, bytearray)</code> where <code>typecode</code> is an application-specific identifier for the data in <code>bytearray</code>. MsgPack.jl provides support for the extension type through the <code>Ext</code> immutable.</p>
<p>It is defined like so</p>
<div><pre><span>struct</span> Ext
    typecode<span>::</span><span>Int8</span>
    data<span>::</span><span>Vector{Uint8}</span>
<span>end</span></pre></div>
<p>and used like this</p>
<div><pre>julia<span>&gt;</span> a <span>=</span> [<span>0x34</span>, <span>0xff</span>, <span>0x76</span>, <span>0x22</span>, <span>0xd3</span>, <span>0xab</span>]
<span>6</span><span>-</span>element Array{UInt8,<span>1</span>}<span>:</span>
 <span>0x34</span>
 <span>0xff</span>
 <span>0x76</span>
 <span>0x22</span>
 <span>0xd3</span>
 <span>0xab</span>

julia<span>&gt;</span> b <span>=</span> <span>Ext</span>(<span>22</span>, a)
MsgPack<span>.</span><span>Ext</span>(<span>22</span>,UInt8[<span>0x34</span>,<span>0xff</span>,<span>0x76</span>,<span>0x22</span>,<span>0xd3</span>,<span>0xab</span>])

julia<span>&gt;</span> p <span>=</span> <span>pack</span>(b)
<span>9</span><span>-</span>element Array{UInt8,<span>1</span>}<span>:</span>
 <span>0xc7</span>
 <span>0x06</span>
 <span>0x16</span>
 <span>0x34</span>
 <span>0xff</span>
 <span>0x76</span>
 <span>0x22</span>
 <span>0xd3</span>
 <span>0xab</span>

julia<span>&gt;</span> c <span>=</span> <span>unpack</span>(p)
MsgPack<span>.</span><span>Ext</span>(<span>22</span>,UInt8[<span>0x34</span>,<span>0xff</span>,<span>0x76</span>,<span>0x22</span>,<span>0xd3</span>,<span>0xab</span>])

julia<span>&gt;</span> c <span>==</span> b
<span>true</span></pre></div>
<p>MsgPack reserves typecodes in the range <code>[-128, -1]</code> for future types specified by the MsgPack spec. MsgPack.jl enforces this when creating an <code>Ext</code> but if you are packing an implementation defined extension type (currently there are none) you can pass <code>impltype=true</code>.</p>
<div><pre>julia<span>&gt;</span> <span>Ext</span>(<span>-</span><span>43</span>, Uint8[<span>1</span>, <span>5</span>, <span>3</span>, <span>9</span>])
ERROR<span>:</span> MsgPack Ext typecode <span>-</span><span>128</span> through <span>-</span><span>1</span> reserved by implementation
 <span>in</span> call at <span>/</span>Users<span>/</span>sean<span>/</span><span>.</span>julia<span>/</span>v0<span>.4</span><span>/</span>MsgPack<span>/</span>src<span>/</span>MsgPack<span>.</span>jl<span>:</span><span>48</span>

julia<span>&gt;</span> <span>Ext</span>(<span>-</span><span>43</span>, Uint8[<span>1</span>, <span>5</span>, <span>3</span>, <span>9</span>], impltype<span>=</span><span>true</span>)
MsgPack<span>.</span><span>Ext</span>(<span>-</span><span>43</span>,UInt8[<span>0x01</span>,<span>0x05</span>,<span>0x03</span>,<span>0x09</span>])</pre></div>
<h8>
Serialization</h8>
<p>MsgPack.jl also defines the <code>extserialize</code> and <code>extdeserialize</code> convenience functions. These functions can turn an arbitrary object into an <code>Ext</code> and vice-versa.</p>
<div><pre>julia<span>&gt;</span> <span>mutable struct</span> Point{T}
        x<span>::</span><span>T</span>
        y<span>::</span><span>T</span>
       <span>end</span>

julia<span>&gt;</span> r <span>=</span> <span>Point</span>(<span>2.5</span>, <span>7.8</span>)
<span>Point</span><span>{Float64}</span>(<span>2.5</span>,<span>7.8</span>)

julia<span>&gt;</span> e <span>=</span> MsgPack<span>.</span><span>extserialize</span>(<span>123</span>, r)
MsgPack<span>.</span><span>Ext</span>(<span>123</span>,UInt8[<span>0x11</span>,<span>0x01</span>,<span>0x02</span>,<span>0x05</span>,<span>0x50</span>,<span>0x6f</span>,<span>0x69</span>,<span>0x6e</span>,<span>0x74</span>,<span>0x23</span>    <span>0x40</span>,<span>0x0e</span>,<span>0x33</span>,<span>0x33</span>,<span>0x33</span>,<span>0x33</span>,<span>0x33</span>,<span>0x33</span>,<span>0x1f</span>,<span>0x40</span>])

julia<span>&gt;</span> s <span>=</span> MsgPack<span>.</span><span>extdeserialize</span>(e)
(<span>123</span>,<span>Point</span><span>{Float64}</span>(<span>2.5</span>,<span>7.8</span>))

julia<span>&gt;</span> s[<span>2</span>]
<span>Point</span><span>{Float64}</span>(<span>2.5</span>,<span>7.8</span>)

julia<span>&gt;</span> r
<span>Point</span><span>{Float64}</span>(<span>2.5</span>,<span>7.8</span>)</pre></div>
<p>Since these functions use <a href="http://docs.julialang.org/en/latest/stdlib/base/#Base.serialize" rel="nofollow"><code>serialize</code></a> under the hood they are subject to the following caveat.</p>
<blockquote>
<p>In general, this process will not work if the reading and writing are done by
different versions of Julia, or an instance of Julia with a different system
image.</p>
</blockquote>
</article>
  </div>
        </div>
        
        <div id="qs-edma2-clojure-msgpack"><h4><a href="https://github.com/edma2/clojure-msgpack" target="_blank">edma2/clojure-msgpack <span>https://github.com/edma2/clojure-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
clojure-msgpack</h5>
<p>clojure-msgpack is a lightweight and simple library for converting
between native Clojure data structures and MessagePack byte formats.
clojure-msgpack only depends on Clojure itself; it has no third-party
dependencies.</p>
<h6>
Installation</h6>
<p><a href="https://clojars.org/clojure-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/bd3244c34d2088c6f22bf3c8cbdfc0fc38ee986a/687474703a2f2f636c6f6a6172732e6f72672f636c6f6a7572652d6d73677061636b2f6c61746573742d76657273696f6e2e737667" alt="Clojars Project" data-canonical-src="http://clojars.org/clojure-msgpack/latest-version.svg"></a>
<a href="https://travis-ci.org/edma2/clojure-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/1bc6fc12bcbde68e4bfd66192eddce3b02b2c578/68747470733a2f2f7472617669732d63692e6f72672f65646d61322f636c6f6a7572652d6d73677061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/edma2/clojure-msgpack.svg?branch=master"></a></p>
<h6>
Usage</h6>
<h7>
Basic</h7>
<ul>
<li>
<code>pack</code>: Serialize object as a sequence of java.lang.Bytes.</li>
<li>
<code>unpack</code> Deserialize bytes as a Clojure object.</li>
</ul>
<div><pre>(<span>require</span> '[msgpack.core <span>:as</span> msg])
(<span>require</span> 'msgpack.clojure-extensions)

(<span>msg/pack</span> {<span>:compact</span> <span>true</span> <span>:schema</span> <span>0</span>})
<span><span>;</span> =&gt; #&lt;byte[] [B@60280b2e&gt;</span>

(<span>msg/unpack</span> (<span>msg/pack</span> {<span>:compact</span> <span>true</span> <span>:schema</span> <span>0</span>}))
<span><span>;</span> =&gt; {:schema 0, :compact true}</span></pre></div>
<h7>
Streaming</h7>
<p><code>clojure-msgpack</code> provides a streaming API for situations where it is more
convenient or efficient to work with byte streams instead of fixed byte arrays
(e.g. size of object is not known ahead of time).</p>
<p>The streaming counterpart to <code>msgpack.core/pack</code> is <code>msgpack.core/pack-stream</code>
which returns nil and accepts either
<a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html" rel="nofollow">java.io.OutputStream</a>
or
<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html" rel="nofollow">java.io.DataOutput</a>
as an additional argument.</p>
<p><code>msgpack.core/unpack</code> is in "streaming mode" when the argument is of type
<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html" rel="nofollow">java.io.DataInput</a>
or
<a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html" rel="nofollow">java.io.InputStream</a>.</p>
<div><pre>(<span>use</span> 'clojure.java.io)

(<span>with-open</span> [s (<span>output-stream</span> <span><span>"</span>test.dat<span>"</span></span>)]
  (<span>msg/pack-stream</span> {<span>:compact</span> <span>true</span> <span>:schema</span> <span>0</span>} s))

(<span>with-open</span> [s (<span>input-stream</span> <span><span>"</span>test.dat<span>"</span></span>)] (<span>msg/unpack</span> s))
<span><span>;</span> =&gt; {:schema 0, :compact true}</span></pre></div>
<h7>
Core types</h7>
<table>
<thead>
<tr>
<th>Clojure</th>
<th>MessagePack</th>
</tr>
</thead>
<tbody>
<tr>
<td>nil</td>
<td>Nil</td>
</tr>
<tr>
<td>java.lang.Boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>java.lang.Byte</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Short</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Integer</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Long</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.BigInteger</td>
<td>Integer</td>
</tr>
<tr>
<td>clojure.lang.BigInt</td>
<td>Integer</td>
</tr>
<tr>
<td>java.lang.Float</td>
<td>Float</td>
</tr>
<tr>
<td>java.lang.Double</td>
<td>Float</td>
</tr>
<tr>
<td>java.math.BigDecimal</td>
<td>Float</td>
</tr>
<tr>
<td>java.lang.String</td>
<td>String</td>
</tr>
<tr>
<td>clojure.lang.Sequential</td>
<td>Array</td>
</tr>
<tr>
<td>clojure.lang.IPersistentMap</td>
<td>Map</td>
</tr>
<tr>
<td>msgpack.core.Ext</td>
<td>Extended</td>
</tr>
</tbody>
</table>
<p>Serializing a value of unrecognized type will fail with <code>IllegalArgumentException</code>.  See <a href="#application-types">Application types</a> if you want to register your own types.</p>
<h7>
Clojure types</h7>
<p>Some native Clojure types don't have an obvious MessagePack counterpart. We can
serialize them as Extended types. To enable automatic conversion of these
types, load the <code>clojure-extensions</code> library.</p>
<table>
<thead>
<tr>
<th>Clojure</th>
<th>MessagePack</th>
</tr>
</thead>
<tbody>
<tr>
<td>clojure.lang.Keyword</td>
<td>Extended (type = 3)</td>
</tr>
<tr>
<td>clojure.lang.Symbol</td>
<td>Extended (type = 4)</td>
</tr>
<tr>
<td>java.lang.Character</td>
<td>Extended (type = 5)</td>
</tr>
<tr>
<td>clojure.lang.Ratio</td>
<td>Extended (type = 6)</td>
</tr>
<tr>
<td>clojure.lang.IPersistentSet</td>
<td>Extended (type = 7)</td>
</tr>
</tbody>
</table>
<p>With <code>msgpack.clojure-extensions</code>:</p>
<div><pre>(<span>require</span> 'msgpack.clojure-extensions)
(<span>msg/pack</span> <span>:hello</span>)
<span><span>;</span> =&gt; #&lt;byte[] [B@a8c55bf&gt;</span></pre></div>
<p>Without <code>msgpack.clojure-extensions</code>:</p>
<div><pre>(<span>msg/pack</span> <span>:hello</span>)
<span><span>;</span> =&gt; IllegalArgumentException No implementation of method: :pack-stream of</span>
<span><span>;</span> protocol: #'msgpack.core/Packable found for class: clojure.lang.Keyword</span>
<span><span>;</span> clojure.core/-cache-protocol-fn (core _deftype.clj:544)</span></pre></div>
<h7>
<a name="user-content-application-types">Application types</a>
</h7>
<p>You can also define your own Extended types with <code>extend-msgpack</code>.</p>
<div><pre>(<span>require</span> '[msgpack.macros <span>:refer</span> [extend-msgpack]])

(<span>defrecord</span> <span>Person</span> [name])

(<span>extend-msgpack</span>
  Person
  <span>100</span>
  [p] (<span>.getBytes</span> (<span>:name</span> p))
  [bytes] (<span>-&gt;Person</span> (<span>String.</span> bytes)))

(<span>msg/unpack</span> (<span>msg/pack</span> [(<span>-&gt;Person</span> <span><span>"</span>bob<span>"</span></span>) <span>5</span> <span><span>"</span>test<span>"</span></span>]))
<span><span>;</span> =&gt; (#user.Person{:name "bob"} 5 "test")</span></pre></div>
<h7>
Options</h7>
<p>All pack and unpack functions take an optional map of options:</p>
<ul>
<li>
<p><code>:compatibility-mode</code>
Serialize/deserialize strings and bytes using the raw-type defined here:
<a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">https://github.com/msgpack/msgpack/blob/master/spec-old.md</a></p>
<p>Note: No error is thrown if an unpacked value is reserved under the old spec
but defined under the new spec. We always deserialize something if we can
regardless of <code>compatibility-mode</code>.</p>
</li>
</ul>
<div><pre>(<span>msg/pack</span> (<span>byte-array</span> (<span>byte</span> <span>9</span>)) {<span>:compatibility-mode</span> <span>true</span>})</pre></div>
<h6>
License</h6>
<p>clojure-msgpack is MIT licensed. See the included LICENSE file for more details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-tkob-mlmsgpack"><h4><a href="https://github.com/tkob/mlmsgpack" target="_blank">tkob/mlmsgpack <span>https://github.com/tkob/mlmsgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
ML-MessagePack</h5>
<p>MessagePack implementation for Standard ML (SML)</p>
<h6>
Features</h6>
<ul>
<li>Portable: Depends only on the required components of the SML Basis Library specification.</li>
<li>Composable: Composable combinators for encoding and decoding.</li>
</ul>
<h6>
Usage</h6>
<h8>
MLton and MLKit</h8>
<p>Include mlmsgpack.mlb in your MLB file.</p>
<h8>
Poly/ML</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8>
SML/NJ</h8>
<p>Use mlmsgpack.cm.</p>
<h8>
Moscow ML</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>large.sml</li>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<p>Makefile.mosml is also provided.</p>
<h8>
HaMLet</h8>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-fail.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h8>
Alice ML</h8>
<p>Makefile.alice is provided.</p>
<pre><code><span>make </span><span>-</span><span>f </span><span>Makefile</span><span>.</span><span>alice
alicerun mlmsgpack</span><span>-</span><span>test</span></code></pre>
<h8>
SML#</h8>
<p>For separate compilation, .smi files are provided. Require mlmsgpack.smi from your .smi file.</p>
<p>From the interactive shell, use .sml files in the following order.</p>
<ul>
<li>mlmsgpack-aux.sml</li>
<li>realprinter-default.sml</li>
<li>mlmsgpack.sml</li>
</ul>
<h6>
Tutorial</h6>
<p>See TUTORIAL.md.</p>
<h6>
Known Problems</h6>
<p>Our recommendation is MLton, MLKit, Poly/ML and SML#(&gt;=2.0.0) as all tests passed on them.
SML/NJ and Moscow ML are fine if you don't use real values.</p>
<h8>
SML/NJ</h8>
<p>Packing real values fail or produces imprecise results in some cases.</p>
<h8>
Moscow ML</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.</p>
<h8>
HaMLet</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Some functions are very slow, although they work properly. (We tested HaMLet compiled with MLton.)</p>
<h8>
Alice ML</h8>
<p>Packing real values is not supported, since some components of the SML Basis Library are not provided.
Also, some unit tests fail.</p>
<h8>
SML#</h8>
<p>Most functions do not work properly because of bugs of SML# prior to version 2.0.0.</p>
<h6>
See Also</h6>
<p>There already exists another MessagePack implemenatation for SML,
called MsgPack-SML, which is targeted for MLton.</p>
<p><a href="https://msgpacksml.codeplex.com/" rel="nofollow">https://msgpacksml.codeplex.com/</a></p>
<p>ML-MessagePack is written from scratch and not a fork of MsgPack-SML.</p>
<p>For information on MessagePack, see:</p>
<p><a href="https://msgpack.org/" rel="nofollow">http://msgpack.org/</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-camgunz-cmp"><h4><a href="https://github.com/camgunz/cmp" target="_blank">camgunz/cmp <span>https://github.com/camgunz/cmp</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
CMP</h5>
<p><a href="https://travis-ci.org/camgunz/cmp" rel="nofollow"><img src="https://camo.githubusercontent.com/97f858756020e3e55899a30e812e643aeb7e86ef/68747470733a2f2f7472617669732d63692e6f72672f63616d67756e7a2f636d702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/camgunz/cmp.svg?branch=master"></a> <a href="https://coveralls.io/github/camgunz/cmp?branch=develop" rel="nofollow"><img src="https://camo.githubusercontent.com/a630624d6ec4ab93afdea8815a23fd5ce920808d/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f63616d67756e7a2f636d702f62616467652e7376673f6272616e63683d646576656c6f70" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/camgunz/cmp/badge.svg?branch=develop"></a></p>
<p>CMP is a C implementation of the MessagePack serialization format.  It
currently implements version 5 of the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack
Spec</a>.</p>
<p>CMP's goal is to be lightweight and straightforward, forcing nothing on the
programmer.</p>
<h6>
License</h6>
<p>While I'm a big believer in the GPL, I license CMP under the MIT license.</p>
<h6>
Example Usage</h6>
<p>The following examples use a file as the backend, and are modeled after the
examples included with the msgpack-c project.</p>
<div><pre>#<span>include</span> <span><span>&lt;</span>stdbool.h<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>stdint.h<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>stdio.h<span>&gt;</span></span>
#<span>include</span> <span><span>&lt;</span>stdlib.h<span>&gt;</span></span>

#<span>include</span> <span><span>"</span>cmp.h<span>"</span></span>

<span>static</span> <span>bool</span> <span>read_bytes</span>(<span>void</span> *data, <span>size_t</span> sz, <span>FILE</span> *fh) {
    <span>return</span> <span>fread</span>(data, <span>sizeof</span>(<span>uint8_t</span>), sz, fh) == (sz * <span>sizeof</span>(<span>uint8_t</span>));
}

<span>static</span> <span>bool</span> <span>file_reader</span>(<span>cmp_ctx_t</span> *ctx, <span>void</span> *data, <span>size_t</span> limit) {
    <span>return</span> <span>read_bytes</span>(data, limit, (<span>FILE</span> *)ctx-&gt;<span>buf</span>);
}

<span>static</span> <span>bool</span> <span>file_skipper</span>(<span>cmp_ctx_t</span> *ctx, <span>size_t</span> count) {
    <span>return</span> <span>fseek</span>((<span>FILE</span> *)ctx-&gt;<span>buf</span>, count, SEEK_CUR);
}

<span>static</span> <span>size_t</span> <span>file_writer</span>(<span>cmp_ctx_t</span> *ctx, <span>const</span> <span>void</span> *data, <span>size_t</span> count) {
    <span>return</span> <span>fwrite</span>(data, <span>sizeof</span>(<span>uint8_t</span>), count, (<span>FILE</span> *)ctx-&gt;<span>buf</span>);
}

<span>void</span> <span>error_and_exit</span>(<span>const</span> <span>char</span> *msg) {
    <span>fprintf</span>(stderr, <span><span>"</span><span>%s</span><span>\n\n</span><span>"</span></span>, msg);
    <span>exit</span>(EXIT_FAILURE);
}

<span>int</span> <span>main</span>(<span>void</span>) {
    <span>FILE</span> *fh = <span>NULL</span>;
    <span>cmp_ctx_t</span> cmp;
    <span>uint32_t</span> array_size = <span>0</span>;
    <span>uint32_t</span> str_size = <span>0</span>;
    <span>char</span> hello[<span>6</span>] = {<span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>};
    <span>char</span> message_pack[<span>12</span>] = {<span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>};

    fh = <span>fopen</span>(<span><span>"</span>cmp_data.dat<span>"</span></span>, <span><span>"</span>w+b<span>"</span></span>);

    <span>if</span> (fh == <span>NULL</span>)
        <span>error_and_exit</span>(<span><span>"</span>Error opening data.dat<span>"</span></span>);

    <span>cmp_init</span>(&amp;cmp, fh, file_reader, file_skipper, file_writer);

    <span>if</span> (!<span>cmp_write_array</span>(&amp;cmp, <span>2</span>))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span>if</span> (!<span>cmp_write_str</span>(&amp;cmp, <span><span>"</span>Hello<span>"</span></span>, <span>5</span>))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span>if</span> (!<span>cmp_write_str</span>(&amp;cmp, <span><span>"</span>MessagePack<span>"</span></span>, <span>11</span>))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span>rewind</span>(fh);

    <span>if</span> (!<span>cmp_read_array</span>(&amp;cmp, &amp;array_size))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span><span>/*</span> You can read the str byte size and then read str bytes... <span>*/</span></span>

    <span>if</span> (!<span>cmp_read_str_size</span>(&amp;cmp, &amp;str_size))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span>if</span> (str_size &gt; (<span>sizeof</span>(hello) - <span>1</span>))
        <span>error_and_exit</span>(<span><span>"</span>Packed 'hello' length too long<span>\n</span><span>"</span></span>);

    <span>if</span> (!<span>read_bytes</span>(hello, str_size, fh))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span><span>/*</span></span>
<span>     * ...or you can set the maximum number of bytes to read and do it all in</span>
<span>     * one call</span>
<span>     <span>*/</span></span>

    str_size = <span>sizeof</span>(message_pack);
    <span>if</span> (!<span>cmp_read_str</span>(&amp;cmp, message_pack, &amp;str_size))
        <span>error_and_exit</span>(<span>cmp_strerror</span>(&amp;cmp));

    <span>printf</span>(<span><span>"</span>Array Length: <span>%u</span>.<span>\n</span><span>"</span></span>, array_size);
    <span>printf</span>(<span><span>"</span>[<span>\"</span><span>%s</span><span>\"</span>, <span>\"</span><span>%s</span><span>\"</span>]<span>\n</span><span>"</span></span>, hello, message_pack);

    <span>fclose</span>(fh);

    <span>return</span> EXIT_SUCCESS;
}
</pre></div>
<h6>
Advanced Usage</h6>
<p>See the <code>examples</code> folder.</p>
<h6>
Fast, Lightweight, Flexible, and Robust</h6>
<p>CMP uses no internal buffers; conversions, encoding and decoding are done on
the fly.</p>
<p>CMP's source and header file together are ~4k LOC.</p>
<p>CMP makes no heap allocations.</p>
<p>CMP uses standardized types rather than declaring its own, and it depends only
on <code>stdbool.h</code>, <code>stdint.h</code> and <code>string.h</code>.</p>
<p>CMP is written using C89 (ANSI C), aside, of course, from its use of
fixed-width integer types and <code>bool</code>.</p>
<p>On the other hand, CMP's test suite requires C99.</p>
<p>CMP only requires the programmer supply a read function, a write function, and
an optional skip function.  In this way, the programmer can use CMP on memory,
files, sockets, etc.</p>
<p>CMP is portable.  It uses fixed-width integer types, and checks the endianness
of the machine at runtime before swapping bytes (MessagePack is big-endian).</p>
<p>CMP provides a fairly comprehensive error reporting mechanism modeled after
<code>errno</code> and <code>strerror</code>.</p>
<p>CMP is thread aware; while contexts cannot be shared between threads, each
thread may use its own context freely.</p>
<p>CMP is tested using the MessagePack test suite as well as a large set of custom
test cases.  Its small test program is compiled with clang using <code>-Wall -Werror -Wextra ...</code> along with several other flags, and generates no compilation
errors in either clang or GCC.</p>
<p>CMP's source is written as readably as possible, using explicit, descriptive
variable names and a consistent, clear style.</p>
<p>CMP's source is written to be as secure as possible.  Its testing suite checks
for invalid values, and data is always treated as suspect before it passes
validation.</p>
<p>CMP's API is designed to be clear, convenient and unsurprising.  Strings are
null-terminated, binary data is not, error codes are clear, and so on.</p>
<p>CMP provides optional backwards compatibility for use with other MessagePack
implementations that only implement version 4 of the spec.</p>
<h6>
Building</h6>
<p>There is no build system for CMP.  The programmer can drop <code>cmp.c</code> and <code>cmp.h</code>
in their source tree and modify as necessary.  No special compiler settings are
required to build it, and it generates no compilation errors in either clang or
gcc.</p>
<h6>
Versioning</h6>
<p>CMP's versions are single integers.  I don't use semantic versioning because
I don't guarantee that any version is completely compatible with any other.  In
general, semantic versioning provides a false sense of security.  You should be
evaluating compatibility yourself, not relying on some stranger's versioning
convention.</p>
<h6>
Stability</h6>
<p>I only guarantee stability for versions released on
<a href="https://msgpack.org/camgunz/cmp/releases">the releases page</a>.  While rare, both <code>master</code> and <code>develop</code>
branches may have errors or mismatched versions.</p>
<h6>
Backwards Compatibility</h6>
<p>Version 4 of the MessagePack spec has no <code>BIN</code> type, and provides no <code>STR8</code>
marker.  In order to remain backwards compatible with version 4 of MessagePack,
do the following:</p>
<p>Avoid these functions:</p>
<ul>
<li><code>cmp_write_bin</code></li>
<li><code>cmp_write_bin_marker</code></li>
<li><code>cmp_write_str8_marker</code></li>
<li><code>cmp_write_str8</code></li>
<li><code>cmp_write_bin8_marker</code></li>
<li><code>cmp_write_bin8</code></li>
<li><code>cmp_write_bin16_marker</code></li>
<li><code>cmp_write_bin16</code></li>
<li><code>cmp_write_bin32_marker</code></li>
<li><code>cmp_write_bin32</code></li>
</ul>
<p>Use these functions in lieu of their v5 counterparts:</p>
<ul>
<li>
<code>cmp_write_str_marker_v4</code> instead of <code>cmp_write_str_marker</code>
</li>
<li>
<code>cmp_write_str_v4</code> instead of <code>cmp_write_str</code>
</li>
<li>
<code>cmp_write_object_v4</code> instead of <code>cmp_write_object</code>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-danellis-dart-msgpack"><h4><a href="https://github.com/danellis/dart-msgpack" target="_blank">danellis/dart-msgpack <span>https://github.com/danellis/dart-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
dart-msgpack</h5>
<p>This is a very early release of my MessagePack library for Dart. Currently, message classes must be written by hand. For example:</p>
<div><pre><span>class</span> <span>NotificationFrame</span> <span>extends</span> <span>Message</span> {
    <span>String</span> kind;
    <span>Map</span><span>&lt;</span><span>String</span>, <span>Object</span><span>&gt;</span> data;

    <span>NotificationFrame</span>(<span>this</span>.kind, <span>this</span>.data);

    <span>static</span> <span>NotificationFrame</span> <span>fromList</span>(<span>List</span> f) <span>=</span><span>&gt;</span> <span>new</span> <span>NotificationFrame</span>(f[<span>0</span>], f[<span>1</span>]);
    <span>List</span> <span>toList</span>() <span>=</span><span>&gt;</span> [kind, data];
}</pre></div>
<p>For each class you need to define the <code>fromList</code> and <code>toList</code> methods, which convert from and to a list of fields respectively.</p>
<p>For example usage, see the unit tests.</p>
</article>
  </div>
        </div>
        
        <div id="qs-reeze-msgpack-hhvm"><h4><a href="https://github.com/reeze/msgpack-hhvm" target="_blank">reeze/msgpack-hhvm <span>https://github.com/reeze/msgpack-hhvm</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-hhvm</h5>
<p>Build Status: <a href="https://travis-ci.org/reeze/msgpack-hhvm" rel="nofollow"><img src="https://camo.githubusercontent.com/049faf8e16a7430277c7604af979bfaab5fd5e3e/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f7265657a652f6d73677061636b2d6868766d2e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/reeze/msgpack-hhvm.png"></a></p>
<p>Msgpack for HHVM, It is a msgpack binding for HHVM</p>
<h5>
API</h5>
<ul>
<li>msgpack_pack(mixed $input) : string;
pack a input to msgpack, object and resource are not supported, array and other types supported,
false on failure.</li>
<li>msgpack_unpack(string $pac) : mixed;
unpack a msgpack.</li>
</ul>
<h5>
Installation</h5>
<div><pre>$ git clone https://github.com/reeze/msgpack-hhvm --depth=1
$ <span>cd</span> msgpack-hhvm
$ hphpize <span>&amp;&amp;</span> cmake <span>.</span> <span>&amp;&amp;</span> make
$ cp msgpack.so /path/to/your/hhvm/ext/dir</pre></div>
<p>If you don't have <code>hphpize</code> program, please intall package <code>hhvm-dev</code></p>
<div><pre>$ sudo apt-get install hhvm-dev</pre></div>
<h5>
Contribution and  Issues</h5>
<p>Feel free to send Pull Requests for bug report at: <a href="https://github.com/reeze/msgpack-hhvm/issues">http://github.com/reeze/msgpack-hhvm/issues</a></p>
<h5>
Authors</h5>
<ul>
<li>Reeze Xia <a href="mailto:reeze@php.net">reeze@php.net</a>
</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-Gab-km-msgpack-fsharp"><h4><a href="https://github.com/Gab-km/msgpack-fsharp" target="_blank">Gab-km/msgpack-fsharp <span>https://github.com/Gab-km/msgpack-fsharp</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for F#</h5>
<a href="https://ci.appveyor.com/project/Gabkm/msgpack-fsharp" rel="nofollow"><img alt="Build status" src="https://camo.githubusercontent.com/4abfa86ee3c1757a0aa637a0e880fe82b962c1ad/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f71676871726c376e777139366176616c" data-canonical-src="https://ci.appveyor.com/api/projects/status/qghqrl7nwq96aval"></a>
<a name="user-content-what-is-this"></a>
<h6>
What is this?</h6>
<p>MessagePack is a fast and compact binary serialization library.</p>
<p>MessagePack for F# is a MessagePack implementation of F#, by F#, for F#.</p>
<a name="user-content-usage"></a>
<h6>
Usage</h6>
<div><pre><span>open</span> <span>MsgPack</span>

<span>[|</span> <span>1</span>uy<span>;</span> <span>2</span>uy<span>;</span> <span>3</span>uy <span>|]</span>
<span>|&gt;</span> Array.map (Value.UInt8)
<span>|&gt;</span> Value.Array
<span>|&gt;</span> Packer.packOne
<span>//=&gt; val it : byte [] = [|147uy; 1uy; 2uy; 3uy|]</span>

Unpacker.unpack <span>[|</span><span>147</span>uy<span>;</span> <span>1</span>uy<span>;</span> <span>2</span>uy<span>;</span> <span>3</span>uy<span>|]</span>
<span>//=&gt; [|Value.Array [|Value.UInt8 1uy; Value.UInt8 2uy; Value.UInt8 3uy|]|]</span></pre></div>
<a name="user-content-copyright"></a>
<h6>
Copyright</h6>
<p><code>Copyright (c) 2014- Kazuhiro Matsushima</code></p>
<a name="user-content-license"></a>
<h6>
License</h6>
<p>Distributed under the <a href="https://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">Apache License, Version 2.0</a> .</p>

</article>
  </div>
        </div>
        
        <div id="qs-komamitsu-jackson-dataformat-msgpack"><h4><a href="https://github.com/komamitsu/jackson-dataformat-msgpack" target="_blank">komamitsu/jackson-dataformat-msgpack <span>https://github.com/komamitsu/jackson-dataformat-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
jackson-dataformat-msgpack</h5>
<p><strong>This project is merged to msgpack-java!!</strong> Yay!</p>
<p><strong>See <a href="https://github.com/msgpack/msgpack-java/blob/develop/msgpack-jackson/README.md">msgpack-java/msgpack-jackson</a> for the updated documents</strong></p>
<h5>
Overview</h5>
<p><a href="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/cb266e7c9c0cf7f82be48efd626f912092290b25/68747470733a2f2f7472617669732d63692e6f72672f6b6f6d616d697473752f6a61636b736f6e2d64617461666f726d61742d6d73677061636b2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/komamitsu/jackson-dataformat-msgpack.svg"></a></p>
<p>This Jackson extension library handles reading and writing of data encoded in <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> data format.
It extends standard Jackson streaming API (<code>JsonFactory</code>, <code>JsonParser</code>, <code>JsonGenerator</code>), and as such works seamlessly with all the higher level data abstractions (data binding, tree model, and pluggable extensions).</p>
<h6>
Maven dependency</h6>
<p>To use this module on Maven-based projects, use following dependency:</p>
<pre><code><span>&lt;dependency&gt;</span><span>
  </span><span>&lt;groupId&gt;</span><span>org.komamitsu</span><span>&lt;/groupId&gt;</span><span>
  </span><span>&lt;artifactId&gt;</span><span>jackson-dataformat-msgpack</span><span>&lt;/artifactId&gt;</span><span>
  </span><span>&lt;version&gt;</span><span>0.0.3</span><span>&lt;/version&gt;</span><span>
</span><span>&lt;/dependency&gt;</span></code></pre>
<h6>
Usage</h6>
<p>Only thing you need to do is to instantiate MessagePackFactory and pass it to the constructor of ObjectMapper.</p>
<pre><code><span>  </span><span>ObjectMapper</span><span> objectMapper </span><span>=</span><span> </span><span>new</span><span> </span><span>ObjectMapper</span><span>(</span><span>new</span><span> </span><span>MessagePackFactory</span><span>());</span><span>
  </span><span>ExamplePojo</span><span> orig </span><span>=</span><span> </span><span>new</span><span> </span><span>ExamplePojo</span><span>(</span><span>"komamitsu"</span><span>);</span><span>
  </span><span>byte</span><span>[]</span><span> bytes </span><span>=</span><span> objectMapper</span><span>.</span><span>writeValueAsBytes</span><span>(</span><span>orig</span><span>);</span><span>
  </span><span>ExamplePojo</span><span> value </span><span>=</span><span> objectMapper</span><span>.</span><span>readValue</span><span>(</span><span>bytes</span><span>,</span><span> </span><span>ExamplePojo</span><span>.</span><span>class</span><span>);</span><span>
  </span><span>System</span><span>.</span><span>out</span><span>.</span><span>println</span><span>(</span><span>value</span><span>.</span><span>getName</span><span>());</span><span> </span><span>// =&gt; komamitsu</span></code></pre>
<p>Also, you can exchange data among multiple languages.</p>
<p>Java</p>
<pre><code><span>  </span><span>// Serialize</span><span>
  </span><span>Map</span><span>&lt;</span><span>String</span><span>,</span><span> </span><span>Object</span><span>&gt;</span><span> obj </span><span>=</span><span> </span><span>new</span><span> </span><span>HashMap</span><span>&lt;</span><span>String</span><span>,</span><span> </span><span>Object</span><span>&gt;();</span><span>
  obj</span><span>.</span><span>put</span><span>(</span><span>"foo"</span><span>,</span><span> </span><span>"hello"</span><span>);</span><span>
  obj</span><span>.</span><span>put</span><span>(</span><span>"bar"</span><span>,</span><span> </span><span>"world"</span><span>);</span><span>
  </span><span>byte</span><span>[]</span><span> bs </span><span>=</span><span> objectMapper</span><span>.</span><span>writeValueAsBytes</span><span>(</span><span>obj</span><span>);</span><span>
  </span><span>// bs =&gt; [-126, -93, 102, 111, 111, -91, 104, 101, 108, 108, 111,</span><span>
  </span><span>//        -93, 98, 97, 114, -91, 119, 111, 114, 108, 100]</span></code></pre>
<p>Ruby</p>
<pre><code><span>  </span><span>require</span><span> </span><span>'msgpack'</span><span>

  </span><span># Deserialize</span><span>
  xs </span><span>=</span><span> </span><span>[-</span><span>126</span><span>,</span><span> </span><span>-</span><span>93</span><span>,</span><span> </span><span>102</span><span>,</span><span> </span><span>111</span><span>,</span><span> </span><span>111</span><span>,</span><span> </span><span>-</span><span>91</span><span>,</span><span> </span><span>104</span><span>,</span><span> </span><span>101</span><span>,</span><span> </span><span>108</span><span>,</span><span> </span><span>108</span><span>,</span><span> </span><span>111</span><span>,</span><span>
        </span><span>-</span><span>93</span><span>,</span><span> </span><span>98</span><span>,</span><span> </span><span>97</span><span>,</span><span> </span><span>114</span><span>,</span><span> </span><span>-</span><span>91</span><span>,</span><span> </span><span>119</span><span>,</span><span> </span><span>111</span><span>,</span><span> </span><span>114</span><span>,</span><span> </span><span>108</span><span>,</span><span> </span><span>100</span><span>]</span><span>
  </span><span>MessagePack</span><span>.</span><span>unpack</span><span>(</span><span>xs</span><span>.</span><span>pack</span><span>(</span><span>"C*"</span><span>))</span><span>
  </span><span># =&gt; {"foo"=&gt;"hello", "bar"=&gt;"world"}</span><span>

  </span><span># Serialize</span><span>
  </span><span>[</span><span>"zero"</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>2.0</span><span>,</span><span> </span><span>nil</span><span>].</span><span>to_msgpack</span><span>.</span><span>unpack</span><span>(</span><span>'C*'</span><span>)</span><span>
  </span><span># =&gt; [148, 164, 122, 101, 114, 111, 1, 203, 64, 0, 0, 0, 0, 0, 0, 0, 192]</span></code></pre>
<p>Java</p>
<pre><code><span>  </span><span>// Deserialize</span><span>
  bs </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[]</span><span> </span><span>{(</span><span>byte</span><span>)</span><span> </span><span>148</span><span>,</span><span> </span><span>(</span><span>byte</span><span>)</span><span> </span><span>164</span><span>,</span><span> </span><span>122</span><span>,</span><span> </span><span>101</span><span>,</span><span> </span><span>114</span><span>,</span><span> </span><span>111</span><span>,</span><span> </span><span>1</span><span>,</span><span>
                   </span><span>(</span><span>byte</span><span>)</span><span> </span><span>203</span><span>,</span><span> </span><span>64</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>(</span><span>byte</span><span>)</span><span> </span><span>192</span><span>};</span><span>
  </span><span>TypeReference</span><span>&lt;</span><span>List</span><span>&lt;</span><span>Object</span><span>&gt;&gt;</span><span> typeReference </span><span>=</span><span> </span><span>new</span><span> </span><span>TypeReference</span><span>&lt;</span><span>List</span><span>&lt;</span><span>Object</span><span>&gt;&gt;(){};</span><span>
  </span><span>List</span><span>&lt;</span><span>Object</span><span>&gt;</span><span> xs </span><span>=</span><span> objectMapper</span><span>.</span><span>readValue</span><span>(</span><span>bs</span><span>,</span><span> typeReference</span><span>);</span><span>
  </span><span>// xs =&gt; [zero, 1, 2.0, null]</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-briandw-SwiftPack"><h4><a href="https://github.com/briandw/SwiftPack" target="_blank">briandw/SwiftPack <span>https://github.com/briandw/SwiftPack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
SwiftPack</h5>
<p>SwiftPack is MessagePack packer and unpacker written almost entirely in Swift.</p>
<h5>
Issues</h5>
<ul>
<li>There are few Objective-C dependencies, mostly NSData. I hope to remove these dependencies as Swift matures.</li>
<li>Maps currently only support String types for keys.</li>
</ul>
<h5>
Copyright and License</h5>
<p>Copyright (c) 2014 Brian Williams</p>
<p>This software is licensed under the terms of the MIT license.</p>
</article>
  </div>
        </div>
        
        <div id="qs-gabriel-MPMessagePack"><h4><a href="https://github.com/gabriel/MPMessagePack" target="_blank">gabriel/MPMessagePack <span>https://github.com/gabriel/MPMessagePack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Install</h5>
<pre><code><span>pod </span><span>"MPMessagePack"</span></code></pre>
<h6>
Writing</h6>
<div><pre>#<span>import</span> <span><span>&lt;</span>MPMessagePack/MPMessagePack.h<span>&gt;</span></span>

<span>NSDictionary</span> *dict =
@{
<span><span>@"</span>n<span>"</span></span>: @(<span>32134123</span>),
<span><span>@"</span>bool<span>"</span></span>: @(<span>YES</span>),
<span><span>@"</span>array<span>"</span></span>: @[@(<span>1</span>.<span>1f</span>), @(<span>2.1</span>)],
<span><span>@"</span>body<span>"</span></span>: [<span>NSData</span> <span>data</span>],
};

<span>NSData</span> *data = [dict <span>mp_messagePack</span>];</pre></div>
<p>Or via <code>MPMessagePackWriter</code>.</p>
<div><pre><span>NSError</span> *error = <span>nil</span>;
<span>NSData</span> *data = [MPMessagePackWriter <span>writeObject:</span>dict <span>error:</span>&amp;error];</pre></div>
<p>If you need to use an ordered dictionary.</p>
<div><pre>MPOrderedDictionary *dict = [[MPOrderedDictionary <span>alloc</span>] <span>init</span>];
[dict <span>addEntriesFromDictionary:</span>@{<span><span>@"</span>c<span>"</span></span>: @(<span>1</span>), <span><span>@"</span>b<span>"</span></span>: @(<span>2</span>), <span><span>@"</span>a<span>"</span></span>: @(<span>3</span>)}];
[dict <span>sortKeysUsingSelector:</span><span>@selector</span>(<span>localizedCaseInsensitiveCompare:</span>)];
[dict <span>mp_messagePack</span>];</pre></div>
<h6>
Reading</h6>
<div><pre><span>id</span> obj = [MPMessagePackReader <span>readData:</span>data <span>error:</span>&amp;error];</pre></div>
<div><pre>MPMessagePackReader *reader = [[MPMessagePackReader <span>alloc</span>] <span>initWithData:</span>data];
<span>id</span> obj1 = [reader <span>read</span>:&amp;error]; <span><span>//</span> Read an object</span>
<span>id</span> obj2 = [reader <span>read</span>:&amp;error]; <span><span>//</span> Read another object</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-mcollina-msgpack5"><h4><a href="https://github.com/mcollina/msgpack5" target="_blank">mcollina/msgpack5 <span>https://github.com/mcollina/msgpack5</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack5&nbsp;&nbsp;<a href="https://travis-ci.org/mcollina/msgpack5" rel="nofollow"><img src="https://camo.githubusercontent.com/9b55d6db87b3f41e6c4963d8169561554a7e4975/68747470733a2f2f7472617669732d63692e6f72672f6d636f6c6c696e612f6d73677061636b352e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/mcollina/msgpack5.png"></a>
</h5>
<p>A msgpack v5 implementation for node.js and the browser, with extension point support.</p>
<h6>
Install</h6>
<div><pre>npm install msgpack5 --save</pre></div>
<h6>
Usage</h6>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>'</span>msgpack5<span>'</span></span>)() <span><span>//</span> namespace our extensions</span>
  , a       <span>=</span> <span>new</span> <span>MyType</span>(<span>2</span>, <span><span>'</span>a<span>'</span></span>)
  , encode  <span>=</span> <span>msgpack</span>.<span>encode</span>
  , decode  <span>=</span> <span>msgpack</span>.<span>decode</span>

<span>msgpack</span>.<span>register</span>(<span>0x42</span>, MyType, mytipeEncode, mytipeDecode)

<span>console</span>.<span>log</span>(<span>encode</span>({ <span><span>'</span>hello<span>'</span></span><span>:</span> <span><span>'</span>world<span>'</span></span> }).<span>toString</span>(<span><span>'</span>hex<span>'</span></span>))
<span><span>//</span> 81a568656c6c6fa5776f726c64</span>
<span>console</span>.<span>log</span>(<span>decode</span>(<span>encode</span>({ <span><span>'</span>hello<span>'</span></span><span>:</span> <span><span>'</span>world<span>'</span></span> })))
<span><span>//</span> { hello: 'world' }</span>
<span>console</span>.<span>log</span>(<span>encode</span>(a).<span>toString</span>(<span><span>'</span>hex<span>'</span></span>))
<span><span>//</span> d5426161</span>
<span>console</span>.<span>log</span>(<span>decode</span>(<span>encode</span>(a)) <span>instanceof</span> MyType)
<span><span>//</span> true</span>
<span>console</span>.<span>log</span>(<span>decode</span>(<span>encode</span>(a)))
<span><span>//</span> { value: 'a', size: 2 }</span>

<span>function</span> <span>MyType</span>(<span>size</span>, <span>value</span>) {
  <span>this</span>.<span>value</span> <span>=</span> value
  <span>this</span>.<span>size</span>  <span>=</span> size
}

<span>function</span> <span>mytipeEncode</span>(<span>obj</span>) {
  <span>var</span> buf <span>=</span> <span>new</span> <span>Buffer</span>(<span>obj</span>.<span>size</span>)
  <span>buf</span>.<span>fill</span>(<span>obj</span>.<span>value</span>)
  <span>return</span> buf
}

<span>function</span> <span>mytipeDecode</span>(<span>data</span>) {
  <span>var</span> result <span>=</span> <span>new</span> <span>MyType</span>(<span>data</span>.<span>length</span>, <span>data</span>.<span>toString</span>(<span><span>'</span>utf8<span>'</span></span>, <span>0</span>, <span>1</span>))
    , i

  <span>for</span> (i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>data</span>.<span>length</span>; i<span>++</span>) {
    <span>if</span> (<span>data</span>.<span>readUInt8</span>(<span>0</span>) <span>!=</span> <span>data</span>.<span>readUInt8</span>(i)) {
      <span>throw</span> <span>new</span> <span>Error</span>(<span><span>'</span>should all be the same<span>'</span></span>)
    }
  }

  <span>return</span> result
}</pre></div>
<h6>
In the Browser</h6>
<p>This library is compatible with <a href="http://npm.im/browserify" rel="nofollow">Browserify</a>.</p>
<p>If you want to use standalone, grab the file in the <code>dist</code> folder of
this repo, and use in your own HTML page, the module will expose a
<code>msgpack5</code> global.</p>
<pre><code><span>&lt;script</span><span> </span><span>type</span><span>=</span><span>"text/javascript"</span><span>
        </span><span>src</span><span>=</span><span>"./msgpack5.min.js"</span><span>&gt;</span><span>
</span><span>&lt;/script&gt;</span></code></pre>
<h7>
To build</h7>
<pre><code><span>	npm run build</span></code></pre>
<h6>
API</h6>

<h6>
API</h6>
<ul>
<li><a href="#msgpack"><code><b>msgpack()</b></code></a></li>
<li><a href="#encode"><code>msgpack().<b>encode()</b></code></a></li>
<li><a href="#decode"><code>msgpack().<b>decode()</b></code></a></li>
<li><a href="#registerEncoder"><code>msgpack().<b>registerEncoder()</b></code></a></li>
<li><a href="#registerDecoder"><code>msgpack().<b>registerDecoder()</b></code></a></li>
<li><a href="#register"><code>msgpack().<b>register()</b></code></a></li>
<li><a href="#encoder"><code>msgpack().<b>encoder()</b></code></a></li>
<li><a href="#decoder"><code>msgpack().<b>decoder()</b></code></a></li>
</ul>
<hr>

<h7>
msgpack(options(obj))</h7>
<p>Creates a new instance on which you can register new types for being
encoded.</p>
<p>options:</p>
<ul>
<li>
<code>forceFloat64</code>, a boolean to that forces all floats to be encoded as 64-bits floats. Defaults to false.</li>
<li>
<code>compatibilityMode</code>, a boolean that enables "compatibility mode" which doesn't use str 8 format. Defaults to false.</li>
<li>
<code>disableTimestampEncoding</code>, a boolean that when set disables the encoding of Dates into the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type">timestamp extension type</a>. Defaults to false.</li>
</ul>
<hr>

<h7>
encode(object)</h7>
<p>Encodes <code>object</code> in msgpack, returns a <a href="http://npm.im/bl" rel="nofollow">bl</a>.</p>
<hr>

<h7>
decode(buf)</h7>
<p>Decodes buf from in msgpack. <code>buf</code> can be a <code>Buffer</code> or a <a href="http://npm.im/bl" rel="nofollow">bl</a> instance.</p>
<p>In order to support a stream interface, a user must pass in a <a href="http://npm.im/bl" rel="nofollow">bl</a> instance.</p>
<hr>

<h7>
registerEncoder(check(obj), encode(obj))</h7>
<p>Register a new custom object type for being automatically encoded.
The arguments are:</p>
<ul>
<li>
<code>check</code>, a function that will be called to check if the passed
object should be encoded with the <code>encode</code> function</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> which include the same type
for <a href="#registerDecoder">registerDecoder</a>.</li>
</ul>
<hr>

<h7>
registerDecoder(type, decode(buf))</h7>
<p>Register a new custom object type for being automatically decoded.
The arguments are:</p>
<ul>
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>
<hr>

<h7>
register(type, constructor, encode(obj), decode(buf))</h7>
<p>Register a new custom object type for being automatically encoded and
decoded. The arguments are:</p>
<ul>
<li>
<code>type</code>, is a greater than zero integer identificating the type once serialized</li>
<li>
<code>constructor</code>, the function that will be used to match the objects
with <code>instanceof</code>
</li>
<li>
<code>encode</code>, a function that will be called to encode an object in binary
form; this function <strong>must</strong> return a <code>Buffer</code> that can be
deserialized by the <code>decode</code> function</li>
<li>
<code>decode</code>, a function that will be called to decode the object from
the passed <code>Buffer</code>
</li>
</ul>
<p>This is just a commodity that calls
<a href="#registerEncoder"><code>registerEncoder</code></a> and
<a href="#registerDecoder"><code>registerDecoder</code></a> internally.</p>
<hr>

<h7>
encoder(options)</h7>
<p>Builds a stream in object mode that encodes msgpack.</p>
<p>Supported options:</p>
<ul>
<li>
<code>wrap</code>, objects should be passed to encoder in wrapped object {value: data}. Wrap option should be used if you need to pass null to encoder.</li>
</ul>
<hr>

<h7>
decoder(options)</h7>
<p>Builds a stream in object mode that decodes msgpack.</p>
<p>Supported options:</p>
<ul>
<li>
<code>wrap</code>, decoded objects returned in wrapped object {value: data}. Wrap option should be used if stream contains msgpack nil.</li>
</ul>
<h6>
LevelUp Support</h6>
<p><strong>msgpack5</strong> can be used as a LevelUp
<a href="https://github.com/rvagg/node-levelup#leveluplocation-options-callback"><code>valueEncoding</code></a> straight away:</p>
<div><pre><span>var</span> level <span>=</span> <span>require</span>(<span><span>'</span>level<span>'</span></span>)
  , pack  <span>=</span> <span>msgpack</span>()
  , db    <span>=</span> <span>level</span>(<span><span>'</span>foo<span>'</span></span>, {
      valueEncoding<span>:</span> pack
    })
  , obj   <span>=</span> { my<span>:</span> <span><span>'</span>obj<span>'</span></span> }

<span>db</span>.<span>put</span>(<span><span>'</span>hello<span>'</span></span>, obj, <span>function</span>(<span>err</span>) {
  <span>db</span>.<span>get</span>(<span><span>'</span>hello<span>'</span></span>, <span>function</span>(<span>err</span>, <span>result</span>) {
    <span>console</span>.<span>log</span>(result)
    <span>db</span>.<span>close</span>()
  })
})
</pre></div>
<h6>
Related projects</h6>
<ul>
<li>
<a href="https://npmjs.com/package/msgpack5rpc" rel="nofollow">msgpack5rpc</a>: An implementation of the
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc spec</a>
on top of this library.</li>
</ul>
<h6>
Disclaimer</h6>
<p>This library is built fully on JS and on <a href="http://npm.im/bl" rel="nofollow">bl</a> to
simplify the code. Every improvement that keeps the same API is welcome.</p>
<h6>
Acknowledgements</h6>
<p>This project was kindly sponsored by <a href="http://nearform.com/" rel="nofollow">nearForm</a>.</p>
<p>This library was originally built as the data format for
<a href="http://npm.im/jschan" rel="nofollow">JSChan</a>.</p>
<h6>
License</h6>
<p>MIT</p>
</article>
  </div>
        </div>
        
        <div id="qs-rodrigosetti-messagepack"><h4><a href="https://hackage.haskell.org/package/messagepack" target="_blank">rodrigosetti/messagepack <span>http://hackage.haskell.org/package/messagepack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Haskell</h5>
<p>This implementation defines an messagepack <code>Object</code> type, which is an instance of
<code>Serialize</code> (from <a href="https://hackage.haskell.org/package/cereal" rel="nofollow">cereal</a> ):</p>
<div><pre><span>data</span> <span>Object</span> <span>=</span> <span>ObjectNil</span>
            | <span>ObjectUInt</span>   <span>Word64</span>
            | <span>ObjectInt</span>    <span>Int64</span>
            | <span>ObjectBool</span>   <span><span>Bool</span></span>
            | <span>ObjectFloat</span>  <span><span>Float</span></span>
            | <span>ObjectDouble</span> <span><span>Double</span></span>
            | <span>ObjectString</span> <span>ByteString</span>
            | <span>ObjectBinary</span> <span>ByteString</span>
            | <span>ObjectArray</span>  [<span>Object</span>]
            | <span>ObjectMap</span>    (<span>M</span>.<span>Map</span> <span>Object</span> <span>Object</span> )
            | <span>ObjectExt</span>    !<span>Int8</span> <span><span>BS.</span>ByteString</span>
    <span>deriving</span> (<span>Eq</span>, <span>Ord</span>, <span>Show</span>)
    
<span>instance</span> <span>Serialize</span> <span>Object</span> <span>where</span>
    <span><span>--</span> ...</span></pre></div>
<p>Thus, you can use cereal's <code>encode</code> and <code>decode</code> to pack and unpack objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-msgpack-delphi"><h4><a href="https://github.com/ymofen/msgpack-delphi" target="_blank">ymofen/msgpack-delphi <span>https://github.com/ymofen/msgpack-delphi</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Msgpack for Delphi</h5>
<p>It's like JSON but small and fast.</p>
<pre><code><span>unit </span><span>Owner</span><span>:</span><span> D10</span><span>.</span><span>Mofen</span><span>,</span><span> qdac</span><span>.</span><span>swish
contact</span><span>:</span><span>
       qq</span><span>:</span><span>185511468</span><span>,</span><span> 
    email</span><span>:</span><span>185511468@qq</span><span>.</span><span>com</span><span>
welcome to report bug</span></code></pre>
<h6>
Works with</h6>
<ul>
<li>Delphi 7 (tested)</li>
<li>Delphi 2007 (tested)</li>
<li>XE5, XE6, XE7, FMX (tested)</li>
</ul>
<h6>
changes:</h6>
<ul>
<li>
<p>first release
2014-08-15 13:05:13</p>
</li>
<li>
<p>add array support
2014-08-19 12:18:47</p>
</li>
<li>
<p>add andriod support
2014-09-08 00:45:27</p>
</li>
</ul>
<ul>
<li>fixed int32, int64 parse bug&lt; integer, int64 parse zero&gt;
2014-11-09 22:35:27</li>
</ul>
<ul>
<li>add EncodeToFile/DecodeFromFile
2014-11-13 12:30:58</li>
</ul>
<ul>
<li>
<p>fix  asVariant = null (thanks for cyw(26890954))
2014-11-14 09:05:52</p>
</li>
<li>
<p>fix AsInteger = -1 bug (thanks for cyw(26890954))
2014-11-14 12:15:52</p>
</li>
<li>
<p>fix AsInteger = -127 bug
check int64/integer/cardinal/word/shortint/smallint/byte assign, encode,decode, read
2014-11-14 12:30:38</p>
</li>
<li>
<p>fix AsFloat = 2.507182 bug
thanks fo []-  1939331207
2014-11-21 12:37:04</p>
</li>
<li>
<p>add AddArrayChild func
2015-03-25 17:47:28</p>
</li>
<li>
<p>add remove/removeFromParent/Delete function
2015-08-29 22:37:48</p>
</li>
</ul>
<h7>
Code Example</h7>
<div><pre><span>var</span>
  lvMsg, lvMsg2:TSimpleMsgPack;
  lvBytes:TBytes;
  s:string;
<span>begin</span>
  lvMsg := TSimpleMsgPack.Create;
  lvMsg.S[<span><span>'</span>key.obj<span>'</span></span>] := <span><span>'</span>,ascii<span>'</span></span>;
  <span>if</span> dlgOpen.Execute <span>then</span>
  <span>begin</span>
    lvMsg.S[<span><span>'</span>key.image.name<span>'</span></span>] := ExtractFileName(dlgOpen.FileName);
    
    <span><span>//</span> file binary data</span>
    lvMsg.ForcePathObject(<span><span>'</span>key.image.data<span>'</span></span>).LoadBinaryFromFile(dlgOpen.FileName);
  <span>end</span>;
  
  <span><span>//</span></span>
  lvBytes := lvMsg.EncodeToBytes;

  lvMsg2 := TSimpleMsgPack.Create;
  lvMsg2.DecodeFromBytes(lvBytes);
  <span><span>//</span></span>
  Memo1.Lines.Add(lvMsg2.S[<span><span>'</span>key.obj<span>'</span></span>]);
  <span>if</span> lvMsg2.S[<span><span>'</span>key.image.name<span>'</span></span>] &lt;&gt; <span><span>'</span><span>'</span></span> <span>then</span>
  <span>begin</span>
    s := ExtractFilePath(ParamStr(<span>0</span>)) + lvMsg2.S[<span><span>'</span>key.image.name<span>'</span></span>];
    Memo1.Lines.Add(<span><span>'</span>file saved<span>'</span></span>);
    Memo1.Lines.Add(s);
    lvMsg2.ForcePathObject(<span><span>'</span>key.image.data<span>'</span></span>).SaveBinaryToFile(s);    
  <span>end</span>;
  </pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-chinawsb-qmsgpack-delphi"><h4><a href="http://www.qdac.cc/" target="_blank">chinawsb/qmsgpack-delphi <span>http://www.qdac.cc</span></a></h4>
<div id="readme">
    <article itemprop="text"><h7>
QMsgPack-Messagepack for Delphi/C++ Builder</h7>
<p>QMsgPack is a simple and powerful Delphi &amp; C++ Builder implementation for messagepack protocol.
QMsgPack is a part of QDAC 3.0,Source code hosted in Sourceforge(<a href="https://sourceforge.net/p/qdac3" rel="nofollow">http://sourceforge.net/p/qdac3</a>).</p>
<h7>
Feathers</h7>
<p> Full types support,include messagepack extension type</p>
<p> Full open source,free for used in ANY PURPOSE</p>
<p> Quick and simple interface</p>
<p> RTTI support include</p>
<h7>
Install</h7>
<p>QMsgPack is not a desgin time package.So just place QMsgPack files into search path and add to your project.</p>
<h7>
Support</h7>
<p> Topic in Website (<a href="http://www.qdac.cc/?cat=44" rel="nofollow">http://www.qdac.cc/?cat=44</a>) ,CHINESE only</p>
<p> Mail to author (<a href="mailto:chinawsb@sina.com">chinawsb@sina.com</a>)</p>
<p> Post in forum (<a href="http://tieba.baidu.com/f?kw=qdac" rel="nofollow">http://tieba.baidu.com/f?kw=qdac</a>)</p>
<p> QQ Group No250530692 (<a href="https://jq.qq.com/?_wv=1027&amp;k=ZH6mZR" rel="nofollow">http://jq.qq.com/?_wv=1027&amp;k=ZH6mZR</a>)</p>
<h7>
Source check out</h7>
<p> HTTP (<a href="http://svn.code.sf.net/p/qdac3/code/" rel="nofollow">http://svn.code.sf.net/p/qdac3/code/</a>)</p>
<p> SVN (svn://svn.code.sf.net/p/qdac3/code/)</p>
<h7>
Example</h7>
<div><pre><span>var</span>
  lvMsg, lvMsg2:TQMsgPack;
  lvBytes:TBytes;
  s:string;
<span>begin</span>
  lvMsg := TQMsgPack.Create;
  lvMsg.ForcePath(<span><span>'</span>key.obj<span>'</span></span>).AsString := <span><span>'</span>,ascii<span>'</span></span>;
    
  <span><span>//</span></span>
  lvBytes := lvMsg.Encode;

  lvMsg2 := TQMsgPack.Create;
  lvMsg2.Parse(lvBytes);
  <span><span>//</span></span>
  showMessage(lvMsg.ForcePath(<span><span>'</span>key.obj<span>'</span></span>).AsString);
  ....
  </pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-romixlab-qmsgpack"><h4><a href="https://github.com/romixlab/qmsgpack" target="_blank">romixlab/qmsgpack <span>https://github.com/romixlab/qmsgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Qt</h5>
<p>Full documentation is here <a href="http://msgpack.marsworks.ru/" rel="nofollow">mp.marsw.ru</a></p>
<h6>
Installation</h6>
<p>Clone repository:</p>
<div><pre>git clone https://github.com/romixlab/qmsgpack.git
<span>cd</span> qmsgpack
mkdir build
<span>cd</span> build
cmake ..
make install</pre></div>
<h6>
Sample usage</h6>
<p>Packing</p>
<div><pre>QVariantList list;
list &lt;&lt; <span>1</span> &lt;&lt; <span>2</span> &lt;&lt; <span>3</span>;
QByteArray array = MsgPack::pack(list);</pre></div>
<p>Unpacking:</p>
<div><pre>QVariantList unpacked = MsgPack::unpack(array).toList();</pre></div>
<p>Streaming API:</p>
<div><pre><span><span>//</span> packing</span>
MsgPackStream <span>stream</span>(&amp;ba, QIODevice::WriteOnly);
stream &lt;&lt; <span>1</span> &lt;&lt; <span>2.3</span> &lt;&lt; <span><span>"</span>some string<span>"</span></span>;

<span><span>//</span> unpacking</span>
MsgPackStream <span>stream</span>(ba);
<span>int</span> a;
<span>double</span> b;
QSting s;
stream &gt;&gt; a &gt;&gt; b &gt;&gt; s;</pre></div>
<h6>
Qt types and User types</h6>
<p>There is packers and unpackers for QColor, QTime, QDate, QDateTime, QPoint, QSize, QRect. Also you can create your own packer/unpacker methods for Qt or your own types. See <a href="http://msgpack.marsworks.ru/" rel="nofollow">docs</a> for details.</p>
</article>
  </div>
        </div>
        
        <div id="qs-tinylib-msgp"><h4><a href="https://github.com/tinylib/msgp" target="_blank">tinylib/msgp <span>https://github.com/tinylib/msgp</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack Code Generator <a href="https://travis-ci.org/tinylib/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/8156ac9f5b1f720c43c6089f42d909698c7623bf/68747470733a2f2f7472617669732d63692e6f72672f74696e796c69622f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/tinylib/msgp.svg?branch=master"></a>
</h5>
<p>This is a code generation tool and serialization library for <a href="https://msgpack.org/" rel="nofollow">MessagePack</a>. You can read more about MessagePack <a href="https://github.com/tinylib/msgp/wiki">in the wiki</a>, or at <a href="https://msgpack.org/" rel="nofollow">msgpack.org</a>.</p>
<h7>
Why?</h7>
<ul>
<li>Use Go as your schema language</li>
<li>Performance</li>
<li><a href="https://godoc.org/github.com/tinylib/msgp/msgp#CopyToJSON" rel="nofollow">JSON interop</a></li>
<li><a href="https://github.com/tinylib/msgp/wiki/Using-Extensions">User-defined extensions</a></li>
<li>Type safety</li>
<li>Encoding flexibility</li>
</ul>
<h7>
Quickstart</h7>
<p>In a source file, include the following directive:</p>

<p>The <code>msgp</code> command will generate serialization methods for all exported type declarations in the file.</p>
<p>You can <a href="https://github.com/tinylib/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>
<h7>
Use</h7>
<p>Field names can be set in much the same way as the <code>encoding/json</code> package. For example:</p>
<div><pre><span>type</span> <span>Person</span> <span>struct</span> {
	<span>Name</span>       <span>string</span> <span><span>`</span>msg:"name"<span>`</span></span>
	<span>Address</span>    <span>string</span> <span><span>`</span>msg:"address"<span>`</span></span>
	<span>Age</span>        <span>int</span>    <span><span>`</span>msg:"age"<span>`</span></span>
	<span>Hidden</span>     <span>string</span> <span><span>`</span>msg:"-"<span>`</span></span> <span><span>//</span> this field is ignored</span>
	unexported <span>bool</span>             <span><span>//</span> this field is also ignored</span>
}</pre></div>
<p>By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encodable</code>, <code>msgp.Decodable</code>,
<code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>. Carefully-designed applications can use these methods to do
marshalling/unmarshalling with zero heap allocations.</p>
<p>While <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are quite similar to the standard library's
<code>json.Marshaler</code> and <code>json.Unmarshaler</code>, <code>msgp.Encodable</code> and <code>msgp.Decodable</code> are useful for
stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially protocol-aware versions
of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>, respectively.)</p>
<h7>
Features</h7>
<ul>
<li>Extremely fast generated code</li>
<li>Test and benchmark generation</li>
<li>JSON interoperability (see <code>msgp.CopyToJSON() and msgp.UnmarshalAsJSON()</code>)</li>
<li>Support for complex type declarations</li>
<li>Native support for Go's <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types</li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
<li>Support for arbitrary type system extensions</li>
<li><a href="https://github.com/tinylib/msgp/wiki/Preprocessor-Directives">Preprocessor directives</a></li>
<li>File-based dependency model means fast codegen regardless of source tree size.</li>
</ul>
<p>Consider the following:</p>
<div><pre><span>const</span> <span>Eight</span> = <span>8</span>
<span>type</span> <span>MyInt</span> <span>int</span>
<span>type</span> <span>Data</span> []<span>byte</span>

<span>type</span> <span>Struct</span> <span>struct</span> {
	<span>Which</span>  <span>map</span>[<span>string</span>]*MyInt <span><span>`</span>msg:"which"<span>`</span></span>
	<span>Other</span>  <span>Data</span>              <span><span>`</span>msg:"other"<span>`</span></span>
	<span>Nums</span>   [Eight]<span>float64</span>    <span><span>`</span>msg:"nums"<span>`</span></span>
}</pre></div>
<p>As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>
<h8>
Extensions</h8>
<p>MessagePack supports defining your own types through "extensions," which are just a tuple of
the data "type" (<code>int8</code>) and the raw binary. You <a href="https://github.com/tinylib/msgp/wiki/Using-Extensions">can see a worked example in the wiki.</a></p>
<h7>
Status</h7>
<p>Mostly stable, in that no breaking changes have been made to the <code>/msgp</code> library in more than a year. Newer versions
of the code may generate different code than older versions for performance reasons. I (@philhofer) am aware of a
number of stability-critical commercial applications that use this code with good results. But, caveat emptor.</p>
<p>You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="https://github.com/tinylib/msgp/wiki">in the wiki</a>.</p>
<p>Here some of the known limitations/restrictions:</p>
<ul>
<li>Identifiers from outside the processed source file are assumed (optimistically) to satisfy the generator's interfaces. If this isn't the case, your code will fail to compile.</li>
<li>Like most serializers, <code>chan</code> and <code>func</code> fields are ignored, as well as non-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>
<em>Maps must have <code>string</code> keys.</em> This is intentional (as it preserves JSON interop.) Although non-string map keys are not forbidden by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be de-serialized into a <code>map[string]interface{}</code>.) The only exception to this rule is that the deserializers will allow you to read map keys encoded as <code>bin</code> types, due to the fact that some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code> types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true for JSON translation.</li>
</ul>
<p>If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) <em>Please, please, please</em> file an issue if you think the generator is writing broken code.</p>
<h7>
Performance</h7>
<p>If you like benchmarks, see <a href="http://bravenewgeek.com/so-you-wanna-go-fast/" rel="nofollow">here</a> and <a href="https://github.com/alecthomas/go_serialization_benchmarks">here</a>.</p>
<p>As one might expect, the generated methods that deal with <code>[]byte</code> are faster for small objects, but the <code>io.Reader/Writer</code> methods are generally more memory-efficient (and, at some point, faster) for large (&gt; 2KB) objects.</p>
</article>
  </div>
        </div>
        
        <div id="qs-jakm-msgpack-cli"><h4><a href="https://github.com/jakm/msgpack-cli" target="_blank">jakm/msgpack-cli <span>https://github.com/jakm/msgpack-cli</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-cli</h5>
<p><a href="https://travis-ci.org/jakm/msgpack-cli" rel="nofollow"><img src="https://camo.githubusercontent.com/468d32c4d9a7d9fb70b86c82afe335d4eb63429a/68747470733a2f2f7472617669732d63692e6f72672f6a616b6d2f6d73677061636b2d636c692e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jakm/msgpack-cli.svg?branch=master"></a></p>
<p>msgpack-cli is command line tool that converts data from JSON to <a href="https://msgpack.org/" rel="nofollow">Msgpack</a> and vice versa. Also allows calling RPC methods via <a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>.</p>
<h6>
Installation</h6>
<div><pre>% go get github.com/jakm/msgpack-cli</pre></div>
<p>Debian packages and Windows binaries are available on project's
<a href="https://github.com/jakm/msgpack-cli/releases/latest">Releases page</a>.</p>
<h6>
Usage</h6>
<pre><code><span>msgpack</span><span>-</span><span>cli

</span><span>Usage</span><span>:</span><span>
    msgpack</span><span>-</span><span>cli encode </span><span>&lt;</span><span>input</span><span>-</span><span>file</span><span>&gt;</span><span> </span><span>[--</span><span>out</span><span>=&lt;</span><span>output</span><span>-</span><span>file</span><span>&gt;]</span><span> </span><span>[--</span><span>disable</span><span>-</span><span>int64</span><span>-</span><span>conv</span><span>]</span><span>
    msgpack</span><span>-</span><span>cli decode </span><span>&lt;</span><span>input</span><span>-</span><span>file</span><span>&gt;</span><span> </span><span>[--</span><span>out</span><span>=&lt;</span><span>output</span><span>-</span><span>file</span><span>&gt;]</span><span> </span><span>[--</span><span>pp</span><span>]</span><span>
    msgpack</span><span>-</span><span>cli rpc </span><span>&lt;host&gt;</span><span> </span><span>&lt;port&gt;</span><span> </span><span>&lt;method&gt;</span><span> </span><span>[&lt;</span><span>params</span><span>&gt;|--</span><span>file</span><span>=&lt;</span><span>input</span><span>-</span><span>file</span><span>&gt;]</span><span> </span><span>[--</span><span>pp</span><span>]</span><span>
        </span><span>[--</span><span>timeout</span><span>=&lt;</span><span>timeout</span><span>&gt;][--</span><span>disable</span><span>-</span><span>int64</span><span>-</span><span>conv</span><span>]</span><span>
    msgpack</span><span>-</span><span>cli </span><span>-</span><span>h </span><span>|</span><span> </span><span>--</span><span>help
    msgpack</span><span>-</span><span>cli </span><span>--</span><span>version

</span><span>Commands</span><span>:</span><span>
    encode                </span><span>Encode</span><span> data </span><span>from</span><span> input file to STDOUT
    decode                </span><span>Decode</span><span> data </span><span>from</span><span> input file to STDOUT
    rpc                   </span><span>Call</span><span> RPC method </span><span>and</span><span> write result to STDOUT

</span><span>Options</span><span>:</span><span>
    </span><span>-</span><span>h </span><span>--</span><span>help             </span><span>Show</span><span> </span><span>this</span><span> help message </span><span>and</span><span> </span><span>exit</span><span>
    </span><span>--</span><span>version             </span><span>Show</span><span> version
    </span><span>--</span><span>out</span><span>=&lt;</span><span>output</span><span>-</span><span>file</span><span>&gt;</span><span>   </span><span>Write</span><span> output data to file instead of STDOUT
    </span><span>--</span><span>file</span><span>=&lt;</span><span>input</span><span>-</span><span>file</span><span>&gt;</span><span>   </span><span>File</span><span> </span><span>where</span><span> parameters </span><span>or</span><span> RPC method are read </span><span>from</span><span>
    </span><span>--</span><span>pp                  </span><span>Pretty</span><span>-</span><span>print</span><span> </span><span>-</span><span> indent output JSON data
    </span><span>--</span><span>timeout</span><span>=&lt;</span><span>timeout</span><span>&gt;</span><span>   </span><span>Timeout</span><span> of RPC call </span><span>[</span><span>default</span><span>:</span><span> </span><span>30</span><span>]</span><span>
    </span><span>--</span><span>disable</span><span>-</span><span>int64</span><span>-</span><span>conv  </span><span>Disable</span><span> the </span><span>default</span><span> behaviour such that JSON numbers
                          are converted to float64 </span><span>or</span><span> int64 numbers </span><span>by</span><span> their
                          meaning</span><span>,</span><span> all result numbers will have float64 type


</span><span>Arguments</span><span>:</span><span>
    </span><span>&lt;</span><span>input</span><span>-</span><span>file</span><span>&gt;</span><span>          </span><span>File</span><span> </span><span>where</span><span> data are read </span><span>from</span><span>
    </span><span>&lt;host&gt;</span><span>                </span><span>Server</span><span> hostname
    </span><span>&lt;port&gt;</span><span>                </span><span>Server</span><span> port
    </span><span>&lt;method&gt;</span><span>              </span><span>Name</span><span> of RPC method
    </span><span>&lt;params&gt;</span><span>              </span><span>Parameters</span><span> of RPC method </span><span>in</span><span> JSON format</span></code></pre>
<h6>
Examples</h6>
<p>Encoding/decoding:</p>
<pre><code><span>$ cat test</span><span>.</span><span>json
</span><span>{</span><span>
  </span><span>"firstName"</span><span>:</span><span> </span><span>"John"</span><span>,</span><span>
  </span><span>"lastName"</span><span>:</span><span> </span><span>"Smith"</span><span>,</span><span>
  </span><span>"isAlive"</span><span>:</span><span> </span><span>true</span><span>,</span><span>
  </span><span>"age"</span><span>:</span><span> </span><span>25</span><span>,</span><span>
  </span><span>"height_cm"</span><span>:</span><span> </span><span>167.6</span><span>,</span><span>
  </span><span>"address"</span><span>:</span><span> </span><span>{</span><span>
    </span><span>"streetAddress"</span><span>:</span><span> </span><span>"21 2nd Street"</span><span>,</span><span>
    </span><span>"city"</span><span>:</span><span> </span><span>"New York"</span><span>,</span><span>
    </span><span>"state"</span><span>:</span><span> </span><span>"NY"</span><span>,</span><span>
    </span><span>"postalCode"</span><span>:</span><span> </span><span>"10021-3100"</span><span>
  </span><span>},</span><span>
  </span><span>"phoneNumbers"</span><span>:</span><span> </span><span>[</span><span>
    </span><span>{</span><span>
      </span><span>"type"</span><span>:</span><span> </span><span>"home"</span><span>,</span><span>
      </span><span>"number"</span><span>:</span><span> </span><span>"212 555-1234"</span><span>
    </span><span>},</span><span>
    </span><span>{</span><span>
      </span><span>"type"</span><span>:</span><span> </span><span>"office"</span><span>,</span><span>
      </span><span>"number"</span><span>:</span><span> </span><span>"646 555-4567"</span><span>
    </span><span>}</span><span>
  </span><span>],</span><span>
  </span><span>"children"</span><span>:</span><span> </span><span>[],</span><span>
  </span><span>"spouse"</span><span>:</span><span> </span><span>null</span><span>
</span><span>}</span><span>
$
$ msgpack</span><span>-</span><span>cli encode test</span><span>.</span><span>json </span><span>--</span><span>out</span><span> test</span><span>.</span><span>bin
$
$ ls </span><span>-</span><span>l test</span><span>.*</span><span> </span><span>|</span><span> awk </span><span>'{print $9, $5}'</span><span>
test</span><span>.</span><span>bin </span><span>242</span><span>
test</span><span>.</span><span>json </span><span>429</span><span>
$
$ msgpack</span><span>-</span><span>cli decode test</span><span>.</span><span>bin </span><span>--</span><span>pp  </span><span># pretty-print</span><span>
</span><span>{</span><span>
  </span><span>"address"</span><span>:</span><span> </span><span>{</span><span>
    </span><span>"city"</span><span>:</span><span> </span><span>"New York"</span><span>,</span><span>
    </span><span>"postalCode"</span><span>:</span><span> </span><span>"10021-3100"</span><span>,</span><span>
    </span><span>"state"</span><span>:</span><span> </span><span>"NY"</span><span>,</span><span>
    </span><span>"streetAddress"</span><span>:</span><span> </span><span>"21 2nd Street"</span><span>
  </span><span>},</span><span>
  </span><span>"age"</span><span>:</span><span> </span><span>25</span><span>,</span><span>
  </span><span>"children"</span><span>:</span><span> </span><span>[],</span><span>
  </span><span>"firstName"</span><span>:</span><span> </span><span>"John"</span><span>,</span><span>
  </span><span>"height_cm"</span><span>:</span><span> </span><span>167.6</span><span>,</span><span>
  </span><span>"isAlive"</span><span>:</span><span> </span><span>true</span><span>,</span><span>
  </span><span>"lastName"</span><span>:</span><span> </span><span>"Smith"</span><span>,</span><span>
  </span><span>"phoneNumbers"</span><span>:</span><span> </span><span>[</span><span>
    </span><span>{</span><span>
      </span><span>"number"</span><span>:</span><span> </span><span>"212 555-1234"</span><span>,</span><span>
      </span><span>"type"</span><span>:</span><span> </span><span>"home"</span><span>
    </span><span>},</span><span>
    </span><span>{</span><span>
      </span><span>"number"</span><span>:</span><span> </span><span>"646 555-4567"</span><span>,</span><span>
      </span><span>"type"</span><span>:</span><span> </span><span>"office"</span><span>
    </span><span>}</span><span>
  </span><span>],</span><span>
  </span><span>"spouse"</span><span>:</span><span> </span><span>null</span><span>
</span><span>}</span></code></pre>
<p>RPC calling:</p>
<pre><code><span>$ </span><span># zero params</span><span>
$ msgpack</span><span>-</span><span>cli rpc localhost </span><span>8000</span><span> echo
</span><span>[]</span><span>
$
$ </span><span># single param</span><span>
$ msgpack</span><span>-</span><span>cli rpc localhost </span><span>8000</span><span> echo </span><span>3.14159</span><span>
</span><span>[</span><span>3.14159</span><span>]</span><span>
$
$ </span><span># multiple params (as json array)</span><span>
$ msgpack</span><span>-</span><span>cli rpc localhost </span><span>8000</span><span> echo </span><span>'["abc", "def", "ghi", {"A": 65, "B": 66, "C": 67}]'</span><span>
</span><span>[</span><span>"abc"</span><span>,</span><span>"def"</span><span>,</span><span>"ghi"</span><span>,{</span><span>"A"</span><span>:</span><span>65</span><span>,</span><span>"B"</span><span>:</span><span>66</span><span>,</span><span>"C"</span><span>:</span><span>67</span><span>}]</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-SimpleMsgPack-Net"><h4><a href="https://github.com/ymofen/SimpleMsgPack.Net" target="_blank">ymofen/SimpleMsgPack.Net <span>https://github.com/ymofen/SimpleMsgPack.Net</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
SimpleMsgPack.Net</h5>
<p>MessagePack implementation for C# / msgpack.org[C#]</p>
<p>Binary files distributed via the NuGet package <a href="https://www.nuget.org/packages/SimpleMsgPack/" rel="nofollow">SimpleMsgPack</a>.</p>
<p>It's like JSON but small and fast.</p>
<pre><code><span>unit </span><span>Owner</span><span>:</span><span> D10</span><span>.</span><span>Mofen</span><span>
contact</span><span>:</span><span>
       qq</span><span>:</span><span>185511468</span><span>,</span><span> 
    email</span><span>:</span><span>ymofen@diocp</span><span>.</span><span>org</span><span>
	homepage</span><span>:</span><span>www</span><span>.</span><span>diocp</span><span>.</span><span>org
</span><span>if</span><span> you find any bug</span><span>,</span><span> please contact me</span><span>!</span></code></pre>
<h6>
Works with</h6>
<p>.NET Framework 4.x</p>
<h7>
Code Example</h7>
<div><pre>    <span>MsgPack</span> <span>msgpack</span> <span>=</span> <span>new</span> <span>MsgPack</span>();
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.name<span>"</span></span>).<span>AsString</span> <span>=</span> <span><span>"</span><span>"</span></span>;
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.age<span>"</span></span>).<span>AsInteger</span> <span>=</span> <span>25</span>;
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>.<span>Add</span>(<span>90</span>);
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>.<span>Add</span>(<span>80</span>);
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>.<span>Add</span>(<span><span>"</span><span>"</span></span>);
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>.<span>Add</span>(<span>3.1415926</span>);

    <span><span>//</span> pack file</span>
    <span>msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.filedata<span>"</span></span>).<span>LoadFileAsBytes</span>(<span><span>"</span>C:<span>\\</span>a.png<span>"</span></span>);

    <span><span>//</span> pack msgPack binary</span>
    <span>byte</span>[] <span>packData</span> <span>=</span> <span>msgpack</span>.<span>Encode2Bytes</span>();

    <span>MsgPack</span> <span>unpack_msgpack</span> <span>=</span> <span>new</span> <span>MsgPack</span>();
	
    <span><span>//</span> unpack msgpack</span>
    <span>unpack_msgpack</span>.<span>DecodeFromBytes</span>(<span>packData</span>);

    <span>System</span>.<span>Console</span>.<span>WriteLine</span>(<span><span>"</span>name:{0}, age:{1}<span>"</span></span>,
          <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.name<span>"</span></span>).<span>AsString</span>,
          <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.age<span>"</span></span>).<span>AsInteger</span>);

    <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>==================================<span>"</span></span>);
    <span>System</span>.<span>Console</span>.<span>WriteLine</span>(<span><span>"</span>use index property, Length{0}:{1}<span>"</span></span>,
          <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>.<span>Length</span>,
          <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>).<span>AsArray</span>[<span>0</span>].<span>AsString</span>
          );

    <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>==================================<span>"</span></span>);
    <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>use foreach statement:<span>"</span></span>);
    <span>foreach</span> (<span>MsgPack</span> <span>item</span> <span>in</span> <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.datas<span>"</span></span>))
    {
        <span>Console</span>.<span>WriteLine</span>(<span>item</span>.<span>AsString</span>);
    }

    <span><span>//</span> unpack filedata </span>
    <span>unpack_msgpack</span>.<span>ForcePathObject</span>(<span><span>"</span>p.filedata<span>"</span></span>).<span>SaveBytesToFile</span>(<span><span>"</span>C:<span>\\</span>b.png<span>"</span></span>);
    <span>Console</span>.<span>Read</span>();</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-ymofen-thealchemist"><h4><a href="https://github.com/ymofen/thealchemist" target="_blank">ymofen/thealchemist <span>https://github.com/ymofen/thealchemist</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
The Alchemist</h5>
<p><a href="https://travis-ci.org/vertexclique/thealchemist" rel="nofollow"><img src="https://camo.githubusercontent.com/0e934e21d804822bd49d2e7a616ca540397dba17/68747470733a2f2f7472617669732d63692e6f72672f766572746578636c697175652f746865616c6368656d6973742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vertexclique/thealchemist.svg?branch=master"></a></p>
<p>Elixir implementation bundle for MessagePack</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/0951f3b966b46f3b8a5c8e7fdd6c2dde1a84f154/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067"><img src="https://camo.githubusercontent.com/0951f3b966b46f3b8a5c8e7fdd6c2dde1a84f154/687474703a2f2f7777772e77686174732d796f75722d7369676e2e636f6d2f696d616765732f416c6368656d7953796d626f6c732e6a7067" alt="The Alchemist" data-canonical-src="http://www.whats-your-sign.com/images/AlchemySymbols.jpg"></a></p>
<p>Elixir implementation relies on <code>mururu/msgpack-elixir</code>
<a href="http://badge.fury.io/gh/mururu%2Fmsgpack-elixir" rel="nofollow"><img src="https://camo.githubusercontent.com/12454619ac1503d662f763767f2a29f36f594d45/68747470733a2f2f62616467652e667572792e696f2f67682f6d75727572752532466d73677061636b2d656c697869722e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/mururu%2Fmsgpack-elixir.svg"></a></p>
<p>Pure erlang implementation used with <code>msgpack/msgpack-erlang</code>
<a href="http://badge.fury.io/gh/msgpack%2Fmsgpack-erlang" rel="nofollow"><img src="https://camo.githubusercontent.com/5168eb3d47691288e71bbc7342f91bdd15bd3205/68747470733a2f2f62616467652e667572792e696f2f67682f6d73677061636b2532466d73677061636b2d65726c616e672e737667" alt="GitHub version" data-canonical-src="https://badge.fury.io/gh/msgpack%2Fmsgpack-erlang.svg"></a></p>
<h6>
Usage</h6>
<p>###&nbsp;In pure elixir:</p>
<div><pre><span><span>#</span> pack</span>
<span>TheAlchemist</span>.pack([<span>1</span>,<span>2</span>,<span>3</span>]) <span><span>#</span>=&gt; { :ok, &lt;&lt;147,1,2,3&gt;&gt; }</span>
<span>TheAlchemist</span>.pack!([<span>1</span>,<span>2</span>,<span>3</span>]) <span><span>#</span>=&gt; &lt;&lt;147,1,2,3&gt;&gt;</span>

<span><span>#</span> unpack</span>
<span>TheAlchemist</span>.unpack(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; { :ok, [1,2,3] }</span>
<span>TheAlchemist</span>.unpack!(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; [1,2,3]</span>

<span><span>#</span> unpack_once</span>
<span>TheAlchemist</span>.unpack_once(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; {:ok, {[1, 2, 3], &lt;&lt;4&gt;&gt;}}</span>
<span>TheAlchemist</span>.unpack_once!(<span>&lt;&lt;</span><span>147</span>,<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span><span>&gt;&gt;</span>) <span><span>#</span>=&gt; {[1, 2, 3], &lt;&lt;4&gt;&gt;}</span>
</pre></div>
<p>###&nbsp;With underlying erlang:</p>
<h8>
Deserialization</h8>
<div><pre>msgpacked <span>=</span> <span>TheAlchemistErl</span>.pack(<span><span>'</span>{"test":false}<span>'</span></span>)
<span>TheAlchemistErl</span>.unpack(msgpacked)</pre></div>
<h8>
Stream deserialization</h8>
<div><pre>mat <span>=</span> <span>TheAlchemistErl</span>.unpack_stream(data)
<span>TheAlchemistErl</span>.unpack_stream(elem(mat, <span>1</span>)),</pre></div>
<h8>
String type</h8>
<p>Now this supports string type!</p>
<div><pre>opt <span>=</span> [{<span>:enable_str</span>, <span>true</span>}]
<span>TheAlchemistErl</span>.unpack(<span>TheAlchemistErl</span>.pack(<span><span>"</span>kanji<span>"</span></span>, opt), opt)
 <span>=&gt;</span> {<span>:ok</span>, <span><span>"</span>kanji<span>"</span></span>}</pre></div>
<h8>
Map Style</h8>
<p>Since Erlang/OTP 17.0</p>
<div><pre><span>msgpack</span>:<span>pack</span>(#{ &lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt; <span>=&gt;</span> &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt; }, [{<span>format</span>, <span>map</span>}]).</pre></div>
<p>Or use old jiffy/jsx style</p>
<div><pre><span>msgpack</span>:<span>pack</span>({[{&lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt;, &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt;}]}, [{<span>format</span>, <span>jiffy</span>}]),
<span>msgpack</span>:<span>pack</span>([{&lt;&lt;<span><span>"</span>key<span>"</span></span>&gt;&gt;, &lt;&lt;<span><span>"</span>value<span>"</span></span>&gt;&gt;}], [{<span>format</span>, <span>jsx</span>}]).</pre></div>
<h6>
Running interactively</h6>
<p>Firstly <code>make all</code> to ensure all source files are compiled
after that you can bring the <code>ERL shell</code> with</p>
<p><code>make run</code></p>
<p>If you want to bring the <code>IEX</code> you can type</p>
<p><code>make runex</code></p>
</article>
  </div>
        </div>
        
        
        
        
        
        <div id="qs-jakm-txmsgpackrpc"><h4><a href="https://github.com/jakm/txmsgpackrpc" target="_blank">jakm/txmsgpackrpc <span>https://github.com/jakm/txmsgpackrpc</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
txmsgpackrpc</h5>
<a href="https://travis-ci.org/jakm/txmsgpackrpc" rel="nofollow"><img alt="https://travis-ci.org/jakm/txmsgpackrpc.svg?branch=master" src="https://camo.githubusercontent.com/d21207666bf99b49ad80b2385c92e1c5a159fef5/68747470733a2f2f7472617669732d63692e6f72672f6a616b6d2f74786d73677061636b7270632e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/jakm/txmsgpackrpc.svg?branch=master"></a>
<p>For the latest source code, see <a href="https://github.com/jakm/txmsgpackrpc">http://github.com/jakm/txmsgpackrpc</a></p>
<p><code>txmsgpackrpc</code> is a library for writing asynchronous
<a href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">msgpack-rpc</a>
servers and clients in Python, using <a href="http://twistedmatrix.com/" rel="nofollow">Twisted
framework</a>. Library is based on
<a href="https://github.com/donalm/txMsgpack">txMsgpack</a>, but some
improvements and fixes were made.</p>
<a name="user-content-features"></a>
<h6>
Features</h6>
<ul>
<li>user friendly API</li>
<li>modular object model</li>
<li>working timeouts and reconnecting</li>
<li>connection pool support</li>
<li>TCP, SSL, UDP and UNIX sockets</li>
</ul>
<a name="user-content-python-3-note"></a>
<h6>
Python 3 note</h6>
<p>To use UNIX sockets with Python 3 please use Twisted framework 15.3.0 and above.</p>
<a name="user-content-dependencies"></a>
<h6>
Dependencies</h6>
<ul>
<li>msgpack-python <a href="https://pypi.python.org/pypi/msgpack-python/" rel="nofollow">https://pypi.python.org/pypi/msgpack-python/</a>
</li>
<li>Twisted <a href="http://twistedmatrix.com/trac/" rel="nofollow">http://twistedmatrix.com/trac/</a>
</li>
</ul>
<a name="user-content-installation"></a>
<h6>
Installation</h6>
<div><pre>% pip install txmsgpackrpc</pre></div>
<p>Debian packages are available on project's <a href="https://github.com/jakm/txmsgpackrpc/releases/latest">Releases
page</a>.</p>
<a name="user-content-tcp-example"></a>
<h6>
TCP example</h6>
<p>Computation of PI using Chudnovsky algorithm in subprocess. For details,
see <a href="http://www.craig-wood.com/nick/articles/pi-chudnovsky/" rel="nofollow">http://www.craig-wood.com/nick/articles/pi-chudnovsky/</a>.</p>
<a name="user-content-results"></a>
<h7>
Results</h7>
<pre>Computation of PI with 5 places finished in 0.022390 seconds

Computation of PI with 100 places finished in 0.037856 seconds

Computation of PI with 1000 places finished in 0.038070 seconds

Computation of PI with 10000 places finished in 0.073907 seconds

Computation of PI with 100000 places finished in 6.741683 seconds

Computation of PI with 5 places finished in 0.001142 seconds

Computation of PI with 100 places finished in 0.001182 seconds

Computation of PI with 1000 places finished in 0.001206 seconds

Computation of PI with 10000 places finished in 0.001230 seconds

Computation of PI with 100000 places finished in 0.001255 seconds

Computation of PI with 1000000 places finished in 432.574457 seconds

Computation of PI with 1000000 places finished in 402.551226 seconds

DONE
</pre>
<a name="user-content-server"></a>
<h7>
Server</h7>
<div><pre><span>from</span> <span>__future__</span> <span>import</span> print_function

<span>from</span> collections <span>import</span> defaultdict
<span>from</span> twisted.internet <span>import</span> defer, reactor, utils
<span>from</span> twisted.python <span>import</span> failure
<span>from</span> txmsgpackrpc.server <span>import</span> MsgpackRPCServer


pi_chudovsky_bs <span>=</span> <span><span>'''</span></span>
<span>"""</span>
<span>Python3 program to calculate Pi using python long integers, binary</span>
<span>splitting and the Chudnovsky algorithm</span>
<span></span>
<span>See: http://www.craig-wood.com/nick/articles/pi-chudnovsky/ for more</span>
<span>info</span>
<span></span>
<span>Nick Craig-Wood &lt;nick@craig-wood.com&gt;</span>
<span>"""</span>
<span></span>
<span>import math</span>
<span>from time import time</span>
<span></span>
<span>def sqrt(n, one):</span>
<span>    """</span>
<span>    Return the square root of n as a fixed point number with the one</span>
<span>    passed in.  It uses a second order Newton-Raphson convgence.  This</span>
<span>    doubles the number of significant figures on each iteration.</span>
<span>    """</span>
<span>    # Use floating point arithmetic to make an initial guess</span>
<span>    floating_point_precision = 10**16</span>
<span>    n_float = float((n * floating_point_precision) // one) / floating_point_precision</span>
<span>    x = (int(floating_point_precision * math.sqrt(n_float)) * one) // floating_point_precision</span>
<span>    n_one = n * one</span>
<span>    while 1:</span>
<span>        x_old = x</span>
<span>        x = (x + n_one // x) // 2</span>
<span>        if x == x_old:</span>
<span>            break</span>
<span>    return x</span>
<span></span>
<span>def pi_chudnovsky_bs(digits):</span>
<span>    """</span>
<span>    Compute int(pi * 10**digits)</span>
<span></span>
<span>    This is done using Chudnovsky's series with binary splitting</span>
<span>    """</span>
<span>    C = 640320</span>
<span>    C3_OVER_24 = C**3 // 24</span>
<span>    def bs(a, b):</span>
<span>        """</span>
<span>        Computes the terms for binary splitting the Chudnovsky infinite series</span>
<span></span>
<span>        a(a) = +/- (13591409 + 545140134*a)</span>
<span>        p(a) = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span>        b(a) = 1</span>
<span>        q(a) = a*a*a*C3_OVER_24</span>
<span></span>
<span>        returns P(a,b), Q(a,b) and T(a,b)</span>
<span>        """</span>
<span>        if b - a == 1:</span>
<span>            # Directly compute P(a,a+1), Q(a,a+1) and T(a,a+1)</span>
<span>            if a == 0:</span>
<span>                Pab = Qab = 1</span>
<span>            else:</span>
<span>                Pab = (6*a-5)*(2*a-1)*(6*a-1)</span>
<span>                Qab = a*a*a*C3_OVER_24</span>
<span>            Tab = Pab * (13591409 + 545140134*a) # a(a) * p(a)</span>
<span>            if a &amp; 1:</span>
<span>                Tab = -Tab</span>
<span>        else:</span>
<span>            # Recursively compute P(a,b), Q(a,b) and T(a,b)</span>
<span>            # m is the midpoint of a and b</span>
<span>            m = (a + b) // 2</span>
<span>            # Recursively calculate P(a,m), Q(a,m) and T(a,m)</span>
<span>            Pam, Qam, Tam = bs(a, m)</span>
<span>            # Recursively calculate P(m,b), Q(m,b) and T(m,b)</span>
<span>            Pmb, Qmb, Tmb = bs(m, b)</span>
<span>            # Now combine</span>
<span>            Pab = Pam * Pmb</span>
<span>            Qab = Qam * Qmb</span>
<span>            Tab = Qmb * Tam + Pam * Tmb</span>
<span>        return Pab, Qab, Tab</span>
<span>    # how many terms to compute</span>
<span>    DIGITS_PER_TERM = math.log10(C3_OVER_24/6/2/6)</span>
<span>    N = int(digits/DIGITS_PER_TERM + 1)</span>
<span>    # Calclate P(0,N) and Q(0,N)</span>
<span>    P, Q, T = bs(0, N)</span>
<span>    one = 10**digits</span>
<span>    sqrtC = sqrt(10005*one, one)</span>
<span>    return (Q*426880*sqrtC) // T</span>
<span></span>
<span>if __name__ == "__main__":</span>
<span>    import sys</span>
<span>    digits = int(sys.argv[1])</span>
<span>    pi = pi_chudnovsky_bs(digits)</span>
<span>    print(pi)</span>
<span><span>'''</span></span>


<span>def</span> <span>set_timeout</span>(<span>deferred</span>, <span>timeout</span><span>=</span><span>30</span>):
    <span>def</span> <span>callback</span>(<span>value</span>):
        <span>if</span> <span>not</span> watchdog.called:
            watchdog.cancel()
        <span>return</span> value

    deferred.addBoth(callback)

    watchdog <span>=</span> reactor.callLater(timeout, defer.timeout, deferred)


<span>class</span> <span>ComputePI</span>(<span>MsgpackRPCServer</span>):

    <span>def</span> <span>__init__</span>(<span><span>self</span></span>):
        <span>self</span>.waiting <span>=</span> defaultdict(<span>list</span>)
        <span>self</span>.results <span>=</span> {}

    <span>def</span> <span>remote_PI</span>(<span><span>self</span></span>, <span>digits</span>, <span>timeout</span><span>=</span><span>None</span>):
        <span>if</span> digits <span>in</span> <span>self</span>.results:
            <span>return</span> defer.succeed(<span>self</span>.results[digits])

        d <span>=</span> defer.Deferred()

        <span>if</span> digits <span>not</span> <span>in</span> <span>self</span>.waiting:
            subprocessDeferred <span>=</span> <span>self</span>.computePI(digits, timeout)

            <span>def</span> <span>callWaiting</span>(<span>res</span>):
                waiting <span>=</span> <span>self</span>.waiting[digits]
                <span>del</span> <span>self</span>.waiting[digits]

                <span>if</span> <span>isinstance</span>(res, failure.Failure):
                    func <span>=</span> <span>lambda</span> <span>d</span>: d.errback(res)
                <span>else</span>:
                    func <span>=</span> <span>lambda</span> <span>d</span>: d.callback(res)

                <span>for</span> d <span>in</span> waiting:
                    func(d)

            subprocessDeferred.addBoth(callWaiting)

        <span>self</span>.waiting[digits].append(d)

        <span>return</span> d

    <span>def</span> <span>computePI</span>(<span><span>self</span></span>, <span>digits</span>, <span>timeout</span>):
        d <span>=</span> utils.getProcessOutputAndValue(<span><span>'</span>/usr/bin/python<span>'</span></span>, <span>args</span><span>=</span>(<span><span>'</span>-c<span>'</span></span>, pi_chudovsky_bs, <span>str</span>(digits)))

        <span>def</span> <span>callback</span>((<span>out</span>, <span>err</span>, <span>code</span>)):
            <span>if</span> code <span>==</span> <span>0</span>:
                pi <span>=</span> <span>int</span>(out)
                <span>self</span>.results[digits] <span>=</span> pi
                <span>return</span> pi
            <span>else</span>:
                <span>return</span> failure.Failure(<span>RuntimeError</span>(<span><span>'</span>Computation failed: <span>'</span></span> <span>+</span> err))

        <span>if</span> timeout <span>is</span> <span>not</span> <span>None</span>:
            set_timeout(d, timeout)

        d.addCallback(callback)

        <span>return</span> d


<span>def</span> <span>main</span>():
    server <span>=</span> ComputePI()
    reactor.listenTCP(<span>8000</span>, server.getStreamFactory())

<span>if</span> <span>__name__</span> <span>==</span> <span><span>'</span>__main__<span>'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-client"></a>
<h7>
Client</h7>
<div><pre><span>from</span> <span>__future__</span> <span>import</span> print_function

<span>import</span> sys
<span>import</span> time
<span>from</span> twisted.internet <span>import</span> defer, reactor, task
<span>from</span> twisted.python <span>import</span> failure

<span>@defer.inlineCallbacks</span>
<span>def</span> <span>main</span>():
    <span>try</span>:

        <span>from</span> txmsgpackrpc.client <span>import</span> connect

        c <span>=</span> <span>yield</span> connect(<span><span>'</span>localhost<span>'</span></span>, <span>8000</span>, <span>waitTimeout</span><span>=</span><span>900</span>)

        <span>def</span> <span>callback</span>(<span>res</span>, <span>digits</span>, <span>start_time</span>):
            <span>if</span> <span>isinstance</span>(res, failure.Failure):
                <span>print</span>(<span><span>'</span>Computation of PI with <span>%d</span> places failed: <span>%s</span><span>'</span></span> <span>%</span>
                      (digits, res.getErrorMessage()), <span>end</span><span>=</span><span><span>'</span><span>\n\n</span><span>'</span></span>)
            <span>else</span>:
                <span>print</span>(<span><span>'</span>Computation of PI with <span>%d</span> places finished in <span>%f</span> seconds<span>'</span></span> <span>%</span>
                      (digits, time.time() <span>-</span> start_time), <span>end</span><span>=</span><span><span>'</span><span>\n\n</span><span>'</span></span>)
            sys.stdout.flush()

        defers <span>=</span> []
        <span>for</span> _ <span>in</span> <span>range</span>(<span>2</span>):
            <span>for</span> digits <span>in</span> (<span>5</span>, <span>100</span>, <span>1000</span>, <span>10000</span>, <span>100000</span>, <span>1000000</span>):
                d <span>=</span> c.createRequest(<span><span>'</span>PI<span>'</span></span>, digits, <span>600</span>)
                d.addBoth(callback, digits, time.time())
                defers.append(d)
            <span><span>#</span> wait for 30 seconds</span>
            <span>yield</span> task.deferLater(reactor, <span>30</span>, <span>lambda</span>: <span>None</span>)

        <span>yield</span> defer.DeferredList(defers)

        <span>print</span>(<span><span>'</span>DONE<span>'</span></span>)

    <span>except</span> <span>Exception</span>:
        <span>import</span> traceback
        traceback.print_exc()
    <span>finally</span>:
        reactor.stop()

<span>if</span> <span>__name__</span> <span>==</span> <span><span>'</span>__main__<span>'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-multicast-udp-example"></a>
<h6>
Multicast UDP example</h6>
<p>Example servers join to group 224.0.0.5 and listen on port 8000. Their only
method <code>echo</code> returns its parameter.</p>
<p>Client joins group to 224.0.0.5, sends multicast request to group on port 8000
and waits for 5 seconds for responses. If some responses are received,
protocol callbacks with tuple of results and individual parts are checked for
errors. If no responses are received, protocol errbacks with TimeoutError.</p>
<p>Because there is no common way to determine number of peers in group,
MsgpackMulticastDatagramProtocol always wait for responses until waitTimeout
expires.</p>
<div><pre>$ <span><span>#</span> setup multicast routing</span>
$ ip route add 224.0.0.0/4 dev eth0
$ <span>echo</span> 1 <span>&gt;</span> /proc/sys/net/ipv4/ip_forward
$
$ <span><span>#</span> start servers listening on port 8000</span>
$ python examples/tx_rpc_server_udp_multicast.py <span>&amp;</span>
[1] 3584
$ python examples/tx_rpc_server_udp_multicast.py <span>&amp;</span>
[2] 3585
$ python examples/tx_rpc_server_udp_multicast.py <span>&amp;</span>
[3] 3586
$ python examples/tx_rpc_server_udp_multicast.py <span>&amp;</span>
[4] 3587
$ python examples/tx_rpc_server_udp_multicast.py <span>&amp;</span>
[5] 3588
$
$ <span><span>#</span> execute client</span>
$ python examples/tx_rpc_client_udp_multicast.py
Received results from 5 peers
$</pre></div>
<a name="user-content-id1"></a>
<h7>
Server</h7>
<div><pre><span>from</span> twisted.internet <span>import</span> defer, reactor, task
<span>from</span> txmsgpackrpc.server <span>import</span> MsgpackRPCServer


<span>class</span> <span>EchoRPC</span>(<span>MsgpackRPCServer</span>):

    <span>@defer.inlineCallbacks</span>
    <span>def</span> <span>remote_echo</span>(<span><span>self</span></span>, <span>value</span>, <span>delay</span><span>=</span><span>None</span>, <span>msgid</span><span>=</span><span>None</span>):
        <span>if</span> delay <span>is</span> <span>not</span> <span>None</span>:
            <span>yield</span> task.deferLater(reactor, delay, <span>lambda</span>: <span>None</span>)
        defer.returnValue(value)


<span>def</span> <span>main</span>():
    server <span>=</span> EchoRPC()
    reactor.listenMulticast(<span>8000</span>, server.getMulticastProtocol(<span><span>'</span>228.0.0.5<span>'</span></span>, <span>ttl</span><span>=</span><span>5</span>),
                            <span>listenMultiple</span><span>=</span><span>True</span>)

<span>if</span> <span>__name__</span> <span>==</span> <span><span>'</span>__main__<span>'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>
<a name="user-content-id2"></a>
<h7>
Client</h7>
<div><pre><span>from</span> <span>__future__</span> <span>import</span> print_function

<span>from</span> twisted.internet <span>import</span> defer, reactor

<span>@defer.inlineCallbacks</span>
<span>def</span> <span>main</span>():
    <span>try</span>:

        <span>from</span> txmsgpackrpc.client <span>import</span> connect_multicast

        c <span>=</span> <span>yield</span> connect_multicast(<span><span>'</span>228.0.0.5<span>'</span></span>, <span>8000</span>, <span>ttl</span><span>=</span><span>5</span>, <span>waitTimeout</span><span>=</span><span>5</span>)

        data <span>=</span> {
                    <span><span>'</span>firstName<span>'</span></span>: <span><span>'</span>John<span>'</span></span>,
                    <span><span>'</span>lastName<span>'</span></span>: <span><span>'</span>Smith<span>'</span></span>,
                    <span><span>'</span>isAlive<span>'</span></span>: <span>True</span>,
                    <span><span>'</span>age<span>'</span></span>: <span>25</span>,
                    <span><span>'</span>height_cm<span>'</span></span>: <span>167.6</span>,
                    <span><span>'</span>address<span>'</span></span>: {
                      <span><span>'</span>streetAddress<span>'</span></span>: <span><span>"</span>21 2nd Street<span>"</span></span>,
                      <span><span>"</span>city<span>"</span></span>: <span><span>'</span>New York<span>'</span></span>,
                      <span><span>"</span>state<span>"</span></span>: <span><span>'</span>NY<span>'</span></span>,
                      <span><span>'</span>postalCode<span>'</span></span>: <span><span>'</span>10021-3100<span>'</span></span>
                    },
                    <span><span>'</span>phoneNumbers<span>'</span></span>: [
                      {
                        <span><span>'</span>type<span>'</span></span>: <span><span>'</span>home<span>'</span></span>,
                        <span><span>'</span>number<span>'</span></span>: <span><span>'</span>212 555-1234<span>'</span></span>
                      },
                      {
                        <span><span>'</span>type<span>'</span></span>: <span><span>'</span>office<span>'</span></span>,
                        <span><span>'</span>number<span>'</span></span>: <span><span>'</span>646 555-4567<span>'</span></span>
                      }
                    ],
                    <span><span>'</span>children<span>'</span></span>: [],
                    <span><span>'</span>spouse<span>'</span></span>: <span>None</span>
                  }

        results <span>=</span> <span>yield</span> c.createRequest(<span><span>'</span>echo<span>'</span></span>, data)

        <span>assert</span> <span>isinstance</span>(results, <span>tuple</span>)

        <span>print</span>(<span><span>'</span>Received results from <span>%d</span> peers<span>'</span></span> <span>%</span> <span>len</span>(results))

        <span>for</span> i, result <span>in</span> <span>enumerate</span>(results):
            <span>if</span> result <span>!=</span> data:
                <span>print</span>(<span><span>'</span>Result <span>%d</span> mismatch<span>'</span></span> <span>%</span> i)
                <span>print</span>(result)

    <span>except</span> <span>Exception</span>:
        <span>import</span> traceback
        traceback.print_exc()
    <span>finally</span>:
        reactor.stop()

<span>if</span> <span>__name__</span> <span>==</span> <span><span>'</span>__main__<span>'</span></span>:
    reactor.callWhenRunning(main)
    reactor.run()</pre></div>

</article>
  </div>
        </div>
        
        <div id="qs-jonghough-msgpack-j"><h4><a href="https://github.com/jonghough/msgpack-j" target="_blank">jonghough/msgpack-j <span>https://github.com/jonghough/msgpack-j</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-j</h5>
<p>Implementation of the Message Pack serialization format in J.
###Usage
import into projects and open in jqt or other. It's very simple.</p>
<p>###Examples
<code>pack</code> packs J types into a byte string. <code>unpack</code> reverses this.</p>
<pre><code><span>  </span><span>`pack 'hello world'`</span><span>

     </span><span>`hello world`</span><span>

  </span><span>`unpack hello world`</span><span>

     </span><span>`'hello world'`</span></code></pre>
<p><b><code>packObj</code></b> packs J types into a hex string (string literal). <b><code>unpackObj</code></b> reverses this.</p>
<p>e.g.</p>
<pre><code><span>   </span><span>`packObj 'Hello World'`</span><span>

     </span><span>`ab48656c6c6f20576f726c64`</span><span>

  </span><span>`unpackObj 'ab48656c6c6f20576f726c64'`</span><span>

     </span><span>`Hello World`</span></code></pre>
<p>###More Usage
Example:</p>
<pre><code><span>  </span><span>`pack 2;4.67;'hello, world'`</span><span>

     </span><span>`@zGhello, world`</span><span>

  </span><span>`packObj 2;4.67;'hello, world'`</span><span>

     </span><span>`9302cb4012ae147ae147aeac68656c6c6f2c20776f726c64`</span></code></pre>
<p>JSON representation:
<code>[2,4.67,"hello, world"]</code></p>
<p>Example:</p>
<pre><code><span>  </span><span>`unpackObj '81a46461746183a2696401a673636f72657394cb400999999999999acb4016cccccccccccdcb40091eb851eb851fcb4007333333333333a56f7468657283a4736f6d65d1f2b8a46d6f7265ccc8a4646174610c'`</span></code></pre>
<p>returns a nested dictionary.</p>
<p>JSON representation:</p>
<pre><code><span>  </span><span>`{"data":{"id":1,"scores":[3.2,5.7,3.14,2.9],"other":{"some":_3400,"more":200,"data":12}}}`</span></code></pre>
<p>###Handling dictionary / hashmap datatypes</p>
<p>Since J has no native Dictionary / Hashmap type, one has been implemented for the purposes of MsgPack serialization.</p>
<p>Construction:</p>
<pre><code><span>  </span><span>`HM =: '' conew 'HashMap'`</span></code></pre>
<p>This will instantiate a new HashMap object.</p>
<pre><code><span>  </span><span>`set__HM 'key';'value'`</span></code></pre>
<p>This will add a key value pair to the dicitonary. Note the length of the boxed array argument must be two. i.e. if  the value is an array itself, then it must be boxed together before appending to the key value.</p>
<pre><code><span>  </span><span>`get__HM 'key'`</span></code></pre>
<p>This will return the value for the given key, if one exists.</p>
<p>To pack a HashMap:</p>
<pre><code><span>  </span><span>`packObj s: HM`</span></code></pre>
<p>Here HM is the HashMap reference name. It must be symbolized first, before packing. Furthermore, to add a HashMap as a value of another HashMap:</p>
<pre><code><span>  </span><span>`set__HM 'hashmapkey';s:HM2`</span></code></pre>
<p>The inner HashMap reference (HM2) must be symbolized before adding to the dictionary. If you are adding a list of HashMaps to the parent HashMap:</p>
<pre><code><span>  </span><span>`set__HM 'key'; &lt;(s:HM2;s:HM3;s:HM4)`</span></code></pre>
<p>Note the HashMap array is boxed so that the argument for <code>set</code> is of length two. Since the HashMap <code>HM</code> stores the reference to the child HashMaps as symbols, they must be desymbolized if retrieved. e.g.</p>
<pre><code><span>  </span><span>`ChildHM =: getHashmapFromValue_HashMap_ get__HM 'mychildHashMapkey'`</span></code></pre>
<p>Here, <b><code>getHashmapFromValue_HashMap_</code></b> ensures that the retrieved object is a reference to a hashmap, as is wanted.</p>
<p>When unpacking data, assuming the root object is a dictionary / hashmap:</p>
<pre><code><span>  </span><span>`HM =: 5 s: unpackObj 'some serialized data'`</span></code></pre>
<p><b><code>5 s:</code></b> must be called to desymbolize the reference to the HashMap. Furthermore, all child HashMaps of <code>HM</code> must also be desymbolized too.</p>
<p>`</p>
</article>
  </div>
        </div>
        
        <div id="qs-a2-MessagePack-swift"><h4><a href="https://github.com/a2/MessagePack.swift" target="_blank">a2/MessagePack.swift <span>https://github.com/a2/MessagePack.swift</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack.swift</h5>
<p><a href="https://travis-ci.org/a2/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/aeb69d44d1af41ab4bb6a50f7fa3c1386330789a/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f61322f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="CI Status" data-canonical-src="https://img.shields.io/travis/a2/MessagePack.swift.svg?style=flat"></a>
<a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/e549c84798d417d8089d80bbfecae2191e0f8c4a/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f762f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="Version" data-canonical-src="https://img.shields.io/cocoapods/v/MessagePack.swift.svg?style=flat"></a>
<a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/b0f6a88c691d89c58f96fd96bbca5aab6f7a6e7e/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f6c2f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="License" data-canonical-src="https://img.shields.io/cocoapods/l/MessagePack.swift.svg?style=flat"></a>
<a href="http://cocoapods.org/pods/MessagePack.swift" rel="nofollow"><img src="https://camo.githubusercontent.com/ab4a55d3bd8eecba734e94348b174cbb629cbbd8/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f702f4d6573736167655061636b2e73776966742e7376673f7374796c653d666c6174" alt="Platform" data-canonical-src="https://img.shields.io/cocoapods/p/MessagePack.swift.svg?style=flat"></a></p>
<p>A fast, zero-dependency MessagePack implementation written in Swift 4. Supports Apple platforms and Linux.</p>
<h6>
Installation</h6>
<h7>
CocoaPods</h7>
<p>To use CocoaPods, add the following to your Podfile:</p>
<div><pre>pod <span><span>'</span>MessagePack.swift<span>'</span></span>, <span><span>'</span>~&gt; 3.0<span>'</span></span></pre></div>
<h7>
Carthage</h7>
<p>To use Carthage, add the following to your Cartfile:</p>
<pre lang="ogdl"><code><span>github </span><span>"a2/MessagePack.swift"</span><span> </span><span>~&gt;</span><span> </span><span>3.0</span></code></pre>
<h7>
SPM (Swift Package Manager)</h7>
<p>You can easily integrate MessagePack.swift in your app with SPM. Just add MessagePack.swift as a dependency:</p>
<div><pre><span>import</span> <span>PackageDescription</span>

<span>let</span> package <span>=</span> <span>Package</span>(
    <span>name</span>: <span><span>"</span>MyAwesomeApp<span>"</span></span>,
    <span>dependencies</span>: [
        .<span>Package</span>(<span>url</span>: <span><span>"</span>https://github.com/a2/MessagePack.swift.git<span>"</span></span>, <span>majorVersion</span>: <span>3</span>),
    ]
)</pre></div>
<h6>
Version</h6>
<ul>
<li>Versions 3.x support Swift 4.</li>
<li>Support for Swift 3 was dropped after <a href="https://github.com/a2/MessagePack.swift/releases/tag/2.1.1">2.1.1</a>.</li>
<li>Support for Swift 2 was dropped after <a href="https://github.com/a2/MessagePack.swift/releases/tag/1.2.0">1.2.0</a>.</li>
</ul>
<h6>
Authors</h6>
<p>Alexsander Akers, <a href="mailto:me@a2.io">me@a2.io</a></p>
<h6>
License</h6>
<p>MessagePack.swift is available under the MIT license. See the LICENSE file for more info.</p>
</article>
  </div>
        </div>
        
        <div id="qs-akiradeveloper-msgpack-nim"><h4><a href="https://github.com/akiradeveloper/msgpack-nim" target="_blank">akiradeveloper/msgpack-nim <span>https://github.com/akiradeveloper/msgpack-nim</span></a></h4>
<div id="readme">
    <article itemprop="text"><p>I will start this project once Nim compiler reaches 1.0</p>
<h5>
msgpack-nim</h5>
<p>A MessagePack binding for Nim</p>
<p><a href="https://travis-ci.org/akiradeveloper/msgpack-nim" rel="nofollow"><img src="https://camo.githubusercontent.com/fafee151bfb3e0cfecd74e540d07e84245b0feb3/68747470733a2f2f7472617669732d63692e6f72672f616b697261646576656c6f7065722f6d73677061636b2d6e696d2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/akiradeveloper/msgpack-nim.svg?branch=master"></a></p>
<p>API: <a href="https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html" rel="nofollow">https://rawgit.com/akiradeveloper/msgpack-nim/master/msgpack.html</a></p>
<p>msgpack-nim currently provides only the basic functionality.
Please see what's listed in Todo section. Compared to other language bindings, it's well-tested by
1000 auto-generated test cases by Haskell QuickCheck, which always runs
on every commit to Github repository. Please try <code>make quickcheck</code> on your local machine
to see what happens (It will take a bit while. Be patient). Have a nice packing!</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/98a4aa48feec91b3cfa37ab7b62a90df53e2f1ff/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667"><img src="https://camo.githubusercontent.com/98a4aa48feec91b3cfa37ab7b62a90df53e2f1ff/68747470733a2f2f7261776769742e636f6d2f616b697261646576656c6f7065722f6d73677061636b2d6e696d2f6d61737465722f6f766572766965772e737667" alt="Overview" data-canonical-src="https://rawgit.com/akiradeveloper/msgpack-nim/master/overview.svg"></a></p>
<h6>
Install</h6>
<div><pre>$ nimble update
$ nimble install msgpack</pre></div>
<h6>
Example</h6>
<div><pre><span>import</span> msgpack
<span>import</span> streams

<span><span># </span><span>You can use any stream subclasses to serialize/deserialize</span></span>
<span><span># </span><span>messages. e.g. FileStream</span></span>
<span>let</span> st: <span>Stream</span> = <span>newStringStream</span>()

<span>assert</span>(st.getPosition == <span>0</span>)

<span><span># </span><span>Type checking protects you from making trivial mistakes.</span></span>
<span><span># </span><span>Now we pack {"a":[5,-3], "b":[1,2,3]} but more complex</span></span>
<span><span># </span><span>combination of any Msg types is allowed.</span></span>
<span><span>#</span></span>
<span><span># </span><span>In xs we can mix specific conversion (PFixNum) and generic</span></span>
<span><span># </span><span>conversion (unwrap).</span></span>
<span>let</span> xs: <span>Msg</span> = <span>wrap</span>(@[<span>PFixNum</span>(<span>5</span>), (-<span>3</span>).wrap])
<span>let</span> ys: <span>Msg</span> = <span>wrap</span>(@[(<span>"a"</span><span>.</span>wrap, xs.wrap), (<span>"b"</span><span>.</span>wrap, @[<span>1</span>, <span>2</span>, <span>3</span>].wrap)])
st.<span>pack</span>(ys.wrap) <span><span># </span><span>Serialize!</span></span>

<span><span># </span><span>We need to reset the cursor to the beginning of the target</span></span>
<span><span># </span><span>byte sequence.</span></span>
st.<span>setPosition</span>(<span>0</span>)

<span>let</span> msg = st.unpack <span><span># </span><span>Deserialize!</span></span>

<span><span># </span><span>output:</span></span>
<span><span># </span><span>a</span></span>
<span><span># </span><span>5</span></span>
<span><span># </span><span>-3</span></span>
<span><span># </span><span>b</span></span>
<span><span># </span><span>1</span></span>
<span><span># </span><span>2</span></span>
<span><span># </span><span>3</span></span>
<span>for</span> e <span>in</span> msg.unwrapMap:
  <span>echo</span> e.key.unwrapStr
  <span>for</span> e <span>in</span> e.val.unwrapArray:
    <span>echo</span> e.unwrapInt</pre></div>
<h6>
Todo</h6>
<ul>
<li>Implement unwrapInto to convert Msg object to Nim object handily</li>
<li>Evaluate performance and scalability</li>
<li>Talk with offical Ruby implementation</li>
<li>Don't repeat yourself: The code now has too much duplications. Using templates?</li>
</ul>
<h6>
Author</h6>
<p>Akira Hayakawa (<a href="mailto:ruby.wktk@gmail.com">ruby.wktk@gmail.com</a>)</p>
</article>
  </div>
        </div>
        
        <div id="qs-ludocode-mpack"><h4><a href="https://github.com/ludocode/mpack" target="_blank">ludocode/mpack <span>https://github.com/ludocode/mpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h6>
Introduction</h6>
<p>MPack is a C implementation of an encoder and decoder for the <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serialization format. It is:</p>
<ul>
<li>Simple and easy to use</li>
<li>Secure against untrusted data</li>
<li>Lightweight, suitable for embedded</li>
<li><a href="https://ludocode.github.io/mpack/" rel="nofollow">Extensively documented</a></li>
<li><a href="https://github.com/ludocode/schemaless-benchmarks#speed---desktop-pc">Extremely fast</a></li>
</ul>
<p>The core of MPack contains a buffered reader and writer, and a tree-style parser that decodes into a tree of dynamically typed nodes. Helper functions can be enabled to read values of expected type, to work with files, to allocate strings automatically, to check UTF-8 encoding, and more.</p>
<p>The MPack code is small enough to be embedded directly into your codebase. Simply download the <a href="https://github.com/ludocode/mpack/releases">amalgamation package</a> and add <code>mpack.h</code> and <code>mpack.c</code> to your project.</p>
<p>The MPack featureset can be customized at compile-time to set which features, components and debug checks are compiled, and what dependencies are available.</p>
<h6>
Build Status</h6>
<p>MPack is beta software under development.</p>

<table>
<thead>
<tr>
<th><a href="https://travis-ci.org/" rel="nofollow">Travis-CI</a></th>
<th><a href="https://ci.appveyor.com/" rel="nofollow">AppVeyor</a></th>
<th><a href="https://coveralls.io/" rel="nofollow">Coveralls.io</a></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://travis-ci.org/ludocode/mpack/branches" rel="nofollow"><img src="https://camo.githubusercontent.com/df2037437b18f5b7097ece0a10a666993732f94c/68747470733a2f2f7472617669732d63692e6f72672f6c75646f636f64652f6d7061636b2e7376673f6272616e63683d646576656c6f70" alt="Build Status" data-canonical-src="https://travis-ci.org/ludocode/mpack.svg?branch=develop"></a></td>
<td><a href="https://ci.appveyor.com/project/ludocode/mpack/branch/develop" rel="nofollow"><img src="https://camo.githubusercontent.com/8beef0ca2a0a0dfe83e1f223549928505122ac22/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f747578303661656670717138336b33302f6272616e63682f646576656c6f703f7376673d74727565" alt="Build Status" data-canonical-src="https://ci.appveyor.com/api/projects/status/tux06aefpqq83k30/branch/develop?svg=true"></a></td>
<td><a href="https://coveralls.io/github/ludocode/mpack?branch=develop" rel="nofollow"><img src="https://camo.githubusercontent.com/88f63dffdbda39f6049aab5f8167f2d701f6dd36/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6c75646f636f64652f6d7061636b2f62616467652e7376673f6272616e63683d646576656c6f7026736572766963653d676974687562" alt="Build Status" data-canonical-src="https://coveralls.io/repos/ludocode/mpack/badge.svg?branch=develop&amp;service=github"></a></td>
</tr>
</tbody>
</table>
<h6>
The Node API</h6>
<p>The Node API parses a chunk of MessagePack data into an immutable tree of dynamically-typed nodes. A series of helper functions can be used to extract data of specific types from each node.</p>
<div><pre><span><span>//</span> parse a file into a node tree</span>
<span>mpack_tree_t</span> tree;
<span>mpack_tree_init_filename</span>(&amp;tree, <span><span>"</span>homepage-example.mp<span>"</span></span>, <span>0</span>);
<span>mpack_tree_parse</span>(&amp;tree);
<span>mpack_node_t</span> root = mpack_tree_root(&amp;tree);

<span><span>//</span> extract the example data on the msgpack homepage</span>
<span>bool</span> compact = mpack_node_bool(mpack_node_map_cstr(root, <span><span>"</span>compact<span>"</span></span>));
<span>int</span> schema = mpack_node_i32(mpack_node_map_cstr(root, <span><span>"</span>schema<span>"</span></span>));

<span><span>//</span> clean up and check for errors</span>
<span>if</span> (mpack_tree_destroy(&amp;tree) != mpack_ok) {
    <span>fprintf</span>(stderr, <span><span>"</span>An error occurred decoding the data!<span>\n</span><span>"</span></span>);
    <span>return</span>;
}</pre></div>
<p>Note that no additional error handling is needed in the above code. If the file is missing or corrupt, if map keys are missing or if nodes are not in the expected types, special "nil" nodes and false/zero values are returned and the tree is placed in an error state. An error check is only needed before using the data.</p>
<p>The above example decodes into allocated pages of nodes. A fixed node pool can be provided to the parser instead in memory-constrained environments. For maximum performance and minimal memory usage, the <a href="https://msgpack.org/ludocode/mpack/blob/master/docs/expect.md">Expect API</a> can be used to parse data of a predefined schema.</p>
<h6>
The Write API</h6>
<p>The Write API encodes structured data to MessagePack.</p>
<div><pre><span><span>//</span> encode to memory buffer</span>
<span>char</span>* data;
<span>size_t</span> size;
<span>mpack_writer_t</span> writer;
<span>mpack_writer_init_growable</span>(&amp;writer, &amp;data, &amp;size);

<span><span>//</span> write the example on the msgpack homepage</span>
<span>mpack_start_map</span>(&amp;writer, <span>2</span>);
<span>mpack_write_cstr</span>(&amp;writer, <span><span>"</span>compact<span>"</span></span>);
<span>mpack_write_bool</span>(&amp;writer, <span>true</span>);
<span>mpack_write_cstr</span>(&amp;writer, <span><span>"</span>schema<span>"</span></span>);
<span>mpack_write_uint</span>(&amp;writer, <span>0</span>);
<span>mpack_finish_map</span>(&amp;writer);

<span><span>//</span> finish writing</span>
<span>if</span> (mpack_writer_destroy(&amp;writer) != mpack_ok) {
    <span>fprintf</span>(stderr, <span><span>"</span>An error occurred encoding the data!<span>\n</span><span>"</span></span>);
    <span>return</span>;
}

<span><span>//</span> use the data</span>
<span>do_something_with_data</span>(data, size);
<span>free</span>(data);</pre></div>
<p>In the above example, we encode to a growable memory buffer. The writer can instead write to a pre-allocated or stack-allocated buffer, avoiding the need for memory allocation. The writer can also be provided with a flush function (such as a file or socket write function) to call when the buffer is full or when writing is done.</p>
<p>If any error occurs, the writer is placed in an error state. The writer will flag an error if too much data is written, if the wrong number of elements are written, if the data could not be flushed, etc. No additional error handling is needed in the above code; any subsequent writes are ignored when the writer is in an error state, so you don't need to check every write for errors.</p>
<p>Note in particular that in debug mode, the <code>mpack_finish_map()</code> call above ensures that two key/value pairs were actually written as claimed, something that other MessagePack C/C++ libraries may not do.</p>
<h6>
Comparison With Other Parsers</h6>
<p>MPack is rich in features while maintaining very high performance and a small code footprint. Here's a short feature table comparing it to other C parsers:</p>
<table>
<thead>
<tr>
<th></th>
<th>
<a href="https://github.com/ludocode/mpack">MPack</a><br>(v0.8)</th>
<th>
<a href="https://github.com/msgpack/msgpack-c">msgpack-c</a><br>(v1.3.0)</th>
<th>
<a href="https://github.com/camgunz/cmp">CMP</a><br>(v14)</th>
</tr>
</thead>
<tbody>
<tr>
<td>No libc requirement</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Growable memory writer</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>File I/O helpers</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Tree parser</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Propagating errors</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Compound size tracking</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Incremental parser</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Incremental range/match helpers</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Tree stream parser</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>UTF-8 verification</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>A larger feature comparison table is available <a href="https://msgpack.org/ludocode/mpack/blob/master/docs/features.md">here</a> which includes descriptions of the various entries in the table.</p>
<p><a href="https://github.com/ludocode/schemaless-benchmarks">This benchmarking suite</a> compares the performance of MPack to other implementations of schemaless serialization formats. MPack outperforms all JSON and MessagePack libraries, and in some tests MPack is several times faster than <a href="https://github.com/miloyip/rapidjson">RapidJSON</a> for equivalent data.</p>
<h6>
Why Not Just Use JSON?</h6>
<p>Conceptually, MessagePack stores data similarly to JSON: they are both composed of simple values such as numbers and strings, stored hierarchically in maps and arrays. So why not just use JSON instead? The main reason is that JSON is designed to be human-readable, so it is not as efficient as a binary serialization format:</p>
<ul>
<li>
<p>Compound types such as strings, maps and arrays are delimited, so appropriate storage cannot be allocated upfront. The whole object must be parsed to determine its size.</p>
</li>
<li>
<p>Strings are not stored in their native encoding. Special characters such as quotes and backslashes must be escaped when written and converted back when read.</p>
</li>
<li>
<p>Numbers are particularly inefficient (especially when parsing back floats), making JSON inappropriate as a base format for structured data that contains lots of numbers.</p>
</li>
<li>
<p>Binary data is not supported by JSON at all. Small binary blobs such as icons and thumbnails need to be Base64 encoded or passed out-of-band.</p>
</li>
</ul>
<p>The above issues greatly increase the complexity of the decoder. Full-featured JSON decoders are quite large, and minimal decoders tend to leave out such features as string unescaping and float parsing, instead leaving these up to the user or platform. This can lead to hard-to-find platform-specific and locale-specific bugs, as well as a greater potential for security vulnerabilites. This also significantly decreases performance, making JSON unattractive for use in applications such as mobile games.</p>
<p>While the space inefficiencies of JSON can be partially mitigated through minification and compression, the performance inefficiencies cannot. More importantly, if you are minifying and compressing the data, then why use a human-readable format in the first place?</p>
<h6>
Running the Unit Tests</h6>
<p>The MPack build process does not build MPack into a library; it is used to build and run the unit tests. You do not need to build MPack or the unit testing suite to use MPack.</p>
<p>On Linux, the test suite uses SCons and requires Valgrind, and can be run in the repository or in the amalgamation package. Run <code>scons</code> to build and run the test suite in full debug configuration.</p>
<p>On Windows, there is a Visual Studio solution, and on OS X, there is an Xcode project for building and running the test suite.</p>
<p>You can also build and run the test suite in all supported configurations, which is what the continuous integration server will build and run. If you are on 64-bit, you will need support for cross-compiling to 32-bit, and running 32-bit binaries with 64-bit Valgrind. On Ubuntu, you'll need <code>libc6-dbg:i386</code>. On Arch you'll need <code>gcc-multilib</code> or <code>lib32-clang</code>, and <code>valgrind-multilib</code>. Use <code>scons all=1 -j16</code> (or some appropriate thread count) to build and run all tests.</p>
</article>
  </div>
        </div>
        
        <div id="qs-3Hren-msgpack-rust"><h4><a href="https://github.com/3Hren/msgpack-rust" target="_blank">3Hren/msgpack-rust <span>https://github.com/3Hren/msgpack-rust</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
RMP - Rust MessagePack</h5>
<p>RMP is a pure Rust <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> implementation.</p>
<p><a href="https://travis-ci.org/3Hren/msgpack-rust" rel="nofollow"><img src="https://camo.githubusercontent.com/20ebe3c911448a9065b08456ca2756bac8286aa1/68747470733a2f2f7472617669732d63692e6f72672f334872656e2f6d73677061636b2d727573742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/3Hren/msgpack-rust.svg?branch=master"></a>
<a href="https://coveralls.io/github/3Hren/msgpack-rust?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/ff5a42d50bd6a64d9dd01983996bef139104bf5e/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f334872656e2f6d73677061636b2d727573742f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/3Hren/msgpack-rust/badge.svg?branch=master&amp;service=github"></a></p>
<p>This repository consists of three separate crates: the RMP core and two implementations to ease serializing and
deserializing Rust structs.</p>
<table>
<thead>
<tr>
<th></th>
<th>crates.io</th>
<th>API Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>rmp</strong></td>
<td><a href="https://crates.io/crates/rmp" rel="nofollow"><img src="https://camo.githubusercontent.com/8cd4852fe3605c05bbfc01d2d37be8977aab0d4f/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d70" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp"></a></td>
<td><a href="https://docs.rs/rmp" rel="nofollow">RMP</a></td>
</tr>
<tr>
<td><strong>rmp-serialize</strong></td>
<td><a href="https://crates.io/crates/rmp-serialize" rel="nofollow"><img src="https://camo.githubusercontent.com/25e25b0b737dd4d649c6ab4d56171339a3b4703a/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d702d73657269616c697a65" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp-serialize"></a></td>
<td><a href="https://docs.rs/rmp-serialize" rel="nofollow">RMP Serialize</a></td>
</tr>
<tr>
<td><strong>rmps</strong></td>
<td><a href="https://crates.io/crates/rmp-serde" rel="nofollow"><img src="https://camo.githubusercontent.com/f078f56b2e0bdb20e7999f74513eaf949e2a3bb2/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d702d7365726465" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmp-serde"></a></td>
<td><a href="https://docs.rs/rmp-serde" rel="nofollow">RMP Serde</a></td>
</tr>
<tr>
<td><strong>rmpv</strong></td>
<td><a href="https://crates.io/crates/rmpv" rel="nofollow"><img src="https://camo.githubusercontent.com/17df182aa86372f77388068aab4d5edfdacb5a8b/687474703a2f2f6d6572697462616467652e6865726f6b756170702e636f6d2f726d7076" alt="" data-canonical-src="http://meritbadge.herokuapp.com/rmpv"></a></td>
<td><a href="https://docs.rs/rmpv" rel="nofollow">RMP Value</a></td>
</tr>
</tbody>
</table>
<h6>
Features</h6>
<ul>
<li>
<p><strong>Convenient API</strong></p>
<p>RMP is designed to be lightweight and straightforward. There are low-level API, which gives you
full control on data encoding/decoding process and makes no heap allocations. On the other hand
there are high-level API, which provides you convenient interface using Rust standard library and
compiler reflection, allowing to encode/decode structures using <code>derive</code> attribute.</p>
</li>
<li>
<p><strong>Zero-copy value decoding</strong></p>
<p>RMP allows to decode bytes from a buffer in a zero-copy manner easily and blazingly fast, while Rust
static checks guarantees that the data will be valid as long as the buffer lives.</p>
</li>
<li>
<p><strong>Clear error handling</strong></p>
<p>RMP's error system guarantees that you never receive an error enum with unreachable variant.</p>
</li>
<li>
<p><strong>Robust and tested</strong></p>
<p>This project is developed using TDD and CI, so any found bugs will be fixed without breaking
existing functionality.</p>
</li>
</ul>
<h6>
Requirements</h6>
<ul>
<li>Rust 1.16</li>
</ul>
<h6>
Versioning</h6>
<p>This project adheres to <a href="http://semver.org/" rel="nofollow">Semantic Versioning</a>. However until 1.0.0 comes there
will be the following rules:</p>
<ul>
<li>Any API/ABI breaking changes will be notified in the changelog explicitly and results in minor
version bumping.</li>
<li>API extending features results in patch version bumping.</li>
<li>Non-breaking bug fixes and performance improving results in patch version bumping.</li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-jangko-msgpack4nim"><h4><a href="https://github.com/jangko/msgpack4nim" target="_blank">jangko/msgpack4nim <span>https://github.com/jangko/msgpack4nim</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack4nim</h5>
<p><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> implementation written in pure nim</p>
<h7>
why another implementation?</h7>
<p>I am fully aware of <a href="https://github.com/akiradeveloper/msgpack-nim">another</a> msgpack implementation written in nim. But I want something easier to use. Another motivation come from the nim language itself. The current version of nim compiler offer many improvements, including 'generics ' specialization. I found out nim compiler is smart enough to make serialization/deserialization to/from msgpack easy and convenient.</p>
<p><strong>requirement:</strong> nim ver 0.11.2 or later</p>
<p><a href="https://travis-ci.org/jangko/msgpack4nim" rel="nofollow"><img src="https://camo.githubusercontent.com/1813bc19e2e45862309fc09b36b6c85a49b47742/68747470733a2f2f7472617669732d63692e6f72672f6a616e676b6f2f6d73677061636b346e696d2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jangko/msgpack4nim.svg?branch=master"></a></p>
<h6>
Example</h6>
<div><pre><span>import</span> msgpack4nim, streams

<span>type</span>
  <span><span>#</span><span>lets try with a rather complex object</span></span>
  <span>CustomType</span> = <span>object</span>
    count: <span>int</span>
    content: <span>seq</span>[<span>int</span>]
    name: <span>string</span>
    ratio: <span>float</span>
    attr: <span>array</span>[<span>0</span>..<span>5</span>, <span>int</span>]
    ok: <span>bool</span>

<span>proc</span> <span>initCustomType</span>()<span>:</span> <span>CustomType</span> <span>=</span>
  result.count = -<span>1</span>
  result.content = @[<span>1</span>,<span>2</span>,<span>3</span>]
  result.name = <span>"custom"</span>
  result.ratio = <span>1.0</span>
  <span>for</span> i <span>in</span> <span>0</span>..<span>5</span>: result.attr[i] = i
  result.ok = <span>false</span>

<span>var</span> x = <span>initCustomType</span>()
<span><span>#</span><span>you can use another stream compatible</span></span>
<span><span>#</span><span>class here e.g. FileStream</span></span>
<span>var</span> s = <span>newStringStream</span>()
s.<span>pack</span>(x) <span><span>#</span><span>here the magic happened</span></span>

s.<span>setPosition</span>(<span>0</span>)
<span>var</span> xx: <span>CustomType</span>
s.<span>unpack</span>(xx) <span><span>#</span><span>and here too</span></span>

<span>assert</span> xx == x
<span>echo</span> <span>"OK "</span>, xx.name</pre></div>
<p>see? you only need to call 'pack' and 'unpack', and the compiler do the hard work for you. Very easy, convenient, and works well</p>
<p>if you think setting up a StringStream too much for you, you can simply call pack(yourobject) and it will return a string containing msgpack data.</p>
<div><pre>  <span>var</span> a = @[<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>,<span>0</span>]
  <span>var</span> buf = <span>pack</span>(a)
  <span>var</span> aa: <span>seq</span>[<span>int</span>]
  <span>unpack</span>(buf, aa)
  <span>assert</span> a == aa</pre></div>
<p>in case the compiler cannot decide how to serialize or deserialize your very very complex object, you can help it in easy way
by defining your own handler pack_type/unpack_type</p>
<div><pre><span>type</span>
  <span><span>#</span><span>not really complex, just for example</span></span>
  mycomplexobject = <span>object</span>
    a: someSimpleType
    b: someSimpleType

<span><span>#</span><span>help the compiler to decide</span></span>
<span>proc</span> <span>pack_type</span><span>*</span>(s: <span>Stream</span>, x: mycomplexobject) <span>=</span>
  s.<span>pack</span>(x.a) <span><span># </span><span>let the compiler decide</span></span>
  s.<span>pack</span>(x.b) <span><span># </span><span>let the compiler decide</span></span>

<span><span>#</span><span>help the compiler to decide</span></span>
<span>proc</span> <span>unpack_type</span><span>*</span>(s: <span>Stream</span>, x: <span>var</span> complexobject) <span>=</span>
  s.<span>unpack</span>(x.a)
  s.<span>unpack</span>(x.b)

<span>var</span> s: <span>newStringStream</span>()
<span>var</span> x: mycomplexobject

s.<span>pack</span>(x) <span><span>#</span><span>pack as usual</span></span>

s.<span>setPosition</span>(<span>0</span>)
s.<span>unpack</span>(x) <span><span>#</span><span>unpack as usual</span></span></pre></div>
<h6>
Data Conversion</h6>
<table>
<thead>
<tr>
<th><strong>nim</strong></th>
<th><strong>msgpack</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>int8/16/32/64</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>uint8/16/32/64</td>
<td>uint8/16/32/64</td>
</tr>
<tr>
<td>true/false/nil</td>
<td>true/false/nil</td>
</tr>
<tr>
<td>procedural type</td>
<td>ignored</td>
</tr>
<tr>
<td>cstring</td>
<td>ignored</td>
</tr>
<tr>
<td>pointer</td>
<td>ignored</td>
</tr>
<tr>
<td>ptr</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>ref</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>circular ref</td>
<td><a href="#ref-types">see ref-types</a></td>
</tr>
<tr>
<td>distinct types</td>
<td>converted to base type</td>
</tr>
<tr>
<td>float32/64</td>
<td>float32/64</td>
</tr>
<tr>
<td>string</td>
<td>string8/16/32</td>
</tr>
<tr>
<td>array/seq</td>
<td>array</td>
</tr>
<tr>
<td>set</td>
<td>array</td>
</tr>
<tr>
<td>range/subrange</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>enum</td>
<td>int8/16/32/64</td>
</tr>
<tr>
<td>IntSet,Doubly/SinglyLinkedList</td>
<td>array</td>
</tr>
<tr>
<td>Doubly/SinglyLinkedRing</td>
<td>array</td>
</tr>
<tr>
<td>Queue,HashSet,OrderedSet</td>
<td>array</td>
</tr>
<tr>
<td>Table,TableRef</td>
<td>map</td>
</tr>
<tr>
<td>OrderedTable,OrderedTableRef</td>
<td>map</td>
</tr>
<tr>
<td>StringTableRef</td>
<td>map</td>
</tr>
<tr>
<td>CritBitTree[T]</td>
<td>map</td>
</tr>
<tr>
<td>CritBitTree[void]</td>
<td>array</td>
</tr>
<tr>
<td>object/tuple</td>
<td>array/map</td>
</tr>
</tbody>
</table>
<h6>
object and tuple</h6>
<p>object and tuple by default converted to msgpack array, however
you can tell the compiler to convert it to map by supplying --define:msgpack_obj_to_map</p>
<div><pre>nim c --define:msgpack_obj_to_map yourfile.nim</pre></div>
<p>or --define:msgpack_obj_to_stream to convert object/tuple fields <em>value</em> into stream of msgpack objects</p>
<div><pre>nim c --define:msgpack_obj_to_stream yourfile.nim</pre></div>
<p>What this means? It means by default, each object/tuple will be converted to one <code>msgpack array</code> contains
field(s) value only without their field(s) name.</p>
<p>If you specify that the object/tuple will be converted to <code>msgpack map</code>, then each object/tuple will be
converted to one <code>msgpack map</code> contains key-value pairs. The key will be field name, and the value will be field value.</p>
<p>If you specify that the object/tuple will be converted to msgpack stream, then each object/tuple will be converted
into one or more msgpack's type for each object's field and then the resulted stream will be concatenated
to the msgpack stream buffer.</p>
<p>Which one should I use?</p>
<p>Usually, other msgpack libraries out there convert object/tuple/record/struct or whatever structured data supported by
the language into <code>msgpack array</code>, but always make sure to consult the documentation first.
If both of the serializer and deserializer agreed to one convention, then usually there will be no problem.
No matter which library/language you use, you can exchange msgpack data among them.</p>
<h8>
<strong>ref-types:</strong>
</h8>
<p><em>ref something</em> :</p>
<ul>
<li>if ref value is nil, it will be packed into msgpack nil, and when unpacked, you will get nil too</li>
<li>if ref value not nil, it will be dereferenced e.g. pack(val[]) or unpack(val[])</li>
<li>ref subject to some restriction. see <strong>restriction</strong> below</li>
<li>ptr will be treated like ref during pack</li>
<li>unpacking ptr will invoke alloc, so you must dealloc it</li>
</ul>
<p><em>circular reference</em>:
altough detecting circular reference is not too difficult(using set of pointers), the current implementation does not provide circular reference detection. If you pack something contains circular reference, you know something bad will happened</p>
<p><strong>Restriction</strong>:
For objects their type is <strong>not</strong> serialized. This means essentially that it does not work if the object has some other runtime type than its compiletime type:</p>
<div><pre><span>import</span> streams, msgpack4nim

<span>type</span>
  <span>TA</span> = <span>object</span> <span>of</span> <span>RootObj</span>
  <span>TB</span> = <span>object</span> <span>of</span> <span>TA</span>
    f: <span>int</span>

<span>var</span>
  a: <span>ref</span> <span>TA</span>
  b: <span>ref</span> <span>TB</span>

<span>new</span>(b)
a = b

<span>echo</span> <span>stringify</span>(<span>pack</span>(a))
<span><span>#</span><span>produces "[ ]" or "{ }"</span></span>
<span><span>#</span><span>not "[ 0 ]" or '{ "f" : 0 }'</span></span></pre></div>
<h8>
<strong>limitation:</strong>
</h8>
<p>these types will be ignored:</p>
<ul>
<li>procedural type</li>
<li>cstring(it is not safe to assume it always terminated by null)</li>
<li>pointer</li>
</ul>
<p>these types cannot be automatically pack/unpacked:</p>
<ul>
<li>
<em>void</em> (will cause compile time error)</li>
</ul>
<p>however, you can provide your own handler for cstring and pointer</p>
<p><strong>Gotchas:</strong>
because data conversion did not preserve original data types, the following code is perfectly valid and will raise no exception</p>
<div><pre><span>import</span> msgpack4nim, streams, tables, sets, strtabs

<span>type</span>
  <span>Horse</span> = <span>object</span>
    legs: <span>int</span>
    foals: <span>seq</span>[<span>string</span>]
    attr: <span>Table</span>[<span>string</span>, <span>string</span>]

  <span>Cat</span> = <span>object</span>
    legs: <span>uint8</span>
    kittens: <span>HashSet</span>[<span>string</span>]
    traits: <span>StringTableRef</span>

<span>proc</span> <span>initHorse</span>()<span>:</span> <span>Horse</span> <span>=</span>
  result.legs = <span>4</span>
  result.foals = @[<span>"jilly"</span>, <span>"colt"</span>]
  result.attr = <span>initTable</span>[<span>string</span>, <span>string</span>]()
  result.attr[<span>"color"</span>] <span>=</span> <span>"black"</span>
  result.attr[<span>"speed"</span>] <span>=</span> <span>"120mph"</span>

<span>var</span> stallion = <span>initHorse</span>()
<span>var</span> tom: <span>Cat</span>

<span>var</span> buf = <span>pack</span>(stallion) <span><span>#</span><span>pack a Horse here</span></span>
<span>unpack</span>(buf, tom)
<span><span>#</span><span>abracadabra, it will unpack into a Cat</span></span>

<span>echo</span> <span>"legs: "</span>, <span>$</span>tom.legs
<span>echo</span> <span>"kittens: "</span>, <span>$</span>tom.kittens
<span>echo</span> <span>"traits: "</span>, <span>$</span>tom.traits</pre></div>
<p>another gotcha:</p>
<div><pre>  <span>type</span>
    <span>KAB</span> = <span>object</span> <span>of</span> <span>RootObj</span>
      aaa: <span>int</span>
      bbb: <span>int</span>

    <span>KCD</span> = <span>object</span> <span>of</span> <span>KAB</span>
      ccc: <span>int</span>
      ddd: <span>int</span>

    <span>KEF</span> = <span>object</span> <span>of</span> <span>KCD</span>
      eee: <span>int</span>
      fff: <span>int</span>

  <span>var</span> kk = <span>KEF</span>()
  <span>echo</span> <span>stringify</span>(<span>pack</span>(kk))
  <span><span># </span><span>will produce "{ "eee" : 0, "fff" : 0, "ccc" : 0, "ddd" : 0, "aaa" : 0, "bbb" : 0 }"</span></span>
  <span><span># </span><span>not "{ "aaa" : 0, "bbb" : 0, "ccc" : 0, "ddd" : 0, "eee" : 0, "fff" : 0 }"</span></span></pre></div>
<h6>
bin and ext format</h6>
<p>this implementation provide function to encode/decode msgpack bin/ext format header, but for the body, you must write it yourself to the StringStream</p>
<ul>
<li>proc pack_bin*(s: Stream, len: int)</li>
<li>proc pack_ext*(s: Stream, len: int, exttype: int8)</li>
<li>proc unpack_bin*(s: Stream): int</li>
<li>proc unpack_ext*(s: Stream): tuple[exttype:uint8, len: int]</li>
</ul>
<div><pre><span>import</span> streams, msgpack4nim

<span>const</span> exttype0 = <span>0</span>

<span>var</span> s = <span>newStringStream</span>()
<span>var</span> body = <span>"this is the body"</span>

s.<span>pack_ext</span>(body.<span>len</span>, exttype0)
s.<span>write</span>(body)

<span><span>#</span><span>the same goes to bin format</span></span>
s.<span>pack_bin</span>(body.<span>len</span>)
s.<span>write</span>(body)

s.<span>setPosition</span>(<span>0</span>)
<span><span>#</span><span>unpack_ext return tuple[exttype:uint8, len: int]</span></span>
<span>let</span> (extype, extlen) = s.<span>unpack_ext</span>()
<span>var</span> extbody = s.<span>readStr</span>(extlen)

<span>assert</span> extbody == body

<span>let</span> binlen = s.<span>unpack_bin</span>()
<span>var</span> binbody = s.<span>readStr</span>(binlen)

<span>assert</span> binbody == body</pre></div>
<h6>
stringify</h6>
<p>you can convert msgpack data to readable string using stringify function</p>
<div><pre>  <span>type</span>
    <span>Horse</span> = <span>object</span>
      legs: <span>int</span>
      speed: <span>int</span>
      color: <span>string</span>
      name: <span>string</span>

  <span>var</span> cc = <span>Horse</span>(legs:<span>4</span>, speed:<span>150</span>, color:<span>"black"</span>, name:<span>"stallion"</span>)
  <span>var</span> zz = <span>pack</span>(cc)
  <span>echo</span> <span>stringify</span>(zz)</pre></div>
<p>the result will be:</p>
<div><pre>default:
[ <span>4</span>, <span>150</span>, <span><span>"</span>black<span>"</span></span>, <span><span>"</span>stallion<span>"</span></span> ]

msgpack_obj_to_map defined:
{ <span><span>"</span>legs<span>"</span></span> : <span>4</span>, <span><span>"</span>speed<span>"</span></span> : <span>150</span>, <span><span>"</span>color<span>"</span></span> : <span><span>"</span>black<span>"</span></span>, <span><span>"</span>name<span>"</span></span> : <span><span>"</span>stallion<span>"</span></span> }

msgpack_obj_to_stream defined:
<span>4</span> <span>150</span> <span><span>"</span>black<span>"</span></span> <span><span>"</span>stallion<span>"</span></span></pre></div>
<h6>
toAny</h6>
<p><strong>toAny</strong> takes a string of msgpack data or a stream, then it will produce <strong>msgAny</strong> which you can interrogate of it's  type and value during runtime by accessing it's member <strong>msgType</strong></p>
<p><strong>toAny</strong> recognize all valid msgpack message and translate it into a group of types:</p>
<pre><code><span>msgMap</span><span>,</span><span> msgArray</span><span>,</span><span> msgString</span><span>,</span><span> msgBool</span><span>,</span><span>
msgBin</span><span>,</span><span> msgExt</span><span>,</span><span> msgFloat32</span><span>,</span><span> msgFloat64</span><span>,</span><span>
msgInt</span><span>,</span><span> msgUint</span><span>,</span><span> msgNull</span></code></pre>
<p>for example, <strong>msg</strong> is a <em>msgpack</em> data with content [1, "hello", {"a": "b"}], you can interrogate it like this:</p>
<div><pre><span>var</span> a = msg.<span>toAny</span>()
<span>assert</span> a.msgType == msgArray
<span>assert</span> a.arrayVal[<span>0</span>].msgType == msgInt
<span>assert</span> a.arrayVal[<span>0</span>].intVal == <span>1</span>
<span>assert</span> a.arrayVal[<span>1</span>].msgType == msgString
<span>assert</span> a.arrayVal[<span>1</span>].stringVal == <span>"hello"</span>
<span>assert</span> a.arrayVal[<span>2</span>].msgType == msgMap
<span>assert</span> a.arrayVal[<span>2</span>].mapVal[<span>0</span>].key.msgType == msgString
<span>assert</span> a.arrayVal[<span>2</span>].mapVal[<span>0</span>].key.stringVal == <span>"a"</span>
<span>assert</span> a.arrayVal[<span>2</span>].mapVal[<span>0</span>].val.msgType == msgString
<span>assert</span> a.arrayVal[<span>2</span>].mapVal[<span>0</span>].val.stringVal == <span>"b"</span></pre></div>
<p>enjoy it, happy nim-ing</p>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-Asmod4n-mruby-simplemsgpack"><h4><a href="https://github.com/Asmod4n/mruby-simplemsgpack" target="_blank">Asmod4n/mruby-simplemsgpack <span>https://github.com/Asmod4n/mruby-simplemsgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><a href="https://travis-ci.org/Asmod4n/mruby-simplemsgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/3e63cfb1ac2acd1aaaba43f3964cead233180438/68747470733a2f2f7472617669732d63692e6f72672f41736d6f64346e2f6d727562792d73696d706c656d73677061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/Asmod4n/mruby-simplemsgpack.svg?branch=master"></a></p>
<h5>
mruby-simplemsgpack</h5>
<h5>
Installation</h5>
<p>First get a working copy of <a href="https://github.com/mruby/mruby">mruby</a> then add</p>
<div><pre>  conf.gem <span>mgem:</span> <span><span>'</span>mruby-simplemsgpack<span>'</span></span></pre></div>
<p>to the build_conf.rb of the mruby directory</p>
<p>mruby-simplemsgpack searches for msgpack-c on your system, if it can find it it links against it, there is also a bundled version of msgpack-c included if you don't have it installed in your system.
You need at least msgpack-c 1.</p>
<h6>
Example</h6>
<p>Objects can be packed with <code>Object#to_msgpack</code> or <code>MessagePack.pack</code>:</p>
<div><pre>packed_hash <span>=</span> { <span>a:</span> <span><span>'</span>hash<span>'</span></span>, <span>with:</span> [<span>1</span>, <span><span>'</span>embedded<span>'</span></span>, <span><span>'</span>array<span>'</span></span>] }.to_msgpack
packed_string <span>=</span> <span>MessagePack</span>.pack(<span><span>'</span>bye<span>'</span></span>)

packed_hash   <span><span>#</span> =&gt; "\x82\xA1a\xA4hash\xA4with\x93\x01\xA8embedded\xA5array"</span>
packed_string <span><span>#</span> =&gt; "\xA3bye"</span></pre></div>
<p>They are unpacked with <code>MessagePack.unpack</code>:</p>
<div><pre><span>MessagePack</span>.unpack(packed_hash)   <span><span>#</span> =&gt; { a: 'hash', with: [1, 'embedded', 'array'] }</span>
<span>MessagePack</span>.unpack(packed_string) <span><span>#</span> =&gt; 'bye'</span></pre></div>
<p>A string with multiple packed values can be unpacked by handing a block to
<code>MessagePack.unpack</code>:</p>
<div><pre>packed <span>=</span> packed_string <span>+</span> packed_hash
unpacked <span>=</span> []
<span>MessagePack</span>.unpack(packed) <span>do</span> |<span>result</span>|
  unpacked <span>&lt;&lt;</span> result
<span>end</span>
unpacked <span><span>#</span> =&gt; ['bye', { a: 'hash', with: [1, 'embedded', 'array'] }]</span></pre></div>
<p>When using <code>MessagePack.unpack</code> with a block and passing it a incomplete packed Message
it returns the number of bytes it was able to unpack, if it was able to unpack the howl Message it returns self.
This is helpful if the given data contains an incomplete
last object and we want to continue unpacking after we have more data.</p>
<div><pre>packed <span>=</span> packed_string <span>+</span> packed_hash.slice(<span>0</span>, packed_hash.length<span>/</span><span>2</span>)
unpacked <span>=</span> []
unpacked_length <span>=</span> <span>MessagePack</span>.unpack(packed) <span>do</span> |<span>result</span>|
  unpacked <span>&lt;&lt;</span> result
<span>end</span>
unpacked_length <span><span>#</span> =&gt; 4 (length of packed_string)</span>
unpacked <span><span>#</span> =&gt; ['bye']</span></pre></div>
<h6>
Extension Types</h6>
<p>To customize how objects are packed, define an <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#types-extension-type">extension type</a>.</p>
<p>By default, MessagePack packs symbols as strings and does not convert them
back when unpacking them. Symbols can be preserved by registering an extension
type for them:</p>
<div><pre>sym_ext_type <span>=</span> <span>0</span>
<span>MessagePack</span>.register_pack_type(sym_ext_type, <span>Symbol</span>) { |<span>symbol</span>| symbol.to_s }
<span>MessagePack</span>.register_unpack_type(sym_ext_type) { |<span>data</span>| data.to_sym }

<span>MessagePack</span>.unpack(<span>:symbol</span>.to_msgpack) <span><span>#</span> =&gt; :symbol</span></pre></div>
<p>Other objects like classes can also be preserved:</p>
<div><pre>cls_ext_type <span>=</span> <span>1</span>
<span>MessagePack</span>.register_pack_type(cls_ext_type, <span>Class</span>) { |<span>cls</span>| cls.to_s }
<span>MessagePack</span>.register_unpack_type(cls_ext_type) { |<span>data</span>| data.constantize }
<span>MessagePack</span>.unpack(<span>Object</span>.to_msgpack) <span><span>#</span> =&gt; Object</span></pre></div>
<p>For nil, true, false, Fixnum, Float, String, Array and Hash a registered
ext type is ignored. They are always packed according to the <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack
specification</a>.</p>
<h6>
Proc, blocks or lambas</h6>
<p>If you want to pack and unpack mruby blocks take a look at the <a href="https://github.com/Asmod4n/mruby-proc-irep-ext">mruby-proc-irep-ext</a> gem, it can be registered like the other extension types</p>
<h6>
Overriding <code>to_msgpack</code>
</h6>
<p>It's not supported to override <code>to_msgpack</code>, <code>MessagePack.pack</code> ignores it, same when that object is included in a Hash or Array.
This gem treats objects like ruby does, if you want to change the way your custom Class gets handled you can add <code>to_hash</code>, <code>to_ary</code>, <code>to_int</code> or <code>to_str</code> methods so it will be packed like a Hash, Array, Fixnum or String (in that order) then.</p>
<h6>
Acknowledgements</h6>
<p>This is using code from <a href="https://github.com/msgpack/msgpack-c">https://github.com/msgpack/msgpack-c</a></p>
<p>Copyright (C) 2008-2015 FURUHASHI Sadayuki</p>
<p>Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE_1_0.txt or copy at
<a href="https://www.boost.org/LICENSE_1_0.txt" rel="nofollow">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
</article>
  </div>
        </div>
        
        <div id="qs-kawanet-msgpack-lite"><h4><a href="https://www.npmjs.com/package/msgpack-lite" target="_blank">kawanet/msgpack-lite <span>https://www.npmjs.com/package/msgpack-lite</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-lite <a href="http://badge.fury.io/js/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/2d47899edd34f109837021072113765774890b3d/68747470733a2f2f62616467652e667572792e696f2f6a732f6d73677061636b2d6c6974652e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/msgpack-lite.svg"></a> <a href="https://travis-ci.org/kawanet/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/5ca034a89cf672211032248ca1c874bbf63796a8/68747470733a2f2f7472617669732d63692e6f72672f6b6177616e65742f6d73677061636b2d6c6974652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kawanet/msgpack-lite.svg?branch=master"></a>
</h5>
<p>Fast Pure JavaScript MessagePack Encoder and Decoder</p>
<p><a href="https://saucelabs.com/u/msgpack-lite" rel="nofollow"><img src="https://camo.githubusercontent.com/93259aae9a453bead1c7e0c8045ce334f4c8072e/68747470733a2f2f73617563656c6162732e636f6d2f62726f777365722d6d61747269782f6d73677061636b2d6c6974652e737667" alt="Sauce Test Status" data-canonical-src="https://saucelabs.com/browser-matrix/msgpack-lite.svg"></a></p>
<p>Online demo: <a href="https://kawanet.github.io/msgpack-lite/" rel="nofollow">http://kawanet.github.io/msgpack-lite/</a></p>
<h7>
Features</h7>
<ul>
<li>Pure JavaScript only (No node-gyp nor gcc required)</li>
<li>Faster than any other pure JavaScript libraries on node.js v4</li>
<li>Even faster than node-gyp C++ based <a href="https://www.npmjs.com/package/msgpack" rel="nofollow">msgpack</a> library (<strong>90% faster</strong> on encoding)</li>
<li>Streaming encoding and decoding interface is also available. It's more faster.</li>
<li>Ready for <a href="https://saucelabs.com/u/msgpack-lite" rel="nofollow">Web browsers</a> including Chrome, Firefox, Safari and even IE8</li>
<li>
<a href="https://travis-ci.org/kawanet/msgpack-lite" rel="nofollow">Tested</a> on Node.js v0.10, v0.12, v4, v5 and v6 as well as Web browsers</li>
</ul>
<h7>
Encoding and Decoding MessagePack</h7>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);

<span><span>//</span> encode from JS Object to MessagePack (Buffer)</span>
<span>var</span> buffer <span>=</span> <span>msgpack</span>.<span>encode</span>({<span><span>"</span>foo<span>"</span></span><span>:</span> <span><span>"</span>bar<span>"</span></span>});

<span><span>//</span> decode from MessagePack (Buffer) to JS Object</span>
<span>var</span> data <span>=</span> <span>msgpack</span>.<span>decode</span>(buffer); <span><span>//</span> =&gt; {"foo": "bar"}</span>

<span><span>//</span> if encode/decode receives an invalid argument an error is thrown</span></pre></div>
<h7>
Writing to MessagePack Stream</h7>
<div><pre><span>var</span> fs <span>=</span> <span>require</span>(<span><span>"</span>fs<span>"</span></span>);
<span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);

<span>var</span> writeStream <span>=</span> <span>fs</span>.<span>createWriteStream</span>(<span><span>"</span>test.msp<span>"</span></span>);
<span>var</span> encodeStream <span>=</span> <span>msgpack</span>.<span>createEncodeStream</span>();
<span>encodeStream</span>.<span>pipe</span>(writeStream);

<span><span>//</span> send multiple objects to stream</span>
<span>encodeStream</span>.<span>write</span>({foo<span>:</span> <span><span>"</span>bar<span>"</span></span>});
<span>encodeStream</span>.<span>write</span>({baz<span>:</span> <span><span>"</span>qux<span>"</span></span>});

<span><span>//</span> call this once you're done writing to the stream.</span>
<span>encodeStream</span>.<span>end</span>();</pre></div>
<h7>
Reading from MessagePack Stream</h7>
<div><pre><span>var</span> fs <span>=</span> <span>require</span>(<span><span>"</span>fs<span>"</span></span>);
<span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);

<span>var</span> readStream <span>=</span> <span>fs</span>.<span>createReadStream</span>(<span><span>"</span>test.msp<span>"</span></span>);
<span>var</span> decodeStream <span>=</span> <span>msgpack</span>.<span>createDecodeStream</span>();

<span><span>//</span> show multiple objects decoded from stream</span>
<span>readStream</span>.<span>pipe</span>(decodeStream).<span>on</span>(<span><span>"</span>data<span>"</span></span>, <span>console</span>.<span>warn</span>);</pre></div>
<h7>
Decoding MessagePack Bytes Array</h7>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);

<span><span>//</span> decode() accepts Buffer instance per default</span>
<span>msgpack</span>.<span>decode</span>(<span>Buffer</span>([<span>0x81</span>, <span>0xA3</span>, <span>0x66</span>, <span>0x6F</span>, <span>0x6F</span>, <span>0xA3</span>, <span>0x62</span>, <span>0x61</span>, <span>0x72</span>]));

<span><span>//</span> decode() also accepts Array instance</span>
<span>msgpack</span>.<span>decode</span>([<span>0x81</span>, <span>0xA3</span>, <span>0x66</span>, <span>0x6F</span>, <span>0x6F</span>, <span>0xA3</span>, <span>0x62</span>, <span>0x61</span>, <span>0x72</span>]);

<span><span>//</span> decode() accepts raw Uint8Array instance as well</span>
<span>msgpack</span>.<span>decode</span>(<span>new</span> <span>Uint8Array</span>([<span>0x81</span>, <span>0xA3</span>, <span>0x66</span>, <span>0x6F</span>, <span>0x6F</span>, <span>0xA3</span>, <span>0x62</span>, <span>0x61</span>, <span>0x72</span>]));</pre></div>
<h7>
Command Line Interface</h7>
<p>A CLI tool bin/msgpack converts data stream from JSON to MessagePack and vice versa.</p>
<div><pre>$ <span>echo</span> <span><span>'</span>{"foo": "bar"}<span>'</span></span> <span>|</span> ./bin/msgpack -Jm <span>|</span> od -tx1
0000000    81  a3  66  6f  6f  a3  62  61  72

$ <span>echo</span> <span><span>'</span>{"foo": "bar"}<span>'</span></span> <span>|</span> ./bin/msgpack -Jm <span>|</span> ./bin/msgpack -Mj
{<span><span>"</span>foo<span>"</span></span>:<span><span>"</span>bar<span>"</span></span>}</pre></div>
<h7>
Installation</h7>
<div><pre>$ npm install --save msgpack-lite</pre></div>
<h7>
Tests</h7>
<p>Run tests on node.js:</p>

<p>Run tests on browsers:</p>
<div><pre>$ make test-browser-local
open the following url <span>in</span> a browser:
http://localhost:4000/__zuul</pre></div>
<h7>
Browser Build</h7>
<p>Browser version <a href="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js" rel="nofollow">msgpack.min.js</a> is also available. 50KB minified, 14KB gziped.</p>
<div><pre><span><span>&lt;!--</span>[if lte IE 9]&gt;</span>
<span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.10/es5-shim.min.js"&gt;&lt;/script&gt;</span>
<span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"&gt;&lt;/script&gt;</span>
<span>&lt;![endif]<span>--&gt;</span></span>
&lt;<span>script</span> <span>src</span>=<span><span>"</span>https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js<span>"</span></span>&gt;&lt;/<span>script</span>&gt;
&lt;<span>script</span>&gt;<span></span>
<span><span><span>//</span> encode from JS Object to MessagePack (Uint8Array)</span></span>
<span><span>var</span> buffer <span>=</span> <span>msgpack</span>.<span>encode</span>({foo<span>:</span> <span><span>"</span>bar<span>"</span></span>});</span>
<span></span>
<span><span><span>//</span> decode from MessagePack (Uint8Array) to JS Object</span></span>
<span><span>var</span> array <span>=</span> <span>new</span> <span>Uint8Array</span>([<span>0x81</span>, <span>0xA3</span>, <span>0x66</span>, <span>0x6F</span>, <span>0x6F</span>, <span>0xA3</span>, <span>0x62</span>, <span>0x61</span>, <span>0x72</span>]);</span>
<span><span>var</span> data <span>=</span> <span>msgpack</span>.<span>decode</span>(array);</span>
<span></span>&lt;/<span>script</span>&gt;</pre></div>
<h7>
MessagePack With Browserify</h7>
<p>Step #1: write some code at first.</p>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);
<span>var</span> buffer <span>=</span> <span>msgpack</span>.<span>encode</span>({<span><span>"</span>foo<span>"</span></span><span>:</span> <span><span>"</span>bar<span>"</span></span>});
<span>var</span> data <span>=</span> <span>msgpack</span>.<span>decode</span>(buffer);
<span>console</span>.<span>warn</span>(data); <span><span>//</span> =&gt; {"foo": "bar"}</span></pre></div>
<p>Proceed to the next steps if you prefer faster browserify compilation time.</p>
<p>Step #2: add <code>browser</code> property on <code>package.json</code> in your project. This refers the global <code>msgpack</code> object instead of including whole of <code>msgpack-lite</code> source code.</p>
<div><pre>{
  <span><span>"</span>dependencies<span>"</span></span>: {
    <span><span>"</span>msgpack-lite<span>"</span></span>: <span><span>"</span>*<span>"</span></span>
  },
  <span><span>"</span>browser<span>"</span></span>: {
    <span><span>"</span>msgpack-lite<span>"</span></span>: <span><span>"</span>msgpack-lite/global<span>"</span></span>
  }
}</pre></div>
<p>Step #3: compile it with <a href="https://www.npmjs.com/package/browserify" rel="nofollow">browserify</a> and <a href="https://www.npmjs.com/package/uglify-js" rel="nofollow">uglifyjs</a>.</p>
<div><pre>browserify src/main.js -o tmp/main.browserify.js -s main
uglifyjs tmp/main.browserify.js -m -c -o js/main.min.js
cp node_modules/msgpack-lite/dist/msgpack.min.js js/msgpack.min.js</pre></div>
<p>Step #4: load <a href="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js" rel="nofollow">msgpack.min.js</a> before your code.</p>
<div><pre>&lt;<span>script</span> <span>src</span>=<span><span>"</span>js/msgpack.min.js<span>"</span></span>&gt;&lt;/<span>script</span>&gt;
&lt;<span>script</span> <span>src</span>=<span><span>"</span>js/main.min.js<span>"</span></span>&gt;&lt;/<span>script</span>&gt;</pre></div>
<h7>
Interoperability</h7>
<p>It is tested to have basic compatibility with other Node.js MessagePack modules below:</p>
<ul>
<li>
<a href="https://www.npmjs.com/package/msgpack" rel="nofollow">https://www.npmjs.com/package/msgpack</a> (1.0.2)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js" rel="nofollow">https://www.npmjs.com/package/msgpack-js</a> (0.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-js-v5" rel="nofollow">https://www.npmjs.com/package/msgpack-js-v5</a> (0.3.0-v5)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack-unpack" rel="nofollow">https://www.npmjs.com/package/msgpack-unpack</a> (2.1.1)</li>
<li>
<a href="https://github.com/msgpack/msgpack-javascript">https://github.com/msgpack/msgpack-javascript</a> (msgpack.codec)</li>
<li>
<a href="https://www.npmjs.com/package/msgpack5" rel="nofollow">https://www.npmjs.com/package/msgpack5</a> (3.3.0)</li>
<li>
<a href="https://www.npmjs.com/package/notepack" rel="nofollow">https://www.npmjs.com/package/notepack</a> (0.0.2)</li>
</ul>
<h7>
Benchmarks</h7>
<p>A benchmark tool <code>lib/benchmark.js</code> is available to compare encoding/decoding speed
(operation per second) with other MessagePack modules.
It counts operations of <a href="https://github.com/kawanet/msgpack-lite/blob/master/test/example.json">1KB JSON document</a> in 10 seconds.</p>
<div><pre>$ npm install msgpack msgpack-js msgpack-js-v5 msgpack-unpack msgpack5 notepack
$ npm run benchmark 10</pre></div>
<table>
<thead>
<tr>
<th>operation</th>
<th>op</th>
<th>ms</th>
<th>op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>buf = Buffer(JSON.stringify(obj));</td>
<td>1055200</td>
<td>10000</td>
<td>105520</td>
</tr>
<tr>
<td>obj = JSON.parse(buf);</td>
<td>863800</td>
<td>10000</td>
<td>86380</td>
</tr>
<tr>
<td>buf = require("msgpack-lite").encode(obj);</td>
<td>969100</td>
<td>10000</td>
<td>96910</td>
</tr>
<tr>
<td>obj = require("msgpack-lite").decode(buf);</td>
<td>600300</td>
<td>10000</td>
<td>60030</td>
</tr>
<tr>
<td>buf = require("msgpack").pack(obj);</td>
<td>503500</td>
<td>10001</td>
<td>50344</td>
</tr>
<tr>
<td>obj = require("msgpack").unpack(buf);</td>
<td>560200</td>
<td>10001</td>
<td>56014</td>
</tr>
<tr>
<td>buf = Buffer(require("msgpack.codec").msgpack.pack(obj));</td>
<td>653500</td>
<td>10000</td>
<td>65349</td>
</tr>
<tr>
<td>obj = require("msgpack.codec").msgpack.unpack(buf);</td>
<td>367500</td>
<td>10001</td>
<td>36746</td>
</tr>
<tr>
<td>buf = require("msgpack-js-v5").encode(obj);</td>
<td>189500</td>
<td>10002</td>
<td>18946</td>
</tr>
<tr>
<td>obj = require("msgpack-js-v5").decode(buf);</td>
<td>408900</td>
<td>10000</td>
<td>40890</td>
</tr>
<tr>
<td>buf = require("msgpack-js").encode(obj);</td>
<td>189200</td>
<td>10000</td>
<td>18920</td>
</tr>
<tr>
<td>obj = require("msgpack-js").decode(buf);</td>
<td>375600</td>
<td>10002</td>
<td>37552</td>
</tr>
<tr>
<td>buf = require("msgpack5")().encode(obj);</td>
<td>110500</td>
<td>10009</td>
<td>11040</td>
</tr>
<tr>
<td>obj = require("msgpack5")().decode(buf);</td>
<td>165500</td>
<td>10000</td>
<td>16550</td>
</tr>
<tr>
<td>buf = require("notepack")().encode(obj);</td>
<td>847800</td>
<td>10000</td>
<td>84780</td>
</tr>
<tr>
<td>obj = require("notepack")().decode(buf);</td>
<td>599800</td>
<td>10000</td>
<td>59980</td>
</tr>
<tr>
<td>obj = require("msgpack-unpack").decode(buf);</td>
<td>48100</td>
<td>10002</td>
<td>4809</td>
</tr>
</tbody>
</table>
<p>Streaming benchmark tool <code>lib/benchmark-stream.js</code> is also available.
It counts milliseconds for 1,000,000 operations of 30 bytes fluentd msgpack fragment.
This shows streaming encoding and decoding are super faster.</p>
<div><pre>$ npm run benchmark-stream 2</pre></div>
<table>
<thead>
<tr>
<th>operation (1000000 x 2)</th>
<th>op</th>
<th>ms</th>
<th>op/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>stream.write(msgpack.encode(obj));</td>
<td>1000000</td>
<td>3027</td>
<td>330360</td>
</tr>
<tr>
<td>stream.write(notepack.encode(obj));</td>
<td>1000000</td>
<td>2012</td>
<td>497017</td>
</tr>
<tr>
<td>msgpack.Encoder().on("data",ondata).encode(obj);</td>
<td>1000000</td>
<td>2956</td>
<td>338294</td>
</tr>
<tr>
<td>msgpack.createEncodeStream().write(obj);</td>
<td>1000000</td>
<td>1888</td>
<td>529661</td>
</tr>
<tr>
<td>stream.write(msgpack.decode(buf));</td>
<td>1000000</td>
<td>2020</td>
<td>495049</td>
</tr>
<tr>
<td>stream.write(notepack.decode(buf));</td>
<td>1000000</td>
<td>1794</td>
<td>557413</td>
</tr>
<tr>
<td>msgpack.Decoder().on("data",ondata).decode(buf);</td>
<td>1000000</td>
<td>2744</td>
<td>364431</td>
</tr>
<tr>
<td>msgpack.createDecodeStream().write(buf);</td>
<td>1000000</td>
<td>1341</td>
<td>745712</td>
</tr>
</tbody>
</table>
<p>Test environment: msgpack-lite 0.1.14, Node v4.2.3, Intel(R) Xeon(R) CPU E5-2666 v3 @ 2.90GHz</p>
<h7>
MessagePack Mapping Table</h7>
<p>The following table shows how JavaScript objects (value) will be mapped to
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack formats</a>
and vice versa.</p>
<table>
<thead>
<tr>
<th>Source Value</th>
<th>MessagePack Format</th>
<th>Value Decoded</th>
</tr>
</thead>
<tbody>
<tr>
<td>null, undefined</td>
<td>nil format family</td>
<td>null</td>
</tr>
<tr>
<td>Boolean (true, false)</td>
<td>bool format family</td>
<td>Boolean (true, false)</td>
</tr>
<tr>
<td>Number (32bit int)</td>
<td>int format family</td>
<td>Number (int or double)</td>
</tr>
<tr>
<td>Number (64bit double)</td>
<td>float format family</td>
<td>Number (double)</td>
</tr>
<tr>
<td>String</td>
<td>str format family</td>
<td>String</td>
</tr>
<tr>
<td>Buffer</td>
<td>bin format family</td>
<td>Buffer</td>
</tr>
<tr>
<td>Array</td>
<td>array format family</td>
<td>Array</td>
</tr>
<tr>
<td>Map</td>
<td>map format family</td>
<td>Map (if <code>usemap=true</code>)</td>
</tr>
<tr>
<td>Object (plain object)</td>
<td>map format family</td>
<td>Object (or Map if <code>usemap=true</code>)</td>
</tr>
<tr>
<td>Object (see below)</td>
<td>ext format family</td>
<td>Object (see below)</td>
</tr>
</tbody>
</table>
<p>Note that both <code>null</code> and <code>undefined</code> are mapped to nil <code>0xC1</code> type.
This means <code>undefined</code> value will be <em>upgraded</em> to <code>null</code> in other words.</p>
<h7>
Extension Types</h7>
<p>The MessagePack specification allows 128 application-specific extension types.
The library uses the following types to make round-trip conversion possible
for JavaScript native objects.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Object</th>
<th>Type</th>
<th>Object</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td></td>
<td>0x10</td>
<td></td>
</tr>
<tr>
<td>0x01</td>
<td>EvalError</td>
<td>0x11</td>
<td>Int8Array</td>
</tr>
<tr>
<td>0x02</td>
<td>RangeError</td>
<td>0x12</td>
<td>Uint8Array</td>
</tr>
<tr>
<td>0x03</td>
<td>ReferenceError</td>
<td>0x13</td>
<td>Int16Array</td>
</tr>
<tr>
<td>0x04</td>
<td>SyntaxError</td>
<td>0x14</td>
<td>Uint16Array</td>
</tr>
<tr>
<td>0x05</td>
<td>TypeError</td>
<td>0x15</td>
<td>Int32Array</td>
</tr>
<tr>
<td>0x06</td>
<td>URIError</td>
<td>0x16</td>
<td>Uint32Array</td>
</tr>
<tr>
<td>0x07</td>
<td></td>
<td>0x17</td>
<td>Float32Array</td>
</tr>
<tr>
<td>0x08</td>
<td></td>
<td>0x18</td>
<td>Float64Array</td>
</tr>
<tr>
<td>0x09</td>
<td></td>
<td>0x19</td>
<td>Uint8ClampedArray</td>
</tr>
<tr>
<td>0x0A</td>
<td>RegExp</td>
<td>0x1A</td>
<td>ArrayBuffer</td>
</tr>
<tr>
<td>0x0B</td>
<td>Boolean</td>
<td>0x1B</td>
<td>Buffer</td>
</tr>
<tr>
<td>0x0C</td>
<td>String</td>
<td>0x1C</td>
<td></td>
</tr>
<tr>
<td>0x0D</td>
<td>Date</td>
<td>0x1D</td>
<td>DataView</td>
</tr>
<tr>
<td>0x0E</td>
<td>Error</td>
<td>0x1E</td>
<td></td>
</tr>
<tr>
<td>0x0F</td>
<td>Number</td>
<td>0x1F</td>
<td></td>
</tr>
</tbody>
</table>
<p>Other extension types are mapped to built-in ExtBuffer object.</p>
<h7>
Custom Extension Types (Codecs)</h7>
<p>Register a custom extension type number to serialize/deserialize your own class instances.</p>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>"</span>msgpack-lite<span>"</span></span>);

<span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>();
<span>codec</span>.<span>addExtPacker</span>(<span>0x3F</span>, MyVector, myVectorPacker);
<span>codec</span>.<span>addExtUnpacker</span>(<span>0x3F</span>, myVectorUnpacker);

<span>var</span> data <span>=</span> <span>new</span> <span>MyVector</span>(<span>1</span>, <span>2</span>);
<span>var</span> encoded <span>=</span> <span>msgpack</span>.<span>encode</span>(data, {codec<span>:</span> codec});
<span>var</span> decoded <span>=</span> <span>msgpack</span>.<span>decode</span>(encoded, {codec<span>:</span> codec});

<span>function</span> <span>MyVector</span>(<span>x</span>, <span>y</span>) {
  <span>this</span>.<span>x</span> <span>=</span> x;
  <span>this</span>.<span>y</span> <span>=</span> y;
}

<span>function</span> <span>myVectorPacker</span>(<span>vector</span>) {
  <span>var</span> array <span>=</span> [<span>vector</span>.<span>x</span>, <span>vector</span>.<span>y</span>];
  <span>return</span> <span>msgpack</span>.<span>encode</span>(array); <span><span>//</span> return Buffer serialized</span>
}

<span>function</span> <span>myVectorUnpacker</span>(<span>buffer</span>) {
  <span>var</span> array <span>=</span> <span>msgpack</span>.<span>decode</span>(buffer);
  <span>return</span> <span>new</span> <span>MyVector</span>(array[<span>0</span>], array[<span>1</span>]); <span><span>//</span> return Object deserialized</span>
}</pre></div>
<p>The first argument of <code>addExtPacker</code> and <code>addExtUnpacker</code> should be an integer within the range of 0 and 127 (0x0 and 0x7F). <code>myClassPacker</code> is a function that accepts an instance of <code>MyClass</code>, and should return a buffer representing that instance. <code>myClassUnpacker</code> is the opposite: it accepts a buffer and should return an instance of <code>MyClass</code>.</p>
<p>If you pass an array of functions to <code>addExtPacker</code> or <code>addExtUnpacker</code>, the value to be encoded/decoded will pass through each one in order. This allows you to do things like this:</p>
<div><pre><span>codec</span>.<span>addExtPacker</span>(<span>0x00</span>, <span>Date</span>, [<span>Number</span>, <span>msgpack</span>.<span>encode</span>]);</pre></div>
<p>You can also pass the <code>codec</code> option to <code>msgpack.Decoder(options)</code>, <code>msgpack.Encoder(options)</code>, <code>msgpack.createEncodeStream(options)</code>, and <code>msgpack.createDecodeStream(options)</code>.</p>
<p>If you wish to modify the default built-in codec, you can access it at <code>msgpack.codec.preset</code>.</p>
<h7>
Custom Codec Options</h7>
<p><code>msgpack.createCodec()</code> function accepts some options.</p>
<p>It does NOT have the preset extension types defined when no options given.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>();</pre></div>
<p><code>preset</code>: It has the preset extension types described above.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({preset<span>:</span> <span>true</span>});</pre></div>
<p><code>safe</code>: It runs a validation of the value before writing it into buffer. This is the default behavior for some old browsers which do not support <code>ArrayBuffer</code> object.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({safe<span>:</span> <span>true</span>});</pre></div>
<p><code>useraw</code>: It uses <code>raw</code> formats instead of <code>bin</code> and <code>str</code>.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({useraw<span>:</span> <span>true</span>});</pre></div>
<p><code>int64</code>: It decodes msgpack's <code>int64</code>/<code>uint64</code> formats with <a href="https://github.com/kawanet/int64-buffer">int64-buffer</a> object.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({int64<span>:</span> <span>true</span>});</pre></div>
<p><code>binarraybuffer</code>: It ties msgpack's <code>bin</code> format with <code>ArrayBuffer</code> object, instead of <code>Buffer</code> object.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({binarraybuffer<span>:</span> <span>true</span>, preset<span>:</span> <span>true</span>});</pre></div>
<p><code>uint8array</code>: It returns Uint8Array object when encoding, instead of <code>Buffer</code> object.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({uint8array<span>:</span> <span>true</span>});</pre></div>
<p><code>usemap</code>: Uses the global JavaScript Map type, if available, to unpack
MessagePack map elements.</p>
<div><pre><span>var</span> codec <span>=</span> <span>msgpack</span>.<span>createCodec</span>({usemap<span>:</span> <span>true</span>});</pre></div>
<h7>
Compatibility Mode</h7>
<p>The <a href="https://github.com/kawanet/msgpack-lite/issues/22">compatibility mode</a> respects for <a href="https://github.com/msgpack/msgpack/blob/master/spec-old.md">msgpack's old spec</a>. Set <code>true</code> to <code>useraw</code>.</p>
<div><pre><span><span>//</span> default mode handles both str and bin formats individually</span>
<span>msgpack</span>.<span>encode</span>(<span><span>"</span>Aa<span>"</span></span>); <span><span>//</span> =&gt; &lt;Buffer a2 41 61&gt; (str format)</span>
<span>msgpack</span>.<span>encode</span>(<span>new</span> <span>Buffer</span>([<span>0x41</span>, <span>0x61</span>])); <span><span>//</span> =&gt; &lt;Buffer c4 02 41 61&gt; (bin format)</span>

<span>msgpack</span>.<span>decode</span>(<span>new</span> <span>Buffer</span>([<span>0xa2</span>, <span>0x41</span>, <span>0x61</span>])); <span><span>//</span> =&gt; 'Aa' (String)</span>
<span>msgpack</span>.<span>decode</span>(<span>new</span> <span>Buffer</span>([<span>0xc4</span>, <span>0x02</span>, <span>0x41</span>, <span>0x61</span>])); <span><span>//</span> =&gt; &lt;Buffer 41 61&gt; (Buffer)</span>

<span><span>//</span> compatibility mode handles only raw format both for String and Buffer</span>
<span>var</span> options <span>=</span> {codec<span>:</span> <span>msgpack</span>.<span>createCodec</span>({useraw<span>:</span> <span>true</span>})};
<span>msgpack</span>.<span>encode</span>(<span><span>"</span>Aa<span>"</span></span>, options); <span><span>//</span> =&gt; &lt;Buffer a2 41 61&gt; (raw format)</span>
<span>msgpack</span>.<span>encode</span>(<span>new</span> <span>Buffer</span>([<span>0x41</span>, <span>0x61</span>]), options); <span><span>//</span> =&gt; &lt;Buffer a2 41 61&gt; (raw format)</span>

<span>msgpack</span>.<span>decode</span>(<span>new</span> <span>Buffer</span>([<span>0xa2</span>, <span>0x41</span>, <span>0x61</span>]), options); <span><span>//</span> =&gt; &lt;Buffer 41 61&gt; (Buffer)</span>
<span>msgpack</span>.<span>decode</span>(<span>new</span> <span>Buffer</span>([<span>0xa2</span>, <span>0x41</span>, <span>0x61</span>]), options).<span>toString</span>(); <span><span>//</span> =&gt; 'Aa' (String)</span></pre></div>
<h7>
Repository</h7>
<ul>
<li><a href="https://github.com/kawanet/msgpack-lite">https://github.com/kawanet/msgpack-lite</a></li>
</ul>
<h7>
See Also</h7>
<ul>
<li><a href="https://msgpack.org/" rel="nofollow">http://msgpack.org/</a></li>
</ul>
<h7>
License</h7>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2015-2016 Yusuke Kawasaki</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-rybakit-msgpack-php"><h4><a href="https://github.com/rybakit/msgpack.php" target="_blank">rybakit/msgpack.php <span>https://github.com/rybakit/msgpack.php</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack.php</h5>
<p>A pure PHP implementation of the <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serialization format.</p>
<p><a href="https://travis-ci.org/rybakit/msgpack.php" rel="nofollow"><img src="https://camo.githubusercontent.com/dd2168702092c4746665311df450ca722a6d5650/68747470733a2f2f7472617669732d63692e6f72672f727962616b69742f6d73677061636b2e7068702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/rybakit/msgpack.php.svg?branch=master"></a>
<a href="https://scrutinizer-ci.com/g/rybakit/msgpack.php/?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/01ce830e0a711566f0f2c7381de4bee2393868cf/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f727962616b69742f6d73677061636b2e7068702f6261646765732f636f7665726167652e706e673f623d6d6173746572" alt="Code Coverage" data-canonical-src="https://scrutinizer-ci.com/g/rybakit/msgpack.php/badges/coverage.png?b=master"></a></p>
<h6>
Features</h6>
<ul>
<li>Fully compliant with the latest <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a>,
including <strong>bin</strong>, <strong>str</strong> and <strong>ext</strong> types</li>
<li>Supports <a href="#unpacking">streaming unpacking</a>
</li>
<li>Supports <a href="#unpacking-options">unsigned 64-bit integers handling</a>
</li>
<li>Supports <a href="#type-transformers">object serialization</a>
</li>
<li><a href="https://travis-ci.org/rybakit/msgpack.php" rel="nofollow">Fully tested</a></li>
<li><a href="#performance">Relatively fast</a></li>
</ul>
<h6>
Table of contents</h6>
<ul>
<li><a href="#installation">Installation</a></li>
<li>
<a href="#usage">Usage</a>
<ul>
<li>
<a href="#packing">Packing</a>
<ul>
<li><a href="#packing-options">Packing options</a></li>
</ul>
</li>
<li>
<a href="#unpacking">Unpacking</a>
<ul>
<li><a href="#unpacking-options">Unpacking options</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#type-transformers">Type transformers</a></li>
<li><a href="#exceptions">Exceptions</a></li>
<li>
<a href="#tests">Tests</a>
<ul>
<li><a href="#performance">Performance</a></li>
</ul>
</li>
<li><a href="#license">License</a></li>
</ul>
<h6>
Installation</h6>
<p>The recommended way to install the library is through <a href="https://getcomposer.org/" rel="nofollow">Composer</a>:</p>
<div><pre>composer require rybakit/msgpack</pre></div>
<h6>
Usage</h6>
<h7>
Packing</h7>
<p>To pack values you can either use an instance of a <code>Packer</code>:</p>
<div><pre><span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>();</span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span>$packed</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack(<span>$value</span>);</span></pre></div>
<p>or call a static method on the <code>MessagePack</code> class:</p>
<div><pre><span><span>use</span> <span>MessagePack\MessagePack</span>;</span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span>$packed</span> <span>=</span> <span>MessagePack</span><span>::</span>pack(<span>$value</span>);</span></pre></div>
<p>In the examples above, the method <code>pack</code> automatically packs a value depending on its type. But not all PHP types
can be uniquely translated to MessagePack types. For example, the MessagePack format defines <code>map</code> and <code>array</code> types,
which are represented by a single <code>array</code> type in PHP. By default, the packer will pack a PHP array as a MessagePack
array if it has sequential numeric keys, starting from <code>0</code> and as a MessagePack map otherwise:</p>
<div><pre><span><span>$mpArr1</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([<span>1</span>, <span>2</span>]);               <span><span>//</span> MP array [1, 2]</span></span>
<span><span>$mpArr2</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([<span>0</span> <span>=&gt;</span> <span>1</span>, <span>1</span> <span>=&gt;</span> <span>2</span>]);     <span><span>//</span> MP array [1, 2]</span></span>
<span><span>$mpMap1</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([<span>0</span> <span>=&gt;</span> <span>1</span>, <span>2</span> <span>=&gt;</span> <span>3</span>]);     <span><span>//</span> MP map {0: 1, 2: 3}</span></span>
<span><span>$mpMap2</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([<span>1</span> <span>=&gt;</span> <span>2</span>, <span>2</span> <span>=&gt;</span> <span>3</span>]);     <span><span>//</span> MP map {1: 2, 2: 3}</span></span>
<span><span>$mpMap3</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([<span><span>'</span>a<span>'</span></span> <span>=&gt;</span> <span>1</span>, <span><span>'</span>b<span>'</span></span> <span>=&gt;</span> <span>2</span>]); <span><span>//</span> MP map {a: 1, b: 2}</span></span></pre></div>
<p>However, sometimes you need to pack a sequential array as a MessagePack map.
To do this, use the <code>packMap</code> method:</p>
<div><pre><span><span>$mpMap</span> <span>=</span> <span>$packer</span><span>-&gt;</span>packMap([<span>1</span>, <span>2</span>]); <span><span>//</span> {0: 1, 1: 2}</span></span></pre></div>
<p>Here is a list of type-specific packing methods:</p>
<div><pre><span><span>$packer</span><span>-&gt;</span>packNil();           <span><span>//</span> MP nil</span></span>
<span><span>$packer</span><span>-&gt;</span>packBool(<span>true</span>);      <span><span>//</span> MP bool</span></span>
<span><span>$packer</span><span>-&gt;</span>packInt(<span>42</span>);         <span><span>//</span> MP int</span></span>
<span><span>$packer</span><span>-&gt;</span>packFloat(<span>M_PI</span>);     <span><span>//</span> MP float</span></span>
<span><span>$packer</span><span>-&gt;</span>packStr(<span><span>'</span>foo<span>'</span></span>);      <span><span>//</span> MP str</span></span>
<span><span>$packer</span><span>-&gt;</span>packBin(<span><span>"</span><span>\x80</span><span>"</span></span>);     <span><span>//</span> MP bin</span></span>
<span><span>$packer</span><span>-&gt;</span>packArray([<span>1</span>, <span>2</span>]);   <span><span>//</span> MP array</span></span>
<span><span>$packer</span><span>-&gt;</span>packMap([<span><span>'</span>a<span>'</span></span> <span>=&gt;</span> <span>1</span>]); <span><span>//</span> MP map</span></span>
<span><span>$packer</span><span>-&gt;</span>packExt(<span>1</span>, <span><span>"</span><span>\xaa</span><span>"</span></span>);  <span><span>//</span> MP ext</span></span></pre></div>
<blockquote>
<p><em>Check the <a href="#type-transformers">"Type transformers"</a> section below on how to pack custom types.</em></p>
</blockquote>
<h8>
Packing options</h8>
<p>The <code>Packer</code> object supports a number of bitmask-based options for fine-tuning the packing
process (defaults are in bold):</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>FORCE_STR</td>
<td>Forces PHP strings to be packed as MessagePack UTF-8 strings</td>
</tr>
<tr>
<td>FORCE_BIN</td>
<td>Forces PHP strings to be packed as MessagePack binary data</td>
</tr>
<tr>
<td><strong>DETECT_STR_BIN</strong></td>
<td>Detects MessagePack str/bin type automatically</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>FORCE_ARR</td>
<td>Forces PHP arrays to be packed as MessagePack arrays</td>
</tr>
<tr>
<td>FORCE_MAP</td>
<td>Forces PHP arrays to be packed as MessagePack maps</td>
</tr>
<tr>
<td><strong>DETECT_ARR_MAP</strong></td>
<td>Detects MessagePack array/map type automatically</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>FORCE_FLOAT32</td>
<td>Forces PHP floats to be packed as 32-bits MessagePack floats</td>
</tr>
<tr>
<td><strong>FORCE_FLOAT64</strong></td>
<td>Forces PHP floats to be packed as 64-bits MessagePack floats</td>
</tr>
</tbody>
</table>
<blockquote>
<p><em>The type detection mode (<code>DETECT_STR_BIN</code>/<code>DETECT_ARR_MAP</code>) adds some overhead which can be noticed when you pack
large (16- and 32-bit) arrays or strings. However, if you know the value type in advance (for example, you only
work with UTF-8 strings or/and associative arrays), you can eliminate this overhead by forcing the packer to use
the appropriate type, which will save it from running the auto-detection routine. Another option is to explicitly
specify the value type. The library provides 2 auxiliary classes for this, <code>Map</code> and <code>Binary</code>.
Check the <a href="#type-transformers">"Type transformers"</a> section below for details.</em></p>
</blockquote>
<p>Examples:</p>
<div><pre><span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span><span>use</span> <span>MessagePack\PackOptions</span>;</span>
<span></span>
<span><span><span>//</span> pack PHP strings to MP strings, PHP arrays to MP maps </span></span>
<span><span><span>//</span> and PHP 64-bit floats (doubles) to MP 32-bit floats</span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>(<span>PackOptions</span><span>::</span><span>FORCE_STR</span> <span>|</span> <span>PackOptions</span><span>::</span><span>FORCE_MAP</span> <span>|</span> <span>PackOptions</span><span>::</span><span>FORCE_FLOAT32</span>);</span>
<span></span>
<span><span><span>//</span> pack PHP strings to MP binaries and PHP arrays to MP arrays</span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>(<span>PackOptions</span><span>::</span><span>FORCE_BIN</span> <span>|</span> <span>PackOptions</span><span>::</span><span>FORCE_ARR</span>);</span>
<span></span>
<span><span><span>//</span> these will throw MessagePack\Exception\InvalidOptionException</span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>(<span>PackOptions</span><span>::</span><span>FORCE_STR</span> <span>|</span> <span>PackOptions</span><span>::</span><span>FORCE_BIN</span>);</span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>(<span>PackOptions</span><span>::</span><span>FORCE_FLOAT32</span> <span>|</span> <span>PackOptions</span><span>::</span><span>FORCE_FLOAT64</span>);</span></pre></div>
<h7>
Unpacking</h7>
<p>To unpack data you can either use an instance of a <code>BufferUnpacker</code>:</p>
<div><pre><span><span>use</span> <span>MessagePack\BufferUnpacker</span>;</span>
<span></span>
<span><span>$unpacker</span> <span>=</span> <span>new</span> <span>BufferUnpacker</span>();</span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span>$unpacker</span><span>-&gt;</span>reset(<span>$packed</span>);</span>
<span><span>$value</span> <span>=</span> <span>$unpacker</span><span>-&gt;</span>unpack();</span></pre></div>
<p>or call a static method on the <code>MessagePack</code> class:</p>
<div><pre><span><span>use</span> <span>MessagePack\MessagePack</span>;</span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span>$value</span> <span>=</span> <span>MessagePack</span><span>::</span>unpack(<span>$packed</span>);</span></pre></div>
<p>If the packed data is received in chunks (e.g. when reading from a stream), use the <code>tryUnpack</code> method, which attempts
to unpack data and returns an array of unpacked messages (if any) instead of throwing an <code>InsufficientDataException</code>:</p>
<div><pre><span><span>while</span> (<span>$chunk</span> <span>=</span> <span>...</span>) {</span>
<span>    <span>$unpacker</span><span>-&gt;</span>append(<span>$chunk</span>);</span>
<span>    <span>if</span> (<span>$messages</span> <span>=</span> <span>$unpacker</span><span>-&gt;</span>tryUnpack()) {</span>
<span>        <span>return</span> <span>$messages</span>;</span>
<span>    }</span>
<span>}</span></pre></div>
<p>If you want to unpack from a specific position in a buffer, use <code>seek()</code>:</p>
<div><pre><span><span>$unpacker</span><span>-&gt;</span>seek(<span>42</span>); <span><span>//</span> set position equal to 42 bytes</span></span>
<span><span>$unpacker</span><span>-&gt;</span>seek(<span>-</span><span>8</span>); <span><span>//</span> set position to 8 bytes before the end of the buffer</span></span></pre></div>
<p>To skip bytes from the current position, use <code>skip()</code>:</p>
<div><pre><span><span>$unpacker</span><span>-&gt;</span>skip(<span>10</span>); <span><span>//</span> set position to 10 bytes ahead of the current position</span></span></pre></div>
<p>Besides the above methods <code>BufferUnpacker</code> provides type-specific unpacking methods, namely:</p>
<div><pre><span><span>$unpacker</span><span>-&gt;</span>unpackNil();   <span><span>//</span> PHP null</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackBool();  <span><span>//</span> PHP bool</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackInt();   <span><span>//</span> PHP int</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackFloat(); <span><span>//</span> PHP float</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackStr();   <span><span>//</span> PHP UTF-8 string</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackBin();   <span><span>//</span> PHP binary string</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackArray(); <span><span>//</span> PHP sequential array</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackMap();   <span><span>//</span> PHP associative array</span></span>
<span><span>$unpacker</span><span>-&gt;</span>unpackExt();   <span><span>//</span> PHP Ext class</span></span></pre></div>
<h8>
Unpacking options</h8>
<p>The <code>BufferUnpacker</code> object supports a number of bitmask-based options for fine-tuning the unpacking process (defaults
are in bold):</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BIGINT_AS_EXCEPTION</td>
<td>Throws an exception on integer overflow <sup>[1]</sup>
</td>
</tr>
<tr>
<td>BIGINT_AS_GMP</td>
<td>Converts overflowed integers to GMP objects <sup>[2]</sup>
</td>
</tr>
<tr>
<td><strong>BIGINT_AS_STR</strong></td>
<td>Converts overflowed integers to strings</td>
</tr>
</tbody>
</table>
<blockquote>
<p><em>1. The binary MessagePack format has unsigned 64-bit as its largest integer data type,
but PHP does not support such integers, which means that an overflow can occur during unpacking.</em></p>
<p><em>2. Make sure that the <a href="https://php.net/manual/en/book.gmp.php" rel="nofollow">GMP</a> extension is enabled.</em></p>
</blockquote>
<p>Examples:</p>
<div><pre><span><span>use</span> <span>MessagePack\BufferUnpacker</span>;</span>
<span><span>use</span> <span>MessagePack\UnpackOptions</span>;</span>
<span></span>
<span><span>$packedUint64</span> <span>=</span> <span><span>"</span><span>\xcf</span><span>"</span></span><span>.</span><span><span>"</span><span>\xff\xff\xff\xff</span><span>"</span></span><span>.</span><span><span>"</span><span>\xff\xff\xff\xff</span><span>"</span></span>;</span>
<span></span>
<span><span>$unpacker</span> <span>=</span> <span>new</span> <span>BufferUnpacker</span>(<span>$packedUint64</span>);</span>
<span><span>var_dump</span>(<span>$unpacker</span><span>-&gt;</span>unpack()); <span><span>//</span> string(20) "18446744073709551615"</span></span>
<span></span>
<span><span>$unpacker</span> <span>=</span> <span>new</span> <span>BufferUnpacker</span>(<span>$packedUint64</span>, <span>UnpackOptions</span><span>::</span><span>BIGINT_AS_GMP</span>);</span>
<span><span>var_dump</span>(<span>$unpacker</span><span>-&gt;</span>unpack()); <span><span>//</span> object(GMP) {...}</span></span>
<span></span>
<span><span>$unpacker</span> <span>=</span> <span>new</span> <span>BufferUnpacker</span>(<span>$packedUint64</span>, <span>UnpackOptions</span><span>::</span><span>BIGINT_AS_EXCEPTION</span>);</span>
<span><span>$unpacker</span><span>-&gt;</span>unpack(); <span><span>//</span> throws MessagePack\Exception\IntegerOverflowException</span></span></pre></div>
<h7>
Extensions</h7>
<p>To define application-specific types use the <code>Ext</code> class:</p>
<div><pre><span><span>use</span> <span>MessagePack\Ext</span>;</span>
<span><span>use</span> <span>MessagePack\MessagePack</span>;</span>
<span></span>
<span><span>$packed</span> <span>=</span> <span>MessagePack</span><span>::</span>pack(<span>new</span> <span>Ext</span>(<span>42</span>, <span><span>"</span><span>\xaa</span><span>"</span></span>));</span>
<span><span>$ext</span> <span>=</span> <span>MessagePack</span><span>::</span>unpack(<span>$packed</span>);</span>
<span></span>
<span><span>var_dump</span>(<span>$ext</span><span>-&gt;</span><span>type</span> <span>===</span> <span>42</span>); <span><span>//</span> bool(true)</span></span>
<span><span>var_dump</span>(<span>$ext</span><span>-&gt;</span><span>data</span> <span>===</span> <span><span>"</span><span>\xaa</span><span>"</span></span>); <span><span>//</span> bool(true)</span></span></pre></div>
<h7>
Type transformers</h7>
<p>In addition to <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#type-system">the basic types</a>,
the library provides functionality to serialize and deserialize arbitrary types. In order to support a custom
type you need to create and register a transformer. The transformer should implement either or both the <code>Packable</code>
and/or the <code>Unpackable</code> interface.</p>
<p>The purpose of <code>Packable</code> transformers is to serialize a specific value to one of the basic MessagePack types. A good
example of such a transformer is a <code>MapTransformer</code> that comes with the library. It serializes <code>Map</code> objects (which
are simple wrappers around PHP arrays) to MessagePack maps. This is useful when you want to explicitly mark that
a given PHP array must be packed as a MessagePack map, without triggering the type's auto-detection routine.</p>
<blockquote>
<p><em>More types and type transformers can be found in <a href="https://msgpack.org/rybakit/msgpack.php/blob/master/src/Type">src/Type</a>
and <a href="https://msgpack.org/rybakit/msgpack.php/blob/master/src/TypeTransformer">src/TypeTransformer</a> directories.</em></p>
</blockquote>
<p>The implementation is trivial:</p>
<div><pre><span><span>namespace</span> <span>MessagePack\TypeTransformer</span>;</span>
<span></span>
<span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span><span>use</span> <span>MessagePack\Type\Map</span>;</span>
<span></span>
<span><span>class</span> <span>MapTransformer</span> <span>implements</span> <span>Packable</span></span>
<span>{</span>
<span>    <span>public</span> <span>function</span> <span>pack</span>(<span>Packer</span> <span>$packer</span>, <span>$value</span>) : <span>?</span><span>string</span></span>
<span>    {</span>
<span>        <span>return</span> <span>$value</span> <span>instanceof</span> <span>Map</span></span>
<span>            ? <span>$packer</span><span>-&gt;</span>packMap(<span>$value</span><span>-&gt;</span><span>map</span>)</span>
<span>            : <span>null</span>;</span>
<span>    }</span>
<span>}</span></pre></div>
<p>Once <code>MapTransformer</code> is registered, you can pack <code>Map</code> objects:</p>
<div><pre><span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span><span>use</span> <span>MessagePack\PackOptions</span>;</span>
<span><span>use</span> <span>MessagePack\Type\Map</span>;</span>
<span><span>use</span> <span>MessagePack\TypeTransformer\MapTransformer</span>;</span>
<span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>(<span>PackOptions</span><span>::</span><span>FORCE_ARR</span>);</span>
<span><span>$packer</span><span>-&gt;</span>registerTransformer(<span>new</span> <span>MapTransformer</span>());</span>
<span></span>
<span><span>$packed</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack([</span>
<span>    [<span>1</span>, <span>2</span>, <span>3</span>],          <span><span>//</span> MP array</span></span>
<span>    <span>new</span> <span>Map</span>([<span>1</span>, <span>2</span>, <span>3</span>]), <span><span>//</span> MP map</span></span>
<span>]);</span></pre></div>
<p>Transformers implementing the <code>Unpackable</code> interface are intended for unpacking
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md#extension-types">extension types</a>.
For example, the code below shows how to create a transformer that allows you to work transparently with <code>DateTime</code>
objects:</p>
<div><pre><span><span>use</span> <span>MessagePack\BufferUnpacker</span>;</span>
<span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span><span>use</span> <span>MessagePack\TypeTransformer\Packable</span>;</span>
<span><span>use</span> <span>MessagePack\TypeTransformer\Unpackable</span>;</span>
<span></span>
<span><span>class</span> <span>DateTimeTransformer</span> <span>implements</span> <span>Packable</span>, <span>Unpackable</span> </span>
<span>{</span>
<span>    <span>private</span> <span>$type</span>;</span>
<span></span>
<span>    <span>public</span> <span>function</span> <span>__construct</span>(<span>int</span> <span>$type</span>)</span>
<span>    {</span>
<span>        <span>$this</span><span>-&gt;</span><span>type</span> <span>=</span> <span>$type</span>;</span>
<span>    }</span>
<span></span>
<span>    <span>public</span> <span>function</span> <span>getType</span>() : <span>int</span></span>
<span>    {</span>
<span>        <span>return</span> <span>$this</span><span>-&gt;</span><span>type</span>;</span>
<span>    }</span>
<span></span>
<span>    <span>public</span> <span>function</span> <span>pack</span>(<span>Packer</span> <span>$packer</span>, <span>$value</span>) : <span>?</span><span>string</span></span>
<span>    {</span>
<span>        <span>if</span> (<span>!</span><span>$value</span> <span>instanceof</span> <span>\DateTimeInterface</span>) {</span>
<span>            <span>return</span> <span>null</span>;</span>
<span>        }</span>
<span></span>
<span>        <span>return</span> <span>$packer</span><span>-&gt;</span>packExt(<span>$this</span><span>-&gt;</span><span>type</span>,</span>
<span>            <span>$packer</span><span>-&gt;</span>packStr(<span>$value</span><span>-&gt;</span>format(<span><span>'</span>Y-m-d\TH:i:s.uP<span>'</span></span>))</span>
<span>        );</span>
<span>    }</span>
<span></span>
<span>    <span>public</span> <span>function</span> <span>unpack</span>(<span>BufferUnpacker</span> <span>$unpacker</span>, <span>int</span> <span>$extLength</span>)</span>
<span>    {</span>
<span>        <span>return</span> <span>new</span> <span>\DateTimeImmutable</span>(<span>$unpacker</span><span>-&gt;</span>unpackStr());</span>
<span>    }</span>
<span>}</span></pre></div>
<p>Register <code>DateTimeTransformer</code> for both the packer and the unpacker with a unique extension type (an integer from 0
to 127) and you are ready to go:</p>
<div><pre><span><span>use</span> <span>App\MessagePack\DateTimeTransformer</span>;</span>
<span><span>use</span> <span>MessagePack\BufferUnpacker</span>;</span>
<span><span>use</span> <span>MessagePack\Packer</span>;</span>
<span></span>
<span><span>$transformer</span> <span>=</span> <span>new</span> <span>DateTimeTransformer</span>(<span>42</span>);</span>
<span></span>
<span><span>$packer</span> <span>=</span> <span>new</span> <span>Packer</span>();</span>
<span><span>$packer</span><span>-&gt;</span>registerTransformer(<span>$transformer</span>);</span>
<span></span>
<span><span>$unpacker</span> <span>=</span> <span>new</span> <span>BufferUnpacker</span>();</span>
<span><span>$unpacker</span><span>-&gt;</span>registerTransformer(<span>$transformer</span>);</span>
<span></span>
<span><span>$packed</span> <span>=</span> <span>$packer</span><span>-&gt;</span>pack(<span>new</span> <span>DateTimeImmutable</span>());</span>
<span><span>$date</span> <span>=</span> <span>$unpacker</span><span>-&gt;</span>reset(<span>$packed</span>)<span>-&gt;</span>unpack();</span></pre></div>
<blockquote>
<p><em>More type transformer examples can be found in the <a href="https://msgpack.org/rybakit/msgpack.php/blob/master/examples">examples</a> directory.</em></p>
</blockquote>
<h6>
Exceptions</h6>
<p>If an error occurs during packing/unpacking, a <code>PackingFailedException</code> or <code>UnpackingFailedException</code> will be thrown,
respectively.</p>
<p>In addition, there are two more exceptions that can be thrown during unpacking:</p>
<ul>
<li><code>InsufficientDataException</code></li>
<li><code>IntegerOverflowException</code></li>
</ul>
<p>An <code>InvalidOptionException</code> will be thrown in case an invalid option (or a combination of mutually exclusive options)
is used.</p>
<h6>
Tests</h6>
<p>Run tests as follows:</p>

<p>Also, if you already have Docker installed, you can run the tests in a docker container.
First, create a container:</p>
<div><pre>./dockerfile.sh <span>|</span> docker build -t msgpack -</pre></div>
<p>The command above will create a container named <code>msgpack</code> with PHP 7.2 runtime.
You may change the default runtime by defining the <code>PHP_RUNTIME</code> environment variable:</p>
<div><pre>PHP_RUNTIME=<span><span>'</span>php:7.3-cli<span>'</span></span> ./dockerfile.sh <span>|</span> docker build -t msgpack -</pre></div>
<blockquote>
<p><em>See a list of various runtimes <a href="https://msgpack.org/rybakit/msgpack.php/blob/master/.travis.yml#L8">here</a>.</em></p>
</blockquote>
<p>Then run the unit tests:</p>
<div><pre>docker run --rm --name msgpack -v <span><span>$(</span>pwd<span>)</span></span>:/msgpack -w /msgpack msgpack</pre></div>
<h8>
Performance</h8>
<p>To check performance, run:</p>
<div><pre>php -n -dpcre.jit=1 -dzend_extension=opcache.so -dopcache.enable_cli=1 tests/bench.php</pre></div>
<p>This command will output something like:</p>
<pre><code><span>Filter</span><span>:</span><span> </span><span>MessagePack</span><span>\Tests\Perf\Filter\ListFilter
</span><span>Rounds</span><span>:</span><span> </span><span>3</span><span>
</span><span>Iterations</span><span>:</span><span> </span><span>100000</span><span>

</span><span>=============================================</span><span>
</span><span>Test</span><span>/</span><span>Target</span><span>            </span><span>Packer</span><span>  </span><span>BufferUnpacker</span><span>
</span><span>---------------------------------------------</span><span>
</span><span>nil</span><span> </span><span>..................</span><span> </span><span>0.0041</span><span> </span><span>........</span><span> </span><span>0.0158</span><span>
</span><span>false</span><span> </span><span>................</span><span> </span><span>0.0046</span><span> </span><span>........</span><span> </span><span>0.0166</span><span>
</span><span>true</span><span> </span><span>.................</span><span> </span><span>0.0042</span><span> </span><span>........</span><span> </span><span>0.0158</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ........ 0.0066 ........ 0.0129</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ........ 0.0066 ........ 0.0131</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ........ 0.0067 ........ 0.0134</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#1 ........ 0.0068 ........ 0.0153</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#2 ........ 0.0068 ........ 0.0153</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#3 ........ 0.0067 ........ 0.0152</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ........ 0.0088 ........ 0.0223</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ........ 0.0088 ........ 0.0226</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ........ 0.0090 ........ 0.0224</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ....... 0.0120 ........ 0.0304</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ....... 0.0125 ........ 0.0306</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ....... 0.0122 ........ 0.0301</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ....... 0.0140 ........ 0.0358</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ....... 0.0138 ........ 0.0358</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ....... 0.0141 ........ 0.0365</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ....... 0.0159 ........ 0.0361</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ....... 0.0157 ........ 0.0363</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ....... 0.0157 ........ 0.0362</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ......... 0.0089 ........ 0.0251</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ......... 0.0090 ........ 0.0259</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ......... 0.0094 ........ 0.0255</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ........ 0.0121 ........ 0.0304</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ........ 0.0121 ........ 0.0306</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ........ 0.0121 ........ 0.0305</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ........ 0.0141 ........ 0.0364</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ........ 0.0146 ........ 0.0377</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ........ 0.0145 ........ 0.0369</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ........ 0.0142 ........ 0.0359</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ........ 0.0143 ........ 0.0360</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ........ 0.0147 ........ 0.0360</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#4 ........ 0.0142 ........ 0.0358</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#1 ...... 0.0148 ........ 0.0363</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#2 ...... 0.0152 ........ 0.0351</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#3 ...... 0.0147 ........ 0.0353</span><span>
fix </span><span>string</span><span> </span><span>#1 ........ 0.0176 ........ 0.0143</span><span>
fix </span><span>string</span><span> </span><span>#2 ........ 0.0197 ........ 0.0234</span><span>
fix </span><span>string</span><span> </span><span>#3 ........ 0.0197 ........ 0.0250</span><span>
fix </span><span>string</span><span> </span><span>#4 ........ 0.0238 ........ 0.0254</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#1 ...... 0.0245 ........ 0.0333</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#2 ...... 0.0297 ........ 0.0345</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#3 ...... 0.0372 ........ 0.0343</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#1 ..... 0.0392 ........ 0.0411</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#2 ..... 3.2959 ........ 0.3091</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>string</span><span> </span><span>........</span><span> </span><span>3.2918</span><span> </span><span>........</span><span> </span><span>0.3149</span><span>
wide </span><span>char</span><span> </span><span>string</span><span> </span><span>#1 .. 0.0203 ........ 0.0248</span><span>
wide </span><span>char</span><span> </span><span>string</span><span> </span><span>#2 .. 0.0262 ........ 0.0323</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#1 ...... 0.0206 ........ 0.0309</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#2 ...... 0.0217 ........ 0.0332</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#3 ...... 0.0219 ........ 0.0335</span><span>
</span><span>16</span><span>-</span><span>bit binary </span><span>........</span><span> </span><span>0.0255</span><span> </span><span>........</span><span> </span><span>0.0405</span><span>
</span><span>32</span><span>-</span><span>bit binary </span><span>........</span><span> </span><span>0.3719</span><span> </span><span>........</span><span> </span><span>0.3212</span><span>
fix array </span><span>#1 ......... 0.0070 ........ 0.0147</span><span>
fix array </span><span>#2 ......... 0.0288 ........ 0.0445</span><span>
fix array </span><span>#3 ......... 0.0513 ........ 0.0599</span><span>
</span><span>16</span><span>-</span><span>bit array </span><span>#1 ...... 0.1540 ........ 0.1718</span><span>
</span><span>16</span><span>-</span><span>bit array </span><span>#2 ........... S ............. S</span><span>
</span><span>32</span><span>-</span><span>bit array </span><span>..............</span><span> S </span><span>.............</span><span> S
complex array </span><span>........</span><span> </span><span>0.2138</span><span> </span><span>........</span><span> </span><span>0.2679</span><span>
fix map </span><span>#1 ........... 0.0999 ........ 0.1239</span><span>
fix map </span><span>#2 ........... 0.0429 ........ 0.0507</span><span>
fix map </span><span>#3 ........... 0.0503 ........ 0.0721</span><span>
fix map </span><span>#4 ........... 0.0458 ........ 0.0604</span><span>
</span><span>16</span><span>-</span><span>bit map </span><span>#1 ........ 0.2516 ........ 0.3197</span><span>
</span><span>16</span><span>-</span><span>bit map </span><span>#2 ............. S ............. S</span><span>
</span><span>32</span><span>-</span><span>bit map </span><span>................</span><span> S </span><span>.............</span><span> S
complex map </span><span>..........</span><span> </span><span>0.2972</span><span> </span><span>........</span><span> </span><span>0.3501</span><span>
fixext </span><span>1</span><span> </span><span>.............</span><span> </span><span>0.0146</span><span> </span><span>........</span><span> </span><span>0.0403</span><span>
fixext </span><span>2</span><span> </span><span>.............</span><span> </span><span>0.0148</span><span> </span><span>........</span><span> </span><span>0.0422</span><span>
fixext </span><span>4</span><span> </span><span>.............</span><span> </span><span>0.0148</span><span> </span><span>........</span><span> </span><span>0.0426</span><span>
fixext </span><span>8</span><span> </span><span>.............</span><span> </span><span>0.0165</span><span> </span><span>........</span><span> </span><span>0.0427</span><span>
fixext </span><span>16</span><span> </span><span>............</span><span> </span><span>0.0156</span><span> </span><span>........</span><span> </span><span>0.0422</span><span>
</span><span>8</span><span>-</span><span>bit ext </span><span>............</span><span> </span><span>0.0197</span><span> </span><span>........</span><span> </span><span>0.0494</span><span>
</span><span>16</span><span>-</span><span>bit ext </span><span>...........</span><span> </span><span>0.0234</span><span> </span><span>........</span><span> </span><span>0.0576</span><span>
</span><span>32</span><span>-</span><span>bit ext </span><span>...........</span><span> </span><span>0.3674</span><span> </span><span>........</span><span> </span><span>0.3327</span><span>
</span><span>=============================================</span><span>
</span><span>Total</span><span>                  </span><span>9.4513</span><span>          </span><span>4.5950</span><span>
</span><span>Skipped</span><span>                     </span><span>4</span><span>               </span><span>4</span><span>
</span><span>Failed</span><span>                      </span><span>0</span><span>               </span><span>0</span><span>
</span><span>Ignored</span><span>                     </span><span>0</span><span>               </span><span>0</span></code></pre>
<p>You may change default benchmark settings by defining the following environment variables:</p>
<ul>
<li>
<code>MP_BENCH_TARGETS</code> (pure_p, pure_ps, pure_pa, pure_psa, pure_bu, pecl_p, pecl_u)</li>
<li>
<code>MP_BENCH_ITERATIONS</code>/<code>MP_BENCH_DURATION</code>
</li>
<li><code>MP_BENCH_ROUNDS</code></li>
<li><code>MP_BENCH_TESTS</code></li>
</ul>
<p>For example:</p>
<div><pre><span>export</span> MP_BENCH_TARGETS=pure_p
<span>export</span> MP_BENCH_ITERATIONS=1000000
<span>export</span> MP_BENCH_ROUNDS=5
<span><span>#</span> a comma separated list of test names</span>
<span>export</span> MP_BENCH_TESTS=<span><span>'</span>complex array, complex map<span>'</span></span>
<span><span>#</span> or a group name</span>
<span><span>#</span> export MP_BENCH_TESTS='-@slow' // @pecl_comp</span>
<span><span>#</span> or a regexp</span>
<span><span>#</span> export MP_BENCH_TESTS='/complex (array|map)/'</span>
php -n -dpcre.jit=1 -dzend_extension=opcache.so -dopcache.enable_cli=1 tests/bench.php</pre></div>
<p>Another example, benchmarking both the library and the <a href="https://pecl.php.net/package/msgpack" rel="nofollow">msgpack pecl extension</a>:</p>
<div><pre>MP_BENCH_TARGETS=pure_ps,pure_bu,pecl_p,pecl_u \
php -n -dpcre.jit=1 -dextension=msgpack.so -dzend_extension=opcache.so -dopcache.enable_cli=1 tests/bench.php</pre></div>
<p>Output:</p>
<pre><code><span>Filter</span><span>:</span><span> </span><span>MessagePack</span><span>\Tests\Perf\Filter\ListFilter
</span><span>Rounds</span><span>:</span><span> </span><span>3</span><span>
</span><span>Iterations</span><span>:</span><span> </span><span>100000</span><span>

</span><span>======================================================================================</span><span>
</span><span>Test</span><span>/</span><span>Target</span><span>           </span><span>Packer</span><span> </span><span>(</span><span>force_str</span><span>)</span><span>  </span><span>BufferUnpacker</span><span>  msgpack_pack  msgpack_unpack
</span><span>--------------------------------------------------------------------------------------</span><span>
</span><span>nil</span><span> </span><span>.............................</span><span> </span><span>0.0040</span><span> </span><span>........</span><span> </span><span>0.0158</span><span> </span><span>......</span><span> </span><span>0.0065</span><span> </span><span>........</span><span> </span><span>0.0052</span><span>
</span><span>false</span><span> </span><span>...........................</span><span> </span><span>0.0046</span><span> </span><span>........</span><span> </span><span>0.0158</span><span> </span><span>......</span><span> </span><span>0.0064</span><span> </span><span>........</span><span> </span><span>0.0051</span><span>
</span><span>true</span><span> </span><span>............................</span><span> </span><span>0.0045</span><span> </span><span>........</span><span> </span><span>0.0158</span><span> </span><span>......</span><span> </span><span>0.0065</span><span> </span><span>........</span><span> </span><span>0.0051</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ................... 0.0066 ........ 0.0130 ...... 0.0065 ........ 0.0054</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ................... 0.0067 ........ 0.0129 ...... 0.0065 ........ 0.0052</span><span>
</span><span>7</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ................... 0.0065 ........ 0.0129 ...... 0.0065 ........ 0.0052</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#1 ................... 0.0067 ........ 0.0153 ...... 0.0065 ........ 0.0054</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#2 ................... 0.0067 ........ 0.0152 ...... 0.0065 ........ 0.0053</span><span>
</span><span>5</span><span>-</span><span>bit sint </span><span>#3 ................... 0.0068 ........ 0.0154 ...... 0.0065 ........ 0.0054</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 ................... 0.0087 ........ 0.0223 ...... 0.0066 ........ 0.0057</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 ................... 0.0088 ........ 0.0223 ...... 0.0066 ........ 0.0057</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 ................... 0.0087 ........ 0.0222 ...... 0.0067 ........ 0.0057</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 .................. 0.0120 ........ 0.0295 ...... 0.0068 ........ 0.0057</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 .................. 0.0118 ........ 0.0296 ...... 0.0069 ........ 0.0057</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 .................. 0.0119 ........ 0.0297 ...... 0.0068 ........ 0.0057</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 .................. 0.0138 ........ 0.0358 ...... 0.0067 ........ 0.0056</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 .................. 0.0137 ........ 0.0358 ...... 0.0066 ........ 0.0058</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 .................. 0.0138 ........ 0.0358 ...... 0.0068 ........ 0.0057</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#1 .................. 0.0140 ........ 0.0362 ...... 0.0067 ........ 0.0056</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#2 .................. 0.0140 ........ 0.0364 ...... 0.0067 ........ 0.0056</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>uint</span><span> </span><span>#3 .................. 0.0141 ........ 0.0362 ...... 0.0066 ........ 0.0057</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 .................... 0.0089 ........ 0.0251 ...... 0.0068 ........ 0.0057</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 .................... 0.0090 ........ 0.0252 ...... 0.0066 ........ 0.0056</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 .................... 0.0089 ........ 0.0251 ...... 0.0066 ........ 0.0056</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ................... 0.0120 ........ 0.0304 ...... 0.0067 ........ 0.0057</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ................... 0.0120 ........ 0.0314 ...... 0.0069 ........ 0.0059</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ................... 0.0124 ........ 0.0314 ...... 0.0070 ........ 0.0058</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ................... 0.0144 ........ 0.0372 ...... 0.0067 ........ 0.0056</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ................... 0.0139 ........ 0.0364 ...... 0.0068 ........ 0.0056</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ................... 0.0139 ........ 0.0364 ...... 0.0067 ........ 0.0056</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#1 ................... 0.0143 ........ 0.0363 ...... 0.0067 ........ 0.0058</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#2 ................... 0.0142 ........ 0.0363 ...... 0.0068 ........ 0.0057</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#3 ................... 0.0143 ........ 0.0366 ...... 0.0067 ........ 0.0058</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>int</span><span> </span><span>#4 ................... 0.0142 ........ 0.0364 ...... 0.0067 ........ 0.0057</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#1 ................. 0.0148 ........ 0.0353 ...... 0.0066 ........ 0.0057</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#2 ................. 0.0152 ........ 0.0356 ...... 0.0066 ........ 0.0057</span><span>
</span><span>64</span><span>-</span><span>bit </span><span>float</span><span> </span><span>#3 ................. 0.0147 ........ 0.0355 ...... 0.0066 ........ 0.0057</span><span>
fix </span><span>string</span><span> </span><span>#1 ................... 0.0082 ........ 0.0143 ...... 0.0069 ........ 0.0057</span><span>
fix </span><span>string</span><span> </span><span>#2 ................... 0.0101 ........ 0.0234 ...... 0.0069 ........ 0.0070</span><span>
fix </span><span>string</span><span> </span><span>#3 ................... 0.0101 ........ 0.0256 ...... 0.0071 ........ 0.0072</span><span>
fix </span><span>string</span><span> </span><span>#4 ................... 0.0102 ........ 0.0255 ...... 0.0068 ........ 0.0067</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#1 ................. 0.0122 ........ 0.0335 ...... 0.0068 ........ 0.0068</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#2 ................. 0.0127 ........ 0.0337 ...... 0.0069 ........ 0.0069</span><span>
</span><span>8</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#3 ................. 0.0127 ........ 0.0337 ...... 0.0102 ........ 0.0069</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#1 ................ 0.0161 ........ 0.0403 ...... 0.0103 ........ 0.0074</span><span>
</span><span>16</span><span>-</span><span>bit </span><span>string</span><span> </span><span>#2 ................ 0.3583 ........ 0.3081 ...... 0.3529 ........ 0.2745</span><span>
</span><span>32</span><span>-</span><span>bit </span><span>string</span><span> </span><span>...................</span><span> </span><span>0.3609</span><span> </span><span>........</span><span> </span><span>0.3168</span><span> </span><span>......</span><span> </span><span>0.3511</span><span> </span><span>........</span><span> </span><span>0.2749</span><span>
wide </span><span>char</span><span> </span><span>string</span><span> </span><span>#1 ............. 0.0098 ........ 0.0248 ...... 0.0068 ........ 0.0070</span><span>
wide </span><span>char</span><span> </span><span>string</span><span> </span><span>#2 ............. 0.0122 ........ 0.0324 ...... 0.0069 ........ 0.0069</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#1 ...................... I ............. I ........... F ............. I</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#2 ...................... I ............. I ........... F ............. I</span><span>
</span><span>8</span><span>-</span><span>bit binary </span><span>#3 ...................... I ............. I ........... F ............. I</span><span>
</span><span>16</span><span>-</span><span>bit binary </span><span>........................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> I
</span><span>32</span><span>-</span><span>bit binary </span><span>........................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> I
fix array </span><span>#1 .................... 0.0070 ........ 0.0146 ...... 0.0152 ........ 0.0069</span><span>
fix array </span><span>#2 .................... 0.0292 ........ 0.0444 ...... 0.0175 ........ 0.0165</span><span>
fix array </span><span>#3 .................... 0.0422 ........ 0.0617 ...... 0.0196 ........ 0.0209</span><span>
</span><span>16</span><span>-</span><span>bit array </span><span>#1 ................. 0.1536 ........ 0.1716 ...... 0.0321 ........ 0.0449</span><span>
</span><span>16</span><span>-</span><span>bit array </span><span>#2 ...................... S ............. S ........... S ............. S</span><span>
</span><span>32</span><span>-</span><span>bit array </span><span>.........................</span><span> S </span><span>.............</span><span> S </span><span>...........</span><span> S </span><span>.............</span><span> S
complex array </span><span>........................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
fix map </span><span>#1 ........................... I ............. I ........... F ............. I</span><span>
fix map </span><span>#2 ...................... 0.0331 ........ 0.0502 ...... 0.0171 ........ 0.0188</span><span>
fix map </span><span>#3 ........................... I ............. I ........... F ............. I</span><span>
fix map </span><span>#4 ........................... I ............. I ........... F ............. I</span><span>
</span><span>16</span><span>-</span><span>bit map </span><span>#1 ................... 0.2506 ........ 0.3160 ...... 0.0330 ........ 0.0689</span><span>
</span><span>16</span><span>-</span><span>bit map </span><span>#2 ........................ S ............. S ........... S ............. S</span><span>
</span><span>32</span><span>-</span><span>bit map </span><span>...........................</span><span> S </span><span>.............</span><span> S </span><span>...........</span><span> S </span><span>.............</span><span> S
complex map </span><span>.....................</span><span> </span><span>0.2679</span><span> </span><span>........</span><span> </span><span>0.3518</span><span> </span><span>......</span><span> </span><span>0.0659</span><span> </span><span>........</span><span> </span><span>0.0753</span><span>
fixext </span><span>1</span><span> </span><span>.............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
fixext </span><span>2</span><span> </span><span>.............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
fixext </span><span>4</span><span> </span><span>.............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
fixext </span><span>8</span><span> </span><span>.............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
fixext </span><span>16</span><span> </span><span>............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
</span><span>8</span><span>-</span><span>bit ext </span><span>............................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
</span><span>16</span><span>-</span><span>bit ext </span><span>...........................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
</span><span>32</span><span>-</span><span>bit ext </span><span>...........................</span><span> I </span><span>.............</span><span> I </span><span>...........</span><span> F </span><span>.............</span><span> F
</span><span>======================================================================================</span><span>
</span><span>Total</span><span>                             </span><span>2.0227</span><span>          </span><span>2.9568</span><span>        </span><span>1.2268</span><span>          </span><span>1.0765</span><span>
</span><span>Skipped</span><span>                                </span><span>4</span><span>               </span><span>4</span><span>             </span><span>4</span><span>               </span><span>4</span><span>
</span><span>Failed</span><span>                                 </span><span>0</span><span>               </span><span>0</span><span>            </span><span>17</span><span>               </span><span>9</span><span>
</span><span>Ignored</span><span>                               </span><span>17</span><span>              </span><span>17</span><span>             </span><span>0</span><span>               </span><span>8</span></code></pre>
<blockquote>
<p><em>Note that the msgpack extension (0.5.2+, 2.0) doesn't support <strong>ext</strong>, <strong>bin</strong> and UTF-8 <strong>str</strong> types.</em></p>
</blockquote>
<h6>
License</h6>
<p>The library is released under the MIT License. See the bundled <a href="https://msgpack.org/rybakit/msgpack.php/blob/master/LICENSE">LICENSE</a> file for details.</p>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-michael-yuji-YSMessagePack"><h4><a href="https://github.com/michael-yuji/YSMessagePack" target="_blank">michael-yuji/YSMessagePack <span>https://github.com/michael-yuji/YSMessagePack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
YSMessagePack- for swift 3</h5>
<p>YSMessagePack is a messagePack packer/unpacker written in swift (swift 3 ready). It is designed to be easy to use. YSMessagePack include following features:</p>
<ul>
<li>Pack custom structs and classes / unpack objects by groups and apply handler to each group (easier to re-construct your struct$)</li>
<li>Asynchronous unpacking</li>
<li>Pack and unpack multiple message-packed data regardless of types with only one line of code</li>
<li>Specify how many items to unpack</li>
<li>Get remaining bytes that were not message-packed ; start packing from some index -- so you can mix messagepack with other protocol!!!</li>
<li>Helper methods to cast NSData to desired types</li>
<li>Operator +^ and +^= to join NSData</li>
</ul>
<h6>
Version</h6>
<p>1.6.2 (Dropped swift 2 support, swift 3 support only from now on)</p>
<h6>
Installation</h6>
<ul>
<li>Simply add files under <code>YSMessagePack/Classes</code> to your project,</li>
<li>use cocoapod, add "pod <code>'YSMessagePack', '~&gt; 1.6.2'</code> to your podfile</li>
</ul>
<h5>
Usage</h5>
<h7>
Pack:</h7>
<div><pre><span>let</span> exampleInt<span>:</span> <span>Int</span> <span>=</span> <span>1</span>
<span>let</span> exampleStr<span>:</span> <span>String</span> <span>=</span> <span><span>"</span>Hello World<span>"</span></span>
<span>let</span> exampleArray<span>:</span> [<span>Int</span>] <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>]
<span>let</span> bool<span>:</span> <span>Bool</span> <span>=</span> <span>true</span>

<span><span>//</span> To pack items, just put all of them in a single array</span>
<span><span>//</span> and call the `pack(items:)` function</span>
<span></span>
<span><span>//</span>this will be the packed data</span>
<span></span><span>let</span> msgPackedBytes<span>:</span> NSData <span>=</span> <span>pack</span>(<span>items</span>: [<span>true</span>, foo, exampleInt, exampleStr, exampleArray]) 

<span><span>//</span> Now your payload is ready to send!!!</span>
<span></span></pre></div>
<p>But what if we have some custom data structure to send?</p>
<div><pre><span><span>//</span>To make your struct / class packable</span>
<span></span><span>struct</span> <span>MyStruct</span>: <span>Packable </span>{  <span><span>//</span>Confirm to this protocol</span>
<span></span>    <span>var</span> name<span>:</span> <span>String</span>
    <span>var</span> index<span>:</span> <span>Int</span>
    <span>func</span> <span>packFormat</span>() <span>-&gt;</span> [Packable] { <span><span>//</span>protocol function</span>
<span></span>        <span>return</span> [name, index] <span><span>//</span>pack order</span>
<span></span>    }
    
    <span>func</span> <span>msgtype</span>() <span>-&gt;</span> MsgPackTypes {
        <span>return</span> .<span>Custom</span>
    }
}

<span>let</span> exampleInt<span>:</span> <span>Int</span> <span>=</span> <span>1</span>
<span>let</span> exampleStr<span>:</span> <span>String</span> <span>=</span> <span><span>"</span>Hello World<span>"</span></span>
<span>let</span> exampleArray<span>:</span> [<span>Int</span>] <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>]
<span>let</span> bool<span>:</span> <span>Bool</span> <span>=</span> <span>true</span>

<span>let</span> foo <span>=</span> <span>MyStruct</span>(<span>name</span>: <span><span>"</span>foo<span>"</span></span>, <span>index</span>: <span>626</span>)

<span>let</span> msgPackedBytes <span>=</span> <span>pack</span>(<span>items</span>: [bool, foo, exampleInt, exampleStr, exampleArray])
</pre></div>
<p><strong>Or you can pack them individually and add them to a byte array manually (Which is also less expensive)</strong></p>
<div><pre><span>let</span> exampleInt<span>:</span> <span>Int</span> <span>=</span> <span>1</span>
<span>let</span> exampleStr<span>:</span> <span>String</span> <span>=</span> <span><span>"</span>Hello World<span>"</span></span>
<span>let</span> exampleArray<span>:</span> [<span>Int</span>] <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>]

<span><span>//</span>Now pack them individually</span>
<span></span><span>let</span> packedInt <span>=</span> exampleInt.<span>packed</span>()

<span><span>//</span>if you didn't specific encoding, the default encoding will be ASCII</span>
<span></span>#<span>if</span> <span>swift</span>(<span>&gt;=</span><span>3</span>)
<span>let</span> packedStr <span>=</span> exampleStr.<span>packed</span>(<span>withEncoding</span>: NSASCIIStringEncoding) 
#<span>else</span>
<span>let</span> packedStr <span>=</span> exampleStr.<span>packed</span>(<span>withEncoding</span>: .<span>ascii</span>)
#<span>endif</span>
<span>let</span> packedArray <span>=</span> exampleArray.<span>packed</span>()
<span><span>//</span>You can use this operator +^ the join the data on rhs to the end of data on lhs</span>
<span></span><span>let</span> msgPackedBytes<span>:</span> NSData <span>=</span> packedInt <span>+^</span> packedStr <span>+^</span> packedArray</pre></div>
<h6>
Unpack</h6>
<p>YSMessagePack offer a number of different ways and options to unpack include unpack asynchronously, see the example project for detail.</p>
<p>To unpack a messagepacked bytearray is pretty easy:</p>
<div><pre><span>do</span> {
    <span><span>//</span>The unpack method will return an array of NSData which each element is an unpacked object</span>
<span></span>    <span>let</span> unpackedItems <span>=</span> <span>try</span> msgPackedBytes.<span>itemsUnpacked</span>()
    <span><span>//</span>instead of casting the NSData to the type you want, you can call these `.castTo..` methods to do the job for you</span>
<span></span>    <span>let</span> int<span>:</span> <span>Int</span> <span>=</span> unpackedItems[<span>2</span>].<span>castToInt</span>()

    <span><span>//</span>Same as packing, you can also specify the encoding you want to use, default is ASCII</span>
<span></span>    <span>let</span> str<span>:</span> <span>String</span> <span>=</span> unpackedItem[<span>3</span>].<span>castToString</span>() 
    <span>let</span> array<span>:</span> NSArray <span>=</span> unpackedItems[<span>4</span>].<span>castToArray</span>() 
} <span>catch</span> <span>let</span> error <span>as</span> NSError{
    <span>NSLog</span>(<span><span>"</span>Error occurs during unpacking: %@<span>"</span></span>, error)
}

<span><span>//</span>Remember how to pack your struct? Here is a better way to unpack a stream of bytes formatted in specific format</span>
<span></span> <span>let</span> testObj1 <span>=</span> <span>MyStruct</span>(<span>name</span>: <span><span>"</span>TestObject1<span>"</span></span>, <span>index</span>: <span>1</span>)
 <span>let</span> testObj2 <span>=</span> <span>MyStruct</span>(<span>name</span>: <span><span>"</span>TestObject2<span>"</span></span>, <span>index</span>: <span>2</span>)
 <span>let</span> testObj3 <span>=</span> <span>MyStruct</span>(<span>name</span>: <span><span>"</span>TestObject3<span>"</span></span>, <span>index</span>: <span>3</span>)
 
 <span>let</span> packed <span>=</span> <span>packCustomObjects</span>(testObj1, testObj2, testObj3) <span><span>//</span>This is an other method that can pack your own struct easier</span>
<span></span> 
 <span>let</span> nobjsInOneGroup <span>=</span> <span>2</span>
 
 <span>try</span><span>!</span> packed.<span>unpackByGroupsWith</span>(nobjsInOneGroup) {
     (unpackedData, isLast) <span>-&gt;</span> <span>Bool</span>
     
     <span><span>//</span>you can also involve additional args like number of groups to unpack</span>
<span></span>     <span>guard</span> <span>let</span> name <span>=</span> unpackedData[<span>0</span>].<span>castToString</span>() <span>else</span> {<span>return</span> <span>false</span>} <span><span>//</span>abort unpacking hen something wrong</span>
<span></span>     <span>let</span> index <span>=</span> unpackedData[<span>1</span>]
     <span>let</span> testObj <span>=</span> <span>MyStruct</span>(<span>name</span>: name, <span>index</span>: index) <span><span>//</span> assembly      </span>
<span></span>     <span>return</span> <span>true</span> <span><span>//</span>proceed unpacking, or return false to abort</span>
<span></span> } 
</pre></div>
<p><strong>If you don't want to unpack every single thing included in the message-pack byte array, you can also specify an amount to unpack, if you want to keep the remaining bytes, you can put <code>true</code> in the <code>returnRemainingBytes</code> argument, the remaining bytes will stored in the end of the <code>NSData</code> array.</strong></p>
<div><pre><span>do</span> {
    <span><span>//</span>Unpack only 2 objects, and we are not interested in remaining bytes</span>
<span></span>    <span>let</span> unpackedItems <span>=</span> <span>try</span> msgPackedBytes.<span>itemsUnpacked</span>(<span>specific_amount</span>: <span>2</span>, <span>returnRemainingBytes</span>: <span>false</span>)
    <span>print</span>(unpackedItems.<span>count</span>) <span><span>//</span>will print 2</span>
<span></span>} <span>catch</span> <span>let</span> error <span>as</span> NSError{
    <span>NSLog</span>(<span><span>"</span>Error occurs during unpacking: %@<span>"</span></span>, error)
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-caesay-MPack"><h4><a href="https://github.com/caesay/MPack" target="_blank">caesay/MPack <span>https://github.com/caesay/MPack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MPack</h5>
<p>This library is a lightweight implementation of the <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> binary serialization format. MessagePack is a 1-to-1 binary representation of JSON, and the official specification can be found here: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack...</a>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/5def7f13542893174ba10d90e2b87a2047e19b65/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565"><img src="https://camo.githubusercontent.com/5def7f13542893174ba10d90e2b87a2047e19b65/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f38346a76306c6c6c6e697173696370623f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/84jv0lllniqsicpb?svg=true"></a> (<a href="https://ci.appveyor.com/project/caesay/mpack" rel="nofollow">https://ci.appveyor.com/project/caesay/mpack</a>)</p>
<h6>
Notes</h6>
<ul>
<li>This library is designed to be super light weight.</li>
<li>Its easiest to understand how this library works if you think in terms of json. The type <code>MPackMap</code> represents a dictionary, and the type <code>MPackArray</code> represents an array.</li>
<li>Create MPack instances with the static method <code>MPack.From(object);</code>. You can pass any simple type (such as string, integer, etc), or any Array composed of a simple type. MPack also has implicit conversions from most of the basic types built in.</li>
<li>Transform an MPack object back into a CLR type with the static method <code>MPack.To&lt;T&gt;();</code> or MPack.To(type);. MPack also has <strong>explicit</strong> converions going back to most basic types, you can do <code>string str = (string)mpack;</code> for instance.</li>
<li>MPack now supports native asynchrounous reading and cancellation tokens. It will <em>not</em> block a thread to wait on a stream.</li>
</ul>
<h6>
NuGet</h6>
<p>MPack is available as a NuGet package!</p>
<pre><code><span>PM</span><span>&gt;</span><span> </span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MPack</span></code></pre>
<h6>
Usage</h6>
<p>Create a object model that can be represented as MsgPack. Here we are creating a dictionary, but really it can be anything:</p>
<div><pre><span>MPackMap</span> <span>dictionary</span> <span>=</span> <span>new</span> <span>MPackMap</span>
{
    {
        <span><span>"</span>array1<span>"</span></span>, <span>MPack</span>.<span>From</span>(<span>new</span>[]
        {
            <span><span>"</span>array1_value1<span>"</span></span>,  <span><span>//</span> implicitly converted string</span>
            <span>MPack</span>.<span>From</span>(<span><span>"</span>array1_value2<span>"</span></span>),
            <span>MPack</span>.<span>FromString</span>(<span><span>"</span>array1_value3<span>"</span></span>),
        })
    },
    {<span><span>"</span>bool1<span>"</span></span>, <span>MPack</span>.<span>From</span>(<span>true</span>)}, <span><span>//</span>boolean</span>
    {<span><span>"</span>double1<span>"</span></span>, <span>MPack</span>.<span>From</span>(<span>50.5</span>)}, <span><span>//</span>single-precision float</span>
    {<span><span>"</span>double2<span>"</span></span>, <span>MPack</span>.<span>From</span>(<span>15.2</span>)},
    {<span><span>"</span>int1<span>"</span></span>, <span>50505</span>}, <span><span>//</span> implicitly converted integer</span>
    {<span><span>"</span>int2<span>"</span></span>, <span>MPack</span>.<span>From</span>(<span>50</span>)} <span><span>//</span> integer</span>
};</pre></div>
<p>Serialize the data to a byte array or to a stream to be saved, transmitted, etc:</p>
<div><pre><span>byte</span>[] <span>encodedBytes</span> <span>=</span> <span>dictionary</span>.<span>EncodeToBytes</span>();
<span><span>//</span> -- or --</span>
<span>dictionary</span>.<span>EncodeToStream</span>(<span>stream</span>);</pre></div>
<p>Parse the binary data back into a MPack object model (you can also cast back to an MPackMap or MPackArray after reading if you want dictionary/array methods):</p>
<div><pre><span>var</span> <span>reconstructed</span> <span>=</span> <span>MPack</span>.<span>ParseFromBytes</span>(<span>encodedBytes</span>);
<span><span>//</span> -- or --</span>
<span>var</span> <span>reconstructed</span> <span>=</span> <span>MPack</span>.<span>ParseFromStream</span>(<span>stream</span>);</pre></div>
<p>Turn MPack objects back into types that we understand with the generic <code>To&lt;&gt;()</code> method. Since we know the types of everything here we can just call <code>To&lt;bool&gt;()</code> to reconstruct our bool, but if you don't know you can access the instance enum <code>MPack.ValueType</code> to know what kind of value it is:</p>
<div><pre><span>bool</span> <span>bool1</span> <span>=</span> <span>reconstructed</span>[<span><span>"</span>bool1<span>"</span></span>].<span>To</span>&lt;<span>bool</span>&gt;();
<span>var</span> <span>array1</span> <span>=</span> <span>reconstructed</span>[<span><span>"</span>array1<span>"</span></span>] <span>as</span> <span>MPackArray</span>;
<span>var</span> <span>array1_value1</span> <span>=</span> <span>array1</span>[<span>0</span>];
<span>double</span> <span>double1</span> <span>=</span> <span>reconstructed</span>[<span><span>"</span>double1<span>"</span></span>].<span>To</span>&lt;<span>double</span>&gt;();
<span><span>//</span>etc...</span></pre></div>
<h6>
Credits</h6>
<p>The following people/projects have made this possible:</p>
<ol start="0">
<li>Me: [caelantsayler]at[gmail]dot[com]</li>
<li>All of the people that make MessagePack happen: <a href="https://github.com/msgpack">https://github.com/msgpack</a>
</li>
</ol>
</article>
  </div>
        </div>
        
        <div id="qs-jonathonl-goodform"><h4><a href="https://github.com/jonathonl/goodform" target="_blank">jonathonl/goodform <span>https://github.com/jonathonl/goodform</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
GoodForm</h5>
<p>Form validation library. Includes MsgPack and JSON serializer/deserializer.</p>
<h6>
Building</h6>
<p>GoodForm uses std::any, which requires c++17. When c++17 is not available, boost::any is expected and will be installed automatically when using <a href="https://cget.readthedocs.io/en/latest/src/intro.html#installing-cget" rel="nofollow">cget</a>.</p>
<div><pre><span>cd</span> goodform
cget install -f ./requirements.txt                      <span><span>#</span> Install dependencies locally.</span>
mkdir build <span>&amp;&amp;</span> <span>cd</span> build                                 <span><span>#</span> Create out of source build directory.</span>
cmake -DCMAKE_TOOLCHAIN_FILE=../cget/cget/cget.cmake .. <span><span>#</span> Configure project with dependency paths.</span>
make</pre></div>
<h6>
MsgPack Usage</h6>
<div><pre>std::stringstream ss;
goodform::any var, var2;
var = goodform::object
  {
    {<span><span>"</span>compact<span>"</span></span>, <span>true</span>},
    {<span><span>"</span>schema<span>"</span></span>, <span>0</span>}
  };

<span>goodform::msgpack::serialize</span>(var, ss);
<span>goodform::msgpack::deserialize</span>(ss, var2);

goodform::form <span>form</span>(var2);

<span>struct</span>
{
  <span>bool</span> compact;
  std::<span>int32_t</span> schema;
} mpack;

mpack.compact = form.at(<span><span>"</span>compact<span>"</span></span>).boolean().val();
mpack.schema = form.at(<span><span>"</span>schema<span>"</span></span>).int32().val();

<span>if</span> (form.is_good())
{
  std::cout &lt;&lt; <span><span>"</span>{ <span>\"</span>compact<span>\"</span>: <span>"</span></span> &lt;&lt; std::boolalpha &lt;&lt; mpack.<span>compact</span> &lt;&lt; <span><span>"</span>, <span>\"</span>schema<span>\"</span>: <span>"</span></span> &lt;&lt; mpack.<span>schema</span> &lt;&lt; <span><span>"</span> }<span>"</span></span> &lt;&lt; std::endl;
}</pre></div>
<h6>
JSON Usage</h6>
<div><pre>goodform::any var;
std::stringstream ss;
ss &lt;&lt; <span><span>"</span>{<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>first_name<span>\"</span>:<span>\"</span>John<span>\"</span>, // This is a comment<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>last_name<span>\"</span>:<span>\"</span>Smith<span>\"</span>, <span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>age<span>\"</span>: 23,<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>gpa<span>\"</span>: 4.0,<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>email<span>\"</span>:<span>\"</span>john.smith@example.com<span>\"</span>,<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>password_hash<span>\"</span>:<span>\"</span>5f4dcc3b5aa765d61d8327deb882cf99<span>\"</span>,<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span><span>\"</span>interests<span>\"</span>: [<span>\"</span>sailing<span>\"</span>,<span>\"</span>swimming<span>\"</span>,<span>\"</span>yoga<span>\"</span>]<span>"</span></span> &lt;&lt; std::endl
  &lt;&lt; <span><span>"</span>}<span>"</span></span> &lt;&lt; std::endl;

<span>goodform::json::deserialize</span>(ss, var);

goodform::form <span>form</span>(var);

<span>struct</span>
{
  std::string first_name;
  std::string last_name;
  std::<span>uint8_t</span> age;
  <span>float</span> gpa;
  std::string email;
  std::string password_hash;
  <span>bool</span> subscribe_to_email_marketing;
  std::list&lt;std::string&gt; interests;
} form_data;


form_data.first_name = form.at(<span><span>"</span>first_name<span>"</span></span>).string().match(std::regex(<span><span>"</span>^[a-zA-Z ]{1,64}$<span>"</span></span>)).val();
form_data.last_name = form.at(<span><span>"</span>last_name<span>"</span></span>).string().match(std::regex(<span><span>"</span>^[a-zA-Z ]{1,64}$<span>"</span></span>)).val();
form_data.age = form.at(<span><span>"</span>age<span>"</span></span>).uint8().val();
form_data.gpa = form.at(<span><span>"</span>gpa<span>"</span></span>).float32().gte(<span>0</span>).lte(<span>4.0</span>).val();
form_data.email = form.at(<span><span>"</span>email<span>"</span></span>).string().match(std::regex(<span><span>"</span>^.{3,256}$<span>"</span></span>)).val();
form_data.password_hash = form.at(<span><span>"</span>password_hash<span>"</span></span>).string().match(std::regex(<span><span>"</span>^[a-fA-F0-9]{32}$<span>"</span></span>)).val();
form_data.subscribe_to_email_marketing = form.at(<span><span>"</span>subscribe_to_email_marketing<span>"</span></span>, <span>true</span>).boolean().val(); <span><span>//</span> Optional field defaults to true.</span>

form.at(<span><span>"</span>interests<span>"</span></span>).array().for_each([&amp;form_data](goodform::sub_form&amp; sf, std::<span>size_t</span> i)
{
  form_data.<span>interests</span>.<span>push_back</span>(sf.<span>string</span>().<span>val</span>());
});

<span>if</span> (form.is_good())
{
  <span><span>//</span> Use validated form_data.</span>
}
<span>else</span>
{
  <span><span>//</span> Handle error.</span>
}</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-HEADS-project-arduino_msgpack"><h4><a href="https://github.com/HEADS-project/arduino_msgpack" target="_blank">HEADS-project/arduino_msgpack <span>https://github.com/HEADS-project/arduino_msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
arduino_msgpack</h5>
<p>This Arduino library provides a light weight serializer and parser for messagepack.</p>
<h6>
Install</h6>
<p>Download the zip, and import it with your Arduino IDE: <em>Sketch&gt;Include Library&gt;Add .zip library</em></p>
<h6>
Usage</h6>
<p>See the either the <code>.h</code> file, or the examples (<code>led_controller</code> and <code>test_uno_writer</code>).</p>
<p>In short:</p>
<ul>
<li>functions like <code>msgpck_what_next(Stream * s);</code> watch the next type of data without reading it (without advancing the buffer of Stream <code>s</code>).</li>
<li>functions like <code>msgpck_read_bool(Stream * s, bool *b)</code> read a value from Stream <code>s</code>.</li>
<li>functions like <code>msgpck_write_bool(Stream * s, bool b)</code> write a value on Stream <code>s</code>.</li>
</ul>
<p>Notes:</p>
<ul>
<li>Stream are used as much as possible in order not to add to much overhead with buffers. Therefore you should be able to store the minimum number of value at a given time.</li>
<li>Map and Array related functions concern only their headers. Ex: If you want to write an array containing two elements you should write the array header, then write the two elements.</li>
</ul>
<h6>
Limitations</h6>
<p>Currently the library does <strong>not</strong> support:</p>
<ul>
<li>8 bytes float (Only 4 bytes floats are supported by default on every Arduino and floats are anyway not recommended on Arduino)</li>
<li>2^32 char long (or longer) strings</li>
<li>2^32 byte long (or longer) bins</li>
<li>extention types.</li>
</ul>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-st3v0-msgpack-as3"><h4><a href="https://github.com/st3v0/msgpack-as3" target="_blank">st3v0/msgpack-as3 <span>https://github.com/st3v0/msgpack-as3</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for ActionScript3</h5>
<p>msgpack-as3 is an implementation of the latest MessagePack specification for ActionScript3 language (Flash, Flex and AIR).</p>
<ul>
<li>Message Pack specification (Dec 22, 2015): <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6>
Basic Usage</h6>
<h7>
Serialize and Deserialize</h7>
<p>The usage of MsgPack class is very simple. You need create an object and call read and write methods.</p>
```actionscript
// message pack object created
var msgpack:MsgPack = new MsgPack();
<p>// encode an array
var bytes:ByteArray = msgpack.write([1, 2, 3, 4, 5]);</p>
<p>// rewind the buffer
bytes.position = 0;</p>
<p>// print the decoded object
trace(msgpack.read(bytes));</p>
<pre><code><span>
</span><span>### Flags</span><span>
</span><span>&lt;p&gt;</span><span>Currently</span><span> there are three flags which you may </span><span>use</span><span> to initialize a </span><span>MsgPack</span><span> </span><span>object</span><span>:&lt;/</span><span>p</span><span>&gt;</span><span>
</span><span>*</span><span> </span><span>&lt;code&gt;</span><span>MsgPackFlags</span><span>.</span><span>READ_STRING_AS_BYTE_ARRAY</span><span>&lt;/</span><span>code</span><span>&gt;:</span><span> message pack </span><span>string</span><span> data </span><span>is</span><span> read </span><span>as</span><span> </span><span>byte</span><span> array instead of </span><span>string</span><span>;</span><span>
</span><span>*</span><span> </span><span>&lt;code&gt;</span><span>MsgPackFlags</span><span>.</span><span>ACCEPT_LITTLE_ENDIAN</span><span>&lt;/</span><span>code</span><span>&gt;:</span><span> </span><span>MsgPack</span><span> objects will work </span><span>with</span><span> little endian buffers </span><span>(</span><span>message pack specification defines big endian </span><span>as</span><span> </span><span>default</span><span>).</span><span>
</span><span>*</span><span> </span><span>&lt;code&gt;</span><span>MsgPackFlags</span><span>.</span><span>SPEC2013_COMPATIBILITY</span><span>&lt;/</span><span>code</span><span>&gt;:</span><span> </span><span>MsgPack</span><span> will run </span><span>in</span><span> backwards compatibility mode</span><span>.</span><span>

</span><span>```actionscript
var msg:MsgPack;

// use logical operator OR to set the flags.
msgpack = new MsgPack(MsgPackFlags.READ_STRING_AS_BYTE_ARRAY | MsgPackFlags.ACCEPT_LITTLE_ENDIAN);</span></code></pre>
<h6>
Advanced Usage</h6>
<h7>
Extensions</h7>
<p>You can create your own Extension Workers by extending the <code>ExtensionWorker</code> Class and then assigning it to the MsgPack Factory.</p>
<p>The following example assigns a custom worker which extends the <code>ExtensionWorker</code> Class.</p>
```actionscript
var msgpack:MsgPack = new MsgPack();
<p>// Assign the new worker to the factory.
msgpack.factory.assign(new CustomWorker());</p>
<pre><code><span>
</span><span>&lt;p&gt;</span><span>For more information regarding Extensions refer to the MessagePack specification.</span><span>&lt;/p&gt;</span><span>

### Priorities
</span><span>&lt;p&gt;</span><span>Worker priority behaves similar to how the Adobe Event Dispatcher priorities work. In MessagePack, deciding which worker will be use for serializing/deserializing depends on two(2) factors.</span><span>&lt;/p&gt;</span><span>
1. The order in which the worker was assigned to the factory.
2. The priority of the worker. Higher values take precedence.

All workers have a default priority of 0.

</span><span>&lt;p&gt;</span><span>In the following example </span><span>&lt;code&gt;</span><span>workerB</span><span>&lt;/code&gt;</span><span> will never be used because it's assign after </span><span>&lt;code&gt;</span><span>workerA</span><span>&lt;/code&gt;&lt;/p&gt;</span><span>
```actionscript
var msgpack:MsgPack = new MsgPack();

var workerA:StringWorker = new StringWorker();
var workerB:DifferentStringWorker = new DifferentStringWorker();

msgpack.factory.assign(workerA);
msgpack.factory.assign(workerB);</span></code></pre>
<p>However if we adjust the priority of <code>workerB</code>, then <code>workerA</code> will never be used.</p>
```actionscript
var msgpack:MsgPack = new MsgPack();
<p>var workerA:StringWorker = new StringWorker();
var workerB:DifferentStringWorker = new DifferentStringWorker(null, 1);</p>
<p>msgpack.factory.assign(workerA);
msgpack.factory.assign(workerB);</p>
<pre><code><span>
</span><span>## Credits</span><span>
</span><span>This</span><span> application uses </span><span>Open</span><span> </span><span>Source</span><span> components</span><span>.</span><span> </span><span>You</span><span> can find the source code of their open source projects along </span><span>with</span><span> license information below</span><span>.</span><span> </span><span>We</span><span> acknowledge </span><span>and</span><span> are grateful to these developers </span><span>for</span><span> their contributions to open source</span><span>.</span><span>

</span><span>Project</span><span>:</span><span> as3</span><span>-</span><span>msgpack https</span><span>:</span><span>//github.com/loteixeira/as3-msgpack  </span><span>
</span><span>Copyright</span><span> </span><span>(</span><span>C</span><span>)</span><span> </span><span>2013</span><span> </span><span>Lucas</span><span> </span><span>Teixeira</span><span>  
</span><span>License</span><span> </span><span>(</span><span>Apache</span><span> V2</span><span>.</span><span>0</span><span>)</span><span> http</span><span>:</span><span>//www.apache.org/licenses/LICENSE-2.0  </span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-eddelbuettel-rcppmsgpack"><h4><a href="https://github.com/eddelbuettel/rcppmsgpack" target="_blank">eddelbuettel/rcppmsgpack <span>https://github.com/eddelbuettel/rcppmsgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
RcppMsgPack</h5>
<p>Convert to and from msgpack objects in R using the official msgpack-c API through Rcpp.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png"><img src="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png" alt="flowchart" title="Conversion flowchart"></a>
<em>A flowchart describing the conversion of R objects into msgpack objects and back.</em></p>
<p>Msgpack EXT types are converted to raw vectors with EXT attributes containing the extension type.  The extension type must be an integer from 0 to 127.</p>
<p>Maps are converted to data.frames with additional class "map".  Map objects in R contain key and value list columns and can be simplified to named lists or named vectors.  The helper function <code>msgpack_map</code> creates map objects that can be serialized into msgpack.</p>
<p>For more information on msgpack types, see <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">here</a>.</p>
<h7>
Installation:</h7>
<ol>
<li><code>install.packages("RcppMsgPack")</code></li>
</ol>
<h7>
Example:</h7>
<p>See <code>tests/tests.r</code> for more examples.</p>
<pre><code><span>library</span><span>(</span><span>RcppMsgPack</span><span>)</span><span>
library</span><span>(</span><span>microbenchmark</span><span>)</span><span>

x </span><span>&lt;-</span><span> </span><span>as</span><span>.</span><span>list</span><span>(</span><span>1</span><span>:</span><span>1e6</span><span>)</span><span>
microbenchmark</span><span>(</span><span>xpk </span><span>&lt;-</span><span> msgpack_pack</span><span>(</span><span>x</span><span>),</span><span> times</span><span>=</span><span>3</span><span>)</span><span>
microbenchmark</span><span>(</span><span>xu </span><span>&lt;-</span><span> msgpack_unpack</span><span>(</span><span>xpk</span><span>),</span><span> times</span><span>=</span><span>3</span><span>)</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-steakknife-msgpack-cr"><h4><a href="https://github.com/steakknife/msgpack.cr" target="_blank">steakknife/msgpack.cr <span>https://github.com/steakknife/msgpack.cr</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack.cr</h5>
<p>A low-level <a href="https://msgpack.org/" rel="nofollow">msgpack</a> codec for <a href="https://crystal-lang.org/" rel="nofollow">Crystal</a></p>
<h6>
TODO</h6>
<ul>
<li>More specs</li>
<li>Mapping</li>
</ul>
<h6>
Installation</h6>
<p>Add this to your application's <code>shard.yml</code>:</p>
<div><pre><span>dependencies</span>:
  <span>msgpack</span>:
    <span>github</span>: <span>steakknife/msgpack.cr</span></pre></div>
<h6>
Usage</h6>
<div><pre><span>require</span> <span><span>"</span>msgpack<span>"</span></span>

<span>1</span>.to_msgpack <span><span>#</span> =&gt; Slice[210, 0, 0, 0, 1]</span>

<span><span>#</span> write 2_i32 to file foo.msgpack</span>
<span>File</span>.open(<span><span>"</span>foo.msgpack<span>"</span></span>, <span><span>"</span>w<span>"</span></span>) { |<span>f</span>| f.write(<span>2</span>.to_msgpack) }
</pre></div>
<h6>
Extending</h6>
<h7>
Encoding</h7>
<p>Any type can become encodable by including <code>Msgpack::Encodable</code> and defining <code>to_msgpack(io : IO)</code></p>
<h7>
Decoding</h7>
<p>Any type can become decodable by following the <a href="https://msgpack.org/steakknife/msgpack.cr/blob/master/spec/foo_spec.cr">example</a></p>
<h6>
Development</h6>
<h7>
Run tests</h7>

<h6>
Alternate Implementations</h6>
<ul>
<li><a href="https://github.com/benoist/msgpack-crystal">github: benoist/msgpack-crystal</a></li>
</ul>
<h6>
Contributing</h6>
<ol>
<li>Fork it ( <a href="https://github.com/steakknife/msgpack.cr/fork">https://github.com/steakknife/msgpack.cr/fork</a> )</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Commit your changes (git commit -am 'Add some feature')</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create a new Pull Request</li>
</ol>
<h6>
Contributors</h6>
<ul>
<li>
<a href="https://github.com/steakknife">[steakknife]</a> Barry Allard - creator, maintainer</li>
</ul>
<h6>
License</h6>
<p><a href="https://msgpack.org/steakknife/msgpack.cr/blob/master/LICENSE">MIT</a></p>
<h6>
Copyright</h6>
<p>2016 (c) Copyright Barry Allard</p>
</article>
  </div>
        </div>
        
        <div id="qs-ar90n-msgpack11"><h4><a href="https://github.com/ar90n/msgpack11" target="_blank">ar90n/msgpack11 <span>https://github.com/ar90n/msgpack11</span></a></h4>
<div id="readme">
    <article itemprop="text"><p><a href="https://travis-ci.org/ar90n/msgpack11" rel="nofollow"><img src="https://camo.githubusercontent.com/c3c03f2c22de81aa64f964275a4c52ee8039e7ae/68747470733a2f2f7472617669732d63692e6f72672f617239306e2f6d73677061636b31312e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/ar90n/msgpack11.svg?branch=master"></a></p>
<h5>
What is msgpack11 ?</h5>
<p>msgpack11 is a tiny MsgPack library for C++11, providing MsgPack parsing and serialization.<br>
This library is inspired by <a href="https://github.com/dropbox/json11">json11</a>.<br>
The API of msgpack11 is designed to be similar with json11.</p>
<h5>
Installation</h5>
<ul>
<li>
<p>Using CMake</p>
<pre><code><span>  git clone </span><span>git@github</span><span>.</span><span>com</span><span>:</span><span>ar90n</span><span>/</span><span>msgpack11</span><span>.</span><span>git
  mkdir build
  cd build
  cmake </span><span>../</span><span>msgpack11
  make </span><span>&amp;&amp;</span><span> make install</span></code></pre>
</li>
<li>
<p>Using Buck</p>
<pre><code><span>  git clone </span><span>git@github</span><span>.</span><span>com</span><span>:</span><span>ar90n</span><span>/</span><span>msgpack11</span><span>.</span><span>git
  cd msgpack11
  buck build </span><span>:</span><span>msgpack11</span></code></pre>
</li>
</ul>
<h5>
Example</h5>
<pre><code><span>MsgPack</span><span> my_msgpack </span><span>=</span><span> </span><span>MsgPack</span><span>::</span><span>object</span><span> </span><span>{</span><span>
    </span><span>{</span><span> </span><span>"key1"</span><span>,</span><span> </span><span>"value1"</span><span> </span><span>},</span><span>
    </span><span>{</span><span> </span><span>"key2"</span><span>,</span><span> </span><span>false</span><span> </span><span>},</span><span>
    </span><span>{</span><span> </span><span>"key3"</span><span>,</span><span> </span><span>MsgPack</span><span>::</span><span>array </span><span>{</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>3</span><span> </span><span>}</span><span> </span><span>},</span><span>
</span><span>};</span><span>

</span><span>//access to elements</span><span>
std</span><span>::</span><span>cout </span><span>&lt;&lt;</span><span> my_msgpack</span><span>[</span><span>"key1"</span><span>].</span><span>string_value</span><span>();</span><span>

</span><span>//serialize</span><span>
std</span><span>::</span><span>string</span><span> msgpack_bytes </span><span>=</span><span> my_msgpack</span><span>.</span><span>dump</span><span>();</span><span>

</span><span>//deserialize</span><span>
std</span><span>::</span><span>string</span><span> err</span><span>;</span><span>
</span><span>MsgPack</span><span> des_msgpack </span><span>=</span><span> </span><span>MsgPack</span><span>::</span><span>parse</span><span>(</span><span>msgpack_bytes</span><span>,</span><span> err</span><span>);</span></code></pre>
<p>There are more specific examples in example.cpp.
Please see it.</p>
<h5>
Benchmark</h5>
<p>Derived from <a href="https://github.com/ludocode/schemaless-benchmarks">schemaless-benchmarks</a></p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Binary size</th>
<th>time[ms] @ Smallest</th>
<th>time[ms] @ Small</th>
<th>time[ms] @ Medium</th>
<th>time[ms] @ Large</th>
<th>time[ms] @ Largest</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgpack-c-pack(v2.1.4)</td>
<td>6649</td>
<td>0.55</td>
<td>2.38</td>
<td>43.22</td>
<td>711.75</td>
<td>8748.20</td>
</tr>
<tr>
<td>msgpack-c-unpack(v2.1.4)</td>
<td>21804</td>
<td>1.34</td>
<td>6.00</td>
<td>83.09</td>
<td>714.64</td>
<td>11192.32</td>
</tr>
<tr>
<td>msgpack11-pack(v0.0.9)</td>
<td>99844</td>
<td>20.80</td>
<td>130.04</td>
<td>1063.24</td>
<td>10466.65</td>
<td>136640.99</td>
</tr>
<tr>
<td>msgpack11-unpack(v0.0.9)</td>
<td>99460</td>
<td>13.31</td>
<td>92.54</td>
<td>786.73</td>
<td>7345.43</td>
<td>99119.56</td>
</tr>
</tbody>
</table>
<p>CPU : 2.6 GHz Intel Core i7<br>
Memory : 16 GB 2133 MHz LPDDR3<br>
Git revision : 6f6b4302b68b3c88312eb24367418b7fce81298c</p>
<h5>
Feature</h5>
<ul>
<li>Support serialization and deserialization.</li>
</ul>
<h5>
Acknowledgement</h5>
<ul>
<li><a href="https://github.com/dropbox/json11">json11</a></li>
<li><a href="https://github.com/msgpack/msgpack-c">msgpack-c</a></li>
<li><a href="https://github.com/ludocode/schemaless-benchmarks">schemaless-benchmarks</a></li>
</ul>
<h5>
License</h5>
<p>This software is released under the MIT License, see LICENSE.txt.</p>
</article>
  </div>
        </div>
        
        <div id="qs-pierre-vigier-Perl6-Data-MessagePack"><h4><a href="https://github.com/pierre-vigier/Perl6-Data-MessagePack" target="_blank">pierre-vigier/Perl6-Data-MessagePack <span>https://github.com/pierre-vigier/Perl6-Data-MessagePack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Perl6-Data-MessagePack</h5>
<p><a href="https://travis-ci.org/pierre-vigier/Perl6-Data-MessagePack" rel="nofollow"><img src="https://camo.githubusercontent.com/0621f7e62a7784dffb6b14793e0f4c4c1c6ccf6b/68747470733a2f2f7472617669732d63692e6f72672f7069657272652d7669676965722f5065726c362d446174612d4d6573736167655061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pierre-vigier/Perl6-Data-MessagePack.svg?branch=master"></a></p>
<h5>
NAME</h5>
<p>Data::MessagePack - Perl 6 implementation of MessagePack</p>
<h5>
SYNOPSIS</h5>
<pre><code><span>use</span><span> </span><span>Data</span><span>::</span><span>MessagePack</span><span>;</span><span>

</span><span>my</span><span> $data</span><span>-</span><span>structure </span><span>=</span><span> </span><span>{</span><span>
    key </span><span>=&gt;</span><span> </span><span>'value'</span><span>,</span><span>
    k2 </span><span>=&gt;</span><span> </span><span>[</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>3</span><span> </span><span>]</span><span>
</span><span>};</span><span>

</span><span>my</span><span> $packed </span><span>=</span><span> </span><span>Data</span><span>::</span><span>MessagePack</span><span>::</span><span>pack</span><span>(</span><span> $data</span><span>-</span><span>structure </span><span>);</span><span>

</span><span>my</span><span> $unpacked </span><span>=</span><span> </span><span>Data</span><span>::</span><span>MessagePack</span><span>::</span><span>unpack</span><span>(</span><span> $packed </span><span>);</span></code></pre>
<p>Or for streaming:</p>
<pre><code><span>use</span><span> </span><span>Data</span><span>::</span><span>MessagePack</span><span>::</span><span>StreamingUnpacker</span><span>;</span><span>

</span><span>my</span><span> $supplier </span><span>=</span><span> </span><span>Some</span><span> </span><span>Supplier</span><span>;</span><span> </span><span>#Could be from IO::Socket::Async for instance</span><span>

</span><span>my</span><span> $unpacker </span><span>=</span><span> </span><span>Data</span><span>::</span><span>MessagePack</span><span>::</span><span>StreamingUnpacker</span><span>.</span><span>new</span><span>(</span><span>
    source </span><span>=&gt;</span><span> $supplier</span><span>.</span><span>Supply</span><span>
</span><span>);</span><span>

$unpacker</span><span>.</span><span>tap</span><span>(</span><span> </span><span>-&gt;</span><span> $value </span><span>{</span><span>
    say </span><span>"Got new value"</span><span>;</span><span>
    say $value</span><span>.</span><span>perl</span><span>;</span><span>
</span><span>},</span><span> </span><span>done</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span> say </span><span>"Source supply is done"</span><span>;</span><span> </span><span>}</span><span> </span><span>);</span></code></pre>
<h5>
DESCRIPTION</h5>
<p>The present module proposes an implemetation of the MessagePack specification as described on <a href="https://msgpack.org/" rel="nofollow">http://msgpack.org/</a>. The implementation is now in Pure Perl which could come as a performance penalty opposed to some other packer implemented in C.</p>
<h5>
WHY THAT MODULE</h5>
<p>There are already some part of MessagePack implemented in Perl6, with for instance MessagePack available here: <a href="https://github.com/uasi/messagepack-pm6">https://github.com/uasi/messagepack-pm6</a>, however that module only implements the unpacking part of the specification. Futhermore, that module uses the unpack functionality which is tagged as experimental as of today</p>
<h5>
FUNCTIONS</h5>
<h6>
function pack</h6>
<p>That function takes a data structure as parameter, and returns a Blob with the packed version of the data structure.</p>
<h6>
function unpack</h6>
<p>That function takes a MessagePack packed message as parameter, and returns the deserialized data structure.</p>
<h5>
Author</h5>
<p>Pierre VIGIER</p>
<h5>
Contributors</h5>
<p>Timo Paulssen</p>
<h5>
License</h5>
<p>Artistic License 2.0</p>
</article>
  </div>
        </div>
        
        <div id="qs-tagomoris-msgpack-inspect"><h4><a href="https://github.com/tagomoris/msgpack-inspect" target="_blank">tagomoris/msgpack-inspect <span>https://github.com/tagomoris/msgpack-inspect</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-inspect</h5>
<p>This is a command line tool to inspect/show a data serialized by <a href="https://msgpack.org/" rel="nofollow">MessagePack</a>.</p>
<h6>
Installation</h6>
<p>Executable binary files are available from <a href="https://github.com/tagomoris/msgpack-inspect/releases">releases</a>. Download a file for your platform, and use it.</p>
<p>Otherwise, you can install rubygem version on your CRuby runtime:</p>
<pre><code><span>$ gem install msgpack</span><span>-</span><span>inspect</span></code></pre>
<h6>
Usage</h6>
<pre><code><span>Usage</span><span>:</span><span> msgpack</span><span>-</span><span>inspect </span><span>[</span><span>options</span><span>]</span><span> FILE

</span><span>Options</span><span>:</span><span>

    </span><span>-</span><span>f</span><span>,</span><span> </span><span>--</span><span>format FORMAT              output format of inspection result </span><span>(</span><span>yaml</span><span>/</span><span>json</span><span>/</span><span>jsonl</span><span>)</span><span> </span><span>[</span><span>default</span><span>:</span><span> yaml</span><span>]</span><span>
    </span><span>-</span><span>r</span><span>,</span><span> </span><span>--</span><span>require</span><span> LIB                ruby file path to </span><span>require</span><span> </span><span>(</span><span>to load ext type definitions</span><span>)</span><span>
    </span><span>-</span><span>v</span><span>,</span><span> </span><span>--</span><span>version                    </span><span>Show</span><span> version of </span><span>this</span><span> software
    </span><span>-</span><span>h</span><span>,</span><span> </span><span>--</span><span>help                       </span><span>Show</span><span> </span><span>this</span><span> message</span></code></pre>
<p><code>-r</code> option is available oly with rubygem version, and unavailable with mruby binary release.</p>
<p>FILE is a file which msgpack binary stored. Specify <code>-</code> to inspect data from STDIN.
This command shows the all data contained in specified format (YAML in default).</p>
<pre><code><span>---</span><span>
</span><span>-</span><span> format</span><span>:</span><span> </span><span>"false"</span><span>
  header</span><span>:</span><span> </span><span>"0xc2"</span><span>
  data</span><span>:</span><span> </span><span>"0xc2"</span><span>
  value</span><span>:</span><span> </span><span>false</span><span>
</span><span>-</span><span> format</span><span>:</span><span> </span><span>"true"</span><span>
  header</span><span>:</span><span> </span><span>"0xc3"</span><span>
  data</span><span>:</span><span> </span><span>"0xc3"</span><span>
  value</span><span>:</span><span> </span><span>true</span></code></pre>
<h6>
Example</h6>
<p>This is an example to inspect a data from STDIN.
The data corresponds to <code>{"compact":true,"schema":0}</code> in JSON.</p>
<pre><code><span>$ printf </span><span>"\x82\xa7compact\xc3\xa6schema\x00"</span><span> </span><span>|</span><span> msgpack</span><span>-</span><span>inspect </span><span>-</span><span>
</span><span>---</span><span>
</span><span>-</span><span> format</span><span>:</span><span> </span><span>"fixmap"</span><span>
  header</span><span>:</span><span> </span><span>"0x82"</span><span>
  length</span><span>:</span><span> </span><span>2</span><span>
  children</span><span>:</span><span>
    </span><span>-</span><span> key</span><span>:</span><span>
        format</span><span>:</span><span> </span><span>"fixstr"</span><span>
        header</span><span>:</span><span> </span><span>"0xa7"</span><span>
        length</span><span>:</span><span> </span><span>7</span><span>
        data</span><span>:</span><span> </span><span>"0x636f6d70616374"</span><span>
        value</span><span>:</span><span> </span><span>"compact"</span><span>
      value</span><span>:</span><span>
        format</span><span>:</span><span> </span><span>"true"</span><span>
        header</span><span>:</span><span> </span><span>"0xc3"</span><span>
        data</span><span>:</span><span> </span><span>"0xc3"</span><span>
        value</span><span>:</span><span> </span><span>true</span><span>
    </span><span>-</span><span> key</span><span>:</span><span>
        format</span><span>:</span><span> </span><span>"fixstr"</span><span>
        header</span><span>:</span><span> </span><span>"0xa6"</span><span>
        length</span><span>:</span><span> </span><span>6</span><span>
        data</span><span>:</span><span> </span><span>"0x736368656d61"</span><span>
        value</span><span>:</span><span> </span><span>"schema"</span><span>
      value</span><span>:</span><span>
        format</span><span>:</span><span> </span><span>"fixint"</span><span>
        header</span><span>:</span><span> </span><span>"0x00"</span><span>
        data</span><span>:</span><span> </span><span>"0x00"</span><span>
        value</span><span>:</span><span> </span><span>0</span></code></pre>
<p>TODO: show more example</p>
<h6>
Contributing</h6>
<p>Bug reports and pull requests are welcome on GitHub at [<a href="https://github.com/tagomoris/msgpack-inspect">https://github.com/tagomoris/msgpack-inspect</a>].</p>
</article>
  </div>
        </div>
        
        <div id="qs-tris-foundation-messagepack"><h4><a href="https://github.com/tris-foundation/messagepack" target="_blank">tris-foundation/messagepack <span>https://github.com/tris-foundation/messagepack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack</h5>
<p><strong>MessagePack</strong> is an efficient binary serialization format. It lets you exchange data among multiple languages like JSON. But it's faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6>
Package.swift</h6>
<div><pre>.<span>package</span>(<span>url</span>: <span><span>"</span>https://github.com/tris-foundation/messagepack.git<span>"</span></span>, .<span>branch</span>(<span><span>"</span>master<span>"</span></span>))</pre></div>
<h6>
Memo</h6>
<div><pre><span>public</span> <span>enum</span> <span>MessagePack</span> {
    <span>case</span> <span>`nil`</span>
    <span>case</span> <span>int</span>(<span>Int</span>)
    <span>case</span> <span>uint</span>(<span>UInt</span>)
    <span>case</span> <span>bool</span>(<span>Bool</span>)
    <span>case</span> <span>float</span>(<span>Float</span>)
    <span>case</span> <span>double</span>(<span>Double</span>)
    <span>case</span> <span>string</span>(<span>String</span>)
    <span>case</span> <span>binary</span>([<span>UInt8</span>])
    <span>case</span> <span>array</span>([MessagePack])
    <span>case</span> <span>map</span>([MessagePack : MessagePack])
    <span>case</span> <span>extended</span>(Extended)

    <span>public</span> <span>struct</span> <span>Extended</span> {
        <span>public</span> <span>let</span> type<span>:</span> <span>Int8</span>
        <span>public</span> <span>let</span> data<span>:</span> [<span>UInt8</span>]
        <span>public</span> <span>init</span>(<span><span>type</span></span>: <span>Int8</span>, <span><span>data</span></span>: [<span>UInt8</span>]) {
            <span>self</span>.<span>type</span> <span>=</span> type
            <span>self</span>.<span>data</span> <span>=</span> data
        }
    }
}</pre></div>
<h6>
Usage</h6>
<p>You can find this code and more in <a href="https://github.com/tris-foundation/examples">examples</a>.</p>
<h7>
Basic API</h7>
<div><pre><span>let</span> hey <span>=</span> <span>MessagePack</span>(<span><span>"</span>hey there!<span>"</span></span>)
<span>let</span> bytes <span>=</span> <span>try</span> MessagePack.<span>encode</span>(hey)
<span>let</span> original <span>=</span> <span>String</span>(<span>try</span> MessagePack.<span>decode</span>(<span>bytes</span>: bytes))</pre></div>
<h7>
Stream API</h7>
<div><pre><span>let</span> hey <span>=</span> <span>MessagePack</span>(<span><span>"</span>hey there!<span>"</span></span>)
<span>let</span> stream <span>=</span> <span>BufferedStream</span>(<span>stream</span>: <span>NetworkStream</span>(<span>socket</span>: client))
<span>try</span> MessagePack.<span>encode</span>(hey, <span>to</span>: stream)
<span>try</span> stream.<span>flush</span>()
<span>let</span> original <span>=</span> <span>String</span>(<span>try</span> MessagePack.<span>decode</span>(<span>from</span>: stream))</pre></div>
<h7>
Performance optimized</h7>
<div><pre><span>let</span> output <span>=</span> <span>OutputByteStream</span>()
<span>var</span> encoder <span>=</span> <span>MessagePackWriter</span>(output)
<span>try</span> encoder.<span>encode</span>(<span><span>"</span>one<span>"</span></span>)
<span>try</span> encoder.<span>encode</span>(<span>2</span>)
<span>try</span> encoder.<span>encode</span>(<span>3.0</span>)
<span>let</span> encoded <span>=</span> output.<span>bytes</span>

<span>var</span> decoder <span>=</span> <span>MessagePackReader</span>(<span>InputByteStream</span>(encoded))
<span>let</span> string <span>=</span> <span>try</span> decoder.<span>decode</span>(<span>String</span>.<span>self</span>)
<span>let</span> int <span>=</span> <span>try</span> decoder.<span>decode</span>(<span>UInt8</span>.<span>self</span>)
<span>let</span> double <span>=</span> <span>try</span> decoder.<span>decode</span>(<span>Double</span>.<span>self</span>)
<span>print</span>(<span><span>"</span>decoded manually: <span>\(</span><span>string</span><span><span>)</span></span>, <span>\(</span><span>int</span><span><span>)</span></span>, <span>\(</span><span>double</span><span><span>)</span></span><span>"</span></span>)</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-clwi-CWPack"><h4><a href="https://github.com/clwi/CWPack" target="_blank">clwi/CWPack <span>https://github.com/clwi/CWPack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
CWPack</h5>
<p>CWPack is a lightweight and yet complete implementation of the
<a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serialization format
<a href="https://github.com/msgpack/msgpack/blob/master/spec.md">version 5</a>.</p>
<h6>
Excellent Performance</h6>
<p>Together with <a href="https://github.com/ludocode/mpack">MPack</a>, CWPack is the fastest open-source messagepack implementation. Both totally outperform
<a href="https://github.com/camgunz/cmp">CMP</a> and <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a></p>
<h6>
Design</h6>
<p>CWPack does no memory allocations and no file handling. All that is done
outside of CWPack.</p>
<p>CWPack is working against memory buffers. User defined handlers are called when buffers are
filled up (packing) or needs refill (unpack).</p>
<p>Containers (arrays, maps) are read/written in parts, first the item containing the size and
then the contained items one by one. Exception to this is the <code>cw_skip_items</code> function which
skip whole containers.</p>
<h6>
Example</h6>
<p>Pack and unpack example from the MessagePack home page:</p>
<div><pre><span>void</span> <span>example</span> (<span>void</span>)
{
    cw_pack_context pc;
    <span>char</span> buffer[<span>20</span>];
    <span>cw_pack_context_init</span> (&amp;pc, buffer, <span>20</span>, <span>0</span>, <span>0</span>);

    <span>cw_pack_map_size</span> (&amp;pc, <span>2</span>);
    <span>cw_pack_str</span> (&amp;pc, <span><span>"</span>compact<span>"</span></span>, <span>7</span>);
    <span>cw_pack_boolean</span> (&amp;pc, <span>true</span>);
    <span>cw_pack_str</span> (&amp;pc, <span><span>"</span>schema<span>"</span></span>, <span>6</span>);
    <span>cw_pack_unsigned</span> (&amp;pc, <span>0</span>);

    <span>int</span> length = pc.<span>current</span> - pc.<span>start</span>;
    <span>if</span> (length &gt; <span>18</span>) ERROR;

    cw_unpack_context uc;
    <span>cw_unpack_context_init</span> (&amp;uc, pc.<span>start</span>, length, <span>0</span>, <span>0</span>);

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>item</span>.<span>type</span> != CWP_ITEM_MAP || uc.<span>item</span>.<span>as</span>.<span>map</span>.<span>size</span> != <span>2</span>) ERROR;

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>item</span>.<span>type</span> != CWP_ITEM_STR || uc.<span>item</span>.<span>as</span>.<span>str</span>.<span>length</span> != <span>7</span>)) ERROR;
    <span>if</span> (<span>strncmp</span>(<span><span>"</span>compact<span>"</span></span>, uc.<span>item</span>.<span>as</span>.<span>str</span>.<span>start</span>, <span>7</span>)) ERROR;

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>item</span>.<span>type</span> != CWP_ITEM_BOOLEAN || uc.<span>item</span>.<span>as</span>.<span>boolean</span> != <span>true</span>) ERROR;

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>item</span>.<span>type</span> != CWP_ITEM_STR || uc.<span>item</span>.<span>as</span>.<span>str</span>.<span>length</span> != <span>6</span>)) ERROR;
    <span>if</span> (<span>strncmp</span>(<span><span>"</span>schema<span>"</span></span>, uc.<span>item</span>.<span>as</span>.<span>str</span>.<span>start</span>, <span>6</span>)) ERROR;

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>item</span>.<span>type</span> != CWP_ITEM_POSITIVE_INTEGER || uc.<span>item</span>.<span>as</span>.<span>u64</span> != <span>0</span>) ERROR;

    <span>cw_unpack_next</span>(&amp;uc);
    <span>if</span> (uc.<span>return_code</span> != CWP_RC_END_OF_INPUT)  ERROR;
}</pre></div>
<p>In the examples folder there are more examples.</p>
<h6>
Backward compatibility</h6>
<p>CWPack may be run in compatibility mode. It affects only packing; EXT is considered illegal, BIN are transformed to STR and generation of STR8 is supressed.</p>
<h6>
Error handling</h6>
<p>When an error is detected in a context, the context is stopped and all future calls to that context are immediatly returned without any actions.</p>
<p>CWPack does not check for illegal values (e.g. in STR for illegal unicode characters).</p>
<h6>
Build</h6>
<p>CWPack consists of a single src file and two header files. It is written
in strict ansi C and the files are together ~ 1.2K lines. No separate build is neccesary, just include the
files in your own build.</p>
<p>CWPack has no dependencies to other libraries.</p>
<h6>
Test</h6>
<p>Included in the test folder are a module test and a performance test and shell scripts to run them.</p>
</article>
  </div>
        </div>
        
        <div id="qs-neuecc-MessagePack-CSharp"><h4><a href="https://github.com/neuecc/MessagePack-CSharp" target="_blank">neuecc/MessagePack-CSharp <span>https://github.com/neuecc/MessagePack-CSharp</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for C# (.NET, .NET Core, Unity, Xamarin)</h5>
<p><a href="https://dev.azure.com/ils0086/MessagePack-CSharp/_build/latest?definitionId=2" rel="nofollow"><img src="https://camo.githubusercontent.com/a4ee07603ff40d05282e042896f3bb410dd333f8/68747470733a2f2f6465762e617a7572652e636f6d2f696c73303038362f4d6573736167655061636b2d4353686172702f5f617069732f6275696c642f7374617475732f4d6573736167655061636b2d4353686172702d4349" alt="Build Status" data-canonical-src="https://dev.azure.com/ils0086/MessagePack-CSharp/_apis/build/status/MessagePack-CSharp-CI"></a>
<a href="https://www.nuget.org/packages/messagepack" rel="nofollow"><img src="https://camo.githubusercontent.com/65adb72dda90dd2a4b15ed4ece44c76f43e44d3d/68747470733a2f2f696d672e736869656c64732e696f2f6e756765742f762f4d6573736167655061636b2e737667" alt="NuGet" data-canonical-src="https://img.shields.io/nuget/v/MessagePack.svg"></a>
<a href="https://github.com/neuecc/MessagePack-CSharp/releases"><img src="https://camo.githubusercontent.com/e2e0f2ae4002584fa0cb9e27c26b1dd71a7ef53c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6e65756563632f4d6573736167655061636b2d4353686172702e737667" alt="Releases" data-canonical-src="https://img.shields.io/github/release/neuecc/MessagePack-CSharp.svg"></a></p>
<p><a href="https://gitter.im/MessagePack-CSharp/Lobby?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://camo.githubusercontent.com/ebd886ffef896e228750ef1e88bb4c34b49900ce/68747470733a2f2f6261646765732e6769747465722e696d2f4d6573736167655061636b2d4353686172702f4c6f6262792e737667" alt="Join the chat at https://gitter.im/MessagePack-CSharp/Lobby" data-canonical-src="https://badges.gitter.im/MessagePack-CSharp/Lobby.svg"></a></p>
<p>The extremely fast <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serializer for C#. It is 10x faster than <a href="https://github.com/msgpack/msgpack-cli">MsgPack-Cli</a> and outperforms other C# serializers. MessagePack for C# also ships with built-in support for LZ4 compression - an extremely fast compression algorithm. Performance is important, particularly in applications like game development, distributed computing, microservice architecture, and caching.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23835716/89c8ab08-07af-11e7-9183-9e9415bdc87f.png"><img src="https://cloud.githubusercontent.com/assets/46207/23835716/89c8ab08-07af-11e7-9183-9e9415bdc87f.png" alt="image"></a></p>
<p>MessagePack has compact binary size and full set of general purpose expression. Please see the <a href="https://github.com/neuecc/MessagePack-CSharp#compare-with-protobuf-json-zeroformatter">comparison with JSON, protobuf, ZeroFormatter section</a>. If you want to know why MessagePack C# is fastest, please see <a href="https://github.com/neuecc/MessagePack-CSharp#performance">performance section</a>.</p>
<h6>
Installation</h6>
<p>The library provides in NuGet except for Unity.</p>
<p>Standard library for .NET Framework 4.5, .NET Standard 1.6 and .NET Standard 2.0(.NET Core, Xamarin).</p>
<pre><code><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span></code></pre>
<p>Visual Studio Analyzer to help object definition</p>
<pre><code><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePackAnalyzer</span></code></pre>
<p>Extension Packages(info is see <a href="https://github.com/neuecc/MessagePack-CSharp#extensions">extensions section</a>).</p>
<pre><code><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>ImmutableCollection</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>ReactiveProperty</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>UnityShims</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>AspNetCoreMvcFormatter</span></code></pre>
<p>for Unity, download from <a href="https://github.com/neuecc/MessagePack-CSharp/releases">releases</a> page, providing <code>.unitypackage</code>. Unity IL2CPP or Xamarin AOT Environment, check the <a href="https://github.com/neuecc/MessagePack-CSharp#pre-code-generationunityxamarin-supports">pre-code generation section</a>.</p>
<h6>
Quick Start</h6>
<p>Define class and mark as <code>[MessagePackObject]</code> and public members(property or field) mark as <code>[Key]</code>, call <code>MessagePackSerializer.Serialize&lt;T&gt;/Deserialize&lt;T&gt;</code>. <code>ToJson</code> helps dump binary.</p>
<div><pre><span><span>//</span> mark MessagePackObjectAttribute</span>
[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>MyClass</span>
{
    <span><span>//</span> Key is serialization index, it is important for versioning.</span>
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>int</span> <span>Age</span> { <span>get</span>; <span>set</span>; }

    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>string</span> <span>FirstName</span> { <span>get</span>; <span>set</span>; }

    [<span>Key</span>(<span>2</span>)]
    <span>public</span> <span>string</span> <span>LastName</span> { <span>get</span>; <span>set</span>; }

    <span><span>//</span> public members and does not serialize target, mark IgnoreMemberttribute</span>
    [<span>IgnoreMember</span>]
    <span>public</span> <span>string</span> <span>FullName</span> { <span>get</span> { <span>return</span> <span>FirstName</span> <span>+</span> <span>LastName</span>; } }
}

<span>class</span> <span>Program</span>
{
    <span>static</span> <span>void</span> <span>Main</span>(<span>string</span>[] <span>args</span>)
    {
        <span>var</span> <span>mc</span> <span>=</span> <span>new</span> <span>MyClass</span>
        {
            <span>Age</span> <span>=</span> <span>99</span>,
            <span>FirstName</span> <span>=</span> <span><span>"</span>hoge<span>"</span></span>,
            <span>LastName</span> <span>=</span> <span><span>"</span>huga<span>"</span></span>,
        };

        <span><span>//</span> call Serialize/Deserialize, that's all.</span>
        <span>var</span> <span>bytes</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>mc</span>);
        <span>var</span> <span>mc2</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Deserialize</span>&lt;<span>MyClass</span>&gt;(<span>bytes</span>);

        <span><span>//</span> you can dump msgpack binary to human readable json.</span>
        <span><span>//</span> In default, MeesagePack for C# reduce property name information.</span>
        <span><span>//</span> [99,"hoge","huga"]</span>
        <span>var</span> <span>json</span> <span>=</span> <span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bytes</span>);
        <span>Console</span>.<span>WriteLine</span>(<span>json</span>);
    }
}</pre></div>
<p>By default the attribute is required. Optionally it can be unnecessary, see <a href="https://github.com/neuecc/MessagePack-CSharp#object-serialization">Object Serialization section</a> and <a href="https://github.com/neuecc/MessagePack-CSharp#extension-pointiformatterresolver">Formatter Resolver section</a> for details.</p>
<h6>
Analyzer</h6>
<p>MessagePackAnalyzer helps object definition. Attributes, accessibility etc are detected and it becomes a compiler error.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837445/ce734eae-07cb-11e7-9758-d69f0f095bc1.gif"><img src="https://cloud.githubusercontent.com/assets/46207/23837445/ce734eae-07cb-11e7-9758-d69f0f095bc1.gif" alt="analyzergif"></a></p>
<p>If you want to allow a specific type (for example, when registering a custom type), put <code>MessagePackAnalyzer.json</code> at the project root and make the Build Action to <code>AdditionalFiles</code>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837427/8a8d507c-07cb-11e7-9277-5a566eb0bfde.png"><img src="https://cloud.githubusercontent.com/assets/46207/23837427/8a8d507c-07cb-11e7-9277-5a566eb0bfde.png" alt="image"></a></p>
<p>This is a sample of the contents of MessagePackAnalyzer.json.</p>
<pre><code><span>[</span><span> </span><span>"MyNamespace.FooClass"</span><span>,</span><span> </span><span>"MyNameSpace.BarStruct"</span><span> </span><span>]</span></code></pre>
<h6>
Built-in support types</h6>
<p>These types can serialize by default.</p>
<p>Primitives(<code>int</code>, <code>string</code>, etc...), <code>Enum</code>, <code>Nullable&lt;&gt;</code>,  <code>TimeSpan</code>,  <code>DateTime</code>, <code>DateTimeOffset</code>, <code>Nil</code>, <code>Guid</code>, <code>Uri</code>, <code>Version</code>, <code>StringBuilder</code>, <code>BitArray</code>, <code>ArraySegment&lt;&gt;</code>, <code>BigInteger</code>, <code>Complext</code>, <code>Task</code>, <code>Array[]</code>, <code>Array[,]</code>, <code>Array[,,]</code>, <code>Array[,,,]</code>, <code>KeyValuePair&lt;,&gt;</code>, <code>Tuple&lt;,...&gt;</code>, <code>ValueTuple&lt;,...&gt;</code>, <code>List&lt;&gt;</code>, <code>LinkedList&lt;&gt;</code>, <code>Queue&lt;&gt;</code>, <code>Stack&lt;&gt;</code>, <code>HashSet&lt;&gt;</code>, <code>ReadOnlyCollection&lt;&gt;</code>, <code>IList&lt;&gt;</code>, <code>ICollection&lt;&gt;</code>, <code>IEnumerable&lt;&gt;</code>, <code>Dictionary&lt;,&gt;</code>, <code>IDictionary&lt;,&gt;</code>, <code>SortedDictionary&lt;,&gt;</code>, <code>SortedList&lt;,&gt;</code>, <code>ILookup&lt;,&gt;</code>, <code>IGrouping&lt;,&gt;</code>, <code>ObservableCollection&lt;&gt;</code>, <code>ReadOnlyOnservableCollection&lt;&gt;</code>, <code>IReadOnlyList&lt;&gt;</code>, <code>IReadOnlyCollection&lt;&gt;</code>, <code>ISet&lt;&gt;</code>, <code>ConcurrentBag&lt;&gt;</code>, <code>ConcurrentQueue&lt;&gt;</code>, <code>ConcurrentStack&lt;&gt;</code>, <code>ReadOnlyDictionary&lt;,&gt;</code>, <code>IReadOnlyDictionary&lt;,&gt;</code>, <code>ConcurrentDictionary&lt;,&gt;</code>, <code>Lazy&lt;&gt;</code>, <code>Task&lt;&gt;</code>, custom inherited <code>ICollection&lt;&gt;</code> or <code>IDictionary&lt;,&gt;</code> with paramterless constructor, <code>IList</code>, <code>IDictionary</code> and custom inherited <code>ICollection</code> or <code>IDictionary</code> with paramterless constructor(includes <code>ArrayList</code> and <code>Hashtable</code>).</p>
<p>You can add custom type support and has some official/third-party extension package. for ImmutableCollections(<code>ImmutableList&lt;&gt;</code>, etc), for ReactiveProperty and for Unity(<code>Vector3</code>, <code>Quaternion</code>, etc...), for F#(Record, FsList, Discriminated Unions, etc...). Please see <a href="https://github.com/neuecc/MessagePack-CSharp#extensions">extensions section</a>.</p>
<p><code>MessagePack.Nil</code> is built-in null/void/unit representation type of MessagePack for C#.</p>
<h6>
Object Serialization</h6>
<p>MessagePack for C# can serialze your own public <code>Class</code> or <code>Struct</code>. Serialization target must marks <code>[MessagePackObject]</code> and <code>[Key]</code>. Key type can choose int or string. If key type is int, serialized format is used array. If key type is string, serialized format is used map. If you define <code>[MessagePackObject(keyAsPropertyName: true)]</code>, does not require <code>KeyAttribute</code>.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>Sample1</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>int</span> <span>Foo</span> { <span>get</span>; <span>set</span>; }
    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>int</span> <span>Bar</span> { <span>get</span>; <span>set</span>; }
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>Sample2</span>
{
    [<span>Key</span>(<span><span>"</span>foo<span>"</span></span>)]
    <span>public</span> <span>int</span> <span>Foo</span> { <span>get</span>; <span>set</span>; }
    [<span>Key</span>(<span><span>"</span>bar<span>"</span></span>)]
    <span>public</span> <span>int</span> <span>Bar</span> { <span>get</span>; <span>set</span>; }
}

[<span>MessagePackObject</span>(<span>keyAsPropertyName</span>: <span>true</span>)]
<span>public</span> <span>class</span> <span>Sample3</span>
{
    <span><span>//</span> no needs KeyAttribute</span>
    <span>public</span> <span>int</span> <span>Foo</span> { <span>get</span>; <span>set</span>; }

    <span><span>//</span> If ignore public member, you can use IgnoreMemberAttribute</span>
    [<span>IgnoreMember</span>]
    <span>public</span> <span>int</span> <span>Bar</span> { <span>get</span>; <span>set</span>; }
}

<span><span>//</span> [10,20]</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>new</span> <span>Sample1</span> { <span>Foo</span> <span>=</span> <span>10</span>, <span>Bar</span> <span>=</span> <span>20</span> }));

<span><span>//</span> {"foo":10,"bar":20}</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>new</span> <span>Sample2</span> { <span>Foo</span> <span>=</span> <span>10</span>, <span>Bar</span> <span>=</span> <span>20</span> }));

<span><span>//</span> {"Foo":10}</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>new</span> <span>Sample3</span> { <span>Foo</span> <span>=</span> <span>10</span>, <span>Bar</span> <span>=</span> <span>20</span> }));</pre></div>
<p>All patterns serialization target are public instance member(field or property). If you want to avoid serialization target, you can add <code>[IgnoreMember]</code> to target member.</p>
<blockquote>
<p>target class must be public, does not allows private, internal class.</p>
</blockquote>
<p>Which should uses int key or string key? I recommend use int key because faster and compact than string key. But string key has key name information, it is useful for debugging.</p>
<p>MessagePackSerializer requests target must put attribute is for robustness. If class is grown, you need to be conscious of versioning. MessagePackSerializer uses default value if key does not exists. If uses int key, should be start from 0 and should be sequential. If unnecessary properties come out, please make a missing number. Reuse is bad. Also, if Int Key's jump number is too large, it affects binary size.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>IntKeySample</span>
{
    [<span>Key</span>(<span>3</span>)]
    <span>public</span> <span>int</span> <span>A</span> { <span>get</span>; <span>set</span>; }
    [<span>Key</span>(<span>10</span>)]
    <span>public</span> <span>int</span> <span>B</span> { <span>get</span>; <span>set</span>; }
}

<span><span>//</span> [null,null,null,0,null,null,null,null,null,null,0]</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>new</span> <span>IntKeySample</span>()));</pre></div>
<p>I want to use like JSON.NET! I don't want to put attribute! If you think that way, you can use a contractless resolver.</p>
<div><pre><span>public</span> <span>class</span> <span>ContractlessSample</span>
{
    <span>public</span> <span>int</span> <span>MyProperty1</span> { <span>get</span>; <span>set</span>; }
    <span>public</span> <span>int</span> <span>MyProperty2</span> { <span>get</span>; <span>set</span>; }
}

<span>var</span> <span>data</span> <span>=</span> <span>new</span> <span>ContractlessSample</span> { <span>MyProperty1</span> <span>=</span> <span>99</span>, <span>MyProperty2</span> <span>=</span> <span>9999</span> };
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>, <span>MessagePack</span>.<span>Resolvers</span>.<span>ContractlessStandardResolver</span>.<span>Instance</span>);

<span><span>//</span> {"MyProperty1":99,"MyProperty2":9999}</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bin</span>));

<span><span>//</span> You can set ContractlessStandardResolver as default.</span>
<span>MessagePackSerializer</span>.<span>SetDefaultResolver</span>(<span>MessagePack</span>.<span>Resolvers</span>.<span>ContractlessStandardResolver</span>.<span>Instance</span>);

<span><span>//</span> serializable.</span>
<span>var</span> <span>bin2</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>);</pre></div>
<p>I want to serialize private member! In default, can not serialize/deserialize private members. But you can use allow-private resolver.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>PrivateSample</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>int</span> <span>x</span>;

    <span>public</span> <span>void</span> <span>SetX</span>(<span>int</span> <span>v</span>)
    {
        <span>x</span> <span>=</span> <span>v</span>;
    }

    <span>public</span> <span>int</span> <span>GetX</span>()
    {
        <span>return</span> <span>x</span>;
    }
}

<span>var</span> <span>data</span> <span>=</span> <span>new</span> <span>PrivateSample</span>();
<span>data</span>.<span>SetX</span>(<span>9999</span>);

<span><span>//</span> You can choose StandardResolverAllowPrivate or  ContractlessStandardResolverAllowPrivate</span>
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>, <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicObjectResolverAllowPrivate</span>.<span>Instance</span>);</pre></div>
<p>I don't need type, I want to use like BinaryFormatter! You can use as typeless resolver and helpers. Please see <a href="https://github.com/neuecc/MessagePack-CSharp#typeless">Typeless section</a>.</p>
<p>Resolver is key customize point of MessagePack for C#. Details, please see <a href="https://github.com/neuecc/MessagePack-CSharp#extension-pointiformatterresolver">extension point</a>.</p>
<h6>
DataContract compatibility</h6>
<p>You can use <code>[DataContract]</code> instead of <code>[MessagePackObject]</code>. If type is marked DataContract, you can use <code>[DataMember]</code> instead of <code>[Key]</code> and <code>[IgnoreDataMember]</code> instead of <code>[IgnoreMember]</code>.</p>
<p><code>[DataMember(Order = int)]</code> is same as <code>[Key(int)]</code>, <code>[DataMember(Name = string)]</code> is same as <code>[Key(string)]</code>. If use <code>[DataMember]</code>, same as <code>[Key(nameof(propertyname)]</code>.</p>
<p>Using DataContract makes it a shared class library and you do not have to refer to MessagePack for C#. However, it is not included in analysis by Analyzer or code generation by <code>mpc.exe</code>. Also, functions like <code>UnionAttribute</code>, <code>MessagePackFormatterAttribute</code>, <code>SerializationConstructorAttribute</code> etc can not be used. For this reason, I recommend that you use the MessagePack for C# attribute basically.</p>
<h6>
Serialize ImmutableObject(SerializationConstructor)</h6>
<p>MessagePack for C# supports deserialize immutable object. For example, this struct can serialize/deserialize naturally.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>struct</span> <span>Point</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>readonly</span> <span>int</span> <span>X</span>;
    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>readonly</span> <span>int</span> <span>Y</span>;

    <span>public</span> <span>Point</span>(<span>int</span> <span>x</span>, <span>int</span> <span>y</span>)
    {
        <span>this</span>.<span>X</span> <span>=</span> <span>x</span>;
        <span>this</span>.<span>Y</span> <span>=</span> <span>y</span>;
    }
}

<span>var</span> <span>data</span> <span>=</span> <span>new</span> <span>Point</span>(<span>99</span>, <span>9999</span>);
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>);

<span><span>//</span> Okay to deserialize immutable obejct</span>
<span>var</span> <span>point</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Deserialize</span>&lt;<span>Point</span>&gt;(<span>bin</span>);</pre></div>
<p>MessagePackSerializer choose constructor with the least matched argument, match index if key in integer or match name(ignore case) if key is string. If encounts <code>MessagePackDynamicObjectResolverException: can't find matched constructor parameter</code> you should check about this.</p>
<p>If can not match automatically, you can specify to use constructor manually by <code>[SerializationConstructorAttribute]</code>.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>struct</span> <span>Point</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>readonly</span> <span>int</span> <span>X</span>;
    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>readonly</span> <span>int</span> <span>Y</span>;

    <span><span>//</span> If not marked attribute, used this(least matched argument)</span>
    <span>public</span> <span>Point</span>(<span>int</span> <span>x</span>)
    {
        <span>X</span> <span>=</span> <span>x</span>;
    }

    [<span>SerializationConstructor</span>]
    <span>public</span> <span>Point</span>(<span>int</span> <span>x</span>, <span>int</span> <span>y</span>)
    {
        <span>this</span>.<span>X</span> <span>=</span> <span>x</span>;
        <span>this</span>.<span>Y</span> <span>=</span> <span>y</span>;
    }
}</pre></div>
<h6>
Serialization Callback</h6>
<p>If object implements <code>IMessagePackSerializationCallbackReceiver</code>, received <code>OnBeforeSerialize</code> and <code>OnAfterDeserialize</code> on serilization process.</p>
<div><pre>[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>SampleCallback</span> : <span>IMessagePackSerializationCallbackReceiver</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>int</span> <span>Key</span> { <span>get</span>; <span>set</span>; }

    <span>public</span> <span>void</span> <span>OnBeforeSerialize</span>()
    {
        <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>OnBefore<span>"</span></span>);
    }

    <span>public</span> <span>void</span> <span>OnAfterDeserialize</span>()
    {
        <span>Console</span>.<span>WriteLine</span>(<span><span>"</span>OnAfter<span>"</span></span>);
    }
}</pre></div>
<h6>
Union</h6>
<p>MessagePack for C# supports serialize interface. It is like <code>XmlInclude</code> or <code>ProtoInclude</code>. MessagePack for C# there called <em>Union</em>. <code>UnionAttribute</code> can only attach to interface or abstract class. It requires discriminated integer key and sub-type.</p>
<div><pre><span><span>//</span> mark inheritance types</span>
[<span>MessagePack</span>.<span>Union</span>(<span>0</span>, <span>typeof</span>(<span>FooClass</span>))]
[<span>MessagePack</span>.<span>Union</span>(<span>1</span>, <span>typeof</span>(<span>BarClass</span>))]
<span>public</span> <span>interface</span> <span>IUnionSample</span>
{
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>FooClass</span> : <span>IUnionSample</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>int</span> <span>XYZ</span> { <span>get</span>; <span>set</span>; }
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>BarClass</span> : <span>IUnionSample</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>string</span> <span>OPQ</span> { <span>get</span>; <span>set</span>; }
}

<span><span>//</span> ---</span>

<span>IUnionSample</span> <span>data</span> <span>=</span> <span>new</span> <span>FooClass</span>() { <span>XYZ</span> <span>=</span> <span>999</span> };

<span><span>//</span> serialize interface.</span>
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>);

<span><span>//</span> deserialize interface.</span>
<span>var</span> <span>reData</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Deserialize</span>&lt;<span>IUnionSample</span>&gt;(<span>bin</span>);

<span><span>//</span> use type-switch of C# 7.0</span>
<span>switch</span> (<span>reData</span>)
{
    <span>case</span> <span>FooClass</span> <span>x</span>:
        <span>Console</span>.<span>WriteLine</span>(<span>x</span>.<span>XYZ</span>);
        <span>break</span>;
    <span>case</span> <span>BarClass</span> <span>x</span>:
        <span>Console</span>.<span>WriteLine</span>(<span>x</span>.<span>OPQ</span>);
        <span>break</span>;
    <span>default</span>:
        <span>break</span>;
}</pre></div>
<p>C# 7.0 type-switch is best match for Union. Union is serialized to two-length array.</p>
<div><pre><span>IUnionSample</span> <span>data</span> <span>=</span> <span>new</span> <span>BarClass</span> { <span>OPQ</span> <span>=</span> <span><span>"</span>FooBar<span>"</span></span> };

<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>);

<span><span>//</span> Union is serialized to two-length array, [key, object]</span>
<span><span>//</span> [1,["FooBar"]]</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bin</span>));</pre></div>
<p>Using Union in Abstract Class, you can use same of interface.</p>
<div><pre>[<span>Union</span>(<span>0</span>, <span>typeof</span>(<span>SubUnionType1</span>))]
[<span>Union</span>(<span>1</span>, <span>typeof</span>(<span>SubUnionType2</span>))]
[<span>MessagePackObject</span>]
<span>public</span> <span>abstract</span> <span>class</span> <span>ParentUnionType</span>
{
    [<span>Key</span>(<span>0</span>)]
    <span>public</span> <span>int</span> <span>MyProperty</span> { <span>get</span>; <span>set</span>; }
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>SubUnionType1</span> : <span>ParentUnionType</span>
{
    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>int</span> <span>MyProperty1</span> { <span>get</span>; <span>set</span>; }
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>SubUnionType2</span> : <span>ParentUnionType</span>
{
    [<span>Key</span>(<span>1</span>)]
    <span>public</span> <span>int</span> <span>MyProperty2</span> { <span>get</span>; <span>set</span>; }
}</pre></div>
<p>Serialization of inherited type, flatten in array(or map), be carefult to integer key, it cannot duplicate parent and all childrens.</p>
<h6>
Dynamic(Untyped) Deserialization</h6>
<p>If use <code>MessagePackSerializer.Deserialize&lt;object&gt;</code> or <code>MessagePackSerializer.Deserialize&lt;dynamic&gt;</code>, convert messagepack binary to primitive values that convert from msgpack-primitive to <code>bool</code>, <code>char</code>, <code>sbyte</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>ushort</code>, <code>uint</code>, <code>ulong</code>, <code>float</code>, <code>double</code>, <code>DateTime</code>, <code>string</code>, <code>byte[]</code>, <code>object[]</code>, <code>IDictionary&lt;object, object&gt;</code>.</p>
<div><pre><span><span>//</span> sample binary.</span>
<span>var</span> <span>model</span> <span>=</span> <span>new</span> <span>DynamicModel</span> { <span>Name</span> <span>=</span> <span><span>"</span>foobar<span>"</span></span>, <span>Items</span> <span>=</span> <span>new</span>[] { <span>1</span>, <span>10</span>, <span>100</span>, <span>1000</span> } };
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>model</span>, <span>ContractlessStandardResolver</span>.<span>Instance</span>);

<span><span>//</span> dynamic, untyped</span>
<span>var</span> <span>dynamicModel</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Deserialize</span>&lt;<span>dynamic</span>&gt;(<span>bin</span>, <span>ContractlessStandardResolver</span>.<span>Instance</span>);

<span>Console</span>.<span>WriteLine</span>(<span>dynamicModel</span>[<span><span>"</span>Name<span>"</span></span>]); <span><span>//</span> foobar</span>
<span>Console</span>.<span>WriteLine</span>(<span>dynamicModel</span>[<span><span>"</span>Items<span>"</span></span>][<span>2</span>]); <span><span>//</span> 100</span></pre></div>
<p>So you can access indexer for msgpack map and array.</p>
<h6>
Object Type Serialization</h6>
<p><code>StandardResolver</code> and <code>ContractlessStandardResolver</code> can serialize <code>object</code> type as concrete type by <code>DynamicObjectTypeFallbackResolver</code>.</p>
<div><pre><span>var</span> <span>objects</span> <span>=</span> <span>new</span> <span>object</span>[] { <span>1</span>, <span><span>"</span>aaa<span>"</span></span>, <span>new</span> <span>ObjectFieldType</span> { <span>Anything</span> <span>=</span> <span>9999</span> } };
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>objects</span>);

<span><span>//</span> [1,"aaa",[9999]]</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bin</span>));

<span><span>//</span> Support Anonymous Type Serialize</span>
<span>var</span> <span>anonType</span> <span>=</span> <span>new</span> { <span>Foo</span> <span>=</span> <span>100</span>, <span>Bar</span> <span>=</span> <span><span>"</span>foobar<span>"</span></span> };
<span>var</span> <span>bin2</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Serialize</span>(<span>anonType</span>, <span>MessagePack</span>.<span>Resolvers</span>.<span>ContractlessStandardResolver</span>.<span>Instance</span>);

<span><span>//</span> {"Foo":100,"Bar":"foobar"}</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bin2</span>));</pre></div>
<blockquote>
<p>Unity supports is limited.</p>
</blockquote>
<p>When deserializing, same as Dynamic(Untyped) Deserialization.</p>
<h6>
Typeless</h6>
<p>Typeless API is like <code>BinaryFormatter</code>, embed type information to binary so no needs type to deserialize.</p>
<div><pre><span>object</span> <span>mc</span> <span>=</span> <span>new</span> <span>Sandbox</span>.<span>MyClass</span>()
{
    <span>Age</span> <span>=</span> <span>10</span>,
    <span>FirstName</span> <span>=</span> <span><span>"</span>hoge<span>"</span></span>,
    <span>LastName</span> <span>=</span> <span><span>"</span>huga<span>"</span></span>
};

<span><span>//</span> serialize to typeless</span>
<span>var</span> <span>bin</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Typeless</span>.<span>Serialize</span>(<span>mc</span>);

<span><span>//</span> binary data is embeded type-assembly information.</span>
<span><span>//</span> ["Sandbox.MyClass, Sandbox",10,"hoge","huga"]</span>
<span>Console</span>.<span>WriteLine</span>(<span>MessagePackSerializer</span>.<span>ToJson</span>(<span>bin</span>));

<span><span>//</span> can deserialize to MyClass with typeless</span>
<span>var</span> <span>objModel</span> <span>=</span> <span>MessagePackSerializer</span>.<span>Typeless</span>.<span>Deserialize</span>(<span>bin</span>) <span>as</span> <span>MyClass</span>;</pre></div>
<p>Type information is serialized by mspgack <code>ext</code> format, typecode is 100.</p>
<p><code>MessagePackSerializer.Typeless</code> is shortcut of <code>Serialize/Deserialize&lt;object&gt;(TypelessContractlessStandardResolver.Instance)</code>. If you want to configure default typeless resolver, you can set by <code>MessagePackSerializer.Typeless.RegisterDefaultResolver</code>.</p>
<p>TypelessFormatter can use standalone and combinate with existing resolvers.</p>
<div><pre><span><span>//</span> replace `object` uses typeless</span>
<span>MessagePack</span>.<span>Resolvers</span>.<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span>new</span>[] { <span>MessagePack</span>.<span>Formatters</span>.<span>TypelessFormatter</span>.<span>Instance</span> },
    <span>new</span>[] { <span>MessagePack</span>.<span>Resolvers</span>.<span>StandardResolver</span>.<span>Instance</span> });

<span>public</span> <span>class</span> <span>Foo</span>
{
    <span><span>//</span> use Typeless(this field only)</span>
    [<span>MessagePackFormatter</span>(<span>typeof</span>(<span>TypelessFormatter</span>))]
    <span>public</span> <span>object</span> <span>Bar</span>;
}</pre></div>
<p>If type name was changed, can not deserialize. If you need to typename fallback, you can use <code>TypelessFormatter.BindToType</code>.</p>
<div><pre><span>MessagePack</span>.<span>Formatters</span>.<span>TypelessFormatter</span>.<span>BindToType</span> <span>=</span> <span>typeName</span> <span>=&gt;</span>
{
    <span>if</span> (<span>typeName</span>.<span>StartsWith</span>(<span><span>"</span>SomeNamespace<span>"</span></span>))
    {
        <span>typeName</span> <span>=</span> <span>typeName</span>.<span>Replace</span>(<span><span>"</span>SomeNamespace<span>"</span></span>, <span><span>"</span>AnotherNamespace<span>"</span></span>);
    }

    <span>return</span> <span>Type</span>.<span>GetType</span>(<span>typeName</span>, <span>false</span>);
};</pre></div>
<h6>
Performance</h6>
<p>Benchmarks comparing to other serializers run on <code>Windows 10 Pro x64 Intel Core i7-6700K 4.00GHz, 32GB RAM</code>. Benchmark code is <a href="https://github.com/neuecc/ZeroFormatter/tree/master/sandbox/PerformanceComparison">here</a> - and there <a href="https://github.com/neuecc/ZeroFormatter/blob/bc63cb925d/sandbox/PerformanceComparison/packages.config">version info</a>, ZeroFormatter and <a href="https://google.github.io/flatbuffers/" rel="nofollow">FlatBuffers</a> has infinitely fast deserializer so ignore deserialize performance.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23835765/55fe494e-07b0-11e7-98be-5e7a9411da40.png"><img src="https://cloud.githubusercontent.com/assets/46207/23835765/55fe494e-07b0-11e7-98be-5e7a9411da40.png" alt="image"></a></p>
<p>MessagePack for C# uses many techniques for improve performance.</p>
<ul>
<li>Serializer uses only ref byte[] and int offset, don't use (Memory)Stream(call Stream api has overhead)</li>
<li>High-level API uses internal memory pool, don't allocate working memory under 64K</li>
<li>Don't create intermediate utility instance(XxxWriter/Reader, XxxContext, etc...)</li>
<li>Avoid boxing all codes, all platforms(include Unity/IL2CPP)</li>
<li>Getting cached generated formatter on static generic field(don't use dictinary-cache because dictionary lookup is overhead): <a href="https://github.com/neuecc/MessagePack-CSharp/tree/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Resolvers">see:Resolvers</a>
</li>
<li>Heavyly tuned dynamic il code generation: <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Resolvers/DynamicObjectResolver.cs#L142-L754">see:DynamicObjectTypeBuilder</a>
</li>
<li>Call PrimitiveAPI directly when il code generation knows target is primitive</li>
<li>Reduce branch of variable length format when il code generation knows target(integer/string) range</li>
<li>Don't use <code>IEnumerable&lt;T&gt;</code> abstraction on iterate collection, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/Formatters/CollectionFormatter.cs#L192-L355">see:CollectionFormatterBase</a> and inherited collection formatters</li>
<li>Uses pre generated lookup table to reduce check messagepack type, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/209f301e2e595ed366408624011ba2e856d23429/src/MessagePack/MessagePackBinary.cs#L15-L212">see: MessagePackBinary</a>
</li>
<li>Uses optimized type key dictionary for non-generic methods, <a href="https://github.com/neuecc/MessagePack-CSharp/blob/91312921cb7fe987f48336768c898a76ac7dbb40/src/MessagePack/Internal/ThreadsafeTypeKeyHashTable.cs">see: ThreadsafeTypeKeyHashTable</a>
</li>
<li>Avoid string key decode for lookup map(string key) key and uses automata based name lookup with il inlining code generation, see: <a href="https://github.com/neuecc/MessagePack-CSharp/blob/bcedbce3fd98cb294210d6b4a22bdc4c75ccd916/src/MessagePack/Internal/AutomataDictionary.cs">AutomataDictionary</a>
</li>
<li>For string key encode, pre-generated member name bytes and use fixed sized binary copy in IL, see: <a href="https://github.com/neuecc/MessagePack-CSharp/blob/f17ddc5d107d3a2f66f60398b214ef87919ff892/src/MessagePack/Internal/UnsafeMemory.cs">UnsafeMemory.cs</a>
</li>
</ul>
<p>Before creating this library, I implemented a fast fast serializer with <a href="https://github.com/neuecc/ZeroFormatter#performance">ZeroFormatter#Performance</a>. And this is a further evolved implementation. MessagePack for C# is always fast, optimized for all types(primitive, small struct, large object, any collections).</p>
<h6>
Deserialize Performance per options</h6>
<p>Performance varies depending on options. This is a micro benchamark with <a href="https://github.com/dotnet/BenchmarkDotNet">BenchmarkDotNet</a>. Target object has 9 members(<code>MyProperty1</code> ~ <code>MyProperty9</code>), value are zero.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Mean</th>
<th>Error</th>
<th>Scaled</th>
<th>Gen 0</th>
<th>Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>IntKey</td>
<td>72.67 ns</td>
<td>NA</td>
<td>1.00</td>
<td>0.0132</td>
<td>56 B</td>
</tr>
<tr>
<td>StringKey</td>
<td>217.95 ns</td>
<td>NA</td>
<td>3.00</td>
<td>0.0131</td>
<td>56 B</td>
</tr>
<tr>
<td>Typeless_IntKey</td>
<td>176.71 ns</td>
<td>NA</td>
<td>2.43</td>
<td>0.0131</td>
<td>56 B</td>
</tr>
<tr>
<td>Typeless_StringKey</td>
<td>378.64 ns</td>
<td>NA</td>
<td>5.21</td>
<td>0.0129</td>
<td>56 B</td>
</tr>
<tr>
<td>MsgPackCliMap</td>
<td>1,355.26 ns</td>
<td>NA</td>
<td>18.65</td>
<td>0.1431</td>
<td>608 B</td>
</tr>
<tr>
<td>MsgPackCliArray</td>
<td>455.28 ns</td>
<td>NA</td>
<td>6.26</td>
<td>0.0415</td>
<td>176 B</td>
</tr>
<tr>
<td>ProtobufNet</td>
<td>265.85 ns</td>
<td>NA</td>
<td>3.66</td>
<td>0.0319</td>
<td>136 B</td>
</tr>
<tr>
<td>Hyperion</td>
<td>366.47 ns</td>
<td>NA</td>
<td>5.04</td>
<td>0.0949</td>
<td>400 B</td>
</tr>
<tr>
<td>JsonNetString</td>
<td>2,783.39 ns</td>
<td>NA</td>
<td>38.30</td>
<td>0.6790</td>
<td>2864 B</td>
</tr>
<tr>
<td>JsonNetStreamReader</td>
<td>3,297.90 ns</td>
<td>NA</td>
<td>45.38</td>
<td>1.4267</td>
<td>6000 B</td>
</tr>
<tr>
<td>JilString</td>
<td>553.65 ns</td>
<td>NA</td>
<td>7.62</td>
<td>0.0362</td>
<td>152 B</td>
</tr>
<tr>
<td>JilStreamReader</td>
<td>1,408.46 ns</td>
<td>NA</td>
<td>19.38</td>
<td>0.8450</td>
<td>3552 B</td>
</tr>
</tbody>
</table>
<p>IntKey, StringKey, Typeless_IntKey, Typeless_StringKey are MessagePack for C# options. All MessagePack for C# options achive zero memory allocation on deserialization process. JsonNetString/JilString is deserialized from string. JsonNetStreamReader/JilStreamReader is deserialized from UTF8 byte[] with StreamReader. Deserialization is normally read from Stream. Thus, it will be restored from byte[](or Stream) instead of string.</p>
<p>MessagePack for C# IntKey is fastest. StringKey is slower than IntKey because matching from the character string is required. If IntKey, read array length, for(array length) { binary decode }. If StringKey, read map length, for(map length) { decode key, lookup by key, binary decode } so requires additional two steps(decode key and lookup by key).</p>
<p>String key is often useful, contractless, simple replacement of JSON, interoperability with other languages, and more certain versioning. MessagePack for C# is also optimized for String Key. First of all, it do not decode UTF8 byte[] to String for matching with the member name, it will look up the byte[] as it is(avoid decode cost and extra allocation).</p>
<p>And It will try to match each <code>long type</code> (per 8 character, if it is not enough, pad with 0) using <a href="https://en.wikipedia.org/wiki/Automata_theory" rel="nofollow">automata</a> and inline it when IL code generating.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46207/29754771-216b40e2-8bc7-11e7-8310-1c3602e80a08.png"><img src="https://user-images.githubusercontent.com/46207/29754771-216b40e2-8bc7-11e7-8310-1c3602e80a08.png" alt="image"></a></p>
<p>This also avoids calculating the hash code of byte[], and the comparison can be made several times on a long unit.</p>
<p>This is the sample decompile of generated deserializer code by <a href="http://ilspy.net/" rel="nofollow">ILSpy</a>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46207/29754804-b5ba0f44-8bc7-11e7-9f6b-0c8f3c041237.png"><img src="https://user-images.githubusercontent.com/46207/29754804-b5ba0f44-8bc7-11e7-9f6b-0c8f3c041237.png" alt="image"></a></p>
<p>If the number of nodes is large, search with a embedded binary search.</p>
<p>Extra note, this is serialize benchmark result.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Mean</th>
<th>Error</th>
<th>Scaled</th>
<th>Gen 0</th>
<th>Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>IntKey</td>
<td>84.11 ns</td>
<td>NA</td>
<td>1.00</td>
<td>0.0094</td>
<td>40 B</td>
</tr>
<tr>
<td>StringKey</td>
<td>126.75 ns</td>
<td>NA</td>
<td>1.51</td>
<td>0.0341</td>
<td>144 B</td>
</tr>
<tr>
<td>Typeless_IntKey</td>
<td>183.31 ns</td>
<td>NA</td>
<td>2.18</td>
<td>0.0265</td>
<td>112 B</td>
</tr>
<tr>
<td>Typeless_StringKey</td>
<td>193.95 ns</td>
<td>NA</td>
<td>2.31</td>
<td>0.0513</td>
<td>216 B</td>
</tr>
<tr>
<td>MsgPackCliMap</td>
<td>967.68 ns</td>
<td>NA</td>
<td>11.51</td>
<td>0.1297</td>
<td>552 B</td>
</tr>
<tr>
<td>MsgPackCliArray</td>
<td>284.20 ns</td>
<td>NA</td>
<td>3.38</td>
<td>0.1006</td>
<td>424 B</td>
</tr>
<tr>
<td>ProtobufNet</td>
<td>176.43 ns</td>
<td>NA</td>
<td>2.10</td>
<td>0.0665</td>
<td>280 B</td>
</tr>
<tr>
<td>Hyperion</td>
<td>280.14 ns</td>
<td>NA</td>
<td>3.33</td>
<td>0.1674</td>
<td>704 B</td>
</tr>
<tr>
<td>ZeroFormatter</td>
<td>149.95 ns</td>
<td>NA</td>
<td>1.78</td>
<td>0.1009</td>
<td>424 B</td>
</tr>
<tr>
<td>JsonNetString</td>
<td>1,432.55 ns</td>
<td>NA</td>
<td>17.03</td>
<td>0.4616</td>
<td>1944 B</td>
</tr>
<tr>
<td>JsonNetStreamWriter</td>
<td>1,775.72 ns</td>
<td>NA</td>
<td>21.11</td>
<td>1.5526</td>
<td>6522 B</td>
</tr>
<tr>
<td>JilString</td>
<td>547.51 ns</td>
<td>NA</td>
<td>6.51</td>
<td>0.3481</td>
<td>1464 B</td>
</tr>
<tr>
<td>JilStreamWriter</td>
<td>778.78 ns</td>
<td>NA</td>
<td>9.26</td>
<td>1.4448</td>
<td>6066 B</td>
</tr>
</tbody>
</table>
<p>Of course, IntKey is fastest but StringKey also good.</p>
<h6>
LZ4 Compression</h6>
<p>MessagePack is a fast and <em>compact</em> format but it is not compression. <a href="https://github.com/lz4/lz4">LZ4</a> is extremely fast compression algorithm, with MessagePack for C# can achive extremely fast perfrormance and extremely compact binary size!</p>
<p>MessagePack for C# has built-in LZ4 support. You can use <code>LZ4MessagePackSerializer</code> instead of <code>MessagePackSerializer</code>. Builtin support is special, I've created serialize-compression pipeline and special tuned for the pipeline so share the working memory, don't allocate, don't resize until finished.</p>
<p>Serialized binary is not simply compressed lz4 binary. Serialized binary is valid MessagePack binary used ext-format and custom typecode(99).</p>
<div><pre><span>var</span> <span>array</span><span>=</span> <span>Enumerable</span>.<span>Range</span>(<span>1</span>, <span>100</span>).<span>Select</span>(<span>x</span> <span>=&gt;</span> <span>new</span> <span>MyClass</span> { <span>Age</span> <span>=</span> <span>5</span>, <span>FirstName</span> <span>=</span> <span><span>"</span>foo<span>"</span></span>, <span>LastName</span> <span>=</span> <span><span>"</span>bar<span>"</span></span> }).<span>ToArray</span>();

<span><span>//</span> call LZ4MessagePackSerializer instead of MessagePackSerializer, api is completely same</span>
<span>var</span> <span>lz4Bytes</span> <span>=</span> <span>LZ4MessagePackSerializer</span>.<span>Serialize</span>(<span>array</span>);
<span>var</span> <span>mc2</span> <span>=</span> <span>LZ4MessagePackSerializer</span>.<span>Deserialize</span>&lt;<span>MyClass</span>[]&gt;(<span>lz4Bytes</span>);

<span><span>//</span> you can dump lz4 message pack</span>
<span><span>//</span> [[5,"hoge","huga"],[5,"hoge","huga"],....]</span>
<span>var</span> <span>json</span> <span>=</span> <span>LZ4MessagePackSerializer</span>.<span>ToJson</span>(<span>lz4Bytes</span>);
<span>Console</span>.<span>WriteLine</span>(<span>json</span>);

<span><span>//</span> lz4Bytes is valid MessagePack, it is using ext-format( [TypeCode:99, SourceLength|CompressedBinary] )</span>
<span><span>//</span> [99,"0gAAA+vf3ABkkwWjZm9vo2JhcgoA////yVBvo2Jhcg=="]</span>
<span>var</span> <span>rawJson</span> <span>=</span> <span>MessagePackSerializer</span>.<span>ToJson</span>(<span>lz4Bytes</span>);
<span>Console</span>.<span>WriteLine</span>(<span>rawJson</span>);</pre></div>
<p>built-in LZ4 support uses primitive LZ4 API. The LZ4 API is more efficient if you know the size of original source length. Therefore, size is written on the top.</p>
<blockquote>
<p>Compression speed is not always fast. Depending on the target binary, it may be short or longer. However, even at worst, it is about twice, but it is still often faster than other uncompressed serializers.</p>
</blockquote>
<p>If target binary size under 64 bytes, LZ4MessagePackSerializer does not compress to optimize small size serialization.</p>
<h6>
Compare with protobuf, JSON, ZeroFormatter</h6>
<p><a href="https://github.com/mgravell/protobuf-net">protbuf-net</a> is major, most used binary-format library on .NET. I love protobuf-net and respect that great work. But if uses protobuf-net for general-purpose serialization format, you may encounts annoying issue.</p>
<div><pre>[<span>ProtoContract</span>]
<span>public</span> <span>class</span> <span>Parent</span>
{
    [<span>ProtoMember</span>(<span>1</span>)]
    <span>public</span> <span>int</span> <span>Primitive</span> { <span>get</span>; <span>set</span>; }
    [<span>ProtoMember</span>(<span>2</span>)]
    <span>public</span> <span>Child</span> <span>Prop</span> { <span>get</span>; <span>set</span>; }
    [<span>ProtoMember</span>(<span>3</span>)]
    <span>public</span> <span>int</span>[] <span>Array</span> { <span>get</span>; <span>set</span>; }
}

[<span>ProtoContract</span>]
<span>public</span> <span>class</span> <span>Child</span>
{
    [<span>ProtoMember</span>(<span>1</span>)]
    <span>public</span> <span>int</span> <span>Number</span> { <span>get</span>; <span>set</span>; }
}

<span>using</span> (<span>var</span> <span>ms</span> <span>=</span> <span>new</span> <span>MemoryStream</span>())
{
    <span><span>//</span> serialize null.</span>
    <span>ProtoBuf</span>.<span>Serializer</span>.<span>Serialize</span>&lt;<span>Parent</span>&gt;(<span>ms</span>, <span>null</span>);

    <span>ms</span>.<span>Position</span> <span>=</span> <span>0</span>;
    <span>var</span> <span>result</span> <span>=</span> <span>ProtoBuf</span>.<span>Serializer</span>.<span>Deserialize</span>&lt;<span>Parent</span>&gt;(<span>ms</span>);

    <span>Console</span>.<span>WriteLine</span>(<span>result</span> <span>!=</span> <span>null</span>); <span><span>//</span> True, not null. but all property are zero formatted.</span>
    <span>Console</span>.<span>WriteLine</span>(<span>result</span>.<span>Primitive</span>); <span><span>//</span> 0</span>
    <span>Console</span>.<span>WriteLine</span>(<span>result</span>.<span>Prop</span>); <span><span>//</span> null</span>
    <span>Console</span>.<span>WriteLine</span>(<span>result</span>.<span>Array</span>); <span><span>//</span> null</span>
}

<span>using</span> (<span>var</span> <span>ms</span> <span>=</span> <span>new</span> <span>MemoryStream</span>())
{
    <span><span>//</span> serialize empty array.</span>
    <span>ProtoBuf</span>.<span>Serializer</span>.<span>Serialize</span>&lt;<span>Parent</span>&gt;(<span>ms</span>, <span>new</span> <span>Parent</span> { <span>Array</span> <span>=</span> <span>new</span> <span>int</span>[0] });

    <span>ms</span>.<span>Position</span> <span>=</span> <span>0</span>;
    <span>var</span> <span>result</span> <span>=</span> <span>ProtoBuf</span>.<span>Serializer</span>.<span>Deserialize</span>&lt;<span>Parent</span>&gt;(<span>ms</span>);

    <span>Console</span>.<span>WriteLine</span>(<span>result</span>.<span>Array</span> <span>==</span> <span>null</span>); <span><span>//</span> True, null!</span>
}</pre></div>
<p>protobuf(-net) can not handle null and empty collection correctly. Because protobuf has no <code>null</code> representation( <a href="https://stackoverflow.com/questions/21631428/protobuf-net-deserializes-empty-collection-to-null-when-the-collection-is-a-prop" rel="nofollow">this</a> is the protobuf-net authors answer).</p>
<p><a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a> can completely serialize C# type system. This is the reason to recommend MessagePack over protobuf.</p>
<p>Protocol Buffers has good IDL and <a href="http://www.grpc.io/" rel="nofollow">gRPC</a>, that is a much good point than MessagePack. If you want to use IDL, I recommend <a href="https://github.com/google/protobuf/tree/master/csharp/src/Google.Protobuf">Google.Protobuf</a> than MessagePack.</p>
<p>JSON is good general-purpose format. It is perfect, simple and enough spec. <a href="https://github.com/neuecc/Utf8Json">Utf8Json</a> which created me that adopts same architecture as MessagePack for C# and avoid encoding/decoing cost so work like binary. If you want to know about binary vs text, see <a href="https://github.com/neuecc/Utf8Json#which-serializer-should-be-used">Utf8Json/which serializer should be used</a> section.</p>
<p><a href="https://github.com/neuecc/ZeroFormatter/">ZeroFormatter</a> is similar as <a href="https://google.github.io/flatbuffers/" rel="nofollow">FlatBuffers</a> but specialized to C#. It is special. Deserialization is infinitely fast but instead the binary size is large. And ZeroFormatter's caching algorithm requires additional memory.</p>
<p>Again, ZeroFormatter is special. When situation matches with ZeroFormatter, it demonstrates power of format. But for many common uses, MessagePack for C# would be better.</p>
<h6>
Extensions</h6>
<p>MessagePack for C# has extension point and you can add external type's serialization support. There are official extension support.</p>
<pre><code><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>ImmutableCollection</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>ReactiveProperty</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>UnityShims</span><span>
</span><span>Install</span><span>-</span><span>Package</span><span> </span><span>MessagePack</span><span>.</span><span>AspNetCoreMvcFormatter</span></code></pre>
<p><code>MessagePack.ImmutableCollection</code> package add support for <a href="https://www.nuget.org/packages/System.Collections.Immutable/" rel="nofollow">System.Collections.Immutable</a> library. It adds <code>ImmutableArray&lt;&gt;</code>, <code>ImmutableList&lt;&gt;</code>, <code>ImmutableDictionary&lt;,&gt;</code>, <code>ImmutableHashSet&lt;&gt;</code>, <code>ImmutableSortedDictionary&lt;,&gt;</code>, <code>ImmutableSortedSet&lt;&gt;</code>, <code>ImmutableQueue&lt;&gt;</code>, <code>ImmutableStack&lt;&gt;</code>, <code>IImmutableList&lt;&gt;</code>, <code>IImmutableDictionary&lt;,&gt;</code>, <code>IImmutableQueue&lt;&gt;</code>, <code>IImmutableSet&lt;&gt;</code>, <code>IImmutableStack&lt;&gt;</code> serialization support.</p>
<p><code>MessagePack.ReactiveProperty</code> package add support for <a href="https://github.com/runceel/ReactiveProperty">ReactiveProperty</a> library. It adds <code>ReactiveProperty&lt;&gt;</code>, <code>IReactiveProperty&lt;&gt;</code>, <code>IReadOnlyReactiveProperty&lt;&gt;</code>, <code>ReactiveCollection&lt;&gt;</code>, <code>Unit</code> serialization support. It is useful for save viewmodel state.</p>
<p><code>MessagePack.UnityShims</code> package provides shim of <a href="https://unity3d.com/" rel="nofollow">Unity</a>'s standard struct(<code>Vector2</code>, <code>Vector3</code>, <code>Vector4</code>, <code>Quaternion</code>, <code>Color</code>, <code>Bounds</code>, <code>Rect</code>, <code>AnimationCurve</code>, <code>Keyframe</code>, <code>Matrix4x4</code>, <code>Gradient</code>, <code>Color32</code>, <code>RectOffset</code>, <code>LayerMask</code>, <code>Vector2Int</code>, <code>Vector3Int</code>, <code>RangeInt</code>, <code>RectInt</code>, <code>BoundsInt</code>) and there formatter. It can enable to commnicate between server and Unity client.</p>
<p>After install, extension package must enable by configuration. Here is sample of enable all extension.</p>
<div><pre><span><span>//</span> set extensions to default resolver.</span>
<span>MessagePack</span>.<span>Resolvers</span>.<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span><span>//</span> enable extension packages first</span>
    <span>ImmutableCollectionResolver</span>.<span>Instance</span>,
    <span>ReactivePropertyResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Unity</span>.<span>Extension</span>.<span>UnityBlitResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Unity</span>.<span>UnityResolver</span>.<span>Instance</span>,

    <span><span>//</span> finaly use standard(default) resolver</span>
    <span>StandardResolver</span>.<span>Instance</span>);
);</pre></div>
<p>Configuration details, see:<a href="https://github.com/neuecc/MessagePack-CSharp#extension-pointiformatterresolver">Extension Point section</a>.</p>
<p><code>MessagePack.AspNetCoreMvcFormatter</code> is add-on of <a href="https://github.com/aspnet/Mvc">ASP.NET Core MVC</a>'s serialization to boostup performance. This is configuration sample.</p>
<div><pre><span>public</span> <span>void</span> <span>ConfigureServices</span>(<span>IServiceCollection</span> <span>services</span>)
{
    <span>services</span>.<span>AddMvc</span>().<span>AddMvcOptions</span>(<span>option</span> <span>=&gt;</span>
    {
        <span>option</span>.<span>OutputFormatters</span>.<span>Clear</span>();
        <span>option</span>.<span>OutputFormatters</span>.<span>Add</span>(<span>new</span> <span>MessagePackOutputFormatter</span>(<span>ContractlessStandardResolver</span>.<span>Instance</span>));
        <span>option</span>.<span>InputFormatters</span>.<span>Clear</span>();
        <span>option</span>.<span>InputFormatters</span>.<span>Add</span>(<span>new</span> <span>MessagePackInputFormatter</span>(<span>ContractlessStandardResolver</span>.<span>Instance</span>));
    });
}</pre></div>
<p>Author is creating other extension packages, too.</p>
<ul>
<li>
<a href="https://github.com/neuecc/MasterMemory">MasterMemory</a> - Embedded Readonly In-Memory Document Database</li>
<li>
<a href="https://github.com/neuecc/MagicOnion">MagicOnion</a> - gRPC based HTTP/2 RPC Streaming Framework</li>
<li>
<a href="https://github.com/neuecc/DatadogSharp">DatadogSharp</a> - C# Datadog client</li>
</ul>
<p>You can make your own extension serializers or integrate with framework, let's create them and share it!</p>
<ul>
<li>
<a href="https://github.com/pocketberserker/MessagePack.FSharpExtensions">MessagePack.FSharpExtensions</a> - supports F# list,set,map,unit,option,discriminated union</li>
<li>
<a href="https://github.com/ARKlab/MessagePack">MessagePack.NodaTime</a> -
Support for NodaTime types to MessagePack C#</li>
<li>
<a href="https://github.com/WebApiContrib/WebAPIContrib.Core#formatters">WebApiContrib.Core.Formatter.MessagePack</a> - supports ASP.NET Core MVC(<a href="https://www.strathweb.com/2017/06/using-messagepack-with-asp-net-core-mvc/" rel="nofollow">details in blog post</a>)</li>
<li>
<a href="https://github.com/sketch7/MessagePack.MediaTypeFormatter">MessagePack.MediaTypeFormatter</a> - MessagePack MediaTypeFormatter</li>
</ul>
<h6>
High-Level API(MessagePackSerializer)</h6>
<p><code>MessagePackSerializer</code> is the entry point of MessagePack for C#. Its static methods are main API of MessagePack for C#.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DefaultResolver</code></td>
<td>FormatterResolver that used resolver less overloads. If does not set it, used StandardResolver.</td>
</tr>
<tr>
<td><code>SetDefaultResolver</code></td>
<td>Set default resolver of MessagePackSerializer APIs.</td>
</tr>
<tr>
<td><code>Serialize&lt;T&gt;</code></td>
<td>Convert object to byte[] or write to stream. There has IFormatterResolver overload, used specified resolver.</td>
</tr>
<tr>
<td><code>SerializeUnsafe&lt;T&gt;</code></td>
<td>Same as <code>Serialize&lt;T&gt;</code> but return <code>ArraySegement&lt;byte&gt;</code>. The result of ArraySegment is contains internal buffer pool, it can not share across thread and can not hold, so use quickly.</td>
</tr>
<tr>
<td><code>Deserialize&lt;T&gt;</code></td>
<td>Convert byte[] or <code>ArraySegment&lt;byte&gt;</code> or stream to object. There has IFormatterResolver overload, used specified resolver.</td>
</tr>
<tr>
<td><code>NonGeneric.*</code></td>
<td>NonGeneric APIs of Serialize/Deserialize. There accept type parameter at first argument. This API is bit slower than generic API but useful for framework integration such as ASP.NET formatter.</td>
</tr>
<tr>
<td><code>Typeless.*</code></td>
<td>Typeless APIs of Serialize/Deserialize. This API no needs type parameter like BinaryFormatter. This API makes .NET specific binary and bit slower than standard APIs.</td>
</tr>
<tr>
<td><code>ToJson</code></td>
<td>Dump message-pack binary to JSON string. It is useful for debugging.</td>
</tr>
<tr>
<td><code>FromJson</code></td>
<td>From Json string to MessagePack binary.</td>
</tr>
<tr>
<td><code>ToLZ4Binary</code></td>
<td>(LZ4 only)Convert msgpack binary to LZ4 msgpack binary.</td>
</tr>
<tr>
<td><code>Decode</code></td>
<td>(LZ4 only)Convert LZ4 msgpack binary to standard msgpack binary.</td>
</tr>
</tbody>
</table>
<p>MessagePack for C# operates at the byte[] level, so byte[] API is faster than Stream API. If byte [] can be used for I/O, I recommend using the byte [] API.</p>
<p><code>Deserialize&lt;T&gt;(Stream)</code> has <code>bool readStrict</code> overload. It means read byte[] from stream strictly size. The default is false, it reads all stream data, it is faster than <code>readStrict</code> but if the data is contiguous, you can use readStrict = true.</p>
<p>High-Level API uses memory pool internaly to avoid unnecessary memory allocation. If result size is under 64K, allocates GC memory only for the return bytes.</p>
<p><code>LZ4MessagePackSerializer</code> has same api with <code>MessagePackSerializer</code> and <code>DefaultResolver</code> is shared. <code>LZ4MessagePackSerializer</code> has additional <code>SerializeToBlock</code> method.</p>
<h6>
Low-Level API(IMessagePackFormatter)</h6>
<p>IMessagePackFormatter is serializer by each type. For example <code>Int32Formatter : IMessagePackFormatter&lt;Int32&gt;</code> represents Int32 MessagePack serializer.</p>
<div><pre><span>public</span> <span>interface</span> <span>IMessagePackFormatter</span>&lt;<span>T</span>&gt;
{
    <span>int</span> <span>Serialize</span>(<span>ref</span> <span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>T</span> <span>value</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>);
    <span>T</span> <span>Deserialize</span>(<span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>, <span>out</span> <span>int</span> <span>readSize</span>);
}</pre></div>
<p>All api works on byte[] level, no use Stream, no use Writer/Reader so improve performance. Many builtin formatters exists under <code>MessagePack.Formatters</code>. You can get sub type serializer by <code>formatterResolver.GetFormatter&lt;T&gt;</code>. Here is sample of write own formatter.</p>
<div><pre><span><span>//</span> serialize fileinfo as string fullpath.</span>
<span>public</span> <span>class</span> <span>FileInfoFormatter</span>&lt;<span>T</span>&gt; : <span>IMessagePackFormatter</span>&lt;<span>FileInfo</span>&gt;
{
    <span>public</span> <span>int</span> <span>Serialize</span>(<span>ref</span> <span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>FileInfo</span> <span>value</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>)
    {
        <span>if</span> (<span>value</span> <span>==</span> <span>null</span>)
        {
            <span>return</span> <span>MessagePackBinary</span>.<span>WriteNil</span>(<span>ref</span> <span>bytes</span>, <span>offset</span>);
        }

        <span>return</span> <span>MessagePackBinary</span>.<span>WriteString</span>(<span>ref</span> <span>bytes</span>, <span>offset</span>, <span>value</span>.<span>FullName</span>);
    }

    <span>public</span> <span>FileInfo</span> <span>Deserialize</span>(<span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>, <span>out</span> <span>int</span> <span>readSize</span>)
    {
        <span>if</span> (<span>MessagePackBinary</span>.<span>IsNil</span>(<span>bytes</span>, <span>offset</span>))
        {
            <span>readSize</span> <span>=</span> <span>1</span>;
            <span>return</span> <span>null</span>;
        }

        <span>var</span> <span>path</span> <span>=</span> <span>MessagePackBinary</span>.<span>ReadString</span>(<span>bytes</span>, <span>offset</span>, <span>out</span> <span>readSize</span>);
        <span>return</span> <span>new</span> <span>FileInfo</span>(<span>path</span>);
    }
}</pre></div>
<p>Created formatter needs to register to <code>IFormatterResolver</code>. Please see <a href="https://github.com/neuecc/MessagePack-CSharp#extension-pointiformatterresolver">Extension Point section</a>.</p>
<p>You can see many other samples from <a href="https://github.com/neuecc/MessagePack-CSharp/tree/master/src/MessagePack/Formatters">builtin formatters</a>.</p>
<h6>
Primitive API(MessagePackBinary)</h6>
<p><code>MessagePackBinary</code> is most low-level API like <code>Reader/Writer</code> of other serializers. <code>MessagePackBinary</code> is static class because avoid create <code>Reader/Writer</code> allocation.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ReadNext</td>
<td>Skip MessagePackFormat binary block, returns read size.</td>
</tr>
<tr>
<td>ReadNextBlock</td>
<td>Skip MessagePackFormat binary block with sub structures(array/map), returns read size. This is useful for create deserializer.</td>
</tr>
<tr>
<td>ReadMessageBlockFromStreamUnsafe</td>
<td>Read binary block from Stream, if readOnlySingleMessage = false then read sub structures(array/map).</td>
</tr>
<tr>
<td>ReadStringSegment</td>
<td>Read string format but do not decode UTF8, returns <code>ArraySegment&lt;byte&gt;</code>.</td>
</tr>
<tr>
<td>ReadBytesSegment</td>
<td>Read binary format but do not copy bytes, returns <code>ArraySegment&lt;byte&gt;</code>.</td>
</tr>
<tr>
<td>Write/ReadMapHeader</td>
<td>Write/Read map format header(element length).</td>
</tr>
<tr>
<td>WriteMapHeaderForceMap32Block</td>
<td>Write map format header, always use map32 format(length is fixed, 5).</td>
</tr>
<tr>
<td>Write/ReadArrayHeader</td>
<td>Write/Read array format header(element length).</td>
</tr>
<tr>
<td>WriteArrayHeaderForceArray32Block</td>
<td>Write array format header, always use array32 format(length is fixed, 5).</td>
</tr>
<tr>
<td>Write/Read***</td>
<td>*** is primitive type name(<code>Int32</code>, <code>Single</code>, <code>String</code>, etc...)</td>
</tr>
<tr>
<td>Write***Force***Block</td>
<td>*** is primitive integer name(<code>Byte</code>, <code>Int32</code>, <code>UInt64</code>, etc...), acquire strict block and write code</td>
</tr>
<tr>
<td>Write/ReadBytes</td>
<td>Write/Read byte[] to use bin format.</td>
</tr>
<tr>
<td>Write/ReadExtensionFormat</td>
<td>Write/Read ext format header(Length + TypeCode) and content byte[].</td>
</tr>
<tr>
<td>Write/ReadExtensionFormatHeader</td>
<td>Write/Read ext format, header(Length + TypeCode) only.</td>
</tr>
<tr>
<td>WriteExtensionFormatHeaderForceExt32Block</td>
<td>Write ext format header, always use ext32 format(length is fixed, 6).</td>
</tr>
<tr>
<td>WriteRaw</td>
<td>Write msgpack block directly.</td>
</tr>
<tr>
<td>IsNil</td>
<td>Is TypeCode Nil?</td>
</tr>
<tr>
<td>GetMessagePackType</td>
<td>Return MessagePackType of target MessagePack bianary position.</td>
</tr>
<tr>
<td>GetExtensionFormatHeaderLength</td>
<td>Calculate extension formatter header length.</td>
</tr>
<tr>
<td>GetEncodedStringBytes</td>
<td>Get msgpack packed raw binary.</td>
</tr>
<tr>
<td>EnsureCapacity</td>
<td>Resize if byte can not fill.</td>
</tr>
<tr>
<td>FastResize</td>
<td>Buffer.BlockCopy version of Array.Resize.</td>
</tr>
<tr>
<td>FastCloneWithResize</td>
<td>Same as FastResize but return copied byte[].</td>
</tr>
</tbody>
</table>
<p>Read API returns deserialized primitive and read size. Write API returns write size and guranteed auto ensure ref byte[]. Write/Read API has <code>byte[]</code> overload and <code>Stream</code> overload, basically the byte[] API is faster.</p>
<p>DateTime is serialized to <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#formats-timestamp">MessagePack Timestamp format</a>, it serialize/deserialize UTC and loses <code>Kind</code> info. If you use<code>NativeDateTimeResolver</code> serialized native DateTime binary format and it can keep <code>Kind</code> info but cannot communicate other platforms.</p>
<p><code>MessagePackType</code> means <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#serialization-type-to-format-conversion">msgpack spec of source types</a>.</p>
<p><code>MessagePackCode</code> means <a href="https://github.com/msgpack/msgpack/blob/master/spec.md#overview">msgpack format of first byte</a>. Its static class has <code>ToMessagePackType</code> and <code>ToFormatName</code> utility methods.</p>
<p><code>MessagePackRange</code> means Min-Max fix range of msgpack format.</p>
<h6>
Extension Point(IFormatterResolver)</h6>
<p><code>IFormatterResolver</code> is storage of typed serializers. Serializer api accepts resolver and can customize serialization.</p>
<table>
<thead>
<tr>
<th>Resovler Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BuiltinResolver</td>
<td>Builtin primitive and standard classes resolver. It includes primitive(int, bool, string...) and there nullable, array and list. and some extra builtin types(Guid, Uri, BigInteger, etc...).</td>
</tr>
<tr>
<td>StandardResolver</td>
<td>Composited resolver. It resolves in the following order <code>builtin -&gt; attribute -&gt; dynamic enum -&gt; dynamic generic -&gt; dynamic union -&gt; dynamic object -&gt; dynamic object fallback</code>. This is the default of MessagePackSerializer.</td>
</tr>
<tr>
<td>ContractlessStandardResolver</td>
<td>Composited <code>StandardResolver</code>(except dynamic object fallback) -&gt; <code>DynamicContractlessObjectResolver</code> -&gt; <code>DynamicObjectTypeFallbackResolver</code>. It enables contractless serialization.</td>
</tr>
<tr>
<td>StandardResolverAllowPrivate</td>
<td>Same as StandardResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>ContractlessStandardResolverAllowPrivate</td>
<td>Same as ContractlessStandardResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>PrimitiveObjectResolver</td>
<td>MessagePack primitive object resolver. It is used fallback in <code>object</code> type and supports <code>bool</code>, <code>char</code>, <code>sbyte</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>ushort</code>, <code>uint</code>, <code>ulong</code>, <code>float</code>, <code>double</code>, <code>DateTime</code>, <code>string</code>, <code>byte[]</code>, <code>ICollection</code>, <code>IDictionary</code>.</td>
</tr>
<tr>
<td>DynamicObjectTypeFallbackResolver</td>
<td>Serialize is used type in from <code>object</code> type, deserialize is used PrimitiveObjectResolver.</td>
</tr>
<tr>
<td>AttributeFormatterResolver</td>
<td>Get formatter from <code>[MessagePackFormatter]</code> attribute.</td>
</tr>
<tr>
<td>CompositeResolver</td>
<td>Singleton helper of setup custom resolvers. You can use <code>Register</code> or <code>RegisterAndSetAsDefault</code> API.</td>
</tr>
<tr>
<td>NativeDateTimeResolver</td>
<td>Serialize by .NET native DateTime binary format.</td>
</tr>
<tr>
<td>UnsafeBinaryResolver</td>
<td>Guid and Decimal serialize by binary representation. It is faster than standard(string) representation.</td>
</tr>
<tr>
<td>OldSpecResolver</td>
<td>str and bin serialize/deserialize follows old messagepack spec(use raw format)</td>
</tr>
<tr>
<td>DynamicEnumResolver</td>
<td>Resolver of enum and there nullable, serialize there underlying type. It uses dynamic code generation to avoid boxing and boostup performance serialize there name.</td>
</tr>
<tr>
<td>DynamicEnumAsStringResolver</td>
<td>Resolver of enum and there nullable.  It uses reflection call for resolve nullable at first time.</td>
</tr>
<tr>
<td>DynamicGenericResolver</td>
<td>Resolver of generic type(<code>Tuple&lt;&gt;</code>, <code>List&lt;&gt;</code>, <code>Dictionary&lt;,&gt;</code>, <code>Array</code>, etc). It uses reflection call for resolve generic argument at first time.</td>
</tr>
<tr>
<td>DynamicUnionResolver</td>
<td>Resolver of interface marked by UnionAttribute. It uses dynamic code generation to create dynamic formatter.</td>
</tr>
<tr>
<td>DynamicObjectResolver</td>
<td>Resolver of class and struct maked by MessagePackObjectAttribute. It uses dynamic code generation to create dynamic formatter.</td>
</tr>
<tr>
<td>DynamicContractlessObjectResolver</td>
<td>Resolver of all classes and structs. It does not needs MessagePackObjectAttribute and serialized key as string(same as marked [MessagePackObject(true)]).</td>
</tr>
<tr>
<td>DynamicObjectResolverAllowPrivate</td>
<td>Same as DynamicObjectResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>DynamicContractlessObjectResolverAllowPrivate</td>
<td>Same as DynamicContractlessObjectResolver but allow serialize/deserialize private members.</td>
</tr>
<tr>
<td>TypelessObjectResolver</td>
<td>Used for <code>object</code>, embed .NET type in binary by <code>ext(100)</code> format so no need to pass type in deserilization.</td>
</tr>
<tr>
<td>TypelessContractlessStandardResolver</td>
<td>Composited resolver. It resolves in the following order <code>nativedatetime -&gt; builtin -&gt; attribute -&gt; dynamic enum -&gt; dynamic generic -&gt; dynamic union -&gt; dynamic object -&gt; dynamiccontractless -&gt; typeless</code>. This is the default of <code>MessagePackSerializer.Typeless</code>
</td>
</tr>
</tbody>
</table>
<p>It is the only configuration point to assemble the resolver's priority. In most cases, it is sufficient to have one custom resolver globally. CompositeResolver will be its helper.</p>
<div><pre><span><span>//</span> use global-singleton CompositeResolver.</span>
<span><span>//</span> This method initialize CompositeResolver and set to default MessagePackSerializer</span>
<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span><span>//</span> resolver custom types first</span>
    <span>ImmutableCollectionResolver</span>.<span>Instance</span>,
    <span>ReactivePropertyResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Unity</span>.<span>Extension</span>.<span>UnityBlitResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Unity</span>.<span>UnityResolver</span>.<span>Instance</span>,

    <span><span>//</span> finaly use standard resolver</span>
    <span>StandardResolver</span>.<span>Instance</span>);</pre></div>
<p>Here is sample of use DynamicEnumAsStringResolver with DynamicContractlessObjectResolver(It is JSON.NET-like lightweight setting.)</p>
<div><pre><span><span>//</span> composite same as StandardResolver</span>
<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span>MessagePack</span>.<span>Resolvers</span>.<span>BuiltinResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Resolvers</span>.<span>AttributeFormatterResolver</span>.<span>Instance</span>,

    <span><span>//</span> replace enum resolver</span>
    <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicEnumAsStringResolver</span>.<span>Instance</span>,

    <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicGenericResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicUnionResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicObjectResolver</span>.<span>Instance</span>,

    <span>MessagePack</span>.<span>Resolvers</span>.<span>PrimitiveObjectResolver</span>.<span>Instance</span>,

    <span><span>//</span> final fallback(last priority)</span>
    <span>MessagePack</span>.<span>Resolvers</span>.<span>DynamicContractlessObjectResolver</span>.<span>Instance</span>
);</pre></div>
<p>If you want to write custom composite resolver, you can write like following.</p>
<div><pre><span>public</span> <span>class</span> <span>CustomCompositeResolver</span> : <span>IFormatterResolver</span>
{
    <span>public</span> <span>static</span> <span>IFormatterResolver</span> <span>Instance</span> <span>=</span> <span>new</span> <span>CustomCompositeResolver</span>();

    <span>static</span> <span>readonly</span> <span>IFormatterResolver</span>[] <span>resolvers</span> <span>=</span> <span>new</span>[]
    {
        <span><span>//</span> resolver custom types first</span>
        <span>ImmutableCollectionResolver</span>.<span>Instance</span>,
        <span>ReactivePropertyResolver</span>.<span>Instance</span>,
        <span>MessagePack</span>.<span>Unity</span>.<span>Extension</span>.<span>UnityBlitResolver</span>.<span>Instance</span>,
        <span>MessagePack</span>.<span>Unity</span>.<span>UnityResolver</span>.<span>Instance</span>,

        <span><span>//</span> finaly use standard resolver</span>
        <span>StandardResolver</span>.<span>Instance</span>
    };

    <span>CustomCompositeResolver</span>()
    {
    }

    <span>public</span> <span>IMessagePackFormatter</span>&lt;<span>T</span>&gt; <span>GetFormatter</span>&lt;<span>T</span>&gt;()
    {
        <span>return</span> <span>FormatterCache</span>&lt;<span>T</span>&gt;.<span>formatter</span>;
    }

    <span>static</span> <span>class</span> <span>FormatterCache</span>&lt;<span>T</span>&gt;
    {
        <span>public</span> <span>static</span> <span>readonly</span> <span>IMessagePackFormatter</span>&lt;<span>T</span>&gt; <span>formatter</span>;

        <span>static</span> <span>FormatterCache</span>()
        {
            <span>foreach</span> (<span>var</span> <span>item</span> <span>in</span> <span>resolvers</span>)
            {
                <span>var</span> <span>f</span> <span>=</span> <span>item</span>.<span>GetFormatter</span>&lt;<span>T</span>&gt;();
                <span>if</span> (<span>f</span> <span>!=</span> <span>null</span>)
                {
                    <span>formatter</span> <span>=</span> <span>f</span>;
                    <span>return</span>;
                }
            }
        }
    }
}</pre></div>
<p><code>IFormatterResolver</code> can use per serialize/deserialize method.</p>
<div><pre><span>MessagePackSerializer</span>.<span>Serialize</span>(<span>data</span>, <span>CustomCompositeResolver</span>.<span>Instance</span>);</pre></div>
<p>If you want to make your extension package, you need to make formatter and resolver. <code>IMessagePackFormatter</code> accepts <code>IFormatterResolver</code> on every request of serialize/deserialize. You can get child-type serialize on resolver.<code>GetFormatterWithVerify&lt;T&gt;</code>.</p>
<p>Here is sample of own resolver.</p>
<div><pre><span>public</span> <span>class</span> <span>SampleCustomResolver</span> : <span>IFormatterResolver</span>
{
    <span><span>//</span> Resolver should be singleton.</span>
    <span>public</span> <span>static</span> <span>IFormatterResolver</span> <span>Instance</span> <span>=</span> <span>new</span> <span>SampleCustomResolver</span>();

    <span>SampleCustomResolver</span>()
    {
    }

    <span><span>//</span> GetFormatter&lt;T&gt;'s get cost should be minimized so use type cache.</span>
    <span>public</span> <span>IMessagePackFormatter</span>&lt;<span>T</span>&gt; <span>GetFormatter</span>&lt;<span>T</span>&gt;()
    {
        <span>return</span> <span>FormatterCache</span>&lt;<span>T</span>&gt;.<span>formatter</span>;
    }

    <span>static</span> <span>class</span> <span>FormatterCache</span>&lt;<span>T</span>&gt;
    {
        <span>public</span> <span>static</span> <span>readonly</span> <span>IMessagePackFormatter</span>&lt;<span>T</span>&gt; <span>formatter</span>;

        <span><span>//</span> generic's static constructor should be minimized for reduce type generation size!</span>
        <span><span>//</span> use outer helper method.</span>
        <span>static</span> <span>FormatterCache</span>()
        {
            <span>formatter</span> <span>=</span> (<span>IMessagePackFormatter</span>&lt;<span>T</span>&gt;)<span>SampleCustomResolverGetFormatterHelper</span>.<span>GetFormatter</span>(<span>typeof</span>(<span>T</span>));
        }
    }
}

<span>internal</span> <span>static</span> <span>class</span> <span>SampleCustomResolverGetFormatterHelper</span>
{
    <span><span>//</span> If type is concrete type, use type-formatter map</span>
    <span>static</span> <span>readonly</span> <span>Dictionary</span>&lt;<span>Type</span>, <span>object</span>&gt; <span>formatterMap</span> <span>=</span> <span>new</span> <span>Dictionary</span>&lt;<span>Type</span>, <span>object</span>&gt;()
    {
        {<span>typeof</span>(<span>FileInfo</span>), <span>new</span> <span>FileInfoFormatter</span>()}
        <span><span>//</span> add more your own custom serializers.</span>
    };

    <span>internal</span> <span>static</span> <span>object</span> <span>GetFormatter</span>(<span>Type</span> <span>t</span>)
    {
        <span>object</span> <span>formatter</span>;
        <span>if</span> (<span>formatterMap</span>.<span>TryGetValue</span>(<span>t</span>, <span>out</span> <span>formatter</span>))
        {
            <span>return</span> <span>formatter</span>;
        }

        <span><span>//</span> If target type is generics, use MakeGenericType.</span>
        <span>if</span> (<span>t</span>.<span>IsGenericParameter</span> <span>&amp;&amp;</span> <span>t</span>.<span>GetGenericTypeDefinition</span>() <span>==</span> <span>typeof</span>(<span>ValueTuple</span>&lt;,&gt;))
        {
            <span>return</span> <span>Activator</span>.<span>CreateInstance</span>(<span>typeof</span>(<span>ValueTupleFormatter</span>&lt;,&gt;).<span>MakeGenericType</span>(<span>t</span>.<span>GenericTypeArguments</span>));
        }

        <span><span>//</span> If type can not get, must return null for fallback mecanism.</span>
        <span>return</span> <span>null</span>;
    }
}</pre></div>
<h6>
MessagePackFormatterAttribute</h6>
<p>MessagePackFormatterAttribute is lightweight extension point of class, struct, interface, enum and property/field. This is like JSON.NET's JsonConverterAttribute. For example, serialize private field, serialize x10 formatter.</p>
<div><pre>[<span>MessagePackFormatter</span>(<span>typeof</span>(<span>CustomObjectFormatter</span>))]
<span>public</span> <span>class</span> <span>CustomObject</span>
{
    <span>string</span> <span>internalId</span>;

    <span>public</span> <span>CustomObject</span>()
    {
        <span>this</span>.<span>internalId</span> <span>=</span> <span>Guid</span>.<span>NewGuid</span>().<span>ToString</span>();
    }

    <span><span>//</span> serialize/deserialize internal field.</span>
    <span>class</span> <span>CustomObjectFormatter</span> : <span>IMessagePackFormatter</span>&lt;<span>CustomObject</span>&gt;
    {
        <span>public</span> <span>int</span> <span>Serialize</span>(<span>ref</span> <span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>CustomObject</span> <span>value</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>)
        {
            <span>return</span> <span>formatterResolver</span>.<span>GetFormatterWithVerify</span>&lt;<span>string</span>&gt;().<span>Serialize</span>(<span>ref</span> <span>bytes</span>, <span>offset</span>, <span>value</span>.<span>internalId</span>, <span>formatterResolver</span>);
        }

        <span>public</span> <span>CustomObject</span> <span>Deserialize</span>(<span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>, <span>out</span> <span>int</span> <span>readSize</span>)
        {
            <span>var</span> <span>id</span> <span>=</span> <span>formatterResolver</span>.<span>GetFormatterWithVerify</span>&lt;<span>string</span>&gt;().<span>Deserialize</span>(<span>bytes</span>, <span>offset</span>, <span>formatterResolver</span>, <span>out</span> <span>readSize</span>);
            <span>return</span> <span>new</span> <span>CustomObject</span> { <span>internalId</span> <span>=</span> <span>id</span> };
        }
    }
}

<span><span>//</span> per field, member</span>

<span>public</span> <span>class</span> <span>Int_x10Formatter</span> : <span>IMessagePackFormatter</span>&lt;<span>int</span>&gt;
{
    <span>public</span> <span>int</span> <span>Deserialize</span>(<span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>, <span>out</span> <span>int</span> <span>readSize</span>)
    {
        <span>return</span> <span>MessagePackBinary</span>.<span>ReadInt32</span>(<span>bytes</span>, <span>offset</span>, <span>out</span> <span>readSize</span>) <span>*</span> <span>10</span>;
    }

    <span>public</span> <span>int</span> <span>Serialize</span>(<span>ref</span> <span>byte</span>[] <span>bytes</span>, <span>int</span> <span>offset</span>, <span>int</span> <span>value</span>, <span>IFormatterResolver</span> <span>formatterResolver</span>)
    {
        <span>return</span> <span>MessagePackBinary</span>.<span>WriteInt32</span>(<span>ref</span> <span>bytes</span>, <span>offset</span>, <span>value</span> <span>*</span> <span>10</span>);
    }
}

[<span>MessagePackObject</span>]
<span>public</span> <span>class</span> <span>MyClass</span>
{
    <span><span>//</span> You can attach custom formatter per member.</span>
    [<span>Key</span>(<span>0</span>)]
    [<span>MessagePackFormatter</span>(<span>typeof</span>(<span>Int_x10Formatter</span>))]
    <span>public</span> <span>int</span> <span>MyProperty1</span> { <span>get</span>; <span>set</span>; }
}</pre></div>
<p>Formatter is retrieved by <code>AttributeFormatterResolver</code>, it is included in <code>StandardResolver</code>.</p>
<h6>
IgnoreFormatter</h6>
<p><code>IgnoreFormatter&lt;T&gt;</code> is lightweight extension point of class and struct, if exists can't serializable type in external type, you can register <code>IgnoreFormatter&lt;T&gt;</code> that serialize to nil.</p>
<div><pre><span><span>//</span> CompositeResolver can set custom formatter.</span>
<span>MessagePack</span>.<span>Resolvers</span>.<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span>new</span> <span>IMessagePackFormatter</span>[]
    {
        <span><span>//</span> for example, register reflection infos(can not serialize in default)</span>
        <span>new</span> <span>IgnoreFormatter</span>&lt;<span>MethodBase</span>&gt;(),
        <span>new</span> <span>IgnoreFormatter</span>&lt;<span>MethodInfo</span>&gt;(),
        <span>new</span> <span>IgnoreFormatter</span>&lt;<span>PropertyInfo</span>&gt;(),
        <span>new</span> <span>IgnoreFormatter</span>&lt;<span>FieldInfo</span>&gt;()
    },
    <span>new</span> <span>IFormatterResolver</span>[]
    {
        <span>ContractlessStandardResolver</span>.<span>Instance</span>
    });</pre></div>
<h6>
Reserved Extension Types</h6>
<p>MessagePack for C# already used some messagepack ext type codes, be careful to use same ext code.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Type</th>
<th>Use by</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1</td>
<td>DateTime</td>
<td>msgpack-spec reserved for timestamp</td>
</tr>
<tr>
<td>30</td>
<td>Vector2[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>31</td>
<td>Vector3[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>32</td>
<td>Vector4[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>33</td>
<td>Quaternion[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>34</td>
<td>Color[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>35</td>
<td>Bounds[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>36</td>
<td>Rect[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>37</td>
<td>Int[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>38</td>
<td>Float[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>39</td>
<td>Double[]</td>
<td>for Unity, UnsafeBlitFormatter</td>
</tr>
<tr>
<td>99</td>
<td>All</td>
<td>LZ4MessagePackSerializer</td>
</tr>
<tr>
<td>100</td>
<td>object</td>
<td>TypelessFormatter</td>
</tr>
</tbody>
</table>
<h6>
for Unity</h6>
<p>You can install by package and includes source code. If build target as PC, you can use as is but if build target uses IL2CPP, you can not use <code>Dynamic***Resolver</code> so use pre-code generation. Please see <a href="https://github.com/neuecc/MessagePack-CSharp#pre-code-generationunityxamarin-supports">pre-code generation section</a>.</p>
<p>In Unity, MessagePackSerializer can serialize <code>Vector2</code>, <code>Vector3</code>, <code>Vector4</code>, <code>Quaternion</code>, <code>Color</code>, <code>Bounds</code>, <code>Rect</code>, <code>AnimationCurve</code>, <code>Keyframe</code>, <code>Matrix4x4</code>, <code>Gradient</code>, <code>Color32</code>, <code>RectOffset</code>, <code>LayerMask</code>, <code>Vector2Int</code>, <code>Vector3Int</code>, <code>RangeInt</code>, <code>RectInt</code>, <code>BoundsInt</code> and there nullable, there array, there list by built-in extension <code>UnityResolver</code>. It is included StandardResolver by default.</p>
<p>MessagePack for C# has additional unsafe extension.  <code>UnsafeBlitResolver</code> is special resolver for extremely fast unsafe serialization/deserialization for struct array.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837633/76589924-07ce-11e7-8b26-e50eab548938.png"><img src="https://cloud.githubusercontent.com/assets/46207/23837633/76589924-07ce-11e7-8b26-e50eab548938.png" alt="image"></a></p>
<p>x20 faster Vector3[] serialization than native JsonUtility. If use <code>UnsafeBlitResolver</code>, serialize special format(ext:typecode 30~39)  <code>Vector2[]</code>, <code>Vector3[]</code>, <code>Quaternion[]</code>, <code>Color[]</code>, <code>Bounds[]</code>, <code>Rect[]</code>. If use <code>UnityBlitWithPrimitiveArrayResolver</code>, supports <code>int[]</code>, <code>float[]</code>, <code>double[]</code> too. This special feature is useful for serialize Mesh(many Vector3[]) or many transform position.</p>
<p>If you want to use unsafe resolver, you must enables unsafe option and define additional symbols. At first, write <code>-unsafe</code> on <code>smcs.rsp</code>, <code>gmcs.rsp</code> etc. And define <code>ENABLE_UNSAFE_MSGPACK</code> symbol.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/46207/23837456/fc01c828-07cb-11e7-92bf-f23eb2575115.png"><img src="https://cloud.githubusercontent.com/assets/46207/23837456/fc01c828-07cb-11e7-92bf-f23eb2575115.png" alt="image"></a></p>
<p>Here is sample of configuration.</p>
<div><pre><span>Resolvers</span>.<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span>MessagePack</span>.<span>Unity</span>.<span>UnityResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Unity</span>.<span>Extension</span>.<span>UnityBlitWithPrimitiveArrayResolver</span>.<span>Instance</span>,

    <span><span>//</span> If PC, use StandardResolver</span>
    <span><span>//</span> MessagePack.Resolvers.StandardResolver.Instance,</span>

    <span><span>//</span> If IL2CPP, Builtin + GeneratedResolver.</span>
    <span><span>//</span> MessagePack.Resolvers.BuiltinResolver.Instance,</span>
);</pre></div>
<p><code>MessagePack.UnityShims</code> NuGet package is for .NET ServerSide serialization support to communicate with Unity. It includes shim of Vector3 etc and Safe/Unsafe serialization extension.</p>
<p>If you want to share class between Unity and Server, you can use <code>SharedProject</code> or <code>Reference as Link</code> or new MSBuild(VS2017)'s wildcard reference etc. Anyway you need to source-code level share. This is sample project structure of use SharedProject.</p>
<ul>
<li>SharedProject(source code sharing)
<ul>
<li>Source codes of server-client shared</li>
</ul>
</li>
<li>ServerProject(.NET 4.6/.NET Core/.NET Standard)
<ul>
<li>[SharedProject]</li>
<li>[MessagePack]</li>
<li>[MessagePack.UnityShims]</li>
</ul>
</li>
<li>ClientDllProject(.NET 3.5)
<ul>
<li>[SharedProject]</li>
<li>[MessagePack](not dll, use MessagePack.unitypackage's sourcecodes)</li>
</ul>
</li>
<li>Unity
<ul>
<li>[Builded ClientDll]</li>
</ul>
</li>
</ul>
<p>Other ways, use plain POCO by <code>DataContract</code>/<code>DataMember</code> can use.</p>
<h6>
Pre Code Generation(Unity/Xamarin Supports)</h6>
<p>MessagePack for C# generates object formatter dynamically by <a href="https://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.aspx" rel="nofollow">ILGenerator</a>. It is fast and transparently generated at run time. But it needs generate cost at first time and it does not work on AOT environment(Xamarin, Unity IL2CPP, etc.).</p>
<blockquote>
<p>Note: If Unity's build target as PC, does not need code generation. It works well.</p>
</blockquote>
<p>If you want to avoid generate cost or run on Xamarin or Unity, you need pre-code generation. <code>mpc.exe</code>(MessagePackCompiler) is code generator of MessagePack for C#. mpc can download from <a href="https://github.com/neuecc/MessagePack-CSharp/releases/">releases</a> page, <code>mpc.zip</code>. mpc is using <a href="https://github.com/dotnet/roslyn">Roslyn</a> so analyze source code.</p>
<pre><code><span>mpc arguments help</span><span>:</span><span>
  </span><span>-</span><span>i</span><span>,</span><span> </span><span>--</span><span>input              </span><span>[</span><span>required</span><span>]</span><span>Input</span><span> path of analyze csproj
  </span><span>-</span><span>o</span><span>,</span><span> </span><span>--</span><span>output             </span><span>[</span><span>required</span><span>]</span><span>Output</span><span> file path
  </span><span>-</span><span>c</span><span>,</span><span> </span><span>--</span><span>conditionalsymbol  </span><span>[</span><span>optional</span><span>,</span><span> </span><span>default</span><span>=</span><span>empty</span><span>]</span><span>conditional compiler symbol
  </span><span>-</span><span>r</span><span>,</span><span> </span><span>--</span><span>resolvername       </span><span>[</span><span>optional</span><span>,</span><span> </span><span>default</span><span>=</span><span>GeneratedResolver</span><span>]</span><span>Set</span><span> resolver name
  </span><span>-</span><span>n</span><span>,</span><span> </span><span>--</span><span>namespace</span><span>          </span><span>[</span><span>optional</span><span>,</span><span> </span><span>default</span><span>=</span><span>MessagePack</span><span>]</span><span>Set</span><span> </span><span>namespace</span><span> root name
  </span><span>-</span><span>m</span><span>,</span><span> </span><span>--</span><span>usemapmode         </span><span>[</span><span>optional</span><span>,</span><span> </span><span>default</span><span>=</span><span>false</span><span>]</span><span>Force</span><span> </span><span>use</span><span> map mode serialization</span></code></pre>
<pre><code><span>// Simple Sample:</span><span>
mpc</span><span>.</span><span>exe </span><span>-</span><span>i </span><span>"..\src\Sandbox.Shared.csproj"</span><span> </span><span>-</span><span>o </span><span>"MessagePackGenerated.cs"</span><span>

</span><span>// Use force map simulate DynamicContractlessObjectResolver</span><span>
mpc</span><span>.</span><span>exe </span><span>-</span><span>i </span><span>"..\src\Sandbox.Shared.csproj"</span><span> </span><span>-</span><span>o </span><span>"MessagePackGenerated.cs"</span><span> </span><span>-</span><span>m</span></code></pre>
<p>If you create DLL by msbuild project, you can use Pre/Post build event.</p>
<pre><code><span>&lt;PropertyGroup&gt;</span><span>
    </span><span>&lt;PreBuildEvent&gt;</span><span>
        mpc.exe, here is useful for analyze/generate target is self project.
    </span><span>&lt;/PreBuildEvent&gt;</span><span>
    </span><span>&lt;PostBuildEvent&gt;</span><span>
        mpc.exe, here is useful for analyze target is another project.
    </span><span>&lt;/PostBuildEvent&gt;</span><span>
</span><span>&lt;/PropertyGroup&gt;</span></code></pre>
<p>In default, <code>mpc.exe</code> generates resolver to <code>MessagePack.Resolvers.GeneratedResolver</code> and formatters generates to <code>MessagePack.Formatters.***</code>. And application launch, you need to set Resolver at first.</p>
<div><pre><span><span>//</span> CompositeResolver is singleton helper for use custom resolver.</span>
<span><span>//</span> Ofcourse you can also make custom resolver.</span>
<span>MessagePack</span>.<span>Resolvers</span>.<span>CompositeResolver</span>.<span>RegisterAndSetAsDefault</span>(
    <span><span>//</span> use generated resolver first, and combine many other generated/custom resolvers</span>
    <span>MessagePack</span>.<span>Resolvers</span>.<span>GeneratedResolver</span>.<span>Instance</span>,

    <span><span>//</span> finally, use builtin/primitive resolver(don't use StandardResolver, it includes dynamic generation)</span>
    <span>MessagePack</span>.<span>Resolvers</span>.<span>BuiltinResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Resolvers</span>.<span>AttributeFormatterResolver</span>.<span>Instance</span>,
    <span>MessagePack</span>.<span>Resolvers</span>.<span>PrimitiveObjectResolver</span>.<span>Instance</span>
);</pre></div>
<blockquote>
<p>Note: mpc.exe is basically run on only Windows. But you can run on <a href="https://www.mono-project.com/" rel="nofollow">Mono</a>, that supports Mac and Linux.</p>
</blockquote>
<h6>
RPC</h6>
<p>MessagePack advocated <a href="https://github.com/msgpack-rpc/msgpack-rpc">MessagePack RPC</a>, but formulation is stopped and it is not widely used. I've created gRPC based MessagePack HTTP/2 RPC streaming framework called <a href="https://github.com/neuecc/MagicOnion">MagicOnion</a>. gRPC usually communicates with Protocol Buffers using IDL. But MagicOnion uses MessagePack for C# and does not needs IDL. If communicates C# to C#, schemaless(C# classes as schema) is better than IDL.</p>
<h6>
How to Build</h6>
<p>Open <code>MessagePack.sln</code> on Visual Studio 2017.</p>
<p>Unity Project is using symbolic link. At first, run <code>make_unity_symlink.bat</code> so linked under Unity project. You can open <code>src\MessagePack.UnityClient</code> on Unity Editor.</p>
<h6>
Author Info</h6>
<p>Yoshifumi Kawai(a.k.a. neuecc) is a software developer in Japan.
He is the Director/CTO at Grani, Inc.
Grani is a mobile game developer company in Japan and well known for using C#.
He is awarding Microsoft MVP for Visual C# since 2011.
He is known as the creator of <a href="https://github.com/neuecc/UniRx/">UniRx</a>(Reactive Extensions for Unity)</p>
<p>Blog: <a href="https://medium.com/@neuecc" rel="nofollow">https://medium.com/@neuecc</a> (English)
Blog: <a href="http://neue.cc/" rel="nofollow">http://neue.cc/</a> (Japanese)
Twitter: <a href="https://twitter.com/neuecc" rel="nofollow">https://twitter.com/neuecc</a> (Japanese)</p>
<h6>
License</h6>
<p>This library is under the MIT License.</p>
<p>lz4 compression support is using Milosz Krajewski's <a href="https://github.com/MiloszKrajewski/lz4net">lz4net</a> code with some modified.</p>
</article>
  </div>
        </div>
        
        <div id="qs-pocketberserker-MessagePack-FSharpExtensions"><h4><a href="https://github.com/pocketberserker/MessagePack.FSharpExtensions" target="_blank">pocketberserker/MessagePack.FSharpExtensions <span>https://github.com/pocketberserker/MessagePack.FSharpExtensions</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack.FSharpExtensions</h5>
<p><a href="https://www.nuget.org/packages/MessagePack.FSharpExtensions/" rel="nofollow"><img src="https://camo.githubusercontent.com/9f373b9c656635713c54e5d3b47faa097c474575/687474703a2f2f696d672e736869656c64732e696f2f6e756765742f762f4d6573736167655061636b2e465368617270457874656e73696f6e732e7376673f7374796c653d666c6174" alt="NuGet Status" data-canonical-src="http://img.shields.io/nuget/v/MessagePack.FSharpExtensions.svg?style=flat"></a>
<a href="https://ci.appveyor.com/project/pocketberserker/messagepack-fsharpextensions/branch/master" rel="nofollow"><img src="https://camo.githubusercontent.com/bf5a765771e8327024da346d4f618ed6ac2d8ade/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f62626d796c6264306f356d6b727074622f6272616e63682f6d61737465723f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/bbmylbd0o5mkrptb/branch/master?svg=true"></a>
<a href="https://travis-ci.org/pocketberserker/MessagePack.FSharpExtensions" rel="nofollow"><img src="https://camo.githubusercontent.com/c6950130f546d8fffd41f58d33d94406d3e0809b/68747470733a2f2f7472617669732d63692e6f72672f706f636b65746265727365726b65722f4d6573736167655061636b2e465368617270457874656e73696f6e732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pocketberserker/MessagePack.FSharpExtensions.svg?branch=master"></a></p>
<p>MessagePack.FSharpExtensions is a <a href="https://github.com/neuecc/MessagePack-CSharp">MessagePack-CSharp</a> extension library for F#.</p>
<h6>
Usage</h6>
<div><pre><span>open</span> <span>MessagePack</span>
<span>open</span> <span>MessagePack.<span>Resolvers</span></span>
<span>open</span> <span>MessagePack.<span>FSharp</span></span>

CompositeResolver.RegisterAndSetAsDefault(
  FSharpResolver.Instance,
  StandardResolver.Instance
)

<span>[&lt;MessagePackObject&gt;]</span>
<span>type</span> <span>UnionSample </span><span>=</span>
  <span>|</span> Foo <span>of</span> XYZ <span>:</span> int
  <span>|</span> Bar <span>of</span> OPQ <span>:</span> string list

<span>let</span> <span>data</span> <span>=</span> Foo <span>999</span>

<span>let</span> <span>bin</span> <span>=</span> MessagePackSerializer.Serialize(data)

<span>match</span> MessagePackSerializer.Deserialize<span>&lt;</span>UnionSample<span>&gt;</span>(bin) <span>with</span>
<span>|</span> Foo x <span>-&gt;</span>
  printfn <span><span>"</span>%d<span>"</span></span> x
<span>|</span> Bar xs <span>-&gt;</span>
  printfn <span><span>"</span>%A<span>"</span></span> xs</pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-jpf91-msgpack-ll"><h4><a href="https://github.com/jpf91/msgpack-ll" target="_blank">jpf91/msgpack-ll <span>https://github.com/jpf91/msgpack-ll</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-ll</h5>
<p><a href="https://coveralls.io/github/jpf91/msgpack-ll?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/f3302fbeb768f5ef0730c9e6529ed35a5d661658/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6a706639312f6d73677061636b2d6c6c2f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/jpf91/msgpack-ll/badge.svg?branch=master"></a>
<a href="https://travis-ci.org/jpf91/msgpack-ll" rel="nofollow"><img src="https://camo.githubusercontent.com/419948a0a48465f7b94e2df5a9c85edea46ea9fe/68747470733a2f2f7472617669732d63692e6f72672f6a706639312f6d73677061636b2d6c6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/jpf91/msgpack-ll.svg?branch=master"></a></p>
<p>This is a low-level <code>@nogc</code>, <code>nothrow</code>, <code>@safe</code>, <code>pure</code> and <code>betterC</code> compatible
<a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer. The
library was designed to avoid any external dependencies and handle the low-level protocol
details only. As a result the library doesn't have to do any error handling or
buffer management. This library does never dynamically allocate memory.</p>
<p>The API documentation is available <a href="https://jpf91.github.io/msgpack-ll/msgpack_ll.html" rel="nofollow">here</a>.</p>
<h6>
A simple example showing the complete API</h6>
<div><pre><span>import</span> msgpack_ll;

<span><span>//</span> Buffer allocation is not handled by the library</span>
<span>ubyte</span>[<span>128</span>] buffer;


<span><span>//</span> The MsgpackType enum contains all low-level MessagePack types</span>
<span>enum</span> type = MsgpackType.uint8;

<span><span>//</span> The DataSize!(MsgpackType) function returns the size of serialized data</span>
<span><span>//</span> for a certain type.</span>

<span><span>//</span> The formatter and parser use ref ubyte[DataSize!type] types. This</span>
<span><span>//</span> forces the compiler to do array length checks at compile time and avoid</span>
<span><span>//</span> any runtime bounds checking.</span>

<span><span>//</span> Format the number 42 as a uint8 type. This will require</span>
<span><span>//</span> DataSize!(MsgpackType.uint8) == 2 bytes storage.</span>
formatType<span>!</span>(type)(<span>42</span>, buffer[<span>0</span><span>..</span>DataSize<span>!</span>type]);

<span><span>//</span> To deserialize we have to somehow get the data type at runtime</span>
<span><span>//</span> Then verify the type is as expected.</span>
<span>assert</span>(getType(buffer[<span>0</span>]) <span>==</span> type);

<span><span>//</span> Now deserialize. Here we have to specify the MsgpackType</span>
<span><span>//</span> as a compile time value.</span>
<span>const</span> result = parseType<span>!</span>type(buffer[<span>0</span><span>..</span>DataSize<span>!</span>type]);
<span>assert</span>(result <span>==</span> <span>42</span>);</pre></div>
<h6>
A quick view at the generated code for this library</h6>
<h7>
Serializing an 8 bit integer</h7>
<div><pre><span>void</span> <span>format</span>(<span>ref</span> <span>ubyte</span>[<span>128</span>] buffer)
{
    <span>enum</span> type = MsgpackType.uint8;
    formatType<span>!</span>(type)(<span>42</span>, buffer[<span>0</span><span>..</span>DataSize<span>!</span>type]);
}</pre></div>
<p>Because of clever typing there's no runtime bounds checking but all bounds
checks are performed at compile time by type checking.</p>
<div><pre><span>pure nothrow @nogc @safe void msgpack_ll.form</span><span>at</span><span>(ref ubyte</span><span>[</span><span>128</span><span>]</span><span>):</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rdi</span><span>],</span><span> </span><span>-</span><span>52</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rdi</span><span>+</span><span>1</span><span>],</span><span> </span><span>42</span>
<span>        </span><span>ret</span></pre></div>
<h7>
Serializing a small negative integer into one byte</h7>
<div><pre><span>void</span> <span>format</span>(<span>ref</span> <span>ubyte</span>[<span>128</span>] buffer)
{
    <span>enum</span> type = MsgpackType.negFixInt;
    formatType<span>!</span>(type)(<span>-</span><span>11</span>, buffer[<span>0</span><span>..</span>DataSize<span>!</span>type]);
}</pre></div>
<p>The MessagePack format is cleverly designed, so encoding the type is actually free
in this case.</p>
<div><pre><span>pure nothrow @nogc @safe void msgpack_ll.form</span><span>at</span><span>(ref ubyte</span><span>[</span><span>128</span><span>]</span><span>):</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rdi</span><span>],</span><span> </span><span>-</span><span>11</span>
<span>        </span><span>ret</span></pre></div>
<h7>
Deserializing an expected type</h7>
<div><pre><span>bool</span> <span>parse</span>(<span>ref</span> <span>ubyte</span>[<span>128</span>] buffer, <span>ref</span> <span>byte</span> value)
{
    <span>enum</span> type = MsgpackType.negFixInt;
    <span>auto</span> rtType = getType(buffer[<span>0</span>]);
    <span>if</span>(rtType <span>!=</span> type)
        <span>return</span> <span>false</span>;

    value = parseType<span>!</span>type(buffer[<span>0</span><span>..</span>DataSize<span>!</span>type]);
    <span>return</span> <span>true</span>;
}</pre></div>
<p>The compiler will inline functions and can see through the switch block in
<code>getType</code>. If you explicitly ask for one type, the compiler will reduce the
code to a simple explicit <code>if</code> check for this type!</p>
<div><pre><span>pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span>[</span><span>128</span><span>],</span><span> ref byte):</span>
<span>        </span><span>movzx</span><span>   </span><span>edx</span><span>,</span><span> BYTE PTR </span><span>[</span><span>rdi</span><span>]</span>
<span>        </span><span>cmp</span><span>     </span><span>edx</span><span>,</span><span> </span><span>223</span>
<span>        </span><span>jle</span><span>     .L58</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rsi</span><span>],</span><span> </span><span>dl</span>
<span>        </span><span>mov</span><span>     </span><span>eax</span><span>,</span><span> </span><span>1</span>
<span>        </span><span>ret</span>
<span>.L58:</span>
<span>        </span><span>xor</span><span>     </span><span>eax</span><span>,</span><span> </span><span>eax</span>
<span>        </span><span>ret</span></pre></div>
<h7>
Deserializing one of multiple types</h7>
<div><pre><span>bool</span> <span>parse</span>(<span>ref</span> <span>ubyte</span>[<span>128</span>] buffer, <span>ref</span> <span>byte</span> value)
{
    <span>auto</span> rtType = getType(buffer[<span>0</span>]);
    <span>switch</span>(rtType)
    {
        <span>case</span> MsgpackType.negFixInt:
            value = parseType<span>!</span>(MsgpackType.negFixInt)(buffer[<span>0</span><span>..</span>DataSize<span>!</span>(MsgpackType.negFixInt)]);
            <span>return</span> <span>true</span>;
        <span>case</span> MsgpackType.int8:
            value = parseType<span>!</span>(MsgpackType.int8)(buffer[<span>0</span><span>..</span>DataSize<span>!</span>(MsgpackType.int8)]);
            <span>return</span> <span>true</span>;
        <span>default</span>:
            <span>return</span> <span>false</span>;
    }
}</pre></div>
<p>The generated code is obviously slighly more complex. The interesting part here
is that type checking is directly done using the raw type value and not the
enum values returned by <code>getType</code>. Even manually written ASM probably can't do
much better here.</p>
<div><pre><span>pure nothrow @nogc @safe bool msgpack_ll.parse(ref ubyte</span><span>[</span><span>128</span><span>],</span><span> ref byte):</span>
<span>        </span><span>movzx</span><span>   </span><span>ecx</span><span>,</span><span> BYTE PTR </span><span>[</span><span>rdi</span><span>]</span>
<span>        </span><span>xor</span><span>     </span><span>eax</span><span>,</span><span> </span><span>eax</span>
<span>        </span><span>cmp</span><span>     </span><span>ecx</span><span>,</span><span> </span><span>191</span>
<span>        </span><span>jle</span><span>     .L55</span>
<span>        </span><span>cmp</span><span>     </span><span>ecx</span><span>,</span><span> </span><span>223</span>
<span>        </span><span>jg</span><span>      .L56</span>
<span>        </span><span>cmp</span><span>     </span><span>ecx</span><span>,</span><span> </span><span>208</span>
<span>        </span><span>jne</span><span>     .L60</span>
<span>        </span><span>movzx</span><span>   </span><span>eax</span><span>,</span><span> BYTE PTR </span><span>[</span><span>rdi</span><span>+</span><span>1</span><span>]</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rsi</span><span>],</span><span> </span><span>al</span>
<span>        </span><span>mov</span><span>     </span><span>eax</span><span>,</span><span> </span><span>1</span>
<span>.L55:</span>
<span>        </span><span>rep</span><span>; ret</span>
<span>.L56:</span>
<span>        </span><span>mov</span><span>     BYTE PTR </span><span>[</span><span>rsi</span><span>],</span><span> </span><span>cl</span>
<span>        </span><span>mov</span><span>     </span><span>eax</span><span>,</span><span> </span><span>1</span>
<span>        </span><span>ret</span>
<span>.L60:</span>
<span>        </span><span>ret</span></pre></div>
</article>
  </div>
        </div>
        
        <div id="qs-MobiltronInc-msgpack-response"><h4><a href="https://github.com/MobiltronInc/msgpack-response" target="_blank">MobiltronInc/msgpack-response <span>https://github.com/MobiltronInc/msgpack-response</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-response</h5>
<p><a href="https://travis-ci.org/MobiltronInc/msgpack-response" rel="nofollow"><img src="https://camo.githubusercontent.com/598821581bcfc6ea2fa6e1ae55a461962073623e/68747470733a2f2f7472617669732d63692e6f72672f4d6f62696c74726f6e496e632f6d73677061636b2d726573706f6e73652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/MobiltronInc/msgpack-response.svg?branch=master"></a>
<a href="https://github.com/MobiltronInc/msgpack-response"><img src="https://camo.githubusercontent.com/2e67b1402ead65cafa476ec3f1495c4977d33db1/68747470733a2f2f64617669642d646d2e6f72672f4d6f62696c74726f6e496e632f6d73677061636b2d726573706f6e73652e737667" alt="Dependency Status" data-canonical-src="https://david-dm.org/MobiltronInc/msgpack-response.svg"></a></p>
<p>An implementation of <a href="https://msgpack.org/" rel="nofollow">Message Pack</a> middleware for <a href="https://expressjs.com/" rel="nofollow">ExpressJS</a>.</p>
<p><strong>Features</strong></p>
<ul>
<li>Automatic Message Pack detection (from the HTTP headers) and encoding of all JSON messages to Message Pack.</li>
<li>Extension of the current ExpressJS API; Introducing the <code>Response.msgPack(jsObject)</code> method on the standard <a href="https://expressjs.com/en/4x/api.html#res" rel="nofollow">ExpressJS Response</a> object.</li>
</ul>
<h6>
Getting Started</h6>
<p>With auto-detection and transformation enabled, the middleware detects automatically the HTTP header <code>Accept: application/x-msgpack</code> and piggybacks the <code>Response.json()</code> method of the ExpressJS API, to encode the JSON response as Message Pack. This method is usefull, when you have existing applications that need use the middleware, without changing the codebase very much.</p>
<div><pre><span>const</span> <span>msgpackResponse</span> <span>=</span> <span>require</span>(<span><span>'</span>msgpack-response<span>'</span></span>);

<span>app</span>.<span>use</span>(<span>msgpackResponse</span>({auto_detect<span>:</span> <span>true</span>}));

<span>app</span>.<span>get</span>(<span><span>'</span>/test_json<span>'</span></span>, (<span>req</span>, <span>res</span>) <span>=&gt;</span> {
	<span>res</span>.<span>status</span>(<span>200</span>).<span>json</span>({<span><span>'</span>message<span>'</span></span><span>:</span> <span><span>'</span>a true test<span>'</span></span>});
})</pre></div>
<blockquote>
<p>Note: Remember the add the header <code>Accept: application/x-msgpack</code> in the request.</p>
</blockquote>
<p>Also it can have auto detection and transformation disabled. The middleware extends the <code>Response</code> object of the ExpressJS framework, by adding the <code>msgPack()</code> method to it. Then to return an encoded response, you just use the <code>Response.msgPack()</code> method that accepts the Javascript object as parameter. For example,</p>
<div><pre><span>const</span> <span>msgpackResponse</span> <span>=</span> <span>require</span>(<span><span>'</span>msgpack-response<span>'</span></span>);

<span>app</span>.<span>use</span>(<span>msgpackResponse</span>({auto_detect<span>:</span> <span>false</span>}));
<span><span>//</span>or</span>
<span>app</span>.<span>use</span>(<span>msgpackResponse</span>());

<span>app</span>.<span>get</span>(<span><span>'</span>/test_msgpack<span>'</span></span>, (<span>req</span>, <span>res</span>) <span>=&gt;</span> {
	<span>res</span>.<span>status</span>(<span>200</span>).<span>msgPack</span>({<span><span>'</span>message<span>'</span></span><span>:</span> <span><span>'</span>a true test<span>'</span></span>});
});</pre></div>
<blockquote>
<p>Note: Initialize the middleware before the actual routes in the middleware chain to properly extend the <code>Response</code> Object.</p>
</blockquote>
<h6>
Requirements</h6>
<p>Node.js &gt;= 6.0</p>
<h6>
Installation</h6>
<p>With <a href="https://www.npmjs.com/" rel="nofollow">npm</a> do:</p>
<div><pre>npm install msgpack-response -save</pre></div>
<h6>
About</h6>
<p><a href="http://mobiltron.com/" rel="nofollow"><img src="https://github.com/mobiltroninc/Foundation/raw/master/ASSETS/mobiltron_square.png?raw=true" width="70"></a></p>
<p>This project is funded and maintained by <a href="http://mobiltron.com/" rel="nofollow">Mobiltron, Inc.</a>. We <g-emoji alias="heart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png"></g-emoji> open source software!</p>
<p>Check out our other <a href="https://github.com/mobiltroninc/">open source projects</a> or say <g-emoji alias="wave" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44b.png"></g-emoji> on twitter <a href="https://twitter.com/mobiltron" rel="nofollow">@mobiltron</a>.</p>
<h6>
Contribute</h6>
<p>Contributions are welcome <g-emoji alias="metal" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f918.png"></g-emoji> We encourage developers like you to help us improve the projects we've shared with the community. Please see the <a href="https://github.com/mobiltroninc/Foundation/blob/master/CONTRIBUTING.md">Contributing Guide</a> and the <a href="https://github.com/mobiltroninc/Foundation/blob/master/CONDUCT.md">Code of Conduct</a>.</p>
<h6>
Authors</h6>
<ul>
<li>
<strong>Stavros Schizas</strong> - <em>Initial work</em> - <a href="http://mobiltron.com/" rel="nofollow">Mobiltron, Inc.</a>
</li>
<li>
<strong>Vassilios Karakoidas</strong> - <em>Initial work</em> - <a href="http://mobiltron.com/" rel="nofollow">Mobiltron, Inc.</a>
</li>
</ul>
<p>See also the list of <a href="https://github.com/MobiltronInc/msgpack-response/contributors">contributors</a> who participated in this project.</p>
<h6>
License</h6>
<p>msgpack-response is available under the MIT license. See the <a href="https://msgpack.org/MobiltronInc/msgpack-response/blob/master/LICENSE.md">LICENSE</a> file for more info.</p>
</article>
  </div>
        </div>
        
        <div id="qs-crowding-msgpack-r"><h4><a href="https://github.com/crowding/msgpack-r" target="_blank">crowding/msgpack-r <span>https://github.com/crowding/msgpack-r</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack for R</h5>
<p>Peter Meilstrup</p>
<p><a href="https://cran.r-project.org/package=msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/a1c05705decc4beef3332a76a55570a90c96c8b2/687474703a2f2f7777772e722d706b672e6f72672f6261646765732f76657273696f6e2f6d73677061636b" alt="CRAN version badge" data-canonical-src="http://www.r-pkg.org/badges/version/msgpack"></a>
<a href="https://travis-ci.org/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/24e4dadba1b71c2f099164d3b7e85ff95c1f7369/687474703a2f2f7472617669732d63692e6f72672f63726f7764696e672f6d73677061636b2d722e7376673f6272616e63683d6d6173746572" alt="Travis build status" data-canonical-src="http://travis-ci.org/crowding/msgpack-r.svg?branch=master"></a>
<a href="https://codecov.io/gh/crowding/msgpack-r" rel="nofollow"><img src="https://camo.githubusercontent.com/da1dab280a478cc73c6d6a30cc2b7845f3a9246b/68747470733a2f2f636f6465636f762e696f2f67682f63726f7764696e672f6d73677061636b2d722f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="Code coverage" data-canonical-src="https://codecov.io/gh/crowding/msgpack-r/branch/master/graph/badge.svg"></a></p>
<p>This is a high speed <a href="https://msgpack.org/" rel="nofollow">msgpack</a> encoder and decoder
for R, based on the <a href="https://github.com/clwi/CWPack">CWPack</a> C
implementation.</p>
<p><code>msgpack</code> is a binary data format with data structures similar to <code>JSON</code>
and a compact binary encoding. It can be a drop-in replacement for
<code>JSON</code> in most applications. It is designed to be fast to parse and
compact to transmit and store.</p>
<h6>
Installation</h6>
<p>From CRAN:</p>
<div><pre>install.packages(<span><span>"</span>msgpack<span>"</span></span>)</pre></div>
<p>From Github:</p>
<div><pre>library(<span>devtools</span>)
install_github(<span><span>"</span>crowding/msgpack-r<span>"</span></span>)</pre></div>
<h6>
Usage</h6>
<div><pre>library(<span>msgpack</span>)
<span>x</span> <span>&lt;-</span> packMsg( <span>list</span>(<span>compact</span><span>=</span><span>TRUE</span>, <span>schema</span><span>=</span><span>0</span>) )
<span>x</span>
<span><span>#</span>#  [1] 82 a7 63 6f 6d 70 61 63 74 c3 a6 73 63 68 65 6d 61 00</span>
dput(unpackMsg( <span>x</span> ))
<span><span>#</span># structure(list(compact = TRUE, schema = 0L), .Names = c("compact", </span>
<span><span>#</span># "schema"))</span></pre></div>
<h7>
Connections / Streaming</h7>
<p>Write messages one or several at a time:</p>
<div><pre><span>conOut</span> <span>&lt;-</span> rawConnection(raw(<span>0</span>), <span>open</span> <span>=</span> <span><span>"</span>w<span>"</span></span>) <span><span>#</span> or socketConnection, etc</span>
writeMsg(<span><span>"</span>one<span>"</span></span>, <span>conOut</span>)
writeMsgs(<span>list</span>(<span>2</span>, c(<span>buckle</span><span>=</span><span>TRUE</span>), c(<span>owner</span><span>=</span><span><span>"</span>my<span>"</span></span>, <span>type</span><span>=</span><span><span>"</span>shoe<span>"</span></span>)), <span>conOut</span>)</pre></div>
<p>Use a <code>msgConnection</code> object to read messages one or several at a
time:</p>
<div><pre><span>conIn</span> <span>&lt;-</span> msgConnection(rawConnection(rawConnectionValue(<span>conOut</span>), <span>open</span> <span>=</span> <span><span>"</span>r<span>"</span></span>))
dput(readMsgs(<span>conIn</span>, <span>2</span>))
<span><span>#</span># list("one", 2L)</span>
dput(readMsg(<span>conIn</span>))
<span><span>#</span># structure(TRUE, .Names = "buckle")</span>
dput(readMsgs(<span>conIn</span>))
<span><span>#</span># list(structure(c("my", "shoe"), .Names = c("owner", "type")))</span></pre></div>
<h7>
Performance</h7>
<p>Msgpack is fast and compact. See the <a href="https://msgpack.org/crowding/msgpack-r/blob/master/inst/doc/comparison.html">benchmarking
vignette</a>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://msgpack.org/crowding/msgpack-r/blob/master/gh/space.svg"><img src="https://msgpack.org/crowding/msgpack-r/raw/master/gh/space.svg?sanitize=true" alt="Plot of time taken to transmit dataset, vs size of dataset, for each encoder under four conditions."></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://msgpack.org/crowding/msgpack-r/blob/master/gh/time.svg"><img src="https://msgpack.org/crowding/msgpack-r/raw/master/gh/time.svg?sanitize=true" alt="Comparison of space used by each encoder to encode a test dataset."></a></p>
</article>
  </div>
        </div>
        
        <div id="qs-komamitsu-retrofit-converter-msgpack"><h4><a href="https://github.com/komamitsu/retrofit-converter-msgpack" target="_blank">komamitsu/retrofit-converter-msgpack <span>https://github.com/komamitsu/retrofit-converter-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Retrofit-Converter-MessagePack</h5>
<p><a href="https://travis-ci.org/komamitsu/retrofit-converter-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/9856f7ff692b9a0425e41b6241cb2b07b9bb109e/68747470733a2f2f7472617669732d63692e6f72672f6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/komamitsu/retrofit-converter-msgpack.svg?branch=master"></a>
<a href="https://maven-badges.herokuapp.com/maven-central/org.komamitsu/retrofit-converter-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/293e294102c440e0cc749a0b66cd6d537a426ba5/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.komamitsu/retrofit-converter-msgpack/badge.svg"></a>
<a href="https://coveralls.io/github/komamitsu/retrofit-converter-msgpack?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/695c3bb32a46cd23fc3cd8e96b84c8c082ca9011/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6b6f6d616d697473752f726574726f6669742d636f6e7665727465722d6d73677061636b2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/komamitsu/retrofit-converter-msgpack/badge.svg?branch=master&amp;service=github"></a></p>
<p>Retrofit Converter for MessagePack</p>
<h6>
Install</h6>
<h7>
Gradle</h7>
<div><pre>dependencies {
    implementation <span><span>'</span>org.komamitsu:retrofit-converter-msgpack:x.x.x<span>'</span></span>
}</pre></div>
<h7>
Maven</h7>
<div><pre>&lt;<span>dependency</span>&gt;
    &lt;<span>groupId</span>&gt;org.komamitsu&lt;/<span>groupId</span>&gt;
    &lt;<span>artifactId</span>&gt;retrofit-converter-msgpack&lt;/<span>artifactId</span>&gt;
    &lt;<span>version</span>&gt;x.x.x&lt;/<span>version</span>&gt;
&lt;/<span>dependency</span>&gt;</pre></div>
<h6>
Usage</h6>
<p>To use, supply an instance of this converter when building your Retrofit instance.</p>
<pre><code><span>Retrofit</span><span> retrofit </span><span>=</span><span> </span><span>new</span><span> </span><span>Retrofit</span><span>.</span><span>Builder</span><span>()</span><span>
    </span><span>.</span><span>baseUrl</span><span>(</span><span>"https://api.example.com"</span><span>)</span><span>
    </span><span>.</span><span>addConverterFactory</span><span>(</span><span>MessagePackConverterFactory</span><span>.</span><span>create</span><span>())</span><span>
    </span><span>.</span><span>build</span><span>();</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-patriksimek-msgpack-postgres"><h4><a href="https://github.com/patriksimek/msgpack-postgres" target="_blank">patriksimek/msgpack-postgres <span>https://github.com/patriksimek/msgpack-postgres</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-postgres <a href="https://travis-ci.org/patriksimek/msgpack-postgres" rel="nofollow"><img src="https://camo.githubusercontent.com/3fa8d26f0b9e5ceb2b7505e415a0007941beda14/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f70617472696b73696d656b2f6d73677061636b2d706f7374677265732f6d61737465722e7376673f7374796c653d666c61742d737175617265266c6162656c3d756e6974" alt="Travis CI" data-canonical-src="https://img.shields.io/travis/patriksimek/msgpack-postgres/master.svg?style=flat-square&amp;label=unit"></a>
</h5>
<p>MessagePack implementation for PostgreSQL written in PL/pgSQL.</p>
<h6>
Installation</h6>
<p>Execute <code>src/encode.sql</code> or/and <code>src/decode.sql</code> on your database server.</p>
<h6>
Quick Example</h6>
<div><pre><span>select</span> msgpack_encode(<span><span>'</span>{"hello": "world"}<span>'</span></span>::jsonb);
<span><span>--</span> returns 0x81a568656c6c6fa5776f726c64</span>

<span>select</span> msgpack_decode(decode(<span><span>'</span>81a568656c6c6fa5776f726c64<span>'</span></span>, <span><span>'</span>hex<span>'</span></span>));
<span><span>--</span> returns '{"hello": "world"}'</span></pre></div>
<h6>
Documentation</h6>
<p><code>msgpack_encode(jsonb)</code></p>
<p>Encodes <code>jsonb</code> object into <code>bytea</code> string.</p>
<p><code>msgpack_decode(bytea)</code></p>
<p>Decodes <code>jsonb</code> object from <code>bytea</code> string.</p>
<h6>
TODO</h6>
<ul>
<li>Float/double encoding</li>
</ul>
<h6>
Sponsors</h6>
<p>Development is sponsored by <a href="https://www.integromat.com/en/integrations/postgres" rel="nofollow">Integromat</a>.</p>
<h6>
License</h6>
<p>Copyright (c) 2017 Patrik Simek</p>
<p>The MIT License</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-Dev1an-MsgPack"><h4><a href="https://github.com/Dev1an/MsgPack" target="_blank">Dev1an/MsgPack <span>https://github.com/Dev1an/MsgPack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Usage</h5>
<div><pre><span>import</span> <span>MsgPack</span>

<span><span>//</span> Encode standard types</span>
<span></span><span>let</span> encoder <span>=</span> <span>Encoder</span>()
<span>try</span> encoder.<span>encode</span>(<span><span>"</span>Hello world<span>"</span></span>)
<span>try</span> encoder.<span>encode</span>(<span><span>"</span><span>"</span></span>)
<span>try</span> encoder.<span>encode</span>(<span>0x0102030405060708</span>)
<span>try</span> encoder.<span>encode</span>([<span><span>"</span>Some strings<span>"</span></span>, <span><span>"</span>in an array<span>"</span></span>])

<span><span>//</span> Encode custom types with Encodable </span>
<span></span><span>struct</span> <span>Point</span>: <span>Encodable </span>{
  <span>let</span> x<span>:</span> <span>Int</span>
  <span>let</span> y<span>:</span> <span>Int</span>
}
<span>try</span> encoder.<span>encode</span>(<span>Point</span>(<span>x</span>: <span>90</span>, <span>y</span>: <span>45</span>))</pre></div>
<p>Take a look at the <a href="https://msgpack.org/Dev1an/MsgPack/blob/master/Playground.playground/Contents.swift">playground</a> for more examples.</p>
</article>
  </div>
        </div>
        
        <div id="qs-HiPhish-msgpack-racket"><h4><a href="https://gitlab.com/HiPhish/MsgPack.rkt" target="_blank">HiPhish/msgpack-racket <span>https://gitlab.com/HiPhish/MsgPack.rkt</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack in Racket</h5>
<p>This is a <a href="https://racket-lang.org/" rel="nofollow">Racket</a> implementation of <a href="https://msgpack.org/" rel="nofollow">MessagePack</a>, a binary data serialisation
format. It allows you to serialise (pack) and de-serialise (unpack) Racket
object to and from binary data.</p>
<a name="user-content-installation"></a>
<h6>
Installation</h6>
<p>The easiest way to install this library is from the <a href="https://pkgs.racket-lang.org/" rel="nofollow">Racket Package Catalog</a>.
Run the following code from your shell:</p>

<p>If you wish to install the package from this repository use the included
makefile:</p>
<div><pre>make install   <span><span>#</span> Install the package</span>
make remove    <span><span>#</span> Uninstall the package</span></pre></div>
<a name="user-content-using-messagepack"></a>
<h6>
Using MessagePack</h6>
<div><pre><span>;;; Import the library first</span>
(<span>require</span> msgpack)

<span>;;; Some object to pack</span>
(<span>define</span> hodgepodge (vector <span>1</span> <span>2</span> (void) '#(<span>3</span> <span>#t</span>) <span>"<span>foo</span>"</span>))

<span>;;; Packing data</span>
(<span>define</span> packed (call-with-output-bytes (<span></span> (out) (pack hodgepodge out))))
<span>;;; &gt; #"\225\1\2\300\222\3\303\243foo"</span>

<span>;;; Unpacking data</span>
(<span>define</span> unpacked (call-with-input-bytes packed (<span></span> (in) (unpack in))))
<span>;;; &gt; '#(1 2 #&lt;void&gt; #(3 #t) "foo")</span></pre></div>
<p>The <code>pack</code> function takes a Racket object and a binary output port as arguments
and writes the serialised data to the port.  The <code>unpack</code> function takes a
binary input port and returns one de-serialised object, consuming the necessary
amount of bytes from the port in the process. For more details please refer to
the <a href="https://docs.racket-lang.org/msgpack/index.html" rel="nofollow">documentation</a>.</p>
<p>In the above example code we set the output and input ports to be byte strings
so we could work with the packed and unpacked data directly inside the Racket
instance.</p>
<a name="user-content-status"></a>
<h6>
Status</h6>
<p>The library is fully functional, covered by test cases, and the API should be
reasonably mature, but I am not yet willing to completely rule out changes. See
also below for parts of the library that could not be tested at the moment due
to technical reasons.</p>
<a name="user-content-caveats"></a>
<h6>
Caveats</h6>
<p>The following cases cannot be tested for the time being:</p>
<ul>
<li>The <code>bin32</code> type, storing a byte string that is <tt>2^32</tt> bytes long
requires 4GiB, my machine simply runs out of memory.</li>
<li>The same goes for the <code>str32</code> type</li>
<li>The same goes for the <code>array32</code> type</li>
<li>The same goes for the <code>map32</code> type</li>
<li>The same goes for the <code>ext32</code> type</li>
<li>Strings are only tested using ASCII characters, if anyone can generate
UTF-8 strings with a given length in <em>bytes</em> please help out.</li>
</ul>
<a name="user-content-license"></a>
<h6>
License</h6>
<p>Released under the GPLv3+ license, see the <a href="https://msgpack.org/HiPhish/msgpack-racket/blob/master/COPYING.txt">COPYING</a> file for details.</p>

</article>
  </div>
        </div>
        
        <div id="qs-skyformat99-msgpack2R"><h4><a href="https://github.com/skyformat99/msgpack2R" target="_blank">skyformat99/msgpack2R <span>https://github.com/skyformat99/msgpack2R</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack2R</h5>
<p>Convert to and from msgpack objects in R using the official msgpack-c API through Rcpp.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png"><img src="https://raw.githubusercontent.com/traversc/msgpack2R/master/vignettes/msgpack_flowchart.png" alt="flowchart" title="Conversion flowchart"></a>
<em>A flowchart describing the conversion of R objects into msgpack objects and back.</em></p>
<p>Msgpack EXT types are converted to raw vectors with EXT attributes containing the extension type.  The extension type must be an integer from 0 to 127.</p>
<p>Maps are converted to data.frames with additional class "map".  Map objects in R contain key and value list columns and can be simplified to named lists or named vectors.  The helper function <code>msgpack_map</code> creates map objects that can be serialized into msgpack.</p>
<p>For more information on msgpack types, see <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">here</a>.</p>
<h7>
Installation:</h7>
<ol>
<li>On Windows, install Rtools (<a href="https://cran.r-project.org/bin/windows/Rtools/" rel="nofollow">https://cran.r-project.org/bin/windows/Rtools/</a>)</li>
<li>In R, install devtools: <code>install.packages("devtools")</code>
</li>
<li><code>library(devtools)</code></li>
<li><code>install_github("traversc/msgpack2R")</code></li>
</ol>
<h7>
Example:</h7>
<p>See <code>examples/tests.r</code> for more examples.</p>
<pre><code><span>library</span><span>(</span><span>msgpack2R</span><span>)</span><span>
library</span><span>(</span><span>microbenchmark</span><span>)</span><span>

x </span><span>&lt;-</span><span> </span><span>as</span><span>.</span><span>list</span><span>(</span><span>1</span><span>:</span><span>1e7</span><span>)</span><span>
microbenchmark</span><span>(</span><span>xpk </span><span>&lt;-</span><span> msgpack_pack</span><span>(</span><span>x</span><span>),</span><span> times</span><span>=</span><span>3</span><span>)</span><span> </span><span># ~ 0.5 seconds</span><span>
microbenchmark</span><span>(</span><span>xu </span><span>&lt;-</span><span> msgpack_unpack</span><span>(</span><span>xpk</span><span>),</span><span> times</span><span>=</span><span>3</span><span>)</span><span> </span><span># ~ 2.5-3 seconds</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-SeanTAllen-pony-msgpack"><h4><a href="https://github.com/SeanTAllen/pony-msgpack" target="_blank">SeanTAllen/pony-msgpack <span>https://github.com/SeanTAllen/pony-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
Pony-msgpack</h5>
<p>A pure Pony implementation of the <a href="https://msgpack.org/" rel="nofollow">MessagePack serialization format</a>.</p>
<h6>
Status</h6>
<p><a href="https://circleci.com/gh/SeanTAllen/pony-msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/c35e0a12dc10224034fc5dd9590ce6dd8dec95aa/68747470733a2f2f636972636c6563692e636f6d2f67682f5365616e54416c6c656e2f706f6e792d6d73677061636b2e7376673f7374796c653d737667" alt="CircleCI" data-canonical-src="https://circleci.com/gh/SeanTAllen/pony-msgpack.svg?style=svg"></a></p>
<p>Pony-msgpack is currently alpha software. It implements a low-level API for encoding and decoding data. Still to do:</p>
<ul>
<li>High-level API for a better programming experience</li>
<li>Timestamp extension type</li>
</ul>
<h6>
Installation</h6>
<ul>
<li>Install <a href="https://github.com/ponylang/pony-stable">pony-stable</a>
</li>
<li>Update your <code>bundle.json</code>
</li>
</ul>
<div><pre>{ 
  <span><span>"</span>type<span>"</span></span>: <span><span>"</span>github<span>"</span></span>,
  <span><span>"</span>repo<span>"</span></span>: <span><span>"</span>SeanTAllen/pony-msgpack<span>"</span></span>,
  <span><span>"</span>tag<span>"</span></span>: <span><span>"</span>0.2.0<span>"</span></span>
}</pre></div>
<ul>
<li>
<code>stable fetch</code> to fetch your dependencies</li>
<li>
<code>use "msgpack"</code> to include this package</li>
<li>
<code>stable env ponyc</code> to compile your application</li>
</ul>
</article>
  </div>
        </div>
        
        
        
        <div id="qs-lekma-mood-msgpack"><h4><a href="https://github.com/lekma/mood.msgpack" target="_blank">lekma/mood.msgpack <span>https://github.com/lekma/mood.msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
mood.msgpack</h5>
<p>Python MessagePack implementation</p>
<p><a href="https://msgpack.org/" rel="nofollow">MessagePack</a> is an efficient binary serialization
format. It lets you exchange data among multiple languages like JSON. But it's
faster and smaller. Small integers are encoded into a single byte, and typical
short strings require only one extra byte in addition to the strings themselves.</p>
<p><strong>Note:</strong> This implementation is not geared towards inter language exchange but
towards serialization/de-serialization of Python object structures (it was
designed as a <a href="https://docs.python.org/3.5/library/pickle.html" rel="nofollow">pickle</a>
substitute). It does not expose MessagePack's extensions mechanism but uses it
internally to pack/unpack non-standard types.
That said, if you only deal with standard objects/types (<code>None</code>, <code>True</code>,
<code>False</code>, integers, floating point numbers, bytes, strings, tuples and
dictionaries) you are fine to use this module to produce or consume data that is
targeted at or originates from other programming languages.
The following documentation is largely adapted from Python's <a href="https://docs.python.org/3.5/library/pickle.html" rel="nofollow">pickle module
documentation</a>.</p>
<p><strong>See also:</strong> <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a></p>
<hr>
<a name="user-content-what-can-be-packed-and-unpacked"></a>
<h6>
What can be packed and unpacked?</h6>
<p>The following standard types can be packed/unpacked:</p>
<ul>
<li>
<code>None</code>, <code>True</code> and <code>False</code>
</li>
<li>integers, floating point numbers</li>
<li>strings, bytes</li>
<li>tuples and dictionaries containing only packable objects</li>
</ul>
<p>Additionally, the following Python types are supported by default:</p>
<ul>
<li>complex numbers</li>
<li>bytearrays</li>
<li>lists, sets and frozensets containing only packable objects</li>
<li>classes (these <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked)</li>
<li>instances of classes whose <code>__reduce__</code> method conforms to the interface
defined in <a href="#packing-class-instances">Packing Class Instances</a>
</li>
</ul>
<a name="user-content-module-interface"></a>
<h6>
Module Interface</h6>
<dl id="user-content-registered">
<dt>register(object)</dt>
<dd>Add <em>object</em> to the <em>registry</em>. <em>object</em> must be a class or a singleton
(instance whose <code>__reduce__</code> method returns a string).</dd>
<dt>pack(object)</dt>
<dd>Return the packed representation of <em>object</em> as a bytearray object.</dd>
<dt>unpack(message)</dt>
<dd>Read a packed object hierarchy from a <a href="https://docs.python.org/3.5/glossary.html#term-bytes-like-object" rel="nofollow">bytes-like</a>
<em>message</em> and return the reconstituted object hierarchy specified therein.</dd>
</dl>
<a name="user-content-packing-class-instances"></a>
<h6>
Packing Class Instances</h6>
<p><strong>Note:</strong> This being chiefly based on <a href="https://docs.python.org/3.5/library/pickle.html#object.__reduce__" rel="nofollow">pickle's object.__reduce__() interface</a>,
most built-in objects and most objects defined in the Python standard library
already conform to it.</p>
<dl id="user-content-reduce">
<dt>object.__reduce__()</dt>
<dd>
<p>The interface is currently defined as follows: the <code>__reduce__</code> method takes
no argument and shall return either a unique string or preferably a tuple.</p>
<p>If a string is returned, the string should be interpreted as the name of a
global variable. This behaviour is typically useful for singletons (and is the
case for built-in functions).</p>
<p>When a tuple is returned, it must be between two and five items long.
Optional items can either be omitted, or <code>None</code> can be provided as their
value. The semantics of each item are in order:</p>
<ul>
<li>A callable object that will be invoked to create the initial version of the
object (it <strong>must</strong> be <a href="#registered">registered</a> in order to be unpacked).</li>
<li>A tuple of arguments for the callable object. An empty tuple must be given
if the callable does not accept any argument.</li>
<li>Optionally, the object's state, which will be passed to the object's
<code>__setstate__</code> method. If the object has no such method then, the value
must be a dictionary and it will be added to the object's <code>__dict__</code>
attribute.</li>
<li>Optionally, a sequence/iterator yielding successive items. These items
will be appended to the object using <code>object.extend(items)</code>. This is
primarily used for list subclasses, but may be used by other classes as long
as they have an <code>extend</code> method with the appropriate signature. If the
object has no such method then, an in-place concatenation will be attempted
(equivalent to <code>object += items</code>).</li>
<li>Optionally, a dict/mapping or a sequence/iterator yielding successive
key-value pairs.  These pairs will be stored in the object using
<code>object.update(pairs)</code>. This is primarily used for dictionary subclasses,
but may be used by other classes as long as they have an <code>update</code> method
with the appropriate signature. If the object has no such method then, an
attempt will be made to store these pairs using <code>object[key] = value</code>.</li>
</ul>
<p>A simple example:</p>
<div><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> mood.msgpack <span>import</span> pack, unpack, register
<span>&gt;&gt;</span><span>&gt;</span> <span>class</span> <span>Kiki</span>(<span>object</span>):
<span>...</span>     <span>def</span> <span>__init__</span>(<span><span>self</span></span>, <span>a</span>, <span>b</span>):
<span>...</span>         <span>self</span>.a <span>=</span> a
<span>...</span>         <span>self</span>.b <span>=</span> b
<span>...</span>     <span>def</span> <span>__repr__</span>(<span><span>self</span></span>):
<span>...</span>         <span>return</span> <span><span>"</span>&lt;Kiki object: a=<span>{0.a}</span>, b=<span>{0.b}</span>&gt;<span>"</span></span>.format(<span>self</span>)
<span>...</span>     <span>def</span> <span>__reduce__</span>(<span><span>self</span></span>):
<span>...</span>         <span>return</span> (Kiki, (<span>self</span>.a, <span>self</span>.b))
<span>...</span>
<span>&gt;&gt;</span><span>&gt;</span> k <span>=</span> Kiki(<span>1</span>, <span>2</span>)
<span>&gt;&gt;</span><span>&gt;</span> k
<span>&lt;</span>Kiki <span>object</span>: a<span>=</span><span>1</span>, b<span>=</span><span>2</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> b <span>=</span> pack(k)
<span>&gt;&gt;</span><span>&gt;</span> b
<span>bytearray</span>(<span><span>b</span><span>'</span><span>\xc7\x15\x7f\x92\xc7\x0e\x06\xa8</span>__main__<span>\xa4</span>Kiki<span>\x92\x01\x02</span><span>'</span></span>)
<span>&gt;&gt;</span><span>&gt;</span> unpack(b)
Traceback (most recent call last):
  File <span><span>"</span>&lt;stdin&gt;<span>"</span></span>, line <span>1</span>, <span>in</span> <span>&lt;</span>module<span>&gt;</span>
<span>TypeError</span>: cannot unpack <span>&lt;</span><span>class</span> <span><span>'</span>__main__.Kiki<span>'</span></span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> register(Kiki)
<span>&gt;&gt;</span><span>&gt;</span> unpack(b)
<span>&lt;</span>Kiki <span>object</span>: a<span>=</span><span>1</span>, b<span>=</span><span>2</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span></pre></div>
</dd>
</dl>

</article>
  </div>
        </div>
        
        <div id="qs-dchenk-msgp"><h4><a href="https://github.com/dchenk/msgp" target="_blank">dchenk/msgp <span>https://github.com/dchenk/msgp</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack Code Generator and Library for Go</h5>
<p><a href="https://travis-ci.org/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/4675b44ed067a684a3a78b4ee43f7e0767d87d07/68747470733a2f2f7472617669732d63692e6f72672f646368656e6b2f6d7367702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/dchenk/msgp.svg?branch=master"></a>
<a href="https://goreportcard.com/badge/github.com/dchenk/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/c84188e8023231fa18c8640a834a79bf8c4812ed/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f646368656e6b2f6d736770" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/dchenk/msgp"></a>
<a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><img src="https://camo.githubusercontent.com/7fe94cb6b136ceb951800d0c5d08d0731231fd24/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f646368656e6b2f6d7367703f7374617475732e737667" alt="GoDoc" data-canonical-src="https://godoc.org/github.com/dchenk/msgp?status.svg"></a></p>
<p>This is a code generation tool and serialization library for MessagePack. You can read more about MessagePack <a href="https://github.com/dchenk/msgp/wiki">in the wiki</a>
or at <a href="https://msgpack.org/" rel="nofollow">msgpack.org</a>.</p>
<p><strong>This library is no longer being maintained. You should be using <a href="https://developers.google.com/protocol-buffers/" rel="nofollow">Protocol Buffers</a> for binary data serialization</strong></p>
<h7>
Top Features</h7>
<ul>
<li>Use Go as your schema language</li>
<li>Performance is amazing</li>
<li>JSON <a href="https://godoc.org/github.com/dchenk/msgp/msgp#CopyToJSON" rel="nofollow">interoperability</a>
</li>
<li>Type safety</li>
<li>Support for complex type declarations</li>
<li>Define your own <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">MessagePack extensions</a>
</li>
<li>Automatic unit test and benchmark generation</li>
<li>Native support for Gos <code>time.Time</code>, <code>complex64</code>, and <code>complex128</code> types</li>
<li><a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">Preprocessor directives</a></li>
<li>Generation of both <code>[]byte</code>-oriented and <code>io.Reader/io.Writer</code>-oriented methods</li>
</ul>
<h7>
Quickstart</h7>
<p>In a Go code source file, include the following directive:</p>

<p>Within the directory with the file where you placed that directive, run <code>go generate</code>.</p>
<p>The <code>msgp</code> command will tell the <code>go generate</code> tool to generate serialization and deserialization methods (functions) for all exported types in the file. These custom-built functions enable you to use package <a href="https://godoc.org/github.com/dchenk/msgp/msgp" rel="nofollow"><code>msgp</code></a> to efficiently encode objects to and from the MessagePack format.</p>
<p>You can <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator">read more about the code generation options here</a>.</p>
<h7>
Use</h7>
<p>Struct field names can be set the same way as with the <code>encoding/json</code> package. For example:</p>
<div><pre><span>type</span> <span>Person</span> <span>struct</span> {
    <span>Name</span>       <span>string</span> <span><span>`</span>msgp:"name"<span>`</span></span>
    <span>Address</span>    <span>string</span> <span><span>`</span>msgp:"address"<span>`</span></span>
    <span>Age</span>        <span>int</span>    <span><span>`</span>msgp:"age"<span>`</span></span>
    <span>Hidden</span>     <span>string</span> <span><span>`</span>msgp:"-"<span>`</span></span> <span><span>//</span> this field is ignored</span>
    unexported <span>bool</span>              <span><span>//</span> this field is also ignored</span>
}</pre></div>
<p>(The struct field tags are optional.)</p>
<p>By default, the code generator will satisfy <code>msgp.Sizer</code>, <code>msgp.Encoder</code>, <code>msgp.Decoder</code>, <code>msgp.Marshaler</code>, and <code>msgp.Unmarshaler</code>.
Youll often find that much marshalling and unmarshalling will be done with zero heap allocations.</p>
<p>Although <code>msgp.Marshaler</code> and <code>msgp.Unmarshaler</code> are similar to the standard librarys <code>json.Marshaler</code> and <code>json.Unmarshaler</code>,
<code>msgp.Encoder</code> and <code>msgp.Decoder</code> are useful for stream serialization. (<code>*msgp.Writer</code> and <code>*msgp.Reader</code> are essentially
protocol-aware versions of <code>*bufio.Writer</code> and <code>*bufio.Reader</code>.)</p>
<p>Consider the following:</p>
<div><pre><span>const</span> <span>Eight</span> = <span>8</span>
<span>type</span> <span>MyInt</span> <span>int</span>
<span>type</span> <span>Data</span> []<span>byte</span>

<span>type</span> <span>Struct</span> <span>struct</span> {
    <span>Which</span>  <span>map</span>[<span>string</span>]*MyInt <span><span>`</span>msgp:"which"<span>`</span></span>
    <span>Other</span>  <span>Data</span>              <span><span>`</span>msgp:"other"<span>`</span></span>
    <span>Nums</span>   [Eight]<span>float64</span>    <span><span>`</span>msgp:"nums"<span>`</span></span>
}</pre></div>
<p>As long as the declarations of <code>MyInt</code> and <code>Data</code> are in the same file as <code>Struct</code>, the parser will determine that the type information
for <code>MyInt</code> and <code>Data</code> can be passed into the definition of <code>Struct</code> before its methods are generated.</p>
<h8>
Extensions</h8>
<p>MessagePack supports defining your own types through "extensions," which are just a tuple of the data "type" (<code>int8</code>) and the raw binary.
You can see <a href="https://github.com/dchenk/msgp/wiki/Using-Extensions">a worked example in the wiki.</a></p>
<h7>
Status</h7>
<p>The code generator here and runtime library are both stable. Newer versions of the code may generate different code than older versions
for performance reasons.</p>
<p>You can read more about how <code>msgp</code> maps MessagePack types onto Go types <a href="https://github.com/dchenk/msgp/wiki">in the wiki</a>.</p>
<p>Here some of the known limitations/restrictions:</p>
<ul>
<li>Identifiers from outside the processed source file are assumed to satisfy the generator's interfaces. If this isn't the case, your code
will fail to compile.</li>
<li>The <code>chan</code> and <code>func</code> fields and types are ignored as well as un-exported fields.</li>
<li>Encoding of <code>interface{}</code> is limited to built-ins or types that have explicit encoding methods.</li>
<li>Maps must have <code>string</code> keys. This is intentional (as it preserves JSON interoperability). Although non-string map keys are not forbidden
by the MessagePack standard, many serializers impose this restriction. (It also means <em>any</em> well-formed <code>struct</code> can be decoded into a
<code>map[string]interface{}</code>.) The only exception to this rule is that the decoders will allow you to read map keys encoded as <code>bin</code> types,
since some legacy encodings permitted this. (However, those values will still be cast to Go <code>string</code>s, and they will be converted to <code>str</code>
types when re-encoded. It is the responsibility of the user to ensure that map keys are UTF-8 safe in this case.) The same rules hold true
for JSON translation.</li>
</ul>
<p>If the output compiles, then there's a pretty good chance things are fine. (Plus, we generate tests for you.) Please file an issue if you
think the generator is writing broken code.</p>
<h7>
Performance</h7>
<p>If you like benchmarks, see <a href="https://github.com/dchenk/messagepack-benchmarks">here</a>, <a href="http://bravenewgeek.com/so-you-wanna-go-fast/" rel="nofollow">here</a>,
and <a href="https://github.com/alecthomas/go_serialization_benchmarks">here</a>.</p>
<h6>
Credits</h6>
<p>This repository is a fork of github.com/tinylib/msgp.</p>
<p>Differences between this tool and tinylib/msgp:</p>
<ul>
<li>Here we have <a href="https://github.com/dchenk/msgp/wiki/Using-the-Code-Generator#matching-type-names">regular expression matching</a> for type
names in directives.</li>
<li>Here we do not use package <code>unsafe</code> for conversions from byte slices to strings: <code>[]byte</code> is converted quite efficiently to <code>string</code>
simply with the built-in <code>string()</code>.</li>
<li>This codebase is thoroughly refactored to be more Go-idiomatic and efficient.</li>
</ul>
<p>You're welcome to contribute!</p>
</article>
  </div>
        </div>
        
        <div id="qs-cherrywoods-swift-msgpack-serialization"><h4><a href="https://github.com/cherrywoods/swift-msgpack-serialization" target="_blank">cherrywoods/swift-msgpack-serialization <span>https://github.com/cherrywoods/swift-msgpack-serialization</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
swift-msgpack-serialization</h5>
<p><a href="https://github.com/Carthage/Carthage"><img src="https://camo.githubusercontent.com/3dc8a44a2c3f7ccd5418008d1295aae48466c141/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43617274686167652d636f6d70617469626c652d3442433531442e7376673f7374796c653d666c6174" alt="Carthage compatible" data-canonical-src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat"></a></p>
<p>Another swift serialization library for msgpack with support for the Codable environement.</p>
<p>This framework is designed to be (optionaly) compatibel to the msgpack-java library.
See <a href="https://github.com/cherrywoods/swift-msgpack-serialization/blob/master/Compatibility.md">Compatibility.md</a> for more detailed information about this.</p>
<p>Please make sure, that the swift model classes and java model classes you use are compatibel to each other, e.g. enums are named equaly (including case).</p>
<p>This framework also supplies the possibiliy to encode keys of other types than String (generalContainer function of MsgpackEncoder).</p>
<p>swift-msgpack-serialization works with <a href="https://github.com/a2/MessagePack.swift">MessagePack.swift</a>. This means, that you can encode your classes, structs and enums, that conform to Codable to MessagePackValue from MessagePack.swift, do something with this MessagePackValue and then encode it to msgpack using MessagePack.swift. You may of course also decode to MessagePackValue first and then decode a particular MessagePackValue to your own type.</p>
<h6>
Instalation</h6>
<p>Currently, only carthage is supported.</p>
<h6>
Compatibilty restrictions</h6>
<p>Make sure you never call .encode(to:) directly! Instead use the encode method on a keyed, unkeyed or singleValue container or cast the encoder passed to you to MsgpackEncoder and call encodeIntermediate(_) on this encoder. If you do not use this, this framework won't be able to do it's work properly.</p>
</article>
  </div>
        </div>
        
        <div id="qs-bastibe-matlab-msgpack"><h4><a href="https://github.com/bastibe/matlab-msgpack" target="_blank">bastibe/matlab-msgpack <span>https://github.com/bastibe/matlab-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
A MessagePack implementation for Matlab</h5>
<p>The code is written in pure Matlab, and has no dependencies beyond Matlab itself. It does not work in Octave, since Octave does not support <code>unicode2native</code> or <code>native2unicode</code>.</p>
<p>The files in this repository are taken from <a href="https://github.com/bastibe/transplant">Transplant</a>.</p>
<h6>
Basic Usage:</h6>
<div><pre>data = {<span><span>'</span>life, the universe, and everything<span>'</span></span>, struct(<span><span>'</span>the_answer<span>'</span></span>, <span>42</span>)};
bytes = dumpmsgpack(data)
data = parsemsgpack(bytes)
<span><span>%</span> returns: {'life, the universe, and everything', containers.Map('the_answer', 42)}</span></pre></div>
<h6>
Converting Matlab to MsgPack:</h6>
<table>
<thead>
<tr>
<th>Matlab</th>
<th>MsgPack</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>string</td>
</tr>
<tr>
<td>scalar</td>
<td>number</td>
</tr>
<tr>
<td>logical</td>
<td>
<code>true</code>/<code>false</code>
</td>
</tr>
<tr>
<td>vector</td>
<td>array of numbers</td>
</tr>
<tr>
<td>uint8 vector</td>
<td>bin</td>
</tr>
<tr>
<td>matrix</td>
<td>array of array of numbers</td>
</tr>
<tr>
<td>empty matrix</td>
<td>nil</td>
</tr>
<tr>
<td>cell array</td>
<td>array</td>
</tr>
<tr>
<td>cell matrix</td>
<td>array of arrays</td>
</tr>
<tr>
<td>struct</td>
<td>map</td>
</tr>
<tr>
<td>containers.Map</td>
<td>map</td>
</tr>
<tr>
<td>struct array</td>
<td>array of maps</td>
</tr>
<tr>
<td>handles</td>
<td>raise error</td>
</tr>
</tbody>
</table>
<p>There is no way of encoding exts</p>
<h6>
Converting MsgPack to Matlab</h6>
<table>
<thead>
<tr>
<th>MsgPack</th>
<th>Matlab</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>string</td>
</tr>
<tr>
<td>number</td>
<td>scalar</td>
</tr>
<tr>
<td>
<code>true</code>/<code>false</code>
</td>
<td>logical</td>
</tr>
<tr>
<td>nil</td>
<td>empty matrix</td>
</tr>
<tr>
<td>array</td>
<td>cell array</td>
</tr>
<tr>
<td>map</td>
<td>containers.Map</td>
</tr>
<tr>
<td>bin</td>
<td>uint8</td>
</tr>
<tr>
<td>ext</td>
<td>uint8</td>
</tr>
</tbody>
</table>
<p>Note that since <code>structs</code> don't support arbitrary field names, they can't be used for representing <code>maps</code>. We use <code>containers.Map</code> instead.</p>
<h6>
Tests</h6>

<h6>
License</h6>
<p>MATLAB (R) is copyright of the Mathworks</p>
<p>Copyright (c) 2014 Bastian Bechtold
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<ol>
<li>
<p>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</p>
</li>
<li>
<p>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the
distribution.</p>
</li>
<li>
<p>Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived
from this software without specific prior written permission.</p>
</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</article>
  </div>
        </div>
        
        <div id="qs-davethomas11-MoshiPack"><h4><a href="https://github.com/davethomas11/MoshiPack" target="_blank">davethomas11/MoshiPack <span>https://github.com/davethomas11/MoshiPack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MoshiPack</h5>
<p><a href="https://circleci.com/gh/davethomas11/MoshiPack/tree/master" rel="nofollow"><img src="https://camo.githubusercontent.com/349a1ca521253578bb556538bb0b5dda58b7f702/68747470733a2f2f636972636c6563692e636f6d2f67682f6461766574686f6d617331312f4d6f7368695061636b2f747265652f6d61737465722e7376673f7374796c653d737667" alt="CircleCI" data-canonical-src="https://circleci.com/gh/davethomas11/MoshiPack/tree/master.svg?style=svg"></a></p>
<h7>
Gradle</h7>
<pre><code><span>implementation com</span><span>.</span><span>daveanthonythomas</span><span>.</span><span>moshipack</span><span>:</span><span>moshipack</span><span>:</span><span>1.0</span><span>.</span><span>0</span><span>-</span><span>beta</span></code></pre>
<p>Optional Retrofit support:</p>
<pre><code><span>implementation com</span><span>.</span><span>daveanthonythomas</span><span>.</span><span>moshipack</span><span>:</span><span>moshipack</span><span>-</span><span>retrofit</span><span>:</span><span>1.0</span><span>.</span><span>0</span><span>-</span><span>beta</span></code></pre>
<h6>
About</h6>
<p>This is a Kotilin implementation of MessagePack serialization and deserialization built ontop of Moshi to take advantage of Moshi's type adapters and utilizes okio for reading and writing MessagePack bytes.</p>
<p>The library is intended to be consumed in a Kotlin project, and is not intended for Java use.</p>
<p>Inspired by Kaushik Gopal's <a href="https://twitter.com/kaushikgopal/status/961426258818039808" rel="nofollow">tweet</a></p>
<p>See <a href="https://github.com/square/moshi">Moshi</a> for adapter usage and reference.</p>
<h7>
Convert an object to <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> format</h7>
<div><pre><span>data</span> <span>class</span> <span>MessagePackWebsitePlug</span>(<span>var</span> <span>compact</span><span>:</span> <span>Boolean</span> <span>=</span> <span>true</span>, <span>var</span> <span>schema</span><span>:</span> <span>Int</span> <span>=</span> <span>0</span>)

<span>val</span> moshiPack <span>=</span> <span>MoshiPack</span>()
<span>val</span> packed<span>:</span> <span>BufferedSource</span> <span>=</span> moshiPack.pack(<span>MessagePackWebsitePlug</span>())

<span>println</span>(packed.readByteString().hex())</pre></div>
<p>This prints the MessagePack bytes as a hex string <strong>82a7636f6d70616374c3a6736368656d6100</strong></p>
<ul>
<li>
<strong>82</strong> - Map with two entries</li>
<li>
<strong>a7</strong> - String of seven bytes</li>
<li>
<strong>63 6f 6d 70 61 63 74</strong> - UTF8 String "compact"</li>
<li>
<strong>c3</strong> - Boolean value true</li>
<li>
<strong>a6</strong> - String of size bytes</li>
<li>
<strong>73 63 68 65 6d 61</strong> - UTF8 String "schema"</li>
<li>
<strong>00</strong> - Integer value 0</li>
</ul>
<h7>
Convert binary MessagePack back to an Object</h7>
<div><pre><span>val</span> bytes <span>=</span> <span>ByteString</span>.decodeHex(<span><span>"</span>82a7636f6d70616374c3a6736368656d6100<span>"</span></span>).toByteArray()

<span>val</span> moshiPack <span>=</span> <span>MoshiPack</span>()
<span>val</span> plug<span>:</span> <span>MessagePackWebsitePlug</span> <span>=</span> moshiPack.unpack(bytes)</pre></div>
<h7>
Static API</h7>
<p>If you prefer to not instantiate a <code>MoshiPack</code> instance you can access the API in a static fashion as well. Note this will create a new <code>Moshi</code> instance every time you make an API call. You may want to use the API this way if you aren't providing <code>MoshiPack</code> by some form of dependency injection and you do not have any specific builder parameters for <code>Moshi</code></p>
<hr>
<h6>
Format Support</h6>
<p>See <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack format spec</a> for further reference.</p>
<table>
  <tbody>
<tr>
<th>format name</th>
<th>first byte (in binary)</th>
<th>first byte (in hex)</th>
<th>Supported</th>
</tr>
  <tr>
<td>positive fixint</td>
<td>0xxxxxxx</td>
<td>0x00 - 0x7f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixmap</td>
<td>1000xxxx</td>
<td>0x80 - 0x8f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixarray</td>
<td>1001xxxx</td>
<td>0x90 - 0x9f</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixstr</td>
<td>101xxxxx</td>
<td>0xa0 - 0xbf</td>
<td>Yes</td>
</tr>
  <tr>
<td>nil</td>
<td>11000000</td>
<td>0xc0</td>
<td>Yes</td>
</tr>
  <tr>
<td>(never used)</td>
<td>11000001</td>
<td>0xc1</td>
<td>Yes</td>
</tr>
  <tr>
<td>false</td>
<td>11000010</td>
<td>0xc2</td>
<td>Yes</td>
</tr>
  <tr>
<td>true</td>
<td>11000011</td>
<td>0xc3</td>
<td>Yes</td>
</tr>
  <tr>
<td>bin 8</td>
<td>11000100</td>
<td>0xc4</td>
<td>No</td>
</tr>
  <tr>
<td>bin 16</td>
<td>11000101</td>
<td>0xc5</td>
<td>No</td>
</tr>
  <tr>
<td>bin 32</td>
<td>11000110</td>
<td>0xc6</td>
<td>No</td>
</tr>
  <tr>
<td>ext 8</td>
<td>11000111</td>
<td>0xc7</td>
<td>No</td>
</tr>
  <tr>
<td>ext 16</td>
<td>11001000</td>
<td>0xc8</td>
<td>No</td>
</tr>
  <tr>
<td>ext 32</td>
<td>11001001</td>
<td>0xc9</td>
<td>No</td>
</tr>
  <tr>
<td>float 32</td>
<td>11001010</td>
<td>0xca</td>
<td>Yes</td>
</tr>
  <tr>
<td>float 64</td>
<td>11001011</td>
<td>0xcb</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 8</td>
<td>11001100</td>
<td>0xcc</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 16</td>
<td>11001101</td>
<td>0xcd</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 32</td>
<td>11001110</td>
<td>0xce</td>
<td>Yes</td>
</tr>
  <tr>
<td>uint 64</td>
<td>11001111</td>
<td>0xcf</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 8</td>
<td>11010000</td>
<td>0xd0</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 16</td>
<td>11010001</td>
<td>0xd1</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 32</td>
<td>11010010</td>
<td>0xd2</td>
<td>Yes</td>
</tr>
  <tr>
<td>int 64</td>
<td>11010011</td>
<td>0xd3</td>
<td>Yes</td>
</tr>
  <tr>
<td>fixext 1</td>
<td>11010100</td>
<td>0xd4</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 2</td>
<td>11010101</td>
<td>0xd5</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 4</td>
<td>11010110</td>
<td>0xd6</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 8</td>
<td>11010111</td>
<td>0xd7</td>
<td>No</td>
</tr>
  <tr>
<td>fixext 16</td>
<td>11011000</td>
<td>0xd8</td>
<td>No</td>
</tr>
  <tr>
<td>str 8</td>
<td>11011001</td>
<td>0xd9</td>
<td>Yes</td>
</tr>
  <tr>
<td>str 16</td>
<td>11011010</td>
<td>0xda</td>
<td>Yes</td>
</tr>
  <tr>
<td>str 32</td>
<td>11011011</td>
<td>0xdb</td>
<td>Yes</td>
</tr>
  <tr>
<td>array 16</td>
<td>11011100</td>
<td>0xdc</td>
<td>Yes</td>
</tr>
  <tr>
<td>array 32</td>
<td>11011101</td>
<td>0xdd</td>
<td>Yes</td>
</tr>
  <tr>
<td>map 16</td>
<td>11011110</td>
<td>0xde</td>
<td>Yes</td>
</tr>
  <tr>
<td>map 32</td>
<td>11011111</td>
<td>0xdf</td>
<td>Yes</td>
</tr>
  <tr>
<td>negative fixint</td>
<td>111xxxxx</td>
<td>0xe0 - 0xff</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<hr>
<h6>
API</h6>
<h7>
pack</h7>
<p>Serializes an object into MessagePack. <strong>Returns:</strong> <code>okio.BufferedSource</code></p>
<p>Instance version:</p>
<div><pre><span>MoshiPack</span>().pack(anyObject)</pre></div>
<p>Static version:</p>
<div><pre><span>MoshiPack</span>.pack(anyObject)</pre></div>
<h7>
packToByeArray</h7>
<p>If you prefer to get a <code>ByteArray</code> instead of a <code>BufferedSource</code> you can use this method.</p>
<p>Instance version only</p>
<div><pre><span>MoshiPack</span>().packToByteArray(anObject)</pre></div>
<p>Static can be done</p>
<div><pre><span>MoshiPack</span>.pack(anObject).readByteArray()</pre></div>
<h7>
unpack</h7>
<p>Deserializes MessagePack bytes into an Object. <strong>Returns:</strong> <code>T: Any</code>
Works with <code>ByteArray</code> and <code>okio.BufferedSource</code></p>
<p>Instance version:</p>
<div><pre><span><span>//</span> T must be valid type so Moshi knows what to deserialize to</span>
<span>val</span> unpacked<span>:</span> <span>T</span> <span>=</span> <span>MoshiPack</span>().unpack(byteArray)</pre></div>
<p>Static version:</p>
<div><pre><span>val</span> unpacked<span>:</span> <span>T</span> <span>=</span> <span>MoshiPack</span>.upack(byteArray)</pre></div>
<p>Instance version:</p>
<div><pre><span>val</span> unpacked<span>:</span> <span>T</span> <span>=</span> <span>MoshiPack</span>().unpack(bufferedSource)</pre></div>
<p>Static version:</p>
<div><pre><span>val</span> unpacked<span>:</span> <span>T</span> <span>=</span> <span>MoshiPack</span>.upack(bufferedSource)</pre></div>
<p>T can be an Object, a List, a Map, and can include generics. Unlike <code>Moshi</code> you do not need to specify a parameterized type to deserialize to a List with generics. <code>MoshiPack</code> can infer the paramterized type for you.</p>
<p>The following examples are valid for <code>MoshiPack</code>:</p>
<p>A typed List</p>
<div><pre><span>val</span> listCars<span>:</span> <span>List</span>&lt;<span>Car</span>&gt; <span>=</span> <span>MoshiPack</span>.unpack(carMsgPkBytes)</pre></div>
<p>A List of Any</p>
<div><pre><span>val</span> listCars<span>:</span> <span>List</span>&lt;<span>Any</span>&gt; <span>=</span> <span>MoshiPack</span>.unpack(carMsgPkBytes)</pre></div>
<p>An Object</p>
<div><pre><span>val</span> car<span>:</span> <span>Car</span> <span>=</span> <span>MoshiPack</span>.unpack(carBytes)</pre></div>
<p>A Map of Any, Any</p>
<div><pre><span>val</span> car<span>:</span> <span>Map</span>&lt;<span>Any</span>, <span>Any</span>&gt; <span>=</span> <span>MoshiPack</span>.unpack(carBytes)</pre></div>
<h7>
msgpackToJson</h7>
<p>Convert directly from MessagePack bytes to JSON. Use this method for the most effecient implementation as no objects are instantiated in the process. This uses the <code>FormatInterchange</code> class to match implementations of <code>JsonReader</code> and a <code>JsonWriter</code>. If you wanted to say support XML as a direct conversion to and from, you could implement Moshi's <code>JsonReader</code> and <code>JsonWriter</code> classes and use the <code>FormatInterchange</code> class to convert directly to other formats. <strong>Returns</strong> <code>String</code> containing a JSON representation of the MessagePack data</p>
<p>Instance versions: (takes <code>ByteArray</code> or <code>BufferedSource</code>)</p>
<div><pre><span>MoshiPack</span>().msgpackToJson(byteArray)</pre></div>
<div><pre><span>MoshiPack</span>().msgpackToJson(bufferedSource)</pre></div>
<p>Static versions: (takes <code>ByteArray</code> or <code>BufferedSource</code>)</p>
<div><pre><span>MoshiPack</span>.msgpackToJson(byteArray)</pre></div>
<div><pre><span>MoshiPack</span>.msgpackToJson(bufferedSource)</pre></div>
<h7>
jsonToMsgpack</h7>
<p>Convert directly from JSON to MessagePack bytes. Use this method for the most effecient implementation as no objects are instantiated in the process. <strong>Returns</strong> <code>BufferedSource</code></p>
<p>Instance versions: (takes <code>String</code> or <code>BufferedSource</code>)</p>
<div><pre><span>MoshiPack</span>().jsonToMsgpack(jsonString)</pre></div>
<div><pre><span>MoshiPack</span>().jsonToMsgpack(bufferedSource)</pre></div>
<p>Static versions: (takes <code>String</code> or <code>BufferedSource</code>)</p>
<div><pre><span>MoshiPack</span>.jsonToMsgpack(jsonString)</pre></div>
<div><pre><span>MoshiPack</span>.jsonToMsgpack(bufferedSource)</pre></div>
<h7>
MoshiPack - constructor + Moshi builder</h7>
<p>The <code>MoshiPack</code> constructor takes an optional <code>Moshi.Builder.() -&gt; Unit</code> lambda which is applied to the builder that is used to instantiate the <code>Moshi</code> instance it uses.</p>
<p>Example adding custom adapter:</p>
<div><pre><span>val</span> moshiPack <span>=</span> <span>MoshiPack</span>({
  add(customAdapter)
})</pre></div>
<p><code>Moshi</code> is also a settable property which can be changed on a <code>MoshiPack</code> instance:</p>
<div><pre><span>val</span> m <span>=</span> <span>MoshiPack</span>()
m.moshi <span>=</span> <span>Moshi</span>.<span>Builder</span>().build()</pre></div>
<p>The static version of the API also can be passed a lambda to applied to the <code>Moshi.Builder</code> used to instantiate <code>Moshi</code>:</p>
<div><pre><span>MoshiPack</span>.pack(someBytes) { add(customAdapter) }</pre></div>
<hr>
<h6>
Kotiln Support</h6>
<p>Since this library is intended for Kotlin use, the <code>moshi-kotlin</code> artifact is included as a depedency. A <code>KotlinJsonAdapterFactory</code> is added by default to the instantiated <code>Moshi</code> that <code>MoshiPack</code> uses.
This adapter allows for the use of <code>Moshi</code>'s annotaions in Kotlin. To learn more about it see the <a href="https://github.com/square/moshi"><code>Moshi</code></a> documentation.</p>
<p>If you'd like to use <code>Moshi</code> with out a <code>KotlinJsonAdapterFactory</code> supply a <code>Moshi</code> instance for <code>MoshiPack</code>:</p>
<div><pre><span>MoshiPack</span>(moshi <span>=</span> <span>Moshi</span>.<span>Builder</span>().build)</pre></div>
<h6>
ProGuard</h6>
<p>From <code>Moshi</code>'s README.md;
If you are using ProGuard you might need to add the following options:</p>
<pre><code><span>-</span><span>dontwarn okio</span><span>.**</span><span>
</span><span>-</span><span>dontwarn javax</span><span>.</span><span>annotation</span><span>.**</span><span>
</span><span>-</span><span>keepclasseswithmembers </span><span>class</span><span> </span><span>*</span><span> </span><span>{</span><span>
    </span><span>@com</span><span>.</span><span>squareup</span><span>.</span><span>moshi</span><span>.*</span><span> </span><span>&lt;methods&gt;</span><span>;</span><span>
</span><span>}</span><span>
</span><span>-</span><span>keep </span><span>@com</span><span>.</span><span>squareup</span><span>.</span><span>moshi</span><span>.</span><span>JsonQualifier</span><span> </span><span>interface</span><span> </span><span>*</span><span>
</span><span>-</span><span>keepclassmembers </span><span>class</span><span> kotlin</span><span>.</span><span>Metadata</span><span> </span><span>{</span><span>
    </span><span>public</span><span> </span><span>&lt;methods&gt;</span><span>;</span><span>
</span><span>}</span></code></pre>
<h6>
Retrofit</h6>
<p>An example of using the retorfit adapter can be found here:
<a href="https://github.com/davethomas11/MoshiPack_AndroidAppExample">https://github.com/davethomas11/MoshiPack_AndroidAppExample</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-mradziwo-MsgPack_LabVIEW"><h4><a href="https://github.com/mradziwo/MsgPack_LabVIEW" target="_blank">mradziwo/MsgPack_LabVIEW <span>https://github.com/mradziwo/MsgPack_LabVIEW</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MsgPack_Lab-VIEW</h5>
<p>MsgPack_Lab-VIEW is a lightweight MessagePack serializer and deserializer library written in native LabVIEW 2016.</p>
<p>One can decode a MsgPack message to LabVIEW variant containing correct type, or - when type is known at compile time - one can use dedicated decode functions for each supported type.</p>
</article>
  </div>
        </div>
        
        <div id="qs-pkcsecurity-msgpack-cljs"><h4><a href="https://github.com/pkcsecurity/msgpack-cljs" target="_blank">pkcsecurity/msgpack-cljs <span>https://github.com/pkcsecurity/msgpack-cljs</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack-cljs</h5>
<p>A Clojurescript implementation of msgpack. This library's structure is <em>heavily</em> adapted from the great work done on <a href="https://github.com/edma2/clojure-msgpack">clojure-msgpack</a>. Support for Clojure <code>keyword</code>, <code>symbol</code>, <code>char</code>, <code>ratio</code>, and <code>set</code> are all included by default as Extension types for convenience and to be compatible with <code>clojure-msgpack</code>.</p>
<h6>
Usage</h6>
<p><code>pack</code> takes an arbitrary object and converts it into a <code>Uint8Array</code>.</p>
<p><code>unpack</code> takes a <code>Uint8Array</code> and converts it back into an arbitrary object.</p>
<h6>
Improvements</h6>
<p>This library could stand to be refactored. We just use this internally at <a href="https://pkc.io/" rel="nofollow">PKC</a>, so, if there is demand (or interest) in making this more feature-rich, we are open to making improvements. Just be vocal, otherwise we'll keep it simple.</p>
<h6>
Copyright</h6>
<p>Copyright 2018 PKC</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at:</p>
<p><a href="https://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</article>
  </div>
        </div>
        
        <div id="qs-dankogai-swift-sion"><h4><a href="https://github.com/dankogai/swift-sion" target="_blank">dankogai/swift-sion <span>https://github.com/dankogai/swift-sion</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
SION supports MessagePack natively</h5>
<h6>
Synopsis</h6>
<div><pre><span>import</span> <span>SION</span>
<span>import</span> <span>Foundation</span>
<span>let</span> data    <span>=</span> <span>Data</span>([    <span><span>//</span> ["compact":true,"schema":0]</span>
<span></span>    <span>0x82</span>,<span>0xa7</span>,<span>0x63</span>,<span>0x6f</span>,<span>0x6d</span>,<span>0x70</span>,<span>0x61</span>,<span>0x63</span>,
    <span>0x74</span>,<span>0xc3</span>,<span>0xa6</span>,<span>0x73</span>,<span>0x63</span>,<span>0x68</span>,<span>0x65</span>,<span>0x6d</span>,
    <span>0x61</span>,<span>0x00</span>
])
<span>let</span> sion    <span>=</span> <span>SION</span>(<span>msgPack</span>: data)  <span><span>//</span> deselialize</span>
<span></span><span>let</span> msgPack <span>=</span> sion.<span>msgPack</span>         <span><span>//</span> serialize</span>
<span></span>data <span>==</span> msgPack                    <span><span>//</span> true</span></pre></div>
<p>for details of the module, visit:</p>
<ul>
<li><a href="https://github.com/dankogai/swift-sion">https://github.com/dankogai/swift-sion</a></li>
</ul>
<p>for details of the SION serialization format, visit:</p>
<ul>
<li><a href="https://dankogai.github.io/SION" rel="nofollow">https://dankogai.github.io/SION</a></li>
</ul>
</article>
  </div>
        </div>
        
        <div id="qs-ygoe-msgpack-js"><h4><a href="https://github.com/ygoe/msgpack.js" target="_blank">ygoe/msgpack.js <span>https://github.com/ygoe/msgpack.js</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
msgpack.js</h5>
<p>This is a <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> serializer and deserializer written in JavaScript for web browsers (including IE 11) and Node.js.</p>
<p>It is compact but still fully-featured. This library supports the complete <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">MessagePack specification</a> released on 2017-08-09, including date/time values. No other extension types are implemented in this library, its only the standard types which is perfectly fine for interoperability with MessagePack codecs in other programming languages.</p>
<p>Im using the <a href="https://github.com/neuecc/MessagePack-CSharp/">MessagePack-CSharp</a> library on the server side in my .NET applications.</p>
<p><a href="https://www.npmjs.com/package/@ygoe/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/f30e6d401a01d23f697504e6257365f82f11b15b/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f4079676f652f6d73677061636b2e737667" alt="NPM" data-canonical-src="https://img.shields.io/npm/v/@ygoe/msgpack.svg"></a></p>
<h6>
MessagePack</h6>
<p>MessagePack is an efficient binary serialisation format. It lets you exchange data among multiple languages like JSON. But its faster and smaller. Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
<h6>
Size</h6>
<p>This library is very lightweight. The source code has around <strong>510 lines</strong> (incl. browser/Node detection), the minified file has 6.6 kB and can be GZip-compressed to <strong>2.4 kB</strong>.</p>
<h6>
Performance</h6>
<p>The file msgpack-tests.html contains some tests and a benchmark function that compares this library with <a href="https://github.com/kawanet/msgpack-lite">msgpack-lite</a>. Here are the results, in milliseconds (lower is better). All tests done on an Intel Core i7-3770 and Windows 10.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Chrome 72</th>
<th></th>
<th>Firefox 65</th>
<th></th>
<th>Edge 16</th>
<th></th>
<th>IE 11</th>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>msgpack.js serialize</strong></td>
<td>702 ms</td>
<td>+6%</td>
<td>1232 ms</td>
<td>42%</td>
<td>2483 ms</td>
<td>+41%</td>
<td>2493 ms</td>
<td>3%</td>
</tr>
<tr>
<td>msgpack-lite encode</td>
<td>663 ms</td>
<td></td>
<td>2124 ms</td>
<td></td>
<td>1762 ms</td>
<td></td>
<td>2578 ms</td>
<td></td>
</tr>
<tr>
<td><strong>msgpack.js deserialize</strong></td>
<td>652 ms</td>
<td>+13%</td>
<td>869 ms</td>
<td>+5%</td>
<td>821 ms</td>
<td>48%</td>
<td>651 ms</td>
<td>68%</td>
</tr>
<tr>
<td>msgpack-lite decode</td>
<td>577 ms</td>
<td></td>
<td>827 ms</td>
<td></td>
<td>1587 ms</td>
<td></td>
<td>2021 ms</td>
<td></td>
</tr>
</tbody>
</table>
<p>The numbers show that this library is comparable with msgpack-lite. In Chrome its only 10% slower. But serializing in Firefox and deserializing in Microsoft browsers is twice as fast.</p>
<h6>
Usage</h6>
<h7>
Browser</h7>
<p>In browsers, a global <code>msgpack</code> object is created that contains the functions <code>serialize</code> and <code>deserialize</code>. The first can be called with any data and returns the serialized bytes. The second works in reverse, taking the serialized bytes and returning the runtime value.</p>
<p>Include the JavaScript file into your HTML document like this:</p>
<div><pre>&lt;<span>script</span> <span>src</span>=<span><span>"</span>msgpack.min.js<span>"</span></span>&gt;&lt;/<span>script</span>&gt;</pre></div>
<p>You can use the library functions after loading the script.</p>
<p>If there should be a naming conflict with another library you want to load, you can change the global object name from <code>msgpack</code> to something else by setting <code>msgpackJsName</code> before loading the script file:</p>
<div><pre>&lt;<span>script</span>&gt;<span></span>
<span>    msgpackJsName <span>=</span> <span><span>"</span>msgpackJs<span>"</span></span>;</span>
<span></span>&lt;/<span>script</span>&gt;
&lt;<span>script</span> <span>src</span>=<span><span>"</span>msgpack.min.js<span>"</span></span>&gt;&lt;/<span>script</span>&gt;</pre></div>
<h7>
Node.js</h7>
<p>In Node.js, these functions are exported in the object you get from the <code>require</code> function.</p>
<div><pre><span>var</span> msgpack <span>=</span> <span>require</span>(<span><span>'</span>@ygoe/msgpack<span>'</span></span>);</pre></div>
<h7>
Example</h7>
<p>Heres a simple example:</p>
<div><pre><span><span>//</span> Define some data</span>
<span>var</span> sourceData <span>=</span> {
    number<span>:</span> <span>123</span>,
    number2<span>:</span> <span>-</span><span>0.129</span>,
    text<span>:</span> <span><span>"</span>Abc with  and <span>"</span></span>,
    flag<span>:</span> <span>true</span>,
    list<span>:</span> [ <span>1</span>, <span>2</span>, <span>3</span> ],
    obj<span>:</span> { a<span>:</span> <span>1</span>, b<span>:</span> <span><span>"</span>2<span>"</span></span>, c<span>:</span> <span>false</span>, d<span>:</span> { a<span>:</span> <span>0</span>, b<span>:</span> <span>-</span><span>1</span> } },
    time<span>:</span> <span>Date</span>.<span>now</span>()
};

<span><span>//</span> Serialize to byte array</span>
<span>var</span> bytes <span>=</span> <span>msgpack</span>.<span>serialize</span>(sourceData);

<span><span>//</span> Deserialize again</span>
<span>var</span> deserializedData <span>=</span> <span>msgpack</span>.<span>deserialize</span>(bytes);</pre></div>
<h7>
Compatibility</h7>
<p>You can also use the functions <code>encode</code> and <code>decode</code> which are aliases to <code>serialize</code> and <code>deserialize</code>. This makes it easier to replace other libraries that use these function names with msgpack.js.</p>
<p>New projects should use the preferred (and more precisely named) <code>serialize</code> and <code>deserialize</code> functions though.</p>
<h6>
License</h6>
<p><a href="https://github.com/ygoe/msgpack.js/blob/master/LICENSE">MIT license</a></p>
</article>
  </div>
        </div>
        
        <div id="qs-shamaton-msgpack"><h4><a href="https://github.com/shamaton/msgpack" target="_blank">shamaton/msgpack <span>https://github.com/shamaton/msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Golang</h5>
<p><a href="https://godoc.org/github.com/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/dd5397cd45ecca699a9d532612c1a05455c321c3/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f7368616d61746f6e2f6d73677061636b3f7374617475732e737667" alt="GoDoc" data-canonical-src="https://godoc.org/github.com/shamaton/msgpack?status.svg"></a>
<a href="https://travis-ci.org/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/232ad32c6c6226d33c14f5131632bb7e9e1641bf/68747470733a2f2f7472617669732d63692e6f72672f7368616d61746f6e2f6d73677061636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/shamaton/msgpack.svg?branch=master"></a>
<a href="https://coveralls.io/github/shamaton/msgpack" rel="nofollow"><img src="https://camo.githubusercontent.com/ec57ee083c2de7b262498ba5140b0abe77ca72e0/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f7368616d61746f6e2f6d73677061636b2f62616467652e737667" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/shamaton/msgpack/badge.svg"></a>
<a href="https://github.com/shamaton/msgpack/releases"><img src="https://camo.githubusercontent.com/10db26bf54ef991444711efc05c42123110115a4/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f7368616d61746f6e2f6d73677061636b2e737667" alt="Releases" data-canonical-src="https://img.shields.io/github/release/shamaton/msgpack.svg"></a></p>
<ul>
<li>Supported types : primitive / array / slice / struct / map / interface{} and time.Time</li>
<li>Renames fields via <code>msgpack:"field_name"</code>
</li>
<li>Ignores fields via <code>msgpack:"ignore"</code>
</li>
<li>Supports extend encoder / decoder</li>
<li>Can also Encoding / Decoding struct as array</li>
</ul>
<h6>
Installation</h6>
<div><pre>go get -u github.com/shamaton/msgpack</pre></div>
<h6>
Quick Start</h6>
<div><pre><span>package</span> main;

<span>import</span> (
  <span><span>"</span>github.com/shamaton/msgpack<span>"</span></span>
)

<span>func</span> <span>main</span>() {
	<span>type</span> Struct <span>struct</span> {
		String <span>string</span>
	}
	<span>v</span> <span>:=</span> Struct{String: <span><span>"</span>msgpack<span>"</span></span>}

	<span>d</span>, <span>err</span> <span>:=</span> msgpack.<span>Encode</span>(v)
	<span>if</span> err != <span>nil</span> {
		<span>panic</span>(err)
	}
	<span>r</span> <span>:=</span> Struct{}
	err = msgpack.<span>Decode</span>(d, &amp;r)
	<span>if</span> err != <span>nil</span> {
		<span>panic</span>(err)
	}
}</pre></div>
<h6>
Benchmark</h6>
<p>This result made from <a href="https://github.com/shamaton/msgpack_bench">shamaton/msgpack_bench</a></p>
<h7>
Encode</h7>
<pre><code><span>BenchmarkCompareEncodeShamaton</span><span>-</span><span>8</span><span>           	 </span><span>1000000</span><span>	      </span><span>1319</span><span> ns</span><span>/</span><span>op	     </span><span>320</span><span> B</span><span>/</span><span>op	       </span><span>3</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeShamatonArray</span><span>-</span><span>8</span><span>      	 </span><span>1000000</span><span>	      </span><span>1172</span><span> ns</span><span>/</span><span>op	     </span><span>256</span><span> B</span><span>/</span><span>op	       </span><span>3</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeVmihailenco</span><span>-</span><span>8</span><span>        	  </span><span>300000</span><span>	      </span><span>4626</span><span> ns</span><span>/</span><span>op	    </span><span>1000</span><span> B</span><span>/</span><span>op	      </span><span>14</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeVmihailencoArray</span><span>-</span><span>8</span><span>   	  </span><span>500000</span><span>	      </span><span>3918</span><span> ns</span><span>/</span><span>op	     </span><span>680</span><span> B</span><span>/</span><span>op	      </span><span>13</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeUgorji</span><span>-</span><span>8</span><span>             	 </span><span>1000000</span><span>	      </span><span>1985</span><span> ns</span><span>/</span><span>op	     </span><span>986</span><span> B</span><span>/</span><span>op	      </span><span>11</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeJson</span><span>-</span><span>8</span><span>               	  </span><span>500000</span><span>	      </span><span>3649</span><span> ns</span><span>/</span><span>op	    </span><span>1224</span><span> B</span><span>/</span><span>op	      </span><span>16</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareEncodeGob</span><span>-</span><span>8</span><span>                	  </span><span>100000</span><span>	     </span><span>12324</span><span> ns</span><span>/</span><span>op	    </span><span>2824</span><span> B</span><span>/</span><span>op	      </span><span>50</span><span> allocs</span><span>/</span><span>op</span></code></pre>
<h7>
Decode</h7>
<pre><code><span>BenchmarkCompareDecodeShamaton</span><span>-</span><span>8</span><span>           	 </span><span>1000000</span><span>	      </span><span>1494</span><span> ns</span><span>/</span><span>op	     </span><span>512</span><span> B</span><span>/</span><span>op	       </span><span>6</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeShamatonArray</span><span>-</span><span>8</span><span>      	 </span><span>1000000</span><span>	      </span><span>1031</span><span> ns</span><span>/</span><span>op	     </span><span>512</span><span> B</span><span>/</span><span>op	       </span><span>6</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeVmihailenco</span><span>-</span><span>8</span><span>        	  </span><span>200000</span><span>	      </span><span>5660</span><span> ns</span><span>/</span><span>op	    </span><span>1056</span><span> B</span><span>/</span><span>op	      </span><span>33</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeVmihailencoArray</span><span>-</span><span>8</span><span>   	  </span><span>300000</span><span>	      </span><span>4779</span><span> ns</span><span>/</span><span>op	     </span><span>992</span><span> B</span><span>/</span><span>op	      </span><span>22</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeUgorji</span><span>-</span><span>8</span><span>             	  </span><span>500000</span><span>	      </span><span>2774</span><span> ns</span><span>/</span><span>op	     </span><span>844</span><span> B</span><span>/</span><span>op	      </span><span>12</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeJson</span><span>-</span><span>8</span><span>               	  </span><span>200000</span><span>	      </span><span>9721</span><span> ns</span><span>/</span><span>op	    </span><span>1216</span><span> B</span><span>/</span><span>op	      </span><span>43</span><span> allocs</span><span>/</span><span>op
</span><span>BenchmarkCompareDecodeGob</span><span>-</span><span>8</span><span>                	   </span><span>50000</span><span>	     </span><span>37553</span><span> ns</span><span>/</span><span>op	   </span><span>10172</span><span> B</span><span>/</span><span>op	     </span><span>275</span><span> allocs</span><span>/</span><span>op</span></code></pre>
<h6>
License</h6>
<p>This library is under the MIT License.</p>
</article>
  </div>
        </div>
        
        <div id="qs-kieselsteini-msgpack"><h4><a href="https://github.com/kieselsteini/msgpack" target="_blank">kieselsteini/msgpack <span>https://github.com/kieselsteini/msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for Lua 5.3</h5>
<h6>
Overview</h6>
<p>This is a pure Lua implementation for encoding/decoding MessagePack (<a href="https://msgpack.org/" rel="nofollow">https://msgpack.org</a>).</p>
<p>Please report any bugs you encounter!</p>
<p>Features:</p>
<ul>
<li>written in pure Lua 5.3 (using <code>string.pack()</code> / <code>string.unpack()</code>)</li>
<li>can distinguish between integer / float numbers</li>
<li>can distinguish between UTF-8 strings and binary data</li>
<li>public domain license (<a href="https://unlicense.org/" rel="nofollow">http://unlicense.org</a>)</li>
<li>pretty fast decoding</li>
</ul>
<p>What's missing:</p>
<ul>
<li>extendend types <code>fixent</code>
</li>
</ul>
<p>Example code:</p>
<div><pre><span>local</span> msgpack <span>=</span> <span>require</span>(<span><span>'</span>msgpack<span>'</span></span>)

<span>local</span> value <span>=</span> msgpack.<span>decode</span>(binary_msgpack_data) <span><span>--</span> decode to Lua value</span>

<span>local</span> binary_data <span>=</span> msgpack.<span>encode</span>(lua_value) <span><span>--</span> encode Lua value to MessagePack</span></pre></div>
<h6>
API</h6>
<h7>
msgpack.encode_one(value)</h7>
<p>Encodes the given Lua value to a binary MessagePack representation. It will return the binary string on succes or <code>nil</code> plus an error message if it fails.</p>
<p>The encoder will encode Lua strings as MessagePack strings when they are properly UTF-8 encoded otherwise they will become MessagePack binary objects.</p>
<p>There is also a check if a Lua number can be lossless encoded as a 32-bit float.</p>
<blockquote>
<p><strong>NOTE:</strong> Empty Lua tables will be encoded as empty arrays!</p>
</blockquote>
<h7>
msgpack.encode(...)</h7>
<p>Encodes all given values to a binary MessagePack representation. It will return the binary string or <code>nil</code> plus an error message if it fails.</p>
<div><pre><span>local</span> binary <span>=</span> msgpack.<span>encode</span>(<span><span>'</span>Hello<span>'</span></span>, <span>1024</span>, <span>true</span>, { <span>2</span>, <span>3</span>, <span>4</span> })</pre></div>
<h7>
msgpack.decode_one(binary_data[, position])</h7>
<p>Decode the given MessagePack binary string to a corresponding Lua value. It will return the decoded Lua value and the position for next byte in stream
or <code>nil</code> plus an error message if decoding went wrong. You can use the returned position to decode multiple MessagePack values in a stream.</p>
<p>The optional position argument is used to start the decoding at a specific position inside the the binary_data string.</p>
<blockquote>
<p><strong>NOTE:</strong> Extended types are not supported. Decoding will fail!</p>
</blockquote>
<blockquote>
<p><strong>NOTE:</strong> Binary data will be decoded as Lua strings</p>
</blockquote>
<blockquote>
<p><strong>NOTE:</strong> Arrays will be decoded as Lua tables starting with index 1 (like Lua uses tables as arrays)</p>
</blockquote>
<blockquote>
<p><strong>NOTE:</strong> Values which are <code>nil</code> will cause the key, value pair to disappear in a Lua table (that's how it works in Lua)</p>
</blockquote>
<h7>
msgpack.decode(binary_data[, position])</h7>
<p>Decode the given MessagePack binary string to one or more Lua values. It will return all decoded Lua values or <code>nil</code> plus an error message if decoding failed.</p>
<div><pre><span>local</span> a, b, c <span>=</span> msgpack.<span>decode</span>(binary)</pre></div>
<h6>
License</h6>
<pre><code><span>This</span><span> </span><span>is</span><span> free </span><span>and</span><span> unencumbered software released </span><span>into</span><span> the </span><span>public</span><span> domain</span><span>.</span><span>

</span><span>Anyone</span><span> </span><span>is</span><span> free to copy</span><span>,</span><span> modify</span><span>,</span><span> publish</span><span>,</span><span> </span><span>use</span><span>,</span><span> compile</span><span>,</span><span> sell</span><span>,</span><span> </span><span>or</span><span>
distribute </span><span>this</span><span> software</span><span>,</span><span> either </span><span>in</span><span> source code form </span><span>or</span><span> </span><span>as</span><span> a compiled
binary</span><span>,</span><span> </span><span>for</span><span> any purpose</span><span>,</span><span> commercial </span><span>or</span><span> non</span><span>-</span><span>commercial</span><span>,</span><span> </span><span>and</span><span> </span><span>by</span><span> any
means</span><span>.</span><span>

</span><span>In</span><span> jurisdictions that recognize copyright laws</span><span>,</span><span> the author </span><span>or</span><span> authors
of </span><span>this</span><span> software dedicate any </span><span>and</span><span> all copyright interest </span><span>in</span><span> the
software to the </span><span>public</span><span> domain</span><span>.</span><span> </span><span>We</span><span> make </span><span>this</span><span> dedication </span><span>for</span><span> the benefit
of the </span><span>public</span><span> at large </span><span>and</span><span> to the detriment of </span><span>our</span><span> heirs </span><span>and</span><span>
successors</span><span>.</span><span> </span><span>We</span><span> intend </span><span>this</span><span> dedication to be an overt act of
relinquishment </span><span>in</span><span> perpetuity of all present </span><span>and</span><span> future rights to </span><span>this</span><span>
software under copyright law</span><span>.</span><span>

THE SOFTWARE IS PROVIDED </span><span>"AS IS"</span><span>,</span><span> WITHOUT WARRANTY OF ANY KIND</span><span>,</span><span>
EXPRESS OR IMPLIED</span><span>,</span><span> INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY</span><span>,</span><span> FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT</span><span>.</span><span>
IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM</span><span>,</span><span> DAMAGES OR
OTHER LIABILITY</span><span>,</span><span> WHETHER IN AN ACTION OF CONTRACT</span><span>,</span><span> TORT OR OTHERWISE</span><span>,</span><span>
ARISING FROM</span><span>,</span><span> OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE</span><span>.</span><span>

</span><span>For</span><span> more information</span><span>,</span><span> please refer to </span><span>&lt;</span><span>http</span><span>:</span><span>//unlicense.org/&gt;</span></code></pre>
</article>
  </div>
        </div>
        
        <div id="qs-HiPhish-guile-msgpack"><h4><a href="https://gitlab.com/HiPhish/guile-msgpack" target="_blank">HiPhish/guile-msgpack <span>https://gitlab.com/HiPhish/guile-msgpack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePack for GNU Guile</h5>
<p>This is a GNU Guile library implementing the MessagePack data serialisation
format. It allows you to serialise (pack) and de-serialise (unpack) Scheme
objects to and from binary data according to the MessagePack format.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://msgpack.org/HiPhish/guile-msgpack/blob/master/screenshot.png"><img alt="Screenshot of running a Racket REPL in Neovim, using Racket to control Neovim" src="https://msgpack.org/HiPhish/guile-msgpack/raw/master/screenshot.png"></a></p>
<a name="user-content-installation"></a>
<h6>
Installation</h6>
<p>Use the included makefile to build the library, documentation and run tests.
Here is a quick run-down, please refer to the <a href="https://msgpack.org/HiPhish/guile-msgpack/blob/master/INSTALL.rst">INSTALL</a> file for full details.</p>
<div><pre><span><span>#</span> Run tests, install to /usr/local, build PDF and HTML documentation</span>
make check <span>&amp;&amp;</span> make lib doc PREFIX=/usr/local <span>&amp;&amp;</span> make pdf html</pre></div>
<a name="user-content-using-messagepack"></a>
<h6>
Using MessagePack</h6>
<p>First import the module, then you can pack an object to a binary input port or
unpack one from a binary output port.</p>
<div><pre>(use-modules ((msgpack) #:select (pack unpack pack-to unpack-from)))

<span><span>;</span>; Some object to pack</span>
(<span>define</span> <span>hodgepodge</span> (vector <span>1</span> <span>2</span> <span>'#</span>(<span>3</span> <span>#t</span>) <span><span>"</span>foo<span>"</span></span>))

(pack hodgepodge)
<span><span>;</span>; Returns #vu8(#x94 #x01 #x02 #x92 #x03 #xC3 #xA3 #x66 #x6F #x6F)</span>

(unpack #vu8(<span>#x94</span> <span>#x01</span> <span>#x02</span> <span>#x92</span> <span>#x03</span> <span>#xC3</span> <span>#xA3</span> <span>#x66</span> <span>#x6F</span> <span>#x6F</span>))
<span><span>;</span>; Returns '#(1 2 #(3 #t) "foo")</span>

<span><span>;</span>; We can also pack and unpack directly to and from a port</span>
(pack-to (current-output-port) hodgepodge)
(unpack-from (current-input-port))</pre></div>
<p>In the above code we have two variants of <code>pack</code> and <code>unpack</code>: a pure one and
an impure one with a <code>to</code>- or <code>from</code> suffix. The pure variant performs the
packing or unpacking without any side effects by returning the packed bytes or
the unpacked object. The impure variant on the other hand writes to or reads
from a port as a side effect, but does not return anything.</p>
<a name="user-content-status-of-the-project"></a>
<h6>
Status of the project</h6>
<p>The project is still fresh, but it is complete and stable as far as I am
concerned. I will wait a little while for it to set before committing to a
proper release though. User experience reports are always welcome.</p>
<a name="user-content-license"></a>
<h6>
License</h6>
<p>Released under the GPLv3+ license, see the <a href="https://msgpack.org/HiPhish/guile-msgpack/blob/master/COPYING.txt">COPYING</a> file for details.</p>
<a name="user-content-self-promotion"></a>
<h6>
Self-promotion</h6>
<p>If you like this library please consider financially supporting its
development, every small amount helps. Feel free to explore my other software
projects as well.</p>
<ul>
<li><a href="https://hiphish.github.io/" rel="nofollow">http://hiphish.github.io/</a></li>
<li><a href="https://liberapay.com/HiPhish/" rel="nofollow">https://liberapay.com/HiPhish/</a></li>
</ul>

</article>
  </div>
        </div>
        
        <div id="qs-davalapar-what-the-pack"><h4><a href="https://npmjs.com/package/what-the-pack" target="_blank">davalapar/what-the-pack <span>http://npmjs.com/package/what-the-pack</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
what-the-pack</h5>
<p>Ultra-fast MessagePack for NodeJS &amp; Browsers.</p>
<h6>
implementation notes</h6>
<ul>
<li>this implementation uses pre-allocated buffers and buffer.copy() for encoding, instead of regular arrays</li>
<li>uses a buffer polyfill if used in browser environments</li>
<li>has dictionary support, to further reduce payload size</li>
</ul>
<h6>
backward compatibility notes with other libraries</h6>
<ul>
<li>used extensions
<ul>
<li>
<code>fixext 1, type 0, data 0</code> = <code>undefined</code>
</li>
<li>
<code>fixext 1, type 0, data 1</code> = <code>NaN</code>
</li>
<li>
<code>fixext 1, type 0, data 2</code> = <code>+Infinity</code>
</li>
<li>
<code>fixext 1, type 0, data 3</code> = <code>-Infinity</code>
</li>
</ul>
</li>
<li>
<code>Buffers</code>, <code>ArrayBuffers</code> and <code>TypedArrays</code>
<ul>
<li>
<code>Buffers</code> : encoded as Buffers, decoded as Buffers</li>
<li>
<code>ArrayBuffers</code> : encoded as Buffers, decoded as Buffers</li>
</ul>
<div><pre><span>const</span> <span>decoded</span> <span>=</span> <span>decode</span>(encoded);
<span>const</span> <span>your_arraybuffer</span> <span>=</span> <span>decoded</span>.<span>buffer</span>;</pre></div>
<ul>
<li>
<code>TypedArrays</code> : encoded as Buffers, decoded as Buffers</li>
</ul>
<div><pre><span>const</span> <span>decoded</span> <span>=</span> <span>decode</span>(encoded);
<span>const</span> <span>your_typedarray</span> <span>=</span> <span>new</span> <span>Uint8Array</span>(<span>decoded</span>.<span>buffer</span>);</pre></div>
</li>
</ul>
<h6>
usage</h6>

<div><pre><span>const</span> <span>MessagePack</span> <span>=</span> <span>require</span>(<span><span>'</span>what-the-pack<span>'</span></span>);
<span>const</span> { <span>encode</span>, <span>decode</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>22</span>); <span><span>//</span> 4MB</span>

<span>const</span> <span>data</span> <span>=</span> {
  name<span>:</span> <span><span>'</span>Lunox<span>'</span></span>,
  age<span>:</span> <span>20</span>
};

<span>const</span> <span>encoded</span> <span>=</span> <span>encode</span>(data);
<span>const</span> <span>decoded</span> <span>=</span> <span>decode</span>(encoded);

<span>console</span>.<span>log</span>({
  encoded,
  decoded
});</pre></div>
<h6>
result</h6>
<div><pre>{ encoded<span>:</span> <span>&lt;</span>Buffer <span>82</span> a4 <span>6e</span> <span>61</span> <span>6d</span> <span>65</span> a5 <span>4c</span> <span>75</span> <span>6e</span> <span>6f</span> <span>78</span> a3 <span>61</span> <span>67</span> <span>65</span> <span>14</span><span>&gt;</span>,
  decoded<span>:</span> { name<span>:</span> <span><span>'</span>Lunox<span>'</span></span>, age<span>:</span> <span>20</span> } }</pre></div>
<h6>
pre-allocating a larger buffer</h6>
<div><pre><span>const</span> <span>MessagePack</span> <span>=</span> <span>require</span>(<span><span>'</span>what-the-pack<span>'</span></span>);
<span>const</span> { <span>encode</span>, <span>decode</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>30</span>); <span><span>//</span> 1GB</span>
<span>const</span> <span>data</span> <span>=</span> {
  <span><span>//</span> large data goes here</span>
};</pre></div>
<pre><code><span>2</span><span>^</span><span>7</span><span> </span><span>=</span><span> </span><span>128</span><span> B
</span><span>2</span><span>^</span><span>8</span><span> </span><span>=</span><span> </span><span>256</span><span> B
</span><span>2</span><span>^</span><span>9</span><span> </span><span>=</span><span> </span><span>512</span><span> B
</span><span>2</span><span>^</span><span>10</span><span> </span><span>=</span><span> </span><span>1.02</span><span> kB
</span><span>2</span><span>^</span><span>11</span><span> </span><span>=</span><span> </span><span>2.05</span><span> kB
</span><span>2</span><span>^</span><span>12</span><span> </span><span>=</span><span> </span><span>4.1</span><span> kB
</span><span>2</span><span>^</span><span>13</span><span> </span><span>=</span><span> </span><span>8.19</span><span> kB
</span><span>2</span><span>^</span><span>14</span><span> </span><span>=</span><span> </span><span>16.4</span><span> kB
</span><span>2</span><span>^</span><span>15</span><span> </span><span>=</span><span> </span><span>32.8</span><span> kB
</span><span>2</span><span>^</span><span>16</span><span> </span><span>=</span><span> </span><span>65.5</span><span> kB
</span><span>2</span><span>^</span><span>17</span><span> </span><span>=</span><span> </span><span>131</span><span> kB
</span><span>2</span><span>^</span><span>18</span><span> </span><span>=</span><span> </span><span>262</span><span> kB
</span><span>2</span><span>^</span><span>19</span><span> </span><span>=</span><span> </span><span>524</span><span> kB
</span><span>2</span><span>^</span><span>20</span><span> </span><span>=</span><span> </span><span>1.05</span><span> MB
</span><span>2</span><span>^</span><span>21</span><span> </span><span>=</span><span> </span><span>2.1</span><span> MB
</span><span>2</span><span>^</span><span>22</span><span> </span><span>=</span><span> </span><span>4.19</span><span> MB
</span><span>2</span><span>^</span><span>23</span><span> </span><span>=</span><span> </span><span>8.39</span><span> MB
</span><span>2</span><span>^</span><span>24</span><span> </span><span>=</span><span> </span><span>16.8</span><span> MB
</span><span>2</span><span>^</span><span>25</span><span> </span><span>=</span><span> </span><span>33.6</span><span> MB
</span><span>2</span><span>^</span><span>26</span><span> </span><span>=</span><span> </span><span>67.1</span><span> MB
</span><span>2</span><span>^</span><span>27</span><span> </span><span>=</span><span> </span><span>134</span><span> MB
</span><span>2</span><span>^</span><span>28</span><span> </span><span>=</span><span> </span><span>268</span><span> MB
</span><span>2</span><span>^</span><span>29</span><span> </span><span>=</span><span> </span><span>537</span><span> MB
</span><span>2</span><span>^</span><span>30</span><span> </span><span>=</span><span> </span><span>1.07</span><span> GB</span></code></pre>
<h6>
using dictionaries (added in 1.1.3)</h6>
<ul>
<li>this feature isn't in MessagePack spec but added as a convenience feature in 1.1.3</li>
<li>dictionaries allow us to decrease our buffer output size by recognizing strings used as object keys and replacing them with shorter-byte integer values during the encoding process</li>
<li>these shorter-byte placeholder values are then restored to their respective strings during the decoding process</li>
<li>the trade-off in using dictionaries is an insignificantly slower encoding and decoding time in exchange of a significantly smaller buffer output, which results into a lower network bandwidth and storage consumption in the long run</li>
<li>the best part: the byte placeholders starts from -32 then increments upwards, values -32 to 127 are encoded in single byte, which means your first (32 + 128) = 160 keys will be encoded as a single byte instead of encoding the whole string</li>
</ul>
<div><pre><span>const</span> <span>MessagePack</span> <span>=</span> <span>require</span>(<span><span>'</span>what-the-pack<span>'</span></span>);
<span>const</span> { <span>encode</span>, <span>decode</span>, <span>register</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>22</span>); <span><span>//</span> 4MB</span>
<span>let</span> encoded, decoded, data;
data <span>=</span> { name<span>:</span> <span><span>'</span>Lunox<span>'</span></span>, age<span>:</span> <span>20</span> };

encoded <span>=</span> <span>encode</span>(data);
decoded <span>=</span> <span>decode</span>(encoded);
<span>console</span>.<span>log</span>({ encoded, decoded });
<span><span>/**</span></span>
<span> - encoded: &lt;Buffer 82 a4 6e 61 6d 65 a5 4c 75 6e 6f 78 a3 61 67 65 14&gt; (17)</span>
<span> - decoded: { name: 'Lunox', age: 20 }</span>
<span> *<span>*/</span></span>

<span>register</span>(<span><span>'</span>name<span>'</span></span>, <span><span>'</span>age<span>'</span></span>);
encoded <span>=</span> <span>encode</span>(data);
decoded <span>=</span> <span>decode</span>(encoded);
<span>console</span>.<span>log</span>({ encoded, decoded });
<span><span>/**</span></span>
<span> - encoded: &lt;Buffer 82 e0 a5 4c 75 6e 6f 78 e1 14&gt; (10)</span>
<span> - decoded: { name: 'Lunox', age: 20 }</span>
<span> *<span>*/</span></span></pre></div>
<h6>
minified build for browsers</h6>
<div><pre><span><span>&lt;!--</span></span> latest umd build <span><span>--&gt;</span></span>
<span>&lt;</span>script src<span>=</span><span><span>"</span>https://unpkg.com/what-the-pack/dist/MessagePack.min.js<span>"</span></span><span>&gt;&lt;</span><span>/</span>script<span>&gt;</span>

<span><span>&lt;!--</span></span> exposed as <span><span>'</span>MessagePack<span>'</span></span> <span><span>--&gt;</span></span>
<span>&lt;</span>script<span>&gt;</span>
  <span>const</span> { <span>encode</span>, <span>decode</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>22</span>); <span><span>//</span> 4MB</span>
  <span>const</span> <span>data</span> <span>=</span> {
    name<span>:</span> <span><span>'</span>Lunox<span>'</span></span>,
    age<span>:</span> <span>20</span>
  };
  <span>const</span> <span>encoded</span> <span>=</span> <span>encode</span>(data);
  <span>const</span> <span>decoded</span> <span>=</span> <span>decode</span>(encoded);
  <span>console</span>.<span>log</span>({ encoded, decoded });
<span>&lt;</span><span>/</span>script<span>&gt;</span></pre></div>
<h6>
using with browser websockets</h6>
<h8>
server</h8>
<div><pre><span>const</span> <span>WebSocket</span> <span>=</span> <span>require</span>(<span><span>'</span>ws<span>'</span></span>);
<span>const</span> <span>MessagePack</span> <span>=</span> <span>require</span>(<span><span>'</span>what-the-pack<span>'</span></span>);
<span>const</span> { <span>encode</span>, <span>decode</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>22</span>); <span><span>//</span> 4MB</span>

<span>const</span> <span>wss</span> <span>=</span> <span>new</span> <span>WebSocket.Server</span>(
<span>  <span>/</span>- options go here <span>*</span><span>/</span></span>
);
<span>wss</span>.<span>on</span>(<span><span>'</span>connection<span>'</span></span>, (<span>client</span>, <span>req</span>) <span>=&gt;</span> {
  <span>console</span>.<span>log</span>(<span><span>'</span>A client has connected.<span>'</span></span>);
  <span>console</span>.<span>log</span>(<span><span>'</span>IP address:<span>'</span></span>, <span>req</span>.<span>connection</span>.<span>remoteAddress</span>);
  <span>client</span>.<span>send</span>(
    <span>encode</span>({
      message<span>:</span> <span><span>'</span>something<span>'</span></span>
    })
  );
});</pre></div>
<h8>
client</h8>
<ul>
<li>On browsers, <code>Buffer</code> object is exposed as <code>MessagePack.Buffer</code>
</li>
<li>On browsers, call <code>MessagePack.Buffer.from(x)</code> on received ArrayBuffers</li>
</ul>
<div><pre><span><span>//</span> Create WebSocket connection.</span>
<span>const</span> <span>socket</span> <span>=</span> <span>new</span> <span>WebSocket</span>(<span><span>'</span>ws://localhost:8080<span>'</span></span>);
<span>const</span> { <span>encode</span>, <span>decode</span>, <span>Buffer</span> } <span>=</span> <span>MessagePack</span>.<span>initialize</span>(<span>2</span><span>**</span><span>22</span>); <span><span>//</span> 4MB</span>

<span><span>//</span> Connection opened</span>
<span>socket</span>.<span>addEventListener</span>(<span><span>'</span>open<span>'</span></span>, (<span>event</span>) <span>=&gt;</span> {
  <span>socket</span>.<span>binaryType</span> <span>=</span> <span><span>'</span>arraybuffer<span>'</span></span>; <span><span>//</span> important</span>
  <span>console</span>.<span>log</span>(<span><span>'</span>Connected to server.<span>'</span></span>);
});

<span><span>//</span> Listen for messages</span>
<span>socket</span>.<span>addEventListener</span>(<span><span>'</span>message<span>'</span></span>, (<span>event</span>) <span>=&gt;</span> {
  <span>const</span> <span>data</span> <span>=</span> <span>MessagePack</span>.<span>decode</span>(
    <span>Buffer</span>.<span>from</span>(<span>event</span>.<span>data</span>)
  );
  <span>console</span>.<span>log</span>(data);
  <span><span>//</span> logs: { message: 'something' }</span>
});</pre></div>
<h6>
benchmarks</h6>

<div><pre>$ yarn run benchmark
JSON stringify tiny x 1,477,866 ops/sec 0.58% (93 runs sampled)
JSON stringify small x 232,645 ops/sec 0.25% (91 runs sampled)
JSON stringify medium x 117,357 ops/sec 0.31% (93 runs sampled)
JSON stringify large x 24.01 ops/sec 0.37% (43 runs sampled)
JSON parse tiny x 1,301,925 ops/sec 3.18% (82 runs sampled)
JSON parse small x 264,410 ops/sec 0.57% (90 runs sampled)
JSON parse medium x 133,865 ops/sec 0.52% (87 runs sampled)
JSON parse large x 31.52 ops/sec 0.34% (53 runs sampled)
what-the-pack encode tiny x 1,175,981 ops/sec 0.39% (92 runs sampled)
what-the-pack encode small x 365,533 ops/sec 0.85% (90 runs sampled)
what-the-pack encode medium x 173,746 ops/sec 0.41% (91 runs sampled)
what-the-pack encode large x 218 ops/sec 0.85% (82 runs sampled)
what-the-pack decode tiny x 1,130,260 ops/sec 0.30% (91 runs sampled)
what-the-pack decode small x 254,931 ops/sec 0.79% (94 runs sampled)
what-the-pack decode medium x 146,809 ops/sec 0.79% (92 runs sampled)
what-the-pack decode large x 211 ops/sec 0.37% (87 runs sampled)
notepack.encode tiny x 1,291,361 ops/sec 0.22% (95 runs sampled)
notepack encode small x 325,882 ops/sec 1.20% (95 runs sampled)
notepack encode medium x 133,398 ops/sec 0.20% (94 runs sampled)
notepack encode large x 231 ops/sec 1.65% (81 runs sampled)
notepack decode tiny x 1,097,597 ops/sec 0.67% (93 runs sampled)
notepack decode small x 231,895 ops/sec 0.69% (96 runs sampled)
notepack decode medium x 137,385 ops/sec 2.45% (86 runs sampled)
notepack decode large x 210 ops/sec 0.85% (86 runs sampled)</pre></div>
<h6>
tests</h6>

<div><pre>$ yarn run <span>test</span>
 PASS  ./test.js
   fixstr (6ms)
   str 8 (2ms)
   str 16 (1ms)
   str 32 (1ms)
   zero
   positive fixint (1ms)
   negative  fixint (1ms)
   uint 8 (1ms)
   uint 16 (1ms)
   uint 32
   uint 64 (1ms)
   int 8 (1ms)
   int 16
   int 32 (2ms)
   int 64
   float 32 (2ms)
   float 64 (1ms)
   true, false, undefined, NaN, +Infinity, -Infinity (2ms)
   flat <span>&amp;</span> nested empty arrays (1ms)
   flat arrays (456ms)
   nested arrays (5ms)
   highly nested arrays (2ms)
   buffers, bin8 (2ms)
   buffers, bin16 (96ms)
   buffers, bin32 (473ms)
   arraybuffers as buffer (54ms)
   typedarrays as buffer (7ms)
   tiny object (1ms)
   small object
   medium object (1ms)
   large object (1736ms)

  console.log index.js:49
    MessagePack: Setting buffer limit to 1.07 GB

Test Suites: 1 passed, 1 total
Tests:       31 passed, 31 total
Snapshots:   0 total
Time:        5.477s
Ran all <span>test</span> suites.
Done <span>in</span> 6.59s.</pre></div>
<h6>
changelog</h6>
<ul>
<li>1.x
<ul>
<li>basic support</li>
<li>dictionary support</li>
</ul>
</li>
<li>2.0.0
<ul>
<li>rewrite to use raw functions instead of classes</li>
<li>update dev-deps</li>
<li>jest test-cov @ <code>86.06%</code>
<ul>
<li>statements <code>389/452</code>
</li>
<li>branches <code>137/169</code>
</li>
<li>functions <code>11/12</code>
</li>
<li>lines <code>374/428</code>
</li>
</ul>
</li>
</ul>
</li>
<li>2.0.x
<ul>
<li>fix tempBufferLength check</li>
<li>rebuild for browser</li>
<li>fix leak on buffer decode</li>
</ul>
</li>
</ul>
<h6>
references</h6>
<ul>
<li>
<code>buffer re-alloc idea</code>
<ul>
<li>
<a href="https://github.com/darrachequesne/notepack/issues/12#issuecomment-320872590">https://github.com/darrachequesne/notepack/issues/12#issuecomment-320872590</a> (Manuel Astudillo)</li>
</ul>
</li>
<li>
<code>notepack.io</code>
<ul>
<li>
<a href="https://github.com/darrachequesne/notepack">https://github.com/darrachequesne/notepack</a> (MIT, Damien Arrachequesne)</li>
</ul>
</li>
<li>
<code>notepack</code>
<ul>
<li>
<a href="https://github.com/hypergeometric/notepack">https://github.com/hypergeometric/notepack</a> (MIT, Ben Shepheard)</li>
</ul>
</li>
<li>
<code>buffer</code>:
<ul>
<li>
<a href="https://github.com/feross/buffer">https://github.com/feross/buffer</a> (MIT, Feross Aboukhadijeh)</li>
</ul>
</li>
<li>
<code>pretty-bytes</code>
<ul>
<li>
<a href="https://github.com/sindresorhus/pretty-bytes">https://github.com/sindresorhus/pretty-bytes</a> (MIT, Sindre Sorhus)</li>
</ul>
</li>
</ul>
<p>MIT | @davalapar</p>
</article>
  </div>
        </div>
        
        
        
        
        
        <div id="qs-hirotakan-MessagePacker"><h4><a href="https://github.com/hirotakan/MessagePacker" target="_blank">hirotakan/MessagePacker <span>https://github.com/hirotakan/MessagePacker</span></a></h4>
<div id="readme">
    <article itemprop="text"><h5>
MessagePacker</h5>
<p><a href="https://travis-ci.org/hirotakan/MessagePacker" rel="nofollow"><img src="https://camo.githubusercontent.com/ade140de1d6f7b17ec35348f80be99ae6f8143b4/68747470733a2f2f7472617669732d63692e6f72672f6869726f74616b616e2f4d6573736167655061636b65722e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/hirotakan/MessagePacker.svg?branch=master"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/709b02161cc5fa920dcf1017f12a209ab02e395a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f53776966742d342e312d6f72616e67652e737667"><img src="https://camo.githubusercontent.com/709b02161cc5fa920dcf1017f12a209ab02e395a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f53776966742d342e312d6f72616e67652e737667" alt="Swift 4.1" data-canonical-src="https://img.shields.io/badge/Swift-4.1-orange.svg"></a>
<a href="http://doge.mit-license.org/" rel="nofollow"><img src="https://camo.githubusercontent.com/7564c4f51086d05c91ab09865b0ab1eaf457f172/68747470733a2f2f696d672e736869656c64732e696f2f3a6c6963656e73652d6d69742d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/:license-mit-blue.svg"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://camo.githubusercontent.com/3dc8a44a2c3f7ccd5418008d1295aae48466c141/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43617274686167652d636f6d70617469626c652d3442433531442e7376673f7374796c653d666c6174" alt="Carthage compatible" data-canonical-src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat"></a>
<a href="http://cocoadocs.org/docsets/MessagePacker" rel="nofollow"><img src="https://camo.githubusercontent.com/d5bdc0798f2025b64b0357fe738b635c631c36d6/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f762f4d6573736167655061636b65722e737667" alt="Cocoapods" data-canonical-src="https://img.shields.io/cocoapods/v/MessagePacker.svg"></a>
<a href="https://github.com/apple/swift-package-manager"><img src="https://camo.githubusercontent.com/18e7d5aa1daa4aed96cec094b89a7b5de25ed5ab/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5377696674504d2d636f6d70617469626c652d627269676874677265656e2e737667" alt="SwiftPM" data-canonical-src="https://img.shields.io/badge/SwiftPM-compatible-brightgreen.svg"></a>
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/faf41fdde71ff69c248a5a0f9b27f06c59d84c2a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d732d694f532532302537432532306d61634f5325323025374325323074764f5325323025374325323077617463684f532d6c69676874677265792e737667"><img src="https://camo.githubusercontent.com/faf41fdde71ff69c248a5a0f9b27f06c59d84c2a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d732d694f532532302537432532306d61634f5325323025374325323074764f5325323025374325323077617463684f532d6c69676874677265792e737667" alt="Platforms" data-canonical-src="https://img.shields.io/badge/platforms-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS-lightgrey.svg"></a></p>
<p><strong>MessagePacker</strong> is a <a href="https://msgpack.org/" rel="nofollow">MessagePack</a> encoder &amp; decoder for Swift and supports <a href="https://developer.apple.com/documentation/swift/codable" rel="nofollow">Codable</a>.</p>
<ul>
<li>Message Pack specification: <a href="https://github.com/msgpack/msgpack/blob/master/spec.md">https://github.com/msgpack/msgpack/blob/master/spec.md</a>
</li>
</ul>
<h6>
Usage</h6>
<div><pre><span>import</span> <span>MessagePacker</span>

<span>struct</span> <span>Coordinate</span>: <span>Codable </span>{
    <span>var</span> latitude<span>:</span> <span>Double</span>
    <span>var</span> longitude<span>:</span> <span>Double</span>
}

<span>struct</span> <span>Landmark</span>: <span>Codable </span>{
    <span>var</span> name<span>:</span> <span>String</span>
    <span>var</span> foundingYear<span>:</span> <span>Int</span>
    <span>var</span> location<span>:</span> Coordinate
}

<span>let</span> input <span>=</span> <span>Landmark</span>(
    <span>name</span>: <span><span>"</span>Mojave Desert<span>"</span></span>,
    <span>foundingYear</span>: <span>0</span>,
    <span>location</span>: <span>Coordinate</span>(
        <span>latitude</span>: <span>35.0110079</span>,
        <span>longitude</span>: <span>-115.4821313</span>
    )
)

<span>let</span> data <span>=</span> <span>try</span><span>!</span> <span>MessagePackEncoder</span>().<span>encode</span>(input)
<span>let</span> landmark <span>=</span> <span>try</span><span>!</span> <span>MessagePackDecoder</span>().<span>decode</span>(Landmark.<span>self</span>, <span>from</span>: data)

<span>print</span>([<span>UInt8</span>](data))
<span>print</span>(landmark)

<span><span>//</span> [131, 164, 110, 97, 109, 101, 173, 77, 111, 106,</span>
<span><span>//</span>  97, 118, 101, 32, 68, 101, 115, 101, 114, 116,</span>
<span><span>//</span>  172, 102, 111, 117, 110, 100, 105, 110, 103, 89,</span>
<span><span>//</span>  101, 97, 114, 0, 168, 108, 111, 99, 97, 116,</span>
<span><span>//</span>  105, 111, 110, 130, 168, 108, 97, 116, 105, 116,</span>
<span><span>//</span>  117, 100, 101, 203, 64, 65, 129, 104, 180, 245,</span>
<span><span>//</span>  63, 179, 169, 108, 111, 110, 103, 105, 116, 117,</span>
<span><span>//</span>  100, 101, 203, 192, 92, 222, 219, 61, 61, 120, 49]</span>
<span></span>
<span><span>//</span> Landmark(</span>
<span><span>//</span>     name: "Mojave Desert",</span>
<span><span>//</span>     foundingYear: 0,</span>
<span><span>//</span>     location: MessagePackerTests.Coordinate(</span>
<span><span>//</span>         latitude: 35.0110079,</span>
<span><span>//</span>         longitude: -115.4821313</span>
<span><span>//</span>     )</span>
<span><span>//</span> )</span>
<span></span></pre></div>
<h6>
Installation</h6>
<h7>
Carthage</h7>
<p>Add the following to your Cartfile:</p>
<pre lang="terminal"><code><span>github </span><span>"hirotakan/MessagePacker"</span></code></pre>
<h7>
CocoaPods</h7>
<p>Add the following to your Podfile:</p>
<pre lang="terminal"><code><span>pod </span><span>'MessagePacker'</span></code></pre>
<h7>
SwiftPM</h7>
<p>Add MessagePacker as a dependency:</p>
<div><pre><span>import</span> <span>PackageDescription</span>

<span>let</span> package <span>=</span> <span>Package</span>(
    <span>name</span>: <span><span>"</span>YourApp<span>"</span></span>,
    <span>dependencies</span>: [
        .<span>Package</span>(<span>url</span>: <span><span>"</span>https://github.com/hirotakan/MessagePacker.git<span>"</span></span>, <span>majorVersion</span>: <span>0</span>),
    ]
)</pre></div>
<h6>
Requirements</h6>
<ul>
<li>Swift 4.1 or later</li>
<li>iOS 8.0 or later</li>
<li>macOS 10.10 or later</li>
<li>tvOS 9.0 or later</li>
<li>watchOS 2.0 or later</li>
</ul>
<h6>
License</h6>
<p>ImageTransition is released under the MIT license. See <a href="https://github.com/hirotakan/MessagePacker/blob/master/LICENSE">LICENSE</a> for details.</p>
</article>
  </div>
        </div>
        
      </div>
    </section>

    

    <div id="json-to-msgpack">
      <h3>JSON <span id="json-bytes">27 bytes</span></h3>
      <h3>MessagePack (hex) <span id="msgpack-bytes">18 bytes</span> <span id="msgpack-percent">67 %</span></h3>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>