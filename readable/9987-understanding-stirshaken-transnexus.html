<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Understanding STIR/SHAKEN | TransNexus -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Understanding STIR/SHAKEN | TransNexus</h1><div><div class="grid-x grid-margin-x"><div class="small-12 medium-8 cell"><p class="lead">Criminals and unscrupulous robocallers often alter or <em>spoof</em> the calling number of their outbound telephone calls in order to deceive the called party. This deception can be as simple as changing the calling number so it appears that a neighbor is calling.</p><p>This deception increases the chance that the called party will answer a robocall. In other cases, the deception may be more malicious, such as a fraudster impersonating an IRS agent in order to steal a tax refund. This practice of altering the calling number of a telephone call is known as spoofing.</p><p>The Federal Communications Commission (FCC) has been encouraging the telecommunications industry to develop a solution to stop robocalls and spoofed calling numbers since 2014. The industry’s response has been to develop a new technology standard called STIR <sup>[<a href="#footnote1">1</a>]</sup> (Secure Telephony Identity Revisited) and SHAKEN <sup>[<a href="#footnote2">2</a>]</sup> (Secure Handling of Asserted information using toKENs) which defines how telephone service providers should implement the STIR technology to ensure calling numbers are not spoofed.</p><h2>How STIR/SHAKEN works</h2><p>STIR/SHAKEN uses digital certificates, based on common public key cryptography techniques, to ensure the calling number of a telephone call is secure. In simple terms, each telephone service provider obtains their digital certificate from a certificate authority who is trusted by other telephone service providers. The certificate technology enables the called party to verify that the calling number is accurate and has not been spoofed. The details of how SHAKEN uses public key infrastructure is explained in our whitepaper on <a href="/whitepapers/stir-shaken-cms-solutions/">Certificate Management for STIR/SHAKEN</a>.</p><p>The following call flow diagram illustrates how STIR/SHAKEN works:</p><p class="img-caption">How STIR/SHAKEN works in a network</p><img class="post-img" src="/assets/img/understanding-stir-shaken-01-d96ac7065c.png" alt="How STIR and SHAKEN work in a network"><ol><li>A SIP INVITE is received by the originating telephone service provider.</li><li>The originating telephone service provider checks the call source and calling number to determine how to attest for the validity of the calling number.</li><ul><li><b>Full Attestation (A)</b> — The service provider has authenticated the calling party and they are authorized to use the calling number. An example of this case is a subscriber registered with the originating telephone service provider’s softswitch.</li><li><b>Partial Attestation (B)</b> — The service provider has authenticated the call origination, but cannot verify the call source is authorized to use the calling number. An example of this use case is a telephone number behind an enterprise PBX.</li><li><b>Gateway Attestation (C)</b> — The service provider has authenticated from where it received the call, but cannot authenticate the call source. An example of this case would be a call received from an international gateway.</li></ul><li>The originating telephone service provider uses the authentication service to create a SIP Identity header. The authentication service could be a third-party service hosted in the cloud a software application integrated with the telephone service provider’s softswitch or Session Border Controller (SBC). The SIP Identity header contains the following data:</li><ul><li>Calling number</li><li>Called number(s)</li><li>Current timestamp</li><li>Attestation level</li><li>Origination identifier</li></ul><li>The SIP INVITE with the SIP Identity header is sent to the terminating telephone service provider. In addition, the Identity token may be sent across the internet, <a href="/whitepapers/out-of-band-stir/">out-of-band, to the terminating provider’s Call Placement Service</a></li><li>The SIP INVITE with Identity header is passed to the verification service.</li><li>The verification service obtains the digital certificate of the originating telephone service provider from the public certificate repository and begins a multi-step verification process. If all verification steps are successful, then the calling number has not been spoofed.</li><ul><li>The SIP Identity header is base64 URL decoded and the details are compared to the SIP INVITE message.</li><li>The public key of the certificate is used to verify the SIP Identity header signature.</li><li>The certificate chain of trust is verified.</li></ul><li>The verification service returns the results to the terminating service provider’s softswitch or SBC.</li><li>The call is completed to the called party.</li></ol></div><div class="auto cell"><div class="advert-blue"><i class="fas fa-user-check icon-tngreen img-float-left"></i><p>TransNexus has production-ready STIR/SHAKEN software solutions that include certificate management, authentication and verification services with comprehensive policy management.</p><p>We are a SHAKEN Certificate Authority and can provide certificate services too.</p><a href="/shaken/" class="button expanded">Learn more</a></div></div><div class="small-12 medium-8 cell"><h2>SIP Identity header example</h2><p>The following is an example SIP INVITE message with an <span class="highlight-yellow">Identity header</span>:</p><p class="img-caption">SIP invite example</p><p class="codeblock">INVITE sip:18001234567@example.com:5060 SIP/2.0<br>Via: SIP/2.0/UDP example.com:5060<br>From: "Alice" &lt;sip:14045266060@5.6.7.8:5060&gt;;tag=123456789<br>To: "Bob" &lt;sip:18001234567@1.2.3.4:5060&gt;<br>Call-ID: 1-12345@5.6.7.8<br>CSeq: 1 INVITE<br>Max-Forwards: 70<br>Identity: <span class="highlight-yellow">eyJhbGciOiAiRVMyNTYiLCJwcHQiOiAic2hha2VuIiwidHlwIjogInBhc3Nwb3J0IiwieDV1IjogImh0dHBzOi8vY2VydGlmaWNhdGVzLmNsZWFyaXAuY29tL2IxNWQ3Y2M5LTBmMjYtNDZjMi04M2VhLWEzZTYzYTgyZWMzYS83Y2M0ZGI2OTVkMTNlZGFkYTRkMWY5ODYxYjliODBmZS5jcnQifQ.eyJhdHRlc3QiOiAiQSIsImRlc3QiOiB7InRuIjogWyIxNDA0NTI2NjA2MCJdfSwiaWF0IjogMTU0ODg1OTk4Miwib3JpZyI6IHsidG4iOiAiMTgwMDEyMzQ1NjcifSwib3JpZ2lkIjogIjNhNDdjYTIzLWQ3YWItNDQ2Yi04MjFkLTMzZDVkZWVkYmVkNCJ9.S_vqkgCk88ee9rtk89P6a6ru0ncDfSrdb1GyK_mJj-10hsLW-dMF7eCjDYARLR7EZSZwiu0fd4H_QD_9Z5U2bg;info=&lt;https://certificates.clearip.com/b15d7cc9-0f26-46c2-83ea-a3e63a82ec3a/7cc4db695d13edada4d1f9861b9b80fe.crt&gt;alg=ES256;ppt=shaken</span></p><p>The SIP Identity header contains a JSON web token (JWT) and three parameters. The JWT has three sections: header + payload + signature. The header and payload are base64 URL encoded JSON. The contents of each section are described below.</p><p>The SIP Identity header is comprised of a web token and parameters, as follows:</p><ul><li>JSON web token</li><li>Parameters</li></ul><p class="img-caption">Encoded Header</p><p class="codeblock">Identity: <span class="highlight-yellow">eyJhbGciOiAiRVMyNTYiLCJwcHQiOiAic2hha2VuIiwidHlwIjogInBhc3Nwb3J0IiwieDV1IjogImh0dHBzOi8vY2VydGlmaWNhdGVzLmNsZWFyaXAuY29tL2IxNWQ3Y2M5LTBmMjYtNDZjMi04M2VhLWEzZTYzYTgyZWMzYS83Y2M0ZGI2OTVkMTNlZGFkYTRkMWY5ODYxYjliODBmZS5jcnQifQ</span>.eyJhdHRlc3QiOiAiQSIsImRlc3QiOiB7InRuIjogWyIxNDA0NTI2NjA2MCJdfSwiaWF0IjogMTU0ODg1OTk4Miwib3JpZyI6IHsidG4iOiAiMTgwMDEyMzQ1NjcifSwib3JpZ2lkIjogIjNhNDdjYTIzLWQ3YWItNDQ2Yi04MjFkLTMzZDVkZWVkYmVkNCJ9.S_vqkgCk88ee9rtk89P6a6ru0ncDfSrdb1GyK_mJj-10hsLW-dMF7eCjDYARLR7EZSZwiu0fd4H_QD_9Z5U2bg;info=&lt;https://certificates.clearip.com/b15d7cc9-0f26-46c2-83ea-a3e63a82ec3a/7cc4db695d13edada4d1f9861b9b80fe.crt&gt;alg=ES256;ppt=shaken</p><p class="img-caption">Decoded Header</p><p class="codeblock">{<br>"alg": "ES256",<br>"ppt": "shaken",<br>"typ": "passport",<br>"x5u": "https://certificates.clearip.com/b15d7cc9-0f26-46c2-83ea-a3e63a82ec3a/7cc4db695d13edada4d1f9861b9b80fe.crt"<br>}</p><ul><li><b>alg</b> — This value indicates the <em>encryption algorithm</em>. Must be <strong>ES256</strong>.</li><li><b>ppt</b> — This value indicates the <em>extension</em> used. Must be <strong>shaken</strong>.</li><li><b>typ</b> — This value indicates the <em>token type</em>. Must be <strong>passport</strong>.</li><li><b>x5u</b> — This value indicates the <em>location of the certificate</em> used to sign the token.</li></ul><p class="img-caption">Encoded Payload</p><p class="codeblock">Identity: eyJhbGciOiAiRVMyNTYiLCJwcHQiOiAic2hha2VuIiwidHlwIjogInBhc3Nwb3J0IiwieDV1IjogImh0dHBzOi8vY2VydGlmaWNhdGVzLmNsZWFyaXAuY29tL2IxNWQ3Y2M5LTBmMjYtNDZjMi04M2VhLWEzZTYzYTgyZWMzYS83Y2M0ZGI2OTVkMTNlZGFkYTRkMWY5ODYxYjliODBmZS5jcnQifQ.<span class="highlight-yellow">eyJhdHRlc3QiOiAiQSIsImRlc3QiOiB7InRuIjogWyIxNDA0NTI2NjA2MCJdfSwiaWF0IjogMTU0ODg1OTk4Miwib3JpZyI6IHsidG4iOiAiMTgwMDEyMzQ1NjcifSwib3JpZ2lkIjogIjNhNDdjYTIzLWQ3YWItNDQ2Yi04MjFkLTMzZDVkZWVkYmVkNCJ9</span>.S_vqkgCk88ee9rtk89P6a6ru0ncDfSrdb1GyK_mJj-10hsLW-dMF7eCjDYARLR7EZSZwiu0fd4H_QD_9Z5U2bg;info=&lt;https://certificates.clearip.com/b15d7cc9-0f26-46c2-83ea-a3e63a82ec3a/7cc4db695d13edada4d1f9861b9b80fe.crt&gt;alg=ES256;ppt=shaken</p><p class="img-caption">Decoded Payload</p><p class="codeblock">{<br>"attest": "A",<br>"dest": {<br>"tn": [<br>"14045266060"<br>]<br>},<br>"iat": 1548859982,<br>"orig": {<br>"tn": "18001234567"<br>},<br>"origid": "3a47ca23-d7ab-446b-821d-33d5deedbed4"<br>}</p><ul><li><b>attest</b> — This value indicates the attestation level. Must be either <b>A</b>, <b>B</b>, or <b>C</b>.</li><li><b>dest</b> — This value indicates the called number(s) or called Uniform Resource Identifier(s).</li><li><b>iat</b> — This value indicates the timestamp when the token was created. The timestamp is the number of seconds that have passed since the beginning of 00:00:00 UTC 1 January 1970.</li><li><b>orig</b> — This value indicates the calling number or calling Uniform Resource Identifier.</li><li><b>origid</b> — This value indicates the origination identifier.</li></ul><p class="img-caption">Signature</p><p class="codeblock">S_vqkgCk88ee9rtk89P6a6ru0ncDfSrdb1GyK_mJj-10hsLW-dMF7eCjDYARLR7EZSZwiu0fd4H_QD_9Z5U2bg</p></div><div class="small-12 medium-8 cell"><p class="img-caption">info</p><p class="codeblock">info=&lt;https://certificates.clearip.com/b15d7cc9-0f26-46c2-83ea-a3e63a82ec3a/7cc4db695d13edada4d1f9861b9b80fe.crt&gt;;</p><p>This value indicates the location of the certificate used to sign the token. It must be the same as the x5u value in the JWT.</p><p class="img-caption">alg</p><p class="codeblock">alg=ES256;</p><p>This value indicates the encryption algorithm. Must be <b>ES256</b>.</p><p class="img-caption">ppt</p><p class="codeblock">ppt=shaken</p><p>This value indicates the extension used. Must be <b>shaken</b>.</p><h2>TransNexus STIR/SHAKEN solutions</h2><p>We offer production-ready <a href="/shaken/">STIR/SHAKEN solutions</a> in our <a href="/clearip/">ClearIP</a> and <a href="/nexoss/">NexOSS</a> software products. These solutions are unique in their capabilities to combine complete STIR/SHAKEN services with flexible policy controls and a comprehensive portfolio of other services, including fraud prevention, least cost routing and much more.</p><p>Contact us today to explore how we can help you implement SHAKEN quickly and easily.</p><hr><h2>Notes</h2><ol><ul><li>draft-ietf-stir-rfc4474bis. Defines how SIP Identity tokens are used to authenticate and verify the calling number in SIP signaling.</li><li>draft-ietf-stir-passport. Defines a method for creating and validating a token that cryptographically verifies a calling number.</li><li>draft-ietf-stir-certificates. Describes the use of certificates in establishing authority over telephone numbers.</li></ul></ol><hr><h2>More on TransNexus.com</h2><p class="list-date">January 32, 2020</p><p><a href="/blog/2020/comments-on-robocall-blocking/">Industry comments for robocall blocking report</a></p><p class="list-date">January 20, 2020</p><p><a href="/blog/2020/ntca-describes-barriers-shaken/">NTCA discusses barriers to SHAKEN faced by rural carriers</a></p><p class="list-date">December 10, 2019</p><p><a href="/blog/2020/stir-shaken-mandate-enacted/">STIR/SHAKEN mandate signed into U. S. law</a></p><p class="list-date">December 10, 2019</p><p><a href="/blog/2019/pai-scott-shaken-call/">Pai and Scott make first official cross-border call using STIR/SHAKEN</a></p><p class="list-date">December 9, 2019</p><p><a href="/blog/2019/crtc-shaken-announcements/">Canadian regulator announcements on STIR/SHAKEN</a></p><p class="list-date">December 2, 2019</p><p><a href="/blog/2019/pallone-thune-traced-act/">Pallone-Thune TRACED Act text released</a></p><p class="list-date">November 18, 2019</p><p><a href="/blog/2019/robocall-legislation-agreement/">Agreement reached on robocall prevention legislation</a></p><p class="list-date">October 1, 2019</p><p><a href="/blog/2019/california-mandates-stir-shaken/">California enacts law to mandate STIR/SHAKEN</a></p><p class="list-date">October 1, 2019</p><p><a href="/blog/2019/fcc-filings-support-oob-stir/">FCC filings calling for Out-of-Band STIR</a></p><p class="list-date">August 22, 2019</p><p><a href="/blog/2019/coalition-to-fight-robocalls/">Coalition of 12 telephone companies agree to fight robocalls</a></p><p class="list-date">August 16, 2019</p><p><a href="/blog/2019/pai-comments-shaken/">FCC Chairman Pai statement on SHAKEN/STIR progress and expectations</a></p><p class="list-date">August 15, 2019</p><p><a href="/news/2019/clearip-rich-call-data/">ClearIP now supports Rich Call Data in STIR/SHAKEN</a></p><p class="list-date">June 20, 2019</p><p><a href="/blog/2019/effective-shaken-robocall-solutions-webinar/">Webinar recording available – Effective STIR/SHAKEN and Robocall Solutions that Work Today</a></p><p class="list-date">April 29, 2019</p><p><a href="/news/2019/clearip-oob-stir/">ClearIP now supports out-of-band STIR</a></p></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>