<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing .NET Core 3 Preview 1 and Open Sourcing Windows Desktop Frameworks | .NET Blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Announcing .NET Core 3 Preview 1 and Open Sourcing Windows Desktop Frameworks | .NET Blog - linksfor.dev(s)"/>
    <meta property="article:author" content="Richard LanderProgram Manager,&#xA0;.NET TeamFollow Richard"/>
    <meta property="og:description" content="Today, we are announcing .NET Core 3 Preview 1. It is the first public release of .NET Core 3. We have some exciting new features to share and would love your feedback. You can develop .NET Core 3 applications with Visual Studio 2019 Preview 1,"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-preview-1-and-open-sourcing-windows-desktop-frameworks/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Announcing .NET Core 3 Preview 1 and Open Sourcing Windows Desktop Frameworks | .NET Blog</title>
<div class="readable">
        <h1>Announcing .NET Core 3 Preview 1 and Open Sourcing Windows Desktop Frameworks | .NET Blog</h1>
            <div>by Richard LanderProgram Manager,&#xA0;.NET TeamFollow Richard</div>
            <div>Reading time: 36-46 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-preview-1-and-open-sourcing-windows-desktop-frameworks/">https://devblogs.microsoft.com/dotnet/announcing-net-core-3-preview-1-and-open-sourcing-windows-desktop-frameworks/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured"><div><div><div><div><p><img src="https://secure.gravatar.com/avatar/37f91ebe219df737566a4dc7cdd53b68?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar"></p><p>Richard</p></div></div></div><p>December 4th, 2018</p><p>Today, we are announcing .NET Core 3 Preview 1. It is the first public release of .NET Core 3. We have some exciting new features to share and would love your feedback. You can develop .NET Core 3 applications with Visual Studio 2019 Preview 1, and Visual Studio Code. It will be supported in a later version of Visual Studio for Mac.</p><p><a href="https://aka.ms/netcore3download" rel="nofollow" target="_blank">Download and get started with .NET Core 3 Preview 1</a> right now on Windows, Mac and Linux.</p><p>You can see complete details of the release in the <a href="https://aka.ms/netcore3releasenotes" rel="nofollow" target="_blank">.NET Core 3 Preview 1 release notes</a>.&nbsp;Please report any issues you find in the comments or at&nbsp;<a href="https://github.com/dotnet/core/issues/2099" target="_blank">dotnet/core #2099</a>.</p><p>Visual Studio 2019 will be the release to support building .NET Core 3 applications and the <a href="https://aka.ms/vs-blog" rel="nofollow" target="_blank">preview was also released today</a> so we also encourage you to check that out.</p><p>.NET Core 3 is a major update which adds support for building Windows desktop applications using Windows Presentation Foundation (WPF), Windows Forms, and Entity Framework 6 (EF6). ASP.NET Core 3 enables client-side development with Razor Components. EF Core 3 will have support for Azure Cosmos DB. It will also include support for C# 8 and .NET Standard 2.1 and much more!</p><h2><a id="user-content-net-framework-48" href="#net-framework-48"></a>.NET Framework 4.8</h2><p>Before diving into .NET Core 3 let’s take a quick look at .NET Framework. Next year we will ship .NET Framework 4.8. With monitors supporting 4K and 8K resolutions we are adding better support for high DPI to WPF and Windows Forms. Many .NET applications use browser and media controls, which are based on older versions of Internet Explorer and Windows Media player. We are adding new controls that use the latest browser and media players in Windows 10 and support the latest standards. And WPF and Windows Forms applications will have access to Windows UI XAML Library (WinUI) via XAML Islands for modern look and touch support. Visual Studio 2019 is based on .NET Framework and uses many of these features. For more information on .NET Framework 4.8 see our post: <a href="https://blogs.msdn.microsoft.com/dotnet/2018/10/04/update-on-net-core-3-0-and-net-framework-4-8/" rel="nofollow" target="_blank">Update on .NET Core 3.0 and .NET Framework 4.8</a>.</p><h2><a id="user-content-windows-desktop-comes-to-net-core" href="#windows-desktop-comes-to-net-core"></a>Windows Desktop Comes to .NET Core</h2><p>The first two versions of .NET Core focused primarily on supporting web applications, web APIs, IoT and console applications. .NET Core 3 adds support for building Windows desktop applications using WPF and Windows Forms frameworks and modern controls and Fluent styling from the Windows UI XAML Library (WinUI) via XAML Islands.</p><p>Many desktop applications today use Entity Framework for data access and so we are supporting Entity Framework 6 on .NET Core 3 as well. These frameworks enable developers building Windows desktop applications to take advantage of the new features in .NET Core such as side by side deployment, self-contained applications (shipping .NET Core inside the application), the latest improvements in CoreFX, and more.</p><h2><a id="user-content-wpf-windows-forms-and-winui-open-sourced" href="#wpf-windows-forms-and-winui-open-sourced"></a>WPF, Windows Forms, and WinUI Open Sourced</h2><p>On November 12, 2014 we announced the open sourcing of .NET Core. It has been a tremendous success. The .NET platform has received over 60,000 community accepted pull requests from more than 3700 companies outside of Microsoft.</p><p>Today, we are excited to announce that are open sourcing <a href="https://github.com/dotnet/wpf" target="_blank">WPF</a>, <a href="https://github.com/dotnet/winforms" target="_blank">Windows Forms</a>, and <a href="https://github.com/Microsoft/microsoft-ui-xaml" target="_blank">WinUI</a>, so the three major Windows UX technologies will be open sourced. For the first time ever, the community will be able to see the development of WPF, Windows Forms, and WinUI happen in the open and we will take contributions for these frameworks on .NET Core. The first wave of code will be available in GitHub today and more will appear over the next few months.</p><p>At the Connect conference today, we merged the first two community PRs on stage. Thanks <a href="https://github.com/onovotny" target="_blank">@onovotny</a> and <a href="https://github.com/dotMorten" target="_blank">@dotMorten</a>!</p><ul><li><a href="https://github.com/dotnet/winforms/pull/57" target="_blank">Modernize folderdialog — dotnet/winforms #67</a></li><li><a href="https://github.com/dotnet/winforms/pull/86" target="_blank">Update class attributes to use `nameof` — dotnet/winforms #86</a></li></ul><p>WPF and Windows Forms projects are under the stewardship of the <a href="https://aka.ms/dnfmemberupdate" rel="nofollow" target="_blank">.NET Foundation which also announced changes today</a> so that the community will directly guide foundation operations. It is also expanding the current sponsors – Red Hat, JetBrains, Google, Unity, Microsoft and Samsung, by also welcoming Pivotal, Progress Telerik and Insight. This new structure will help the .NET Foundation scale to meet the needs of the growing .NET open source ecosystem.</p><p>Truly an exciting time to be a .NET developer!</p><h2><a id="user-content-wpf-and-windows-forms" href="#wpf-and-windows-forms"></a>WPF and Windows Forms</h2><p>WPF and Windows Forms can now be used with .NET Core. They ship in a new component called “Windows Desktop” that is part of the Windows version of the SDK.</p><p>We’ve been working with community developers who have been making their Windows Desktop applications run on early builds of .NET Core 3. They’ve given us great feedback, that the WPF and Windows Forms APIs are compatible and that they’ve been successful!</p><ul><li><a href="https://www.telerik.com/blogs/how-to-update-wpf-winforms-app-to-dotnet-core-3" target="_blank">Bring Your WPF and WinForms Apps to .NET Core 3 with Telerik UI for WPF and WinForms</a></li><li><a href="http://brianlagunas.com/getting-started-net-core-3-create-wpf-application/" rel="nofollow" target="_blank">Getting Started with .NET Core 3 – Create a WPF Application</a></li><li><a href="https://getgreenshot.org/2018/12/04/dotnet-core/" rel="nofollow" target="_blank">Greenshot goes dotnet core!</a> — <a href="https://twitter.com/lakritzator/status/1062303845227917313" rel="nofollow" target="_blank">tweet</a></li><li><a href="https://twitter.com/onovotny/status/1069996628021518336" target="_blank">NuGet Package Explorer v5, already a .NET Core 3 WPF App</a></li><li><a href="https://twitter.com/onovotny/status/1069996052718080005" target="_blank">Packaging a .NET Core app with the Desktop Bridge</a></li><li><a href="https://twitter.com/punker76/status/1063883852286967809" rel="nofollow" target="_blank">Hello .NET Core with MahApps.Metro</a></li><li><a href="https://www.youtube.com/watch?v=zbsf7e9xm3Y&amp;feature=youtu.be" rel="nofollow" target="_blank">NETworkManager .NET Core port</a></li></ul><p>You can create new .NET Core projects for WPF and Windows Forms from the command line.</p><div><pre><span>dotnet </span><span>new</span><span> wpf
dotnet </span><span>new</span><span> winforms</span></pre></div><p>Once a project has been created, you can dotnet run them. The following image illustrates what a new WPF app looks like.</p><p><a href="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/wpf-core-500x282.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/wpf-core-500x282.png" alt="WPF on .NET Core App" width="500" height="282"> </a></p><p>Windows Forms is very similar, displayed in the following image.</p><p><a href="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/winforms-core.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/winforms-core.png" alt="Windows Forms App on .NET Core" width="402" height="266"> </a></p><p>You can also open, launch and debug WPF and Windows Forms projects in Visual Studio 2019 Preview 1. It is currently possible to open .NET Core 3.0 projects in Visual Studio 2017 15.9, however, it is not a supported scenario (and you need to <a href="https://blogs.msdn.microsoft.com/dotnet/2018/11/13/net-core-tooling-update-for-visual-studio-2017-version-15-9/" rel="nofollow" target="_blank">enable previews</a>).</p><p>The new projects are the same as existing .NET Core projects, with a couple additions. Here is the comparison of the basic .NET Core console project and a basic Windows Forms and WPF project.</p><p>In a .NET Core console project, the file uses <code>Microsoft.NET.Sdk</code> SDK and declares a dependency on .NET Core 3.0 via the <code>netcoreapp3.0</code> target framework:</p><div id="gist93402512">
    <div>
      <div>
        <div>
  <div id="file-dotnetcore-csproj-xml">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-dotnetcore-csproj-xml-L1" data-line-number="1"></td>
        <td id="file-dotnetcore-csproj-xml-LC1">&lt;<span>Project</span> <span>Sdk</span>=<span><span>"</span>Microsoft.NET.Sdk<span>"</span></span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-csproj-xml-L2" data-line-number="2"></td>
        <td id="file-dotnetcore-csproj-xml-LC2">  &lt;<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-csproj-xml-L3" data-line-number="3"></td>
        <td id="file-dotnetcore-csproj-xml-LC3">    &lt;<span>OutputType</span>&gt;Exe&lt;/<span>OutputType</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-csproj-xml-L4" data-line-number="4"></td>
        <td id="file-dotnetcore-csproj-xml-LC4">    &lt;<span>TargetFramework</span>&gt;netcoreapp3.0&lt;/<span>TargetFramework</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-csproj-xml-L5" data-line-number="5"></td>
        <td id="file-dotnetcore-csproj-xml-LC5">  &lt;/<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-csproj-xml-L6" data-line-number="6"></td>
        <td id="file-dotnetcore-csproj-xml-LC6">&lt;/<span>Project</span>&gt;</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>The WPF and Windows Forms projects look similar but use a different SDK and also use properties to declare which UI framework is being used:</p><p>For WPF:</p><div id="gist93402540">
    <div>
      <div>
        <div>
  <div id="file-dotnet-core-wpf-csproj-xml">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L1" data-line-number="1"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC1">&lt;<span>Project</span> <span>Sdk</span>=<span><span>"</span>Microsoft.NET.Sdk.WindowsDesktop<span>"</span></span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L2" data-line-number="2"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC2">  &lt;<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L3" data-line-number="3"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC3">    &lt;<span>OutputType</span>&gt;WinExe&lt;/<span>OutputType</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L4" data-line-number="4"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC4">    &lt;<span>TargetFramework</span>&gt;netcoreapp3.0&lt;/<span>TargetFramework</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L5" data-line-number="5"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC5">    &lt;<span>UseWPF</span>&gt;true&lt;/<span>UseWPF</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L6" data-line-number="6"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC6">  &lt;/<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnet-core-wpf-csproj-xml-L7" data-line-number="7"></td>
        <td id="file-dotnet-core-wpf-csproj-xml-LC7">&lt;/<span>Project</span>&gt;</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>For Windows Forms:</p><div id="gist93402580">
    <div>
      <div>
        <div>
  <div id="file-dotnetcore-winforms-csproj-xml">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L1" data-line-number="1"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC1">&lt;<span>ProjectSdk</span>=<span><span>"</span>Microsoft.NET.Sdk.WindowsDesktop<span>"</span></span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L2" data-line-number="2"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC2">  &lt;<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L3" data-line-number="3"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC3">    &lt;<span>OutputType</span>&gt;WinExe&lt;/<span>OutputType</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L4" data-line-number="4"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC4">    &lt;<span>TargetFramework</span>&gt;netcoreapp3.0&lt;/<span>TargetFramework</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L5" data-line-number="5"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC5">    &lt;<span>UseWindowsForms</span>&gt;true&lt;/<span>UseWindowsForms</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L6" data-line-number="6"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC6">  &lt;/<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-dotnetcore-winforms-csproj-xml-L7" data-line-number="7"></td>
        <td id="file-dotnetcore-winforms-csproj-xml-LC7">&lt;/<span>Project</span>&gt;</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>The <code>UseWPF</code> and <code>UseWindowsForms</code> properties allow a project to specify whether it uses Windows Forms, or WPF. This will allow tooling (such as Intellisense, or the toolbox or menus in Visual Studio) to provide an experience tailored to the UI framework(s) being used. Both properties can be set to true if the app uses both frameworks, for example when a Windows Forms dialog is hosting a WPF control.</p><p>In the upcoming months, we’re focusing on completing the open sourcing of WPF and Windows Forms, enabling the Visual Studio designers to work with .NET Core, and adding support for APIs that are typically used in Windows Desktop apps. Please share your feedback on the <a href="https://github.com/dotnet/winforms/issues" target="_blank">dotnet/winforms</a>, <a href="https://github.com/dotnet/wpf/issues" target="_blank">dotnet/wpf</a> and <a href="https://github.com/dotnet/core/issues" target="_blank">dotnet/core</a> repos.</p><h2><a id="user-content-applications-now-have-executables-by-default" href="#applications-now-have-executables-by-default"></a>Applications now have executables by default</h2><p>.NET Core applications are now built with executables. This is new for applications that use a globally installed version of .NET Core. Until now, only self-contained applications had executables. You can see executables produced in the following examples.</p><p>You can expect the same things with these executables as you would other native executables, such as:</p><ul><li>You can double click on the executable.</li><li>You can launch the application from a command prompt without using the dotnet tool, using <code>myconsole.exe</code>, on Windows, and <code>./myconsole</code>, on Linux and macOS, as you can see in the following examples.</li></ul><p>On Windows:</p><div><pre><span>C</span><span>:</span><span>\Users\rlander\myconsole</span><span>&gt;</span><span>dotnet build
C</span><span>:</span><span>\Users\rlander\myconsole</span><span>&gt;</span><span>cd bin\Debug\netcoreapp3</span><span>.</span><span>0</span><span>
C</span><span>:</span><span>\Users\rlander\myconsole\b</span><span>in</span><span>\Debug\netcoreapp3</span><span>.</span><span>0</span><span>&gt;</span><span>dir </span><span>/</span><span>b 
myconsole</span><span>.</span><span>deps</span><span>.</span><span>json
myconsole</span><span>.</span><span>dll
myconsole</span><span>.</span><span>exe
myconsole</span><span>.</span><span>pdb
myconsole</span><span>.</span><span>runtimeconfig</span><span>.</span><span>dev</span><span>.</span><span>json
myconsole</span><span>.</span><span>runtimeconfig</span><span>.</span><span>json
C</span><span>:</span><span>\Users\rlander\myconsole\b</span><span>in</span><span>\Debug\netcoreapp3</span><span>.</span><span>0</span><span>&gt;</span><span>myconsole</span><span>.</span><span>exe
</span><span>Hello</span><span> </span><span>World</span><span>!</span><span>
C</span><span>:</span><span>\Users\rlander\myconsole\b</span><span>in</span><span>\Debug\netcoreapp3</span><span>.</span><span>0</span><span>&gt;</span><span>dotnet myconsole</span><span>.</span><span>dll
</span><span>Hello</span><span> </span><span>World</span><span>!</span></pre></div><p>On Linux (and macOS will be similar):</p><div><pre><span>root@cc08212a1da6</span><span>:/</span><span>myconsole</span><span># dotnet build</span><span>
root@cc08212a1da6</span><span>:</span><span>/myconsole# cd bin/</span><span>Debug</span><span>/</span><span>netcoreapp3</span><span>.</span><span>0</span><span>/</span><span>
root@cc08212a1da6</span><span>:</span><span>/myconsole/</span><span>bin</span><span>/</span><span>Debug</span><span>/</span><span>netcoreapp3</span><span>.</span><span>0</span><span># ls</span><span>
myconsole            myconsole</span><span>.</span><span>dll  myconsole</span><span>.</span><span>runtimeconfig</span><span>.</span><span>dev</span><span>.</span><span>json
myconsole</span><span>.</span><span>deps</span><span>.</span><span>json  myconsole</span><span>.</span><span>pdb  myconsole</span><span>.</span><span>runtimeconfig</span><span>.</span><span>json
root@cc08212a1da6</span><span>:</span><span>/myconsole/</span><span>bin</span><span>/</span><span>Debug</span><span>/</span><span>netcoreapp3</span><span>.</span><span>0</span><span># ./myconsole</span><span>
</span><span>Hello</span><span> </span><span>World</span><span>!</span><span>
root@cc08212a1da6</span><span>:</span><span>/myconsole/</span><span>bin</span><span>/</span><span>Debug</span><span>/</span><span>netcoreapp3</span><span>.</span><span>0</span><span># dotnet myconsole.dll</span><span>
</span><span>Hello</span><span> </span><span>World</span><span>!</span></pre></div><p>An executable is provided that matches the environment of the SDK you are using. We have not yet enabled specifying <code>-r</code> arguments for other runtime environments.</p><h2><a id="user-content-dotnet-build-now-copies-dependencies" href="#dotnet-build-now-copies-dependencies"></a>dotnet build now copies dependencies</h2><p>dotnet build now copies NuGet dependencies for your application from the NuGet cache to your build output folder during the build operation. Until this release,those dependencies were only copied as part of dotnet publish. This change allows you to xcopy your build output to different machines.</p><p>There are some operations, like linking and razor page publishing that will still require publishing.</p><p>You can see the new experience in the following example:</p><div><pre><span>C</span><span>:</span><span>\Users\rlander\myconsole</span><span>&gt;</span><span>dotnet add </span><span>package</span><span> </span><span>Newtonsoft</span><span>.</span><span>json
C</span><span>:</span><span>\Users\rlander\myconsole</span><span>&gt;</span><span>dotnet build
C</span><span>:</span><span>\Users\rlander\myconsole</span><span>&gt;</span><span>dir </span><span>/</span><span>b bin\Debug\netcoreapp3</span><span>.</span><span>0</span><span>\*</span><span>.</span><span>dll
myconsole</span><span>.</span><span>dll
</span><span>Newtonsoft</span><span>.</span><span>Json</span><span>.</span><span>dll</span></pre></div><h2><a id="user-content-local-dotnet-tools" href="#local-dotnet-tools"></a>Local dotnet tools</h2><p>.NET Core tools has been updated to include a local tools scenario. We added <a href="https://blogs.msdn.microsoft.com/dotnet/2018/05/30/announcing-net-core-2-1/" rel="nofollow" target="_blank">global tools</a> in .NET Core 2.1. Global tools are available from any location on the machine for the current user. This is great, but this does not allow the version to be selected per location (usually per repository) and they do not offer an easy way to restore a development or build tool environment. A particular location on disk can now be associated with a set of local tools and their versions. Local tools rely on a tool manifest file named <code>dotnet-tools.json</code>. We suggest supplying the tool manifest file at the root of the repository.</p><p>Local tools have a different experience for adding global tools to a tool manifest file (usually a repository) and cloning a repository containing them. If you clone a repo that contains local tools, you simply need to run the following command:</p><p>After restoring, you call a local tool with:</p><div><pre><span>dotnet tool run </span><span>&lt;toolCommandName&gt;</span></pre></div><p>When a local tool is called, dotnet searches for a manifest up the directory structure. When a tool manifest file is found, it is searched for the requested tool. If the tool is found, it includes the information needed to find the tool in the NuGet global packages location. The correct version of the tool from the tool manifest file was placed in the cache on restore.</p><p>If the tool is found in the manifest, but not the cache, the user receives an error. The message will be improved after Preview 1 to request the user run <code>dotnet tool restore</code>.</p><p>To add local tools to a directory, you need to first create the tool manifest file. After Preview 1 we will offer a mechanism for creating tool manifest files, probably via a dotnet new template. For Preview 1 you must create the file names dotnet-tools.json with the following contents:</p>
<p>Once the manifest is created, you can add local tools to it using:</p><div><pre><span>dotnet tool install </span><span>&lt;toolPackageId&gt;</span></pre></div><p>This command installs the latest version of the tool, unless another version is specified. This version is written into the tool manifest file to allow the correct version of the tool to be called. The tool manifest file is designed to allow hand editing – which you might do to update the required version for working with the repository. An example <code>dotnet-tools.json</code> file follows:</p>
<p>To remove a tool from the tool manifest file, run the following command:</p><div><pre><span>dotnet tool uninstall </span><span>&lt;toolPackageId&gt;</span></pre></div><p>If the tool manifest file is checked into your source control, programmers cloning your repo can gain access to the correct tools as explained above.</p><p>For both global and local tools, a compatible version of the runtime is required. Many tools currently on NuGet.org target .NET Core Runtime 2.1. If you only install the preview of .NET Core 3.0, you may also need to manually install the <a href="https://dotnet.microsoft.com/download/dotnet-core/2.1" rel="nofollow" target="_blank">.NET Core 2.1 Runtime</a>.</p><p>For more information, see <a href="https://github.com/dotnet/cli/issues/10288" target="_blank">Local Tools Early Preview Documentation</a>.</p><h2><a id="user-content-introducing-a-fast-in-box-json-reader" href="#introducing-a-fast-in-box-json-reader"></a>Introducing a fast in-box JSON Reader</h2><p><code>System.Text.Json.Utf8JsonReader</code> is a high-performance, low allocation, forward-only reader for UTF-8 encoded JSON text, read from a <code>ReadOnlySpan&lt;byte&gt;</code>. The <code>Utf8JsonReader</code> is a foundational, low-level type, that can be leveraged to build custom parsers and deserializers. Reading through a JSON payload using the new <code>Utf8JsonReader</code> is 2x faster than using the reader from Json.NET. It does not allocate until you need to actualize JSON tokens as (UTF16)strings.</p><p>This new API will include the following components:</p><ul><li>In Preview 1: JSON reader (sequential access)</li><li>Coming next: JSON writer, DOM (random access), poco serializer, poco deserializer</li></ul><p>Here is the basic reader loop for the <code>Utf8JsonReader</code> that can be used as a starting point:</p><div id="gist93402738">
    <div>
      <div>
        <div>
  <div id="file-utf8jsonreaderloop-usage-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L1" data-line-number="1"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC1"><span>public</span> <span>static</span> <span>void</span> <span>Utf8JsonReaderLoop</span>(<span>ReadOnlySpan</span>&lt;<span>byte</span>&gt; <span>dataUtf8</span>)</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L2" data-line-number="2"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L3" data-line-number="3"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC3">    <span>var</span> <span>json</span> <span>=</span> <span>new</span> <span>Utf8JsonReader</span>(<span>dataUtf8</span>, <span>isFinalBlock</span>: <span>true</span>, <span>state</span>: <span>default</span>);</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L4" data-line-number="4"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC4">
</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L5" data-line-number="5"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC5">    <span>while</span> (<span>json</span>.<span>Read</span>())</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L6" data-line-number="6"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC6">    {</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L7" data-line-number="7"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC7">        <span>JsonTokenType</span> <span>tokenType</span> <span>=</span> <span>json</span>.<span>TokenType</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L8" data-line-number="8"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC8">        <span>ReadOnlySpan</span>&lt;<span>byte</span>&gt; <span>valueSpan</span> <span>=</span> <span>json</span>.<span>ValueSpan</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L9" data-line-number="9"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC9">        <span>switch</span> (<span>tokenType</span>)</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L10" data-line-number="10"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC10">        {</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L11" data-line-number="11"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC11">            <span>case</span> <span>JsonTokenType</span>.<span>StartObject</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L12" data-line-number="12"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC12">            <span>case</span> <span>JsonTokenType</span>.<span>EndObject</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L13" data-line-number="13"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC13">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L14" data-line-number="14"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC14">            <span>case</span> <span>JsonTokenType</span>.<span>StartArray</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L15" data-line-number="15"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC15">            <span>case</span> <span>JsonTokenType</span>.<span>EndArray</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L16" data-line-number="16"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC16">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L17" data-line-number="17"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC17">            <span>case</span> <span>JsonTokenType</span>.<span>PropertyName</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L18" data-line-number="18"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC18">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L19" data-line-number="19"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC19">            <span>case</span> <span>JsonTokenType</span>.<span>String</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L20" data-line-number="20"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC20">                <span>string</span> <span>valueString</span> <span>=</span> <span>json</span>.<span>GetStringValue</span>();</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L21" data-line-number="21"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC21">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L22" data-line-number="22"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC22">            <span>case</span> <span>JsonTokenType</span>.<span>Number</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L23" data-line-number="23"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC23">                <span>if</span> (<span>!</span><span>json</span>.<span>TryGetInt32Value</span>(<span>out</span> <span>int</span> <span>valueInteger</span>))</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L24" data-line-number="24"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC24">                {</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L25" data-line-number="25"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC25">                    <span>throw</span> <span>new</span> <span>FormatException</span>();</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L26" data-line-number="26"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC26">                }</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L27" data-line-number="27"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC27">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L28" data-line-number="28"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC28">            <span>case</span> <span>JsonTokenType</span>.<span>True</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L29" data-line-number="29"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC29">            <span>case</span> <span>JsonTokenType</span>.<span>False</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L30" data-line-number="30"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC30">                <span>bool</span> <span>valueBool</span> <span>=</span> <span>json</span>.<span>GetBooleanValue</span>();</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L31" data-line-number="31"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC31">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L32" data-line-number="32"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC32">            <span>case</span> <span>JsonTokenType</span>.<span>Null</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L33" data-line-number="33"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC33">                <span>break</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L34" data-line-number="34"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC34">            <span>default</span>:</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L35" data-line-number="35"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC35">                <span>throw</span> <span>new</span> <span>ArgumentException</span>();</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L36" data-line-number="36"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC36">        }</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L37" data-line-number="37"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC37">    }</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L38" data-line-number="38"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC38">
</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L39" data-line-number="39"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC39">    <span>dataUtf8</span> <span>=</span> <span>dataUtf8</span>.<span>Slice</span>((<span>int</span>)<span>json</span>.<span>BytesConsumed</span>);</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L40" data-line-number="40"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC40">    <span>JsonReaderState</span> <span>state</span> <span>=</span> <span>json</span>.<span>CurrentState</span>;</td>
      </tr>
      <tr>
        <td id="file-utf8jsonreaderloop-usage-cs-L41" data-line-number="41"></td>
        <td id="file-utf8jsonreaderloop-usage-cs-LC41">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>The .NET ecosystem has relied on <a href="https://www.newtonsoft.com/json" rel="nofollow" target="_blank">Json.NET</a> and other popular JSON libraries, which continue to be good choices. JSON.NET uses .NET strings as its base datatype, which are UTF16 under the hood. In .NET Core 2.1 and 3.0, we added new APIs that makes it possible to write JSON APIs that require much less memory, based on using <code>Span&lt;T&gt;</code> and UTF8 strings, and better serve the needs of high-throughput applications like Kestrel, ASP.NET Core web server. That’s what we’ve done with Utf8JsonReader.</p><p>You might wonder why we can’t just update Json.NET to include support for parsing JSON using <code>Span&lt;T&gt;</code>? <a href="https://github.com/jamesnk" target="_blank">James Newton-King</a> — the author of Json.NET — has the following to say about that:</p><p>Json.NET was created over 10 years ago, and since then it has added a wide range of features aimed to help developers work with JSON in .NET. In that time Json.NET has also become far and away NuGet’s most depended on and downloaded package, and is the go-to library for JSON support in .NET. Unfortunately, Json.NET’s wealth of features and popularity works against making major changes to it. Supporting new technologies like Span would require fundamental breaking changes to the library and would disrupt existing applications and libraries that depend on it.</p><p>Going forward Json.NET will continue to be worked on and invested in, both addressing known issues today and supporting new platforms in the future. Json.NET has always existed alongside other JSON libraries for .NET, and there will be nothing to prevent you using one or more together, depending on whether you need the performance of the new JSON APIs or the large feature set of Json.NET.</p><p>See <a href="https://github.com/dotnet/corefx/issues/33115" target="_blank">dotnet/corefx #33115</a> and <a href="https://github.com/dotnet/corefx/blob/master/src/System.Text.Json/roadmap/README.md" target="_blank">System.Text.Json Roadmap</a> for more information.</p><h2><a id="user-content-ranges-and-indices" href="#ranges-and-indices"></a>Ranges and indices</h2><p>We’re adding a type <code>Index</code>, which can be used for indexing. You can create one from an <code>int</code> that counts from the beginning, or with a prefix <code>^</code> operator that counts from the end:</p><div id="gist93403288">
    <div>
      <div>
        <div>
  <div id="file-index-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-index-example-cs-L1" data-line-number="1"></td>
        <td id="file-index-example-cs-LC1"><span>Index</span> <span>i1</span> <span>=</span> <span>3</span>;  <span><span>//</span> number 3 from beginning</span></td>
      </tr>
      <tr>
        <td id="file-index-example-cs-L2" data-line-number="2"></td>
        <td id="file-index-example-cs-LC2"><span>Index</span> <span>i2</span> <span>=</span> <span>^</span><span>4</span>; <span><span>//</span> number 4 from end</span></td>
      </tr>
      <tr>
        <td id="file-index-example-cs-L3" data-line-number="3"></td>
        <td id="file-index-example-cs-LC3"><span>int</span>[] <span>a</span> <span>=</span> { <span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>, <span>9</span> };</td>
      </tr>
      <tr>
        <td id="file-index-example-cs-L4" data-line-number="4"></td>
        <td id="file-index-example-cs-LC4"><span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>{<span>a</span>[<span>i1</span>]}, {<span>a</span>[<span>i2</span>]}<span>"</span></span>); <span><span>//</span> "3, 6"</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>We’re also introducing a <code>Range</code> type, which consists of two <code>Index</code> values, one for the start and one for the end, and can be written with a <code>x..y</code> range expression. You can then index with a Range in order to produce a slice:</p><div id="gist93403318">
    <div>
      <div>
        <div>
  <div id="file-range-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-range-example-cs-L1" data-line-number="1"></td>
        <td id="file-range-example-cs-LC1"><span>var</span> <span>slice</span> <span>=</span> <span>a</span>[<span>i1</span>..<span>i2</span>]; <span><span>//</span> { 3, 4, 5 }</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>Note: This feature is also part of <a href="https://blogs.msdn.microsoft.com/dotnet/2018/11/12/building-c-8-0/" rel="nofollow" target="_blank">C# 8</a>.</p><h2><a id="user-content-async-streams" href="#async-streams"></a>Async streams</h2><p>We introduce <code>IAsyncEnumerable&lt;T&gt;</code>, which is exactly what you’d expect; an asynchronous version of <code>IEnumerable&lt;T&gt;</code>. The language lets you await foreach over these to consume their elements, and yield return to them to produce elements.</p><p>The following example demonstrates both production and consumption of async streams. The foreach statement is async and itself uses <code>yield return</code> to produce an async stream for callers. This pattern – using <code>yield return</code> — is the recommended model for producing async streams.</p><div id="gist93403181">
    <div>
      <div>
        <div>
  <div id="file-iasyncenumerable-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-iasyncenumerable-example-cs-L1" data-line-number="1"></td>
        <td id="file-iasyncenumerable-example-cs-LC1"><span>async</span> <span>IAsyncEnumerable</span>&lt;<span>int</span>&gt; <span>GetBigResultsAsync</span>()</td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L2" data-line-number="2"></td>
        <td id="file-iasyncenumerable-example-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L3" data-line-number="3"></td>
        <td id="file-iasyncenumerable-example-cs-LC3">    <span>await</span> <span>foreach</span> (<span>var</span> <span>result</span> <span>in</span> <span>GetResultsAsync</span>())</td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L4" data-line-number="4"></td>
        <td id="file-iasyncenumerable-example-cs-LC4">    {</td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L5" data-line-number="5"></td>
        <td id="file-iasyncenumerable-example-cs-LC5">        <span>if</span> (<span>result</span> <span>&gt;</span> <span>20</span>) <span>yield</span> <span>return</span> <span>result</span>; </td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L6" data-line-number="6"></td>
        <td id="file-iasyncenumerable-example-cs-LC6">    }</td>
      </tr>
      <tr>
        <td id="file-iasyncenumerable-example-cs-L7" data-line-number="7"></td>
        <td id="file-iasyncenumerable-example-cs-LC7">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>In addition to being able to <code>await foreach</code>, you can also create async iterators, e.g. an iterator that returns an <code>IAsyncEnumerable/IAsyncEnumerator</code> that you can both <code>await</code> and <code>yield</code> in. For objects that need to be disposed, you can use <code>IAsyncDisposable</code>, which various BCL types implement, such as <code>Stream</code> and <code>Timer</code>.</p><p>Note: This feature is also part of <a href="https://blogs.msdn.microsoft.com/dotnet/2018/11/12/building-c-8-0/" rel="nofollow" target="_blank">C# 8</a>.</p><h2><a id="user-content-systembufferssequencereader" href="#systembufferssequencereader"></a>System.Buffers.SequenceReader</h2><p>We added <code>System.Buffers.SequenceReader</code> as a reader for <code>ReadOnlySequence&lt;T&gt;</code>. This allows easy, high performance, low allocation parsing of <code>System.IO.Pipelines</code> data that can cross multiple backing buffers. The following example breaks an input <code>Sequence</code> into valid CR/LF delimited lines:</p><div id="gist93403197">
    <div>
      <div>
        <div>
  <div id="file-system-buffers-sequencereader-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-system-buffers-sequencereader-example-cs-L1" data-line-number="1"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC1"><span>private</span> <span>static</span> <span>ReadOnlySpan</span>&lt;<span>byte</span>&gt; <span>CRLF</span> =&gt; <span>new</span> <span>byte</span>[] { (<span>byte</span>)<span>'<span>\r</span>'</span>, (<span>byte</span>)<span>'<span>\n</span>'</span> };</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L2" data-line-number="2"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC2">
</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L3" data-line-number="3"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC3"><span>public</span> <span>static</span> <span>void</span> <span>ReadLines</span>(<span>ReadOnlySequence</span>&lt;<span>byte</span>&gt; <span>sequence</span>)</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L4" data-line-number="4"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC4">{</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L5" data-line-number="5"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC5">    <span>SequenceReader</span>&lt;<span>byte</span>&gt; <span>reader</span> <span>=</span> <span>new</span> <span>SequenceReader</span>&lt;<span>byte</span>&gt;(<span>sequence</span>);</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L6" data-line-number="6"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC6">
</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L7" data-line-number="7"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC7">    <span>while</span> (<span>!</span><span>reader</span>.<span>End</span>)</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L8" data-line-number="8"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC8">    {</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L9" data-line-number="9"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC9">        <span>if</span> (<span>!</span><span>reader</span>.<span>TryReadToAny</span>(<span>out</span> <span>ReadOnlySpan</span>&lt;<span>byte</span>&gt; <span>line</span>, <span>CRLF</span>, <span>advancePastDelimiter</span>:<span>false</span>))</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L10" data-line-number="10"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC10">        {</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L11" data-line-number="11"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC11">            <span><span>//</span> Couldn't find another delimiter</span></td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L12" data-line-number="12"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC12">            <span><span>//</span> ...</span></td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L13" data-line-number="13"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC13">        }</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L14" data-line-number="14"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC14">
</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L15" data-line-number="15"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC15">        <span>if</span> (<span>!</span><span>reader</span>.<span>IsNext</span>(<span>CRLF</span>, <span>advancePast</span>: <span>true</span>))</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L16" data-line-number="16"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC16">        {</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L17" data-line-number="17"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC17">            <span><span>//</span> Not a good CR/LF pair</span></td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L18" data-line-number="18"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC18">            <span><span>//</span> ...</span></td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L19" data-line-number="19"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC19">        }</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L20" data-line-number="20"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC20">
</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L21" data-line-number="21"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC21">        <span><span>//</span> line is valid, process</span></td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L22" data-line-number="22"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC22">        <span>ProcessLine</span>(<span>line</span>);</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L23" data-line-number="23"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC23">    }</td>
      </tr>
      <tr>
        <td id="file-system-buffers-sequencereader-example-cs-L24" data-line-number="24"></td>
        <td id="file-system-buffers-sequencereader-example-cs-LC24">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<h2><a id="user-content-serial-port-apis-now-supported-on-linux" href="#serial-port-apis-now-supported-on-linux"></a>Serial Port APIs now supported on Linux</h2><p>The serial port may seem like an old peripheral that you have not seen on a machine in years. It’s not a commonly used or available port on laptops and desktops, but it’s critical for Internet of Things (IoT) solutions. We now have support for serial ports on Linux. Up until now, support was limited to Windows.</p><p>We have been talking to IoT developers about this capability over the last few months. One of the specific requests was to communicate with an Arduino from a Raspberry Pi. The <a href="https://github.com/dotnet/iot/tree/master/samples/serialport-arduino" target="_blank">sample</a> and following video&nbsp;demonstrates that scenario.</p><p><iframe width="560" height="315" allowfullscreen="allowfullscreen" frameborder="0" src="https://www.youtube.com/embed/TW4K64hfa5U"></iframe></p><p>We’re also working on making it possible to flash an Arduino from a Raspberry Pi with .NET Core APIs. We have had requests from developers that want to use specific standards like <a href="https://en.wikipedia.org/wiki/RS-485" rel="nofollow" target="_blank">RS-485</a> and protocols such as <a href="https://en.wikipedia.org/wiki/Modbus" rel="nofollow" target="_blank">MODBUS</a>, <a href="https://en.wikipedia.org/wiki/CAN_bus" rel="nofollow" target="_blank">CANBUS</a> and <a href="https://en.wikipedia.org/wiki/CcTalk" rel="nofollow" target="_blank">ccTalk</a>. Please tell us which protocols are needed for your application scenarios.</p><h2><a id="user-content-gpio-pwm-spi-and-i2c-apis-now-available" href="#gpio-pwm-spi-and-i2c-apis-now-available"></a>GPIO, PWM, SPI and I2C APIs now available</h2><p>IoT devices expose much more than serial ports. They typically expose <a href="https://pinout.xyz/" rel="nofollow" target="_blank">multiple kinds of pins</a> that can be programmatically used to read sensors, drive LED/LCD/eInk displays and communicate with our devices. .NET Core now has APIs for <a href="https://en.wikipedia.org/wiki/General-purpose_input/output" rel="nofollow" target="_blank">GPIO</a>, <a href="https://en.wikipedia.org/wiki/Pulse-width_modulation" rel="nofollow" target="_blank">PWM</a>, <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface" rel="nofollow" target="_blank">SPI</a>, and <a href="https://en.wikipedia.org/wiki/I%C2%B2C" rel="nofollow" target="_blank">I²C</a> pin types.</p><p>These APIs are available via the <a href="https://dotnet.myget.org/feed/dotnet-corefxlab/package/nuget/System.Devices.Gpio" rel="nofollow" target="_blank">System.Device.GPIO NuGet package</a>. It will be supported for .NET Core 2.1 and later releases.</p><p>The previous section shows a raspberry Pi communicating with an Arduino using Pins 8 and 10 (TX and RX, respectively) for serial port communication. That’s one example of programmatically programming these pins.</p><p>The following image demonstrates printing text to an LCD panel.</p><p><a href="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/iot-display-zoom-263x350.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/iot-display-zoom-263x350.png" alt=".NET Core IoT LCD Display" width="263" height="350"> </a></p><p>You can see what a “developer installation” looks like for building an IoT device with .NET Core.</p><p><a href="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/iot-display-467x350.png" data-featherlight="image"> <img src="https://devblogs.microsoft.com/wp-content/uploads/sites/10/2019/02/iot-display-467x350.png" alt=".NET Core IoT Display" width="467" height="350"> </a></p><p>The packages are built from <a href="https://github.com/dotnet/iot" target="_blank">dotnet/iot repo</a>. The repo also includes <a href="https://github.com/dotnet/iot/blob/master/samples/README.md" target="_blank">samples</a> and <a href="https://github.com/dotnet/iot/blob/master/src/devices/README.md" target="_blank">device bindings</a>. We hope that the community will join us by contributing samples and device bindings. We have noticed that the Python community has a rich set of samples and bindings, particularly as <a href="https://github.com/adafruit/Adafruit_Learning_System_Guides" target="_blank">provided by AdaFruit</a>. In fact, we ported some of those samples (where licenses allowed) to C#. We aspire to provide a similarly rich set of samples and bindings for .NET developers over time.</p><p>Most of our effort has been spent on supporting these APIs in <a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/" rel="nofollow" target="_blank">Raspberry Pi 3</a>. We plan to support other devices, like the <a href="https://www.solid-run.com/nxp-family/hummingboard/" rel="nofollow" target="_blank">Hummingboard</a>. Please tell us which boards are important to you. We are in the process of testing <a href="https://www.mono-project.com/" rel="nofollow" target="_blank">Mono</a> on the <a href="https://www.raspberrypi.org/products/raspberry-pi-zero/" rel="nofollow" target="_blank">Raspberry Pi Zero</a>.</p><h2><a id="user-content-supporting-tls-13-and-openssl-111-now-supported-on-linux" href="#supporting-tls-13-and-openssl-111-now-supported-on-linux"></a>Supporting TLS 1.3 and OpenSSL 1.1.1 now Supported on Linux</h2><p>.NET Core will now take advantage of <a href="https://www.openssl.org/blog/blog/2018/09/11/release111/" rel="nofollow" target="_blank">TLS 1.3 support in OpenSSL 1.1.1</a>, when it is available in a given environment. There are multiple benefits of TLS 1.3, per the <a href="https://www.openssl.org/blog/blog/2018/09/11/release111/" rel="nofollow" target="_blank">OpenSSL team</a>:</p><ul><li>Improved connection times due to a reduction in the number of round trips required between the client and server</li><li>Improved security due to the removal of various obsolete and insecure cryptographic algorithms and encryption of more of the connection handshake</li></ul><p>.NET Core 3.0 Preview 1 is capable of utilizing OpenSSL 1.1.1, OpenSSL 1.1.0, or OpenSSL 1.0.2 (whatever the best version found is, on a Linux system). When OpenSSL 1.1.1 is available the SslStream and HttpClient types will use TLS 1.3 when using SslProtocols.None (system default protocols), assuming both the client and server support TLS 1.3.</p><p>The following sample demonstrates .NET Core 3.0 Preview 1 on Ubuntu 18.10 connecting to <a href="https://www.cloudflare.com/" rel="nofollow" target="_blank">https://www.cloudflare.com</a>:</p><div><pre><span>jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>tlstest$ cat </span><span>Program</span><span>.</span><span>cs
</span><span>using</span><span> </span><span>System</span><span>;</span><span>
</span><span>using</span><span> </span><span>System</span><span>.</span><span>Net</span><span>.</span><span>Security</span><span>;</span><span>
</span><span>using</span><span> </span><span>System</span><span>.</span><span>Net</span><span>.</span><span>Sockets</span><span>;</span><span>
</span><span>using</span><span> </span><span>System</span><span>.</span><span>Threading</span><span>.</span><span>Tasks</span><span>;</span><span>

</span><span>namespace</span><span> tlstest
</span><span>{</span><span>
    </span><span>class</span><span> </span><span>Program</span><span>
    </span><span>{</span><span>
        </span><span>static</span><span> async </span><span>Task</span><span> </span><span>Main</span><span>()</span><span>
        </span><span>{</span><span>
            </span><span>using</span><span> </span><span>(</span><span>TcpClient</span><span> tcpClient </span><span>=</span><span> </span><span>new</span><span> </span><span>TcpClient</span><span>())</span><span>
            </span><span>{</span><span>
                </span><span>string</span><span> targetHost </span><span>=</span><span> </span><span>"www.cloudflare.com"</span><span>;</span><span>

                await tcpClient</span><span>.</span><span>ConnectAsync</span><span>(</span><span>targetHost</span><span>,</span><span> </span><span>443</span><span>);</span><span>

                </span><span>using</span><span> </span><span>(</span><span>SslStream</span><span> sslStream </span><span>=</span><span> </span><span>new</span><span> </span><span>SslStream</span><span>(</span><span>tcpClient</span><span>.</span><span>GetStream</span><span>()))</span><span>
                </span><span>{</span><span>
                    await sslStream</span><span>.</span><span>AuthenticateAsClientAsync</span><span>(</span><span>targetHost</span><span>);</span><span>

                    await </span><span>Console</span><span>.</span><span>Out</span><span>.</span><span>WriteLineAsync</span><span>(</span><span>$</span><span>"Connected to {targetHost} with {sslStream.SslProtocol}"</span><span>);</span><span>
                </span><span>}</span><span>
            </span><span>}</span><span>
        </span><span>}</span><span>
    </span><span>}</span><span>
</span><span>}</span><span>
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>tlstest$ dotnet run
</span><span>Connected</span><span> to www</span><span>.</span><span>cloudflare</span><span>.</span><span>com </span><span>with</span><span> </span><span>Tls13</span><span>
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>tlstest$ openssl version
</span><span>OpenSSL</span><span> </span><span>1.1</span><span>.</span><span>1</span><span>  </span><span>11</span><span> </span><span>Sep</span><span> </span><span>2018</span></pre></div><p>Note: Windows and macOS do not yet support TLS 1.3. .NET Core will support TLS 1.3 on those operating systems — we expect automatically — when support becomes available.</p><h2><a id="user-content-cryptography" href="#cryptography"></a>Cryptography</h2><p>We added support for AES-GCM and AES-CCM ciphers, implemented via <code>System.Security.Cryptography.AesGcm</code> and <code>System.Security.Cryptography.AesCcm</code>. These algorithms are both <a href="https://en.wikipedia.org/wiki/Authenticated_encryption" rel="nofollow" target="_blank">Authenticated Encryption with Association Data (AEAD) algorithms</a>, and the first Authenticated Encryption (AE) algorithms added to .NET Core.</p><p>The following code demonstrates using AesGcm cipher to encrypt and decrypt random data. The code for AesCcm would look almost identical (only the class variable names would be different).</p><div><pre><span>// key should be: pre-known, derived, or transported via another channel, such as RSA encryption</span><span>
</span><span>byte</span><span>[]</span><span> key </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>16</span><span>];</span><span>
</span><span>RandomNumberGenerator</span><span>.</span><span>Fill</span><span>(</span><span>key</span><span>);</span><span>

</span><span>byte</span><span>[]</span><span> nonce </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>12</span><span>];</span><span>
</span><span>RandomNumberGenerator</span><span>.</span><span>Fill</span><span>(</span><span>nonce</span><span>);</span><span>

</span><span>// normally this would be your data</span><span>
</span><span>byte</span><span>[]</span><span> dataToEncrypt </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>1234</span><span>];</span><span>
</span><span>byte</span><span>[]</span><span> associatedData </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>333</span><span>];</span><span>
</span><span>RandomNumberGenerator</span><span>.</span><span>Fill</span><span>(</span><span>dataToEncrypt</span><span>);</span><span>
</span><span>RandomNumberGenerator</span><span>.</span><span>Fill</span><span>(</span><span>associatedData</span><span>);</span><span>

</span><span>// these will be filled during the encryption</span><span>
</span><span>byte</span><span>[]</span><span> tag </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>16</span><span>];</span><span>
</span><span>byte</span><span>[]</span><span> ciphertext </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>dataToEncrypt</span><span>.</span><span>Length</span><span>];</span><span>

</span><span>using</span><span> </span><span>(</span><span>AesGcm</span><span> aesGcm </span><span>=</span><span> </span><span>new</span><span> </span><span>AesGcm</span><span>(</span><span>key</span><span>))</span><span>
</span><span>{</span><span>
    aesGcm</span><span>.</span><span>Encrypt</span><span>(</span><span>nonce</span><span>,</span><span> dataToEncrypt</span><span>,</span><span> ciphertext</span><span>,</span><span> tag</span><span>,</span><span> associatedData</span><span>);</span><span>
</span><span>}</span><span>

</span><span>// tag, nonce, ciphertext, associatedData should be sent to the other part</span><span>

</span><span>byte</span><span>[]</span><span> decryptedData </span><span>=</span><span> </span><span>new</span><span> </span><span>byte</span><span>[</span><span>ciphertext</span><span>.</span><span>Length</span><span>];</span><span>

</span><span>using</span><span> </span><span>(</span><span>AesGcm</span><span> aesGcm </span><span>=</span><span> </span><span>new</span><span> </span><span>AesGcm</span><span>(</span><span>key</span><span>))</span><span>
</span><span>{</span><span>
    aesGcm</span><span>.</span><span>Decrypt</span><span>(</span><span>nonce</span><span>,</span><span> ciphertext</span><span>,</span><span> tag</span><span>,</span><span> decryptedData</span><span>,</span><span> associatedData</span><span>);</span><span>
</span><span>}</span><span>

</span><span>// do something with the data</span><span>
</span><span>// this should always print that data is the same</span><span>
</span><span>Console</span><span>.</span><span>WriteLine</span><span>(</span><span>$</span><span>"AES-GCM: Decrypted data is{(dataToEncrypt.SequenceEqual(decryptedData) ? "</span><span>the same </span><span>as</span><span>" : "</span><span>different than</span><span>")} original data."</span><span>);</span></pre></div><h2><a id="user-content-cryptographic-key-importexport" href="#cryptographic-key-importexport"></a>Cryptographic Key Import/Export</h2><p>.NET Core 3.0 Preview 1 now supports the import and export of asymmetric public and private keys from standard formats, without needing to use an X.509 certificate.</p><p>All key types (RSA, DSA, ECDsa, ECDiffieHellman) support the X.509 SubjectPublicKeyInfo format for public keys, and the PKCS#8 PrivateKeyInfo and PKCS#8 EncryptedPrivateKeyInfo formats for private keys. RSA additionally supports PKCS#1 RSAPublicKey and PKCS#1 RSAPrivateKey. The export methods all produce DER-encoded binary data, and the import methods expect the same; if a key is stored in the text-friendly PEM format the caller will need to base64-decode the content before calling an import method.</p><div><pre><span>jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>rsakeyprint$ cat </span><span>Program</span><span>.</span><span>cs
</span><span>using</span><span> </span><span>System</span><span>;</span><span>
</span><span>using</span><span> </span><span>System</span><span>.</span><span>IO</span><span>;</span><span>
</span><span>using</span><span> </span><span>System</span><span>.</span><span>Security</span><span>.</span><span>Cryptography</span><span>;</span><span>

</span><span>namespace</span><span> rsakeyprint
</span><span>{</span><span>
    </span><span>class</span><span> </span><span>Program</span><span>
    </span><span>{</span><span>
        </span><span>static</span><span> </span><span>void</span><span> </span><span>Main</span><span>(</span><span>string</span><span>[]</span><span> args</span><span>)</span><span>
        </span><span>{</span><span>
            </span><span>using</span><span> </span><span>(</span><span>RSA rsa </span><span>=</span><span> RSA</span><span>.</span><span>Create</span><span>())</span><span>
            </span><span>{</span><span>
                </span><span>byte</span><span>[]</span><span> keyBytes </span><span>=</span><span> </span><span>File</span><span>.</span><span>ReadAllBytes</span><span>(</span><span>args</span><span>[</span><span>0</span><span>]);</span><span>
                rsa</span><span>.</span><span>ImportRSAPrivateKey</span><span>(</span><span>keyBytes</span><span>,</span><span> </span><span>out</span><span> </span><span>int</span><span> bytesRead</span><span>);</span><span>
 
                </span><span>Console</span><span>.</span><span>WriteLine</span><span>(</span><span>$</span><span>"Read {bytesRead} bytes, {keyBytes.Length-bytesRead} extra byte(s) in file."</span><span>);</span><span>
                </span><span>RSAParameters</span><span> rsaParameters </span><span>=</span><span> rsa</span><span>.</span><span>ExportParameters</span><span>(</span><span>true</span><span>);</span><span>
                </span><span>Console</span><span>.</span><span>WriteLine</span><span>(</span><span>BitConverter</span><span>.</span><span>ToString</span><span>(</span><span>rsaParameters</span><span>.</span><span>D</span><span>));</span><span>
            </span><span>}</span><span>
        </span><span>}</span><span>
    </span><span>}</span><span>
</span><span>}</span><span>
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>rsakeyprint$ echo </span><span>Making</span><span> a small key to save on screen space</span><span>.</span><span>
</span><span>Making</span><span> a small key to save on screen space</span><span>.</span><span>
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>rsakeyprint$ openssl genrsa </span><span>768</span><span> </span><span>|</span><span> openssl rsa </span><span>-</span><span>outform der </span><span>-</span><span>out</span><span> rsa</span><span>.</span><span>key
</span><span>Generating</span><span> RSA </span><span>private</span><span> key</span><span>,</span><span> </span><span>768</span><span> bit </span><span>long</span><span> modulus </span><span>(</span><span>2</span><span> primes</span><span>)</span><span>
</span><span>..+++++++</span><span>
</span><span>........+++++++</span><span>
e </span><span>is</span><span> </span><span>65537</span><span> </span><span>(</span><span>0x010001</span><span>)</span><span>
writing RSA key
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>rsakeyprint$ dotnet run rsa</span><span>.</span><span>key
</span><span>Read</span><span> </span><span>461</span><span> bytes</span><span>,</span><span> </span><span>0</span><span> extra </span><span>byte</span><span>(</span><span>s</span><span>)</span><span> </span><span>in</span><span> file</span><span>.</span><span>
</span><span>0F</span><span>-</span><span>D0</span><span>-</span><span>82</span><span>-</span><span>34</span><span>-</span><span>F8</span><span>-</span><span>13</span><span>-</span><span>38</span><span>-</span><span>4A</span><span>-</span><span>7F</span><span>-</span><span>C7</span><span>-</span><span>52</span><span>-</span><span>4A</span><span>-</span><span>F6</span><span>-</span><span>93</span><span>-</span><span>F8</span><span>-</span><span>FB</span><span>-</span><span>6D</span><span>-</span><span>98</span><span>-</span><span>7A</span><span>-</span><span>6A</span><span>-</span><span>04</span><span>-</span><span>3B</span><span>-</span><span>BC</span><span>-</span><span>35</span><span>-</span><span>8C</span><span>-</span><span>7D</span><span>-</span><span>AC</span><span>-</span><span>A5</span><span>-</span><span>A3</span><span>-</span><span>6E</span><span>-</span><span>AD</span><span>-</span><span>C1</span><span>-</span><span>66</span><span>-</span><span>30</span><span>-</span><span>81</span><span>-</span><span>2C</span><span>-</span><span>2A</span><span>-</span><span>DE</span><span>-</span><span>DA</span><span>-</span><span>60</span><span>-</span><span>03</span><span>-</span><span>6A</span><span>-</span><span>2C</span><span>-</span><span>D9</span><span>-</span><span>76</span><span>-</span><span>15</span><span>-</span><span>7F</span><span>-</span><span>61</span><span>-</span><span>97</span><span>-</span><span>57</span><span>-</span><span>
</span><span>79</span><span>-</span><span>E1</span><span>-</span><span>6E-45</span><span>-</span><span>62</span><span>-</span><span>C3</span><span>-</span><span>83</span><span>-</span><span>04</span><span>-</span><span>97</span><span>-</span><span>CB</span><span>-</span><span>32</span><span>-</span><span>EF</span><span>-</span><span>C5</span><span>-</span><span>17</span><span>-</span><span>5F</span><span>-</span><span>99</span><span>-</span><span>60</span><span>-</span><span>92</span><span>-</span><span>AE</span><span>-</span><span>B6</span><span>-</span><span>34</span><span>-</span><span>6F</span><span>-</span><span>30</span><span>-</span><span>06</span><span>-</span><span>03</span><span>-</span><span>AC</span><span>-</span><span>BF</span><span>-</span><span>15</span><span>-</span><span>24</span><span>-</span><span>43</span><span>-</span><span>84</span><span>-</span><span>EB</span><span>-</span><span>83</span><span>-</span><span>60</span><span>-</span><span>EF</span><span>-</span><span>4D</span><span>-</span><span>3B</span><span>-</span><span>BD</span><span>-</span><span>D9</span><span>-</span><span>5D</span><span>-</span><span>56</span><span>-</span><span>26</span><span>-</span><span>F0</span><span>-</span><span>51</span><span>-</span><span>CE</span><span>-</span><span>F1
jbarton@jsb</span><span>-</span><span>ubuntu1810</span><span>:~/</span><span>rsakeyprint$ openssl rsa </span><span>-</span><span>in</span><span> rsa</span><span>.</span><span>key </span><span>-</span><span>inform der </span><span>-</span><span>text </span><span>-</span><span>noout </span><span>|</span><span> grep </span><span>-</span><span>A7 </span><span>private</span><span>
privateExponent</span><span>:</span><span>
    </span><span>0f</span><span>:</span><span>d0</span><span>:</span><span>82</span><span>:</span><span>34</span><span>:</span><span>f8</span><span>:</span><span>13</span><span>:</span><span>38</span><span>:</span><span>4a</span><span>:</span><span>7f</span><span>:</span><span>c7</span><span>:</span><span>52</span><span>:</span><span>4a</span><span>:</span><span>f6</span><span>:</span><span>93</span><span>:</span><span>f8</span><span>:</span><span>
    fb</span><span>:</span><span>6d</span><span>:</span><span>98</span><span>:</span><span>7a</span><span>:</span><span>6a</span><span>:</span><span>04</span><span>:</span><span>3b</span><span>:</span><span>bc</span><span>:</span><span>35</span><span>:</span><span>8c</span><span>:</span><span>7d</span><span>:</span><span>ac</span><span>:</span><span>a5</span><span>:</span><span>a3</span><span>:</span><span>6e</span><span>:</span><span>
    ad</span><span>:</span><span>c1</span><span>:</span><span>66</span><span>:</span><span>30</span><span>:</span><span>81</span><span>:</span><span>2c</span><span>:</span><span>2a</span><span>:</span><span>de</span><span>:</span><span>da</span><span>:</span><span>60</span><span>:</span><span>03</span><span>:</span><span>6a</span><span>:</span><span>2c</span><span>:</span><span>d9</span><span>:</span><span>76</span><span>:</span><span>
    </span><span>15</span><span>:</span><span>7f</span><span>:</span><span>61</span><span>:</span><span>97</span><span>:</span><span>57</span><span>:</span><span>79</span><span>:</span><span>e1</span><span>:</span><span>6e</span><span>:</span><span>45</span><span>:</span><span>62</span><span>:</span><span>c3</span><span>:</span><span>83</span><span>:</span><span>04</span><span>:</span><span>97</span><span>:</span><span>cb</span><span>:</span><span>
    </span><span>32</span><span>:</span><span>ef</span><span>:</span><span>c5</span><span>:</span><span>17</span><span>:</span><span>5f</span><span>:</span><span>99</span><span>:</span><span>60</span><span>:</span><span>92</span><span>:</span><span>ae</span><span>:</span><span>b6</span><span>:</span><span>34</span><span>:</span><span>6f</span><span>:</span><span>30</span><span>:</span><span>06</span><span>:</span><span>03</span><span>:</span><span>
    ac</span><span>:</span><span>bf</span><span>:</span><span>15</span><span>:</span><span>24</span><span>:</span><span>43</span><span>:</span><span>84</span><span>:</span><span>eb</span><span>:</span><span>83</span><span>:</span><span>60</span><span>:</span><span>ef</span><span>:</span><span>4d</span><span>:</span><span>3b</span><span>:</span><span>bd</span><span>:</span><span>d9</span><span>:</span><span>5d</span><span>:</span><span>
    </span><span>56</span><span>:</span><span>26</span><span>:</span><span>f0</span><span>:</span><span>51</span><span>:</span><span>ce</span><span>:</span><span>f1</span></pre></div><p>PKCS#8 files can be inspected with the <code>System.Security.Cryptography.Pkcs.Pkcs8PrivateKeyInfo</code> class.</p><p>PFX/PKCS#12 files can be inspected and manipulated with <code>System.Security.Cryptography.Pkcs.Pkcs12Info</code> and <code>System.Security.Cryptography.Pkcs.Pkcs12Builder</code>, respectively.</p><h2><a id="user-content-more-bcl-improvements" href="#more-bcl-improvements"></a>More BCL Improvements</h2><p>We optimized <code>Span&lt;T&gt;</code>, <code>Memory&lt;T&gt;</code> and related types that were introduced in .NET Core 2.1. Common operations such as span construction, slicing, parsing, and formatting now perform better. Additionally, types like String have seen under-the-cover improvements to make them more efficient when used as keys with <code>Dictionary&lt;TKey, TValue&gt;</code> and other collections. No code changes are required to enjoy these improvements.</p><p>The following improvements are also new in .NET Core 3 Preview 1:</p><ul><li>Brotli support built-in to HttpClient</li><li>ThreadPool.UnsafeQueueWorkItem(IThreadPoolWorkItem)</li><li>Unsafe.Unbox</li><li>CancellationToken.Unregister</li><li>Complex arithmetic operators</li><li>Socket APIs for TCP keep alive</li><li>StringBuilder.GetChunks</li><li>IPEndPoint parsing</li><li>RandomNumberGenerator.GetInt32</li></ul><h2><a id="user-content-default-implementations-of-interface-members" href="#default-implementations-of-interface-members"></a>Default implementations of interface members</h2><p>Today, once you publish an interface it’s game over: you can’t add members to it without breaking all the existing implementers of it.</p><p>In <a href="https://blogs.msdn.microsoft.com/dotnet/2018/11/12/building-c-8-0/" rel="nofollow" target="_blank">C# 8.0</a> we let you provide a body for an interface member. Thus, if somebody doesn’t implement that member (perhaps because it wasn’t there yet when they wrote the code), they will just get the default implementation instead.</p><div id="gist93403350">
    <div>
      <div>
        <div>
  <div id="file-default-implementation-interfaces-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-default-implementation-interfaces-example-cs-L1" data-line-number="1"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC1"><span>interface</span> <span>ILogger</span></td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L2" data-line-number="2"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC2">{</td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L3" data-line-number="3"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC3">    <span>void</span> <span>Log</span>(<span>LogLevel</span> <span>level</span>, <span>string</span> <span>message</span>);</td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L4" data-line-number="4"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC4">    <span>void</span> <span>Log</span>(<span>Exception</span> <span>ex</span>) <span>=&gt;</span> <span>Log</span>(<span>LogLevel</span>.<span>Error</span>, <span>ex</span>.<span>ToString</span>()); <span><span>//</span> New overload</span></td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L5" data-line-number="5"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC5">}</td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L6" data-line-number="6"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC6"><span>class</span> <span>ConsoleLogger</span> : <span>ILogger</span></td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L7" data-line-number="7"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC7">{</td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L8" data-line-number="8"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC8">    <span>public</span> <span>void</span> <span>Log</span>(<span>LogLevel</span> <span>level</span>, <span>string</span> <span>message</span>) { ... }</td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L9" data-line-number="9"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC9">    <span><span>//</span> Log(Exception) gets default implementation</span></td>
      </tr>
      <tr>
        <td id="file-default-implementation-interfaces-example-cs-L10" data-line-number="10"></td>
        <td id="file-default-implementation-interfaces-example-cs-LC10">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>In this example. the <code>ConsoleLogger</code> class doesn’t have to implement the Log(Exception) overload of ILogger, because it is declared with a default implementation. Now you can add new members to existing public interfaces as long as you provide a default implementation for existing implementors to use.</p><h2><a id="user-content-tiered-compilation" href="#tiered-compilation"></a>Tiered Compilation</h2><p><a href="https://blogs.msdn.microsoft.com/dotnet/2018/08/02/tiered-compilation-preview-in-net-core-2-1/" rel="nofollow" target="_blank">Tiered compilation</a> is on by default with .NET Core 3.0. It’s a feature that enables the runtime to more adaptively use the Just-In-Time (JIT) compiler to get better performance, both at startup and to maximize throughput. It was added as an opt-in feature in <a href="https://blogs.msdn.microsoft.com/dotnet/2018/05/30/announcing-net-core-2-1/" rel="nofollow" target="_blank">.NET Core 2.1</a> and then was enabled by default in <a href="https://blogs.msdn.microsoft.com/dotnet/2018/09/12/announcing-net-core-2-2-preview-2/" rel="nofollow" target="_blank">.NET Core 2.2 Preview 2</a>. We decided that we were not quite ready to enable it by default in the final .NET Core 2.2 release, so switched it back to opt-in, just like .NET Core 2.1. It is enabled by default in .NET Core 3.0 and we expect it to stay in that configuration.</p><h2><a id="user-content-assembly-metadata-reading-with-metadataloadcontext" href="#assembly-metadata-reading-with-metadataloadcontext"></a>Assembly Metadata Reading with MetadataLoadContext</h2><p>We have added the new <a href="https://github.com/dotnet/corefx/blob/master/src/System.Reflection.MetadataLoadContext/src/System/Reflection/MetadataLoadContext.Apis.cs" target="_blank">MetadataLoadContext</a> type that enables reading assembly metadata without affecting the caller’s application domain. Assemblies are read as data, including assemblies built for different architectures and platforms than the current runtime environment. MetadataLoadContext overlaps with the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.reflection.assembly.reflectiononlyload?view=netframework-4.7.2#System_Reflection_Assembly_ReflectionOnlyLoad_System_String_" rel="nofollow" target="_blank">ReflectionOnlyLoad type</a>, which is only available in the .NET Framework.</p><p>MetdataLoadContext is available in the <a href="https://www.nuget.org/packages/System.Reflection.MetadataLoadContext" rel="nofollow" target="_blank">System.Reflection.MetadataLoadContext package</a>. It is a .NET Standard 2.0 package.</p><p>The MetadataLoadContext exposes APIs similar to the <a href="https://docs.microsoft.com/dotnet/api/system.runtime.loader.assemblyloadcontext" rel="nofollow" target="_blank">AssemblyLoadContext</a> type, but is not based on that type. Much like AssemblyLoadContext, the MetadataLoadContext enables loading assemblies within an isolated assembly loading universe. MetdataLoadContext APIs returns Assembly objects, enabling the use of familiar reflection APIs. Execution-oriented APIs, such as <a href="https://github.com/dotnet/corefx/blob/master/src/System.Reflection.MetadataLoadContext/src/System/Reflection/TypeLoading/Methods/RoMethod.cs#L127" target="_blank">MethodBase.Invoke</a>, are not allowed and will throw InvalidOperationException.</p><p>The following sample demonstrates how to find concrete types in an assembly that implements a given interface:</p><div id="gist93403367">
    <div>
      <div>
        <div>
  <div id="file-metdata-reading-example-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8">
      <tbody><tr>
        <td id="file-metdata-reading-example-cs-L1" data-line-number="1"></td>
        <td id="file-metdata-reading-example-cs-LC1"><span>var</span> <span>paths</span> <span>=</span> <span>new</span> <span>string</span>[] {<span><span>@"</span>C:\myapp\mscorlib.dll<span>"</span></span>, <span><span>@"</span>C:\myapp\myapp.dll<span>"</span></span>};</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L2" data-line-number="2"></td>
        <td id="file-metdata-reading-example-cs-LC2"><span>var</span> <span>resolver</span> <span>=</span> <span>new</span> <span>PathAssemblyResolver</span>(<span>paths</span>);</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L3" data-line-number="3"></td>
        <td id="file-metdata-reading-example-cs-LC3"><span>using</span> (<span>var</span> <span>lc</span> <span>=</span> <span>new</span> <span>MetadataLoadContext</span>(<span>resolver</span>))</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L4" data-line-number="4"></td>
        <td id="file-metdata-reading-example-cs-LC4">{</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L5" data-line-number="5"></td>
        <td id="file-metdata-reading-example-cs-LC5">    <span>Assembly</span> <span>a</span> <span>=</span> <span>lc</span>.<span>LoadFromAssemblyName</span>("<span>myapp</span>");</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L6" data-line-number="6"></td>
        <td id="file-metdata-reading-example-cs-LC6">    <span>Type</span> <span>myInterface</span> <span>=</span> <span>a</span>.<span>GetType</span>(<span><span>"</span>MyApp.IPluginInterface<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L7" data-line-number="7"></td>
        <td id="file-metdata-reading-example-cs-LC7">    <span>foreach</span> (<span>Type</span> <span>t</span> <span>in</span> <span>a</span>.<span>GetTypes</span>())</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L8" data-line-number="8"></td>
        <td id="file-metdata-reading-example-cs-LC8">    {</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L9" data-line-number="9"></td>
        <td id="file-metdata-reading-example-cs-LC9">        <span>if</span> (<span>t</span>.<span>IsClass</span> <span>&amp;&amp;</span> <span>myInterface</span>.<span>IsAssignableFrom</span>(<span>t</span>))</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L10" data-line-number="10"></td>
        <td id="file-metdata-reading-example-cs-LC10">            <span>Console</span>.<span>WriteLine</span>(<span><span>$"</span>Class {<span>t</span>.<span>FullName</span>} implements IPluginInterface<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L11" data-line-number="11"></td>
        <td id="file-metdata-reading-example-cs-LC11">    }</td>
      </tr>
      <tr>
        <td id="file-metdata-reading-example-cs-L12" data-line-number="12"></td>
        <td id="file-metdata-reading-example-cs-LC12">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>
<p>Scenarios for MetadataLoadContext include design-time features, build-time tooling, and runtime light-up features that need to inspect a set of assemblies as data and have all file locks and memory freed after inspection is performed.</p><p>The MetadataLoadContext has a resolver class passed to its constructor. The resolver’s job is to load an Assembly given its AssemblyName. The resolver class derives from the abstract MetadataAssemblyResolver class. An implementation of the resolver for path-based scenarios is provided with PathAssemblyResolver.</p><p>The <a href="https://github.com/dotnet/corefx/tree/master/src/System.Reflection.MetadataLoadContext/tests/src/Tests" target="_blank">MetadataLoadContext tests</a> demonstrate many use cases. The <a href="https://github.com/dotnet/corefx/blob/master/src/System.Reflection.MetadataLoadContext/tests/src/Tests/Assembly/AssemblyTests.cs" target="_blank">Assembly tests</a> are a good place to start.</p><p>Note: The following (now ancient) article about .NET assembly metadata would have benefited from this new API: <a href="https://msdn.microsoft.com/en-us/library/bb985748.aspx" rel="nofollow" target="_blank">Displaying Metadata in .NET EXEs with MetaViewer</a>.</p><h2><a id="user-content-arm64" href="#arm64"></a>ARM64</h2><p>We are adding support for ARM64 for Linux this release. For context, we added support for ARM32 for Linux with .NET Core 2.1 and Windows with .NET Core 2.2. The primary use case for ARM64 is currently with IoT scenarios. Some developers we are working with want to deploy on ARM32 environments and others on ARM64.</p><p>Alpine, Debian and Ubuntu <a href="https://hub.docker.com/r/microsoft/dotnet/" rel="nofollow" target="_blank">Docker images are available for .NET Core for ARM64</a>.</p><p>Please check <a href="https://github.com/dotnet/announcements/issues/82" target="_blank">.NET Core ARM64 Status</a> for more information.</p><h2><a id="user-content-platform-support" href="#platform-support"></a>Platform Support</h2><p>.NET Core 3 will be supported on the following operating systems:</p><ul><li>Windows Client: 7, 8.1, 10 (1607+)</li><li>Windows Server: 20012 R2 SP1+</li><li>macOS: 10.12+</li><li>RHEL: 6+</li><li>Fedora: 26+</li><li>Ubuntu: 16.04+</li><li>Debian: 9+</li><li>SLES: 12+</li><li>openSUSE: 42.3+</li><li>Alpine: 3.8+</li></ul><p>Chip support follows:</p><ul><li>x64 on Windows, macOS, and Linux</li><li>x86 on Windows</li><li>ARM32 on Windows (coming with preview 2) and Linux</li><li>ARM64 on Linux</li></ul><p>For Linux, ARM32 is supported on Debian 9+ and Ubuntu 16.04+. For ARM64, it is the same with the addition of Alpine 3.8. These are the same versions of those distros as is supported for X64. We made a conscious decision to make supported platforms as similar as possible between X64, ARM32 and ARM64.</p><p>Docker images for .NET Core 3.0 are available at <a href="https://hub.docker.com/r/microsoft/dotnet/" rel="nofollow" target="_blank">microsoft/dotnet on Docker Hub</a>, including for ARM64.</p><h2><a id="user-content-summary" href="#summary"></a>Summary</h2><p>We are excited to have the first preview of .NET Core 3 available today! .NET Core 3 Preview 1 also includes features in .NET Core 2.2, which you can read about in <a href="https://blogs.msdn.microsoft.com/dotnet/2018/12/04/announcing-net-core-2-2/" target="_blank">Announcing .NET Core 2.2</a>.</p><p>We’ll be releasing more detailed posts on .NET Core 3 in the coming weeks, which will also include an update on .NET Standard 2.1, which didn’t make it into Preview 1 yet.</p><p>Know that if you have existing .NET Framework apps that there is not pressure to port them to .NET Core. We will be adding features to .NET Framework 4.8 to support new desktop scenarios. While we do recommend that new desktop apps should consider targeting .NET Core, the .NET Framework will keep the high compatibility bar and will provide support for your apps for a very long time to come. And with .NET Core 3 we will provide a great experience for applications that want to take advantage of the latest features in .NET Core.</p></div></div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>