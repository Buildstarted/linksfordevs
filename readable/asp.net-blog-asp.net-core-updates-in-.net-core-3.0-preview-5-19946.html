<!DOCTYPE html>
<html lang="en">
<head>
    <title>
ASP.NET Blog | ASP.NET Core updates in .NET Core 3.0 Preview 5 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="ASP.NET Blog | ASP.NET Core updates in .NET Core 3.0 Preview 5 - linksfor.dev(s)"/>
    <meta property="article:author" content="Brady GasterSenior Program Manager,&#xA0;ASP.NET CoreFollow"/>
    <meta property="og:description" content="ASP.NET Core updates in .NET Core 3.0 Preview 5&#xA;.NET Core 3.0 Preview 5 is now available. This iteration was brief for the team and primarily includes bug fixes and improvements to the more significant updates in Preview 4. This post summarizes the important points in this release."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-0-preview-5/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - ASP.NET Blog | ASP.NET Core updates in .NET Core 3.0 Preview 5</title>
<div class="readable">
        <h1>ASP.NET Blog | ASP.NET Core updates in .NET Core 3.0 Preview 5</h1>
            <div>by Brady GasterSenior Program Manager,&#xA0;ASP.NET CoreFollow</div>
            <div>Reading time: 4-5 minutes</div>
        <div>Posted here: 06 May 2019</div>
        <p><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-0-preview-5/">https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-0-preview-5/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="featured">

	<div>
                
         <div><div><div><p><img src="https://secure.gravatar.com/avatar/e2ffd37e9b37271036f8f407c0592805?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar"></p></div></div></div>     
        <p>May 6th, 2019</p><!-- .entry-meta -->

		
<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-0-preview-5/">.NET Core 3.0 Preview 5 is now available</a>. This iteration was brief for the team and primarily includes bug fixes and improvements to the more significant updates in <a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-core-3-0-preview-4/">Preview 4</a>. This post summarizes the important points in this release.</p>
<p>Please see the <a href="http://aka.ms/netcore3releasenotes" target="_blank">release notes</a> for additional details and known issues.</p>
<h2>Get started</h2>
<p>To get started with ASP.NET Core in .NET Core 3.0 Preview 5 <a href="https://dot.net/get-core3" target="_blank">install the .NET Core 3.0 Preview 5 SDK</a>. If youâ€™re on Windows using Visual Studio, you also need to <a href="https://visualstudio.com/preview" target="_blank">install the latest preview of Visual Studio</a>.</p>
<h2>Upgrade an existing project</h2>
<p>To upgrade an existing an ASP.NET Core app (including Blazor apps) to .NET Core 3.0 Preview 5, follow the <a href="https://docs.microsoft.com/en-us/aspnet/core/migration/22-to-30" target="_blank">migrations steps in the ASP.NET Core docs</a>. Please also see the full list of <a href="https://github.com/aspnet/announcements/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+label%3A3.0.0+label%3A%22Breaking+change%22" target="_blank">breaking changes</a> in ASP.NET Core 3.0.</p>
<p>To upgrade an existing ASP.NET Core 3.0 Preview 4 project to Preview 5:</p>
<ul>
<li>Update Microsoft.AspNetCore.* package references to 3.0.0-preview5-19227-01</li>
<li>Update Microsoft.Extensions.* package references to 3.0.0-preview5.19227.01</li>
</ul>
<p>Thatâ€™s it! You should be good to go with this latest preview release.</p>
<h2>New JSON Serialization</h2>
<p>In 3.0-preview5, ASP.NET Core MVC adds supports for reading and writing JSON using System.Text.Json. The System.Text.Json serializer can read and write JSON asynchronously, and is optimized for UTF-8 text making it ideal for REST APIs and backend applications.</p>
<p>This is available for you to try out in Preview 5, but is not yet the default in the templates. You can use the new serializer by removing the call to add Newtonsoft.Json formatters:</p>
<pre><code><span>public</span><span> </span><span>void</span><span> </span><span>ConfigureServices</span><span>(</span><span>IServiceCollection</span><span> services</span><span>)</span><span>
</span><span>{</span><span>
    </span><span>...</span><span>
    services</span><span>.</span><span>AddControllers</span><span>()</span><span>
           </span><span>.</span><span>AddNewtonsoftJson</span><span>()</span><span>
    </span><span>...</span><span>
</span><span>}</span></code></pre>
<p>In the future this will be default for all new ASP.NET Core applications. We hope that you will try it in these earlier previews and log any issues you find <a href="https://github.com/aspnet/AspNetCore/issues/new/choose" target="_blank">here</a>.</p>
<p>We used this WeatherForecast model when we profiled JSON read/writer performance using Newtonsoft.Json, our previous serializer.</p>
<pre><code><span>public</span><span> </span><span>class</span><span> </span><span>WeatherForecast</span><span>
</span><span>{</span><span>
    </span><span>public</span><span> </span><span>DateTime</span><span> </span><span>Date</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>

    </span><span>public</span><span> </span><span>int</span><span> </span><span>TemperatureC</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>

    </span><span>public</span><span> </span><span>string</span><span> </span><span>Summary</span><span> </span><span>{</span><span> </span><span>get</span><span>;</span><span> </span><span>set</span><span>;</span><span> </span><span>}</span><span>
</span><span>}</span></code></pre>
<h3>JSON deserialization (input)</h3>
<table>
<thead>
<tr>
<th>Description</th>
<th>RPS</th>
<th>CPU (%)</th>
<th>Memory (MB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Newtonsoft.Json â€“ 500 bytes</td>
<td>136,435</td>
<td>95</td>
<td>172</td>
</tr>
<tr>
<td>System.Text.Json â€“ 500 bytes</td>
<td>167,861</td>
<td>94</td>
<td>169</td>
</tr>
<tr>
<td>Newtonsoft.Json â€“ 2.4 kbytes</td>
<td>97,137</td>
<td>97</td>
<td>174</td>
</tr>
<tr>
<td>System.Text.Json â€“ 2.4 kbytes</td>
<td>132,026</td>
<td>96</td>
<td>169</td>
</tr>
<tr>
<td>Newtonsoft.Json â€“ 40 kbytes</td>
<td>7,712</td>
<td>88</td>
<td>212</td>
</tr>
<tr>
<td>System.Text.Json â€“ 40 kbytes</td>
<td>16,625</td>
<td>96</td>
<td>193</td>
</tr>
</tbody>
</table>
<h3>JSON serialization (output)</h3>
<table>
<thead>
<tr>
<th>Description</th>
<th>RPS</th>
<th>CPU (%)</th>
<th>Memory (MB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Newtonsoft.Json â€“ 500 bytes</td>
<td>120,273</td>
<td>94</td>
<td>174</td>
</tr>
<tr>
<td>System.Text.Json â€“ 500 bytes</td>
<td>145,631</td>
<td>94</td>
<td>173</td>
</tr>
<tr>
<td>Newtonsoft.Json â€“ 8 Kbytes</td>
<td>35,408</td>
<td>98</td>
<td>187</td>
</tr>
<tr>
<td>System.Text.Json â€“ 8 Kbytes</td>
<td>56,424</td>
<td>97</td>
<td>184</td>
</tr>
<tr>
<td>Newtonsoft.Json â€“ 40 Kbytes</td>
<td>8,416</td>
<td>99</td>
<td>202</td>
</tr>
<tr>
<td>System.Text.Json â€“ 40 Kbytes</td>
<td>14,848</td>
<td>98</td>
<td>197</td>
</tr>
</tbody>
</table>
<p>For the most common payload sizes, System.Text.Json offers about 20% throughput increase during input and output formatting with a smaller memory footprint.</p>
<p>Options for the serializer can be configured using <code>MvcOptions</code>:</p>
<pre><code><span>services</span><span>.</span><span>AddControllers</span><span>(</span><span>options </span><span>=&gt;</span><span> options</span><span>.</span><span>SerializerOptions</span><span>.</span><span>WriteIndented</span><span> </span><span>=</span><span> </span><span>true</span><span>)</span><span> </span></code></pre>
<h3>Integration with SignalR</h3>
<p>System.Text.Json is now the default Hub Protocol used by SignalR clients and servers starting in ASP.NET Core 3.0-preview5. Please try it out and file issues if you find anything not working as expected.</p>
<h3>Switching back to Newtonsoft.Json</h3>
<p>If you would like to switch back to the previous default of using Newtonsoft.Json then you can do so on both the client and server.</p>
<ol>
<li>Install the <code>Microsoft.AspNetCore.SignalR.Protocols.NewtonsoftJson</code> NuGet package.</li>
<li>
<p>On the client add <code>.AddNewtonsoftJsonProtocol()</code> to the <code>HubConnectionBuilder</code>:</p>
<pre><code><span>new</span><span> </span><span>HubConnectionBuilder</span><span>()</span><span>
</span><span>.</span><span>WithUrl</span><span>(</span><span>"/chatHub"</span><span>)</span><span>
</span><span>.</span><span>AddNewtonsoftJsonProtocol</span><span>()</span><span>
</span><span>.</span><span>Build</span><span>();</span></code></pre>
</li>
<li>
<p>On the server add <code>.AddNewtonsoftJsonProtocol()</code> to the <code>AddSignalR()</code> call:</p>
<pre><code><span>services</span><span>.</span><span>AddSignalR</span><span>()</span><span>
</span><span>.</span><span>AddNewtonsoftJsonProtocol</span><span>();</span></code></pre>
</li>
</ol>
<h2>Give feedback</h2>
<p>We hope you enjoy the new features in this preview release of ASP.NET Core! Please let us know what you think by filing issues on <a href="https://github.com/aspnet/aspnetcore/issues" target="_blank">Github</a>.</p>
        
        
        
        

		        
        
        
	</div><!-- .entry-content -->
    
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>