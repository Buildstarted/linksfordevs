<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Add GCPhaseBegin/GCPhaseEnd ETW messages to measure duration of mark,&#x2026; &#xB7; criteo-forks/coreclr@9428b75 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Add GCPhaseBegin/GCPhaseEnd ETW messages to measure duration of mark,&#x2026; &#xB7; criteo-forks/coreclr@9428b75 - linksfor.dev(s)"/>
    <meta property="article:author" content="Christophe Nasarre"/>
    <meta property="og:description" content="&#x2026; plan, reloc, compact, sweep phases for each heap during a collection"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/criteo-forks/coreclr/commit/9428b7568da18e4a548099ac9c659e0ad87ce7e2"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Add GCPhaseBegin/GCPhaseEnd ETW messages to measure duration of mark,&#x2026; &#xB7; criteo-forks/coreclr@9428b75</title>
<div class="readable">
        <h1>Add GCPhaseBegin/GCPhaseEnd ETW messages to measure duration of mark,&#x2026; &#xB7; criteo-forks/coreclr@9428b75</h1>
            <div>by Christophe Nasarre</div>
            <div>Reading time: 8-10 minutes</div>
        <div>Posted here: 22 May 2019</div>
        <p><a href="https://github.com/criteo-forks/coreclr/commit/9428b7568da18e4a548099ac9c659e0ad87ce7e2">https://github.com/criteo-forks/coreclr/commit/9428b7568da18e4a548099ac9c659e0ad87ce7e2</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div data-hydro-view="{&quot;event_type&quot;:&quot;pull_request.select_diff_range&quot;,&quot;payload&quot;:{&quot;actor_id&quot;:null,&quot;pull_request_id&quot;:null,&quot;repository_id&quot;:null,&quot;diff_type&quot;:&quot;UNIFIED&quot;,&quot;whitespace_ignored&quot;:false,&quot;originating_url&quot;:&quot;https://github.com/criteo-forks/coreclr/commit/9428b7568da18e4a548099ac9c659e0ad87ce7e2&quot;,&quot;user_id&quot;:null}}" data-hydro-view-hmac="a9fe730827559b332cd26703f52a082228b2ccec4cc09130db4eb345f423b189">
        <div>
          <table data-tab-size="4" data-diff-anchor="diff-9b1cf8b32169db5abb15e28386d99a10">

                
      <tbody><tr data-position="0">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Up" aria-label="Expand Up" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=207&amp;left_hunk_size=6&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=207&amp;right_hunk_size=7" data-left-range="1-206" data-right-range="1-206">
            
          </a>
    </td>
    <td>@@ -207,6 +207,7 @@ size_t GetHighPrecisionTimeStamp()</td>
  </tr>

    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L207" data-line-number="207"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R207" data-line-number="207"></td>

  <td>
    <span data-code-marker=" ">}</span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L208" data-line-number="208"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R208" data-line-number="208"></td>

  <td>
    <span data-code-marker=" ">#<span>endif</span></span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L209" data-line-number="209"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R209" data-line-number="209"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R210" data-line-number="210"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L210" data-line-number="210"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R211" data-line-number="211"></td>

  <td>
    <span data-code-marker=" ">#<span>ifdef</span> GC_STATS</span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L211" data-line-number="211"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R212" data-line-number="212"></td>

  <td>
    <span data-code-marker=" "><span><span>//</span> There is a current and a prior copy of the statistics.  This allows us to display deltas per reporting</span></span></td>
</tr>



    <tr data-hunk="318ba0a9677283583584a1495835b0e1">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L212" data-line-number="212"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R213" data-line-number="213"></td>

  <td>
    <span data-code-marker=" "><span><span>//</span> interval, as well as running totals.  The 'min' and 'max' values require special treatment.  They are</span></span></td>
</tr>



      <tr data-position="8">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=212&amp;last_right=213&amp;left=1551&amp;left_hunk_size=6&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=1552&amp;right_hunk_size=15" data-left-range="213-880" data-right-range="214-881">
            
          </a>
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Up" aria-label="Expand Up" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=212&amp;last_right=213&amp;left=1551&amp;left_hunk_size=6&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=1552&amp;right_hunk_size=15" data-left-range="881-1550" data-right-range="882-1551">
            
          </a>
    </td>
    <td>@@ -1551,6 +1552,15 @@ __asm   pop     EDX</td>
  </tr>

    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1551" data-line-number="1551"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1552" data-line-number="1552"></td>

  <td>
    <span data-code-marker=" "><span>int</span> mark_time, plan_time, sweep_time, reloc_time, compact_time;</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1552" data-line-number="1552"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1553" data-line-number="1553"></td>

  <td>
    <span data-code-marker=" ">#<span>endif</span> <span><span>//</span>TIME_GC</span></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1553" data-line-number="1553"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1554" data-line-number="1554"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1555" data-line-number="1555"></td>

  <td>
    <span data-code-marker="+"><span>enum</span> gc_phase : <span>int</span></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1556" data-line-number="1556"></td>

  <td>
    <span data-code-marker="+">{   <span><span>//</span> can't use "mark" as symbol name because already use as type</span></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1557" data-line-number="1557"></td>

  <td>
    <span data-code-marker="+">    mark_phase = <span>0</span>,</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1558" data-line-number="1558"></td>

  <td>
    <span data-code-marker="+">    plan_phase = <span>1</span>,</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1559" data-line-number="1559"></td>

  <td>
    <span data-code-marker="+">    reloc_phase = <span>2</span>,</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1560" data-line-number="1560"></td>

  <td>
    <span data-code-marker="+">    compact_phase = <span>3</span>,</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1561" data-line-number="1561"></td>

  <td>
    <span data-code-marker="+">    sweep_phase = <span>4</span></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1562" data-line-number="1562"></td>

  <td>
    <span data-code-marker="+">};</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1563" data-line-number="1563"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1554" data-line-number="1554"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1564" data-line-number="1564"></td>

  <td>
    <span data-code-marker=" ">#<span>ifndef</span> MULTIPLE_HEAPS</span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1555" data-line-number="1555"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1565" data-line-number="1565"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="fe89208d2747a02a15f299b51268fe1b">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L1556" data-line-number="1556"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R1566" data-line-number="1566"></td>

  <td>
    <span data-code-marker=" ">#<span>endif</span> <span><span>//</span> MULTIPLE_HEAPS</span></span></td>
</tr>



      <tr data-position="24">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=1556&amp;last_right=1566&amp;left=19832&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=19842&amp;right_hunk_size=" data-left-range="1557-19831" data-right-range="1567-19841">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19832" data-line-number="19832"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19842" data-line-number="19842"></td>

  <td>
    <span data-code-marker=" ">    unsigned finish;</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19833" data-line-number="19833"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19843" data-line-number="19843"></td>

  <td>
    <span data-code-marker=" ">    start = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19834" data-line-number="19834"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19844" data-line-number="19844"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19845" data-line-number="19845"></td>

  <td>
    <span data-code-marker="+">    size_t startTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19846" data-line-number="19846"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseBegin, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::mark_phase);</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19835" data-line-number="19835"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19847" data-line-number="19847"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19836" data-line-number="19836"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19848" data-line-number="19848"></td>

  <td>
    <span data-code-marker=" ">    int gen_to_init = condemned_gen_number;</span></td>
</tr>



    <tr data-hunk="8151a81d80e20157d8236890515c0b43">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L19837" data-line-number="19837"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R19849" data-line-number="19849"></td>

  <td>
    <span data-code-marker=" ">    if (condemned_gen_number == max_generation)</span></td>
</tr>



      <tr data-position="33">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=19837&amp;last_right=19849&amp;left=20323&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=20335&amp;right_hunk_size=" data-left-range="19838-20322" data-right-range="19850-20334">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20323" data-line-number="20323"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20335" data-line-number="20335"></td>

  <td>
    <span data-code-marker=" ">        finish = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20324" data-line-number="20324"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20336" data-line-number="20336"></td>

  <td>
    <span data-code-marker=" ">        mark_time = finish - start;</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20325" data-line-number="20325"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20337" data-line-number="20337"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20338" data-line-number="20338"></td>

  <td>
    <span data-code-marker="+">    size_t endTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20339" data-line-number="20339"></td>

  <td>
    <span data-code-marker="+">    size_t elapsedTime = endTime - startTime;</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20340" data-line-number="20340"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseEnd, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::mark_phase, elapsedTime);</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20326" data-line-number="20326"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20341" data-line-number="20341"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20327" data-line-number="20327"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20342" data-line-number="20342"></td>

  <td>
    <span data-code-marker=" ">    dprintf(2,("---- End of mark phase ----"));</span></td>
</tr>



    <tr data-hunk="d3f2cee75eaffb871e431fce16558473">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L20328" data-line-number="20328"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R20343" data-line-number="20343"></td>

  <td>
    <span data-code-marker=" ">}</span></td>
</tr>



      <tr data-position="43">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=20328&amp;last_right=20343&amp;left=21786&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=21801&amp;right_hunk_size=" data-left-range="20329-21785" data-right-range="20344-21800">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21786" data-line-number="21786"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21801" data-line-number="21801"></td>

  <td>
    <span data-code-marker=" ">    unsigned finish;</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21787" data-line-number="21787"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21802" data-line-number="21802"></td>

  <td>
    <span data-code-marker=" ">    start = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21788" data-line-number="21788"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21803" data-line-number="21803"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21804" data-line-number="21804"></td>

  <td>
    <span data-code-marker="+">    size_t startTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21805" data-line-number="21805"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseBegin, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::plan_phase);</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21806" data-line-number="21806"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21789" data-line-number="21789"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21807" data-line-number="21807"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21790" data-line-number="21790"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21808" data-line-number="21808"></td>

  <td>
    <span data-code-marker=" ">    dprintf (2,("---- Plan Phase ---- Condemned generation %d, promotion: %d",</span></td>
</tr>



    <tr data-hunk="33485839a018f0d8c83828fadd2050e9">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L21791" data-line-number="21791"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R21809" data-line-number="21809"></td>

  <td>
    <span data-code-marker=" ">                condemned_gen_number, settings.promotion ? 1 : 0));</span></td>
</tr>



      <tr data-position="53">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=21791&amp;last_right=21809&amp;left=22744&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=22762&amp;right_hunk_size=" data-left-range="21792-22743" data-right-range="21810-22761">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22744" data-line-number="22744"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22762" data-line-number="22762"></td>

  <td>
    <span data-code-marker=" ">    finish = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22745" data-line-number="22745"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22763" data-line-number="22763"></td>

  <td>
    <span data-code-marker=" ">    plan_time = finish - start;</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22746" data-line-number="22746"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22764" data-line-number="22764"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22765" data-line-number="22765"></td>

  <td>
    <span data-code-marker="+">    size_t endTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22766" data-line-number="22766"></td>

  <td>
    <span data-code-marker="+">    size_t elapsedTime = endTime - startTime;</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22767" data-line-number="22767"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseEnd, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::plan_phase, elapsedTime);</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22747" data-line-number="22747"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22768" data-line-number="22768"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22748" data-line-number="22748"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22769" data-line-number="22769"></td>

  <td>
    <span data-code-marker=" ">    // We may update write barrier code.  We assume here EE has been suspended if we are on a GC thread.</span></td>
</tr>



    <tr data-hunk="f3a117531a020078507cbb2567ef39e4">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L22749" data-line-number="22749"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R22770" data-line-number="22770"></td>

  <td>
    <span data-code-marker=" ">    assert(IsGCInProgress());</span></td>
</tr>



      <tr data-position="63">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=22749&amp;last_right=22770&amp;left=23457&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=23478&amp;right_hunk_size=" data-left-range="22750-23456" data-right-range="22771-23477">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23457" data-line-number="23457"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23478" data-line-number="23478"></td>

  <td>
    <span data-code-marker=" ">    unsigned finish;</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23458" data-line-number="23458"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23479" data-line-number="23479"></td>

  <td>
    <span data-code-marker=" ">    start = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23459" data-line-number="23459"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23480" data-line-number="23480"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23481" data-line-number="23481"></td>

  <td>
    <span data-code-marker="+">    size_t startTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23482" data-line-number="23482"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseBegin, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::sweep_phase);</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23460" data-line-number="23460"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23483" data-line-number="23483"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23461" data-line-number="23461"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23484" data-line-number="23484"></td>

  <td>
    <span data-code-marker=" ">    //Promotion has to happen in sweep case.</span></td>
</tr>



    <tr data-hunk="6d65f700cde0b24774ff6da9c4fcad2d">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23462" data-line-number="23462"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23485" data-line-number="23485"></td>

  <td>
    <span data-code-marker=" ">    assert (settings.promotion);</span></td>
</tr>



      <tr data-position="72">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=23462&amp;last_right=23485&amp;left=23577&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=23600&amp;right_hunk_size=" data-left-range="23463-23576" data-right-range="23486-23599">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23577" data-line-number="23577"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23600" data-line-number="23600"></td>

  <td>
    <span data-code-marker=" ">    finish = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23578" data-line-number="23578"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23601" data-line-number="23601"></td>

  <td>
    <span data-code-marker=" ">    sweep_time = finish - start;</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23579" data-line-number="23579"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23602" data-line-number="23602"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23603" data-line-number="23603"></td>

  <td>
    <span data-code-marker="+">    size_t endTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23604" data-line-number="23604"></td>

  <td>
    <span data-code-marker="+">    size_t elapsedTime = endTime - startTime;</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23605" data-line-number="23605"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseEnd, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::sweep_phase, elapsedTime);</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23580" data-line-number="23580"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23606" data-line-number="23606"></td>

  <td>
    <span data-code-marker=" ">}</span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23581" data-line-number="23581"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23607" data-line-number="23607"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="459930b8655e4f177c2a78c7e02afa48">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L23582" data-line-number="23582"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R23608" data-line-number="23608"></td>

  <td>
    <span data-code-marker=" ">void gc_heap::make_free_list_in_brick (uint8_t* tree, make_free_args* args)</span></td>
</tr>



      <tr data-position="82">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=23582&amp;last_right=23608&amp;left=24731&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=24757&amp;right_hunk_size=" data-left-range="23583-24730" data-right-range="23609-24756">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24731" data-line-number="24731"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24757" data-line-number="24757"></td>

  <td>
    <span data-code-marker=" ">        unsigned finish;</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24732" data-line-number="24732"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24758" data-line-number="24758"></td>

  <td>
    <span data-code-marker=" ">        start = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24733" data-line-number="24733"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24759" data-line-number="24759"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24760" data-line-number="24760"></td>

  <td>
    <span data-code-marker="+">    size_t startTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24761" data-line-number="24761"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseBegin, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::reloc_phase);</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24734" data-line-number="24734"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24762" data-line-number="24762"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24735" data-line-number="24735"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24763" data-line-number="24763"></td>

  <td>
    <span data-code-marker=" ">//  %type%  category = quote (relocate);</span></td>
</tr>



    <tr data-hunk="52982f760a4169dde66312ffeda43552">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24736" data-line-number="24736"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24764" data-line-number="24764"></td>

  <td>
    <span data-code-marker=" ">    dprintf (2,("---- Relocate phase -----"));</span></td>
</tr>



      <tr data-position="91">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=24736&amp;last_right=24764&amp;left=24820&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=24848&amp;right_hunk_size=" data-left-range="24737-24819" data-right-range="24765-24847">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24820" data-line-number="24820"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24848" data-line-number="24848"></td>

  <td>
    <span data-code-marker=" ">        finish = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24821" data-line-number="24821"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24849" data-line-number="24849"></td>

  <td>
    <span data-code-marker=" ">        reloc_time = finish - start;</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24822" data-line-number="24822"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24850" data-line-number="24850"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24851" data-line-number="24851"></td>

  <td>
    <span data-code-marker="+">    size_t endTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24852" data-line-number="24852"></td>

  <td>
    <span data-code-marker="+">    size_t elapsedTime = endTime - startTime;</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24853" data-line-number="24853"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseEnd, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::reloc_phase, elapsedTime);</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24823" data-line-number="24823"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24854" data-line-number="24854"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24824" data-line-number="24824"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24855" data-line-number="24855"></td>

  <td>
    <span data-code-marker=" ">    dprintf(2,( "---- End of Relocate phase ----"));</span></td>
</tr>



    <tr data-hunk="bacac0e8a8968294ae24da2aff79cf6e">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L24825" data-line-number="24825"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R24856" data-line-number="24856"></td>

  <td>
    <span data-code-marker=" ">}</span></td>
</tr>



      <tr data-position="101">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=24825&amp;last_right=24856&amp;left=25182&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=25213&amp;right_hunk_size=" data-left-range="24826-25181" data-right-range="24857-25212">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25182" data-line-number="25182"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25213" data-line-number="25213"></td>

  <td>
    <span data-code-marker=" ">        unsigned finish;</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25183" data-line-number="25183"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25214" data-line-number="25214"></td>

  <td>
    <span data-code-marker=" ">        start = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25184" data-line-number="25184"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25215" data-line-number="25215"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25216" data-line-number="25216"></td>

  <td>
    <span data-code-marker="+">    size_t startTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25217" data-line-number="25217"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseBegin, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::compact_phase);</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25218" data-line-number="25218"></td>

  <td>
    <span data-code-marker="+"><br></span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25185" data-line-number="25185"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25219" data-line-number="25219"></td>

  <td>
    <span data-code-marker=" ">    generation*   condemned_gen = generation_of (condemned_gen_number);</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25186" data-line-number="25186"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25220" data-line-number="25220"></td>

  <td>
    <span data-code-marker=" ">    uint8_t*  start_address = first_condemned_address;</span></td>
</tr>



    <tr data-hunk="2b6d60917795de6cd2cb1de4d6686e24">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25187" data-line-number="25187"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25221" data-line-number="25221"></td>

  <td>
    <span data-code-marker=" ">    size_t   current_brick = brick_of (start_address);</span></td>
</tr>



      <tr data-position="111">
    <td colspan="2">
          <a href="#diff-9b1cf8b32169db5abb15e28386d99a10" title="Expand Down" aria-label="Expand Down" data-url="/criteo-forks/coreclr/blob_excerpt/22b19c49e66420076ec3a735392f686a30b961d5?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=25187&amp;last_right=25221&amp;left=25304&amp;left_hunk_size=&amp;mode=100644&amp;path=src%2Fgc%2Fgc.cpp&amp;right=25338&amp;right_hunk_size=" data-left-range="25188-25303" data-right-range="25222-25337">
            
          </a>
    </td>
    <td></td>
  </tr>

    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25304" data-line-number="25304"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25338" data-line-number="25338"></td>

  <td>
    <span data-code-marker=" ">    finish = GetCycleCount32();</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25305" data-line-number="25305"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25339" data-line-number="25339"></td>

  <td>
    <span data-code-marker=" ">    compact_time = finish - start;</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25306" data-line-number="25306"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25340" data-line-number="25340"></td>

  <td>
    <span data-code-marker=" ">#endif //TIME_GC</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25341" data-line-number="25341"></td>

  <td>
    <span data-code-marker="+">    size_t endTime = GetHighPrecisionTimeStamp();</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25342" data-line-number="25342"></td>

  <td>
    <span data-code-marker="+">    size_t elapsedTime = endTime - startTime;</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25343" data-line-number="25343"></td>

  <td>
    <span data-code-marker="+">    FIRE_EVENT(GCPhaseEnd, (uint32_t)gc_heap::settings.gc_index, (uint32_t)heap_number, gc_phase::compact_phase, elapsedTime);</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25307" data-line-number="25307"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25344" data-line-number="25344"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25308" data-line-number="25308"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25345" data-line-number="25345"></td>

  <td>
    <span data-code-marker=" ">    concurrent_print_time_delta ("compact end");</span></td>
</tr>



    <tr data-hunk="4356e608d70074115adc43e64d68f16a">
    <td id="diff-9b1cf8b32169db5abb15e28386d99a10L25309" data-line-number="25309"></td>

    <td id="diff-9b1cf8b32169db5abb15e28386d99a10R25346" data-line-number="25346"></td>

  <td>
    <span data-code-marker=" "><br></span></td>
</tr>





          </tbody></table>
        </div>

  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>