<!DOCTYPE html>
<html lang="en">
<head>
    <title>
SignalR core python client (III): Streamming -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>SignalR core python client (III): Streamming</h1><div><div class="body" data-article-id="88006" id="article-body" itemprop="articleBody"><p>Sunday's hangover,  so I added a new functionality  to my singalrcore library, as usual it works with the <a href="https://docs.microsoft.com/es-es/aspnet/core/signalr/streaming?view=aspnetcore-2.2">microsoft example</a> and i'll try making the syntax closest thing to javascript as possible.</p><h2><a name="setup" href="#setup" class="anchor"></a>
  Setup
</h2><p>On <a href="https://github.com/aspnet/Docs/blob/master/aspnetcore/signalr/streaming/sample/Hubs/StreamHub.cs">Microsoft's example</a> there is a cancellation token on stream function on the server, this example was done without this parameter on the function, so if you want work with the code below just delete this params on the counter function.<br><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--s179eBTj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/4end45w6p5ichps4hqhi.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--s179eBTj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/4end45w6p5ichps4hqhi.png" alt="Code function" loading="lazy"></a></p><h2><a name="tiny-example" href="#tiny-example" class="anchor"></a>
  Tiny example
</h2><h3><a name="start-and-open-connection" href="#start-and-open-connection" class="anchor"></a>
  Start and open connection
</h3><div class="highlight"><pre class="highlight python"><code><span class="n">hub_connection</span><span class="o">=</span><span class="n">HubConnection</span><span class="p">(</span><span class="n">server_url</span><span class="p">)</span><span class="n">hub_connection</span><span class="o">.</span><span class="n">build</span><span class="p">()</span><span class="n">hub_connection</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></code></pre></div><h3><a name="open-stream" href="#open-stream" class="anchor"></a>
  Open stream
</h3><div class="highlight"><pre class="highlight python"><code><span class="n">hub_connection</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="s">"Counter"</span><span class="p">,</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">500</span><span class="p">],</span><span class="k">lambda</span><span class="n">x</span><span class="p">:</span><span class="k">print</span><span class="p">(</span><span class="s">"next callback: "</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="k">lambda</span><span class="n">x</span><span class="p">:</span><span class="k">print</span><span class="p">(</span><span class="s">"complete  callback"</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="k">lambda</span><span class="n">x</span><span class="p">:</span><span class="k">print</span><span class="p">(</span><span class="s">"error  callback"</span><span class="p">,</span><span class="n">x</span><span class="p">))</span></code></pre></div><p>Stream function has five parameters, last three are callback function matching with <a href="https://github.com/aspnet/Docs/blob/master/aspnetcore/signalr/streaming/sample/wwwroot/ts/stream.ts">javascripts suscribe object</a><br><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ZFGe86tX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2vdrjcuozfuehsjbzhvs.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ZFGe86tX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2vdrjcuozfuehsjbzhvs.png" alt="Javascript example stream" loading="lazy"></a></p><p><a href="https://github.com/mandrewcito/signalrcore/blob/master/test/stream.py">Fully example</a></p><h2><a name="todo" href="#todo" class="anchor"></a>
  ToDo
</h2><ul><li>message pack</li><li>Auth (now only working by querystring negotiate)</li></ul><h2><a name="links" href="#links" class="anchor"></a>
  Links
</h2><p><a href="https://github.com/mandrewcito/signalrcore">Github</a><br><a href="https://pypi.org/project/signalrcore/">Pypi</a></p><p>I'm trying to build this library with simplest way possible, so if you think that there is a better way to do it, leave a comment. Asap i'll edit github library contribute section, so any contribution is welcommed.</p><p>Thank you for reading, and write any thought below :D </p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>