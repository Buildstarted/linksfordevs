<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Super Simple Named Boolean Parameters -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Super Simple Named Boolean Parameters</h1><div><div id="" class=""><p>Quite often we come across interfaces with multiple boolean parameters, like this:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cake</span><span class="n">make_cake</span><span class="p">(</span><span class="kt">bool</span><span class="n">with_dairy</span><span class="p">,</span><span class="kt">bool</span><span class="n">chocolate_sauce</span><span class="p">,</span><span class="kt">bool</span><span class="n">poison</span><span class="p">);</span></code></pre></div></div><p>A call to this function might look like:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span><span class="n">c</span><span class="o">=</span><span class="n">make_cake</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="nb">true</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span></code></pre></div></div><p>Unfortunately, this is not very descriptive. We need to look at the declaration of the function to know what each of those <code class="highlighter-rouge">bool</code>s mean, and it would be <em>way</em> too easy to accidentally flip the wrong argument during maintainance and end up poisoning ourselves rather than having a chocolatey treat.</p><p>There are many solutions which people use, from just adding comments to each argument, to creating tagged types. I recently came across a very simple trick which I had not seen before:</p><p>Yep, it’s a macro which takes an argument and gets replaced by <code class="highlighter-rouge">true</code>. This may look strange, but it enables us to write this:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span><span class="n">c</span><span class="o">=</span><span class="n">make_cake</span><span class="p">(</span><span class="n">K</span><span class="p">(</span><span class="n">with_dairy</span><span class="p">),</span><span class="o">!</span><span class="n">K</span><span class="p">(</span><span class="n">chocolate_sauce</span><span class="p">),</span><span class="o">!</span><span class="n">K</span><span class="p">(</span><span class="n">poison</span><span class="p">));</span><span class="c1">// or using `not` if you prefer
</span><span class="k">auto</span><span class="n">c</span><span class="o">=</span><span class="n">make_cake</span><span class="p">(</span><span class="n">K</span><span class="p">(</span><span class="n">with_dairy</span><span class="p">),</span><span class="n">not</span><span class="n">K</span><span class="p">(</span><span class="n">chocolate_sauce</span><span class="p">),</span><span class="n">not</span><span class="n">K</span><span class="p">(</span><span class="n">poison</span><span class="p">));</span></code></pre></div></div><p>Of course, it’s up to you whether you think using a macro for this kind of thing is worth it, or if you think that macro should have a name which is less likely to collide. There’s also the issue that this <em>looks</em> a bit like Python named parameters, where you can pass them in any order, but the order matters here. There are much better solutions when you own the interface, but for the times when you don’t, I think this is a neat trick to solve the issue in a low-overhead manner.</p><p>A guess I need to come up with a marketing name for this. Since we already have <a href="https://en.wikipedia.org/wiki/X_Macro">X Macros</a>, I hereby dub this trick “K Macros”.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>