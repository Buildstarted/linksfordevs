<!DOCTYPE html>
<html lang="en">
<head>
    <title>
How to create a gRPC service ? &#x2013; Anthony Giretti&#x27;s .NET blog - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="How to create a gRPC service ? &#x2013; Anthony Giretti&#x27;s .NET blog - linksfor.dev(s)"/>
    <meta property="og:description" content="You&#x2019;ll need to open Visual Studio 2019 and select &#x201C;gRPC service&#x201D; in &#x201C;Create a new project&#x201D; screen:"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://anthonygiretti.com/2020/03/25/grpc-asp-net-core-3-1-how-to-create-a-grpc-service/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - How to create a gRPC service ? &#x2013; Anthony Giretti&#x27;s .NET blog</title>
<div class="readable">
        <h1>How to create a gRPC service ? &#x2013; Anthony Giretti&#x27;s .NET blog</h1>
            <div>Reading time: 17-22 minutes</div>
        <div>Posted here: 26 Mar 2020</div>
        <p><a href="https://anthonygiretti.com/2020/03/25/grpc-asp-net-core-3-1-how-to-create-a-grpc-service/">https://anthonygiretti.com/2020/03/25/grpc-asp-net-core-3-1-how-to-create-a-grpc-service/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
    
<ul><li><a href="http://anthonygiretti.com/2020/03/23/grpc-asp-net-core-3-1-whats-grpc-introduction/">gRPC &amp; ASP.NET Core 3.1: What’s gRPC ? (introduction)</a></li><li><a href="http://anthonygiretti.com/2020/03/25/grpc-asp-net-core-3-1-how-to-create-a-grpc-service/">gRPC &amp; ASP.NET Core 3.1: How to create a gRPC service ?</a></li><li>gRPC &amp; ASP.NET Core 3.1: What’s gRPC-web &amp; how to create a gRPC-web service in ASP.NET Core 3.1 &amp; Angular 8</li><li>gRPC &amp; ASP.NET Core 3.1: Global error Handling in gRPC &amp; gRPC status codes</li><li>gRPC &amp; ASP.NET Core 3.1: Resiliency with Polly</li><li>gRPC &amp; ASP.NET Core 3.1: Audit &amp; logging with Interceptors</li><li>gRPC &amp; ASP.NET Core 3.1: Application Insights</li><li>gRPC &amp; ASP.NET Core 3.1: Manage Authentication and Authorization</li><li>gRPC &amp; ASP.NET Core 3.1: Inputs validation</li><li>gRPC &amp; ASP.NET Core 3.1: CRUD operations with Entity framework</li><li>gRPC &amp; ASP.NET Core 3.1: Healthchecks</li><li>gRPC &amp; ASP.NET Core 3.1: Unit testing</li><li>gRPC &amp; ASP.NET Core 3.1: Integration testing</li><li>gRPC &amp; ASP.NET Core 3.1: Upload / download files</li><li>gRPC &amp; ASP.NET Core 3.1: Caching</li><li>gRPC &amp; ASP.NET Core 3.1: More examples, build streaming services</li></ul>



<h2><strong>Creating a gRPC service</strong></h2>



<p>You’ll need to open <a href="https://visualstudio.microsoft.com/en/downloads/">Visual Studio 2019</a> and select <em>“gRPC service”</em> in <em>“Create a new project”</em> screen:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-1024x708.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-1024x708.png 1024w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-300x208.png 300w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-768x531.png 768w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-580x400.png 580w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service.png 1025w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>And then name your project:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-2-1024x709.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-2.png 1024w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-2-300x208.png 300w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-2-768x532.png 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<h2><strong>Anatomy of a gRPC service</strong></h2>



<p>We find the usual components of an ASP.NET Core project like:</p>



<ul><li>The launchSettings</li><li>The appsettings.json files</li><li>The Program.cs</li><li>The Startup.cs</li></ul>



<p>In a <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC service</a> project we discover:</p>



<ul><li>A <em>Services </em>directory with a <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC service</a>,that contains a sample named <strong>GreeterService </strong>inheriting from a self-generated class named <strong>Greeter.GreeterBase</strong>, with its constructor and its method (s). Note that the built-in dependency injection of ASP.NET Core is available with a <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC service</a>.</li><li>A <em>Protos </em>directory containing the <a href="https://developers.google.com/protocol-buffers/docs/proto3">Protocol Buffers</a>, in other words the service contract.</li></ul>



<div><figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-3.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-3.png 353w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-grpc-service-3-225x300.png 225w" sizes="(max-width: 353px) 100vw, 353px"></figure></div>



<p>The startup.cs looks like this by default:</p>



<div id="gist101981613">
    <div>
      <div>
        <div>
  <div id="file-startup-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-startup-cs-L1" data-line-number="1"></td>
        <td id="file-startup-cs-LC1"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L2" data-line-number="2"></td>
        <td id="file-startup-cs-LC2"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Hosting</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L3" data-line-number="3"></td>
        <td id="file-startup-cs-LC3"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Http</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L4" data-line-number="4"></td>
        <td id="file-startup-cs-LC4"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Configuration</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L5" data-line-number="5"></td>
        <td id="file-startup-cs-LC5"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>DependencyInjection</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L6" data-line-number="6"></td>
        <td id="file-startup-cs-LC6"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Hosting</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L7" data-line-number="7"></td>
        <td id="file-startup-cs-LC7"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L8" data-line-number="8"></td>
        <td id="file-startup-cs-LC8">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L9" data-line-number="9"></td>
        <td id="file-startup-cs-LC9"><span>namespace</span> <span>DemoAspNetCore3</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L10" data-line-number="10"></td>
        <td id="file-startup-cs-LC10">{</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L11" data-line-number="11"></td>
        <td id="file-startup-cs-LC11">    <span>public</span> <span>class</span> <span>Startup</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L12" data-line-number="12"></td>
        <td id="file-startup-cs-LC12">    {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L13" data-line-number="13"></td>
        <td id="file-startup-cs-LC13">        <span>public</span> <span>Startup</span>(<span>IConfiguration</span> <span>configuration</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L14" data-line-number="14"></td>
        <td id="file-startup-cs-LC14">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L15" data-line-number="15"></td>
        <td id="file-startup-cs-LC15">            <span>Configuration</span> <span>=</span> <span>configuration</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L16" data-line-number="16"></td>
        <td id="file-startup-cs-LC16">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L17" data-line-number="17"></td>
        <td id="file-startup-cs-LC17">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L18" data-line-number="18"></td>
        <td id="file-startup-cs-LC18">        <span>public</span> <span>IConfiguration</span> <span>Configuration</span> { <span>get</span>; }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L19" data-line-number="19"></td>
        <td id="file-startup-cs-LC19">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L20" data-line-number="20"></td>
        <td id="file-startup-cs-LC20">        <span>public</span> <span>void</span> <span>ConfigureServices</span>(<span>IServiceCollection</span> <span>services</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L21" data-line-number="21"></td>
        <td id="file-startup-cs-LC21">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L22" data-line-number="22"></td>
        <td id="file-startup-cs-LC22">            <span>services</span>.<span>AddGrpc</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L23" data-line-number="23"></td>
        <td id="file-startup-cs-LC23">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L24" data-line-number="24"></td>
        <td id="file-startup-cs-LC24">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L25" data-line-number="25"></td>
        <td id="file-startup-cs-LC25">        <span><span>//</span> This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L26" data-line-number="26"></td>
        <td id="file-startup-cs-LC26">        <span>public</span> <span>void</span> <span>Configure</span>(<span>IApplicationBuilder</span> <span>app</span>, <span>IWebHostEnvironment</span> <span>env</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L27" data-line-number="27"></td>
        <td id="file-startup-cs-LC27">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L28" data-line-number="28"></td>
        <td id="file-startup-cs-LC28">            <span>if</span> (<span>env</span>.<span>IsDevelopment</span>())</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L29" data-line-number="29"></td>
        <td id="file-startup-cs-LC29">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L30" data-line-number="30"></td>
        <td id="file-startup-cs-LC30">                <span>app</span>.<span>UseDeveloperExceptionPage</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L31" data-line-number="31"></td>
        <td id="file-startup-cs-LC31">            }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L32" data-line-number="32"></td>
        <td id="file-startup-cs-LC32">            <span>else</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L33" data-line-number="33"></td>
        <td id="file-startup-cs-LC33">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L34" data-line-number="34"></td>
        <td id="file-startup-cs-LC34">                <span>app</span>.<span>UseHsts</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L35" data-line-number="35"></td>
        <td id="file-startup-cs-LC35">            }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L36" data-line-number="36"></td>
        <td id="file-startup-cs-LC36">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L37" data-line-number="37"></td>
        <td id="file-startup-cs-LC37">            <span>app</span>.<span>UseHttpsRedirection</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L38" data-line-number="38"></td>
        <td id="file-startup-cs-LC38">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L39" data-line-number="39"></td>
        <td id="file-startup-cs-LC39">            <span>app</span>.<span>UseRouting</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L40" data-line-number="40"></td>
        <td id="file-startup-cs-LC40">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L41" data-line-number="41"></td>
        <td id="file-startup-cs-LC41">            <span>app</span>.<span>UseEndpoints</span>(<span>endpoints</span> <span>=&gt;</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L42" data-line-number="42"></td>
        <td id="file-startup-cs-LC42">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L43" data-line-number="43"></td>
        <td id="file-startup-cs-LC43">                <span>endpoints</span>.<span>MapGrpcService</span>&lt;<span>GreeterService</span>&gt;();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L44" data-line-number="44"></td>
        <td id="file-startup-cs-LC44">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L45" data-line-number="45"></td>
        <td id="file-startup-cs-LC45">                <span>endpoints</span>.<span>MapGet</span>(<span><span>"</span>/<span>"</span></span>, <span>async</span> <span>context</span> <span>=&gt;</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L46" data-line-number="46"></td>
        <td id="file-startup-cs-LC46">                {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L47" data-line-number="47"></td>
        <td id="file-startup-cs-LC47">                    <span>await</span> <span>context</span>.<span>Response</span>.<span>WriteAsync</span>(<span><span>"</span>Communication with gRPC endpoints must be made through a gRPC client. To learn how to create a client, visit: https://go.microsoft.com/fwlink/?linkid=2086909<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L48" data-line-number="48"></td>
        <td id="file-startup-cs-LC48">                });</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L49" data-line-number="49"></td>
        <td id="file-startup-cs-LC49">            });</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L50" data-line-number="50"></td>
        <td id="file-startup-cs-LC50">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L51" data-line-number="51"></td>
        <td id="file-startup-cs-LC51">    }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L52" data-line-number="52"></td>
        <td id="file-startup-cs-LC52">}</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L53" data-line-number="53"></td>
        <td id="file-startup-cs-LC53">
</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<h2><strong>How does a gRPC service look like?</strong></h2>



<p>As mentioned above, it is above all a C# file with its service class inheriting from a self-generated class, a constructor and its service methods. Each service method takes as parameter a message type input model as defined in the <strong>.proto</strong> file and a <strong>ServerCallContext </strong>type context.</p>



<p>Example of a unary service method:</p>



<div id="gist101981060">
    <div>
      <div>
        <div>
  <div id="file-greeterservice-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-greeterservice-cs-L1" data-line-number="1"></td>
        <td id="file-greeterservice-cs-LC1"><span>using</span> <span>Grpc</span>.<span>Core</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L2" data-line-number="2"></td>
        <td id="file-greeterservice-cs-LC2"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Logging</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L3" data-line-number="3"></td>
        <td id="file-greeterservice-cs-LC3"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L4" data-line-number="4"></td>
        <td id="file-greeterservice-cs-LC4"><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L5" data-line-number="5"></td>
        <td id="file-greeterservice-cs-LC5">
</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L6" data-line-number="6"></td>
        <td id="file-greeterservice-cs-LC6"><span>namespace</span> <span>DemoAspNetCore3</span>.<span>Services</span></td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L7" data-line-number="7"></td>
        <td id="file-greeterservice-cs-LC7">{</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L8" data-line-number="8"></td>
        <td id="file-greeterservice-cs-LC8">    <span>public</span> <span>class</span> <span>GreeterService</span> : <span>Greeter</span>.<span>GreeterBase</span></td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L9" data-line-number="9"></td>
        <td id="file-greeterservice-cs-LC9">    {</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L10" data-line-number="10"></td>
        <td id="file-greeterservice-cs-LC10">        <span>private</span> <span>readonly</span> <span>ILogger</span>&lt;<span>GreeterService</span>&gt; <span>_logger</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L11" data-line-number="11"></td>
        <td id="file-greeterservice-cs-LC11">        <span>public</span> <span>GreeterService</span>(<span>ILogger</span>&lt;<span>GreeterService</span>&gt; <span>logger</span>)</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L12" data-line-number="12"></td>
        <td id="file-greeterservice-cs-LC12">        {</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L13" data-line-number="13"></td>
        <td id="file-greeterservice-cs-LC13">            <span>_logger</span> <span>=</span> <span>logger</span>;</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L14" data-line-number="14"></td>
        <td id="file-greeterservice-cs-LC14">        }</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L15" data-line-number="15"></td>
        <td id="file-greeterservice-cs-LC15">
</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L16" data-line-number="16"></td>
        <td id="file-greeterservice-cs-LC16">        <span>public</span> <span>override</span> <span>Task</span>&lt;<span>HelloReply</span>&gt; <span>SayHello</span>(<span>HelloRequest</span> <span>request</span>, <span>ServerCallContext</span> <span>context</span>)</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L17" data-line-number="17"></td>
        <td id="file-greeterservice-cs-LC17">        {</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L18" data-line-number="18"></td>
        <td id="file-greeterservice-cs-LC18">            <span>return</span> <span>Task</span>.<span>FromResult</span>(<span>new</span> <span>HelloReply</span></td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L19" data-line-number="19"></td>
        <td id="file-greeterservice-cs-LC19">            {</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L20" data-line-number="20"></td>
        <td id="file-greeterservice-cs-LC20">                <span>Message</span> <span>=</span> <span><span>"</span>Hello <span>"</span></span> <span>+</span> <span>request</span>.<span>Name</span></td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L21" data-line-number="21"></td>
        <td id="file-greeterservice-cs-LC21">            });</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L22" data-line-number="22"></td>
        <td id="file-greeterservice-cs-LC22">        }</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L23" data-line-number="23"></td>
        <td id="file-greeterservice-cs-LC23">    }</td>
      </tr>
      <tr>
        <td id="file-greeterservice-cs-L24" data-line-number="24"></td>
        <td id="file-greeterservice-cs-LC24">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<p>The .csproj looks like:</p>



<div id="gist101981122">
    <div>
      <div>
        <div>
  <div id="file-demogrpc-web-csproj">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-demogrpc-web-csproj-L1" data-line-number="1"></td>
        <td id="file-demogrpc-web-csproj-LC1">&lt;<span>Project</span> <span>Sdk</span>=<span><span>"</span>Microsoft.NET.Sdk.Web<span>"</span></span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L2" data-line-number="2"></td>
        <td id="file-demogrpc-web-csproj-LC2">
</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L3" data-line-number="3"></td>
        <td id="file-demogrpc-web-csproj-LC3">  &lt;<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L4" data-line-number="4"></td>
        <td id="file-demogrpc-web-csproj-LC4">    &lt;<span>TargetFramework</span>&gt;netcoreapp3.1&lt;/<span>TargetFramework</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L5" data-line-number="5"></td>
        <td id="file-demogrpc-web-csproj-LC5">  &lt;/<span>PropertyGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L6" data-line-number="6"></td>
        <td id="file-demogrpc-web-csproj-LC6">
</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L7" data-line-number="7"></td>
        <td id="file-demogrpc-web-csproj-LC7">  &lt;<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L8" data-line-number="8"></td>
        <td id="file-demogrpc-web-csproj-LC8">    &lt;<span>Protobuf</span> <span>Include</span>=<span><span>"</span>Protos\greet.proto<span>"</span></span> <span>GrpcServices</span>=<span><span>"</span>Server<span>"</span></span> /&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L9" data-line-number="9"></td>
        <td id="file-demogrpc-web-csproj-LC9">  &lt;/<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L10" data-line-number="10"></td>
        <td id="file-demogrpc-web-csproj-LC10">
</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L11" data-line-number="11"></td>
        <td id="file-demogrpc-web-csproj-LC11">  &lt;<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L12" data-line-number="12"></td>
        <td id="file-demogrpc-web-csproj-LC12">    &lt;<span>PackageReference</span> <span>Include</span>=<span><span>"</span>Grpc.AspNetCore<span>"</span></span> <span>Version</span>=<span><span>"</span>2.27.0<span>"</span></span> /&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L13" data-line-number="13"></td>
        <td id="file-demogrpc-web-csproj-LC13">  &lt;/<span>ItemGroup</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L14" data-line-number="14"></td>
        <td id="file-demogrpc-web-csproj-LC14">
</td>
      </tr>
      <tr>
        <td id="file-demogrpc-web-csproj-L15" data-line-number="15"></td>
        <td id="file-demogrpc-web-csproj-LC15">&lt;/<span>Project</span>&gt;</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<h2><strong>How to create a new grpc service after creating the project?</strong></h2>



<p>First download the <strong>Grpc.Tools</strong> package:</p>



<pre> Install-Package Grpc.Tools -Version 2.27.0 </pre>



<p>This will allow you to generate the classes of your <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC service</a> defined in your <a href="https://developers.google.com/protocol-buffers/docs/proto3">Protocol Buffers</a> files that you will create manually. These classes will be autogenerated when you build your solution in <a href="https://visualstudio.microsoft.com/en/vs/">Visual Studio 2019.</a></p>



<p>Then create a new <strong>.proto</strong> file:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-create-proto-file.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-proto-file.png 944w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-proto-file-300x207.png 300w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-proto-file-768x529.png 768w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-create-proto-file-580x400.png 580w" sizes="(max-width: 944px) 100vw, 944px"></figure>



<p>You can now create your operations and contracts (message):</p>



<div id="gist101939320">
    <div>
      <div>
        <div>
  <div id="file-example-proto">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-example-proto-L1" data-line-number="1"></td>
        <td id="file-example-proto-LC1"><span>syntax</span> = <span>"proto3"</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L2" data-line-number="2"></td>
        <td id="file-example-proto-LC2">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L3" data-line-number="3"></td>
        <td id="file-example-proto-LC3"><span>option</span> <span>csharp_namespace</span> = <span>"DemoAspNetCore3"</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L4" data-line-number="4"></td>
        <td id="file-example-proto-LC4">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L5" data-line-number="5"></td>
        <td id="file-example-proto-LC5"><span>service</span> <span>MyOwnService</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L6" data-line-number="6"></td>
        <td id="file-example-proto-LC6">  rpc WhoIs(EmptyRequest) returns (WhoIsReply) {}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L7" data-line-number="7"></td>
        <td id="file-example-proto-LC7">  rpc IntroduceYourself (IntroduceYourselfRequest) returns (IntroduceYourselfReply) {}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L8" data-line-number="8"></td>
        <td id="file-example-proto-LC8">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L9" data-line-number="9"></td>
        <td id="file-example-proto-LC9">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L10" data-line-number="10"></td>
        <td id="file-example-proto-LC10"><span>message</span> <span>EmptyRequest</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L11" data-line-number="11"></td>
        <td id="file-example-proto-LC11">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L12" data-line-number="12"></td>
        <td id="file-example-proto-LC12">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L13" data-line-number="13"></td>
        <td id="file-example-proto-LC13"><span>message</span> <span>WhoIsReply</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L14" data-line-number="14"></td>
        <td id="file-example-proto-LC14">  <span>string</span> <span>message</span> = <span>1</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L15" data-line-number="15"></td>
        <td id="file-example-proto-LC15">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L16" data-line-number="16"></td>
        <td id="file-example-proto-LC16">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L17" data-line-number="17"></td>
        <td id="file-example-proto-LC17"><span>message</span> <span>IntroduceYourselfRequest</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L18" data-line-number="18"></td>
        <td id="file-example-proto-LC18">	<span>string</span> <span>name</span> = <span>1</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L19" data-line-number="19"></td>
        <td id="file-example-proto-LC19">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L20" data-line-number="20"></td>
        <td id="file-example-proto-LC20">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L21" data-line-number="21"></td>
        <td id="file-example-proto-LC21"><span>message</span> <span>IntroduceYourselfReply</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L22" data-line-number="22"></td>
        <td id="file-example-proto-LC22">	</td>
      </tr>
      <tr>
        <td id="file-example-proto-L23" data-line-number="23"></td>
        <td id="file-example-proto-LC23">	<span>string</span> <span>name</span> = <span>1</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L24" data-line-number="24"></td>
        <td id="file-example-proto-LC24">	<span>string</span> <span>job</span> = <span>2</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L25" data-line-number="25"></td>
        <td id="file-example-proto-LC25">	<span>string</span> <span>country</span> = <span>3</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L26" data-line-number="26"></td>
        <td id="file-example-proto-LC26">	<span>repeated</span> <span>string</span> <span>citizenship</span> = <span>4</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L27" data-line-number="27"></td>
        <td id="file-example-proto-LC27">	</td>
      </tr>
      <tr>
        <td id="file-example-proto-L28" data-line-number="28"></td>
        <td id="file-example-proto-LC28">	<span>repeated</span> <span>Skill</span> <span>skills</span> = <span>5</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L29" data-line-number="29"></td>
        <td id="file-example-proto-LC29">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L30" data-line-number="30"></td>
        <td id="file-example-proto-LC30">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L31" data-line-number="31"></td>
        <td id="file-example-proto-LC31"><span>message</span> <span>Skill</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L32" data-line-number="32"></td>
        <td id="file-example-proto-LC32">	<span>string</span> <span>skillName</span> = <span>1</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L33" data-line-number="33"></td>
        <td id="file-example-proto-LC33">	<span>SkillLevel</span> <span>skillLevel</span> = <span>2</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L34" data-line-number="34"></td>
        <td id="file-example-proto-LC34">}</td>
      </tr>
      <tr>
        <td id="file-example-proto-L35" data-line-number="35"></td>
        <td id="file-example-proto-LC35">
</td>
      </tr>
      <tr>
        <td id="file-example-proto-L36" data-line-number="36"></td>
        <td id="file-example-proto-LC36"><span>enum</span> <span>SkillLevel</span> {</td>
      </tr>
      <tr>
        <td id="file-example-proto-L37" data-line-number="37"></td>
        <td id="file-example-proto-LC37">	<span>GOOD</span> = <span>0</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L38" data-line-number="38"></td>
        <td id="file-example-proto-LC38">	<span>BAD</span> = <span>1</span>;</td>
      </tr>
      <tr>
        <td id="file-example-proto-L39" data-line-number="39"></td>
        <td id="file-example-proto-LC39">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<p>Once done, you need to compile your app, autogenerated classes will be available and you will be able to write your service. Behind the scene, the <a href="https://github.com/protocolbuffers/protobuf/releases">Protocol buffer compiler (protoc)</a> will generate C# classes.</p>



<p><a href="http://protocol%20buffer%20compiler%20%28protoc%29/">protoc</a> is a compiler for protocol buffers definitions files. It can generate C++, Java, Python and many other sources code for the classes defined in&nbsp;<em>a proto file</em>. </p>



<p>If all goes well classes will be generated in this directory: ..\obj\Debug\netcoreapp3.1:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-compile-proto-file2.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-compile-proto-file2.png 725w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-compile-proto-file2-300x192.png 300w" sizes="(max-width: 725px) 100vw, 725px"></figure>



<p>Now you are able to write your services methods:</p>



<div id="gist101981667">
    <div>
      <div>
        <div>
  <div id="file-myownservice-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-myownservice-cs-L1" data-line-number="1"></td>
        <td id="file-myownservice-cs-LC1"><span>using</span> <span>Grpc</span>.<span>Core</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L2" data-line-number="2"></td>
        <td id="file-myownservice-cs-LC2"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Logging</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L3" data-line-number="3"></td>
        <td id="file-myownservice-cs-LC3"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L4" data-line-number="4"></td>
        <td id="file-myownservice-cs-LC4"><span>using</span> <span>System</span>.<span>Threading</span>.<span>Tasks</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L5" data-line-number="5"></td>
        <td id="file-myownservice-cs-LC5">
</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L6" data-line-number="6"></td>
        <td id="file-myownservice-cs-LC6"><span>namespace</span> <span>DemoAspNetCore3</span>.<span>Services</span></td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L7" data-line-number="7"></td>
        <td id="file-myownservice-cs-LC7">{</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L8" data-line-number="8"></td>
        <td id="file-myownservice-cs-LC8">    <span>public</span> <span>class</span> <span>MyOwnGRpcService</span> : <span>MyOwnService</span>.<span>MyOwnServiceBase</span></td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L9" data-line-number="9"></td>
        <td id="file-myownservice-cs-LC9">    {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L10" data-line-number="10"></td>
        <td id="file-myownservice-cs-LC10">        <span>private</span> <span>readonly</span> <span>ILogger</span>&lt;<span>MyOwnGRpcService</span>&gt; <span>_logger</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L11" data-line-number="11"></td>
        <td id="file-myownservice-cs-LC11">        <span>public</span> <span>MyOwnGRpcService</span>(<span>ILogger</span>&lt;<span>MyOwnGRpcService</span>&gt; <span>logger</span>)</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L12" data-line-number="12"></td>
        <td id="file-myownservice-cs-LC12">        {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L13" data-line-number="13"></td>
        <td id="file-myownservice-cs-LC13">            <span>_logger</span> <span>=</span> <span>logger</span>;</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L14" data-line-number="14"></td>
        <td id="file-myownservice-cs-LC14">        }</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L15" data-line-number="15"></td>
        <td id="file-myownservice-cs-LC15">
</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L16" data-line-number="16"></td>
        <td id="file-myownservice-cs-LC16">        <span>public</span> <span>override</span> <span>async</span> <span>Task</span>&lt;<span>WhoIsReply</span>&gt; <span>WhoIs</span>(<span>EmptyRequest</span> <span>request</span>, <span>ServerCallContext</span> <span>context</span>)</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L17" data-line-number="17"></td>
        <td id="file-myownservice-cs-LC17">        {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L18" data-line-number="18"></td>
        <td id="file-myownservice-cs-LC18">            <span>return</span> <span>await</span> <span>Task</span>.<span>FromResult</span>(<span>new</span> <span>WhoIsReply</span></td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L19" data-line-number="19"></td>
        <td id="file-myownservice-cs-LC19">            {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L20" data-line-number="20"></td>
        <td id="file-myownservice-cs-LC20">                <span>Message</span> <span>=</span> <span><span>"</span>Anthony<span>"</span></span> </td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L21" data-line-number="21"></td>
        <td id="file-myownservice-cs-LC21">            });</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L22" data-line-number="22"></td>
        <td id="file-myownservice-cs-LC22">        }</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L23" data-line-number="23"></td>
        <td id="file-myownservice-cs-LC23">
</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L24" data-line-number="24"></td>
        <td id="file-myownservice-cs-LC24">        <span>public</span> <span>override</span> <span>async</span> <span>Task</span>&lt;<span>IntroduceYourselfReply</span>&gt; <span>IntroduceYourself</span>(<span>IntroduceYourselfRequest</span> <span>request</span>, <span>ServerCallContext</span> <span>context</span>)</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L25" data-line-number="25"></td>
        <td id="file-myownservice-cs-LC25">        {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L26" data-line-number="26"></td>
        <td id="file-myownservice-cs-LC26">            <span>return</span> <span>await</span> <span>Task</span>.<span>FromResult</span>(<span>new</span> <span>IntroduceYourselfReply</span></td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L27" data-line-number="27"></td>
        <td id="file-myownservice-cs-LC27">            {</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L28" data-line-number="28"></td>
        <td id="file-myownservice-cs-LC28">                <span>Name</span> <span>=</span> <span>request</span>.<span>Name</span>,</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L29" data-line-number="29"></td>
        <td id="file-myownservice-cs-LC29">                <span>Job</span> <span>=</span> <span><span>"</span>Developer<span>"</span></span>,</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L30" data-line-number="30"></td>
        <td id="file-myownservice-cs-LC30">                <span>Country</span> <span>=</span> <span><span>"</span>Canada<span>"</span></span>,</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L31" data-line-number="31"></td>
        <td id="file-myownservice-cs-LC31">                <span>Citizenship</span> <span>=</span> { <span>new</span> <span>string</span>[] {<span><span>"</span>France<span>"</span></span>, <span><span>"</span>Canada<span>"</span></span> } },</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L32" data-line-number="32"></td>
        <td id="file-myownservice-cs-LC32">                <span>Skills</span> <span>=</span> { <span>new</span> <span>Skill</span>[] { <span>new</span> <span>Skill</span> { <span>SkillName</span> <span>=</span> <span><span>"</span>.NET<span>"</span></span>, <span>SkillLevel</span> <span>=</span> <span>SkillLevel</span>.<span>Good</span> }, </td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L33" data-line-number="33"></td>
        <td id="file-myownservice-cs-LC33">                                         <span>new</span> <span>Skill</span> { <span>SkillName</span> <span>=</span> <span><span>"</span>CSS<span>"</span></span>, <span>SkillLevel</span> <span>=</span> <span>SkillLevel</span>.<span>Bad</span> } } </td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L34" data-line-number="34"></td>
        <td id="file-myownservice-cs-LC34">                }</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L35" data-line-number="35"></td>
        <td id="file-myownservice-cs-LC35">            });</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L36" data-line-number="36"></td>
        <td id="file-myownservice-cs-LC36">        }</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L37" data-line-number="37"></td>
        <td id="file-myownservice-cs-LC37">    }</td>
      </tr>
      <tr>
        <td id="file-myownservice-cs-L38" data-line-number="38"></td>
        <td id="file-myownservice-cs-LC38">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<p>Don’t forget to register your new service in the endpoints middleware:</p>



<div id="gist101981690">
    <div>
      <div>
        <div>
  <div id="file-startup-cs">
    

  <div itemprop="text">
      
<table data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-startup-cs-L1" data-line-number="1"></td>
        <td id="file-startup-cs-LC1"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Builder</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L2" data-line-number="2"></td>
        <td id="file-startup-cs-LC2"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Hosting</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L3" data-line-number="3"></td>
        <td id="file-startup-cs-LC3"><span>using</span> <span>Microsoft</span>.<span>AspNetCore</span>.<span>Http</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L4" data-line-number="4"></td>
        <td id="file-startup-cs-LC4"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Configuration</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L5" data-line-number="5"></td>
        <td id="file-startup-cs-LC5"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>DependencyInjection</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L6" data-line-number="6"></td>
        <td id="file-startup-cs-LC6"><span>using</span> <span>Microsoft</span>.<span>Extensions</span>.<span>Hosting</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L7" data-line-number="7"></td>
        <td id="file-startup-cs-LC7"><span>using</span> <span>System</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L8" data-line-number="8"></td>
        <td id="file-startup-cs-LC8">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L9" data-line-number="9"></td>
        <td id="file-startup-cs-LC9"><span>namespace</span> <span>DemoAspNetCore3</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L10" data-line-number="10"></td>
        <td id="file-startup-cs-LC10">{</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L11" data-line-number="11"></td>
        <td id="file-startup-cs-LC11">    <span>public</span> <span>class</span> <span>Startup</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L12" data-line-number="12"></td>
        <td id="file-startup-cs-LC12">    {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L13" data-line-number="13"></td>
        <td id="file-startup-cs-LC13">        <span>public</span> <span>Startup</span>(<span>IConfiguration</span> <span>configuration</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L14" data-line-number="14"></td>
        <td id="file-startup-cs-LC14">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L15" data-line-number="15"></td>
        <td id="file-startup-cs-LC15">            <span>Configuration</span> <span>=</span> <span>configuration</span>;</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L16" data-line-number="16"></td>
        <td id="file-startup-cs-LC16">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L17" data-line-number="17"></td>
        <td id="file-startup-cs-LC17">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L18" data-line-number="18"></td>
        <td id="file-startup-cs-LC18">        <span>public</span> <span>IConfiguration</span> <span>Configuration</span> { <span>get</span>; }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L19" data-line-number="19"></td>
        <td id="file-startup-cs-LC19">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L20" data-line-number="20"></td>
        <td id="file-startup-cs-LC20">        <span>public</span> <span>void</span> <span>ConfigureServices</span>(<span>IServiceCollection</span> <span>services</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L21" data-line-number="21"></td>
        <td id="file-startup-cs-LC21">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L22" data-line-number="22"></td>
        <td id="file-startup-cs-LC22">            <span>services</span>.<span>AddGrpc</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L23" data-line-number="23"></td>
        <td id="file-startup-cs-LC23">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L24" data-line-number="24"></td>
        <td id="file-startup-cs-LC24">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L25" data-line-number="25"></td>
        <td id="file-startup-cs-LC25">        <span><span>//</span> This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L26" data-line-number="26"></td>
        <td id="file-startup-cs-LC26">        <span>public</span> <span>void</span> <span>Configure</span>(<span>IApplicationBuilder</span> <span>app</span>, <span>IWebHostEnvironment</span> <span>env</span>)</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L27" data-line-number="27"></td>
        <td id="file-startup-cs-LC27">        {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L28" data-line-number="28"></td>
        <td id="file-startup-cs-LC28">            <span>if</span> (<span>env</span>.<span>IsDevelopment</span>())</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L29" data-line-number="29"></td>
        <td id="file-startup-cs-LC29">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L30" data-line-number="30"></td>
        <td id="file-startup-cs-LC30">                <span>app</span>.<span>UseDeveloperExceptionPage</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L31" data-line-number="31"></td>
        <td id="file-startup-cs-LC31">            }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L32" data-line-number="32"></td>
        <td id="file-startup-cs-LC32">            <span>else</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L33" data-line-number="33"></td>
        <td id="file-startup-cs-LC33">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L34" data-line-number="34"></td>
        <td id="file-startup-cs-LC34">                <span>app</span>.<span>UseHsts</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L35" data-line-number="35"></td>
        <td id="file-startup-cs-LC35">            }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L36" data-line-number="36"></td>
        <td id="file-startup-cs-LC36">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L37" data-line-number="37"></td>
        <td id="file-startup-cs-LC37">            <span>app</span>.<span>UseHttpsRedirection</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L38" data-line-number="38"></td>
        <td id="file-startup-cs-LC38">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L39" data-line-number="39"></td>
        <td id="file-startup-cs-LC39">            <span>app</span>.<span>UseRouting</span>();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L40" data-line-number="40"></td>
        <td id="file-startup-cs-LC40">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L41" data-line-number="41"></td>
        <td id="file-startup-cs-LC41">            <span>app</span>.<span>UseEndpoints</span>(<span>endpoints</span> <span>=&gt;</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L42" data-line-number="42"></td>
        <td id="file-startup-cs-LC42">            {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L43" data-line-number="43"></td>
        <td id="file-startup-cs-LC43">                <span>endpoints</span>.<span>MapGrpcService</span>&lt;<span>GreeterService</span>&gt;();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L44" data-line-number="44"></td>
        <td id="file-startup-cs-LC44">                <span>endpoints</span>.<span>MapGrpcService</span>&lt;<span>MyOwnGRpcService</span>&gt;();</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L45" data-line-number="45"></td>
        <td id="file-startup-cs-LC45">
</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L46" data-line-number="46"></td>
        <td id="file-startup-cs-LC46">                <span>endpoints</span>.<span>MapGet</span>(<span><span>"</span>/<span>"</span></span>, <span>async</span> <span>context</span> <span>=&gt;</span></td>
      </tr>
      <tr>
        <td id="file-startup-cs-L47" data-line-number="47"></td>
        <td id="file-startup-cs-LC47">                {</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L48" data-line-number="48"></td>
        <td id="file-startup-cs-LC48">                    <span>await</span> <span>context</span>.<span>Response</span>.<span>WriteAsync</span>(<span><span>"</span>Communication with gRPC endpoints must be made through a gRPC client. To learn how to create a client, visit: https://go.microsoft.com/fwlink/?linkid=2086909<span>"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L49" data-line-number="49"></td>
        <td id="file-startup-cs-LC49">                });</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L50" data-line-number="50"></td>
        <td id="file-startup-cs-LC50">            });</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L51" data-line-number="51"></td>
        <td id="file-startup-cs-LC51">        }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L52" data-line-number="52"></td>
        <td id="file-startup-cs-LC52">    }</td>
      </tr>
      <tr>
        <td id="file-startup-cs-L53" data-line-number="53"></td>
        <td id="file-startup-cs-LC53">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      
    </div>
</div>




<h2><strong>Before running your service</strong></h2>



<p> <a href="https://grpc.io/">gRPC</a> in <a href="https://docs.microsoft.com/en-us/aspnet/core/?view=aspnetcore-3.1">ASP.NET Core 3.1</a> requires HTTPS, so in local development, don’t forget to trust your local SSL certificate with the following command: </p>



<pre>dotnet dev-certs https --trust</pre>



<p>After all these steps you should be able to run your app:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/image-launch-grpc-service.png" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/image-launch-grpc-service.png 960w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-launch-grpc-service-300x54.png 300w, https://anthonygiretti.com/wp-content/uploads/2020/03/image-launch-grpc-service-768x138.png 768w" sizes="(max-width: 960px) 100vw, 960px"></figure>



<h2><strong>gRPC &amp; Azure App Service</strong></h2>



<p><a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC in ASP.NET Core</a> is currently not supported on <strong>Azure App Service</strong> or <strong>IIS</strong>. The <strong>HTTP/2</strong> implementation of <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/httpsys?view=aspnetcore-3.1">Http.Sys</a> does not support the HTTP response end headers on which gRPC relies. The original announcement from <strong>Microsoft </strong>can be found here:  <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/grpc/grpc-start?view=aspnetcore-3.0&amp;tabs=visual-studio#grpc-not-supported-on-azure-app-service">https://docs.microsoft.com/en-us/aspnet/core/tutorials/grpc/grpc-start?view=aspnetcore-3.0&amp;tabs=visual-studio#grpc-not-supported-on-azure-app-service</a> </p>



<h2><strong>Browser support</strong></h2>



<p><a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC</a> doesn’t support browsers. The <a href="https://github.com/improbable-eng/grpc-web">grpc-web</a> client library for SPAs such as Angular, React etc… is not compatible because at the moment browsers do not support the level of control required on web requests to support a <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC</a> client. For more information, you can refer to this page here: <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/comparison?view=aspnetcore-3.0#limited-browser-support">https://docs.microsoft.com/en-us/aspnet/core/grpc/comparison?view=aspnetcore-3.0#limited-browser-support</a><br>If you still want to use <a href="https://github.com/improbable-eng/grpc-web">grpc-web</a>, this is still possible but you will need to use a proxy such as <a href="https://www.envoyproxy.io/">Envoy</a> to transform HTTP/1 requests into HTTP/2 and vice versa:</p>



<figure><img src="http://anthonygiretti.com/wp-content/uploads/2020/03/envoy.jpg" alt="" srcset="https://anthonygiretti.com/wp-content/uploads/2020/03/envoy.jpg 858w, https://anthonygiretti.com/wp-content/uploads/2020/03/envoy-300x127.jpg 300w, https://anthonygiretti.com/wp-content/uploads/2020/03/envoy-768x324.jpg 768w" sizes="(max-width: 858px) 100vw, 858px"></figure>



<p>Later in this serie we will see how to use <a href="https://github.com/improbable-eng/grpc-web">grpc-web</a> client library in <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">ASP.NET Core gRPC</a> with a workaround (still in preview) implemented by <strong>Microsoft </strong>recently.</p>



<h2><strong>Conclusion</strong></h2>



<p>In this tutorial, we learned how to create a new <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-3.1">gRPC service</a> from a <a href="https://visualstudio.microsoft.com/en/vs/">Visual Studio 2019</a> template, and how to create our own service and configure it.</p>



<p>In the next article we will see how to consume from a <a href="https://dotnet.microsoft.com/download">.NET Core 3.1</a> client a <a href="https://docs.microsoft.com/en-us/aspnet/core/grpc/aspnetcore?view=aspnetcore-3.1&amp;tabs=visual-studio">.NET gRPC service</a>. See you in the next article 🙂</p>
</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>