<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Navigator.sendBeacon() - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Navigator.sendBeacon() - linksfor.dev(s)"/>
    <meta property="og:description" content="The navigator.sendBeacon() method asynchronously sends a small amount of data over HTTP to a web server."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ðŸŽ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Navigator.sendBeacon()</title>
<div class="readable">
        <h1>Navigator.sendBeacon()</h1>
            <div>Watching time: 7-9 minutes</div>
        <div>Posted here: 10 Oct 2019</div>
        <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon">https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon</a></p>
        <hr/>
<div id="readability-page-1" class="page"><article id="wikiArticle">

<p><span>The <code><strong>navigator.sendBeacon()</strong></code> method <a href="https://developer.mozilla.org/en-US/docs/Glossary/Asynchronous">asynchronously</a> sends a small amount of data over <a href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP" title="HTTP: The HyperText Transfer Protocol (HTTP)&nbsp;is the underlying network protocol that enables transfer of hypermedia documents on the Web, typically between a browser and a server so that humans can read them. The current version of the HTTP specification is called HTTP/2.">HTTP</a> to a web server.</span></p>

<h2 id="Syntax">Syntax</h2>

<pre>navigator.sendBeacon(<var>url</var>, <var>data</var>);
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt><code><var>url</var></code></dt>
 <dd>The URL that will receive the <em>data</em>. Can be relative or absolute.</dd>
 <dt><code><var>data</var></code></dt>
 <dd>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBuffer" title="The documentation about this has not yet been written; please consider contributing!"><code>ArrayBuffer</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" title="ArrayBufferView is a helper type representing any of the following JavaScript TypedArray types:"><code>ArrayBufferView</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" title="A Blob object represents a file-like object of immutable, raw data; they can be read as text or binary data, or converted into a ReadableStream so its methods can be used for processing the data. Blobs can represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system."><code>Blob</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString" title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String."><code>DOMString</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" title="The FormData interface provides a way to easily construct a set of key/value pairs representing form fields and their values, which can then be easily sent using the XMLHttpRequest.send() method. It uses the same format a form would use if the encoding type were set to &quot;multipart/form-data&quot;."><code>FormData</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" title="The ReadableStream interface of the&nbsp;Streams API&nbsp;represents a readable stream of byte data. The Fetch API offers a concrete instance of a ReadableStream through the body property of a Response object."><code>ReadableStream</code></a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" title="The URLSearchParams interface defines utility methods to work with the query string of a URL."><code>URLSearchParams</code></a> object containing the data to send.</dd>
</dl>

<h3 id="Return_values">Return values</h3>

<p>The <code><strong>sendBeacon()</strong></code> method returns <code>true</code> if the <a href="https://developer.mozilla.org/en-US/docs/Glossary/User_agent">user agent</a> successfully queued the <code>data</code> for transfer. Otherwise, it returns <code>false</code>.</p>

<h2 id="Description">Description</h2>

<p>This method is for analytics and diagnostics that send data to a server before the document is unloaded, where sending the data any sooner may miss some possible data collection. For example, which link the user clicked before navigating away and unloading the page.</p>

<p>Ensuring that data has been sent during the unloading of a document has traditionally been difficult, because user agents typically ignore asynchronous <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" title="Use XMLHttpRequest (XHR) objects to interact with servers. You can retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just part of a page without disrupting what the user is doing."><code>XMLHttpRequest</code></a>s made in an <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/unload" title="/en-US/docs/Web/Events/unload">unload</a></code> handler.</p>

<p>Historically, this was addressed with some of the following workarounds to delay the page unload long enough to send data to some URL:</p>

<ul>
 <li>Submitting the data with a blocking synchronous <code>XMLHttpRequest</code> call in <code>unload</code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload" title="/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event handlers.</li>
 <li>Creating an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img" title="The HTML <img> element embeds an image into the document."><code>&lt;img&gt;</code></a> element and setting its <code>src</code> in the <code>unload</code> handler. Most user agents will delay the unload to load the image.</li>
 <li>Creating a no-op loop for several seconds in the <code>unload</code> handler.</li>
</ul>

<p>All of these methods block unloading the document, which slows down the next navigation. There is nothing the next page can do to avoid this, so the new page seems slow, even though it's the previous page's fault.</p>

<p>The following example shows theoretical analytics code that attempts to submit data to a server with a synchronous <code>XMLHttpRequest</code> in an <code>unload</code> handler. This results in the next page load to be delayed.</p>

<pre><code>window<span>.</span><span>addEventListener</span><span>(</span><span>"unload"</span><span>,</span> <span>function</span> <span>logData</span><span>(</span><span>)</span> <span>{</span>
  <span>var</span> xhr <span>=</span> <span>new</span> <span>XMLHttpRequest</span><span>(</span><span>)</span><span>;</span>
  xhr<span>.</span><span>open</span><span>(</span><span>"POST"</span><span>,</span> <span>"/log"</span><span>,</span> <span>false</span><span>)</span><span>;</span> 
  xhr<span>.</span><span>send</span><span>(</span>analyticsData<span>)</span><span>;</span> 
<span>}</span><span>)</span><span>;</span>
</code></pre>

<p>This is what <code><strong>sendBeacon()</strong></code> replaces. With the <code>sendBeacon()</code> method, the data is transmitted asynchronously when the User Agent has an opportunity to do so, without delaying unload or the next navigation. <strong>This solves all of the problems with submission of analytics data:</strong></p>

<ul>
 <li>The data is sent reliably</li>
 <li>It's sent asynchronously</li>
 <li>It doesn't impact the loading of the next page</li>
 <li>In addition, the code is simpler to write than any of the older techniques!</li>
</ul>

<p>The following example shows a theoretical analytics code pattern that submits data to a server using the <code>sendBeacon()</code> method.</p>

<pre><code>window<span>.</span><span>addEventListener</span><span>(</span><span>"unload"</span><span>,</span> <span>function</span> <span>logData</span><span>(</span><span>)</span> <span>{</span>
  navigator<span>.</span><span>sendBeacon</span><span>(</span><span>"/log"</span><span>,</span> analyticsData<span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre>

<p>The beacon sends an HTTP request via the POST method, with all relevant cookies available when called.</p>

<h2 id="Specifications">Specifications</h2>

<table>
 <thead>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a href="https://w3c.github.io/beacon/#sendbeacon-method" hreflang="en" lang="en" rel="noopener">Beacon<br><small lang="en-US">The definition of 'sendBeacon()' in that specification.</small></a></td>
   <td><span>Candidate Recommendation</span></td>
   <td>Initial definition</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<p>The compatibility table on this page is generated from structured data. If you'd like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data" rel="noopener">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</p>

<div id="bcd:api.Navigator.sendBeacon"><p><a href="https://github.com/mdn/browser-compat-data" rel="noopener">Update compatibility data on GitHub</a></p><table><thead><tr><td></td><th colspan="6"><span>Desktop</span></th><th colspan="6"><span>Mobile</span></th></tr><tr><td></td><th><span>Chrome</span></th><th><span>Edge</span></th><th><span>Firefox</span></th><th><span>Internet Explorer</span></th><th><span>Opera</span></th><th><span>Safari</span></th><th><span>Android webview</span></th><th><span>Chrome for Android</span></th><th><span>Firefox for Android</span></th><th><span>Opera for Android</span></th><th><span>Safari on iOS</span></th><th><span>Samsung Internet</span></th></tr></thead><tbody><tr><th scope="row"><code>sendBeacon</code></th><td aria-expanded="false" aria-controls="bc-history-1"><span>Chrome</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              39<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-1"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              39<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td><span>Edge</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              14</td><td><span>Firefox</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              31</td><td><span>IE</span><abbr title="No support">
                <span>No support</span>
              </abbr>
              No</td><td aria-expanded="false" aria-controls="bc-history-2"><span>Opera</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              26<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-2"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              26<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td><span>Safari</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              11.1</td><td aria-expanded="false" aria-controls="bc-history-3"><span>WebView Android</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              40<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-3"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              40<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td aria-expanded="false" aria-controls="bc-history-4"><span>Chrome Android</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              42<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-4"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              42<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Chrome 59, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td><span>Firefox Android</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              31</td><td aria-expanded="false" aria-controls="bc-history-5"><span>Opera Android</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              26<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-5"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              26<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Opera 46, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td><td><span>Safari iOS</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              11.3</td><td aria-expanded="false" aria-controls="bc-history-6"><span>Samsung Internet Android</span><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              4.0<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p><section id="bc-history-6"><dl><dt><abbr title="Full support">
                <span>Full support</span>
              </abbr>
              4.0<p><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> </p></dt><dd><abbr title="See implementation notes"><span>Notes</span><i></i></abbr> Starting in Samsung Internet 7.0, this method cannot send a <code>Blob</code> whose type is not CORS safelisted. This is a temporary change until a mitigation can be found for the security issues that this creates. For more information see <a href="https://crbug.com/720283" rel="noopener">Chrome bug 720283</a>.</dd></dl></section></td></tr></tbody></table><div><div><div><h4>What happens next?</h4><p>Our team will review your report. Once we verify the information you have supplied we will update this browser compatability table accordingly.</p><h4>Can I keep track of my report?</h4><p>You can join the GitHub repository to see updates and commits for this table data:</p><p><a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data <span></span></a></p></div></div></div><div><div><p>Our goal is to provide accurate, real values for all our compatibility data tables. Notifying MDN of inaccurate data or supplying new data pushes us further towards our goal of providing 100% real values to the developer community.<br>Thank you for helping.</p></div><div><h3><span></span></h3><div id="step-1"><div><div><div><p>Please select the browser or browsers which are affected.</p></div></div></div></div><div id="step-2"><div><div><div><p>Briefly outline the issue you are highlighting. Minimum 10 and maximum 1,000 characters.</p></div></div><div><div><p>Browser documentation and release notes are good supporting items to accompany your message. A demo hosted on services like Codepen or JSBin are perfect for providing real examples of your findings.</p></div></div><p><span>Connection error:</span><span>Sorry, we canâ€™t seem to reach the server. We are working to fix the problem. Please try again later.</span></p></div></div></div></div><section id="sect7"><h3 id="Legend">Legend</h3><dl><dt><span>
                <abbr title="Full support">
                 <span>Full support</span>
                 &nbsp;
                </abbr></span></dt><dd>Full support</dd><dt><span>
                <abbr title="No support">
                 <span>No support</span>
                 &nbsp;
                </abbr></span></dt><dd>No support</dd><dt><abbr title="See implementation notes."><span>See implementation notes.</span><i></i></abbr></dt><dd>See implementation notes.</dd></dl></section></div>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator" title="The Navigator interface represents the state and the identity of the user agent. It allows scripts to query it and to register themselves to carry on some activities."><code>navigator</code></a></li>
</ul></article></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>