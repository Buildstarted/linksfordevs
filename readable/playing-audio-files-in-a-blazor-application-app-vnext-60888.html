<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Playing Audio Files in a Blazor Application &#x2014; App vNext - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Playing Audio Files in a Blazor Application &#x2014; App vNext - linksfor.dev(s)"/>
    <meta property="article:author" content="Carl Franklin"/>
    <meta property="og:description" content="With a little JavaScript Interop you can play mp3 files in your Blazor application.  The first step is to gather a few mp3 files you can play in your app. Remember, these will be playing in the browser, so keep the size of the file in mind. You can  download my demo audio files here .  Next, create "/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://www.appvnext.com/blog/2020/4/20/playing-audio-files-in-a-blazor-application"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Playing Audio Files in a Blazor Application &#x2014; App vNext</title>
<div class="readable">
        <h1>Playing Audio Files in a Blazor Application &#x2014; App vNext</h1>
            <div>by Carl Franklin</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 21 Apr 2020</div>
        <p><a href="http://www.appvnext.com/blog/2020/4/20/playing-audio-files-in-a-blazor-application">http://www.appvnext.com/blog/2020/4/20/playing-audio-files-in-a-blazor-application</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="yui_3_17_2_1_1587448967664_86">
      
      <div data-layout-label="Post Body" data-type="item" data-updated-on="1587373598128" id="item-5e9d65e20feebf4d48711756"><div id="yui_3_17_2_1_1587448967664_85"><div id="yui_3_17_2_1_1587448967664_84"><div data-block-type="2" id="block-b5c2f2a603dce705696f"><div><h2>With a little JavaScript Interop you can play mp3 files in your Blazor application.</h2><p>The first step is to gather a few mp3 files you can play in your app. Remember, these will be playing in the browser, so keep the size of the file in mind. You can <a href="http://pwop.com/download/sounds.zip">download my demo audio files here</a>.</p><p>Next, create a new Blazor app with <a href="https://visualstudio.microsoft.com/downloads/" target="_blank">Visual Studio 2019</a>. You can use the free Community Edition if you like.</p><p>Next, create a <em>sounds</em> folder under the <em>wwwroot</em>  folder, and copy your mp3 files to it. For each file, make sure the <strong>Build Action</strong> property is set to <strong>Content</strong>, and the <strong>Copy to Output Directory</strong> property is set to <strong>Copy if newer</strong>.</p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1587373522777_33251"><div id="yui_3_17_2_1_1587448967664_83">








  

    
  
    <div data-test="image-block-inline-outer-wrapper" id="yui_3_17_2_1_1587448967664_82">

      

      
        <figure id="yui_3_17_2_1_1587448967664_81">
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/56056b47e4b043d49b646e7e/1587373800132-MDRRCW5LSC2HDZLKZ0NU/ke17ZwdGBToddI8pDm48kPdrZOOa2nMq04WCMgWZ8olZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVEbdhaj9VdFyE11BOEa3j0v2AEDv0E8lL2UMr0DKJGaDTqWIIaSPh2v08GbKqpiV54/audio_demo_shot1.png" data-image="https://images.squarespace-cdn.com/content/v1/56056b47e4b043d49b646e7e/1587373800132-MDRRCW5LSC2HDZLKZ0NU/ke17ZwdGBToddI8pDm48kPdrZOOa2nMq04WCMgWZ8olZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVEbdhaj9VdFyE11BOEa3j0v2AEDv0E8lL2UMr0DKJGaDTqWIIaSPh2v08GbKqpiV54/audio_demo_shot1.png" data-image-dimensions="323x819" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5e9d66e839a29d137e1128e9" data-type="image" alt="audio_demo_shot1.png" data-image-resolution="500w" src="https://images.squarespace-cdn.com/content/v1/56056b47e4b043d49b646e7e/1587373800132-MDRRCW5LSC2HDZLKZ0NU/ke17ZwdGBToddI8pDm48kPdrZOOa2nMq04WCMgWZ8olZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVEbdhaj9VdFyE11BOEa3j0v2AEDv0E8lL2UMr0DKJGaDTqWIIaSPh2v08GbKqpiV54/audio_demo_shot1.png?format=500w">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587373868813_4953"><p>For our demo, we’re going to hijack the <em>Index.razor</em> file, replacing it with the following:</p></div><div data-block-type="23" id="block-yui_3_17_2_1_1587373868813_5564"><div id="yui_3_17_2_1_1587448967664_44"><pre>@page <span>"/"</span>
@inject IJSRuntime js;

<span>&lt;</span><span>h1</span><span>&gt;</span>Play MP3 Files<span>&lt;/</span><span>h1</span><span>&gt;</span>

<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile1"</span></span><span>&gt;</span>Duh<span>&lt;/</span><span>button</span><span>&gt;</span>
<span>&lt;</span><span>span</span><span>&gt;</span><span>&amp;nbsp;</span><span>&lt;/</span><span>span</span><span>&gt;</span>
<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile2"</span></span><span>&gt;</span>Dwayne<span>&lt;/</span><span>button</span><span>&gt;</span>

<span>&lt;</span><span>audio</span> <span>id</span>=<span><span>"player"</span></span><span>&gt;</span>
    <span>&lt;</span><span>source</span> <span>id</span>=<span><span>"playerSource"</span></span> <span>src</span>=<span><span>""</span></span> <span>/&gt;</span>
<span>&lt;/</span><span>audio</span><span>&gt;</span>

@code
{
    <span><span>async</span> Task <span>PlayAudioFile1</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"/sounds/duh.mp3"</span>);
    }

    <span><span>async</span> Task <span>PlayAudioFile2</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"/sounds/dwayne.mp3"</span>);

    }
}</pre></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587373868813_6928"><div><p>All we’ve done here is set up a couple buttons to execute code that calls into a JavaScript function called "PlayAudioFile”, which we have yet to write. Let’s do that now.</p><p>Open your startup HTML file. In Blazor Server this is <em>Pages/_Host.cshtml</em> and for Blazor WebAssembly it’s <em>wwwroot/Index.html</em>.</p><p>Add the following to it, just below the script tag that loads the blazor JavaScript file:</p></div></div><div data-block-type="23" id="block-yui_3_17_2_1_1587373868813_8174"><div id="yui_3_17_2_1_1587448967664_47"><pre>    <span><span>&lt;</span></span><span><span><span>script</span></span></span><span><span>&gt;</span></span><span>
        </span><span><span><span>window</span></span></span><span>.</span><span><span>PlayAudioFile</span></span><span> </span><span><span>=</span></span><span> (</span><span><span>src</span></span><span>) </span><span><span>=&gt;</span></span><span> {
            </span><span><span><span>var</span></span></span><span> </span><span><span>audio</span></span><span> </span><span><span>=</span></span><span> </span><span><span><span>document</span></span></span><span>.</span><span><span>getElementById</span></span><span>(</span><span><span><span>'player'</span></span></span><span>);
            </span><span><span><span>if</span></span></span><span> (</span><span><span>audio</span></span><span> </span><span><span>!=</span></span><span> </span><span><span><span>null</span></span></span><span>) {
                </span><span><span><span>var</span></span></span><span> </span><span><span>audioSource</span></span><span> </span><span><span>=</span></span><span> </span><span><span><span>document</span></span></span><span>.</span><span><span>getElementById</span></span><span>(</span><span><span><span>'playerSource'</span></span></span><span>);
                </span><span><span><span>if</span></span></span><span> (</span><span><span>audioSource</span></span><span> </span><span><span>!=</span></span><span> </span><span><span><span>null</span></span></span><span>) {
                    </span><span><span>audioSource</span></span><span>.</span><span><span>src</span></span><span> </span><span><span>=</span></span><span> </span><span><span>src</span></span><span>;
                    </span><span><span>audio</span></span><span>.</span><span><span>load</span></span><span>();
                    </span><span><span>audio</span></span><span>.</span><span><span>play</span></span><span>();
                }
            }
        }
    </span><span><span>&lt;/</span></span><span><span><span>script</span></span></span><span><span>&gt;</span></span></pre></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587373868813_8926"><div><p>This code finds your audio player, sets the source file, loads it, and plays it.</p><p>Go ahead and try it.</p><h3>Play Multiple Audio Files Simultaneously</h3><p>You’ll notice that if you click the first button, and then the second button immediately, the second mp3 file cuts off the first one. You can fix this in a rather inelegant, yet functional, way. </p><p>Create another audio tag for the second mp3 so you can play two simultaneously. More files? Just add more tags. You’ll have to modify your code to handle the change.</p><p>Change the contents of <em>Index.razor</em> to this:</p></div></div><div data-block-type="23" id="block-yui_3_17_2_1_1587373522777_67603"><div id="yui_3_17_2_1_1587448967664_50"><pre>@page <span>"/"</span>
@inject IJSRuntime js;

<span>&lt;</span><span>h1</span><span>&gt;</span>Play MP3 Files<span>&lt;/</span><span>h1</span><span>&gt;</span>

<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile1"</span></span><span>&gt;</span>Duh<span>&lt;/</span><span>button</span><span>&gt;</span>
<span>&lt;</span><span>span</span><span>&gt;</span><span>&amp;nbsp;</span><span>&lt;/</span><span>span</span><span>&gt;</span>
<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile2"</span></span><span>&gt;</span>Dwayne<span>&lt;/</span><span>button</span><span>&gt;</span>

<span>&lt;</span><span>audio</span> <span>id</span>=<span><span>"player1"</span></span><span>&gt;</span>
    <span>&lt;</span><span>source</span> <span>id</span>=<span><span>"playerSource1"</span></span> <span>src</span>=<span><span>""</span></span> <span>/&gt;</span>
<span>&lt;/</span><span>audio</span><span>&gt;</span>
<span>&lt;</span><span>audio</span> <span>id</span>=<span><span>"player2"</span></span><span>&gt;</span>
    <span>&lt;</span><span>source</span> <span>id</span>=<span><span>"playerSource2"</span></span> <span>src</span>=<span><span>""</span></span> <span>/&gt;</span>
<span>&lt;/</span><span>audio</span><span>&gt;</span>

@code
{
    <span><span>async</span> Task <span>PlayAudioFile1</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"1"</span>, <span>"/sounds/duh.mp3"</span>);
    }

    <span><span>async</span> Task <span>PlayAudioFile2</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"2"</span>, <span>"/sounds/dwayne.mp3"</span>);

    }
}</pre></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587373522777_68868"><div><p>We’ve added a second audio tag, and named them “player1” and “player2”. We’ve also updated the names of the source elements to “playerSource1” and “playerSource2”.</p><p>We’ve also modified our JavaScript calls to pass the player number as a string.</p><p>Modify your PlayAudioFile JavaScript function to handle the change:</p></div></div><div data-block-type="23" id="block-yui_3_17_2_1_1587373522777_70107"><div id="yui_3_17_2_1_1587448967664_53"><pre>    <span><span>&lt;</span></span><span><span><span>script</span></span></span><span><span>&gt;</span></span><span>
        </span><span><span><span>window</span></span></span><span>.</span><span><span>PlayAudioFile</span></span><span> </span><span><span>=</span></span><span> (</span><span><span>playerNumber</span></span><span>, </span><span><span>src</span></span><span>) </span><span><span>=&gt;</span></span><span> {
            </span><span><span><span>var</span></span></span><span> </span><span><span>audio</span></span><span> </span><span><span>=</span></span><span> </span><span><span><span>document</span></span></span><span>.</span><span><span>getElementById</span></span><span>(</span><span><span><span>'player'</span></span></span><span> </span><span><span>+</span></span><span> </span><span><span>playerNumber</span></span><span>);
            </span><span><span><span>if</span></span></span><span> (</span><span><span>audio</span></span><span> </span><span><span>!=</span></span><span> </span><span><span><span>null</span></span></span><span>) {
                </span><span><span><span>var</span></span></span><span> </span><span><span>audioSource</span></span><span> </span><span><span>=</span></span><span> </span><span><span><span>document</span></span></span><span>.</span><span><span>getElementById</span></span><span>(</span><span><span><span>'playerSource'</span></span></span><span> </span><span><span>+</span></span><span> </span><span><span>playerNumber</span></span><span>);
                </span><span><span><span>if</span></span></span><span> (</span><span><span>audioSource</span></span><span> </span><span><span>!=</span></span><span> </span><span><span><span>null</span></span></span><span>) {
                    </span><span><span>audioSource</span></span><span>.</span><span><span>src</span></span><span> </span><span><span>=</span></span><span> </span><span><span>src</span></span><span>;
                    </span><span><span>audio</span></span><span>.</span><span><span>load</span></span><span>();
                    </span><span><span>audio</span></span><span>.</span><span><span>play</span></span><span>();
                }
            }
        }
    </span><span><span>&lt;/</span></span><span><span><span>script</span></span></span><span><span>&gt;</span></span></pre></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587373522777_71374"><div><p>Now you have two “channels” with which to play audio files. Great. </p><h2>Load and play audio dynamically!</h2><p>Wouldn’t it be great if we didn’t have to provision these audio controls before using them? With a little more JavaScript we can create them on the fly, load the audio file, and play them. Now the audio files will play completely asynchronously.</p><p>Change your <em>Index.razor</em> contents back to the first version minus the audio element:</p></div></div><div data-block-type="23" id="block-yui_3_17_2_1_1587382415500_8894"><div id="yui_3_17_2_1_1587448967664_56"><pre>@page <span>"/"</span>
@inject IJSRuntime js;

<span>&lt;</span><span>h1</span><span>&gt;</span>Play MP3 Files<span>&lt;/</span><span>h1</span><span>&gt;</span>

<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile1"</span></span><span>&gt;</span>Duh<span>&lt;/</span><span>button</span><span>&gt;</span>
<span>&lt;</span><span>span</span><span>&gt;</span><span>&amp;nbsp;</span><span>&lt;/</span><span>span</span><span>&gt;</span>
<span>&lt;</span><span>button</span> <span><span>class</span></span>=<span><span>"btn btn-primary"</span></span> <span>@onclick</span>=<span><span>"PlayAudioFile2"</span></span><span>&gt;</span>Dwayne<span>&lt;/</span><span>button</span><span>&gt;</span>

@code
{
    <span><span>async</span> Task <span>PlayAudioFile1</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"/sounds/duh.mp3"</span>);
    }

    <span><span>async</span> Task <span>PlayAudioFile2</span>(<span></span>)
    </span>{
        <span>await</span> js.InvokeVoidAsync(<span>"PlayAudioFile"</span>, <span>"/sounds/dwayne.mp3"</span>);

    }
}</pre></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1587382415500_9842"><p>Now, let’s change the JavaScript function to create the audio tag, set the properties, add it to the document, load the audio, and play.</p></div><div data-block-type="23" id="block-yui_3_17_2_1_1587382415500_10410"><div id="yui_3_17_2_1_1587448967664_59"><pre>        <span><span>window</span></span>.<span>PlayAudioFile</span> <span>=</span> <span><span>(</span></span><span><span><span>src</span></span></span><span><span>)</span> </span><span><span>=&gt;</span></span> {
            <span>var</span> <span>sound</span>      <span>=</span> <span><span>document</span></span>.<span>createElement</span>(<span><span>'audio'</span></span>);
            <span>sound</span>.<span>src</span>      <span>=</span> <span>src</span>;
            <span>sound</span>.<span>type</span>     <span>=</span> <span><span>'audio/mpeg'</span></span>;
            <span><span>document</span></span>.<span>body</span>.<span>appendChild</span>(<span>sound</span>);
            <span>sound</span>.<span>load</span>();
            <span>sound</span>.<span>play</span>();
        }</pre></div></div></div></div></div>
      
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>