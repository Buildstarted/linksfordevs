<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Hosting Blazor WebAssembly Hosted Apps in Azure App Service Web Apps - Pete Codes - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Hosting Blazor WebAssembly Hosted Apps in Azure App Service Web Apps - Pete Codes - linksfor.dev(s)"/>
    <meta property="og:description" content="Blazor is the buzzword in SPA frameworks in 2020. Microsoft are all in behind it, and for good reason. Born&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.petecodes.co.uk/hosting-blazor-webassembly-hosted-apps-in-azure-app-service-web-apps/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Hosting Blazor WebAssembly Hosted Apps in Azure App Service Web Apps - Pete Codes</title>
<div class="readable">
        <h1>Hosting Blazor WebAssembly Hosted Apps in Azure App Service Web Apps - Pete Codes</h1>
            <div>Reading time: 13-17 minutes</div>
        <div>Posted here: 18 May 2020</div>
        <p><a href="https://www.petecodes.co.uk/hosting-blazor-webassembly-hosted-apps-in-azure-app-service-web-apps/">https://www.petecodes.co.uk/hosting-blazor-webassembly-hosted-apps-in-azure-app-service-web-apps/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><p>Blazor is the buzzword in SPA frameworks in 2020. Microsoft are all in behind it, and for good reason.</p><p>Born out of Knockout and developed off the cuff by Steve Sanderson, Microsoft grabbed his concept and ran with it.</p><p>Now one of the better SPA frameworks out there, Blazor is free and open source.</p><h2>Blazor Types</h2><p>There are a few different version of Blazor to choose from, and I won’t go into much detail here about each one as there are a myriad of posts around that will discuss that in depth.</p><p>The main two are;</p><h2>Blazor Server:</h2><ul><li>Lives on the Server</li><li>Code written in Razor + C#</li><li>Thin client in the Browser</li><li>DOM changes coordinated by the server using SignalR</li><li>Online only</li></ul><h2>Blazor WebAssembly</h2><ul><li>Lives in the browser</li><li>Code written in Razor + C#</li><li>Runs in the Virtual Machine in the Browser</li><li>Executes actual Dot NET core Dlls</li><li>Works offline</li></ul><p>Microsoft are working on a few more experimental types too;</p><p>Blazor PWA (Progressive Web App)<br>Blazor Hybrid – Native apps for Mobile Devices using web Technologies<br>Blazor Native – Fully native Mobile Apps using Native Controls<br>Blazor Desktop – Electron based Desktop Apps.</p><p>You can find more info here… <a href="https://visualstudiomagazine.com/articles/2019/09/26/blazor-future.aspx">https://visualstudiomagazine.com/articles/2019/09/26/blazor-future.aspx</a></p><h2>Blazor WebAssembly Flavours</h2><p>On top of the various different version of Blazor above, there are a couple of types of Blazor Web Assembly too;</p><h2>Traditional Blazor WebAssembly</h2><ul><li>Single Client-Side Project</li><li>Can reach out to API End points</li><li>WebAssembly</li><li>Dot NET Core in the Browser</li></ul><h2>ASP Hosted Blazor WebAssembly</h2><ul><li>Client-Side, Server-Side and Shared Projects</li><li>Client-Side same as Traditional WebAssembly</li><li>Server-Side Serves Application files and hosts API Endpoints – Dot NET Core</li><li>Shared Project shares Business Logic and Models between Client and Server projects – Dot NET Core</li></ul><h2>Azure App Service + Web Apps</h2><p><a rel="noreferrer noopener" aria-label="Azure App Service (opens in a new tab)" href="https://azure.microsoft.com/en-gb/services/app-service/" target="_blank">Azure App Service</a> is a Microsoft offering within Azure which hosts Web Apps written in various languages including Dot NET Core, Node and PHP.</p><p>Azure App Service hosts the websites in containers, which means you can pick and choose which platform and operating system you’d like to run your app in.</p><p>Each individual application is stored in it’s own Web App hosted in a container in an App Service.</p><h2>Azure Web App and GitHub Actions</h2><p>We always want to be working in an agile way, and employing a CI/CD pipeline in our development is definitely what we should be doing along that journey.</p><p>One great way we can accomplish this is to combine Azure Web Apps and GitHub Actions.</p><p>We can use GitHub as our Source Control Repository and hook up a GitHub action which, whenever code is checked in to the repository, build our website files and publish them to an Azure Web App.</p><p>The is all orchestrated in code using a YAML file… This YAML file contains all the required steps as code to build the website, create the artefacts and publish them to the Web App.</p><h2>Getting Started</h2><p>There are a few steps we need to run through to get to the finished solution;</p><ol><li><a href="#create-github-repo">Create a GitHub Repo</a></li><li><a href="#create-app-service-plan">Create an Azure App Service Plan</a></li><li><a href="#create-web-app">Create a Web App</a></li><li><a href="#create-hosted-blazor-project">Create a ASP.NET Hosted Blazor WebAssembly Project</a></li><li><a href="#publish-from-visual-studio">Publish Code direct from Visual Studio</a></li><li><a href="#create-a-github-action">Create a GitHub Action</a></li><li><a href="#check-in-code">Check in Code and watch the GitHub action working</a></li><li><a href="#fix-web-config">Fix an issue with the web.config file</a></li></ol><h2 id="create-github-repo">1: Create a GitHub Repo</h2><p> We’ll start out by creating a GitHub repository to house our code.</p><p>Head over to GitHub and Sign in. Next up create a new Repository. Make sure to add a README and also a Visual Studio .gitignore, as we’re going to be creating a Dot Net Core based project in Visual Studio. Personally I think this option is a little confusing, and really should be a more specific naming convention.</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31-1024x905.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31-1024x905.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31-300x265.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31-768x678.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31-350x309.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-31.png 1106w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Create a New GitHub Repository</figcaption></figure></div><h2 id="create-app-service-plan">2: Create an Azure App Service Plan</h2><p>Now head over to <a rel="noreferrer noopener" aria-label="portal.azure.com (opens in a new tab)" href="https://portal.azure.com/" target="_blank">portal.azure.com</a>, sign in and click on the “<strong><em>Create a Resource</em></strong>” button to add a new resource;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32.png 789w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32-300x116.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32-768x298.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-32-350x136.png 350w" sizes="(max-width: 789px) 100vw, 789px"></a><figcaption>Create a Resource Button</figcaption></figure></div><p>Enter “<strong><em>App Service Plan</em></strong>” in the search box, and choose that option from the results.</p><p>Click the blue “<strong><em>Create</em></strong>” button to create a new Azure App Service Plan;</p><figure><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-1024x572.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-1024x572.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-300x168.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-768x429.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-1536x858.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33-350x196.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-33.png 1570w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>Create a new Azure App Service Plan</figcaption></figure><p>Choose a Subscription, create a new Resource Group to house your new resources and give your App Service Plan a Name, choose the Windows Operating System and a region close to where you are;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-1024x1021.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-1024x1021.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-300x300.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-150x150.png 150w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-768x765.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35-350x349.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-35.png 1194w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>App Service Plan Options</figcaption></figure></div><p>Next, choose the “<strong><em>F1</em></strong>” Tier from the “<strong><em>SKU and Size</em></strong>” options;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34-1024x668.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34-1024x668.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34-300x196.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34-768x501.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34-350x228.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-34.png 1283w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>App Service Plan SKU</figcaption></figure></div><p>Finally, hit the blue “<strong><em>Review + Create</em></strong>” button at the bottom of the screen, confirm your setups and create your App Service Plan.</p><h2 id="create-web-app">3: Create a Web App</h2><p>Next, we’ll create a Web App and house it the App Service we created in the last step.</p><p>Head back to <a rel="noreferrer noopener" aria-label="portal.azure.com (opens in a new tab)" href="https://portal.azure.com/" target="_blank">portal.azure.com</a> and click the “<strong><em>Create a Resource</em></strong>” button again. This time search for “<strong><em>Web App</em></strong>” to begin creating a new Web App.</p><p>Choose the Subscription and Resource Group you used in Step 2.</p><p>Now, give your Web App name. This will form part of the URL you’ll use to access your Web App, so it will need to be unique.</p><p>Choose “<strong><em>Code</em></strong>” as the “<strong><em>Publish</em></strong>” method, and “<strong><em>.NET Core 3.1 (LTS)</em></strong>” as the “<strong><em>Runtime Stack</em></strong>“.</p><p>This should default the “<strong><em>Operating System</em></strong>” to “<strong><em>Windows</em></strong>“.</p><p>Choose the same region as you chose in Step 2 so that you can use the App Service Plan you created in Step 2.</p><p>Next, choose the App Service Plan you created in Step 2 from the “<strong><em>Windows Plan</em></strong>” drop down at the bottom of the screen.</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36-850x1024.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36-850x1024.png 850w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36-249x300.png 249w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36-768x925.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36-350x421.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-36.png 1141w" sizes="(max-width: 850px) 100vw, 850px"></a><figcaption>Create a Web App</figcaption></figure></div><p>Finally, hit the blue “<strong><em>Review and Create</em></strong>” button, review your settings and create your Web App.</p><h2 id="create-hosted-blazor-project">4: Create a ASP.NET Hosted Blazor WebAssembly Project</h2><p>Now let’s head over to Visual Studio 2019 and create our Hosted Blazor WebAssembly App.</p><p>You’re going to need the latest VS 2019… So go ahead and grab that from the <a rel="noreferrer noopener" aria-label="Microsoft site (opens in a new tab)" href="https://visualstudio.microsoft.com/vs/" target="_blank">Microsoft site</a>. The <a rel="noreferrer noopener" aria-label="free Community Edition (opens in a new tab)" href="https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community&amp;rel=16" target="_blank">free Community Edition</a> is perfect for this.</p><p>Once you have that downloaded and installed, fire it up and hit the “Clone a Repository” button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39.png 1020w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39-300x199.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39-768x510.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-39-350x233.png 350w" sizes="(max-width: 1020px) 100vw, 1020px"></a><figcaption>VS2019 – Clone a Repository</figcaption></figure></div><p>Head back to your GitHub Repository click the “Clone or Download” button and copy the address.</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40-300x197.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40-768x504.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-40-350x230.png 350w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Repo Address</figcaption></figure></div><p>Switch back to the VS2019 Clone Repo Dialog and paste the address into the “Repository Location” box, then choose a location for your repository;</p><figure><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41-1024x710.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41-1024x710.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41-300x208.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41-768x532.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41-350x243.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-41.png 1350w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>VS2019 – Repository Location</figcaption></figure><p>Of course, you could also use the “Browse a repository” GitHub Option and choose your Repository that way too;</p><div><figure><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-77.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-77.png 901w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-77-300x210.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-77-768x539.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-77-350x246.png 350w" sizes="(max-width: 901px) 100vw, 901px"><figcaption>VS2019 – Clone a GitHub Repository</figcaption></figure></div><p>Once the repository has finished cloning, click File&gt;Add and choose New Project;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43.png 787w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43-300x284.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43-768x728.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-43-350x332.png 350w" sizes="(max-width: 787px) 100vw, 787px"></a><figcaption>Add New Project</figcaption></figure></div><p>In the “<strong><em>Search for Templates</em></strong>” search box, enter “<strong><em>Blazor App</em></strong>” and choose the “<strong><em>Blazor App</em></strong>” from the list below;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44-1024x710.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44-1024x710.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44-300x208.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44-768x532.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44-350x243.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-44.png 1350w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Blazor App Template</figcaption></figure></div><p>Give your App a name and hit the “<strong><em>Create</em></strong>” button.</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45-1024x710.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45-1024x710.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45-300x208.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45-768x532.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45-350x243.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-45.png 1350w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Blazor App Name</figcaption></figure></div><p>On the next page, select “<strong><em>Blazor WebAssembly App</em></strong>“, deselect “<strong><em>Configure for HTTPS</em></strong>” (we don’t need that for this demo), select “<strong><em>ASP.NET Core hosted</em></strong>” and hit the “<strong><em>Create</em></strong>” button;</p><div><figure><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-46.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-46.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-46-300x208.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-46-768x533.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-46-350x243.png 350w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>Blazor App Options</figcaption></figure></div><p> I had an issue with permissions at this point, so needed to restart Visual Studio… So go ahead and do that if required.</p><p>You’ll see in the Solution Explorer that you have three projects; “<strong><em>Client</em></strong>“, “<strong><em>Server</em></strong>” and “<strong><em>Shared</em></strong>“;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-49.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-49.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-49.png 624w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-49-221x300.png 221w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-49-350x475.png 350w" sizes="(max-width: 624px) 100vw, 624px"></a><figcaption>Hosted Blazor Solution Projects</figcaption></figure></div><p>We can give the Web App a quick test by hitting the Run with “<strong><em>IIS Express</em></strong>” Button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47-1024x353.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47-1024x353.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47-300x103.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47-768x265.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47-350x121.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-47.png 1035w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Run with IIS Express</figcaption></figure></div><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-924x1024.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-924x1024.png 924w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-271x300.png 271w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-768x851.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-1386x1536.png 1386w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48-350x388.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-48.png 1555w" sizes="(max-width: 924px) 100vw, 924px"></a><figcaption>Vanilla Hosted Blazor Demo</figcaption></figure></div><h2 id="publish-from-visual-studio">5: Publish Code direct from Visual Studio</h2><p>Before we get on to using GitHub Actions, let’s make sure that we’ve got the rest of the infrastructure hooked up correctly by publishing our site directly from Visual Studio.</p><p>Head back to <a rel="noreferrer noopener" aria-label="portal.azure.com (opens in a new tab)" href="https://portal.azure.com/" target="_blank">portal.azure.com</a> and navigate to your Web App. Click the “Get publish profile” button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50-1024x458.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50-1024x458.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50-300x134.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50-768x344.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50-350x157.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-50.png 1160w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Get publish profile button</figcaption></figure></div><p>This will download a file containing the wherewithal for Visual Studio to be able to connect to and publish our files to the Web App.</p><p>Switch back to Visual Studio and right click on the Server project and click the “<strong><em>Publish</em></strong>” menu item;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51.png 940w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51-300x247.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51-768x632.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-51-350x288.png 350w" sizes="(max-width: 940px) 100vw, 940px"></a><figcaption>Publish Menu Item</figcaption></figure></div><p>From the list of options, select the “Import Profile” option and press the Next button;</p><p>On the next page, browse and locate the Publish profile you downloaded earlier and hit the “<strong><em>Finish</em></strong>” Button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52-1024x718.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52-1024x718.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52-300x210.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52-768x539.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52-350x246.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-52.png 1206w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Browse for Publish Profile</figcaption></figure></div><p>You’ll now have a summary of the Publish Plan, check everything is ok and hit the “<strong><em>Publish</em></strong>” Button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-1024x638.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-1024x638.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-300x187.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-768x479.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-1536x957.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-1600x997.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53-350x218.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-53.png 1662w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Publish Plan</figcaption></figure></div><p>The publish process may take a few minutes to complete;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54.png 916w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54-300x156.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54-768x399.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-54-350x182.png 350w" sizes="(max-width: 916px) 100vw, 916px"></a><figcaption>Publishing from Visual Studio</figcaption></figure></div><p>Once the process is complete, a browser window should open with your working Hosted Blazor App!</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55-1024x1007.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55-1024x1007.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55-300x295.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55-768x755.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55-350x344.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-55.png 1459w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Blazor App in Web App</figcaption></figure></div><h2 id="create-a-github-action">6: Create a GitHub Action</h2><p>Now that we’ve confirmed that our infrastructure is all up and running, we can move on to automating deployments to the web app when code is checked in to the GitHub repository.</p><p>Head back to <a rel="noreferrer noopener" aria-label="portal.azure.com (opens in a new tab)" href="https://portal.azure.com/" target="_blank">portal.azure.com</a> and your Web App. Click the “<strong><em>Deployment Centre</em></strong>” menu item on the left;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-56.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-56.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-56.png 433w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-56-219x300.png 219w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-56-350x480.png 350w" sizes="(max-width: 433px) 100vw, 433px"></a><figcaption>Deployment Centre Menu Item</figcaption></figure></div><p>You’ll see there are quite few different options for deploying to Azure Web Apps, split into CI/CD Pipelines with “<strong><em>Azure DevOps</em></strong>” or “<strong><em>Git</em></strong>” and Manual Deployments with “<strong><em>OneDrive</em></strong>” and “<strong><em>FTP</em></strong>“.</p><p>Select the GitHub option and hit the blue “<strong><em>Continue</em></strong>” button. You may of course need to sign in to GitHub here.;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57-1024x639.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57-1024x639.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57-300x187.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57-768x479.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57-350x218.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-57.png 1320w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Deployment Centre Git Option</figcaption></figure></div><p>Next we can choose between the “<strong><em>App Service Build Service</em></strong>“, “<strong><em>GitHub Actions</em></strong>” or “<strong><em>Azure Pipelines</em></strong>“. Select “<strong><em>GitHub Actions</em></strong>” and press the blue “<strong><em>Continue</em></strong>” button.</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58-1024x360.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58-1024x360.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58-300x105.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58-768x270.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58-350x123.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-58.png 1122w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Actions Option</figcaption></figure></div><p>On the next screen, select your GitHub Organisation and the project you created in Step 1 and press the blue “<strong><em>Continue</em></strong>” button;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-1024x630.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-1024x630.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-300x185.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-768x472.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-1536x945.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-1600x984.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59-350x215.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-59.png 1663w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Options</figcaption></figure></div><p>On the final screen you’ll see the generated YAML file for the GitHub action at the bottom of the page;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60-1024x925.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60-1024x925.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60-300x271.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60-768x694.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60-350x316.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-60.png 1105w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Action YAML</figcaption></figure></div><p>Go ahead and press the blue “Finish” button. You’ll notice that the screen says “No Deployment Data Available”, which is because we haven’t actually checked any code in yet.</p><h2 id="check-in-code">7: Check in Code and watch the GitHub action working</h2><p>Switch back to Visual Studio, and if it’s not already visible, then open the “<strong><em>View</em></strong>” menu and show the GitHub Window by selecting the “<strong><em>Git Window</em></strong>” Menu Item;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61.png 961w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61-300x228.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61-768x583.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-61-350x266.png 350w" sizes="(max-width: 961px) 100vw, 961px"></a></figure></div><p>Before we can commit and push our code, we need to pull in the change that creating the GitHub Action has made to the repository.</p><p>Click the “Pull” button in the top right of the Git window;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-64.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-64.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-64.png 409w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-64-300x88.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-64-350x103.png 350w" sizes="(max-width: 409px) 100vw, 409px"></a><figcaption>Git Pull</figcaption></figure></div><p>We can now check our code in and push it up to the remote repository. Check through the files we’re going to check in and enter a Commit Message. Clicking the small down arrow next to the “<strong><em>Commit All</em></strong>” button will show a fly out where you can choose “Commit All and Push”;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62-1024x869.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62-1024x869.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62-300x255.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62-768x652.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62-350x297.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-62.png 1116w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Git Commit and Push Code</figcaption></figure></div><p>Once the code has been checked in it will kick off the GitHub Action. Return to your GitHub repository. Click the “Actions” item along the top to show the Actions page;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-1024x466.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-1024x466.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-300x137.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-768x350.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-1536x700.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-1600x729.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66-350x159.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-66.png 1822w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>GitHub Actions Page</figcaption></figure></div><p>You’ll see the first action which failed as there weren’t any source files for the Action to build when it was first created.</p><p>Above that, you’ll see an in progress action. Clicking that will take you to the detail of the currently progressing action;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-1024x772.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-1024x772.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-300x226.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-768x579.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-1536x1157.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-1600x1206.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67-350x264.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-67.png 1797w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>In Progress Action Detail</figcaption></figure></div><p>We can monitor the progress of the action by clicking the “<strong><em>Build and Deploy</em></strong>” item on the left;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-1024x749.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-1024x749.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-300x219.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-768x562.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-1536x1124.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-1600x1171.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68-350x256.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-68.png 1822w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Build and Deploy Progress</figcaption></figure></div><p>Depending on how your formatted your solution, you may have an error at the “Build with dotnet” step saying ” MSBUILD : error MSB1003: Specify a project or solution file. The current working directory does not contain a project or solution file.”;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-1024x363.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-1024x363.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-300x106.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-768x272.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-1536x545.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-2048x726.png 2048w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-1600x567.png 1600w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-69-350x124.png 350w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Build with dotnet Error</figcaption></figure></div><p>This is because the YAML file is expecting the solution file to be within the root of the repository.</p><p>We can make a quick modification to the YAML file to fix this issue.</p><p>Back in Visual Studio, include the file in the project by right clicking on the solution and going to Add &gt; “<strong><em>Existing Item</em></strong>“;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-1024x763.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-1024x763.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-300x224.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-768x572.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-1536x1144.png 1536w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70-350x261.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-70.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Add YAMl File to Project</figcaption></figure></div><p>If you navigate to the root of the Solution Directory, there will be a “.github” folder. Within there is a “Workflows” folder, and within that folder you’ll find the “<strong><em>master_hostedblazorapp.yml</em></strong>” GitHib Action YAML File;</p><figure><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71-1024x772.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71-1024x772.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71-300x226.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71-768x579.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71-350x264.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-71.png 1180w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>Once you’ve added that file to your project, go ahead and open it.</p><p>After the Build and Publish commands, add the name of the directory where your solution is contained followed by a forward slash “/”;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-73.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-73.png" alt="" width="610" height="461" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-73.png 721w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-73-300x227.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-73-350x265.png 350w" sizes="(max-width: 610px) 100vw, 610px"></a><figcaption>Modified YAML File</figcaption></figure></div><p>Save the file and return to the Git window. Enter a new commit message and do a “Commit All and Push” again.</p><p>If you return to the GitHub actions page and drill down in to the new Action in Progress, you should now see that it passes successfully;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74-1024x619.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74-1024x619.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74-300x181.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74-768x464.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74-350x212.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-74.png 1525w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>Successful Build and Deploy</figcaption></figure></div><h2 id="fix-web-config">8: Fix an issue with the web.config file</h2><p>Switching back to your website now, and hitting the refresh will show up an issue with the current GitHub Action YAML for ASP.NET Core Hosted Blazor Web Apps;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75.png" alt="" width="610" height="340" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75.png 812w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75-300x167.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75-768x428.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-75-350x195.png 350w" sizes="(max-width: 610px) 100vw, 610px"></a><figcaption>Web App Broken</figcaption></figure></div><p>This took me and then the awesome <a rel="noreferrer noopener" aria-label="Gregor Suttie (opens in a new tab)" href="https://twitter.com/gregor_suttie" target="_blank">Gregor Suttie</a> (Thanks a heap Gregor!) a good long time to pin down, and is because the current GitHub Action YAML generates an incorrect web.config for the project. The generated web.config contains a heap of ignore statements and redirects which bork a Hosted Blazor App.</p><p>We can overcome this issue by supplying our own web.config in the Server Project through..</p><p>Switch back to Visual Studio and right click on the Server Project in Solution Explorer.</p><p>Go to Add &gt; New Item. From the dialog, choose “<strong><em>Web Configuration File</em></strong>” and press the “<strong><span><em>Add</em></span></strong>” button.</p><p>Replace the contents of the file with the following;</p><pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;location path="." inheritInChildApplications="false"&gt;
    &lt;system.webServer&gt;
      &lt;handlers&gt;
        &lt;add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" /&gt;
      &lt;/handlers&gt;
      &lt;aspNetCore processPath="%LAUNCHER_PATH%" stdoutLogEnabled="false" stdoutLogFile="\\?\%home%\LogFiles\stdout" hostingModel="inprocess"&gt;
        &lt;environmentVariables&gt;
          &lt;environmentVariable name="ASPNETCORE_HTTPS_PORT" value="44342" /&gt;
          &lt;environmentVariable name="COMPLUS_ForceENC" value="1" /&gt;
          &lt;environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Development" /&gt;
        &lt;/environmentVariables&gt;
      &lt;/aspNetCore&gt;
    &lt;/system.webServer&gt;
  &lt;/location&gt;
&lt;/configuration&gt;</code></pre><p>Save the file and one last time, Commit and push your changes.</p><p>Once the GitHub action has completed, you can refresh the Web App page, and all being well, you should now have a fully working app again;</p><div><figure><a href="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76.png"><img src="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76-1024x1007.png" alt="" srcset="https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76-1024x1007.png 1024w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76-300x295.png 300w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76-768x755.png 768w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76-350x344.png 350w, https://www.petecodes.co.uk/wp-content/uploads/2020/05/image-76.png 1459w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption>ASP.NET Hosted Blazor App Deployed</figcaption></figure></div><h2>Wrapping Up</h2><p>In this post you learnt how to Create a GitHub Repo, an Azure App Service Plan and a Web App. We then created an ASP.NET Core Hosted Blazor Web App and published that to our Web App.</p><p>Finally, we created a GitHub action and rectified an issue with the web.config which temporarily borked our project.</p><p>I hope this has helped you to get started with Hosted Blazor Web Apps and Azure Web Apps…</p><p>Cheers and good luck!</p></div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>