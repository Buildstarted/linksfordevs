<!DOCTYPE html>
<html lang="en">
<head>
    <title>
.NET Internals Cookbook Part 12 &#x2014; Memory structure, attributes, handles &#x2013; Random IT Utensils -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>.NET Internals Cookbook Part 12 — Memory structure, attributes, handles – Random IT Utensils</h1><div><div class="post-content"><blockquote><p>This is the twelfth part of the .NET Internals Cookbook series. For your convenience you can find other parts in the table of contents in <a href="https://blog.adamfurmanek.pl/2019/02/16/net-internals-cookbook-part-0/">Part 0 – Table of contents</a></p></blockquote><h6>82. What is a bit-mapped attribute? Custom attribute? Pseudo-custom attribute?</h6><p>There are three types of attributes:</p><ol><li>Bit-mapped — for instance <code>public</code></li><li>Custom — the “normal” attributes like <code>[MyCustom]</code></li><li>Pseudo-custom — look like custom attributes but behave like bit-mapped ones, for instance <code>Serializable</code></li></ol><p>Let’s take <a href="https://dotnetfiddle.net/yNidOv">this code</a>:</p><div id="crayon-5e42030c8503d950490574" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

[Custom]
[Serializable]
public class Program
{
    public static void Main()
    {
    }
}

class CustomAttribute : Attribute
{
    public CustomAttribute() { }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8503d950490574-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-3"><span class="crayon-sy">[</span><span class="crayon-e">Custom</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-4"><span class="crayon-sy">[</span><span class="crayon-e">Serializable</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-5"><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-6"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-10"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-12"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-v">CustomAttribute</span><span class="crayon-h"></span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Attribute</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-13"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8503d950490574-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">CustomAttribute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">{</span><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e42030c8503d950490574-15"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>Which you can decompile to:</p><div id="crayon-5e42030c85047109252298" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.class public auto ansi serializable beforefieldinit Program
	extends [mscorlib]System.Object
{
	.custom instance void CustomAttribute::.ctor() = (
		01 00 00 00
	)
	// Methods
	.method public hidebysig static 
		void Main () cil managed 
	{
		// Method begins at RVA 0x2050
		// Code size 2 (0x2)
		.maxstack 8
		.entrypoint

		IL_0000: nop
		IL_0001: ret
	} // end of method Program::Main

	.method public hidebysig specialname rtspecialname 
		instance void .ctor () cil managed 
	{
		// Method begins at RVA 0x2053
		// Code size 8 (0x8)
		.maxstack 8

		IL_0000: ldarg.0
		IL_0001: call instance void [mscorlib]System.Object::.ctor()
		IL_0006: nop
		IL_0007: ret
	} // end of method Program::.ctor

} // end of class Program</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c85047109252298-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-2">2</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-4">4</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-6">6</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-8">8</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-10">10</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-12">12</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-14">14</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-16">16</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-18">18</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-20">20</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-22">22</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-24">24</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-26">26</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-28">28</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-30">30</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85047109252298-32">32</p><p class="crayon-num" data-line="crayon-5e42030c85047109252298-33">33</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85047109252298-1"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">serializable </span><span class="crayon-e">beforefieldinit </span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-2"><span class="crayon-e"></span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-3"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-4"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">custom </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-v">CustomAttribute</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-sy">(</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-5"><span class="crayon-h"></span><span class="crayon-cn">01</span><span class="crayon-h"></span><span class="crayon-cn">00</span><span class="crayon-h"></span><span class="crayon-cn">00</span><span class="crayon-h"></span><span class="crayon-cn">00</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-6"><span class="crayon-h"></span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-7"><span class="crayon-h"></span><span class="crayon-c">// Methods</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-8"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-m">static</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-9"><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-10"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-11"><span class="crayon-h"></span><span class="crayon-c">// Method begins at RVA 0x2050</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-12"><span class="crayon-h"></span><span class="crayon-c">// Code size 2 (0x2)</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-13"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h"></span><span class="crayon-cn">8</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-14"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">entrypoint</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-16"><span class="crayon-e"></span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">nop</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-17"><span class="crayon-e"></span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ret</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-18"><span class="crayon-h"></span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Program::Main</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-20"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-e">specialname </span><span class="crayon-e">rtspecialname </span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-21"><span class="crayon-e"></span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-22"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-23"><span class="crayon-h"></span><span class="crayon-c">// Method begins at RVA 0x2053</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-24"><span class="crayon-h"></span><span class="crayon-c">// Code size 8 (0x8)</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-25"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h"></span><span class="crayon-cn">8</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-27"><span class="crayon-h"></span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">ldarg</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-28"><span class="crayon-h"></span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">call </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-29"><span class="crayon-h"></span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85047109252298-30"><span class="crayon-e"></span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-31"><span class="crayon-h"></span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Program::.ctor</span></p><p class="crayon-line" id="crayon-5e42030c85047109252298-33"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of class Program</span></p></div></td></tr></tbody></table></div></div><p>So you can see that the <code>Serializable</code> attribute is applied in the class signature:</p><div id="crayon-5e42030c8504b317032901" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.class public auto ansi serializable beforefieldinit Program
	extends [mscorlib]System.Object</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8504b317032901-1"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">serializable </span><span class="crayon-e">beforefieldinit </span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8504b317032901-2"><span class="crayon-e"></span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p></div></td></tr></tbody></table></div></div><p>Custom attribute is initialized this way:</p><div id="crayon-5e42030c8504e030467193" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.custom instance void CustomAttribute::.ctor() = (
	01 00 00 00
)</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8504e030467193-1"><span class="crayon-sy">.</span><span class="crayon-e">custom </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-v">CustomAttribute</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8504e030467193-2"><span class="crayon-h"></span><span class="crayon-cn">01</span><span class="crayon-h"></span><span class="crayon-cn">00</span><span class="crayon-h"></span><span class="crayon-cn">00</span><span class="crayon-h"></span><span class="crayon-cn">00</span></p><p class="crayon-line" id="crayon-5e42030c8504e030467193-3"><span class="crayon-sy">)</span></p></div></td></tr></tbody></table></div></div><p>See also <a href="https://www.red-gate.com/simple-talk/blogs/subterranean-il-pseudo-custom-attributes/">this post</a>.</p><h6>83. What is a handle-recycling attack?</h6><p><code>SafeHandle</code> identifies a native handle assigned by operating system. Handles are just numbers in a handle table which can be reused. Imagine a situation that you push a handle on the stack and then the thread is paused. Other thread closes the handle, opens something new and gets the same integer value. Now our thread is resumed and continues with the handle it already pushed on the stack but now the handle identifies different resource.</p><h6>84. What handle types do we have in .NET?</h6><ul><li>Strong handle – like a normal reference</li><li>Short weak handle – doesn’t stop the object from cleaning up, does not track the object if it is resurrected</li><li>Long weak handle – like short weak handle but tracks the object after it gets resurrected</li><li>Pinned handle – strong handle which doesn’t allow the object to be moved</li><li>Async pinned handle – like pinned handle but GC knows that it can be unpinned after async (typically I/O) operation is completed</li><li>Ref count handle – handle counting references, used for COM interop</li><li>Dependent handle – used by <code>ConditionalWeakTable</code>, connects two objects by strong handle, but from the outside is like a weak handle</li></ul><p>You can see those by running <code>!gchandles</code> in WinDBG:</p><div id="crayon-5e42030c85051952288956" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">0:000&gt; !gchandles
GC Handle Statistics:
Strong Handles: 259
Pinned Handles: 137
Async Pinned Handles: 1
Ref Count Handles: 79
Weak Long Handles: 197
Weak Short Handles: 650
Other Handles: 0</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85051952288956-1"><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-cn">000</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">!</span><span class="crayon-e">gchandles</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85051952288956-2"><span class="crayon-e">GC </span><span class="crayon-e">Handle </span><span class="crayon-v">Statistics</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e42030c85051952288956-3"><span class="crayon-e">Strong </span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">259</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85051952288956-4"><span class="crayon-e">Pinned </span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">137</span></p><p class="crayon-line" id="crayon-5e42030c85051952288956-5"><span class="crayon-e">Async </span><span class="crayon-e">Pinned </span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85051952288956-6"><span class="crayon-e">Ref </span><span class="crayon-e">Count </span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">79</span></p><p class="crayon-line" id="crayon-5e42030c85051952288956-7"><span class="crayon-e">Weak </span><span class="crayon-t">Long</span><span class="crayon-h"></span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">197</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85051952288956-8"><span class="crayon-e">Weak </span><span class="crayon-t">Short</span><span class="crayon-h"></span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">650</span></p><p class="crayon-line" id="crayon-5e42030c85051952288956-9"><span class="crayon-e">Other </span><span class="crayon-v">Handles</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-cn">0</span></p></div></td></tr></tbody></table></div></div><h6>85. What is a ref local?</h6><p>.NET has a concept of managed pointers — pointers not necessarily pointing to the beginning of the object. They can point to local variables, parameters and parts of an object (including array elements).</p><p><code>ref local</code> is a variable storing a managed pointer. You can use it <a href="https://dotnetfiddle.net/3fe6Oz">like this</a>:</p><div id="crayon-5e42030c85054595511705" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
	public class Program
	{	
		public static void Main(string[] args)
		{
			int a = 5;
			ref int b = ref a;
			Console.WriteLine(a);
			Console.WriteLine(b);
			a = 6;
			Console.WriteLine(a);
			Console.WriteLine(b);
			b = 7;
			Console.WriteLine(a);
			Console.WriteLine(b);
		}
	}
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c85054595511705-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-2">2</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-4">4</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-6">6</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-8">8</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-10">10</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-12">12</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-14">14</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-16">16</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-18">18</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85054595511705-20">20</p><p class="crayon-num" data-line="crayon-5e42030c85054595511705-21">21</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85054595511705-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-5"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-6"><span class="crayon-h"></span><span class="crayon-sy">{</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-7"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-8"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-9"><span class="crayon-h"></span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">a</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-10"><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">b</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-i">ref</span><span class="crayon-h"></span><span class="crayon-v">a</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-11"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-12"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">b</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-13"><span class="crayon-h"></span><span class="crayon-v">a</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">6</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-14"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-15"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">b</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-16"><span class="crayon-h"></span><span class="crayon-v">b</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-17"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-18"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">b</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-19"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85054595511705-20"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e42030c85054595511705-21"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>The output is:</p><p>So you can see that both of the variables point to the same memory location. When you decompile the code, you get:</p><div id="crayon-5e42030c85059889238711" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.maxstack  2
.locals init ([0] int32 a,
		 [1] int32&amp; b)
IL_0000:  nop
IL_0001:  ldc.i4.5
IL_0002:  stloc.0
IL_0003:  ldloca.s   a
IL_0005:  stloc.1
IL_0006:  ldloc.0
IL_0007:  call       void [mscorlib]System.Console::WriteLine(int32)
IL_000c:  nop
IL_000d:  ldloc.1
IL_000e:  ldind.i4
IL_000f:  call       void [mscorlib]System.Console::WriteLine(int32)
IL_0014:  nop</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85059889238711-1"><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">2</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-2"><span class="crayon-sy">.</span><span class="crayon-e">locals </span><span class="crayon-e">init</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-i">int32</span><span class="crayon-h"></span><span class="crayon-v">a</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-3"><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">int32</span><span class="crayon-o">&amp;</span><span class="crayon-h"></span><span class="crayon-v">b</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-4"><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">nop</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-5"><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldc</span><span class="crayon-sy">.</span><span class="crayon-v">i4</span><span class="crayon-sy">.</span><span class="crayon-cn">5</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-6"><span class="crayon-v">IL_0002</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">stloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-7"><span class="crayon-v">IL_0003</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldloca</span><span class="crayon-sy">.</span><span class="crayon-i">s</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-i">a</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-8"><span class="crayon-v">IL_0005</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">stloc</span><span class="crayon-sy">.</span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-9"><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-10"><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">int32</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-11"><span class="crayon-v">IL_000c</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">nop</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-12"><span class="crayon-v">IL_000d</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldloc</span><span class="crayon-sy">.</span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-13"><span class="crayon-v">IL_000e</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">ldind</span><span class="crayon-sy">.</span><span class="crayon-e">i4</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85059889238711-14"><span class="crayon-v">IL_000f</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">call&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">int32</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85059889238711-15"><span class="crayon-v">IL_0014</span><span class="crayon-o">:</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">nop</span></p></div></td></tr></tbody></table></div></div><p>So you can see that the type of <code>b</code> is <code>int32&amp;</code>.</p><p>You can also use <code>ref return</code> to return something from <a href="https://tio.run/##pZCxasMwEIZn6SlujIeWLmkGk6nQKYVChw7Gw0W5GoEthTs5IRg/uyPJcTqVFjoIof8@vhO/kQfjmaapF@sa@LhIoK7U2mFHckRD8M6@Yez0oNWx37fWgGlR5J6rQWm1jCRgiNfJ2wO8oXUrCRy9VQ3IjRQRjBqlTsgxYLzAFhydwbpQ1cN6LNOQ6SsFsI/QFtLr1ftVxosMpPPinfiWHj/ZBtpZRzNQPdVF@SMSjd@GhY87nsvflH/wzd/d/FM16my79bhUkQrIHc2tFcPcU@jZZWax3wyjHvU0XQE">a function</a>:</p><div id="crayon-5e42030c8505c228446539" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var array = new int[] { 5 };
            ref int bar = ref Foo(array);

            Console.WriteLine(array[0]);
            Console.WriteLine(bar);

            array[0] = 6;
            Console.WriteLine(array[0]);
            Console.WriteLine(bar);

            bar = 7;
            Console.WriteLine(array[0]);
            Console.WriteLine(bar);
        }

        static ref int Foo(int[] array)
        {
            return ref array[0];
        }
    }
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-2">2</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-4">4</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-6">6</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-8">8</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-10">10</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-12">12</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-14">14</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-16">16</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-18">18</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-20">20</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-22">22</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-24">24</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-26">26</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8505c228446539-28">28</p><p class="crayon-num" data-line="crayon-5e42030c8505c228446539-29">29</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8505c228446539-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-t">array</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-sy">{</span><span class="crayon-h"></span><span class="crayon-cn">5</span><span class="crayon-h"></span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">ref </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">6</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-t">array</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8505c228446539-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e42030c8505c228446539-29"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>This prints:</p><p>As a sidenote, <a href="https://dotnetfiddle.net/RlWOQn">dotnetfiddle</a> gives this:</p><div id="crayon-5e42030c85064525820533" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">Run-time exception (line -1): Operation could destabilize the runtime.

Stack Trace:

[System.Security.VerificationException: Operation could destabilize the runtime.]
   at Program.Program.Foo(Int32[] array)
   at Program.Program.Main(String[] args)</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85064525820533-1"><span class="crayon-v">Run</span><span class="crayon-o">-</span><span class="crayon-e">time </span><span class="crayon-e">exception</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-v">line</span><span class="crayon-h"></span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Operation </span><span class="crayon-e">could </span><span class="crayon-e">destabilize </span><span class="crayon-e">the </span><span class="crayon-v">runtime</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-5e42030c85064525820533-3"><span class="crayon-e">Stack </span><span class="crayon-v">Trace</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-5e42030c85064525820533-5"><span class="crayon-sy">[</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Security</span><span class="crayon-sy">.</span><span class="crayon-v">VerificationException</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">Operation </span><span class="crayon-e">could </span><span class="crayon-e">destabilize </span><span class="crayon-e">the </span><span class="crayon-v">runtime</span><span class="crayon-sy">.</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85064525820533-6"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">at </span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-v">Int32</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-t">array</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85064525820533-7"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">at </span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-v">Program</span><span class="crayon-sy">.</span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p></div></td></tr></tbody></table></div></div><h6>86. What is an interior pointer?</h6><p>Interior pointer is a managed pointer which points to the inside of an object. See <a href="https://dotnetfiddle.net/CLtsXG">this</a>:</p><div id="crayon-5e42030c85066301087482" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">using System;

namespace Program
{
	public class Program
	{	
		public static void Main(string[] args)
		{
			var foo = new Foo();
			foo.Bar = 5;
			ref int bar = ref foo.Bar;
			
			Console.WriteLine(foo.Bar);
			Console.WriteLine(bar);
			
			foo.Bar = 6;
			Console.WriteLine(foo.Bar);
			Console.WriteLine(bar);
			
			bar = 7;
			Console.WriteLine(foo.Bar);
			Console.WriteLine(bar);
		}
	}
}

class Foo{
	public int Bar;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c85066301087482-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-2">2</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-4">4</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-6">6</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-8">8</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-10">10</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-12">12</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-14">14</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-16">16</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-18">18</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-20">20</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-22">22</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-24">24</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-26">26</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85066301087482-28">28</p><p class="crayon-num" data-line="crayon-5e42030c85066301087482-29">29</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85066301087482-1"><span class="crayon-e">using </span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-3"><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-4"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-5"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Program</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-6"><span class="crayon-h"></span><span class="crayon-sy">{</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-7"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-m">static</span><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-8"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-9"><span class="crayon-h"></span><span class="crayon-t">var</span><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-r">new</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-10"><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-11"><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-e">ref </span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-13"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-14"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-16"><span class="crayon-h"></span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">6</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-17"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-18"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-20"><span class="crayon-h"></span><span class="crayon-v">bar</span><span class="crayon-h"></span><span class="crayon-o">=</span><span class="crayon-h"></span><span class="crayon-cn">7</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-21"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">.</span><span class="crayon-v">Bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-22"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-23"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-24"><span class="crayon-h"></span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-25"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-27"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85066301087482-28"><span class="crayon-h"></span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">Bar</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85066301087482-29"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>This outputs:</p><p>You may ask: how does GC know that interior pointer needs to keep an object alive? GC uses brick table which partitions the heap into multiple blocks. It contains an offset to the first object inside such a block so then it can traverse the chunk of memory and find the object which should be held by the interior pointer. Since this algorithm is very expensive there are limitations what you can do. For instance you cannot have a “ref field” in an object.</p><h6>87. What is a ref struct?</h6><p>It is a structure which cannot be moved to the heap. It is always stored on the stack and because of that cannot be accessed by multiple threads. You declare it like this:</p><div id="crayon-5e42030c8506c106871461" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">public ref struct Foo
{
    public int Bar;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8506c106871461-1"><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">ref</span><span class="crayon-h"></span><span class="crayon-t">struct</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8506c106871461-2"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8506c106871461-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">Bar</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8506c106871461-4"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>If you try to use <code>Foo</code> as a field or property of a class, box it or create an array of it – you will get a compilation error.</p><h6>88. What is an unsafe struct?</h6><p>If you put an array inside a structure, only the reference to the array is stored. If you want to store whole array inside a structure you need to create so called “fixed size buffer”. It is a fixed array of primitives which you can use in unsafe structures only:</p><div id="crayon-5e42030c8506f269686755" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">unsafe struct FixedBufferExample
{
    public fixed int buffer[1024]; // This is a fixed buffer.
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8506f269686755-1"><span class="crayon-e">unsafe</span><span class="crayon-h"></span><span class="crayon-t">struct</span><span class="crayon-h"></span><span class="crayon-e">FixedBufferExample</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8506f269686755-2"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c8506f269686755-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">fixed </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">buffer</span><span class="crayon-sy">[</span><span class="crayon-cn">1024</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"></span><span class="crayon-c">// This is a fixed buffer.</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8506f269686755-4"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><h6>89. What is a readonly struct?</h6><p>It is a structure which cannot be modified after creation. It differs from normal structure with readonly fields that you cannot modify <code>this</code>:</p><div id="crayon-5e42030c85071490457783" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">public readonly struct Foo
{
    public readonly int Bar;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85071490457783-1"><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">readonly</span><span class="crayon-h"></span><span class="crayon-t">struct</span><span class="crayon-h"></span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85071490457783-2"><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85071490457783-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">readonly </span><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-v">Bar</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85071490457783-4"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><h6>90. What is an unsafe type?</h6><p>This is easy, it is just a class in which you can use unsafe code. Just like an unsafe method.</p><h6>91. What is a blittable type?</h6><p>It is a type which has the same binary representation in managed an unmanaged code. Integer, pointers and floating point values are blittable. Oddly enough, <code>bool</code> is not blittable as it can be stored as 1, 2 or 4-byte value, <code>char</code> and <code>DateTime</code> are non-blittable as well. See more <a href="https://docs.microsoft.com/en-us/dotnet/framework/interop/blittable-and-non-blittable-types">here</a>.</p><h6>92. How is unmanaged class compiled in C++/CLI?</h6><p>You can create both managed and unmanaged classes and methods, see this:</p><div id="crayon-5e42030c85074081376030" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">#include "stdafx.h"
#include &lt; cstdio&gt;

using namespace System;

ref class Foo {
};

class Bar {
};

void Baz() {
	System::Console::WriteLine("In managed function.");
}

#pragma managed(push, off)
void Taz() {
	printf("In unmanaged function.\n");
}
#pragma managed(pop)

int main(array&lt;System::String ^&gt; ^args)
{
	Console::WriteLine(L"Hello World");
	return 0;
}</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c85074081376030-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-2">2</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-4">4</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-6">6</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-8">8</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-10">10</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-12">12</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-14">14</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-16">16</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-18">18</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-20">20</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-22">22</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-24">24</p><p class="crayon-num" data-line="crayon-5e42030c85074081376030-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85074081376030-26">26</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85074081376030-1"><span class="crayon-p">#include "stdafx.h"</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-2"><span class="crayon-p">#include &lt; cstdio&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-4"><span class="crayon-e">using </span><span class="crayon-t">namespace</span><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-6"><span class="crayon-e">ref</span><span class="crayon-h"></span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Foo</span><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-7"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-9"><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-e">Bar</span><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-10"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-12"><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Baz</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-13"><span class="crayon-h"></span><span class="crayon-v">System</span><span class="crayon-o">::</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">"In managed function."</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-14"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-16"><span class="crayon-p">#pragma managed(push, off)</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-17"><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">Taz</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-18"><span class="crayon-h"></span><span class="crayon-e">printf</span><span class="crayon-sy">(</span><span class="crayon-s">"In unmanaged function.\n"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-19"><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-20"><span class="crayon-p">#pragma managed(pop)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-22"><span class="crayon-t">int</span><span class="crayon-h"></span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-o">&lt;</span><span class="crayon-v">System</span><span class="crayon-o">::</span><span class="crayon-t">String</span><span class="crayon-h"></span><span class="crayon-o">^</span><span class="crayon-o">&gt;</span><span class="crayon-h"></span><span class="crayon-o">^</span><span class="crayon-v">args</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-23"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-24"><span class="crayon-h"></span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-i">L</span><span class="crayon-s">"Hello World"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-5e42030c85074081376030-25"><span class="crayon-h"></span><span class="crayon-st">return</span><span class="crayon-h"></span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85074081376030-26"><span class="crayon-sy">}</span></p></div></td></tr></tbody></table></div></div><p>When you decompile it, you can find class <code>Foo</code>:</p><div id="crayon-5e42030c85077401926025" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.class private auto ansi beforefieldinit Foo
	extends [mscorlib]System.Object
{
	// Methods
	.method public hidebysig specialname rtspecialname 
		instance void .ctor () cil managed 
	{
		// Method begins at RVA 0x10c0
		// Code size 7 (0x7)
		.maxstack 1

		IL_0000: ldarg.0
		IL_0001: call instance void [mscorlib]System.Object::.ctor()
		IL_0006: ret
	} // end of method Foo::.ctor

} // end of class Foo</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c85077401926025-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-2">2</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-4">4</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-6">6</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-8">8</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-10">10</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-12">12</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-14">14</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c85077401926025-16">16</p><p class="crayon-num" data-line="crayon-5e42030c85077401926025-17">17</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c85077401926025-1"><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-h"></span><span class="crayon-m">private</span><span class="crayon-h"></span><span class="crayon-e">auto </span><span class="crayon-e">ansi </span><span class="crayon-e">beforefieldinit </span><span class="crayon-e">Foo</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-2"><span class="crayon-e"></span><span class="crayon-r">extends</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-3"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-4"><span class="crayon-h"></span><span class="crayon-c">// Methods</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-5"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-m">public</span><span class="crayon-h"></span><span class="crayon-e">hidebysig </span><span class="crayon-e">specialname </span><span class="crayon-e">rtspecialname </span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-6"><span class="crayon-e"></span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-7"><span class="crayon-h"></span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-8"><span class="crayon-h"></span><span class="crayon-c">// Method begins at RVA 0x10c0</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-9"><span class="crayon-h"></span><span class="crayon-c">// Code size 7 (0x7)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-10"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h"></span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-12"><span class="crayon-h"></span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">ldarg</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-13"><span class="crayon-h"></span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">call </span><span class="crayon-e">instance </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-t">Object</span><span class="crayon-o">::</span><span class="crayon-sy">.</span><span class="crayon-e">ctor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c85077401926025-14"><span class="crayon-h"></span><span class="crayon-v">IL_0006</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-15"><span class="crayon-h"></span><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method Foo::.ctor</span></p><p class="crayon-line" id="crayon-5e42030c85077401926025-17"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of class Foo</span></p></div></td></tr></tbody></table></div></div><p>You can also find method <code>main</code>:</p><div id="crayon-5e42030c8507a441846409" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.method assembly static 
	int32 main (
		string[] args
	) cil managed 
{
	// Method begins at RVA 0x10ec
	// Code size 16 (0x10)
	.maxstack 1
	.locals (
		[0] int32
	)

	IL_0000: ldc.i4.0
	IL_0001: stloc.0
	IL_0002: ldstr "Hello World"
	IL_0007: call void [mscorlib]System.Console::WriteLine(string)
	IL_000c: ldc.i4.0
	IL_000d: stloc.0
	IL_000e: ldloc.0
	IL_000f: ret
} // end of method '&lt;Module&gt;'::main</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-2">2</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-4">4</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-6">6</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-8">8</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-10">10</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-12">12</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-14">14</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-16">16</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-18">18</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-5e42030c8507a441846409-20">20</p><p class="crayon-num" data-line="crayon-5e42030c8507a441846409-21">21</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8507a441846409-1"><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-e">assembly </span><span class="crayon-m">static</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-2"><span class="crayon-h"></span><span class="crayon-e">int32 </span><span class="crayon-e">main</span><span class="crayon-h"></span><span class="crayon-sy">(</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-3"><span class="crayon-h"></span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-i">args</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-4"><span class="crayon-h"></span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-5"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-6"><span class="crayon-h"></span><span class="crayon-c">// Method begins at RVA 0x10ec</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-7"><span class="crayon-h"></span><span class="crayon-c">// Code size 16 (0x10)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-8"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h"></span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-9"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-e">locals</span><span class="crayon-h"></span><span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-10"><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"></span><span class="crayon-i">int32</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-11"><span class="crayon-h"></span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-13"><span class="crayon-h"></span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">ldc</span><span class="crayon-sy">.</span><span class="crayon-v">i4</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-14"><span class="crayon-h"></span><span class="crayon-v">IL_0001</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">stloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-15"><span class="crayon-h"></span><span class="crayon-v">IL_0002</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ldstr</span><span class="crayon-h"></span><span class="crayon-s">"Hello World"</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-16"><span class="crayon-h"></span><span class="crayon-v">IL_0007</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">call </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-17"><span class="crayon-h"></span><span class="crayon-v">IL_000c</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">ldc</span><span class="crayon-sy">.</span><span class="crayon-v">i4</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-18"><span class="crayon-h"></span><span class="crayon-v">IL_000d</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">stloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-19"><span class="crayon-h"></span><span class="crayon-v">IL_000e</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-v">ldloc</span><span class="crayon-sy">.</span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507a441846409-20"><span class="crayon-h"></span><span class="crayon-v">IL_000f</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e42030c8507a441846409-21"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method '&lt;Module&gt;'::main</span></p></div></td></tr></tbody></table></div></div><p>And method <code>Baz</code>:</p><div id="crayon-5e42030c8507d471588083" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="readonly">.method assembly static 
	void modopt([mscorlib]System.Runtime.CompilerServices.CallConvCdecl)  Baz () cil managed 
{
	// Method begins at RVA 0x10d4
	// Code size 11 (0xb)
	.maxstack 1

	IL_0000: ldstr "In managed function."
	IL_0005: call void [mscorlib]System.Console::WriteLine(string)
	IL_000a: ret
} // end of method '&lt;Module&gt;'::Baz</textarea></p><div class="crayon-main"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-5e42030c8507d471588083-1"><span class="crayon-sy">.</span><span class="crayon-e">method </span><span class="crayon-e">assembly </span><span class="crayon-m">static</span><span class="crayon-h"></span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507d471588083-2"><span class="crayon-h"></span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-e">modopt</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Runtime</span><span class="crayon-sy">.</span><span class="crayon-v">CompilerServices</span><span class="crayon-sy">.</span><span class="crayon-v">CallConvCdecl</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">Baz</span><span class="crayon-h"></span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"></span><span class="crayon-e">cil</span><span class="crayon-h"></span><span class="crayon-e">managed</span><span class="crayon-h"></span></p><p class="crayon-line" id="crayon-5e42030c8507d471588083-3"><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507d471588083-4"><span class="crayon-h"></span><span class="crayon-c">// Method begins at RVA 0x10d4</span></p><p class="crayon-line" id="crayon-5e42030c8507d471588083-5"><span class="crayon-h"></span><span class="crayon-c">// Code size 11 (0xb)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507d471588083-6"><span class="crayon-h"></span><span class="crayon-sy">.</span><span class="crayon-i">maxstack</span><span class="crayon-h"></span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507d471588083-8"><span class="crayon-h"></span><span class="crayon-v">IL_0000</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ldstr</span><span class="crayon-h"></span><span class="crayon-s">"In managed function."</span></p><p class="crayon-line" id="crayon-5e42030c8507d471588083-9"><span class="crayon-h"></span><span class="crayon-v">IL_0005</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-e">call </span><span class="crayon-t">void</span><span class="crayon-h"></span><span class="crayon-sy">[</span><span class="crayon-v">mscorlib</span><span class="crayon-sy">]</span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-v">Console</span><span class="crayon-o">::</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-5e42030c8507d471588083-10"><span class="crayon-h"></span><span class="crayon-v">IL_000a</span><span class="crayon-o">:</span><span class="crayon-h"></span><span class="crayon-i">ret</span></p><p class="crayon-line" id="crayon-5e42030c8507d471588083-11"><span class="crayon-sy">}</span><span class="crayon-h"></span><span class="crayon-c">// end of method '&lt;Module&gt;'::Baz</span></p></div></td></tr></tbody></table></div></div><p>Class <code>Bar</code> and method <code>Taz</code> are unmanaged.</p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>