<!DOCTYPE html>
<html lang="en">
<head>
    <title>
GameTechDev/GTS-GamesTaskScheduler - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="GameTechDev/GTS-GamesTaskScheduler - linksfor.dev(s)"/>
    <meta property="article:author" content="Bret Alfieri"/>
    <meta property="og:description" content="A task scheduling framework designed for the needs of game developers. - GameTechDev/GTS-GamesTaskScheduler"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/GameTechDev/GTS-GamesTaskScheduler"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - GameTechDev/GTS-GamesTaskScheduler</title>
<div class="readable">
        <h1>GameTechDev/GTS-GamesTaskScheduler</h1>
            <div>by Bret Alfieri</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 22 Mar 2019</div>
        <p><a href="https://github.com/GameTechDev/GTS-GamesTaskScheduler">https://github.com/GameTechDev/GTS-GamesTaskScheduler</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="readme">
    
        

      <div>
        <article itemprop="text"><p><a href="https://github.com/GameTechDev/GTS-GamesTaskScheduler/blob/master"><img src="https://camo.githubusercontent.com/c0c8283b236aa0b29caf8c2a09297a056a544bfd/68747470733a2f2f696d672e736869656c64732e696f2f6d61696e74656e616e63652f7965732f323031392e737667" alt="maintained" data-canonical-src="https://img.shields.io/maintenance/yes/2019.svg"></a>
<a href="https://github.com/GameTechDev/GTS-GamesTaskScheduler/blob/master"><img src="https://camo.githubusercontent.com/311762166ef25238116d3cadd22fcb6091edab98/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d626c75652e737667" alt="license" data-canonical-src="https://img.shields.io/badge/License-MIT-blue.svg"></a>
<a href="https://github.com/GameTechDev/GTS-GamesTaskScheduler/blob/master"><img src="https://camo.githubusercontent.com/8bd787ae1d302e05aa3ecaf5062c11231912f8be/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f636f756e742f47616d65546563684465762f4754532d47616d65735461736b5363686564756c65722e737667" alt="language count" data-canonical-src="https://img.shields.io/github/languages/count/GameTechDev/GTS-GamesTaskScheduler.svg"></a>
<a href="https://github.com/GameTechDev/GTS-GamesTaskScheduler/blob/master"><img src="https://camo.githubusercontent.com/28d861143fc45da2c1ad9e7f8bab745e73eb01cc/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f746f702f47616d65546563684465762f4754532d47616d65735461736b5363686564756c65722e737667" alt="top language" data-canonical-src="https://img.shields.io/github/languages/top/GameTechDev/GTS-GamesTaskScheduler.svg"></a></p>

<h2>What it is?</h2>
<p>GTS is a light-weight, C++, experimental task scheduling framework designed with a "Bring Your Own Engine/Framework"
style. It consists of a work-stealing micro-scheduler and a persistent DAG macro-scheduler. It also incorporates
parallel containers, threading constructs, and debugging utilities.</p>
<h2>Why?</h2>
<ol>
<li>The need for a simple, light-weight, and engine friendly task scheduler.</li>
<li>The need for a framework that allows the game development community to experiment with different scheduling algorithms - easily.</li>
<li>A place to house state-of-the-art algorithms on task scheduling for games from both Intel and the community.</li>
<li>A place to learn about different task scheduling algorithms and parallel computing constructs.</li>
<li>Encourage games to become more parallel so they can compute more cool stuff!</li>
</ol>
<h2>How to build</h2>
<ol>
<li>Download premake 5.0 <a href="https://premake.github.io/" rel="nofollow">https://premake.github.io/</a> and place it in "premake/_scripts_"</li>
<li>In the "premake" folder, run the "gts.bat" file.</li>
<li>Move back to the root "gts" directory and there should be an "_build..." folder with the solution in it.</li>
</ol>
<h2>Tutorials/Examples</h2>
<ol>
<li>Download premake 5.0 <a href="https://premake.github.io/" rel="nofollow">https://premake.github.io/</a> and place it in "premake/_scripts_"</li>
<li>In the "premake" folder, run the "gts_examples.bat" file.</li>
<li>Move back to the root "gts" directory and there should be an "_build..." folder with the solution in it.</li>
<li>Example projects are numbered and should be read through in-order. Please issue anything that needs more explaination.</li>
</ol>
<p>(*Doxygen and more examples coming soon!)</p>
<h2>Features</h2>
<p>NOTE: * indicates you can replace the implementation with your own.</p>
<h3>Micro-scheduler</h3>
<ol>
<li>Help-first work-stealing</li>
<li>Fork-join with nested parallelism</li>
<li>Supports arbitrary DAGs</li>
<li>Blocking joins</li>
<li>Continuation joins</li>
<li>Scheduler by-passing and task recycling optimizations</li>
<li>Task affinities. (Force a task to run on a specific thread.)</li>
<li>Task priorities with starvation resistance</li>
<li>Scheduler partitioning</li>
<li>Task execution isolation</li>
</ol>
<h4>Patterns</h4>
<ol>
<li>Parallel for</li>
<li>Parallel reduce</li>
<li>(Parallel sort) - coming soon!</li>
<li>(Parallel radix sort) - coming soon!</li>
<li>(Parallel scan) - coming soon!</li>
<li>Data partitioners</li>
<li>1D/2D/3D iteration ranges</li>
</ol>
<h3>Macro-scheduler (*** Work-in-progress ***)</h3>
<ol>
<li>Persistent, DAG structures</li>
<li>Extendible for custom scheduler implementations/experimentations</li>
<li>Allows multiple workloads to be attached to a task for heterogeneous scheduling</li>
</ol>
<h3>Containers</h3>
<h4>Parallel</h4>
<ol>
<li>Queue single-producer single-consumer</li>
<li>Queue single-producer multi-consumer</li>
<li>Queue multi-producer single-consumer</li>
<li>Queue multi-producer multi-consumer</li>
<li>Distributed allocator</li>
<li>(Hash table) - coming soon!</li>
</ol>
<h4>Serial</h4>
<ol>
<li>Aligned allocator</li>
<li>Ring buffer</li>
<li>Vector*</li>
</ol>
<h3>Platform</h3>
<ol>
<li>Assert*</li>
<li>Atomics*</li>
<li>Threads and synchronization*</li>
<li>OS memory*</li>
<li>Machine specific definitions/wrappers*</li>
</ol>
<h3>Analysis</h3>
<ol>
<li>Analyzer to gather stats for scheduling algorithm</li>
<li>Concurrent logger for per thread logging (output redirection*)</li>
<li>Instrumenter*</li>
</ol>
<h2>Known issues</h2>
<ol>
<li>Code comments may be incomplete, this is a work-in-progress</li>
<li>Testing is on-going and mostly complete. If you encounter issues please let us know.</li>
<li>Comments may contain spelling and grammar errors.</li>
<li>Only works on Windows with VS2015 and VS2017 (MSVC and Clang). Cross platform/compiler code is in the works!</li>
</ol>
<h2>Example</h2>
<p>A parallel-for that increments each element in an array.</p>
<p>Convenient version for simple cases:</p>
<div><pre><span><span>//</span> Create an array of 0s.</span>
<span>uint32_t</span> <span>const</span> elementCount = <span>1</span> &lt;&lt; <span>16</span>;
gts::Vector&lt;<span>char</span>&gt; <span>vec</span>(elementCount, <span>0</span>);

<span><span>//</span> Make a parallel-for object for this scheduler. We do this because</span>
<span><span>//</span> there can be multiple scheduler objects.</span>
ParallelFor <span>parallelFor</span>(taskScheduler);

<span><span>//</span> Similar to std::for_each.</span>
<span>parallelFor</span>(vec.begin(), vec.end(), [](<span>auto</span> iter) { (*iter)++; });</pre></div>
<p>Complex version for times when full control is needed:</p>
<div><pre><span>size_t</span> <span>const</span> elementCount = <span>1</span> &lt;&lt; <span>16</span>;

<span><span>//</span> Create an array of 0s.</span>
gts::Vector&lt;<span>char</span>&gt; <span>vec</span>(<span>0</span>, elementCount);

<span><span>//</span> Make a parallel-for object for this scheduler.</span>
ParallelFor <span>parallelFor</span>(taskScheduler);

<span><span>//</span> The partitioner determines how the data in BlockedRange1d is divided</span>
<span><span>//</span> up amongst all the worker threads. The AdaptivePartitioner type only</span>
<span><span>//</span> divides when other worker threads need more work.</span>
<span>auto</span> partitionerType = AdaptivePartitioner();

<span><span>//</span> Since the partitioner is adaptive, a block size of 1 gives the paritioner</span>
<span><span>//</span> full control over division.</span>
<span>size_t</span> <span>const</span> blockSize = <span>1</span>;

<span>parallelFor</span>(

    <span><span>//</span> The 1-D iteration range parallel-for will iterate over.</span>
    BlockedRange1d&lt;gts::Vector&lt;<span>char</span>&gt;::iterator&gt;(vec.begin(), vec.end(), blockSize),

    <span><span>//</span> The lambda that parallel-for will map to each block of the range.</span>
    [](BlockedRange1d&lt;gts::Vector&lt;<span>char</span>&gt;::iterator&gt;&amp; range, <span>void</span>* pUserData, TaskContext <span>const</span>&amp;)
    {
        <span><span>//</span> For each item in the block, increment the value.</span>
        <span>for</span> (<span>auto</span> iter = range.<span>begin</span>(); iter != range.<span>end</span>(); ++iter)
        {
            (*iter)++;
        }
    },

    <span><span>//</span> The partitioner object.</span>
    partitionerType,
    
    <span><span>//</span> No user data.</span>
    <span>nullptr</span>
);</pre></div>
<h2>References</h2>
<ol>
<li><a href="https://www.threadingbuildingblocks.org/" rel="nofollow">https://www.threadingbuildingblocks.org/</a></li>
<li><a href="http://supertech.csail.mit.edu/papers/steal.pdf" rel="nofollow">http://supertech.csail.mit.edu/papers/steal.pdf</a></li>
<li><a href="https://www.cs.cmu.edu/~guyb/papers/locality2000.pdf" rel="nofollow">https://www.cs.cmu.edu/~guyb/papers/locality2000.pdf</a></li>
<li><a href="https://arxiv.org/abs/1806.11128" rel="nofollow">https://arxiv.org/abs/1806.11128</a></li>
<li><a href="https://www.cse.wustl.edu/~kunal/resources/Papers/nabbit.pdf" rel="nofollow">https://www.cse.wustl.edu/~kunal/resources/Papers/nabbit.pdf</a></li>
</ol>
<h2>Contribute</h2>
<h3>Test Build</h3>
<ol>
<li>Download premake 5.0 <a href="https://premake.github.io/" rel="nofollow">https://premake.github.io/</a> and place it in "premake/_scripts_".</li>
<li>Run "git submodules update --init" to pull in googletest.</li>
<li>In the "premake" folder, run the "gts_unit_test.bat" file.</li>
<li>Move back to the root "gts" directory and there should be an "_build..." folder with the test solution in it.</li>
</ol>
<h3>Running Test</h3>
<p>All tests run as a post-build step. Any failing tests will fail the build.</p>
<h3>Licencing</h3>
<p>Contributors of new files should add a copyright header at the top of every new source code
file with their copyright along with the MIT licensing stub.</p>
<h3>Formatting</h3>
<p>Please format like the existing code.</p>
</article>
      </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>