<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Kestrel server does not get grade A in SSL tests because it has no cipher suit preference &#xB7; Issue #30767 &#xB7; dotnet/runtime &#xB7; GitHub -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Kestrel server does not get grade A in SSL tests because it has no cipher suit preference · Issue #30767 · dotnet/runtime · GitHub</h1><div><div id="" class="d-block comment-body markdown-body  js-comment-body"><p><em>From <a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/ChrML/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ChrML">@ChrML</a> on Thursday, September 5, 2019 7:09:29 AM</em></p><h3>Description</h3><p>From ASP Core 3.0 preview6 and newer it is now possible to get a grade B, instead of a previous grade F, on the SSL test (<a rel="nofollow" href="https://www.ssllabs.com/ssltest/">https://www.ssllabs.com/ssltest/</a>). Because from 3.0 the insecure cipher suits are now disabled by default.</p><p>But still in 3.0-preview8, the Kestrel server does not have any cipher suit preference. This caps the SSL test grade to B instead of A. Grade A servers are regarded the most secure servers.</p><h3>Describe the solution you'd like</h3><p>The server should prefer the "Perfect Forward Secrecy" compliant cipher suits (ECDHE) over the weaker cipher suits.</p><h3>Additional context</h3><p>Here is the SSL report from the cipher suit chapter (on a 3.0-preview8 application):</p><blockquote><h2>TLS 1.2 (server has no preference)</h2><p>TLS_RSA_WITH_AES_128_CBC_SHA (0x2f) WEAK 128<br>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA (0xc013) ECDH secp521r1 (eq. 15360 bits RSA) FS WEAK 128<br>TLS_RSA_WITH_AES_128_CBC_SHA256 (0x3c) WEAK 128<br>TLS_RSA_WITH_AES_128_GCM_SHA256 (0x9c) WEAK 128<br>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 (0xc027) ECDH secp521r1 (eq. 15360 bits RSA) FS WEAK 128<br>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (0xc02f) ECDH secp521r1 (eq. 15360 bits RSA) FS 128<br>TLS_RSA_WITH_AES_256_CBC_SHA (0x35) WEAK 256<br>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA (0xc014) ECDH secp521r1 (eq. 15360 bits RSA) FS WEAK 256<br>TLS_RSA_WITH_AES_256_CBC_SHA256 (0x3d) WEAK 256<br>TLS_RSA_WITH_AES_256_GCM_SHA384 (0x9d) WEAK 256<br>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 (0xc028) ECDH secp521r1 (eq. 15360 bits RSA) FS WEAK 256<br>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (0xc030) ECDH secp521r1 (eq. 15360 bits RSA) FS 256<br>TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 (0xcca8) ECDH secp521r1 (eq. 15360 bits RSA) FS 256</p></blockquote><p>Here is the description from SSL labs why the Kestrel server is capped to grade B:</p><blockquote><h2>Penalty for not using forward secrecy (B)</h2><p>Forward secrecy (FS) also known as perfect forward secrecy (PFS), is a property of secure communication protocols in which compromises of long-term keys does not compromise past session keys. Forward secrecy protects past sessions against future compromises of private key. The very popular RSA key exchange doesn’t provide forward secrecy. You need to support and prefer ECDHE suites in order to enable forward secrecy with modern web browsers.</p></blockquote><blockquote><p>SSL Labs will start penalizing servers that don’t support forward secrecy; Grade will be capped to B. We will not penalize sites that use suites without forward secrecy provided they are never negotiated with clients that can do better.</p></blockquote><p>Simply making the server prefer the existing ECDHE cipher suits over the weak cipher suits will suffice for getting a grade A.</p><p><em>Copied from original issue: <a class="issue-link js-issue-link" data-error-text="Failed to load issue title" data-id="489569189" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/aspnetcore/issues/13700" data-hovercard-type="issue" data-hovercard-url="/dotnet/aspnetcore/issues/13700/hovercard" href="https://github.com/dotnet/aspnetcore/issues/13700">dotnet/aspnetcore#13700</a></em></p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>