<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Announcing Entity Framework Core 3.0 Preview 8 and Entity Framework 6.3 Preview 8 -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Announcing Entity Framework Core 3.0 Preview 8 and Entity Framework 6.3 Preview 8</h1><div><div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://secure.gravatar.com/avatar/c16238388fe24348cb8d7c4cf974bb7b?s=58&amp;d=mm&amp;r=g" width="58" height="58" alt="Avatar" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 photo avatar-default"><p>Diego</p></div></div></div><p>August 13th, 2019</p><p>The Preview 8 versions of the&nbsp;<a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/3.0.0-preview8.19405.11">EF Core 3.0 package</a>&nbsp;and the&nbsp;<a href="https://www.nuget.org/packages/EntityFramework/6.3.0-preview8-19405-04">EF 6.3 package</a>&nbsp;are now available for download from&nbsp;<a href="https://www.nuget.org/">nuget.org</a>.</p><p>New previews of <a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-0-preview-8/">.NET Core 3.0</a> and <a href="https://devblogs.microsoft.com/aspnet/asp-net-core-and-blazor-updates-in-net-core-3-0-preview-8/">ASP.NET Core 3.0</a> are also available today.</p><p><strong>Please install these previews to validate that all the functionality required by your applications is available and works correctly.&nbsp;</strong></p><p><strong>Please report any issues you find as soon as possible to either the&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/new">EF Core issue tracker</a>&nbsp;or the&nbsp;<a href="https://github.com/aspnet/EntityFramework6/issues/new">EF 6 issue tracker</a>&nbsp;on GitHub.</strong></p><p><strong>At this point, we are especially interested in hearing about any unexpected issues blocking you from upgrading to the new releases, but you are also welcome to try new functionality and provide general feedback.</strong></p><h2 id="what-s-new-in-ef-core-30">What’s new in EF Core 3.0</h2><p>Preview 8 includes&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/issues?q=is%3Aissue+milestone%3A3.0.0-preview8+is%3Aclosed">fixes for 68 issues</a>&nbsp;that we resolved since Preview 7. Here are a few highlights:</p><ul><li>Some functionality that we had temporarily disabled while working on our new LINQ implementation is now restored. For example, compiling queries explicitly is now possible, and owned entity types are once again automatically included in query results.</li><li>Several existing and new APIs across EF Core have been tweaked as a result of API reviews.</li><li>Numerous APIs required by providers have been made public.</li><li>The new interception feature has been enhanced to allow intercepting&nbsp;<code>DbCommand</code>&nbsp;creation.</li><li><code>KeyAttribute</code>&nbsp;is now scaffolded even if EF Core won’t use it, for example for composite keys (contributed by&nbsp;<a href="https://github.com/ErikEJ">Erik Ejlskov Jensen</a>).</li><li>Various improvements were made to the scaffolding of comments from SQL Server database objects (also contributed by&nbsp;<a href="https://github.com/ErikEJ">Erik Ejlskov Jensen</a>).</li><li>Support for scaffolding of views was extended to SQLite (also contributed by&nbsp;<a href="https://github.com/ErikEJ">Erik Ejlskov Jensen</a>).</li><li><code>EF.Functions.IsDate()</code>&nbsp;was added for SQL Server (contributed by&nbsp;<a href="https://github.com/ralmsdeveloper">Rafael Almeida</a>).</li><li>The Cosmos DB provider was upgraded to use the&nbsp;<a href="https://www.nuget.org/packages/Microsoft.Azure.Cosmos/3.0.0">3.0 RTM version of the Azure Cosmos SDK</a>.</li><li>The SQL Server provider was upgraded to a newer preview version of&nbsp;<a href="https://www.nuget.org/packages/Microsoft.Data.SqlClient/1.0.19189.1-Preview">Microsoft.Data.SqlClient</a>.</li></ul><p>Most of the major pieces of the new EF Core LINQ implementation are now in place. However, in Preview 8 the functionality of the in-memory provider is still very limited, and global query filters are still not correctly applied to navigation properties. The fix for the latter is available in daily builds, as well as fixes for many other issues.</p><h3><a id="user-content-consider-installing-daily-builds" class="anchor" href="https://github.com/microsoft/dotnet-blog/blob/99d0831861290ded4592c9a16a973050b96bd98f/2019/08-Aug/ef-core-3-preview8/ef-core-3-preview8.md#consider-installing-daily-builds" aria-hidden="true"></a>Consider installing daily builds</h3><p>In fact,&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/milestone/42?closed=1">we have already fixed more than 50 issues</a>&nbsp;that aren’t included in Preview 8, and&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/issues?q=is%3Aopen+is%3Aissue+milestone%3A3.0.0">we are tracking several more</a>&nbsp;to be fixed before RTM.</p><p>Given that we are fixing issues very rapidly, we recommend switching to a daily build to verify the latest fixes.</p><p>Detailed instructions to install daily builds, including the necessary NuGet feeds, can be found&nbsp;in the <a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">How to get daily builds of ASP.NET Core</a> article.</p><h3 id="common-workarounds-for-linq-queries">Common workarounds for LINQ queries</h3><p>The LINQ implementation in EF Core 3.0 is designed to work very differently from the one used in previous versions of EF Core, and in some areas, it’s still a work in progress. For these reasons, you are likely to run into issues with LINQ queries, especially when upgrading existing applications. Here are some workarounds that might help you get things working:</p><ul><li><strong>Try a&nbsp;<a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">daily build</a></strong> (as previously mentioned) to confirm that you aren’t hitting an issue that has already been fixed.</li><li><strong>Switch to client evaluation explicitly:</strong>&nbsp;If your query filters data based on an expression that cannot be translated to SQL, you may need to switch to client evaluation explicitly by inserting a call to either&nbsp;<code>AsEnumerable()</code>,&nbsp;<code>AsAsyncEnumerable()</code>,&nbsp;<code>ToList()</code>, or&nbsp;<code>ToListAsync()</code>&nbsp;in the middle of the query. For example, the following query will no longer work in EF Core 3.0 because one of the predicates in the&nbsp;<em>where</em> clause requires client evaluation:<div class="highlight highlight-source-cs"><pre class="">var specialCustomers = context.Customers
  .Where(c =&gt; c.Name.StartsWith(n) &amp;&amp; IsSpecialCustomer(c));
</pre></div><p>But if you know it is reasonable to process part of the filter on the client, you can rewrite the query as:</p><div class="highlight highlight-source-cs"><pre>   var specialCustomers = context.Customers
     .Where(c =&gt; c.Name.StartsWith(n))
     .AsEnumerable() // Start using LINQ to Objects (switch to client evaluation)
     .Where(c =&gt; IsSpecialCustomer(c));
</pre></div><p>Remember that this is by-design: In EF Core 3.0,&nbsp;<a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes#linq-queries-are-no-longer-evaluated-on-the-client">LINQ operations that cannot be translated to SQL are no longer automatically evaluated on the client</a>.</p></li><li><strong>Use raw SQL queries:</strong>&nbsp;If some expression in your LINQ query is not translated correctly (or at all) to SQL, but you know what translation you would want to have generated, you may be able to work around the issue by executing your own SQL statement using the&nbsp;<code>FromSqlRaw()</code>&nbsp;or&nbsp;<code>FromSqlInterpolated()</code>&nbsp;methods.Also make sure an issue exists in&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/issues">our issue tracker on GitHub</a>&nbsp;to support the translation of the specific expression.</li></ul><h3 id="breaking-changes">Breaking changes</h3><p>All breaking changes in this release are&nbsp;listed in the <a href="https://docs.microsoft.com/ef/core/what-is-new/ef-core-3.0/breaking-changes">Breaking Changes in EF Core 3.0</a> article. We keep the list up to date on every preview, with the most impactful changes near the top of the list, to make it easier for you to react.</p><h3 id="obtaining-the-preview-8-packages">Obtaining the Preview 8 packages</h3><p>EF Core 3.0 is distributed exclusively as NuGet packages. As usual, add or upgrade the runtime to preview 8 via the NuGet user interface, the Package Manager Console in Visual Studio, or via the&nbsp;<code>dotnet add package</code> command. In all cases, include the option to allow installing pre-release versions. For example, you can execute the following command to install the SQL Server provider:</p><div class="highlight highlight-text-shell-session"><pre>dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 3.0.0-*
</pre></div><p>With .NET Core 3.0, the&nbsp;<code>dotnet ef</code>&nbsp;command-line tool is no longer included in the .NET Core SDK. Before you can execute EF Core migration or scaffolding commands, you’ll have to install it as either a global or local tool. Due to limitations in&nbsp;<code>dotnet tool install</code>, installing preview tools requires specifying at least part of the preview version on the installation command. For example, to install the 3.0 Preview 8 version of&nbsp;<code>dotnet ef</code>&nbsp;as a global tool, execute the following command:</p><div class="highlight highlight-text-shell-session"><pre>dotnet tool install --global dotnet-ef --version 3.0.0-*
</pre></div><h2 id="whats-new-in-ef-63-preview-8">What’s new in EF 6.3 Preview 8</h2><p>With the added ability to execute migration commands against .NET Core projects in Visual Studio, most of the work planned for the EF 6.3 package has been completed. We are now focused on fixing any bugs that arise.</p><p>As with EF Core, any bug fixes that happened after we branched for Preview 8 are available in&nbsp;<a href="https://github.com/aspnet/AspNetCore/blob/master/docs/DailyBuilds.md">our daily builds</a>.</p><h3 id="how-to-work-with-edmx-files-in-net-core-projects">How to work with EDMX files in .NET Core projects</h3><p>On the tooling side, we plan to release an updated EF6 designer in an upcoming update of Visual Studio 2019 which will work with projects that target .NET Core (tracked in issue&nbsp;<a href="https://github.com/aspnet/EntityFramework6/issues/883">#883</a>).</p><p>Until this new version of the designer is available, we recommend that you work with your EDMX files inside projects that target .NET Framework. You can then add the EDMX file and the generated classes for the entities and the <code>DbContext</code> to the .NET Core 3.0 or .NET Standard 2.1 project as linked files. For example, the project file for the .NET Core project can include the linked files like this:</p><p>Note that the EDMX file is linked with the <code>EntityDeploy</code> build action. This is a special MSBuild task (now included in the EF 6.3 package) that takes care of adding the EF model into the target assembly as embedded resources (or copying it as files in the output folder, depending on the setting on the Metadata Artifact Processing setting in the EDMX). For more details on how to get this set up, see our <a href="https://aka.ms/EdmxDotNetCoreSample">EDMX .NET Core sample</a>.</p><p>You can choose to copy the files instead of linking them, but keep in mind that due to a bug in current builds of Visual Studio, copying the files from the .NET Framework project to the .NET Core project within Solution Explorer may cause hangs, so it is better to copy the files from the command line.</p><p>We are also seeking feedback and possible contributions to enable a cross-platform command line experience for migrations commands, similar to&nbsp;<code>dotnet ef</code>&nbsp;but for EF6 (tracked in issue&nbsp;<a href="https://github.com/aspnet/EntityFramework6/issues/1053">#1053</a>). If you would like to see this happen, or if you would like to contribute to it, please vote or comment on the issue.</p><h2 id="weekly-status-updates">Weekly status updates</h2><p>If you’d like to track our progress more closely, we now publish weekly status updates to&nbsp;<a href="https://github.com/aspnet/EntityFrameworkCore/issues/15403">GitHub</a>. We also post these status updates to our Twitter account,&nbsp;<a href="https://twitter.com/efmagicunicorns">@efmagicunicorns</a>.</p><h2 id="thank-you">Thank you</h2><p>As usual, thank you for trying our preview bits, and for all the bug reports and contributions that will help make EF Core 3.0 and EF 6.3 much better releases.</p><div class="authorinfoarea"><div><p>Program Manager ,&nbsp;.NET Data Access</p><p><strong>Follow Diego</strong>&nbsp;&nbsp;&nbsp;<a class="no-underline stayinformed" aria-label="Diego Vega Twitter profile" target="_blank" href="https://twitter.com/divega"></a><a class="no-underline stayinformed" aria-label="Diego Vega LinkedIn profile" target="_blank" href="https://linkedin.com/in/dbvega"><i class="fa fa-linkedin"></i></a><a class="no-underline stayinformed" aria-label="Diego Vega GitHub profile" target="_blank" href="https://github.com/divega"><i class="fa fa-github"></i></a><a class="no-underline stayinformed" aria-label="Diego Vega Stackoverflow profile" target="_blank" href="https://stackoverflow.com/users/393050/divega"><i class="fa fa-stack-overflow"></i></a><a class="no-underline stayinformed hvr-pop" aria-label="Diego Vega RSS Feed" target="_blank" href="https://devblogs.microsoft.com/dotnet/author/divegamicrosoft-com/feed/"></a></p></div></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>