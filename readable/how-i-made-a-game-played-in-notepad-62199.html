<!DOCTYPE html>
<html lang="en">
<head>
    <title>
How I made a game played in Notepad - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="How I made a game played in Notepad - linksfor.dev(s)"/>
    <meta property="article:author" content="Posted February 9, 2020 by Sheepolution&#x9;&#x9;&#x9;&#x9;&#x9;                    under Gamedev"/>
    <meta property="og:description" content="I made a game called And yet it hurt."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://sheepolution.com/blog/gamedev/how-i-made-a-game-played-in-notepad/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - How I made a game played in Notepad</title>
<div class="readable">
        <h1>How I made a game played in Notepad</h1>
            <div>by Posted February 9, 2020 by Sheepolution&#x9;&#x9;&#x9;&#x9;&#x9;                    under Gamedev</div>
            <div>Reading time: 12-15 minutes</div>
        <div>Posted here: 28 May 2020</div>
        <p><a href="https://sheepolution.com/blog/gamedev/how-i-made-a-game-played-in-notepad/">https://sheepolution.com/blog/gamedev/how-i-made-a-game-played-in-notepad/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div id="content">
				
				<div id="inner-content">
					
					<div id="main" role="main">
						
						
							<article id="post-105" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">
				                
				                

				                <header>
									
									
								</header> 				                
								<section itemprop="articleBody">
  
  <p>I made a game called And yet it hurt.</p>
<p><iframe width="640" height="360" src="https://www.youtube.com/embed/qcdMVoE4mJM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>You can <a href="https://sheepolution.itch.io/and-yet-it-hurt" target="_blank">download it here</a>.</p>
<p>You can find the <a href="https://github.com/Sheepolution/and-yet-it-hurt" target="_blank">source on Github</a>.</p>
<p><span>It all started in 2017 with a simple question: “What if there was a game in Notepad?”</span></p>
<p><span>I chuckled to myself at the silly idea. At least that’s what I assume. It has been 3 years since after all. After thinking about how this would work, I realized that this would totally be possible, and challenged myself to make this game.</span></p>
<p><span>With a normal game, you press a button and the game will act on it. Pressing A makes Mario jump. It’s a matter of receiving and responding. The game receives input and responds with output. With the Notepad game, the receiving would be that the player made a change to a file, and the response would be to change the file. So the player selects an option and the game will show the result of that selection. For this, the game keeps track of the last time a file was saved. If the time has changed, the game reads the contents of the file and can then write new data to the file. There’s a small problem though. Microsoft’s Notepad doesn’t check if the file has been updated. The player would have to save the file, close it, and then reopen it. It would still be possible to make a game with this, it just wouldn’t be very fun. I had to find an alternative to Notepad.</span></p>
<p><span>I can understand if you’re disappointed now, reading that the finished game is not actually in Microsoft’s Notepad. Let me be clear though, the finished game can be played in&nbsp;MS Notepad. It’s just very inconvenient. I chose the route that made this project less </span><span><em><span>cool</span></em></span><span>, in trade for a game that is actually fun to play.</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/actual_notepad.gif"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/actual_notepad.gif" alt="actual_notepad" width="969" height="499"></a></p>
<h2><span>Alternative</span></h2>
<p><span>So I needed to find an alternative text editor for my game. The only requirement would be the ability to automatically refresh the files, though later on, you will find that another feature was in play. My first thought went out to code editors like Notepad++ and Sublime Text. But besides the fact that they don’t look like MS Notepad, which takes away the charm of it all, it would ask the player if they want to refresh the file. Though it’s a step forward from requiring you to close and reopen the file, it’s disruptive from the gameplay. I needed it to update the file automatically. It was then that I found the software called Notepad2, and it was almost perfect. Notepad2 can be configured to look very much like MS Notepad, and it checks for file changes. But, just like with Notepad++ and Sublime Text, it would ask the player if they want to refresh the file. Luckily Notepad2 is open source, so I was able to make it perfect.</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/notepad2_dialogue.png"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/notepad2_dialogue.png" alt="notepad2_dialogue" width="410" height="156"></a></p>
<p><span>Notepad2 is written in C, a language that I’ve played around with a few times, but I’m far from an expert. This is not a big deal, as most programming languages are very similar. An experienced Javascript programmer should have no trouble reading and understanding the general idea of C code. The real challenge was to understand Notepad2’s source code and to be able to find and edit the changes that I wanted. A good start is the text in the dialogue “The current file has been modified by an external program. Reload?”. This is set to a variable, and the variable is used as argument for the dialogue function. And so I found it.</span></p>
<pre lang="c"><span>if</span> ((<span>iFileWatchingMode</span> <span>==</span> <span>2</span> <span>&amp;&amp;</span> <span>!</span><span>bModified</span> <span>&amp;&amp;</span> <span>iEncoding</span> <span>==</span> <span>iOriginalEncoding</span>) <span>||</span>
 &nbsp; &nbsp; &nbsp; &nbsp;<span>MsgBox</span>(<span>MBYESNO</span>,<span>IDS_FILECHANGENOTIFY</span>) <span>==</span> <span>IDYES</span>) {</pre>
<p><span>This code checks if the file’s contents are still the same, and if not it will open the dialogue and check if the user clicked Yes. All I had to do was replace </span><span spellcheck="false"><code>MsgBox(MBYESNO,IDS_FILECHANGENOTIFY) == IDYES</code></span><span> with </span><span spellcheck="false"><code>TRUE</code></span><span> and now it automatically reloads the file. With this feature unlocked, I basically created an ASCII based renderer. The next job was to create an engine around this.</span></p>
<h2><span>Drawing</span></h2>
<p><span>The game is made with </span><span><a spellcheck="false" href="https://love2d.org/"><span>LÖVE</span></a></span><span>. An open source framework for 2D games in Lua, that I’ve used for many years and wrote a </span><span><a spellcheck="false" href="https://sheepolution.com/learn/book/contents"><span>tutorial</span></a></span><span> about. For this game, I mostly used LÖVE’s filesystem module, which provides everything I needed. Normally with a framework like LÖVE you would create an image object, and then draw that image object on the screen. I wanted to be able to do the same, except with my text-file and with ASCII art. I started with a house and a bird, and the goal was for the bird to fly across the file. I used art that I found on </span><span spellcheck="false"><a href="https://asciiart.website/">https://asciiart.website/</a></span><span>, but note that the art in the game is all original (except the fonts).</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/house.png"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/house.png" alt="house" width="441" height="415"></a>&nbsp;and&nbsp;&nbsp; &nbsp;<a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/bird.png"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/bird.png" alt="bird" width="178" height="86"></a></p>
<p><span>Loading the art is really just reading the file’s contents.</span></p>
<pre lang="lua"><span>house</span> = <span>love.filesystem.read</span>(<span>"art_house.txt"</span>)
<span>bird</span> = <span>love.filesystem.read</span>(<span>"art_bird.txt"</span>)</pre>
<p><span>The house would be used as background, so I start with writing the house to the “screen”. The screen, in this case, will be </span><span spellcheck="false"><code>home.txt</code></span><span>.</span></p>
<pre lang="lua"><span>love.filesystem.write</span>(<span>"home.txt"</span>, <span>house</span>)</pre>
<p><span>Now for the bird, I wanted to be able to do something like this:</span></p>
<pre lang="lua"><span>local</span> <span>x</span>, <span>y</span> = <span>20</span>, <span>40</span>
<span>drawArt</span>(<span>bird</span>, <span>x</span>, <span>y</span>)</pre>
<p><span>In this case, </span><span spellcheck="false"><code>x</code></span><span> would be the column, </span><span spellcheck="false"><code>y</code></span><span> would be the line number. I started by splitting the screen and the bird into lists of lines.</span></p>
<pre lang="lua">
<span>screen</span> = <span>love.filesystem.read</span>(<span>"home.txt"</span>)
​

<span>screen_lines</span> = {}
​


<span>for</span> <span>line</span> <span>in</span> (<span>screen</span> .. <span>"\n"</span>):<span>gmatch</span>(<span>"(.-)\n"</span>) <span>do</span>
 &nbsp; &nbsp;<span>table.insert</span>(<span>screen_lines</span>, <span>line</span>)
<span>end</span></pre>
<p><span>I did this for the bird as well. Now I needed to paste the lines of the bird on top of the lines of the house. To break it down in steps</span></p>
<ol>
<li>Find the line where the birds need to be drawn.</li>
<li><span>Get the first part of the line from start to </span><span spellcheck="false"><code>x</code></span><span>.</span></li>
<li><span>Get the second part of the line from x + the length of the bird art to the end of the line.</span></li>
<li><span>Create a new line with the first part, the line of the bird, and the second part.</span></li>
<li><span>Repeat for all lines.</span></li>
</ol>
<p><span>In code this would look something like this:</span></p>
<pre lang="lua"><span>function</span> <span>drawArt</span>(<span>art</span>, <span>x</span>, <span>y</span>)
    <span>art_lines</span> = <span>getLines</span>(<span>art</span>)
​
    
    <span>for</span> <span>i</span>=<span>1</span>, #<span>screen_lines</span> <span>do</span>
        <span>if</span> <span>i</span> == <span>y</span> <span>then</span>
            <span>for</span> <span>j</span>=<span>1</span> ,#<span>art_lines</span> <span>do</span>
                
                <span>local</span> <span>first_part</span> = <span>screen_lines</span>[<span>i</span>]:<span>sub</span>(<span>1</span>, <span>x</span> - <span>1</span>)
                <span>local</span> <span>second_part</span> = <span>screen_lines</span>[<span>i</span>]:<span>sub</span>(<span>x</span> + #<span>art_lines</span>[<span>j</span>], #<span>screen_lines</span>[<span>i</span>])
                <span>screen_lines</span>[<span>i</span>] = <span>first_part</span> .. <span>art_lines</span>[<span>i</span>] .. <span>second_part</span>
            <span>end</span>
        <span>end</span>
    <span>end</span>
<span>end</span></pre>
<p><span>And with that, I was able to make this:</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/moving_bird.gif"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/moving_bird.gif" alt="moving_bird" width="801" height="509"></a></p>
<p><span>You might notice that the bird has this rectangular shape. This is because it copies the whitespace as well. To fix this I count the number of spaces at the start of the line and add this to the position, so that only the art gets drawn.</span></p>
<pre lang="lua">
<span>local</span> <span>spaces</span> = <span>art_lines</span>[<span>j</span>]:<span>match</span>(<span>"(%s*)"</span>)

<span>art_lines</span>[<span>i</span>] = <span>art_lines</span>[<span>i</span>]:<span>sub</span>(#<span>spaces</span> + <span>1</span>, #<span>art_lines</span>[<span>i</span>])
<span>local</span> <span>first_part</span> = <span>screen_lines</span>[<span>i</span>]:<span>sub</span>(<span>1</span>, <span>x</span> + #<span>spaces</span> - <span>1</span>)
<span>local</span> <span>second_part</span> = <span>screen_lines</span>[<span>i</span>]:<span>sub</span>(<span>x</span> + #<span>spaces</span> + #<span>art_lines</span>[<span>j</span>], #<span>screen_lines</span>[<span>i</span>])
<span>screen_lines</span>[<span>i</span>] = <span>first_part</span> .. <span>art_lines</span>[<span>i</span>] .. <span>second_part</span></pre>
<p><span>Much better!</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/better_moving_bird.gif"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/better_moving_bird.gif" alt="better_moving_bird" width="593" height="503"></a></p>
<h2><span>Animation</span></h2>
<p><span>I started adding more features, like animation.</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/animation.gif"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/animation.gif" alt="animation" width="498" height="521"></a></p>
<p><span>Each frame gets this </span><span spellcheck="false"><code>{{F}}</code></span><span> tag. Then when reading the file’s content I split it based on that tag to get each frame. After that, it’s animating like what you would normally do. Create a timer, and draw a frame based on the timer.</span></p>
<pre lang="">{{F}}
_ &nbsp; _ 
 'v'
{{F}}
 &nbsp; &nbsp; &nbsp;
--v--
{{F}}
 &nbsp; &nbsp; &nbsp;
_/v\_</pre>
<p><span>I was also able to implement typewriter text and created separate components like the screen, inventory and option box that I could all stick together. There was still a problem. How can the game know if a file has been opened? This is the other feature I was talking about earlier. In the source of Notepad2 I made it so that a file will be saved right after you open it. Then again it checks if the file’s last save time has been changed, and if so the game knows that the file has been opened and can act on it.</span></p>
<pre lang="c">

<span>if</span> (<span>!</span><span>bNew</span> <span>&amp;&amp;</span> <span>!</span><span>bReload</span>) {
 &nbsp; &nbsp;<span>FileSave</span>(<span>TRUE</span>,<span>FALSE</span>,<span>FALSE</span>,<span>FALSE</span>);
}</pre>
<p><span>Eventually, I had a good framework to work with, and I could start creating a game around it. After 9 days of development (going by the creation date of the gif-files) I had this:</span></p>
<p><a href="http://sheepolution.com/blog/wp-content/uploads/2020/02/progress.gif"><img src="http://sheepolution.com/blog/wp-content/uploads/2020/02/progress.gif" alt="progress" width="721" height="495"></a></p>
<p><span>If you’ve played the game you will know that the typewriter effect and the animations are gone. This is for multiple reasons.</span></p>
<ul>
<li>I was always wondering if I wasn’t ruining my HDD/SSD with all these writing operations, so testing the game with these features, and then hearing my computer make a sound made me go all paranoid. I don’t want other players to have this fear as well.</li>
<li><span>During an animation, you can’t really do anything. If you try to select an option, you will type a character in the box, but before you are able to save the game the next frame has loaded, removing your character from the box. So the animations might be cool at first, but later on, they can get annoying.</span></li>
<li><span>Animations are cool, but they aren’t very Notepadish. Text files aren’t supposed to be animated. For this same reason, there is no music in the game. And yes I could have made it so that the game creates an audio file that you can open in a media player, but it would take away the focus from Notepad. I left in a few animations to show off this cool feature. Also when fighting, it’s good feedback that you hit the enemy when you see it blink</span></li>
</ul>
<h2><span>Default program</span></h2>
<p><span>I always hated how the player had to drag the files on top of the Notepad2 window that the game opens. If they were to double click the file it would open with MS Notepad, or whatever they have set as the default program for the .txt file extension. I could execute a command which changes the default program for .txt files to Notepad2, but I would be rather pissed if a game did that to my computer. Okay well, what if you change it back when the player quits the game? Sure, I could do that, but what if the game crashes or closes unexpectedly in some other way? All these options seemed like something I couldn’t justify. Until eventually I had this idea where I don’t use .txt files, but .tхt files. I don’t blame you if you think that sentence is confusing, but yes there is a difference. “.tхt” is with a different type of “x”. Specifically, it’s the U+0445 Cyrillic Small Letter Ha Unicode Character. I will call it .tXt to prevent confusion. So I made it so that all the files are of the type .tXt, and with a command I changed the default program of tXt files to Notepad2.</span></p>
<pre lang="">assoc .tхt=tхt
ftype tхt=[directory]/.notepad/Notepad2.exe "%1"</pre>
<p><span>Sadly, or I should probably say luckily, a program can only change the default program when it is run as administrator. Now with the released game, if you don’t run the game as administrator, the files will be of the .txt type. If you open a file in MS Notepad the game will tell you that you need to drag the file on top of the opened Notepad, or that you can run the game as administrator to allow you to double click. After you have run the game as administrator at least once, the default program has been set and the .tXt file extension will be used.</span></p>
<h2><span>Motivation</span></h2>
<p><span>So that was all 3 years ago. Well except the default program part. That I came up with 3 weeks before the release. But what happened between those 3 years? Well, this was a classic example of losing motivation. The idea of the story was pretty much the same as it is now, except bigger. Your parents get murdered by the dragon, you need to go to Ferdan the smith, and he will tell you about a sword. Except originally the sword had to be forged from 3 different materials that you need to collect. Because of this, the scope of the game was much bigger, meaning the end was further away. The game didn’t feel very fun either. 2 months after starting this project I quit.</span></p>
<p><span>But the project was always in the back of my mind. I’ve built this whole framework around making a game in Notepad, and the project was just laying there. I should finish it and show the world what I made. Then in 2019 I barely finished any projects. Disappointed in myself, I decided that I should change that in 2020 by finishing the unfinished. Starting with the Notepad game. And so here we are. I shrunk down the scope, gave myself a deadline of a month (it took a week longer than that) and rushed it into completion. I submitted the game to the A MAZE. Awards, of which the deadline was February 2nd, so that helped with the motivation.</span></p>
<h2><span>Conclusion</span></h2>
<p><span>I’m really happy that the game is done. It’s crazy to think that all this time the project was just collecting digital dust, and now I’ve been able to finish it in about a month. There wasn’t a good reason for the game to be as big as I first had in mind anyway. When you have a game that has a weird gimmick like this, the game needs to be as big as needed to show off all the cool things you can do with it. Though I’d say there was probably more I could have done with this game then you can find in the final product. In any case, I’m proud of what I have achieved.</span></p>
<p><span>What’s next? A game in Paint? A game in Calculator? I’m probably not gonna make them, but I would love to see more of these types of games that use an unconventional platform.</span></p>
<p><span>Thank you for reading!</span></p>

</section> 
								 <!-- next-prev-post -->

								
				                 
				                

  
  						<!-- #respond -->
			
				             </article> 
						
						
					</div>

					
				</div>

			</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>