<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Firefox&#x2019;s New WebSocket Inspector &#x2013; Mozilla Hacks - the Web developer blog -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Firefox&#x2019;s New WebSocket Inspector &#x2013; Mozilla Hacks - the Web developer blog</h1>
    <article class="post"> <p>The <a href="https://twitter.com/firefoxdevtools">Firefox DevTools team</a> and our contributors were hard at work over the summer, getting <a href="https://www.mozilla.org/en-US/firefox/developer/">Firefox 70</a> jam-packed with improvements. We are especially excited about our new WebSocket inspection feature, because you told us in feedback how important it would be for your daily work.</p> <p>To use the inspector now, download <a href="https://www.mozilla.org/en-US/firefox/developer/">Firefox Developer Edition</a>, open DevTools&#x2019; <em>Network</em> panel to find the <em>Messages</em> tab. Then, keep reading to learn more about WebSockets and the tricks that the new panel has up its sleeve.</p>
<p>But first, big thanks to <a href="https://github.com/tanhengyeow">Heng Yeow Tan</a>, the <a href="https://summerofcode.withgoogle.com/">Google Summer of Code (GSoC)</a> student who&#x2019;s responsible for the implementation.</p>
<h3>A Primer on WebSockets</h3>
<p>We use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSocket (WS) API</a> to create a persistent connection between a client and server. Because the API sends and receives data at any time, it is used mainly in applications requiring real-time communication.</p>
<p>Although it is possible to work directly with the WS API, some existing libraries come in handy and help save time. These libraries can help with connection failures, proxies, authentication and authorization, scalability, and much more. The WS inspector in Firefox DevTools currently supports <a href="https://socket.io/">Socket.IO</a> and <a href="https://github.com/sockjs/sockjs-client">SockJS</a>, but more support is in the works.</p>
<p>Want to learn more about how to set up WebSocket for your client applications? Head over to <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications">MDN&#x2019;s guides</a>. In the meantime, let&#x2019;s dive into the new feature.</p>
<h3>Getting started with the WebSocket Inspector</h3>
<p>The WebSocket Inspector is part of the existing <em>Network</em> panel UI in DevTools. It&#x2019;s already possible to filter the content for opened WS connections in this panel, but till now there was no chance to see the actual data transferred through WS frames.</p>
<p>The following screenshot shows the WS filter in action. Only the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/101">101 request</a> (<em>WebSocket Protocol Handshake</em>) is visible. The response code indicates that the server is switching to WS connection.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-filiter.png"><img class="aligncenter wp-image-33855 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-filiter.png" alt="A screenshot of the Network Monitor panel showing the WS inspection feature" width="936" srcset="https://hacks.mozilla.org/files/2019/09/wsi-filiter.png 936w, https://hacks.mozilla.org/files/2019/09/wsi-filiter-250x72.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-filiter-768x222.png 768w, https://hacks.mozilla.org/files/2019/09/wsi-filiter-500x144.png 500w" sizes="(max-width: 936px) 100vw, 936px"></a></p>
<p>Clicking on the 101 request opens the familiar sidebar, showing details about the selected HTTP request. In addition, the UI now offers a fresh new <strong>Messages</strong> panel that can be used to inspect WS frames sent and received through the selected WS connection.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-messages-panel.png"><img class="aligncenter wp-image-33857 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-messages-panel.png" alt="The WS inspector in the Network Panel, showing messages" width="936" srcset="https://hacks.mozilla.org/files/2019/09/wsi-messages-panel.png 936w, https://hacks.mozilla.org/files/2019/09/wsi-messages-panel-250x107.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-messages-panel-768x327.png 768w, https://hacks.mozilla.org/files/2019/09/wsi-messages-panel-500x213.png 500w" sizes="(max-width: 936px) 100vw, 936px"></a></p>
<p>The live-updated table shows data for sent (green arrow) and received (red arrow) WS frames. Each frame expands on click, so you can inspect the formatted data.</p>
<p>To focus on specific messages, frames can be filtered free text.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-text-filter.png"><img class="aligncenter wp-image-33849 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-text-filter.png" alt="A screenshot showing a test of the 101 response in the Messages panel" width="1083" srcset="https://hacks.mozilla.org/files/2019/09/wsi-text-filter.png 1083w, https://hacks.mozilla.org/files/2019/09/wsi-text-filter-250x63.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-text-filter-768x193.png 768w, https://hacks.mozilla.org/files/2019/09/wsi-text-filter-500x126.png 500w" sizes="(max-width: 1083px) 100vw, 1083px"></a></p>
<p>The <em>Data</em> and <em>Time</em> columns are visible by default, but you can customize the interface to see more columns by right-clicking on the header.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-columns.png"><img class="aligncenter wp-image-33850 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-columns.png" alt="Screenshot showing Messages filtering options in Firefox Dev Tools panel" width="512" srcset="https://hacks.mozilla.org/files/2019/09/wsi-columns.png 512w, https://hacks.mozilla.org/files/2019/09/wsi-columns-250x193.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-columns-500x386.png 500w" sizes="(max-width: 512px) 100vw, 512px"></a></p>
<p>Selecting a frame in the list shows a preview at the bottom of the <em>Messages</em> panel.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-payload-preview.png"><img class="aligncenter wp-image-33851 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-payload-preview.png" alt="Screenshot of Message showing plain text data sent over WebSocket connection" width="512" srcset="https://hacks.mozilla.org/files/2019/09/wsi-payload-preview.png 512w, https://hacks.mozilla.org/files/2019/09/wsi-payload-preview-250x249.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-payload-preview-500x498.png 500w" sizes="(max-width: 512px) 100vw, 512px"></a></p>
<p>The inspector currently supports the following WS protocols &#x2013; and we have more planned:</p>
<ul>
<li>Plain JSON</li>
<li>Socket.IO</li>
<li>SockJS</li>
</ul>
<p>Payload based on those protocols is parsed and displayed as an expandable tree for easy inspection. Of course, you can still see the raw data (as sent over the wire) as well.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-protocol-preview.png"><img class="aligncenter wp-image-33858 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/wsi-protocol-preview.png" alt="Screenshot showing Messages sent via JSON and Socket.IO " width="919" srcset="https://hacks.mozilla.org/files/2019/09/wsi-protocol-preview.png 919w, https://hacks.mozilla.org/files/2019/09/wsi-protocol-preview-250x156.png 250w, https://hacks.mozilla.org/files/2019/09/wsi-protocol-preview-768x480.png 768w, https://hacks.mozilla.org/files/2019/09/wsi-protocol-preview-500x312.png 500w" sizes="(max-width: 919px) 100vw, 919px"></a></p>
<p>Use the pause/resume button in the Network panel toolbar to stop intercepting WS traffic. This allows you to capture only the frames that you are interested in.</p>
<p><a href="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/ws-pause.png"><img class="aligncenter wp-image-33859 size-full" src="https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/09/ws-pause.png" alt="Screenshot of network monitor showing the pause/resume button for WS inspection" width="936" srcset="https://hacks.mozilla.org/files/2019/09/ws-pause.png 936w, https://hacks.mozilla.org/files/2019/09/ws-pause-250x24.png 250w, https://hacks.mozilla.org/files/2019/09/ws-pause-768x72.png 768w, https://hacks.mozilla.org/files/2019/09/ws-pause-500x47.png 500w" sizes="(max-width: 936px) 100vw, 936px"></a></p>
<h3>What&#x2019;s next for the WebSockets inspector</h3>
<p>We wanted to release this initial feature set quickly to let you use it. We have a few things that we are still working on for upcoming releases:</p>
<ul>
<li>Binary payload viewer</li>
<li>Indicating closed connections</li>
<li>Exporting WS frames (as part of <a href="http://www.softwareishard.com/blog/har-12-spec/">HAR</a>)</li>
<li>See our <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=885508">backlog</a> for more of what&#x2019;s coming</li>
</ul>
<p>We would love your feedback on the new WebSocket Inspector, which is available now in <a href="https://www.mozilla.org/en-US/firefox/developer/">Firefox Developer Edition 70</a>. If you haven&#x2019;t had a chance yet, install and open Developer Edition, then follow along with this post to master WebSocket debugging.</p> <section class="about"> </section> </article>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>