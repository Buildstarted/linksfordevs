<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Clarke&#x27;s Third Law Exception - Step by Step -
linksfor.dev(s)
    </title>
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Clarke&#x27;s Third Law Exception - Step by Step</h1>
    <div><div class="content"><p><img src="/resources/clarkes-third-law-exception-step-by-step/clarkes-third-law-exception-stack-trace-art-on-view-detail.png" alt="Clarke&apos;s First Law Stack Trace Art Exception"></p><p>In my <a href="/his-majesty-hangul-the-filler">previous post</a> I revealed the secret behind the <a href="/stack-trace-art">Stack Trace Art</a>&#x2019;s magic. It is the existence of the <a href="http://www.fileformat.info/info/unicode/char/3164/index.htm">Hangul Filler</a> that makes Stack Trace Art possible. Hangul Filler is that magical Unicode character, at the same time valid in C# identifiers and &#x2018;invisible&#x2019; in the same way spaces or tabs are &#x2018;invisible&#x2019;. The Hangul Filler allows us to write perfectly valid C# code that looks all but valid at the first sight. The following code compiles without errors or warnings on any C# compiler! Try it on your own if you don&#x2019;t believe me :-)<pre><code>public class This&#x3164;is&#x3164;a&#x3164;perfectly&#x3164;valid&#x3164;class&#x3164;name
{
    public void And&#x3164;this&#x3164;is&#x3164;a&#x3164;perfectly&#x3164;valid&#x3164;method&#x3164;name() { }
}
</code></pre></p><p>Let us try now to utilize our invisible character and hand-make the Stack Trace Art exception shown at the top of this post.</p><p>The whole process is very simple and straightforward. We just need a class that contains one method for sentence that we want to display on the stack trace. The methods are calling each other starting from the bottom one, up to the first one. The first one than throws the exception. As simple as that.</p><p>Here is the class:<pre><code>public class ClarkesThirdLaw
{
    public void Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
        throw new Exception(&quot;Clarke&apos;s third law&quot;);
    }

    public void Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
        Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }
}
</code></pre></p><p>The client&#x2019;s code has to of course call the &#x201C;bottom&#x201D; one method:<pre><code>new ClarkesThirdLaw().Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
</code></pre></p><p>If you execute the above code you will get an exception similar to this one:</p><p><img src="/resources/clarkes-third-law-exception-step-by-step/clarkes-third-law-exception-stack-trace-art-first-step.png" alt="Clarke&apos;s First Law Stack Trace Art Exception - The First Step"></p><p>Awesome! Our quote appears on the stack trace indeed (underlined in green, so that you can better spot it). But as you can see, it is actually hard to notice it. All that surrounding noise (marked in red) is too strong. I&#x2019;m sure you agree that a famous quote like this deserves to be displayed more clearly.</p><p>The following changes in our Stack Trace Art class will give Clarke&#x2019;s quote much more beauty and visibility on the client&#x2019;s stack trace.</p><h3 id="step-1-make-the-class-name-invisible">Step 1: Make the Class Name Invisible</h3><p>It is easier as it sounds. We simply have to move the class out of any namespaces and give it a name that will be - the Hangul itself, what else :-) Here is the source code:<pre><code>public class &#x3164;
{
    public void Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
        throw new Exception(&quot;Clarke&apos;s third law&quot;);
    }

    public void Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
        Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }
}
</code></pre></p><p>The clients code will look a bit strange, but that&#x2019;s how it is when invisibility enters the stage:<pre><code>new &#x3164;().Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
</code></pre></p><h3 id="step-2-remove-the-lines-and-line-numbers">Step 2: Remove the Lines and Line Numbers</h3><p>A simple preprocessor trick will help us here. Simply put the <code>#line 1 &quot;&quot;</code> preprocessor directive above every line of code that actually does something. This will remove the lines and put the line number everywhere to 1. Hmmm, at the same time this move will make every decent C# compiler suspicious. You will get plenty of CS1709 compiler warnings - Filename specified for preprocessor directive is empty. In order to calm our compiler down, we will simply silence this compiler warning by adding <code>#pragma warning disable 1709</code>.<pre><code>#pragma warning disable 1709
#line 1 &quot;&quot;
public class &#x3164;
{
#line 1 &quot;&quot;
    public void Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        throw new Exception(&quot;Clarke&apos;s third law&quot;);
    }
#line 1 &quot;&quot;
    public void Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }
}
#pragma warning restore 1709
</code></pre></p><p>Let&#x2019;s see how we are progressing.</p><p><img src="/resources/clarkes-third-law-exception-step-by-step/clarkes-third-law-exception-stack-trace-art-second-step.png" alt="Clarke&apos;s First Law Stack Trace Art Exception - The Second Step"></p><p>Not bad at all. Our quote is much better visible now. Actually it sticks out so well, that I don&#x2019;t have to help it by marking it green. Still, I marked some remaining surrounding noise in red:<ul><li>Those dots that stick to first letters are really annoying.</li><li>Having some distance between the quote and the rest of the stack trace would be nice.</li><li>The <code>() in :line 1</code> in the first line is way to far from the sentence and makes the line unnecessary too long.</li></ul></p><p>Let&#x2019;s fix that.</p><h3 id="step-3-add-some-margin">Step 3: Add Some Margin</h3><p>Adding margin is straightforward. We just have to prefix each method with few Hanguls and add a few empty lines between the rest of the stack trace and the top of the stack trace. Empty lines are, as you already guess, methods having only Hanguls in their names. The <code>() in :line 1</code>s also have to be moved a bit to some acceptable distance. How far will you you push them or in general, how big the margins are depends on the drawing and your personal taste, of course.</p><p>Here is the final Stack Trace Art class, the one that produces the exception shown at the top of this post.<pre><code>#pragma warning disable 1709
#line 1 &quot;&quot;
public class &#x3164;
{
#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        throw new Exception(&quot;Clarke&apos;s third law&quot;);
    }

#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }

#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }
#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        &#x3164;&#x3164;&#x3164;Any&#x3164;sufficiently&#x3164;advanced&#x3164;technology&#x3164;is&#x3164;indistinguishable&#x3164;from&#x3164;magic&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }

#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        &#x3164;&#x3164;&#x3164;Arthur&#x3164;C&#x3164;Clarke&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }

#line 1 &quot;&quot;
    public void &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;()
    {
#line 1 &quot;&quot;
        &#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
    }
}
#pragma warning restore 1709
</code></pre></p><p>And here is the calling code. It looks weird doesn&#x2019;t it?<pre><code>new &#x3164;().&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;&#x3164;();
</code></pre></p><p>Essentially what it does is calling the last method in the class which than calls the one above it. The call chain continues all the way to the first method which finally throws the exception.</p><h2 id="a-bit-of-honesty">A Bit of Honesty</h2><p>To be very honest with you, this is the first Stack Trace Art class that I manually wrote. As I <a href="/his-majesty-hangul-the-filler#putting-it-all-together">explained in my previous post</a>, as soon as I discovered the Hangul Filler I wrote a prototype version of the first Stack Trace Art Editor, called <a href="https://github.com/ironcev/stackTraceangelo">stackTraceangelo</a>. It is primitive and bad written (yeah, all those &#x201C;Intentionally Bad Code&#x201D; warnings are there with a good reason!) but it <a href="/stack-trace-art">helped me to create those first pieces of the Stack Trace Art</a> and to have a lot of fun and joy while creating them.</p><p>I plan to write a post on how <em>stackTraceangelo</em> works and how to use it to create your own Stack Trace Art. Stay tuned :-)</p><p class="alert alert-info">The source code used in this blog post is available on GitHub. Download it <a href="https://github.com/ironcev/HumbleXamples/tree/master/ClarkesThirdLawExceptionStepByStep ">here</a>.</p></div><p class="publish">Published on February 13, 2015</p></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>