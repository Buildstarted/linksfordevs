<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Integrating Blazor Components into Existing Asp.Net Core MVC Applications -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Integrating Blazor Components into Existing Asp.Net Core MVC Applications</h1>
    <div><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah cz aj ak"><div><div class="du"><div class="n dv dw dx dy"><div class="o n"><div><a href="https://lnkd.in/@waelkdouh?source=post_page-----b1a2aec4ac1f----------------------"><img alt="Wael Kdouh" class="r dz ea eb" src="https://miro.medium.com/fit/c/96/96/1*-8sZIkN05ImwLDxDSwKrKw.jpeg" width="48"></a></div><div class="ec ak r"><span class="bj b bk bl bm bn r bo bp"><span class="bj ef eg bl eh ei ej ek el em bo"></span></span></div></div></div></div></div><p id="7ebe" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">Blazor offers many benefits to .Net developers ranging from providing a Single Page Application (SPA) framework option, to features like two way binding and offline support just to name a few. But one of the main benefits that has been resonating with a lot of .Net developers is the fact that its component based. Whereas its highly recommended to start with a Blazor application whenever possible, its also plausible to consider integrating Blazor components into existing ASP.Net Core MVC applications(or Razor pages for that matter). The aforementioned scenario comes up in one of two cases:</p><ul class><li id="7634" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz ga gb gc">You have a huge investment in an existing ASP.Net Core MVC application and you are not ready to migrate to Blazor but would like to make use of Blazor components</li><li id="cbf8" class="fm fn dc bk fo b fp gd fr ge ft gf fv gg fx gh fz ga gb gc">You would like to migrate to Blazor eventually but you are planning on gradually getting there</li></ul><p id="a1ca" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">The solution is the same in both cases. It basically involves adding Blazor to your ASP.Net Core middleware. Now there are several posts out there that address this topic but most of them are either outdated or incomplete. Here is my attempt to provide a complete picture using the latest version of .Net Core (version 3.1 at the time of writing this post). The source can be found <a href="https://github.com/waelkdouh/BlazorInExistingMVCApp" class="at cg gi gj gk gl">here</a>.</p><p id="3c2b" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">The first step towards this integration involves adding support for server side Blazor by adding it to your project&#x2019;s dependency injection container. This is achieved by adding the Server Side Blazor service inside the Startup.cs file as shown below.</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/2238/1*LQZx6Klt1MLfHdXjc6zT-A.png" width="1119"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Server Side Blazor service</figcaption></figure><p id="b745" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">In the same startup.cs file go ahead and add an endpoint for the Blazor SignalR hub.</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/2012/1*Ufy0Mx09y8X3Alw1Off2nQ.png" width="1006"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Blazor SignalR hub endpoint</figcaption></figure><p id="e775" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">At this point you are almost ready to to add your Blazor component to your project. Blazor components must go into a Pages subfolder under the Components folder. This folder doesn&#x2019;t exist under the MVC template . Go ahead and create that folder and sub-folder. Your project structure should now look like this:</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/1192/1*wUwXuhwiovHdig81zZUdWA.png" width="596"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Pages folder which will host the different Blazor Components</figcaption></figure><p id="5730" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">Now you can start adding the different Blazor components just like you would do under a regular Blazor project. Here is a simple person component:</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/1996/1*N847k5ftccMxwcd5EKFo8w.png" width="998"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Blazor Component</figcaption></figure><p id="2104" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">Now, within your MVC View, you can invoke your component using the the <code class="hd hu hv hw hx b">Component</code> Tag Helper as shown below. Notice that the type attribute specifies the Blazor component and the param attribute specifies the parameter name inside the Blazor component followed by the value.</p><blockquote class="hy hz ia"><p id="e32c" class="fm fn dc ib fo b fp fq fr fs ft fu fv fw fx fy fz">Note: Prior to .Net Core version 3.1 the syntax used an HTML helper and the server side rendering did not allow passing parameters.</p></blockquote><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/3176/1*c2gTnQQT27cu8nOIQBfw9g.png" width="1588"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Invoking a Blazor component from inside an MVC view</figcaption></figure><blockquote class="hy hz ia"><p id="93f9" class="fm fn dc ib fo b fp fq fr fs ft fu fv fw fx fy fz">Note: <code class="hd hu hv hw hx b">RenderMode</code> configures whether the component:</p></blockquote><ul class><li id="5fb1" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz ga gb gc">Is prerendered into the page</li><li id="1ad4" class="fm fn dc bk fo b fp gd fr ge ft gf fv gg fx gh fz ga gb gc">Is rendered as static HTML on the page or if it includes the necessary information to bootstrap a Blazor app from the user agent</li></ul><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/3754/1*-RNwYJ7lBvYZTf9ONFsn2A.png" width="1877"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Different Blazor component render modes</figcaption></figure><p id="08f8" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">In addition, notice that I had to include blazor.server.js file. Please note that the order matters here. If you include the javascript file before the component is rendered then the events won&#x2019;t trigger inside the Blazor component. I also had to add the pages namespace to the _ViewImports.cshtml file to make the namespace accessible from different MVC views as shown here:</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/2928/1*13k1lln44enwF93LuwUMOA.png" width="1464"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Make the Pages namespace accessible from all MVC views</figcaption></figure><p id="4076" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">Finally, I realized that I also had to add the _Imports.razor file to the root of the project. This file brings in the web specific parts of Blazor. Its typically included by default inside a new Blazor project but doesn&#x2019;t exist in the default ASP.Net MVC template.</p><figure class="gn go gp gq gr gs cl cm paragraph-image"><img class="cp t u gz ak" src="https://miro.medium.com/max/1964/1*qTe2SqBRvyJoeXHc-ot8qg.png" width="982"><figcaption class="bo eg hj hk hl cn cl cm hm hn bj ef">Different namespaces that bring in the web specific parts of Blazor</figcaption></figure><p id="3c7c" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">Now that we have successfully integrated a Blazor component inside an ASP.Net Core MVC application lets answer some other questions that I typically get from teams embarking on this journey. Can we use Blazor WebAssembly instead of server side Blazor? The answer is yes. Blazor WebAssembly doesn&#x2019;t have any specific server dependency. It&#x2019;s possible to use Blazor WebAssembly with any server platform you want that can serve up some static files and handle SPA style routing for deep links. Blazor provides integration between Blazor WebAssembly and ASP.NET Core to make this easy to setup. The second question that I get a lot is can Blazor WebAssembly be used with non ASP.Net Core MVC applications? The answer again is yes, but the recommended setup is to use Blazor with ASP.NET Core as this gives you the most flexible and feature rich setup. For example, if you want to do server prerendering of the Blazor WebAssembly app, that&#x2019;s only supported with ASP.NET Core.</p><p id="de5d" class="fm fn dc bk fo b fp fq fr fs ft fu fv fw fx fy fz">There you have it, you now know all your options next time you think about integrating a Blazor component within an ASP.Net Core MVC application.</p></div></div></section></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>