<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Kubernetes Failure Stories -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }

        img {
            max-width: 100%;
        }

        .text-center {
            text-align: center;
        }

        .readable h1 {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Kubernetes Failure Stories</h1>
    <div class="content"> <p>A compiled list of links to public failure stories related to Kubernetes.
Most recent publications on top.</p>
<ul>
<li><a href="https://www.bluematador.com/blog/post-mortem-kubernetes-node-oom">Post Mortem: Kubernetes Node OOM - Blue Matador - blog post 2019</a><ul>
<li>involved: AWS, SystemOOM, EBS, fluentd-sumologic, no resource requests/limits</li>
<li>impact: unknown, Pods killed</li>
</ul>
</li>
<li><a href="https://philpearl.github.io/post/k8s_ingress/">Kubernetes&#x2019; dirty endpoint secret and Ingress - Ravelin - blog post 2019</a><ul>
<li>involved: GKE, Ingress, replication controller, SIGTERM, &quot;graceful shutdown&quot;</li>
<li>impact: occasional 502 errors</li>
</ul>
</li>
<li><a href="https://grafana.com/blog/2019/07/24/how-a-production-outage-was-caused-using-kubernetes-pod-priorities/">How a Production Outage Was Caused Using Kubernetes Pod Priorities - Grafana Labs 2019</a><ul>
<li>involved: Pod priorities</li>
<li>impact: cascading Pod evictions</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=MoIdU0J0f0E">Moving to Kubernetes: the Bad and the Ugly - Xing - ContainerDays EU 2019</a><ul>
<li>involved: nginx Ingress, network interrupts, conntrack, frozen CronJob, PLEG, stuck controllers</li>
<li>impact: lost requests, response time jumps, not ready nodes</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=LpFApeaGv7A">Kubernetes Failure Stories, or: How to Crash Your Cluster - Zalando - ContainerDays EU 2019</a><ul>
<li>involved: AWS IAM, Kubelet, <code>--kube-api-qps</code>, Skipper-Ingress, AWS, <code>OOMKill</code>, CronJob, CoreDNS, CPU throttling</li>
<li>impact: build errors, production outages</li>
</ul>
</li>
<li><a href="https://github.com/zalando-incubator/kubernetes-on-aws/blob/dev/docs/postmortems/jun-2019-kubelet-qps.md">Build Errors of Continuous Delivery Platform - Zalando - postmortem 2019</a><ul>
<li>involved: AWS IAM, Kubelet, kube2iam, <code>--kube-api-qps</code></li>
<li>impact: build errors</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=QKI-JRs2RIE">10 Ways to Shoot Yourself in the Foot with Kubernetes, #9 Will Surprise You - Datadog - KubeCon Barcelona 2019</a><ul>
<li>involved: CoreDNS, <code>ndots:5</code>, IPVS conntrack, <code>imagePullPolicy: Always</code>, DaemonSet, NAT instances, <code>latest</code> tag, API server <code>OOMKill</code>, kube2iam, cluster-autoscaler, PodPriority, audit logs, <code>spec.replicas</code>, AWS ASG rebalance, CronJob, Pod toleration, zombies, <code>readinessProbe.exec</code>, cgroup freeze, kubectl</li>
<li>impact: unknown, API server outage, pending pods, slow deployments</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=ix0Tw8uinWs">How Spotify Accidentally Deleted All its Kube Clusters with No User Impact - Spotify - KubeCon Barcelona 2019</a><ul>
<li>involved: GKE, cluster deletion, browser tabs, Terraform, global state file, git PRs, GCP permissions</li>
<li>impact: no impact on end users</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=6sDTB4eV4F8">Kubernetes Failure Stories - Zalando - KubeCon Barcelona 2019</a><ul>
<li>involved: Skipper-Ingress, AWS, <code>OOMKill</code>, high latency, CronJob, CoreDNS, <code>ndots:5</code>, etcd, CPU throttling</li>
<li>impact: multiple production outages</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=8P7-C44Gjj8">Oh Sh*t! The Config Changed! - Pusher - KubeCon Barcelona 2019</a><ul>
<li>involved: AWS, nginx, ConfigMap change</li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="https://medium.com/@SkyscannerEng/misunderstanding-the-behaviour-of-one-templating-line-and-the-pain-it-caused-our-k8s-clusters-a420f30a99f1">Misunderstanding the behaviour of one templating line - Skyscanner - blog post 2019</a><ul>
<li>involved: HAProxy-Ingress, Service VIPs, Golang templating</li>
<li>impact: Significantly increased latency, 5XXs thrown from some services</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=Fjyg7cxRZQs&amp;list=PLuHdbqhRgWHJg9eOFCl5dgLvVjd_DFz8O&amp;index=3&amp;t=0s">How to kill the Algolia dashboard during Black Friday or How not to use Kubernetes - Algolia - Algolia Search Party 2019</a><ul>
<li>involved: GKE, Jobs, overload</li>
<li>impact: high latency, timeouts</li>
</ul>
</li>
<li><a href="https://updates.moonlightwork.com/outage-post-mortem-87370">All pods scheduled to same failing host - Moonlight - postmortem 2019</a><ul>
<li>involved: Google Kubernetes Engine, scheduler, anti-affinity rules</li>
<li>impact: major production outage, 100% traffic loss</li>
</ul>
</li>
<li><a href="https://deploy.live/blog/the-shipwreck-of-gke-cluster-upgrade/">The shipwreck of GKE Cluster Upgrade - Loveholidays GKE - blog post 2019</a><ul>
<li>involved: GCP Ingress, GKE Cluster, nodes</li>
<li>impact: critical drop in pod availability, loss of ingress, 2 hour maintenance lasting 7 hours</li>
</ul>
</li>
<li><a href="https://medium.com/civis-analytics/https-medium-com-civis-analytics-breaking-kubernetes-how-we-broke-and-fixed-our-k8s-cluster-adfa6fbade61">Breaking Kubernetes: How We Broke and Fixed our K8s Cluster - Civis Analytics - blog post 2019</a><ul>
<li>involved: AWS, kops, large clusters, batch jobs infrastructure, Datadog, API server, DNS, CPU throttling</li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="https://www.slideshare.net/try_except_/lets-talk-about-failures-with-kubernetes-hamburg-meetup">Let&apos;s talk about Failures with Kubernetes - Zalando - Hamburg meetup 2019</a><ul>
<li>involved: AWS, <code>NotReady</code> nodes, ELB dynamic IPs, Ingress, API server, CronJob, CoreDNS, <code>OOMKill</code>, kubelet memory leak, CPU throttling</li>
<li>impact: production outages</li>
</ul>
</li>
<li><a href="https://github.com/zalando-incubator/kubernetes-on-aws/blob/dev/docs/postmortems/jan-2019-dns-outage.md">Total DNS outage in Kubernetes cluster - Zalando - postmortem 2019</a><ul>
<li>involved: AWS, DNS, CoreDNS, <code>OOMKill</code>, <code>ndots:5</code>, HTTP retries</li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="https://www.tibobeijen.nl/2019/02/01/learning-from-kubernetes-cluster-failure/">Maximize learnings from a Kubernetes cluster failure - NU.nl - blog post 2019</a><ul>
<li>involved: AWS, <code>NotReady</code> nodes, <code>SystemOOM</code>, Helm, ElastAlert, no resource limits set</li>
<li>impact: user experience affected for internally used tools and dashboards</li>
</ul>
</li>
<li><a href="https://www.devops-hof.de/kubernetes-load-balancer-konfiguration-beware-when-draining-nodes/">Kubernetes Load Balancer Configuration - Beware when draining nodes - DevOps Hof - blog post 2019</a><ul>
<li>involved: GCP Load Balancer, <code>externalTrafficPolicy</code>, ingress-nginx</li>
<li>impact: total ingress traffic outage</li>
</ul>
</li>
<li><a href="https://medium.com/@daniel.p.woods/on-infrastructure-at-scale-a-cascading-failure-of-distributed-systems-7cff2a3cd2df">On Infrastructure at Scale: A Cascading Failure of Distributed Systems - Target - Medium post January 2019</a><ul>
<li>involved: on-premise, Kafka, large cluster, Consul, Docker daemon, high CPU usage</li>
<li>impact: development environment outage</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=V0DVkrHf08k">How NOT to do Kubernetes - Sr.SRE Medya Ghazizadeh - Google - Cloud Native Meetup Sep 2018</a><ul>
<li>involved: public container registery, ingress wild card, image size, replica count, 12factor</li>
<li>impact: security, stablity of clusters.</li>
</ul>
</li>
<li><a href="https://www.slideshare.net/try_except_/running-kubernetes-in-production-a-million-ways-to-crash-your-cluster-devopscon-munich-2018">Running Kubernetes in Production: A Million Ways to Crash Your Cluster - Zalando - DevOpsCon Munich 2018</a><ul>
<li>involved: AWS, Ingress, CronJob, etcd, flannel, Docker, CPU throttling</li>
<li>impact: production outages</li>
</ul>
</li>
<li><a href="https://sethmccombs.github.io/work/2018/12/03/Outages.html">Outages? Downtime? - Veracode - blog post 2018</a><ul>
<li>involved: AWS, AWS IAM, region migration, kubespray, Terraform, pod CIDR</li>
<li>impact: QA/dev cluster outage</li>
</ul>
</li>
<li><a href="https://keepingitclassless.net/2018/12/december-4---nre-labs-outage-post-mortem/">NRE Labs Outage Post-Mortem - NRE Labs - blog post 2018</a><ul>
<li>involved: GCP, kubeadm, etcd, Terraform, <code>livenessProbe</code></li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="https://www.adammargherio.com/a-perfect-dns-storm/">A Perfect DNS Storm - Toyota Connected - blog post 2018</a><ul>
<li>involved: Azure, DNS, <code>ndots:5</code>, Alpine musl libc</li>
<li>impact: DNS resolution failures</li>
</ul>
</li>
<li><a href="https://itnext.io/kubernetes-and-the-menace-elb-the-tale-of-an-outage-c00bef678fc0">Kubernetes and the Menace ELB, the tale of an outage - Turnitin - blog post 2018</a><ul>
<li>involved: AWS, kube-aws, ELB dynamic IPs, API server, kubelet, <code>NotReady</code> nodes</li>
<li>impact: 15 minutes cluster outage</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=tA8Sr3Nsx1I">Moving the Entire Stack to K8s Within a Year &#x2013; Lessons Learned - ThredUP - DevOpsStage 2018</a><ul>
<li>involved: AWS, kops, HAProxy, <code>livenessProbe</code>, DNS, too many open files</li>
<li>impact: unknown outages, DNS errors</li>
</ul>
</li>
<li><a href="https://www.airmap.com/incident-180719/">AirMap Platform Service Outage - AirMap - incident report 2018</a><ul>
<li>involved: Azure, <code>NotReady</code> nodes, kubelet PLEG, CNI</li>
<li>impact: production AirMap platform outage</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=OUYTNywPk-s">Anatomy of a Production Kubernetes Outage - Monzo - KubeCon Europe 2018</a><ul>
<li>involved: AWS, etcd, Linkerd, <code>NullPointerException</code>, gRPC client, services without endpoints, incompatible Kubernetes API change</li>
<li>impact: production ledger/platform outage</li>
</ul>
</li>
<li><a href="https://youtu.be/N2JUGnwinbQ">Stories from the Playbook - Google - KubeCon Europe 2018</a><ul>
<li>involved: GKE, etcd, Docker daemon, Image registry, dnsmasq vulnerabilities</li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=likHm-KHGWQ">101 Ways to &quot;Break and Recover&quot; Kubernetes Cluster - Oath/Yahoo - KubeCon Europe 2018</a><ul>
<li>involved: on-premise, namespace deletion, domain name collision, <code>NotReady</code> nodes, etcd empty dir, TLS certificate refresh, DNS issues, OOM</li>
<li>impact: unknown cluster outages</li>
</ul>
</li>
<li><a href="https://gravitational.com/blog/running-postgresql-on-kubernetes/">Experiences with running PostgreSQL on Kubernetes - Gravitational - blog post 2018</a><ul>
<li>involved: PostgreSQL, streaming replication</li>
<li>impact: data loss</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=xZO9nx6GBu0">101 Ways to Crash Your Cluster - Nordstrom - KubeCon North America 2017</a><ul>
<li>involved: AWS, <code>NotReady</code> nodes, OOM, eviction thresholds, ELB dynamic IPs, kubelet, cluster autoscaler, etcd split</li>
<li>impact: full production cluster outage, other outages</li>
</ul>
</li>
<li><a href="https://community.monzo.com/t/resolved-current-account-payments-may-fail-major-outage-27-10-2017/26296/95">Major Outage: Current account payments may fail - Monzo - Monzo Community post 2017</a><ul>
<li>involved: AWS, etcd, Linkerd, <code>NullPointerException</code>, services without endpoints</li>
<li>impact: major production outage, full platform outage, current account payments fail</li>
</ul>
</li>
<li><a href="https://www.slideshare.net/RaffaeleDiFazio/fallacies-of-distributed-computing-with-kubernetes-on-aws">Fallacies of Distributed Computing with Kubernetes on AWS - Zalando - AWS User Group Hamburg October 2017</a><ul>
<li>involved: AWS, unhealthy nodes, Ingress, CronJob</li>
<li>impact: production outage</li>
</ul>
</li>
<li><a href="http://status.universe.com/incidents/115n3vxqwzcf">Search and Reporting Outage - Universe - incident report 2017</a><ul>
<li>involved: Job, <code>RestartPolicy</code>, consume node resources</li>
<li>impact: production Universe search and reporting outage</li>
</ul>
</li>
<li><a href="https://engineering.saltside.se/our-first-kubernetes-outage-c6b9249cfd3a">Our First Kubernetes Outage - Saltside - blog post 2017</a><ul>
<li>involved: AWS, kops, Helm, <code>NotReady</code> nodes, resource exhaustion</li>
<li>impact: nonproduction cluster outage</li>
</ul>
</li>
<li><a href="https://engineering.saltside.se/our-failure-migrating-to-kubernetes-25c28e6dd604">Our Failure Migrating to Kubernetes - Saltside - blog post 2017</a><ul>
<li>involved: AWS, kops, ELB, <code>BackendConnectionErrors</code>, <code>LoadBalancer</code> service</li>
<li>impact: aborted application migration</li>
</ul>
</li>
<li><a href="https://status.salemove.com/incidents/xf6cr710yrzn">SaleMove US System Issue - SaleMove - incident report 2017</a><ul>
<li>involved: AWS, ELB dynamic IPs, DNS <code>A</code> record for master, API server</li>
<li>impact: production issues with SaleMove US System</li>
</ul>
</li>
</ul>
<h2>Why</h2>
<p>Kubernetes is a fairly complex system with many moving parts.
Its ecosystem is constantly evolving and adding even more layers (service mesh, ...) to the mix.
Considering this environment, we don&apos;t hear enough real-world horror stories to learn from each other!
This compilation of failure stories should make it easier for people dealing with Kubernetes operations (SRE, Ops, platform/infrastructure teams) to
learn from others and reduce the unknown unknowns of running Kubernetes in production.
For more information, <a href="https://srcco.de/posts/kubernetes-failure-stories.html">see the blog post</a>.</p>
<h2>Contributing</h2>
<p>Please help the community and <strong><a href="https://github.com/hjacobs/kubernetes-failure-stories/edit/master/README.md">share a link to your failure story by opening a Pull Request!</a></strong>
Failure stories can be anything like blog posts, conference/meetup talks, incident postmortems, tweetstorms, ...</p>
<p>I would also be glad to hear about your failure stories on Twitter: my handle is <a href="https://twitter.com/try_except_">@try_except_</a></p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>