<!DOCTYPE html>
<html lang="en">
<head>
    <title>
BlazorHelp Website &gt; Blog - A Blazor Application Updater - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="BlazorHelp Website &gt; Blog - A Blazor Application Updater - linksfor.dev(s)"/>
    <meta property="article:author" content="Written by:&#xA;   Michael Washington"/>
    <meta property="og:description" content="Microsoft Visual Studio Blazor"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://blazorhelpwebsite.com/Blog/tabid/61/EntryId/4352/A-Blazor-Application-Updater.aspx"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - BlazorHelp Website &gt; Blog - A Blazor Application Updater</title>
<div class="readable">
        <h1>BlazorHelp Website &gt; Blog - A Blazor Application Updater</h1>
            <div>by Written by:&#xA;   Michael Washington</div>
            <div>Reading time: 11-14 minutes</div>
        <div>Posted here: 07 Sep 2019</div>
        <p><a href="http://blazorhelpwebsite.com/Blog/tabid/61/EntryId/4352/A-Blazor-Application-Updater.aspx">http://blazorhelpwebsite.com/Blog/tabid/61/EntryId/4352/A-Blazor-Application-Updater.aspx</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
 <!-- Begin Blog Entry Title -->
 
 <!-- End Blog Entry Title -->
 <!-- Begin Blog Sub Head -->
 <acronym title="9/6/2019 6:31 PM"><span>
  <span id="dnn_ctr382_MainView_ViewEntry_lblEntryMonth">Sep</span>
 </span><span>
  <span id="dnn_ctr382_MainView_ViewEntry_lblEntryDay">6</span>
 </span></acronym>
 <p>
  
  <br>
  <span id="dnn_ctr382_MainView_ViewEntry_lblDateTime">9/6/2019 6:31 PM</span>&nbsp;
  <a id="dnn_ctr382_MainView_ViewEntry_lnkRss" href="http://blazorhelpwebsite.com/Blog/tabid/61/rssid/1/Default.aspx" target="_blank"><img id="dnn_ctr382_MainView_ViewEntry_lnkRssIcon" src="http://blazorhelpwebsite.com/desktopmodules/Blog/Images/feed-icon-12x12.gif" alt="RssIcon"></a>
 </p>
 <!-- End Blog Sub Head -->
 
 <!-- Begin Blog Entry -->
 
   <p><img src="http://blazorhelpwebsite.com/images/BlazorUpgrader.gif"></p>  <p>You can allow your application end users to fully update their version of your application by simply uploading a .zip file.</p>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_4af3b4fc-12a2-473f-9a39-0e08472492db.png" width="619" height="297"></p>  <p>When the application starts, the code will be on <strong>Version One</strong>.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_9aa7098a-f8da-48bc-b12c-949dbed55173.png" width="420" height="236"></p>  <p>We can select the <strong>Upload</strong> tab, Click the <strong>Choose</strong> button to select the <strong>UpgradePackageVersionTwo.zip</strong> file (available in the<strong> .zip</strong> file on the <strong><a href="http://blazorhelpwebsite.com/Downloads.aspx">Downloads page</a></strong> of this site), and then select the <strong>Upload</strong> button to upload the package.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_9c5f34de-591b-4025-bd7a-de8e4316e713.png" width="627" height="330"></p>  <p>If running in the <strong>Visual Studio</strong> debugger you will see “<strong>Attempting to reconnect to the server</strong>” and the application will <em>close</em>.</p>  <p>If running on <strong>IIS web server</strong> or <strong>Azure</strong> you will see this message and a “<strong>Reload</strong>” message.</p>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_358c166e-0d44-423d-827e-4bee7a9055e2.png" width="613" height="272"></p>  <p><em>Reload</em> the web browser (or restart <strong>Visual Studio</strong> debugger if using <strong>Visual Studio</strong>),&nbsp; and the application will now be on <strong>Version Two</strong>.</p>  <p>The following actions have been performed:</p>  <ul>   <li>The <strong>.zip</strong> file was <em>uploaded</em> to the <strong>uploads</strong> directory </li>    <li>The <strong>.zip</strong> file was <em>unzipped</em> into a directory called <strong>Upgrade.</strong> </li>    <li>A call to: <strong>/api/RestartApp/ShutdownSite</strong> was made to cause the application to <em>stop</em>. </li>    <li>When the web application is <em>re-started</em>, the <strong>Startup</strong> code checks for this file at this location: <strong>\Upgrade\CustomClassLibrary.dll</strong>. </li>    <li>The <strong>CustomClassLibrary.dll</strong> is copied to its run-time location at: <strong>\CustomModules\CustomClassLibrary.dll</strong>. </li>    <li>The file at: <strong>\Upgrade\CustomClassLibrary.dll</strong> is then <em>deleted</em>. </li>    <li>The site finishes loading with the newly updated code. </li> </ul>      <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_02f18871-8a9d-42d9-bcef-883ad40c7375.png" width="294" height="552"></p>  <p>The primary code for the application is contained in the <strong>CustomClassLibrary</strong> project.</p>  <p>The assembly (the .dll) for this project, is built then moved to the <strong>CustomModules</strong> folder of the main project.</p>  <p>The assembly is placed in the <strong>CustomModules</strong> folder for the following reasons:</p>  <ul>   <li>The <strong>CustomClassLibrary</strong> project cannot be directly referenced, or have its assembly placed in the <em>bin</em> directory of the main project, because the assembly would be locked by the <strong>dotnet.exe</strong> runtime code and would not be <em>updatable</em>. </li>    <li>By placing the assembly in this folder, we can can manually load it after we have updated it with code uploaded the the end-user (before any file locks are placed)      <ul>       <li><strong>Note:</strong> After we dynamically load the <strong>CustomClassLibrary.dll</strong>, it is then locked and not-updatable. To update it, we have to programmatically stop and re-start the web application, then update the assembly (with uploaded code) during the web application start-up process (before we dynamically re-load the assembly). </li>     </ul>   </li> </ul>    <p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_a1604bb5-ccf2-47ea-bc39-8fbae873e83f.png" width="309" height="401"></p>  <p>To have the assembly for the <strong>CustomClassLibrary</strong> automatically placed in the <strong>CustomModules</strong> directory of the main project, we <em>right-click</em> on the <strong>CustomClassLibrary</strong> project and select <strong>Edit CustomClassLibrary.csproj</strong>.</p>  <p>We then add the following build task:</p>  <pre><pre>&nbsp;</pre><pre><pre>  <span>&lt;</span><span>Target</span> <span>Name</span>=<span>"CopyFiles"</span> <span>BeforeTargets</span>=<span>"AfterBuild"</span><span>&gt;</span>
</pre><pre>    <span>&lt;</span><span>Copy</span> <span>SourceFiles</span>=<span>"$(ProjectDir)\bin\Debug\netcoreapp3.0\CustomClassLibrary.dll"</span> 
</pre><pre>          <span>DestinationFolder</span>=<span>"$(ProjectDir)\..\BlazorAppUpgrader\CustomModules"</span> <span>/&gt;</span>
</pre><pre>  <span>&lt;/</span><span>Target</span><span>&gt;</span></pre></pre><pre>&nbsp;</pre><pre>&nbsp;</pre></pre>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_d65c2453-7dd1-4a20-b462-002906cc51c7.png" width="499" height="233"></p>

<p>The first step in the upgrade process is for the end-user to upload an <em>upgrade</em> package (an upgrade package is just a<strong> .zip</strong> file containing the new copy of <strong>CustomClassLibrary.dll</strong>).</p>



<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_9229896a-280c-4fb2-b169-96915682c254.png" width="204" height="175"></p>

<p>The relevant code is in the <strong>UploadFile.razor</strong> page (that is in the project that will be replaced by the upgrade process).</p>

<p>The code does the following:</p>

<ul>
  <li>Uploads the <strong>UpgradePackageVersionTwo.zip</strong> package to the <strong>uploads</strong> directory.</li>

  <li>Unzips it into the <strong>Upgrade </strong>directory </li>

  <li>programmatically stops and re-starts the web application (to release the file locks on the existing <strong>CustomClassLibrary</strong> assembly) </li>
</ul>

<pre><pre>    </pre><pre><pre>@page "/uploadfile"
</pre><pre>@using Blazor.FileReader
</pre><pre>@using System.IO
</pre><pre>@using System.IO.Compression
</pre><pre>@using Microsoft.AspNetCore.Components.Authorization
</pre><pre>@using SharedClassLibrary
</pre><pre>@inject IFileReaderService fileReaderService
</pre><pre></pre><pre>@using System.Net.Http
</pre><pre>@inject HttpClient Http
</pre><pre>@inject NavigationManager UriHelper
</pre><pre></pre><pre><span>&lt;</span><span>h1</span><span>&gt;</span>Upload<span>&lt;/</span><span>h1</span><span>&gt;</span>
</pre><pre></pre><pre><span>&lt;</span><span>br</span> <span>/&gt;</span>
</pre><pre><span>&lt;</span><span>input</span> <span>type</span>=<span>"file"</span> <span>class</span>=<span>"btn btn-primary"</span> @<span>ref</span>=<span>"@inputElement"</span> <span>/&gt;</span>
</pre><pre><span>&lt;</span><span>br</span> <span>/&gt;</span>
</pre><pre><span>&lt;</span><span>br</span> <span>/&gt;</span>
</pre><pre><span>&lt;</span><span>button</span> <span>class</span>=<span>"btn btn-primary"</span> @<span>onclick</span>=<span>"Upload"</span><span>&gt;</span>Upload File<span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre><span>&lt;</span><span>p</span><span>&gt;</span>
</pre><pre>    @if (ShowPopup)
</pre><pre>    {
</pre><pre>    <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal"</span> <span>tabindex</span>=<span>"-1"</span> <span>style</span>=<span>"display:block"</span> <span>role</span>=<span>"dialog"</span><span>&gt;</span>
</pre><pre>        <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-dialog modal-sm"</span><span>&gt;</span>
</pre><pre>            <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-content"</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>div</span> <span>class</span>=<span>"modal-header"</span><span>&gt;</span>
</pre><pre>                    <span>&lt;</span><span>h4</span> <span>class</span>=<span>"modal-title"</span><span>&gt;</span>Upload Status<span>&lt;/</span><span>h4</span><span>&gt;</span>
</pre><pre>                    <span>&lt;!-- Button to close the popup --&gt;</span>
</pre><pre>                    <span>&lt;</span><span>button</span> <span>type</span>=<span>"button"</span> <span>class</span>=<span>"close"</span>
</pre><pre>                            @<span>onclick</span>=<span>"ClosePopup"</span><span>&gt;</span>
</pre><pre>                        <span>&lt;</span><span>span</span> <span>aria</span>-<span>hidden</span>=<span>"true"</span><span>&gt;</span>X<span>&lt;/</span><span>span</span><span>&gt;</span>
</pre><pre>                    <span>&lt;/</span><span>button</span><span>&gt;</span>
</pre><pre>                <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>                <span>&lt;</span><span>div</span> <span>align</span>=<span>"center"</span><span>&gt;</span>
</pre><pre>                    <span>&lt;</span><span>h1</span><span>&gt;</span>@uploadStatus<span>&lt;/</span><span>h1</span><span>&gt;</span>
</pre><pre>                <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>            <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>        <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>    <span>&lt;/</span><span>div</span><span>&gt;</span>
</pre><pre>    }
</pre><pre><span>&lt;/</span><span>p</span><span>&gt;</span></pre></pre><pre><pre>@code {
</pre><pre>    <span>// AuthenticationState is available as a CascadingParameter</span>
</pre><pre>    [CascadingParameter]
</pre><pre>    <span>private</span> Task&lt;AuthenticationState&gt; authenticationStateTask { <span>get</span>; <span>set</span>; }
</pre><pre></pre><pre>    ElementReference inputElement;
</pre><pre>    <span>string</span> uploadStatus = "<span></span>";
</pre><pre>    <span>bool</span> ShowPopup = <span>false</span>;
</pre><pre></pre><pre>    <span>void</span> ClosePopup()
</pre><pre>    {
</pre><pre>        <span>// Close the Popup</span>
</pre><pre>        ShowPopup = <span>false</span>;
</pre><pre>    }
</pre><pre></pre><pre>    async Task Upload()
</pre><pre>    {
</pre><pre>        ShowPopup = <span>true</span>;
</pre><pre>        uploadStatus = "<span>Uploading...</span>";
</pre><pre></pre><pre>        <span>try</span>
</pre><pre>        {
</pre><pre></pre><pre>            <span>foreach</span> (var file <span>in</span> await fileReaderService
</pre><pre>                .CreateReference(inputElement)
</pre><pre>                .EnumerateFilesAsync())
</pre><pre>            {
</pre><pre>                var fileInfo = await file.ReadFileInfoAsync();
</pre><pre></pre><pre>                <span>int</span> count;
</pre><pre>                <span>int</span> intCount = 0;
</pre><pre>                var bufferSize = 4096;
</pre><pre>                <span>string</span> FilePath = $"<span>uploads\\{fileInfo.Name}</span>";
</pre><pre></pre><pre>                <span>using</span> (var stream = await file.OpenReadAsync())
</pre><pre>                {
</pre><pre>                    var buffer = <span>new</span> <span>byte</span>[bufferSize];
</pre><pre>                    var finalBuffer = <span>new</span> <span>byte</span>[fileInfo.Size];
</pre><pre></pre><pre>                    <span>using</span> (var fileStream = <span>new</span> FileStream(
</pre><pre>                        FilePath, FileMode.Create, FileAccess.Write))
</pre><pre>                    {
</pre><pre>                        <span>while</span> ((count = await stream.ReadAsync(buffer, 0, buffer.Length)) &gt; 0)
</pre><pre>                        {
</pre><pre>                            <span>// Write file</span>
</pre><pre>                            await fileStream.WriteAsync(buffer, 0, count);
</pre><pre></pre><pre>                            <span>// Update percentage</span>
</pre><pre>                            intCount = intCount + count;
</pre><pre>                            <span>int</span> uploadPercentage = (<span>int</span>)((intCount * 100) / fileInfo.Size);
</pre><pre>                            uploadStatus = uploadPercentage.ToString() + "<span>%</span>";
</pre><pre>                            StateHasChanged();
</pre><pre>                        }
</pre><pre>                    }
</pre><pre></pre><pre>                    <span>// Upzip if a .zip file</span>
</pre><pre>                    <span>if</span> (fileInfo.Type == "<span>application/x-zip-compressed</span>")
</pre><pre>                    {
</pre><pre>                        <span>// Unzip files to ProcessDirectory</span>
</pre><pre>                        ZipFile.ExtractToDirectory(FilePath, "<span>Upgrade</span>");
</pre><pre></pre><pre>                        <span>// Close popup</span>
</pre><pre>                        ShowPopup = <span>false</span>;
</pre><pre>                        StateHasChanged();
</pre><pre></pre><pre>                        <span>// Restart Site</span>
</pre><pre>                        var url = UriHelper.ToAbsoluteUri("<span>/api/RestartApp/ShutdownSite</span>");
</pre><pre>                        await Http.GetAsync(url.ToString());
</pre><pre>                    }
</pre><pre></pre><pre>                    uploadStatus = "<span>Upload Complete!</span>";
</pre><pre>                    StateHasChanged();
</pre><pre>                }
</pre><pre>            }
</pre><pre>        }
</pre><pre>        <span>catch</span> (Exception ex)
</pre><pre>        {
</pre><pre>            uploadStatus = ex.GetBaseException().Message;
</pre><pre>            StateHasChanged();
</pre><pre>        }
</pre><pre>    }
</pre><pre>}</pre></pre><pre>&nbsp;</pre><pre>&nbsp;</pre></pre>

<p><img title="image" alt="image" src="http://blazorhelpwebsite.com/Portals/0/Blog/Files/1/4352/Windows-Live-Writer-An-Blazor-Application-Updater_601A-image_b544e8ba-35a2-4b56-b98d-c3a2d3047b39.png" width="293" height="401"></p>

<p>When the web application <em>re-starts</em>, the following code in the <strong>Startup.cs</strong> file is run:</p>



<pre><pre>        <span>// ******</span>
</pre><pre>        <span>// ** Upgrader Code (begin)</span>
</pre><pre>        <span>public</span> Startup(IConfiguration configuration, IWebHostEnvironment env)
</pre><pre>        {
</pre><pre>            <span>// Before we load the CustomClassLibrary.dll (and potentially lock it)</span>
</pre><pre>            <span>// Determine if we have files in the Upgrade directory and process it first</span>
</pre><pre>            <span>if</span> (System.IO.File.Exists(env.ContentRootPath + @"<span>\Upgrade\CustomClassLibrary.dll</span>"))
</pre><pre>            {
</pre><pre>                <span>// Delete current CustomClassLibrary.dll</span>
</pre><pre>                System.IO.File.Delete(env.ContentRootPath + @"<span>\CustomModules\CustomClassLibrary.dll</span>");
</pre><pre></pre><pre>                <span>// Copy new CustomClassLibrary.dll</span>
</pre><pre>                System.IO.File.Copy(
</pre><pre>                    env.ContentRootPath + @"<span>\Upgrade\CustomClassLibrary.dll</span>",
</pre><pre>                    env.ContentRootPath + @"<span>\CustomModules\CustomClassLibrary.dll</span>");
</pre><pre></pre><pre>                <span>// Delete Upgrade File - so it wont be processed again</span>
</pre><pre>                System.IO.File.Delete(env.ContentRootPath + @"<span>\Upgrade\CustomClassLibrary.dll</span>");
</pre><pre>            }
</pre><pre></pre><pre>            var builder = <span>new</span> ConfigurationBuilder()
</pre><pre>                .SetBasePath(env.ContentRootPath)
</pre><pre>                .AddJsonFile("<span>appsettings.json</span>", optional: <span>true</span>, reloadOnChange: <span>true</span>)
</pre><pre>                .AddEnvironmentVariables();
</pre><pre>            Configuration = builder.Build();
</pre><pre>        }
</pre><pre>        <span>// ** Upgrader Code (end)</span>
</pre><pre>        <span>// ******</span></pre></pre>

<pre><pre>    </pre><pre><span face="Calibri">The startup process continues, and the <strong>CustomClassLibrary</strong> assembly is dynamically loaded using the following code:</span></pre><pre>&nbsp;</pre><pre><pre><span>public</span> <span>void</span> ConfigureServices(IServiceCollection services)
</pre><pre>        {
</pre><pre>            <span>// ******</span>
</pre><pre>            <span>// ** Upgrader Code (begin)</span>
</pre><pre></pre><pre>            <span>// Load assembly from path</span>
</pre><pre>            <span>// Note: The project that creates this assembly must reference</span>
</pre><pre>            <span>// the parent project or the MVC framework features will not be </span>
</pre><pre>            <span>// 'found' when the code tries to run</span>
</pre><pre>            <span>// This uses ApplicationParts</span>
</pre><pre>            <span>// https://docs.microsoft.com/en-us/aspnet/core/mvc/advanced/app-parts</span>
</pre><pre>            <span>// Also see: https://github.com/aspnet/Mvc/issues/4572</span>
</pre><pre>            var path = Path.GetFullPath(@"<span>CustomModules\CustomClassLibrary.dll</span>");
</pre><pre>            var CustomClassLibrary = AssemblyLoadContext.Default.LoadFromAssemblyPath(path);
</pre><pre></pre><pre>            <span>// Add framework services.</span>
</pre><pre>            services.AddMvc(options =&gt; options.EnableEndpointRouting = <span>false</span>)
</pre><pre>                .AddApplicationPart(CustomClassLibrary);
</pre><pre></pre><pre>            <span>// ** Upgrader Code (end)</span>
</pre><pre>            <span>// ******</span>
</pre><pre></pre><pre>            services.AddRazorPages();
</pre><pre>            services.AddServerSideBlazor();
</pre><pre>            <span>// ******</span>
</pre><pre>            <span>// ** Upgrader Code (begin)</span>
</pre><pre></pre><pre>            services.AddScoped&lt;HttpClient&gt;();
</pre><pre>            services.AddFileReaderService(options =&gt; options.InitializeOnFirstCall = <span>true</span>);
</pre><pre>            services.AddServerSideBlazor().AddHubOptions(o =&gt;
</pre><pre>            {
</pre><pre>                o.MaximumReceiveMessageSize = 10 * 1024 * 1024;
</pre><pre>            });
</pre><pre></pre><pre>            <span>// ** Upgrader Code (end)</span>
</pre><pre>            <span>// ******</span>
</pre><pre>        }</pre></pre></pre>

<pre><pre>  </pre><pre>&nbsp;</pre><pre><span face="Calibri">Note: This adds the assembly to the web application as an </span><a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/advanced/app-parts"><span face="Calibri">ApplicationPart</span></a><span face="Calibri">.</span></pre></pre>

<p>Without this, the controller methods would not properly work.</p>





<ul>
  <li>See <a href="https://weblog.west-wind.com/posts/2016/Jun/06/Publishing-and-Running-ASPNET-Core-Applications-with-IIS">this article</a> on hosting in IIS </li>

  <li>When published to IIS, you want to set the Application Pool identity for <strong>dotnet.exe</strong> and <strong>w3wp.exe</strong> to <strong>Network Service</strong> and give it write permission (see <a href="https://weblog.west-wind.com/posts/2017/Mar/16/More-on-ASPNET-Core-Running-under-IIS">this article</a> for more information) </li>

  <li>If debugging in <strong>Visual Studio</strong>, you have to stop <strong>Visual Studio</strong> and restart it for the upgrade logic to run in the <strong>Startup.cs</strong> file.&nbsp; To see the application update both the client and the server side correctly, you must publish to IIS or to Azure. </li>
</ul>





<p>The project is available at <a href="http://blazorhelpwebsite.com/Downloads.aspx">http://lightswitchhelpwebsite.com/Downloads.aspx</a></p>

<p>You must have <strong>Visual Studio 2019 </strong>(or higher) installed to run the code.</p>
 
 <!-- End Blog Entry -->
 <!-- Blog Entry Footer Section -->
 
 
 
 <!-- Comments Section -->
 
 
 <div id="dnn_ctr382_MainView_ViewEntry_pnlAddComment">
		
  <table>
   <tbody><tr>
    <td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblAuthor">Your name:</span>
    </td>
    <td id="dnn_ctr382_MainView_ViewEntry_tdAuthor" colspan="1">
     
    </td>
		
    <td id="dnn_ctr382_MainView_ViewEntry_tdGravatarPreview" rowspan="2">
     <p><img id="dnn_ctr382_MainView_ViewEntry_imgGravatarPreview" src="http://www.gravatar.com/avatar/108eeb4a0bc2c8c85cad9dde10e1319e?s=48&amp;r=G&amp;d=http%3a%2f%2fwww.gravatar.com%2favatar%2fb6267c6fe44b457964aed2218e3ef8fe%3fsize%3d48" alt="Gravatar Preview">
     </p>
    </td>
		
   </tr>
   <tr id="dnn_ctr382_MainView_ViewEntry_trGravatarEmail">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblEmail">Your email:</span>
    </td>
			<td>
     
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trUseGravatar">
			<td>
    </td>
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblEmailExplanation">(Optional) Email used only to show <a href="http://www.gravatar.com/" target="_new">Gravatar</a>.</span>
    </td>
			<td>
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trCommentWebsite">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblWebsite">Your website:</span>
    </td>
			<td colspan="2">
     
    </td>
		</tr>
		
   <tr id="dnn_ctr382_MainView_ViewEntry_trCommentTitle">
			<td>
     <span id="dnn_ctr382_MainView_ViewEntry_lblCommentTitle">Title:</span>
    </td>
			<td colspan="2">
     
    </td>
		</tr>
		
   <tr>
    <td colspan="3">
     <span id="dnn_ctr382_MainView_ViewEntry_lblComment">Comment:</span>
    </td>
   </tr>
   <tr>
    <td colspan="3">
     
    </td>
   </tr>
   <tr id="dnn_ctr382_MainView_ViewEntry_rowCaptcha">
			<td colspan="3">
     <span id="dnn_ctr382_MainView_ViewEntry_lblCaptcha">Security Code</span>
     <div>
				<p><img src="http://blazorhelpwebsite.com/DesktopModules/Blog/ImageChallenge.captcha.aspx?captcha=5278589165C98B2CCD7D36CC552AD0BFC96CF2FF34866B8864E76434FC834863DC907D315A59F9D4614A41D1BF79665299CB4C96720F97D387B547C58086B1E6F1072E1F3F264E6B192C246DBB0E39A309BFA60544FFE92D9DF61A5A31F8953BF90262F6BC93A5DA0894BE61254C98A72B96E306A5872D491F375055&amp;alias=blazorhelpwebsite.com" alt="CAPTCHA image"></p><p>
					Enter the code shown above in the box below
				</p></div>
    </td>
		</tr>
		
   <tr>
    <td colspan="3">
     Add Comment&nbsp;&nbsp;
     Cancel&nbsp;
     
    </td>
   </tr>
  </tbody></table>
  
 
	</div>
</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>