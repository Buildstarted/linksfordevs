<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Decompile .NET code while debugging - Visual Studio - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Decompile .NET code while debugging - Visual Studio - linksfor.dev(s)"/>
    <meta property="article:author" content="Mikejo5000"/>
    <meta property="og:description" content="When debugging a .NET application, you may find that you want to view source code that you don&#x27;t have. For example, breaking on an exception or using the call stack to navigate to a source location."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://docs.microsoft.com/en-us/visualstudio/debugger/decompilation?view=vs-2019"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
				<a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Decompile .NET code while debugging - Visual Studio</title>
<div class="readable">
        <h1>Decompile .NET code while debugging - Visual Studio</h1>
            <div>by Mikejo5000</div>
            <div>Reading time: 6-7 minutes</div>
        <div>Posted here: 21 Feb 2020</div>
        <p><a href="https://docs.microsoft.com/en-us/visualstudio/debugger/decompilation?view=vs-2019">https://docs.microsoft.com/en-us/visualstudio/debugger/decompilation?view=vs-2019</a></p>
        <hr/>
<div id="readability-page-1" class="page">


	<div data-bi-name="body">

		<div>

			

			<section>
				<div>


				<div id="main-column">

					<main id="main" role="main" data-bi-name="content" lang="en-us" dir="ltr">



						

						<ul data-bi-name="page info" lang="en-us" dir="ltr">
							<li>
								<time role="presentation" datetime="2020-02-02T00:00:00.000Z" data-article-date-source="ms.date">02/02/2020</time>
							</li>
								<li>4 minutes to read</li>
							<li>
								<a href="https://github.com/MicrosoftDocs/visualstudio-docs/blob/master/docs/debugger/decompilation.md" title="4 Contributors" aria-label="4 Contributors">
									
								</a>
							</li>

						</ul>

						<nav id="center-doc-outline" data-bi-name="intopic toc" role="navigation" aria-label="Article Outline">
							<h3>In this article</h3>
						<ol><li><a href="#generate-source-code">Generate source code</a></li><li><a href="#generate-and-embed-sources-for-an-assembly">Generate and embed sources for an assembly</a></li><li><a href="#extract-and-view-the-embedded-source-code">Extract and view the embedded source code</a></li><li><a href="#known-limitations">Known limitations</a></li></ol></nav>


						<!-- <content> -->
							
<p>When debugging a .NET application, you may find that you want to view source code that you don't have. For example, breaking on an exception or using the call stack to navigate to a source location.</p>
<div>
<p><span aria-hidden="true"></span> Note</p>
<ul>
<li>Source code generation (decompilation) is only available for .NET applications and is based on the open source <a href="https://github.com/icsharpcode/ILSpy" data-linktype="external">ILSpy</a> project.</li>
<li>Decompilation is only available in Visual Studio 2019 16.5 and later.</li>
</ul>
</div>
<h2 id="generate-source-code">Generate source code<a href="#generate-source-code" aria-labelledby="generate-source-code"></a></h2>
<p>When you're debugging and no source code is available, Visual Studio shows the <strong>Source Not Found</strong> document, or if you donâ€™t have symbols for the assembly, the <strong>No Symbols Loaded</strong> document. Both documents have a <strong>Decompile source code</strong> option that generates C# code for the current location. The generated C# code can then be used just like any other source code. You can view the code, inspect variables,  set breakpoints, and so on.</p>
<h3 id="no-symbols-loaded">No symbols loaded<a href="#no-symbols-loaded" aria-labelledby="no-symbols-loaded"></a></h3>
<p>The following illustration shows the <strong>No Symbols Loaded</strong> message.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-no-symbol-found.png?view=vs-2019" alt="Screenshot of no symbol loaded document" data-linktype="relative-path"></p>
<h3 id="source-not-found">Source not found<a href="#source-not-found" aria-labelledby="source-not-found"></a></h3>
<p>The following illustration shows the <strong>Source Not Found</strong> message.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-no-source-found.png?view=vs-2019" alt="Screenshot of source not found document" data-linktype="relative-path"></p>
<h2 id="generate-and-embed-sources-for-an-assembly">Generate and embed sources for an assembly<a href="#generate-and-embed-sources-for-an-assembly" aria-labelledby="generate-and-embed-sources-for-an-assembly"></a></h2>
<p>In addition to generating source code for a specific location, you can generate all the source code for a given .NET assembly. To do this, go to the <strong>Modules</strong> window and from the context menu of a .NET assembly, and then select the <strong>Decompile source code</strong> command. Visual Studio generates a symbol file for the assembly and then embeds the source into the symbol file. In a later step, you can <a href="#extract-and-view-the-embedded-source-code" data-linktype="self-bookmark">extract</a> the embedded source code.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-decompile-source-code.png?view=vs-2019" alt="Screenshot of assembly context menu in modules window with decompile source command." data-linktype="relative-path"></p>
<h2 id="extract-and-view-the-embedded-source-code">Extract and view the embedded source code<a href="#extract-and-view-the-embedded-source-code" aria-labelledby="extract-and-view-the-embedded-source-code"></a></h2>
<p>You can extract source files that are embedded in a symbol file using the <strong>Extract Source Code</strong> command in the context menu of the <strong>Modules</strong> window.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-extract-source-code.png?view=vs-2019" alt="Screenshot of assembly context menu in modules window with extract sources command." data-linktype="relative-path"></p>
<p>The extracted source files are added to the solution as <a href="https://docs.microsoft.com/en-us/visualstudio/ide/reference/miscellaneous-files?view=vs-2019" data-linktype="relative-path">miscellaneous files</a>. The miscellaneous files feature is off by default in Visual Studio. You can enable this feature from the <strong>Tools</strong> &gt; <strong>Options</strong> &gt; <strong>Environment</strong> &gt; <strong>Documents</strong> &gt; <strong>Show Miscellaneous files in Solution Explorer</strong> checkbox. Without enabling this feature, you won't be able to open the extracted source code.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-tools-options-misc-files.png?view=vs-2019" alt="Screenshot of tools option page with miscellaneous files option enabled." data-linktype="relative-path"></p>
<p>Extracted source files appear in the miscellaneous files in <strong>Solution Explorer</strong>.</p>
<p><img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-solution-explorer.png?view=vs-2019" alt="Screenshot of solution explorer with miscellaneous files." data-linktype="relative-path"></p>
<h2 id="known-limitations">Known limitations<a href="#known-limitations" aria-labelledby="known-limitations"></a></h2>
<h3 id="requires-break-mode">Requires break mode<a href="#requires-break-mode" aria-labelledby="requires-break-mode"></a></h3>
<p>Generating source code using decompilation is only possible when the debugger is in break mode and the application is paused. For example, Visual Studio enters break mode when it hits a breakpoint or an exception. You can easily trigger Visual Studio to break the next time your code runs by using the <strong>Break All</strong> command (<img src="https://docs.microsoft.com/en-us/visualstudio/debugger/media/decompilation-break-all.png?view=vs-2019" alt="Break all icon" data-linktype="relative-path">).</p>
<h3 id="decompilation-limitations">Decompilation limitations<a href="#decompilation-limitations" aria-labelledby="decompilation-limitations"></a></h3>
<p>Generating source code from the intermediate format (IL) that is used in .NET assemblies has some inherent limitations. As such, the generated source code doesn't look like the original source code. Most of the differences are in places where the information in the original source code isn't needed at runtime. For example, information such as whitespace, comments, and the names of local variables aren't needed at runtime. We recommend that you use the generated source to understand how the program is executing and not as a replacement for the original source code.</p>
<h3 id="debug-optimized-or-release-assemblies">Debug optimized or release assemblies<a href="#debug-optimized-or-release-assemblies" aria-labelledby="debug-optimized-or-release-assemblies"></a></h3>
<p>When debugging code that was decompiled from an assembly that was compiled using compiler optimizations, you may come across the following issues:</p>
<ul>
<li>Breakpoints may not always bind to the matching sourcing location.</li>
<li>Stepping may not always step to the correct location.</li>
<li>Local variables may not have accurate names.</li>
<li>Some variables may not be available for evaluation.</li>
</ul>
<p>More details can be found in the GitHub issue: <a href="https://github.com/icsharpcode/ILSpy/issues/1901" data-linktype="external">ICSharpCode.Decompiler integration into VS Debugger</a>.</p>
<h3 id="decompilation-reliability">Decompilation reliability<a href="#decompilation-reliability" aria-labelledby="decompilation-reliability"></a></h3>
<p>A relatively small percentage of decompilation attempts may result in failure. This is due to a sequence point null-reference error in ILSpy.  We have mitigated the failure by catching these issues and gracefully failing the decompilation attempt.</p>
<p>More details can be found in the GitHub issue: <a href="https://github.com/icsharpcode/ILSpy/issues/1901" data-linktype="external">ICSharpCode.Decompiler integration into VS Debugger</a>.</p>
<h3 id="limitations-with-async-code">Limitations with async code<a href="#limitations-with-async-code" aria-labelledby="limitations-with-async-code"></a></h3>
<p>The results from decompiling modules with async/await code patterns may be incomplete or fail entirely. The ILSpy implementation of async/await and yield state-machines is only partially implemented.</p>
<p>More details can be found in the GitHub issue: <a href="https://github.com/icsharpcode/ILSpy/issues/1422" data-linktype="external">PDB Generator Status</a>.</p>
<h3 id="just-my-code">Just My Code<a href="#just-my-code" aria-labelledby="just-my-code"></a></h3>
<p>The <a href="https://docs.microsoft.com/visualstudio/debugger/just-my-code" data-linktype="external">Just My Code (JMC)</a> settings allows Visual Studio to step over system, framework, library, and other non-user calls. During a debugging session, the <strong>Modules</strong> window shows which code modules the debugger is treating as My Code (user code).</p>
<p>Decompilation of optimized or release modules produces non-user code. If the debugger breaks in your decompiled non-user code, for example, the <strong>No Source</strong> window appears. To disable Just My Code, navigate to <strong>Tools</strong> &gt; <strong>Options</strong> (or <strong>Debug</strong> &gt; <strong>Options</strong>) &gt; <strong>Debugging</strong> &gt; <strong>General</strong>, and then deselect <strong>Enable Just My Code</strong>.</p>
<h3 id="extracted-sources">Extracted sources<a href="#extracted-sources" aria-labelledby="extracted-sources"></a></h3>
<p>Source code extracted from an assembly has the following limitations:</p>
<ul>
<li>The name and location of the generated files isn't configurable.</li>
<li>The files are temporary and will be deleted by Visual Studio.</li>
<li>The files are placed in a single folder and any folder hierarchy that the original sources had isn't used.</li>
<li>The file name for each file contains a checksum hash of the file.</li>
</ul>
<h3 id="generated-code-is-c-only">Generated code is C# only<a href="#generated-code-is-c-only" aria-labelledby="generated-code-is-c-only"></a></h3>
<p>Decompilation only generates source code files in C#. There is no option to generate files in any other language.</p>

						<!-- </content> -->

						</main>

						<!-- recommended content page section -->

							<nav data-bi-name="recommendation-bottom" hidden="" id="recommended-content-center" aria-labelledby="recommended-content-center-title">
								<h3 id="recommended-content-center-title">Related Articles</h3>
							</nav>

						<!-- end recommended content page section -->

						<!-- rating mobile section -->
								
						<!-- end rating mobile section -->

						<!-- feedback section -->



<section data-bi-name="feedback-section">

	<h2 id="feedback">Feedback</h2>

	

	

	

	<div data-tab-group-independent="" hidden="" data-bi-name="tab-group">
		<ul role="tablist">
			<li role="presentation">
				<a href="#tabpanel-issues-open" role="tab" aria-controls="tabpanel-issues-open" data-tab="issues-open" data-bi-name="tab" aria-selected="true" tabindex="0"></a>
			</li>
			<li role="presentation">
				<a href="#tabpanel-issues-closed" role="tab" aria-controls="tabpanel-issues-closed" data-tab="issues-closed" data-bi-name="tab" aria-selected="false" tabindex="-1"></a>
			</li>
		</ul>
		<section id="tabpanel-issues-open" role="tabpanel" data-tab="issues-open">
			
			<ul aria-label="Open Issues"></ul>
		</section>
		<section id="tabpanel-issues-closed" role="tabpanel" data-tab="issues-closed" hidden="hidden" aria-hidden="true">
			<div>There are no closed issues</div>
			<ul aria-label="Closed Issues"></ul>
		</section>
	</div>
	
</section>

						<!-- end feedback section -->

						<!-- feedback report section -->
						<!-- end feedback report section -->

						
					</div>

					

					<!--end of div.columns -->
				</div>

			<!--end of .primary-holder -->
			</section>

			
		</div>

		<!--end of .mainContainer -->
	</div>

	

	

	


</div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>