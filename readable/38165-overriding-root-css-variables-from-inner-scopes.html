<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Overriding :root CSS variables from inner scopes -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>Overriding :root CSS variables from inner scopes</h1><div><div class="post-text" itemprop="text"><p>This is a scoping issue. The way you're doing it, you're inheriting <code>--orange</code> from the <code>:root</code>, and <code>--orange</code> in the <code>:root</code> has a lightness of 68%. </p><p>In order to change it, you'll want to re-scope the <code>--orange</code> variable to an element that will look up the new <code>--lightness</code> value. There's a few ways to pull this off:</p><p><strong>Option 1: duplicate the <code>--orange</code> variable on the element:</strong></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false"><div class="snippet-code"><pre class="snippet-code-css lang-css prettyprint-override"><code>:root {
  --lightness: 68%;
  --orange: hsl(255, 72%, var(--lightness));
}
.card {
  background: var(--orange);
  --orange: hsl(255, 72%, var(--lightness));
}
.card:hover {

  --lightness: 45%;
}</code></pre><pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div class="card"&gt;
  Hello world
&lt;/div&gt;</code></pre></div></div><p>Obviously this kinda stinks, because you're going to have to duplicate that <code>--orange</code> variable. </p><p><strong>Option 2:</strong>
You could abstract the other parameters of <code>--orange</code> so that it's not as duplicative. I'd be a fan of this approach despite the fact that it's more text:</p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false"><div class="snippet-code"><pre class="snippet-code-css lang-css prettyprint-override"><code>:root {
  --lightness: 68%;
  --orangeHue: 255;
  --orangeSat: 72%;
  --orange: hsl(var(--orangeHue), var(--orangeSat), var(--lightness));
}
.card {
  background: var(--orange);
  --orange: hsl(var(--orangeHue), var(--orangeSat), var(--lightness));
}
.card:hover {

  --lightness: 45%;
}</code></pre><pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div class="card"&gt;
  Hello world
&lt;/div&gt;</code></pre></div></div><p>What you could <em>also</em> do is scope this specifically to a <code>.darkMode</code> class that might be applied to the HTML element or the body. This could also make sense because it's clear what the intent is from the code:</p><p><strong>Option 3</strong></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false"><div class="snippet-code"><pre class="snippet-code-css lang-css prettyprint-override"><code>:root {
  --lightness: 68%;
  --orangeHue: 255;
  --orangeSat: 72%;
  --orange: hsl(var(--orangeHue), var(--orangeSat), var(--lightness));
}

.card {
  background: var(--orange);

}
.card:hover {
  --lightness: 45%;
}
.darkMode .card {
  --orange: hsl(var(--orangeHue), var(--orangeSat), var(--lightness));
}</code></pre><pre class="snippet-code-html lang-html prettyprint-override"><code>  &lt;div class="darkMode"&gt;
    &lt;div class="card"&gt;
      Hello world
    &lt;/div&gt;
  &lt;/div&gt;</code></pre></div></div><p>Regardless of how you go, the issue is that the <code>--orange</code> variable is inheriting from its original scope where <code>--lightness</code> is set. Think of it as "inheriting a computed value".</p><p>In order to get <code>--orange</code> to get the new lightness, you need a new <code>--orange</code> somewhere. </p><p><strong>Option 4</strong></p><p>I'm not sure what your theme pattern is, but I can explain how I created a dark mode on my own <a href="https://blog.frankmtaylor.com" rel="noreferrer">blog</a> . If you look at the <a href="https://blog.frankmtaylor.com/wp-content/themes/paceaux3/style.css?ver=5.2.3" rel="noreferrer">CSS</a> What you'll see is that I've created two complete themes that follow the same naming convention:</p><pre><code>--themeLightTextColor: rgb(55, 55, 55);
--themeLightBGColor: rgb(255, 255, 255);
--themeLightAccentColor: rgb(248, 248, 248);
--themeLightTrimColor: rgb(238, 238, 238);
--themeDarkTextColor: rgb(220, 220, 220);
--themeDarkBGColor: rgb(23, 23, 23);
--themeDarkAccentColor: rgb(55, 55, 55);
--themeDarkTrimColor: rgb(40, 40, 40);
</code></pre><p>What I then do is create a <em>third</em> set of variables whose job it is to be the "active" managers:</p><pre><code>--themeActiveLinkColor: var(--linkColor);
--themeActiveLinkColorHover: var(--linkColorHover);
--themeActiveTextColor: var(--themeLightTextColor);
--themeActiveEditorialTextColor: var(--themeLightPltNLow);
--themeActiveBGColor: var(--themeLightBGColor);
--themeActiveAccentColor: var(--themeLightAccentColor);
--themeActiveTrimColor: var(--themeLightTrimColor);
</code></pre><p>Then, I scope the active theme settings under a single class:</p><pre><code>.theme--dark {
   --themeActiveTextColor: var(--themeDarkTextColor);
   --themeActiveEditorialTextColor: var(--themeDarkPltNLow);
   --themeActiveBGColor: var(--themeDarkBGColor);
   --themeActiveAccentColor: var(--themeDarkAccentColor);
   --themeActiveTrimColor: var(--themeDarkTrimColor);
}
</code></pre><p>It seems like maybe your intent is to not have to explicitly declare a theme, but rather tweak some "root variables" to adjust it. But I would suggest that maybe you have a pattern in place where a single class can change an active theme. The advantage to this pattern is that you would be able to also adjust any "root variables" on the class name. </p></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>