<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Updates to .NET Core Windows Forms designer in Visual Studio 16.5 Preview 1 -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>Updates to .NET Core Windows Forms designer in Visual Studio 16.5 Preview 1</h1>
    <div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2018/10/Olia-Gavrysh-e1538680748374-150x150.jpg" width="58" alt="Olia Gavrysh" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 alignnone photo"><p>Olia</p></div></div></div><p>We are happy to announce the new preview version of the .NET Core Windows Forms designer, which is available with the Visual Studio 16.5 Preview 1.</p><p>The big news is that the designer is now part of Visual Studio! This means that <strong><em>installing the .NET Core Windows Forms designer from a separate VSIX is no longer needed!</em></strong></p><p>To use the designer:</p><ul><li>You must be using <a href="https://visualstudio.microsoft.com/vs/preview/">Visual Studio</a> 16.5 Preview 1 or a later version.</li><li>You need to enable the designer in Visual Studio. Go to <strong>Tools</strong> &gt; <strong>Options</strong> &gt; <strong>Environment</strong> &gt; <strong>Preview Features</strong> and select the <strong>Use the preview Windows Forms designer for .NET Core apps</strong> option.</li></ul><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/settings.png" alt width="865" class="alignnone size-full wp-image-25627" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/settings.png 865w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/settings-300x195.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/settings-768x499.png 768w" sizes="(max-width: 865px) 100vw, 865px"></p><p>If you haven&#x2019;t enabled the Windows Forms designer, you might notice a yellow bar in the upper part of your Visual Studio Preview suggesting you to enable it:</p><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/goldbar.png" alt width="508" class="alignnone size-full wp-image-25626" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/goldbar.png 508w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/goldbar-300x79.png 300w" sizes="(max-width: 508px) 100vw, 508px"></p><p>Selecting the <strong>Enable</strong> link takes you to the same place in <strong>Tools &gt; Options &gt; Environment &gt; Preview Features</strong> where you can enable the Windows Forms .NET Core designer preview.</p><h2>What&#x2019;s new</h2><p>In this preview version of the designer, we&#x2019;ve improved reliability and enhanced performance, fixed many bugs, and added the following features:</p><ul><li>Designer Actions for available controls, such as making a <code>TextBox</code> multiline or adding items to a <code>CheckedListBox</code>.</li><li>Improved Undo/Redo actions to prevent hangs or incomplete undos.</li><li>Scrollbars now appear when the form is larger than the visible document window and on Forms with the <code>AutoScroll</code> property set to <code>True</code> and controls outside the visible area of the form.</li><li>Added <code>GroupBox</code> and <code>Panel</code> container control support.</li><li>Copy-paste is supported between container controls.</li><li>Limited Component Tray support.</li><li>Local resources support.</li><li><code>Timer</code> control support.</li></ul><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/designer.png" alt width="1023" class="alignnone size-full wp-image-25624" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/designer.png 1023w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/designer-300x286.png 300w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/designer-768x732.png 768w" sizes="(max-width: 1023px) 100vw, 1023px"></p><h2>Features currently under development</h2><p>Support for the following features is currently on our backlog and being actively addressed:</p><ul><li>Localization of your own Windows Forms applications.</li><li>Data-related scenarios including data binding and data-related controls.</li><li>Document Outline Window.</li><li>The remaining container controls.</li><li><code>MenuStrip</code> and <code>ToolStrip</code> are expected in the next preview.</li><li>Third-party controls and UserControls.</li><li>Inherited Forms and UserControls.</li><li>Tab Order.</li><li>Tools &gt; Options page for the designer.</li></ul><h2>Upgrade to .NET Core 3.1</h2><p>We recommend that you upgrade your applications to .NET Core 3.1 before using the Windows Forms .NET Core designer. Visual Studio may not perform as expected if your project is targeting an earlier version of .NET Core.</p><p>In .NET Core 3.1 a few outdated Windows Forms controls (<code>DataGrid</code>, <code>ToolBar</code>, <code>ContextMenu</code>, <code>Menu</code>, <code>MainMenu</code>, <code>MenuItem</code>, and their child components) were removed. These controls were replaced with newer and more powerful ones in .NET Framework 2.0 in 2005 and haven&#x2019;t been available by default in the designer Toolbox. Moving forward with .NET Core, we had to cut them out of the runtime as well in order to maintain support for areas like high DPI, accessibility, and reliability. For more information please see the <a href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1/">announcement blog post</a>.</p><h2>Under the hood of the new Windows Forms Core designer (or why it takes us so much time)</h2><p>We know that you&#x2019;ve noticed: although the Windows Forms .NET Core designer Preview has basic functionalities, it is not mature enough for providing the full Windows Forms experience and we need a little more time to get there. In this chapter we wanted to give you a glimpse into how we are implementing the designer for .NET Core and explain some of the time frames.</p><h3>The concept</h3><p>Visual Studio is based on .NET Framework. The Windows Forms Core designer however should enable users to create a visual design for <em>.NET Core</em> apps. If you&#x2019;ve tried to &#x201C;mix&#x201D; .NET Framework and .NET Core projects, you probably know what the challenge is here: .NET Core assemblies cannot be integrated into .NET Framework projects. Because of this (and some other reasons that we don&#x2019;t want to overwhelm you with), we came up with the following internal concept: whenever the .NET Core designer is started (for example, by double-clicking on a form), a second designer process starts under the hood almost independently of Visual Studio. And that process takes over the .NET Core design part, or better to say &#x2013; it&#x2019;s responsible for instantiating the .NET Core based objects that are then rendered on the monitor by the .NET Core process and not the Visual Studio process.</p><p>For example, when you drag a <code>Button</code> from the Toolbox onto a form &#x2013; this action is handled by Visual Studio (<code>devenv.exe</code> process which is .NET Framework). But, once you release the mouse button to drop the <code>Button</code> on the form, all further actions (instantiating a <code>Button</code>, rendering it at a specific location, and so on) are related to .NET Core. That means .NET Framework process can no longer handle it. Instead it calls to a .NET Core process which does the job and also creates the user interface code at runtime, which lives in the <code>InitializeComponent</code> method of a <code>Form</code> or a <code>UserControl</code>. This is the same way the XAML designer works for UWP and .NET Core.</p><h3>Was there a better way?</h3><p>There was another approach we could take that would save us a lot of time. We could simply &#x201C;map&#x201D; the .NET Core objects, features, and so on to .NET Framework ones. But this approach has significant limitations. The new features, that are available only in .NET Core won&#x2019;t be available in this &#x201C;mapped&#x201D; designer. And we already have quite a few Core-only functionalities such as: the new <code>PlaceholderText</code> property of the <code>TextBox</code> control, the new default font, that is used in Windows Forms .NET Core. And going forward we expect more innovations coming.</p><p>That&#x2019;s why we turned down that idea, and proceeded with the described above &#x201C;out-of-process approach&#x201D; that handles new additions to .NET Core very well.</p><h3>This is how it works</h3><p>The Property Browser in Visual Studio is based on the .NET Framework. However, thanks to <code>TypeDescriptors</code>, we can create &#x201C;proxy objects&#x201D; as a communication link between the two processes at design time to access the actual .NET Core objects in the other (.NET Core) process via inter-process communication. That way, even though the UI is still in Visual Studio and thus is .NET Framework, users will see and edit every single aspect of the Windows Forms .NET Core objects&#x2019; functionality.</p><p>The downside of this approach is that it requires us to rewrite significant portions of the Framework Windows Forms designer. To do this correctly, with the performance and stability that you expect, we had to set out a significant amount of time. The XAML designer team already developed an out-of-process model for UWP XAML designer support when UWP implemented .NET Standard 2.0. They were able to share much of that architecture with WPF running against .NET Core. This gave a head-start for .NET Core WPF designer, and now it is released and ready for .NET Core developers. The Windows Forms team started working on the designer with the .NET Core 3.0 announcement. We expect to get to feature parity by May 2020, and complete the work by the end of 2020.</p><p>The Windows Forms team wants to say <strong>THANK YOU!</strong> to those who are already testing preview versions of the designer and reporting issues! We know the experience may not be stable and we appreciate your patience and your desire to help us! &#x1F642;</p><h2>How to report issues</h2><p>Your feedback and help are important to us! Please report issues or feature requests via the Visual Studio Feedback channel. To do so, select the <strong>Send Feedback</strong> icon in Visual Studio top-right corner as shown in the following picture and specify that it is related to the &#x201C;WinForms .NET Core&#x201D; area.</p><p><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/feedback.png" alt width="337" class="alignnone size-full wp-image-25625" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/feedback.png 337w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/12/feedback-300x172.png 300w" sizes="(max-width: 337px) 100vw, 337px"></p></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>