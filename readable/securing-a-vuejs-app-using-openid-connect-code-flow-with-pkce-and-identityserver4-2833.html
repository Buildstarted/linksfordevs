<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Securing a Vue.js app using OpenID Connect Code Flow with PKCE and IdentityServer4 - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Securing a Vue.js app using OpenID Connect Code Flow with PKCE and IdentityServer4 - linksfor.dev(s)"/>
    <meta property="article:author" content="damienbod"/>
    <meta property="og:description" content="This article shows how to setup a Vue.js SPA application to authenticate and authorize using OpenID Connect Code flow with PKCE. This is good solution when implementing SPA apps requesting data fro&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
	<div class="devring" style="background: #222">
		<div class="grid">
			<div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
				<span class="devring-title">devring.club</span>
				<a href="https://devring.club/site/1/previous" class="devring-previous">Previous</a>
				<a href="https://devring.club/random" class="devring-random">Random</a>
				<a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
			</div>
		</div>
	</div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Securing a Vue.js app using OpenID Connect Code Flow with PKCE and IdentityServer4</title>
<div class="readable">
        <h1>Securing a Vue.js app using OpenID Connect Code Flow with PKCE and IdentityServer4</h1>
            <div>by damienbod</div>
            <div>Reading time: 9-12 minutes</div>
        <div>Posted here: 27 Feb 2019</div>
        <p><a href="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/">https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>

							<p>This article shows how to setup a <a href="https://vuejs.org/">Vue.js</a> SPA application to authenticate and authorize using <a href="https://openid.net/connect/">OpenID Connect</a> Code flow with PKCE. This is good solution when implementing SPA apps requesting data from APIs on separate domains. The <a href="https://github.com/IdentityModel/oidc-client-js">oidc-client-js</a> npm package is used to implement the client side authentication logic and validation logic. <a href="https://github.com/IdentityServer/IdentityServer4">IdentityServer4</a> and <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity">ASP.NET Core Identity</a> are used to implement the secure token server.</p>
<p><strong>Code</strong> <a href="https://github.com/damienbod/IdentityServer4VueJs" rel="nofollow">https://github.com/damienbod/IdentityServer4VueJs</a></p>
<p>Other posts in this series</p>
<p><a href="https://damienbod.com/2019/10/04/building-and-securing-an-asp-net-core-api-with-a-hosted-vue-js-ui/">Building and securing an ASP.NET Core API with a hosted Vue.js UI</a></p>
<p><strong>IdentityServer4 Client configuration</strong></p>
<p>The secure token server was implemented using IdentityServer4 with ASP.NET Core Identity and an Entity Framework Core database. A client configuration was added for the Vue.js application. This configures the code flow with PKCE and supports the callback and the silent-renew redirects. </p>
<div><div id="highlighter_289803"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p></td><td><div><p><code>new</code> <code>Client</code></p><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>ClientName = </code><code>"vuejs_code_client"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>ClientId = </code><code>"vuejs_code_client"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AccessTokenType = AccessTokenType.Reference,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AccessTokenLifetime = 330,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>IdentityTokenLifetime = 300,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>RequireClientSecret = </code><code>false</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AllowedGrantTypes = GrantTypes.Code,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>RequirePkce = </code><code>true</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AllowAccessTokensViaBrowser = </code><code>true</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>RedirectUris = </code><code>new</code> <code>List&lt;</code><code>string</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>PostLogoutRedirectUris = </code><code>new</code> <code>List&lt;</code><code>string</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AllowedCorsOrigins = </code><code>new</code> <code>List&lt;</code><code>string</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>AllowedScopes = </code><code>new</code> <code>List&lt;</code><code>string</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"openid"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"dataEventRecords"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"dataeventrecordsscope"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"role"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"profile"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"email"</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p></div></td></tr></tbody></table></div></div>
<p><strong>Vue.js Client setup</strong></p>
<p>The Vue.js client is implemented using <a href="https://cli.vuejs.org/">Vue.js CLI </a>to create a new typescript application. The STS is configured to run with HTTPS. This needs to be configured in the Vue.js app.</p>
<p>This can be done in the package.json file. The serve script was changed to support HTTPS. The oidc-client and the <a href="https://github.com/axios/axios">axios</a> npm packages were added to the solution as well as the standard Vue.js npm packages.</p>
<p>axios is used for the API requests which uses the access token after a successful login.</p>
<div><div id="highlighter_168405"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p></td><td><div><p><code>{</code></p><p><code>&nbsp;&nbsp;</code><code>"name"</code><code>: </code><code>"vue-js-oidc-client"</code><code>,</code></p><p><code>&nbsp;&nbsp;</code><code>"version"</code><code>: </code><code>"0.1.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;</code><code>"private"</code><code>: </code><code>true</code><code>,</code></p><p><code>&nbsp;&nbsp;</code><code>"scripts"</code><code>: {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"serve"</code><code>: </code><code>"vue-cli-service serve --https --port 44357"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"build"</code><code>: </code><code>"vue-cli-service build"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"lint"</code><code>: </code><code>"vue-cli-service lint"</code></p><p><code>&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;</code><code>"dependencies"</code><code>: {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"axios"</code><code>: </code><code>"^0.18.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"oidc-client"</code><code>: </code><code>"^1.6.1"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"vue"</code><code>: </code><code>"^2.5.21"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"vue-class-component"</code><code>: </code><code>"^6.0.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"vue-property-decorator"</code><code>: </code><code>"^7.0.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"vue-router"</code><code>: </code><code>"^3.0.1"</code></p><p><code>&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;</code><code>"devDependencies"</code><code>: {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"@vue/cli-plugin-babel"</code><code>: </code><code>"^3.3.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"@vue/cli-plugin-typescript"</code><code>: </code><code>"^3.3.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"@vue/cli-service"</code><code>: </code><code>"^3.3.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"typescript"</code><code>: </code><code>"^3.0.0"</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>"vue-template-compiler"</code><code>: </code><code>"^2.5.21"</code></p><p><code>&nbsp;&nbsp;</code><code>}</code></p><p><code>}</code></p></div></td></tr></tbody></table></div></div>
<p>The authentication was implemented following the blog from <a href="https://www.jerriepelser.com/blog/using-auth0-with-vue-oidc-client-js/">Jerrie Pelser</a> and the samples from the oidc-client github repo.</p>
<p>An AuthService typescript class was implemented with the oidc-client settings. The code flow is configured here, as well as the silent renew. Then some functions were implemented for login, logout and getting an access token.</p>
<div><div id="highlighter_381780"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p></td><td><div><p><code>import { UserManager, WebStorageStateStore, User } </code><code>from</code> <code>'oidc-client'</code><code>;</code></p><p><code>export </code><code>default</code> <code>class</code> <code>AuthService {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>private</code> <code>userManager: UserManager;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>constructor() {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>const</code> <code>settings: any = {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>userStore: </code><code>new</code> <code>WebStorageStateStore({ store: window.localStorage }),</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>authority: STS_DOMAIN,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>client_id: </code><code>'vuejs_code_client'</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>automaticSilentRenew: </code><code>true</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>response_type: </code><code>'code'</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>scope: </code><code>'openid profile dataEventRecords'</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>filterProtocolClaims: </code><code>true</code><code>,</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>};</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>this</code><code>.userManager = </code><code>new</code> <code>UserManager(settings);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>getUser(): Promise&lt;User&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>this</code><code>.userManager.getUser();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>login(): Promise&lt;</code><code>void</code><code>&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>this</code><code>.userManager.signinRedirect();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>logout(): Promise&lt;</code><code>void</code><code>&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>this</code><code>.userManager.signoutRedirect();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public</code> <code>getAccessToken(): Promise&lt;</code><code>string</code><code>&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>this</code><code>.userManager.getUser().then((data: any) =&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code> <code>data.access_token;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>}</code></p></div></td></tr></tbody></table></div></div>
<p>The AuthService was then used in the Home.vue file just like <a href="https://www.jerriepelser.com/blog/using-auth0-with-vue-oidc-client-js/">Jerrie Pelser</a> did it. Thanks for this blog. An API call was added to the component which gets the access token from the oidc lib, and requests data from a secure API. The data is then displayed in the UI.</p>
<div><div id="highlighter_585501"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p><p>59</p><p>60</p><p>61</p><p>62</p><p>63</p><p>64</p><p>65</p><p>66</p><p>67</p><p>68</p><p>69</p><p>70</p><p>71</p><p>72</p><p>73</p><p>74</p><p>75</p><p>76</p><p>77</p><p>78</p><p>79</p><p>80</p><p>81</p><p>82</p><p>83</p><p>84</p><p>85</p><p>86</p><p>87</p><p>88</p><p>89</p><p>90</p><p>91</p><p>92</p><p>93</p><p>94</p><p>95</p><p>96</p><p>97</p><p>98</p><p>99</p><p>100</p><p>101</p><p>102</p></td><td><div><p><code>&lt;</code><code>template</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>div</code> <code>class</code><code>=</code><code>"home"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>img</code> <code>alt</code><code>=</code><code>"Vue logo"</code> <code>src</code><code>=</code><code>"../assets/logo.png"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>div</code> <code>class</code><code>=</code><code>"home"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>p</code> <code>v-if</code><code>=</code><code>"isLoggedIn"</code><code>&gt;User: {{ username }}&lt;/</code><code>p</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>button</code> <code>class</code><code>=</code><code>"btn"</code> <code>@</code><code>click</code><code>=</code><code>"login"</code> <code>v-if</code><code>=</code><code>"!isLoggedIn"</code><code>&gt;Login&lt;/</code><code>button</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>button</code> <code>class</code><code>=</code><code>"btn"</code> <code>@</code><code>click</code><code>=</code><code>"logout"</code> <code>v-if</code><code>=</code><code>"isLoggedIn"</code><code>&gt;Logout&lt;/</code><code>button</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>button</code> <code>class</code><code>=</code><code>"btn"</code> <code>@</code><code>click</code><code>=</code><code>"getProtectedApiData"</code> <code>v-if</code><code>=</code><code>"isLoggedIn"</code><code>&gt;Get API data&lt;/</code><code>button</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>div</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>div</code> <code>v-if</code><code>=</code><code>"dataEventRecordsItems &amp;&amp; dataEventRecordsItems.length"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>div</code> <code>v-for</code><code>=</code><code>"dataEventRecordsItem of dataEventRecordsItems"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>p</code><code>&gt;&lt;</code><code>em</code><code>&gt;Id:&lt;/</code><code>em</code><code>&gt; {{dataEventRecordsItem.Id}} &lt;</code><code>em</code><code>&gt;Details:&lt;/</code><code>em</code><code>&gt; {{dataEventRecordsItem.Name}}&nbsp; - {{dataEventRecordsItem.Description}} - {{dataEventRecordsItem.Timestamp}}&lt;/</code><code>p</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>div</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>br</code> <code>/&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>div</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>div</code><code>&gt;</code></p><p><code>&lt;/</code><code>template</code><code>&gt;</code></p><p><code>&lt;</code><code>script</code> <code>lang</code><code>=</code><code>"ts"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>import { Component, Vue } from 'vue-property-decorator';</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>import AuthService from '@/services/auth.service';</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>import axios from 'axios';</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>const auth = new AuthService();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>@Component({</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>components: {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>},</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>})</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>export default class Home extends Vue {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public currentUser: string = '';</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public accessTokenExpired: boolean | undefined = false;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public isLoggedIn: boolean = false;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public dataEventRecordsItems: [] = [];</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>get username(): string {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return this.currentUser;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public login() {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>auth.login();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public logout() {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>auth.logout();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public mounted() {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>auth.getUser().then((user) =&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>this.currentUser = user.profile.name;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>this.accessTokenExpired = user.expired;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>this.isLoggedIn = (user !== null &amp;&amp; !user.expired);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>public getProtectedApiData() {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>auth.getAccessToken().then((userToken: string) =&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>axios.defaults.headers.common['Authorization'] = `Bearer ${userToken}`;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>.then((response: any) =&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>this.dataEventRecordsItems = response.data;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>})</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>.catch((error: any) =&gt; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>alert(error);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&lt;/</code><code>script</code><code>&gt;</code></p><p><code>&lt;</code><code>style</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>.btn {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>color: #42b983;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>font-weight: bold;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>background-color: #007bff;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>border-color: #007bff;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>display: inline-block;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>font-weight: 400;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>text-align: center;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>vertical-align: middle;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>-webkit-user-select: none;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>-moz-user-select: none;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>-ms-user-select: none;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>user-select: none;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>background-color: transparent;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>border: 1px solid #42b983;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>padding: .375rem .75rem;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>margin: 10px;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>font-size: 1rem;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>line-height: 1.5;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>border-radius: .25rem;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}</code></p><p><code>&lt;/</code><code>style</code><code>&gt;</code></p></div></td></tr></tbody></table></div></div>
<p>Two html files are required in the root web folder. In Vue.js, this is the public folder. A callback.html file is required to handle the code redirect.</p>
<div><div id="highlighter_388310"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p></td><td><div><p><code>&lt;!</code><code>DOCTYPE</code> <code>html&gt;</code></p><p><code>&lt;</code><code>html</code><code>&gt;</code></p><p><code>&lt;</code><code>head</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>meta</code> <code>charset</code><code>=</code><code>"UTF-8"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>title</code><code>&gt;Waiting...&lt;/</code><code>title</code><code>&gt;</code></p><p><code>&lt;/</code><code>head</code><code>&gt;</code></p><p><code>&lt;</code><code>body</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>script</code> <code>src</code><code>=</code><code>"js/oidc-client.min.js"</code><code>&gt;&lt;/</code><code>script</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>script</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var mgr = new Oidc.UserManager({ response_mode: 'query', userStore: new Oidc.WebStorageStateStore() }).signinRedirectCallback().then(function (user) {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>console.log("signin response success", user);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>window.location.href = '../';</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>}).catch(function (err) {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>console.log(err);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>script</code><code>&gt;</code></p><p><code>&lt;/</code><code>body</code><code>&gt;</code></p><p><code>&lt;/</code><code>html</code><code>&gt;</code></p></div></td></tr></tbody></table></div></div>
<p>The silent-renew.html is used for the silent renew in the iframe.</p>
<div><div id="highlighter_949194"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p></td><td><div><p><code>&lt;!</code><code>DOCTYPE</code> <code>html&gt;</code></p><p><code>&lt;</code><code>html</code><code>&gt;</code></p><p><code>&lt;</code><code>head</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>meta</code> <code>charset</code><code>=</code><code>"UTF-8"</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>title</code><code>&gt;Waiting...&lt;/</code><code>title</code><code>&gt;</code></p><p><code>&lt;/</code><code>head</code><code>&gt;</code></p><p><code>&lt;</code><code>body</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>script</code> <code>src</code><code>=</code><code>"js/oidc-client.min.js"</code><code>&gt;&lt;/</code><code>script</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;</code><code>script</code><code>&gt;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>var mgr = new Oidc.UserManager().signinSilentCallback();</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code>&lt;/</code><code>script</code><code>&gt;</code></p><p><code>&lt;/</code><code>body</code><code>&gt;</code></p><p><code>&lt;/</code><code>html</code><code>&gt;</code></p></div></td></tr></tbody></table></div></div>
<p>Both of these html files require a reference to the oidc-client.min.js which is copied to the js folder.</p>
<p>When the application is run, the user can login and get the secure data. Start the two dotnet core applications from Visual Studio and start the Vue.js application from the cmd using ‘npm run serve’</p>
<p>When the application starts login:</p>
<p><img data-attachment-id="11871" data-permalink="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/vue-js-oidc-client_01/" data-orig-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png" data-orig-size="1061,871" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-js-oidc-client_01" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=640" src="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=640&amp;h=525" alt="" width="640" height="525" srcset="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=640&amp;h=525 640w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=150&amp;h=123 150w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=600&amp;h=493 600w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=768&amp;h=630 768w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png?w=1024&amp;h=841 1024w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_01.png 1061w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>Give your consent:</p>
<p><img data-attachment-id="11872" data-permalink="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/vue-js-oidc-client_02/" data-orig-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png" data-orig-size="1090,1340" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-js-oidc-client_02" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=488" data-large-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=640" src="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=640&amp;h=787" alt="" width="640" height="787" srcset="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=640&amp;h=787 640w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=122&amp;h=150 122w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=488&amp;h=600 488w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=768&amp;h=944 768w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png?w=833&amp;h=1024 833w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_02.png 1090w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>request the API data:</p>
<p><img data-attachment-id="11873" data-permalink="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/vue-js-oidc-client_03/" data-orig-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png" data-orig-size="976,978" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-js-oidc-client_03" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=640" src="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=640&amp;h=641" alt="" width="640" height="641" srcset="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=640&amp;h=641 640w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=150&amp;h=150 150w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=600&amp;h=600 600w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png?w=768&amp;h=770 768w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_03.png 976w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>And view the data:</p>
<p><img data-attachment-id="11874" data-permalink="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/vue-js-oidc-client_04/" data-orig-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png" data-orig-size="886,940" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-js-oidc-client_04" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=566" data-large-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=640" src="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=640&amp;h=679" alt="" width="640" height="679" srcset="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=640&amp;h=679 640w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=141&amp;h=150 141w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=566&amp;h=600 566w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png?w=768&amp;h=815 768w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_04.png 886w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>Silent renew will also work using the iframe which has to be allowed on the server. This can be viewed in the F12 network tab in Chrome.</p>
<p><img data-attachment-id="11875" data-permalink="https://damienbod.com/2019/01/29/securing-a-vue-js-app-using-openid-connect-code-flow-with-pkce-and-identityserver4/vue-js-oidc-client_05/" data-orig-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png" data-orig-size="1083,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-js-oidc-client_05" data-image-description="" data-medium-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=600" data-large-file="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=640" src="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=640&amp;h=192" alt="" width="640" height="192" srcset="https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=640&amp;h=192 640w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=150&amp;h=45 150w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=600&amp;h=180 600w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=768&amp;h=230 768w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png?w=1024&amp;h=307 1024w, https://damienbod.files.wordpress.com/2019/01/vue-js-oidc-client_05.png 1083w" sizes="(max-width: 640px) 100vw, 640px"></p>
<p>It is pretty easy to setup a secure Vue.js application using OIDC code Flow with PKCE. </p>
<p><strong>Links</strong></p>
<p><a href="https://cli.vuejs.org/" rel="nofollow">https://cli.vuejs.org</a></p>
<p><a href="https://www.jerriepelser.com/blog/using-auth0-with-vue-oidc-client-js/" rel="nofollow">https://www.jerriepelser.com/blog/using-auth0-with-vue-oidc-client-js/</a></p>
<p><a href="https://github.com/joaojosefilho/vuejsOidcClient" rel="nofollow">https://github.com/joaojosefilho/vuejsOidcClient</a></p>
<p><a href="https://www.scottbrady91.com/Angular/Migrating-oidc-client-js-to-use-the-OpenID-Connect-Authorization-Code-Flow-and-PKCE" rel="nofollow">https://www.scottbrady91.com/Angular/Migrating-oidc-client-js-to-use-the-OpenID-Connect-Authorization-Code-Flow-and-PKCE</a></p>
<p><a href="https://github.com/IdentityModel/oidc-client-js/" rel="nofollow">https://github.com/IdentityModel/oidc-client-js/</a></p>
<p><a href="https://tools.ietf.org/html/rfc7636" rel="nofollow">https://tools.ietf.org/html/rfc7636</a></p>
<p><a href="https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest" rel="nofollow">https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest</a></p>

							
							
						</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
		<div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>