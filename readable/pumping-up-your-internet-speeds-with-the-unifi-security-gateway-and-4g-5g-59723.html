<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Pumping up your internet speeds with the Unifi Security Gateway and 4G/5G - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Pumping up your internet speeds with the Unifi Security Gateway and 4G/5G - linksfor.dev(s)"/>
    <meta property="article:author" content="https://www.facebook.com/scott.helme"/>
    <meta property="og:description" content="I&#x27;ve worked from home for quite some time and having both fast and reliable internet access has of course always been a huge concern for me. In order to increase both the speed and reliability of my internet connection, I recently made an upgrade.  My Ubiquiti Home NetworkRegular readers will"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://scotthelme.co.uk/pumping-up-your-internet-speeds/"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Pumping up your internet speeds with the Unifi Security Gateway and 4G/5G</title>
<div class="readable">
        <h1>Pumping up your internet speeds with the Unifi Security Gateway and 4G/5G</h1>
            <div>by https://www.facebook.com/scott.helme</div>
            <div>Reading time: 8-10 minutes</div>
        <div>Posted here: 16 Mar 2020</div>
        <p><a href="https://scotthelme.co.uk/pumping-up-your-internet-speeds/">https://scotthelme.co.uk/pumping-up-your-internet-speeds/</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
						<p>I've worked from home for quite some time and having both fast and reliable internet access has of course always been a huge concern for me. In order to increase both the speed <em>and</em> reliability of my internet connection, I recently made an upgrade.</p><hr><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="my-ubiquiti-home-network">My Ubiquiti Home Network</h4><p>Regular readers will know about my <a href="https://scotthelme.co.uk/my-ubiquiti-home-network/">Ubiquiti Home Network</a>, a seriously worthwhile investment I made into getting myself kitted out with something to replace the awful WiFi router provided by my Internet Service Provider (ISP). </p><!--kg-card-begin: html--><br>
 
<br><!--kg-card-end: html--><p>Seriously, I couldn't be more impressed with the hardware and if you follow me on Twitter you will see occasional tweets about new features I've found or cool stuff that it can do, like this:</p><!--kg-card-begin: html--><br>

<br><!--kg-card-end: html--><p>I could harp on all day about how awesome this is to play with, the sweet Web UI, how to <a href="https://scotthelme.co.uk/setting-up-https-on-the-unifi-cloudkey/">setup HTTPS on the Web UI</a>, how to do <a href="https://scotthelme.co.uk/securing-dns-across-all-of-my-devices-with-pihole-dns-over-https-1-1-1-1/">secure DNS</a> for your whole network and even how to <a href="https://scotthelme.co.uk/catching-naughty-devices-on-my-home-network/">catch screwy devices</a>, but I won't, because you can read those blogs and more. This blog, well, this blog is about <em>speed</em>.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="moar-speedz-">Moar speedz!</h4><p>Internet in the UK is shit. I mean really shit. Whenever I talk about how fast my connection is at home I am regularly inundated with "how slow?" comments. It's basically the rest of the World that has faster connections than us, except Australia of course. USB drives on kangarooback would be faster than the WiFi at <a href="https://twitter.com/troyhunt">Troy</a>'s house, but I digress. </p><p>Having reliable connectivity and good speed has always been essential for me as a tech nerd but especially so since I started working from home a few years back. The Ubiquiti home network mentioned above was as much making sure things would work reliably as it was about geeking out over cool gadgets. It needs to be reliable, it needs to be fast. No exceptions. This also extends to WiFi when I'm travelling and that's where things tend to fall apart really fast. Hotel WiFi, train WiFi, airport WiFi. I'm sure we've all been there and I'm sure we've all experienced it. It's slow, it's unreliable, and a lot of the time it's barely enough to send a tweet.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="the-gigacube">The GigaCube</h4><p>To solve my WiFi woes whilst travelling I bought myself a <a href="https://www.vodafone.co.uk/gigacube/">GigaCube</a>.</p><!--kg-card-begin: html--><br>

<br><!--kg-card-end: html--><p>This not-too-bad looking device is a 5G hot spot that does 4G fallback and provides a local WiFi network for ~50 devices before it starts hitting issues. That picture there was whilst I was snowboarding in Norway with Troy and Charlotte and I kitted out our entire cabin with fast WiFi.</p><!--kg-card-begin: html--><br>

<br><!--kg-card-end: html--><p>The cool thing is, the device is relatively portable. Yes it's a <em>little</em> big but it's really not a big deal and it's a price I'm willing to pay to have reliable WiFi with me wherever I go! Train WiFi in the UK is exceptionally bad and this things gives me a solid connection for hours on end when I'm travelling to London and even when moving at high speed, it still gives me pretty good throughput.</p><!--kg-card-begin: html--><br>

<br><!--kg-card-end: html--><p>It has saved my ass on a few occasions too. Some of you will know that I deliver a <a href="https://scotthelme.co.uk/training/">TLS training course</a> and the <a href="https://www.troyhunt.com/im-teaming-up-with-scott-helme-to-run-hack-yourself-first-workshops-in-europe/">Hack Yourself First Workshop</a> in collaboration with Troy Hunt. These courses both require fast and reliable WiFi and there have been occasions where hotels or offices have let me down, but that's no problem now as my GigaCube has stepped in to save me.</p><!--kg-card-begin: html--><br>

<br><!--kg-card-end: html--><p>With the GigaCube doing all of these awesome things whilst I'm on the road, it doesn't do much when I'm at home. I could maybe plug it in and have a few devices use it to share the load between that and my home connection, but that's just too much of a pain in honesty. I wondered if there was an easier way to incorporate the GigaCube into my home network and it turns out, there was. There was a <em>very</em> easy way to use it.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="ubiquiti-to-the-rescue-">Ubiquiti to the rescue!</h4><p>I have the Unifi Security Gateway (USG) at home and it turns it supports dual WAN allowing you to easily have two different connections to the Internet. There are two ports on the USG and one currently goes out to the modem provided by my ISP and the other was sat empty, until now. </p><p>To set this up, the first thing you need to do is enable the second port on the USG. Go to the Devices section of your controller, select the USG to open the information pane, select Ports and then Configure Interfaces.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-12.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-13.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>Once you save those settings, the second port is ready to be used. You then need to go to Settings (bottom left), Internet and then WAN Networks.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-14.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>Here you should see your current WAN network and you need to 'Create New WAN Network'. Fill out the details as necessary and if the device you're going to connect does its own DHCP, like my GigaCube does, select DHCP to configure WAN 2.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-15.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>The last setting to configure is how to use WAN 2. I wanted my USG to split load across my main connection and the GigaCube so I set it to Weighted LB and to take 30% of the load. My main connection at home is ~80Mbps and the 4G around here can do ~40Mbps so that seemed like a reasonable split. If you just want it as a backup you can configure it to only be used if your main connection goes down.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-16.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>Hit the 'Done' button and you're done! Seriously, that's it. I was surprised how easy that actually was and I wanted to know if I'd done it right and if it was actually working.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-24.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="testing-it-out">Testing it out</h4><p>The load balancing isn't going to split things how you might think. What I mean to say is that if you do a speed test now, you're only going to see the speed of your main connection as you did before. Having dual WAN like this doesn't give me ~120Mbps of download (the 80 + 40 above) for a single task, it doesn't work like that. What I can do though is load up my connection and watch various things go out over each of the WAN connections. Take this for example. I fired up Chrome and in one tab I opened SpeedTest and in another I opened up Fast.com to see how they performed. </p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-18.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-17.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>The important thing to note in those screenshots is the different source IP that each test is showing. The SpeedTest one is showing my <code>93.</code> IP from PlusNet and the Fast.com test is showing my <code>85.</code> IP from Vodafone. I see the same if I do a couple of 'what is my IP' checks too.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-19.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-20.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>Depending on how much load is on each interface a connection may go out over WAN 1 or WAN 2 and as a result, will have a different source IP. To see what the GigaCube was doing, I can load up the web management interface for the device despite it being on a different IP range. </p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-21.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><p>At this particular moment in time we can see it's pulling around ~15Mbps of download over 4G and there's currently only a single device connected to it, which is my USG.</p><!--kg-card-begin: html--><br><!--kg-card-end: html--><figure><img src="https://scotthelme.co.uk/content/images/2020/03/image-25.png"></figure><!--kg-card-begin: html--><br><!--kg-card-end: html--><h4 id="everything-is-better">Everything is better</h4><p>If our home connection gets saturated with the huge amount of streaming that seems to take place, I can now rely on an extra ~50% bandwidth to keep us going. Also, if we do have any issues with our home connection, we can fall back to using the GigaCube exclusively which will keep our entire network online. The cellular data usage may be a concern for you depending on where you are in the world but the WAN 2 port on the GigaCube could literally be hooked into anything, including a modem on another phone line if you really wanted to up the ante. For me though, the GigaCube comes with unlimited data in the UK and Europe, which actually translates to 3TB (yes, 3 terabytes!) of data per month at 5G speeds and then throttled access on 4G for the remainder of the month should you use that up. Whilst we do chew through a significant amount of bandwidth at home, it's not quite that much so we shouldn't ever have any issues.</p><p>As I'm likely to spend the next few months at home now with all of my national and international speaking/training/consulting gigs cancelled due to the Coronavirus, I figured it was an opportunity to make sure I won't have any issues with my connectivity at home. If you're going to be working from home as much as I am, maybe take a few minutes just to make sure your hardware is all up to date and dependable. With more people being at home there is likely to be a significant increase in your dependence on WiFi and probably a lot more streaming is going to take place too so if you do have data plans or caps, make sure you check what happens if you exceed them. I'm sure the last thing anyone wants right now is a surprise bill or a surprise loss of connectivity!</p>
					</div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs" /></noscript>
</body>
</html>