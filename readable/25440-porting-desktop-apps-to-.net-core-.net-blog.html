<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Porting desktop apps to .NET Core | .NET Blog -
linksfor.dev(s)
    </title>
    <meta charset="utf-8">
    <meta name="google" value="notranslate">
    <style type="text/css">
        html {
            font-family: sans-serif;
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }

        *, ::after, ::before {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #60656a;
            text-align: left;
            background-color: #323b44;
        }

        h1 {
            font-size: 6rem;
            font-weight: 300;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.5rem;
            margin-bottom: 0.5rem
        }

        a {
            color: #007bff;
            color: #ccc;
            text-decoration: none;
            background-color: transparent;
            word-break: break-all;
        }

        .unseen a {
            font-weight: bold;
        }

        h3 {
            margin-top: 0;
            padding-top: 0;
            font-weight: normal;
        }

        .grid {
            -ms-flex-direction: column;
            flex-direction: column;
            width: 1024px;
            margin: 0 auto;
            flex: 1 0 auto;
        }

        .row {
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            display: -ms-flexbox;
            display: flex;
        }

        .col {
            margin: 0 10px 0 10px;
            box-sizing: border-box;
            vertical-align: top;
        }

        .col-3-of-4, .col-6-of-8, .col-9-of-12 {
            width: calc(75% - 20px);
        }

        .col-1-of-4, .col-2-of-8, .col-3-of-12 {
            width: calc(25% - 20px);
        }

        @media (max-width:1023px) {
            /* big landscape tablets, laptops, and desktops */
            body {
                overflow-x: hidden;
            }

            main {
                width: 99%;
            }

            h1 {
                font-size: 50px;
            }
        }

        .text-right {
            text-align: right;
        }

        footer {
            left: 0;
            width: 100%;
            margin-top: 2em;
            padding: 50px 0;
            text-align: center;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .readable {
            color: #949ba2;
        }

        svg:not(:root).svg-inline--fa {
            color: #60656a;
            overflow: visible;
        }

        .svg-inline--fa.fa-w-12 {
            width: 0.75em;
        }

        svg:not(:root) {
            overflow: hidden;
        }

        .svg-inline--fa {
            display: inline-block;
            font-size: inherit;
            height: 1em;
            overflow: visible;
            vertical-align: -0.125em;
        }
    </style>
</head>
<body>
    <div class="grid">
            <h1>Porting desktop apps to .NET Core | .NET Blog</h1>
        
<div class="readable"><div class="row" id="mainContent"><p class="col-md" id="primary"><main class="site-main" id="main"><article class="addtoanyshare" id="post-23384"><div class="row justify-content-center postcontent" id="featured"><div class="entry-content col-12 sharepostcontent"><div class="row justify-content-center"><div class="col-md-4"><div><img src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2018/10/Olia-Gavrysh-e1538680748374-150x150.jpg" width="58" alt="Olia Gavrysh" class="avatar avatar-58 wp-user-avatar wp-user-avatar-58 alignnone photo"><p>Olia</p></div></div></div><p>Since I&#x2019;ve been working with the community on porting desktop applications from .NET Framework to .NET Core, I&#x2019;ve noticed that there are two camps of folks: some want a very simple and short list of instructions to get their apps ported to .NET Core while others prefer a more principled approach with more background information. Instead of writing up a &#x201C;Swiss Army knife&#x201D;-document, we are going to publish two blog posts, one for each camp:</p><ul><li><strong>This post is the simple case</strong>. It&#x2019;s focused on simple instructions and smaller applications and is the easiest way to move your app to .NET Core.</li><li><strong>We will publish another post for more complicated cases</strong>. This post will focus more on non-trivial applications, such WPF application with dependencies on WCF and third-party UI packages.</li></ul><p>If you prefer watching videos instead of reading, here is the video where I do everything that is described below.</p><h2>Step 0 &#x2013; Prerequisites</h2><p>To port your desktop apps to Core, you&#x2019;ll need <a href="https://dotnet.microsoft.com/download">.NET Core 3</a> and Visual Studio 2019.</p><h2>Step 1 &#x2013; Run portability analyzer</h2><p>Before porting, you should check how compatible your application is with .NET Core. To do so, download and run <a href="https://blogs.msdn.microsoft.com/dotnet/2018/08/08/are-your-windows-forms-and-wpf-applications-ready-for-net-core-3-0/">.NET Portability Analyzer</a>.</p><ul><li>On the first tab, Portability Summary, if you have only 100% in .NET Core column (everything is highlighted in green), your code is fully compatible, go to Step 2.</li><li>If you have values of less than 100%, first look at all assemblies that aren&#x2019;t part of you application. For those, check if their authors are providing versions for .NET Core or .NET Standard.</li><li>Now look at the other part of assemblies that are coming from your code. If you don&#x2019;t have any of your assemblies listed in the portability report, go to Step 2. If you do, open Details tab, filter the table by clicking on the column Assembly and only focus on the ones that are from your application. Walk the list and refactor your code to stop using the API or replace the API usage with alternatives from .NET Core.</li></ul><p><a href="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/05/portability-report.png"> <img class="size-full wp-image-23396" src="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/05/portability-report.png" alt width="615" srcset="https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/05/portability-report.png 615w, https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2019/05/portability-report-300x113.png 300w" sizes="(max-width: 615px) 100vw, 615px"> </a></p><h2>Step 2 &#x2013; Migrate to SDK-style .csproj</h2><p>In <strong>Solution Explorer</strong> right-click on your project (not on the solution!). Do you see <strong>Edit Project File</strong>? If you do, you already use the SDK-style project file, so you should move to <strong>Step 3</strong>. If not, do the following.</p><ul><li>Check in the <strong>Solution Explorer</strong> if your project contains a <code>packages.config</code> file. If you don&#x2019;t, no action is needed, if you do, right-click on <code>packages.config</code> and choose <strong>Migrate packages.config to PackageReference</strong>. Then click <strong>OK</strong>.</li><li>Open your project file by right-clicking on the project and choose <strong>Unload Project</strong>. Then right-click on the project and choose <strong>Edit &lt;your project name&gt;.csproj</strong>.</li><li>Copy the content of the project file somewhere, for example into Notepad, so you can search in it later.</li><li>Delete everything from your project file opened in Visual Studio (I know it sounds aggressive &#x1F60A;, but we will add only needed content from the copy we&#x2019;ve just made in a few steps). Instead of the text you&#x2019;ve just deleted, paste the following code.For a WinForms application: For a WPF application:</li><li>In Notepad, search for <code>PackageReference</code>. If you did not find anything, move on. If you found <code>PackageReference</code>, copy the entire <code>&lt;ItemGroup&gt;</code> that contains <code>PackageReference</code> in your project file, opened in Visual Studio, right below the lines you&#x2019;ve pasted in the step above. Do it for each occurrence of the <code>PackageReference</code> you have found. The copied block should look like this.<br> </li><li>Now do the same as above for <code>ProjectReference</code>. If you did not find anything, move on. If you found any <code>ProjectReference</code> items, they would look like this.<br> </li><li>You can remove lines with <code>&lt;Project&gt;</code> and <code>&lt;Name&gt;</code> properties, since they are not needed in the new project file style. So for each <code>ProjectReference</code> that you have found (if any), copy only <code>ItemGroup</code> and <code>ProjectReference</code> like this.<br> </li><li>Save everything. Close the .csproj file in Visual Studio. Right-click on your project in the <strong>Solution Explorer</strong> and select <strong>Reload Project</strong>. Rebuild and make sure there are no errors.</li></ul><p>Great news, you just updated your project file to the new SDK-style! The project is still targeting .NET Framework, but now you&#x2019;ll be able to retarget it to .NET Core.</p><h2>Step 3 &#x2013; Retarget to .NET Core</h2><p>Open your project file by double-clicking on your project in <strong>Solution Explorer</strong>. Find the property <code>&lt;TargetFramework&gt;</code> and change the value to <code>netcoreapp3.0</code>. Now your project file should look like this:</p><p>Build and run your project. <strong>Congratulations, you ported to .NET Core 3!</strong></p><h2>Fixing errors</h2><p>If you get errors like</p><div id="crayon-5ced6ac5234e6295349574" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5ced6ac5234e6295349574-1"><span class="crayon-e">The </span><span class="crayon-e">type </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-t">namespace</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-e">some </span><span class="crayon-v">name</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">could </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-e">be </span><span class="crayon-v">found</span></div></div></td></tr></table></div></div><p>or</p><div id="crayon-5ced6ac52350c486244146" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate"><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums "></td><td class="crayon-code"><div class="crayon-pre"><div class="crayon-line" id="crayon-5ced6ac52350c486244146-1"><span class="crayon-e">The </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-e">some </span><span class="crayon-v">name</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">does </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-e">exist </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">the </span><span class="crayon-e">current </span><span class="crayon-v">context</span></div></div></td></tr></table></div></div><p>and your portability report was green, it should be easy to fix by adding a NuGet package with the corresponding library. If you cannot find the NuGet package with the library that is missing, try referencing <a href="https://docs.microsoft.com/dotnet/core/porting/windows-compat-pack">Microsoft.Windows.Compatibility</a>. This package adds ~21K .NET APIs from .NET Framework.</p><h2>Working with designers</h2><p>Even though it is possible to edit the user interface of your application via code, developers usually prefer using the visual designers. With .NET Core we had to rearchitect the way the designers work with .NET Core projects:</p><ul><li>The WPF designer is already in preview and we are working on adding more functionality to it.</li><li>The WinForms designer for .NET Core will be available later, and meanwhile there you can use the .NET Framework WinForms designer as a workaround.</li></ul><p>Here is how you can use the .NET Framework WinForms designer:</p><ol><li>Copy your .csproj file (let&#x2019;s say you have <code>MyProject.csproj</code>), give it a different name, for example <code>MyProject.NetFramework.csproj</code> and put it next to your existing project file.</li><li>Make sure your project is closed in Visual Studio, open the new project <code>MyProject.NetFramework.csproj</code>.<br> In <strong>Solution Explorer</strong> right-click on your project and select&#xA0;<strong>Properties</strong>. In the Application tab (should be open by default) set <strong>Assembly name</strong> and <strong>Default namespace</strong> to the same values as in your initial project (remove &#x201C;.NetFramework&#x201D; from the names).<br> Save this solution next to your existing solution.</li><li>Open the new project file and change the <code>&lt;TargetFramework&gt;</code> to <code>net472</code>.</li><li>Now when you need to use the WinForms designer, load your project with the <code>MyProject.NetFramework.csproj</code> project file and you&#x2019;ll get the full experience of .NET Framework designer. When you are done with the designer, close and open your project with the .NET Core project file.</li><li>This is just a workaround until the WinForms designer for .NET Core is ready.</li></ol><h2>Why port to .NET Core</h2><p>Check out the video where Scott Hunter and I are talking about all the new things coming with .NET Core 3 <a href="https://www.youtube.com/watch?v=upVQEUc_KwU&amp;feature=youtu.be">Porting to .NET Core 3.0</a>.</p></div></div><footer class="cattagsarea"> <span class="cat-links">Posted in <a href="https://devblogs.microsoft.com/dotnet/category/net-core/">.NET Core</a>, <a href="https://devblogs.microsoft.com/dotnet/category/net-framework/">.NET Framework</a>, <a href="https://devblogs.microsoft.com/dotnet/category/wpf/">WPF</a></span><span class="tags-links">Tagged <a href="https://devblogs.microsoft.com/dotnet/tag/net/">.NET</a>, <a href="https://devblogs.microsoft.com/dotnet/tag/net-core/">.NET Core</a>, <a href="https://devblogs.microsoft.com/dotnet/tag/net-framework/">.net framework</a></span></footer></article></main></p></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
</body>
</html>