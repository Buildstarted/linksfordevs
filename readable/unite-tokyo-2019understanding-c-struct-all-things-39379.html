<!DOCTYPE html>
<html lang="en">
<head>
    <title>
&#x3010;Unite Tokyo 2019&#x3011;Understanding C# Struct All Things - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="&#x3010;Unite Tokyo 2019&#x3011;Understanding C# Struct All Things - linksfor.dev(s)"/>
    <meta property="article:author" content="UnityTechnologiesJapan002"/>
    <meta property="og:description" content="2019/9/25-6&#x306B;&#x958B;&#x50AC;&#x3055;&#x308C;&#x305F;Unite Tokyo 2019&#x306E;&#x8B1B;&#x6F14;&#x30B9;&#x30E9;&#x30A4;&#x30C9;&#x3067;&#x3059;&#x3002; &#x6CB3;&#x5408; &#x5B9C;&#x6587;&#xFF08;&#x682A;&#x5F0F;&#x4F1A;&#x793E;Cysharp&#xFF09; &#x3053;&#x3093;&#x306A;&#x4EBA;&#x306B;&#x304A;&#x3059;&#x3059;&#x3081; &#x30FB;C#&#x3092;&#x6975;&#x3081;&#x305F;&#x3044;&#x30A8;&#x30F3;&#x30B8;&#x30CB;&#x30A2; &#x30FB;&#x30D1;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30F3;&#x30B9;&#x306B;&#x8208;&#x5473;&#x306E;&#x3042;&#x308B;&#x30A8;&#x30F3;&#x30B8;&#x30CB;&#x30A2; &#x30FB;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x8A00;&#x8A9E;&#x30DE;&#x30CB;&#x30A2; &#x53D7;&#x8B1B;&#x8005;&#x304C;&#x5F97;&#x3089;&#x308C;&#x308B;&#x77E5;&#x898B; &#x30FB;struct&#x306B;&#x95A2;&#x3059;&#x308B;&#x6DF1;&#x3044;&#x77E5;&#x8B58; &#x30FB;&#x30D1;&#x30D5;&#x30A9;&#x30FC;&#x30DE;&#x30F3;&#x30B9;&#x5411;&#x4E0A;&#x306E;&#x2026;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.slideshare.net/UnityTechnologiesJapan002/unite-tokyo-2019understanding-c-struct-all-things"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="grid">
        <h1>
                <span style="cursor: default" title="linksfor.dev(s) has been running for 1 year! :partypopper:">ğŸ‰</span>
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - &#x3010;Unite Tokyo 2019&#x3011;Understanding C# Struct All Things</title>
<div class="readable">
        <h1>&#x3010;Unite Tokyo 2019&#x3011;Understanding C# Struct All Things</h1>
        <p>
by UnityTechnologiesJapan002 <br/>Reading time: 22-28 minutes        </p>
        <p><a href="https://www.slideshare.net/UnityTechnologiesJapan002/unite-tokyo-2019understanding-c-struct-all-things">https://www.slideshare.net/UnityTechnologiesJapan002/unite-tokyo-2019understanding-c-struct-all-things</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
        
        


      

        <p><span>Successfully reported this slideshow.</span>
  </p>


      
















<div id="slideview-container">
  

  <div>

    <div id="main-panel">


      

      <div itemscope="" itemtype="https://schema.org/MediaObject">


        <div>
          <meta itemprop="inLanguage" content="en">
          <meta itemprop="image" content="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-1-638.jpg?cb=1569478193">
          <meta itemprop="thumbnailUrl" content="https://cdn.slidesharecdn.com/ss_thumbnails/09261330roomayoshihumikawai-190926055210-thumbnail.jpg?cb=1569478193">
          <meta itemprop="embedURL" content="https://www.slideshare.net/slideshow/embed_code/key/h7l40rS3W9o3dI">
          <meta itemprop="playerType" content="HTML5">
          <meta itemprop="interactionCount" content="UserComments:0">
          <meta itemprop="interactionCount" content="UserLikes:11">
          <meta itemprop="interactionCount" content="UserDownloads:59">
          <meta itemprop="interactionCount" content="UserPageVisits:24940">
          <meta itemprop="interactionCount" content="UserPlays:24940">
          <meta itemprop="interactionCount" content="UserPlusOnes:0" id="meta-google">


          

          <ul id="slideshow-actions">
            <li>
              
            </li>
              <li>
                
              </li>
              <li>
                
              </li>

            <!-- Report/Flag Content -->
            <li>
              <a data-dropdown="report-dropdown" aria-controls="report-dropdown" aria-expanded="false">
                <span>...</span></a>
              <span title="You have reported this as inappropriate">
                <i></i>
                <span aria-label="You have reported this as inappropriate"></span>
              </span>
              
            </li>
          </ul>


          <div itemprop="author" itemscope="" itemtype="https://schema.org/Organization">

            <p><a href="https://www.slideshare.net/UnityTechnologiesJapan002?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideview" title="UnityTechnologiesJapan002" itemprop="url">
                <img alt="UnityTechnologiesJapan002" itemprop="image" src="https://cdn.slidesharecdn.com/profile-photo-UnityTechnologiesJapan002-48x48.jpg?cb=1580098830">
              </a>
            </p>

            
          </div>

            

          <p>
            <small>
              Published on <time datetime="Sep 26, 2019" itemprop="datePublished">Sep 26, 2019</time>
            </small>
          </p>

            <div>
              <div data-ga-cat="bigfoot_slideview" data-ga-action="description>more">
                <div>
                  <div id="slideshow-description-paragraph"><p>
                    2019/9/25-6ã«é–‹å‚¬ã•ã‚ŒãŸUnite Tokyo 2019ã®è¬›æ¼”ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã™ã€‚
<br>æ²³åˆ å®œæ–‡ï¼ˆæ ªå¼ä¼šç¤¾Cysharpï¼‰
</p><p>
ã“ã‚“ãª</p></div>
                </div>
                
              </div>
            </div>


            



        </div>


        

            <div>
              
              <ol itemprop="text">
                    <li>
      1.
    Understanding
C# Struct
All Things
Cysharp, Inc.
Kawai Yoshifumi
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-2-638.jpg?cb=1569478193" title="About Speaker
2
â€” æ²³åˆ å®œæ–‡ / Kawai Yoshifumi / @neuecc
â€” Cysha..." target="_blank">
        2.
      </a>
    About Speaker
2
â€” æ²³åˆ å®œæ–‡ / Kawai Yoshifumi / @neuecc
â€” Cysharp, Inc. â€“ CEO/CTO
â€” Microsoft MVP for Developer Technologies(C#)
â€” 50ä»¥ä¸Šã®OSSå…¬é–‹(UniRx, MagicOnion, MessagePack for C#, etc..)
â€” æ ªå¼ä¼šç¤¾Cysharp
â€” 2019å¹´9æœˆ, Cygamesã®å­ä¼šç¤¾ã¨ã—ã¦è¨­ç«‹
â€” C#é–¢é€£ã®ç ”ç©¶é–‹ç™º/OSS/ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã†
â€” C#å¤§çµ±ä¸€ç†è«–(ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚‚ã«C#ã§å®Ÿè£…ã™ã‚‹)ã‚’æ¨é€²
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-3-638.jpg?cb=1569478193" title="https://github.com/Cysharp
OSS for Unity â€“ GitHub/Cysharp
3..." target="_blank">
        3.
      </a>
    https://github.com/Cysharp
OSS for Unity â€“ GitHub/Cysharp
3
UniTask â˜…288
Provides an efficient async/await integration to
Unity.
RuntimeUnitTestToolkit â˜…87
CLI/GUI Frontend of Unity Test Runner to test on
any platforms.
RandomFixtureKit â˜…16
Fill random/edge-case value to target type for
unit testing.
MagicOnion â˜…1240
Unified Realtime/API Engine for .NET Core and
Unity.
MasterMemory â˜…407
Embedded Typed Readonly In-Memory
Document Database for .NET Core and Unity.
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-4-638.jpg?cb=1569478193" title="https://github.com/neuecc
OSS for Unity â€“ GitHub/neuecc
4
L..." target="_blank">
        4.
      </a>
    https://github.com/neuecc
OSS for Unity â€“ GitHub/neuecc
4
LINQ-to-GameObject-for-Unity â˜…448
Traverse GameObject Hierarchy by LINQ.
PhotonWire â˜…92
Typed Asynchronous RPC Layer for Photon.
SerializableDictionary â˜…87
SerializableCollections for Unity.
ReMotion â˜…27
Hyper Fast Reactive Tween Engine for Unity.
UniRx â˜…3722
Reactive Extensions for Unity.
MessagePack-CSharp â˜…2089
Extremely Fast MessagePack Serializer.
ZeroFormatter â˜…1778
Infinitely Fast Deserializer.
Utf8Json â˜…1352
Definitely Fastest JSON Serializer.
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-5-638.jpg?cb=1569478193" title="6
The Evolution of C# Struct
 " target="_blank">
        5.
      </a>
    6
The Evolution of C# Struct
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-6-638.jpg?cb=1569478193" title="MessagePack for C#(v2-preview)
7
public ref struct MessageP..." target="_blank">
        6.
      </a>
    MessagePack for C#(v2-preview)
7
public ref struct MessagePackWriter
T Deserialize&lt;T&gt;(in ReadOnlySequence&lt;byte&gt; byteSequence)
Span&lt;byte&gt; bytes = stackalloc byte[36];
internal ref partial struct SequenceReader&lt;T&gt;
where T : unmanaged, IEquatable&lt;T&gt;
public ref byte GetPointer(int sizeHint)
ref Entry v = ref entry[0];
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-7-638.jpg?cb=1569478193" title="MessagePack for C#(v2-preview)
8
public ref struct MessageP..." target="_blank">
        7.
      </a>
    MessagePack for C#(v2-preview)
8
public ref struct MessagePackWriter
T Deserialize&lt;T&gt;(in ReadOnlySequence&lt;byte&gt; byteSequence)
Span&lt;byte&gt; bytes = stackalloc byte[36];
internal ref partial struct SequenceReader&lt;T&gt;
where T : unmanaged, IEquatable&lt;T&gt;
ref struct
Span&lt;T&gt; = stackalloc
in parameter
where : unmanaged
public ref byte GetPointer(int sizeHint)
ref Entry v = ref entry[0];
ref return
ref local
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-8-638.jpg?cb=1569478193" title="DOTS(æ˜¨æ—¥ã®åŸºèª¿è¬›æ¼”ã‚ˆã‚Š)
 " target="_blank">
        8.
      </a>
    DOTS(æ˜¨æ—¥ã®åŸºèª¿è¬›æ¼”ã‚ˆã‚Š)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-9-638.jpg?cb=1569478193" title="DOTS(æ˜¨æ—¥ã®åŸºèª¿è¬›æ¼”ã‚ˆã‚Š)
 " target="_blank">
        9.
      </a>
    DOTS(æ˜¨æ—¥ã®åŸºèª¿è¬›æ¼”ã‚ˆã‚Š)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-10-638.jpg?cb=1569478193" title="Whatâ€™s new struct features
11
C# 7.2 C# 7.3 C# 8.0
in modif..." target="_blank">
        10.
      </a>
    Whatâ€™s new struct features
11
C# 7.2 C# 7.3 C# 8.0
in modifier on parameter
ref readonly modifier on
method returns, local
readonly struct
declaration
ref struct declaration
ref extension method
stackalloc to Span
reassign ref local
additional generics
constraints(unmanage
d, Enum, Delegate)
stackalloc initializer
access fixed field
without pinning
readonly method
Disposable ref structs
Unmanaged
constructed types
https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/
C# 7.0
ref return statement
ref local variables
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-11-638.jpg?cb=1569478193" title="12
Which Unity Version should we support?
Unity Version C# ..." target="_blank">
        11.
      </a>
    12
Which Unity Version should we support?
Unity Version C# Version .NET Version
Unity 2017.4 6.0 .NET 3.5/.NET 4.6
Unity 2018.2 6.0 .NET 4.x/Standard 2.0
Unity 2018.3 7.3 .NET 4.x/Standard 2.0
Unity 2018.4 7.3 .NET 4.x/Standard 2.0
Unity 2019.1 7.3 .NET 4.x/Standard 2.0
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-12-638.jpg?cb=1569478193" title="13
Which Unity Version should we support?
Unity Version C# ..." target="_blank">
        12.
      </a>
    13
Which Unity Version should we support?
Unity Version C# Version .NET Version
Unity 2017.4 6.0 .NET 3.5/.NET 4.6
Unity 2018.2 6.0 .NET 4.x/Standard 2.0
Unity 2018.3 7.3 .NET 4.x/Standard 2.0
Unity 2018.4 7.3 .NET 4.x/Standard 2.0
Unity 2019.1 7.3 .NET 4.x/Standard 2.0
2018.3ä»¥ä¸Šä¸€æŠã€ãã‚Œä»¥ä¸‹ã®
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯Not Supported
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-13-638.jpg?cb=1569478193" title="14
Which Unity Version should we support?
Unity Version C# ..." target="_blank">
        13.
      </a>
    14
Which Unity Version should we support?
Unity Version C# Version .NET Version
Unity 2017.4 6.0 .NET 3.5/.NET 4.6
Unity 2018.2 6.0 .NET 4.x/Standard 2.0
Unity 2018.3 7.3 .NET 4.x/Standard 2.0
Unity 2018.4 7.3 .NET 4.x/Standard 2.0
Unity 2019.1 7.3 .NET 4.x/Standard 2.0
2018.3ã‹ã‚‰ä»¥ä¸‹ã®è¨€èªã«é–¢ã™ã‚‹defineãŒä½¿ãˆã‚‹
CSHARP_7_3_OR_NEWER
ä»¥ä¸‹ã®ã©ã¡ã‚‰ã‹é¸ã‚“ã ã»ã†ãŒå®šç¾©ã•ã‚Œã‚‹
NET_4_6
NET_STANDARD_2_0
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-14-638.jpg?cb=1569478193" title="Struct is important for Performance!
15
â€” C# 7ä»¥é™ã®æ€¥é€Ÿãªstructå¼·..." target="_blank">
        14.
      </a>
    Struct is important for Performance!
15
â€” C# 7ä»¥é™ã®æ€¥é€Ÿãªstructå¼·åŒ–ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãŸã‚
â€” ãã‚Œã¯ .NET Core ã§ã‚‚ã€Unityã§ã‚‚
â€” ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ç•°ãªã‚Œã©ã€ä¸¡è€…ã¨ã‚‚æ§‹é€ ä½“ã‚’ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãŸã‚æ´»ç”¨ã—ã¦ã„ã‚‹
â€” ç‰¹ã«Unityã®æ¨ã™DOTS(Data Oriented Technology Stack)ã¯structã®å¡Š
â€” ä»Šã€å…¨ã¦ã‚’å­¦ã³ã€å‚™ãˆã‚ˆã†
public unsafe ref struct BlobBuilderArray&lt;T&gt;
where T : struct
public unsafe static ref T AsRef&lt;T&gt;(void* ptr) where T : struct
public readonly struct BuildComponentDataToEntityLookupTask&lt;TComponentData&gt; : IDisposable
where TComponentData : unmanaged, IComponentData, IEquatable&lt;TComponentData&gt;
Unity ECSã®ä¸­ã®
C# 7.3è¡¨ç¾
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-15-638.jpg?cb=1569478193" title="16
The Basic of C# Memory
 " target="_blank">
        15.
      </a>
    16
The Basic of C# Memory
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-16-638.jpg?cb=1569478193" title="The Memory of C#
17
AppDomain(Managed)
Thread
Stack
HeapThr..." target="_blank">
        16.
      </a>
    The Memory of C#
17
AppDomain(Managed)
Thread
Stack
HeapThread
Stack
Unmanaged
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-17-638.jpg?cb=1569478193" title="The Memory of C#
18
AppDomain(Managed)
Thread
Stack
HeapThr..." target="_blank">
        17.
      </a>
    The Memory of C#
18
AppDomain(Managed)
Thread
Stack
HeapThread
Stack
Unmanaged
ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¯ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã«æ ¼ç´ã•ã‚Œã‚‹
ãƒ’ãƒ¼ãƒ—é ˜åŸŸã«ç¢ºä¿ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯
GCã®ç®¡ç†åŒ–ã«å…¥ã‚‹
Unityã§ã¯C#ç®¡ç†å¤–ã®ãƒ¡ãƒ¢ãƒªã‚’æ‰±ã†
ã“ã¨ã‚‚ã‚ˆãã‚ã‚‹(ç‰¹ã«DOTS)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-18-638.jpg?cb=1569478193" title="Letâ€™s see memory layout
19
â€” SharpLabã§ãƒ¡ãƒ¢ãƒªã®ä¸­èº«ã‚’è¦‹ã‚ˆã†ï¼
â€” https:/..." target="_blank">
        18.
      </a>
    Letâ€™s see memory layout
19
â€” SharpLabã§ãƒ¡ãƒ¢ãƒªã®ä¸­èº«ã‚’è¦‹ã‚ˆã†ï¼
â€” https://sharplab.io/
â€” C# to IL, C# to C#, C# to ASMãªã©è±Šå¯Œãªæ©Ÿèƒ½ãŒã‚ã‚‹
â€” Run ã¨ Inspectã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨ãƒ¡ãƒ¢ãƒªã®ä¸­èº«ãŒè¦‹ã‚Œã‚‹
ãªãŠã€çµ„ã¿è¾¼ã¿å‹ã®å ´åˆã€Unity(mono)
ã¨SharpLab(.NET Core)ã§ä¸­èº«ãŒç•°ãªã‚‹
ã“ã¨ãŒã‚ã‚‹å ´åˆã«æ³¨æ„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-19-638.jpg?cb=1569478193" title="Struct Memory
Int(4ãƒã‚¤ãƒˆ)ã®X, Y, Z(12ãƒã‚¤ãƒˆ)ãŒ
ç´ ç›´ã«ãƒ¡ãƒ¢ãƒªä¸Š(ã‚¹ã‚¿ãƒƒã‚¯)ã«ä¸¦ã¶
 " target="_blank">
        19.
      </a>
    Struct Memory
Int(4ãƒã‚¤ãƒˆ)ã®X, Y, Z(12ãƒã‚¤ãƒˆ)ãŒ
ç´ ç›´ã«ãƒ¡ãƒ¢ãƒªä¸Š(ã‚¹ã‚¿ãƒƒã‚¯)ã«ä¸¦ã¶
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-20-638.jpg?cb=1569478193" title="Class Memory
ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã®å¤‰æ•°ã¯ãƒ’ãƒ¼ãƒ—ä¸Š
ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡ã™
ãƒ’ãƒ¼ãƒ—ä¸Šã«ç¢ºä¿ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã¯ç®¡ç†
ç”¨ã®ãƒ˜ãƒƒãƒ€/..." target="_blank">
        20.
      </a>
    Class Memory
ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã®å¤‰æ•°ã¯ãƒ’ãƒ¼ãƒ—ä¸Š
ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡ã™
ãƒ’ãƒ¼ãƒ—ä¸Šã«ç¢ºä¿ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã¯ç®¡ç†
ç”¨ã®ãƒ˜ãƒƒãƒ€/å‹æƒ…å ± + å®Ÿãƒ‡ãƒ¼ã‚¿
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-21-638.jpg?cb=1569478193" title="Pass by Reference/Pass by Value
22
â€” C#ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å…¨ã¦ã€Œå€¤æ¸¡ã—ã€
â€” ã¤ã¾ã‚Š..." target="_blank">
        21.
      </a>
    Pass by Reference/Pass by Value
22
â€” C#ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å…¨ã¦ã€Œå€¤æ¸¡ã—ã€
â€” ã¤ã¾ã‚Šã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™
â€” ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¸ã®ä»£å…¥ã‚‚ã‚³ãƒ”ãƒ¼
(T x) (ref T x)
class å‚ç…§ã®å€¤æ¸¡ã— å‚ç…§ã®å‚ç…§æ¸¡ã—
struct å€¤ã®å€¤æ¸¡ã— å€¤ã®å‚ç…§æ¸¡ã—
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-22-638.jpg?cb=1569478193" title="ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã¯å¤§ä½“ã“ã®è¾ºã£ã½ã„
 " target="_blank">
        22.
      </a>
    ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã¯å¤§ä½“ã“ã®è¾ºã£ã½ã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-23-638.jpg?cb=1569478193" title="00 00 00 00 ã‹ã‚‰ãã‚Œã£ã½
ã„ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ãŸæ°—é…
 " target="_blank">
        23.
      </a>
    00 00 00 00 ã‹ã‚‰ãã‚Œã£ã½
ã„ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ãŸæ°—é…
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-24-638.jpg?cb=1569478193" title="å¼•ãç¶šãã€ y = x ã§åŒã˜ãƒ‡
ãƒ¼ã‚¿ãŒè¿½åŠ ã§å…¥ã£ãŸã£ã½ã„
 " target="_blank">
        24.
      </a>
    å¼•ãç¶šãã€ y = x ã§åŒã˜ãƒ‡
ãƒ¼ã‚¿ãŒè¿½åŠ ã§å…¥ã£ãŸã£ã½ã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-25-638.jpg?cb=1569478193" title="åˆ¥ã®ã¨ã“ã‚ã«xã¨yãŒã‚³ãƒ”ãƒ¼
ã•ã‚Œã¦å…¥ã£ãŸæ°—é…
 " target="_blank">
        25.
      </a>
    åˆ¥ã®ã¨ã“ã‚ã«xã¨yãŒã‚³ãƒ”ãƒ¼
ã•ã‚Œã¦å…¥ã£ãŸæ°—é…
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-26-638.jpg?cb=1569478193" title="æˆ»ã‚Šã®zã‚’å—ã‘å–ã£ã¦å…¨éƒ¨
åŸ‹ã¾ã£ãŸ
 " target="_blank">
        26.
      </a>
    æˆ»ã‚Šã®zã‚’å—ã‘å–ã£ã¦å…¨éƒ¨
åŸ‹ã¾ã£ãŸ
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-27-638.jpg?cb=1569478193" title="int x
int y
int z
ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚(C# -> IL)ã®æ®µ
éšã§å¤‰æ•°ã®ç½®ãå ´ç¢ºä¿ã—ã¦ãŠ
ãã¾ã™ã€çš„ãª
 " target="_blank">
        27.
      </a>
    int x
int y
int z
ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚(C# -&gt; IL)ã®æ®µ
éšã§å¤‰æ•°ã®ç½®ãå ´ç¢ºä¿ã—ã¦ãŠ
ãã¾ã™ã€çš„ãª
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-28-638.jpg?cb=1569478193" title="Structã®åŸºæœ¬çš„ãªåŸå‰‡
29
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼..." target="_blank">
        28.
      </a>
    Structã®åŸºæœ¬çš„ãªåŸå‰‡
29
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼ã«ã‚ˆã‚Šå¼•ãèµ·ã“ã•ã‚Œã‚‹
â€” å¤§ããªã‚µã‚¤ã‚ºã®æ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ IntPtr.Size(4 or 8ãƒã‚¤ãƒˆ)ä»¥ä¸Šã¯å‚ç…§æ¸¡ã—ã«æ¯”ã¹ã¦å¤§ãã„ã¨ã„ã†ã“ã¨ã«ãªã‚‹
â€“ ãã‚Œã ã¨åˆ¶é™ã‚­ãƒ„ã™ããªã®ã§ã€ä¸€èˆ¬ã«ã¯16ãƒã‚¤ãƒˆä»¥ä¸‹ãã‚‰ã„ã‚’ç›®å®‰ã«
â€” å¤‰æ›´å¯èƒ½ãªæ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€å¤‰æ›´ã—ãŸã¤ã‚‚ã‚ŠãŒå¤‰æ›´ã•ã‚Œãªã„
â€“ ä¸€åº¦ã¯æ‚©ã‚€Vector3å¤‰æ›´ã•ã‚Œãªã„å•é¡Œ
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-29-638.jpg?cb=1569478193" title="Structã®åŸºæœ¬çš„ãªåŸå‰‡
30
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼..." target="_blank">
        29.
      </a>
    Structã®åŸºæœ¬çš„ãªåŸå‰‡
30
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼ã«ã‚ˆã‚Šå¼•ãèµ·ã“ã•ã‚Œã‚‹
â€” å¤§ããªã‚µã‚¤ã‚ºã®æ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ IntPtr.Size(4 or 8ãƒã‚¤ãƒˆ)ä»¥ä¸Šã¯å‚ç…§æ¸¡ã—ã«æ¯”ã¹ã¦å¤§ãã„ã¨ã„ã†ã“ã¨ã«ãªã‚‹
â€“ ãã‚Œã ã¨åˆ¶é™ã‚­ãƒ„ã™ããªã®ã§ã€ä¸€èˆ¬ã«ã¯16ãƒã‚¤ãƒˆä»¥ä¸‹ãã‚‰ã„ã‚’ç›®å®‰ã«
â€” å¤‰æ›´å¯èƒ½ãªæ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€å¤‰æ›´ã—ãŸã¤ã‚‚ã‚ŠãŒå¤‰æ›´ã•ã‚Œãªã„
â€“ ä¸€åº¦ã¯æ‚©ã‚€Vector3å¤‰æ›´ã•ã‚Œãªã„å•é¡Œ
// positionå¤‰ãˆãŸã¤ã‚‚ã‚ŠãŒå¤‰ã‚ã‚‰ãªã„ï¼
this.transform.position.Set(10f, 20f, 30f);
// ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ã ã‹ã‚‰
this.transform.INTERNAL_get_position(out Vector3 value);
value.Set(10f, 20f, 30f);
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-30-638.jpg?cb=1569478193" title="Structã®åŸºæœ¬çš„ãªåŸå‰‡
31
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼..." target="_blank">
        30.
      </a>
    Structã®åŸºæœ¬çš„ãªåŸå‰‡
31
â€” å…¨ã¦ã¯ã‚³ãƒ”ãƒ¼ã«æ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨
â€” ã‚¯ãƒ©ã‚¹ã¨ã®é•ã„ã€ã»ã¨ã‚“ã©ã®å•é¡Œã¯ã‚³ãƒ”ãƒ¼ã«ã‚ˆã‚Šå¼•ãèµ·ã“ã•ã‚Œã‚‹
â€” å¤§ããªã‚µã‚¤ã‚ºã®æ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ IntPtr.Size(4 or 8ãƒã‚¤ãƒˆ)ä»¥ä¸Šã¯å‚ç…§æ¸¡ã—ã«æ¯”ã¹ã¦å¤§ãã„ã¨ã„ã†ã“ã¨ã«ãªã‚‹
â€“ ãã‚Œã ã¨åˆ¶é™ã‚­ãƒ„ã™ããªã®ã§ã€ä¸€èˆ¬ã«ã¯16ãƒã‚¤ãƒˆä»¥ä¸‹ãã‚‰ã„ã‚’ç›®å®‰ã«
â€” å¤‰æ›´å¯èƒ½ãªæ§‹é€ ä½“ã‚’ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰ä½œã‚‰ãªã„
â€“ ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€å¤‰æ›´ã—ãŸã¤ã‚‚ã‚ŠãŒå¤‰æ›´ã•ã‚Œãªã„
â€“ ä¸€åº¦ã¯æ‚©ã‚€Vector3å¤‰æ›´ã•ã‚Œãªã„å•é¡Œ
// positionå¤‰ãˆãŸã¤ã‚‚ã‚ŠãŒå¤‰ã‚ã‚‰ãªã„ï¼
this.transform.position.Set(10f, 20f, 30f);
// ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ã ã‹ã‚‰
this.transform.INTERNAL_get_position(out Vector3 value);
value.Set(10f, 20f, 30f);
positionãŒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãªã®ãŒæ‚ªã„
(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãªã‚‰ã‚³ãƒ”ãƒ¼ã®å•é¡Œã¯èµ·ããªã„)
ãŒã€ã“ã‚Œã¯transformã®ãƒ‡ãƒ¼ã‚¿ã®å®Ÿä½“ã¯
ã‚¢ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒ¡ãƒ¢ãƒªå´(UnityEngine)ã«ã‚ã‚‹
ãŸã‚ã¨ã„ã†ã€Unityãªã‚‰ã§ã¯ã®æ‚©ã¿ã§ã‚‚ã‚ã‚‹
(C#/C++è¶Šå¢ƒãŒã©ã†ã—ã¦ã‚‚æŠ±ãˆã‚‹è©±)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-31-638.jpg?cb=1569478193" title="Boxed Struct
ãƒœãƒƒã‚¯ã‚¹åŒ–
ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã®å¤‰æ•°ã¯
ãƒ’ãƒ¼ãƒ—ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ ãƒ’ãƒ¼ãƒ—ä¸Šã«ã‚¯ãƒ©ã‚¹ã¨
åŒæ§˜ãƒ˜ãƒƒãƒ€ãŒä»˜ã„ãŸ
ã†..." target="_blank">
        31.
      </a>
    Boxed Struct
ãƒœãƒƒã‚¯ã‚¹åŒ–
ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã®å¤‰æ•°ã¯
ãƒ’ãƒ¼ãƒ—ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ ãƒ’ãƒ¼ãƒ—ä¸Šã«ã‚¯ãƒ©ã‚¹ã¨
åŒæ§˜ãƒ˜ãƒƒãƒ€ãŒä»˜ã„ãŸ
ã†ãˆã§é ˜åŸŸç¢ºä¿
ã‚¢ãƒ³ãƒœãƒƒã‚¯ã‚¹ã®æ¯ã«
ã“ã“ã‹ã‚‰ã‚¹ã‚¿ãƒƒã‚¯ã¸
ã‚³ãƒ”ãƒ¼ã™ã‚‹
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-32-638.jpg?cb=1569478193" title="BoxåŒ–ã¨ã®æˆ¦ã„
33
â€” ãƒœãƒƒã‚¯ã‚¹åŒ–ã¯newã¨ä¸€ç·’
â€” ã‚€ã—ã‚ã‚¢ãƒ³ãƒœãƒƒã‚¯ã‚¹ã®é »åº¦çš„ã«ã‚ˆã‚Šæ‚ªã„
â€” ãƒœãƒƒã‚¯ã‚¹åŒ–ãŒé¿ã‘ã‚‰..." target="_blank">
        32.
      </a>
    BoxåŒ–ã¨ã®æˆ¦ã„
33
â€” ãƒœãƒƒã‚¯ã‚¹åŒ–ã¯newã¨ä¸€ç·’
â€” ã‚€ã—ã‚ã‚¢ãƒ³ãƒœãƒƒã‚¯ã‚¹ã®é »åº¦çš„ã«ã‚ˆã‚Šæ‚ªã„
â€” ãƒœãƒƒã‚¯ã‚¹åŒ–ãŒé¿ã‘ã‚‰ã‚Œãªã„ãªã‚‰æœ€åˆã‹ã‚‰ã‚¯ãƒ©ã‚¹ã§ä½œã‚‹ã“ã¨ã‚‚é¸æŠè‚¢
â€” ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¸ã®ã‚­ãƒ£ã‚¹ãƒˆã«æ°—ã‚’ã¤ã‘ã‚‹
â€“ ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ã¦å›é¿ã—ã¦ã„ã
â€“ enumã®å ´åˆã¯Enum(å‚ç…§å‹)ã‚‚åŒæ§˜
public static class BoxedInt
{
public static readonly object Zero = 0;
public static readonly object One = 1;
public static readonly object MinusOne = -1;
}
ã‚ã‚‹ç¨‹åº¦æ±ºã¾ã£ãŸå€¤ãŒé »ç¹ã«ãƒœãƒƒ
ã‚¯ã‚¹åŒ–ã•ã‚Œã‚‹ã‚ˆã†ãªã‚‰ã€å…ˆã«ä½œã£
ã¦ãŠã„ã¦ä½¿ã„å›ã™ã¨ã„ã†æŠ€
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-33-638.jpg?cb=1569478193" title="Equalsã®è‡ªå‹•å®Ÿè£…ã¨BoxåŒ–
34
â€” structã¯EqualsãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„å ´åˆã€è‡ªå‹•çš„ã«ä»¥ä¸‹ã®ã‚‚ã®ãŒå‘¼ã°..." target="_blank">
        33.
      </a>
    Equalsã®è‡ªå‹•å®Ÿè£…ã¨BoxåŒ–
34
â€” structã¯EqualsãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„å ´åˆã€è‡ªå‹•çš„ã«ä»¥ä¸‹ã®ã‚‚ã®ãŒå‘¼ã°ã‚Œã‚‹
â€” ã‚ã£ã¡ã‚ƒé…ã„
â€” Equalsã¯è¾æ›¸ã®Keyã«ã™ã‚‹ã¨å‘¼ã°ã‚Œã‚‹ï¼
ãã®ãŸã‚è¾æ›¸ã®Keyã«ã™ã‚‹æ§‹é€ ä½“ã¯
IEquatable&lt;T&gt;ã¨GetHashCodeã®
ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ã‚’å¿…ãšè¡Œã†ã“ã¨
internal static bool DefaultEquals(object o1, object o2)
{
RuntimeType o1_type = (RuntimeType)o1.GetType();
RuntimeType o2_type = (RuntimeType)o2.GetType();
object[] fields;
InternalEquals(o1, o2, out fields);
for (int i = 0; i &lt; fields.Length; i += 2)
{
object meVal = fields[i];
object youVal = fields[i + 1];
if (!meVal.Equals(youVal)) return false;
}
return true;
}
object, objectæ¯”è¼ƒã®ãƒœã‚¯ã‚·ãƒ³ã‚°
ãã‚‚ãã‚‚ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§å…¨ãƒ•ã‚£
ãƒ¼ãƒ«ãƒ‰æ¯”è¼ƒï¼ˆé…ã„ï¼‰ã†ãˆã«ã€ãƒ•ã‚£
ãƒ¼ãƒ«ãƒ‰ã®æˆ»ã‚Šå€¤ã‚‚ãƒœã‚¯ã‚·ãƒ³ã‚°
åŸç†ä¸»ç¾©çš„ã«ã¯å¯èƒ½ãªã‚‚ã®å…¨ã¦ã®Structã«ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ã‚’å…¥
ã‚ŒãŸã»ã†ãŒã„ã„ã€ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã‘ã‚Œã©ã€ã‚ã¾ã‚Šã«ã‚‚é¢å€’
ãªã®ã§ã€ã•ã™ãŒã«ãã“ã¯ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆ(è¾æ›¸ã®Keyã«ãªã‚‹ã‚‚ã®
ã ã‘)ã§ã„ã„ã¨æ€ã„ã¾ã™
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-34-638.jpg?cb=1569478193" title="Struct Layout and Padding
å˜ç´”è¨ˆç®—ã§ã¯byte(1) + long(8) + int(4) ..." target="_blank">
        34.
      </a>
    Struct Layout and Padding
å˜ç´”è¨ˆç®—ã§ã¯byte(1) + long(8) + int(4) = 13ã§ã™ãŒã€
ã‚¢ãƒ©ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆèª¿æ•´ã®ãŸã‚ã€æœ€é•·ã®8ã«ãã‚Œãã‚ŒãŒåˆ
ã‚ã›ã‚‰ã‚Œã¦8 * 3 = 24ãƒã‚¤ãƒˆã®ç¢ºä¿ã«ãªã£ã¦ã„ã‚‹
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-35-638.jpg?cb=1569478193" title="Struct Layout and Padding StructLayoutã‚„FieldOffsetã«ã‚ˆã£ã¦ãƒ¬ã‚¤ã‚¢ã‚¦
..." target="_blank">
        35.
      </a>
    Struct Layout and Padding StructLayoutã‚„FieldOffsetã«ã‚ˆã£ã¦ãƒ¬ã‚¤ã‚¢ã‚¦
ãƒˆã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã€‚
structã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Sequential(å®£è¨€é †)
Autoã«å¤‰ãˆã‚‹ã¨ã€Zã¨XãŒè©°ã‚ã‚‰ã‚Œã‚‹ã“ã¨ã§æœ€
å°ã®16ãƒã‚¤ãƒˆã«ç¸®ã‚€
å‚ç…§å‹ã¯structã¨ç•°ãªã‚Šãƒ‡ãƒ•ã‚©
ãƒ«ãƒˆãŒAuto
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-36-638.jpg?cb=1569478193" title="Heap Layout: Array
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å…±é€šãƒ˜ãƒƒãƒ€ã®å¾Œ
ã‚ã«é•·ã•ãŒä»˜ã„ã¦ã‚‹
ãƒ‡ãƒ¼ã‚¿é ˜åŸŸã«ã¯è¦ç´ ãŒãã®ã¾ã¾é †..." target="_blank">
        36.
      </a>
    Heap Layout: Array
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å…±é€šãƒ˜ãƒƒãƒ€ã®å¾Œ
ã‚ã«é•·ã•ãŒä»˜ã„ã¦ã‚‹
ãƒ‡ãƒ¼ã‚¿é ˜åŸŸã«ã¯è¦ç´ ãŒãã®ã¾ã¾é †ç•ªã«ä¸¦ã¶ã€‚æ§‹é€ ä½“ãª
ã‚‰ã€å€¤ãŒãã®ã¾ã¾é †ç•ªã«ä¸¦ã‚“ã§ã„ã‚‹ã“ã¨ã«ãªã‚‹ï¼ˆå‚ç…§
å‹ã®å ´åˆã¯ãƒã‚¤ãƒ³ã‚¿ãŒä¸¦ã‚“ã§ã„ã‚‹ãŸã‚ã€å®Ÿæ…‹ã®ãƒ‡ãƒ¼ã‚¿
ã‚’æ›´ã«è¾¿ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-37-638.jpg?cb=1569478193" title="38
ref and readonly
 " target="_blank">
        37.
      </a>
    38
ref and readonly
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-38-638.jpg?cb=1569478193" title="Zero Allocation foreach in List<T>
39
â€” foreachã¯ .GetEnumer..." target="_blank">
        38.
      </a>
    Zero Allocation foreach in List&lt;T&gt;
39
â€” foreachã¯ .GetEnumerator -&gt; while(MoveNext()) ã«å¤‰æ›ã•ã‚Œã‚‹
â€” ï¼ˆãŸã ã—é…åˆ—ã®å ´åˆã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ILã§forã«å¤‰æ›ã•ã‚Œã‚‹ï¼‰
â€” ã¤ã¾ã‚Š IEnumerator ãŒç”Ÿæˆã•ã‚Œã¦ãƒ’ãƒ¼ãƒ—ã«ç¢ºä¿ã•ã‚Œã¦ã„ã‚‹ï¼Ÿ
â€” ã•ã‚Œã‚‹ã‚ˆã†ã§ã•ã‚Œãªã„
var list = new List&lt;int&gt;() { 1, 2, 3 };
foreach (var item in list)
{
/* do anything */
}
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-39-638.jpg?cb=1569478193" title="Mutable Struct is Evil but Useful
40
â€” ä¸€æ™‚çš„ãªå…¥ã‚Œç‰©ã¨ã—ã¦ä½¿ã†ã‚‚ã®ã«å‘ã„ã¦ã‚‹
..." target="_blank">
        39.
      </a>
    Mutable Struct is Evil but Useful
40
â€” ä¸€æ™‚çš„ãªå…¥ã‚Œç‰©ã¨ã—ã¦ä½¿ã†ã‚‚ã®ã«å‘ã„ã¦ã‚‹
public struct Enumerator : IEnumerator&lt;T&gt;
{
List&lt;T&gt; list;
int index;
int version;
T current;
}
public struct BinaryReader
{
byte[] bytes;
int offset;
}
List&lt;T&gt;ã¯ç›´æ¥GetEnumeratorã‚’å‘¼ã¹ã‚‹
çŠ¶æ³ã§ã¯struct List&lt;T&gt;.Enumerator ã‚’
è¿”ã™ãŸã‚ã‚¼ãƒ­ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
ãƒã‚¤ãƒŠãƒªã‚’èª­ã¿ã™ã™ã‚ã‚‹éš›ã«ReadXxx
ã‚’å‘¼ã¶ãŸã³ã«offsetã‚’è¿½åŠ ã—ã¦ã„ãã¨ã„
ã†ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ç®¡ç†
å±€æ‰€çš„ã«ã—ã‹ä½¿ã‚ãªã„ã®ã§
classã˜ã‚ƒãªãã¦ã‚‚ã„ã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-40-638.jpg?cb=1569478193" title="ref struct
41
â€” ã‚¹ã‚¿ãƒƒã‚¯ã«ã—ã‹ç½®ã‘ãªã„ã¨ã„ã†åˆ¶ç´„ãŒref struct
â€“ å…ƒã€…ã¯Span<T>(Sy..." target="_blank">
        40.
      </a>
    ref struct
41
â€” ã‚¹ã‚¿ãƒƒã‚¯ã«ã—ã‹ç½®ã‘ãªã„ã¨ã„ã†åˆ¶ç´„ãŒref struct
â€“ å…ƒã€…ã¯Span&lt;T&gt;(System.Memory, .NET Standard 2.0å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)ã®ãŸã‚
â€“ Span&lt;T&gt;ã¯é€£ç¶šã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã®ãƒ“ãƒ¥ãƒ¼ã§ã€é…åˆ—ã®ã‚ˆã†ã«æ‰±ãˆã‚‹(NativeArrayã¿ãŸã„ãª)
â€“ ä»Šã¾ã§ãƒã‚¤ãƒ³ã‚¿ã§ã—ã‹æ‰±ãˆãªã‹ã£ãŸstackallocã‚’è‡ªç„¶ã«æ‰±ãˆã¦ä¾¿åˆ©
â€“ ã—ã‹ã—ãã‚Œã«ã‚ˆã£ã¦ã‚¹ã‚¿ãƒƒã‚¯ã«ã®ã¿ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’ãƒ’ãƒ¼ãƒ—ã«ç§»ã•ã‚Œã‚‹ã¨å±é™º
â€“ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç½®ã‘ãªã„(ref structã®fieldã®å ´åˆã®ã¿å¯)ã€ãƒœã‚¯ã‚·ãƒ³ã‚°ã§ããªã„ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•
ã‚§ã‚¤ã‚¹ã‚’å®Ÿè£…ã§ããªã„ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹å¼•æ•°ã«ã§ããªã„ã€ãªã©ã®åˆ¶ç´„ãŒã‚ã‚‹
â€” ãƒ“ãƒ¥ãƒ¼çš„ãªã‚‚ã®ã‚„ä¸€æ™‚çš„ã«ã—ã‹ä½¿ã‚ãªã„çŠ¶æ…‹ã‚’æŒã¤ã‚‚ã®ã«ã¯é©ç”¨ã—ã‚„ã™ã„
â€“ åˆ¶ç´„ãŒå¤šã„ã®ã§ç„¡ç†ã«ä½¿ãŠã†ã¨ã™ã‚‹ã¨ãƒãƒã‚Šã¾ã™ãŒâ€¦â€¦
Span&lt;int&gt; temp = stackalloc int[12];
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-41-638.jpg?cb=1569478193" title="internal ref struct TempList<T>
{
int index;
T[] array;
pub..." target="_blank">
        41.
      </a>
    internal ref struct TempList&lt;T&gt;
{
int index;
T[] array;
public ReadOnlySpan&lt;T&gt; Span =&gt; new ReadOnlySpan&lt;T&gt;(array, 0, index);
public TempList(int initialCapacity)
{
this.array = ArrayPool&lt;T&gt;.Shared.Rent(initialCapacity);
this.index = 0;
}
public void Add(T value)
{
if (array.Length &lt;= index)
{
var newArray = ArrayPool&lt;T&gt;.Shared.Rent(index * 2);
Array.Copy(array, newArray, index);
ArrayPool&lt;T&gt;.Shared.Return(array, true);
array = newArray;
}
array[index++] = value;
}
public void Dispose()
{
ArrayPool&lt;T&gt;.Shared.Return(array, true); // clear for de-reference all.
}
}
ArrayPool(System.Buffers, Unityã§
ã¯ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã‚’è‡ªä½œã™ã‚Œã°â€¦â€¦)
ã‹ã‚‰ç¢ºä¿æ¸ˆã¿é…åˆ—ã‚’å–å¾—ã—ä½¿ã†
Disposeã§è¿”å´
ä¸€æ™‚çš„ã«ã—ã‹ä½¿ã‚ãªã„é…
åˆ—ã‚’éƒ½åº¦ç¢ºä¿ã›ãšãƒ—ãƒ¼ãƒ«
ã‹ã‚‰å–å¾—ã™ã‚‹ãŸã‚ã®æ§‹é€ 
(TempList&lt;T&gt;)
ãƒ—ãƒ¼ãƒ«ã‚’æ‰±ã£ã¦ã„ã‚‹ã®ã§ã€
å¯¿å‘½ã¯æ˜ç¢ºã«çŸ­ãã‚ã£ã¦
ã»ã—ã„ã®ã§ref struct
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-42-638.jpg?cb=1569478193" title="public void DoNanika(IEnumerable<int> idList)
{
var resourc..." target="_blank">
        42.
      </a>
    public void DoNanika(IEnumerable&lt;int&gt; idList)
{
var resources = idList.Select(x =&gt; Load(x));
// LINQã®é…å»¶å®Ÿè¡Œã«ã‚ˆã‚ŠäºŒå›ã®LoadãŒèµ°ã£ã¦ã—ã¾ã†
// ãã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã« .ToList() ã™ã‚‹ã¨ãã‚Œã¯ãã‚Œã§Listã®ç„¡é§„ã‚’æ„Ÿã˜ã‚‹
foreach (var item in resources) { /* nanika suru 1 */ }
foreach (var item in resources) { /* nanika suru 2 */ }
}
public void DoNanika(IEnumerable&lt;int&gt; idList)
{
using var resources = idList.Select(x =&gt; Load(x)).ToTempList();
foreach (var item in resources) { /* nanika suru 1 */ }
foreach (var item in resources) { /* nanika suru 2 */ }
}
usingã ã‘ã§æœ«å°¾ã§
DisposeãŒä¾¿åˆ©
(C# 8.0ã‹ã‚‰ï¼
Unityã§ã¯ã¾ã ï¼)
ã“ã“ã®ä¸­ã ã‘ã§ä½¿ã†ä¸€æ™‚é…åˆ—ã¯Poolã‹ã‚‰
å–ã£ã¦ã‚‹ã®ã§ã‚¢ãƒ­ã‚±ãƒ¼ãƒˆãªã—ã§æ¸ˆã‚“ã 
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-43-638.jpg?cb=1569478193" title="Avoid the copy, Everywhere
44
â€” å…¨ã¦ ref ã§å¼•ãå›ã›ã°ã„ã„ã€ã¨ã¯ã„ã†ã‚‚ã®ã®ç¾å®Ÿçš„ã§..." target="_blank">
        43.
      </a>
    Avoid the copy, Everywhere
44
â€” å…¨ã¦ ref ã§å¼•ãå›ã›ã°ã„ã„ã€ã¨ã¯ã„ã†ã‚‚ã®ã®ç¾å®Ÿçš„ã§ã¯ãªã„
â€” ã‚ã¾ã‚Šã«ã‚‚æœ€æ‚ªãªæ›¸ãå¿ƒåœ°ã«ãªã‚‹ï¼
â€” ã‚ã‚‹ã„ã¯å…¨ã¦unsafeã§ãƒã‚¤ãƒ³ã‚¿ã§å–ã‚Šå›ã™ã¨ã„ã†æ‰‹ã‚‚â€¦â€¦
â€” Unity.Entitiesã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã‹ãªã‚Šãã‚Œã«è¿‘ã„
[StructLayout(LayoutKind.Sequential)]
internal unsafe struct Archetype
{
public ArchetypeChunkData Chunks;
public UnsafeChunkPtrList ChunksWithEmptySlots;
public ChunkListMap FreeChunksBySharedComponents;
public int EntityCount;
public int ChunkCapacity;
public int BytesPerInstance;
public ComponentTypeInArchetype* Types;
public int TypesCount;
public int NonZeroSizedTypesCount;
public int* Offsets;
public int* SizeOfs;
public int* BufferCapacities;
public int* TypeMemoryOrder;
public int* ManagedArrayOffset;
public int NumManagedArrays;
// ... ã¾ã ã¾ã ã„ã£ã±ã„
void AddArchetypeIfMatching(
Archetype* archetype,
EntityQueryData* query)
(ECSã‚ˆã‚Šå¼•ç”¨)ã¨ã«ã‹ãå·¨å¤§ãªStruct
å…¨éƒ¨ãƒã‚¤ãƒ³ã‚¿ã§å¼•ãå›ã™ã‹ã‚‰OK(ï¼Ÿ)
ï¼ˆECSã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¡ãƒ¢ãƒªã‚’ä½¿ã£ãŸã‚Šè‰²ã€…
ã¨å›ºæœ‰ã®äº‹æƒ…ãŒã‚ã‚‹ã®ã§ä¸€èˆ¬è«–ã¯é©ç”¨ã§
ããªã„ï¼‰
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-44-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
}
static void In(in Vector..." target="_blank">
        44.
      </a>
    static void Normal(Vector3 v3)
{
}
static void In(in Vector3 v3)
{
}
static void Ref(ref Vector3 v3)
{
}
Avoid the copy, Everywhere
45
ãã“ã§ç™»å ´ã™ã‚‹ã®ãŒæ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
â€œinâ€
(ã“ã®ã‚³ãƒ¼ãƒ‰ä¾‹è‡ªä½“ã«ã¯ä½•ã®æ„å‘³ã‚‚ãªã„ã§ã™)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-45-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
}
static void In(in Vector..." target="_blank">
        45.
      </a>
    static void Normal(Vector3 v3)
{
}
static void In(in Vector3 v3)
{
}
static void Ref(ref Vector3 v3)
{
}
Avoid the copy, Everywhere
46
Normal(v3);
In(v3);
Ref(ref v3);
å‘¼ã³å´ã®ã‚³ãƒ¼ãƒ‰
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-46-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
}
static void In(in Vector..." target="_blank">
        46.
      </a>
    static void Normal(Vector3 v3)
{
}
static void In(in Vector3 v3)
{
}
static void Ref(ref Vector3 v3)
{
}
Avoid the copy, Everywhere
47
ldloc.0
call Noraml
ldloca.0
call In
ldloca.0
call Ref
Normal(v3);
In(v3);
Ref(ref v3);
å‘¼ã³å´ã®IL
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-47-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
}
static void In(in Vector..." target="_blank">
        47.
      </a>
    static void Normal(Vector3 v3)
{
}
static void In(in Vector3 v3)
{
}
static void Ref(ref Vector3 v3)
{
}
Avoid the copy, Everywhere
48
ldloc.0
call Noraml
ldloca.0
call In
ldloca.0
call Ref
å‘¼ã³æ–¹ã¯æ™®é€šã¨ä¸€ç·’ãªã®ã«
refã¨åŒã˜ãå‚ç…§æ¸¡ã—ã•ã‚Œã‚‹ï¼
Normal(v3);
In(v3);
Ref(ref v3);
ã˜ã‚ƒã‚å…¨éƒ¨ in ã§ã„ã„ã­ï¼
ï¼ˆã«ã¯ãªã‚‰ãªã„ï¼‰
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-48-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
_ = v3.magnitude;
}
static..." target="_blank">
        48.
      </a>
    static void Normal(Vector3 v3)
{
_ = v3.magnitude;
}
static void In(in Vector3 v3)
{
_ = v3.magnitude;
}
static void Ref(ref Vector3 v3)
{
_ = v3.magnitude;
}
Avoid the copy, Everywhere
49
ldarga.0
call get_magnitude
ldarg.0
ldobj
stloc.0
ldloca.0
call get_magnitude
ldarg.0
call get_magnitude
å‘¼ã°ã‚Œå´ã®IL
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-49-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
_ = v3.magnitude;
}
static..." target="_blank">
        49.
      </a>
    static void Normal(Vector3 v3)
{
_ = v3.magnitude;
}
static void In(in Vector3 v3)
{
_ = v3.magnitude;
}
static void Ref(ref Vector3 v3)
{
_ = v3.magnitude;
}
Avoid the copy, Everywhere
50
ldarga.0
call get_magnitude
ldarg.0
ldobj
stloc.0
ldloca.0
call get_magnitude
ldarg.0
call get_magnitude
å‘¼ã°ã‚Œå´ã®IL
ã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã‚‹ï¼ˆé˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ï¼‰
var v3_2 = v3;
_ = v3_2.magnitude;
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-50-638.jpg?cb=1569478193" title="static void Normal(Vector3 v3)
{
_ = v3.magnitude;
_ = v3.m..." target="_blank">
        50.
      </a>
    static void Normal(Vector3 v3)
{
_ = v3.magnitude;
_ = v3.magnitude;
}
static void In(in Vector3 v3)
{
_ = v3.magnitude;
_ = v3.magnitude;
}
static void Ref(ref Vector3 v3)
{
_ = v3.magnitude;
_ = v3.magnitude;
}
Avoid the copy, Everywhere
51
ldarga.0
call get_magnitude
ldarg.0
ldobj
stloc.0
ldloca.0
call get_magnitude
ldarg.0
call get_magnitude
å‘¼ã°ã‚Œå´ã®IL
äºŒå›å‘¼ã¹ã°ã‚³ãƒ”ãƒ¼ã‚‚ãã®ã¾ã¾äºŒã¤
ldarga.0
call get_magnitude
ldarg.0
ldobj
stloc.0
ldloca.0
call get_magnitude
ldarg.0
call get_magnitude
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-51-638.jpg?cb=1569478193" title="Best practice to use `in`
52
â€” in ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨([In][IsReadOnly..." target="_blank">
        51.
      </a>
    Best practice to use `in`
52
â€” in ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨([In][IsReadOnly]ref T t) ã«ãªã‚‹
â€” èª­ã¿å–ã‚Šå°‚ç”¨ã®ãŸã‚ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®ä»£å…¥ã¯ã§ããªã„
â€” v3.x = 10.0f; // compile error
â€” ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¯å¯èƒ½ã ãŒã€ä¸­èº«ãŒå¤‰ã‚ã‚‰ãªã„ä¿è¨¼ãŒãªã„ãŸã‚é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‹
â€” ãã®ãŸã‚ã€ã†ã‹ã¤ã«å¤šç”¨ã™ã‚‹ã¨é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ã«ã‚ˆã‚Šã€ã‚€ã—ã‚æ€§èƒ½ä½ä¸‹ã‚‚ã‚ã‚Šã†ã‚‹
â€” ã‚‚ã—ãã‚ŒãŒMutable Structã ã¨ã‚‚ã¯ã‚„ã‚ã‘ã‚ã‹ã‚‰ãªã„ã“ã¨ã«
â€” (Vector3.magnitudeã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãªã®ã§ãƒ¡ã‚½ãƒƒãƒ‰æ‰±ã„)
â€” é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‰ãªã„æ¡ä»¶ã¯
â€“ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£/ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã°ãªã„ã“ã¨
â€“ ã‚ã‚‹ã„ã¯ readonly struct ã§ã‚ã‚‹ã“ã¨
â€“ readonly structã¯æ›¸ãæ›ã‚ã‚‰ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ãŸã‚é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‰ãªã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-52-638.jpg?cb=1569478193" title="Best practice to use `in`
53
â€” in ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨([In][IsReadOnly..." target="_blank">
        52.
      </a>
    Best practice to use `in`
53
â€” in ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨([In][IsReadOnly]ref T t) ã«ãªã‚‹
â€” èª­ã¿å–ã‚Šå°‚ç”¨ã®ãŸã‚ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®ä»£å…¥ã¯ã§ããªã„
â€” v3.x = 10.0f; // compile error
â€” ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¯å¯èƒ½ã ãŒã€ä¸­èº«ãŒå¤‰ã‚ã‚‰ãªã„ä¿è¨¼ãŒãªã„ãŸã‚é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‹
â€” ãã®ãŸã‚ã€ã†ã‹ã¤ã«å¤šç”¨ã™ã‚‹ã¨é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ã«ã‚ˆã‚Šã€ã‚€ã—ã‚æ€§èƒ½ä½ä¸‹ã‚‚ã‚ã‚Šã†ã‚‹
â€” ã‚‚ã—ãã‚ŒãŒMutable Structã ã¨ã‚‚ã¯ã‚„ã‚ã‘ã‚ã‹ã‚‰ãªã„ã“ã¨ã«
â€” é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‰ãªã„æ¡ä»¶ã¯
â€“ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£/ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã°ãªã„ã“ã¨
â€“ ã‚ã‚‹ã„ã¯ readonly struct ã§ã‚ã‚‹ã“ã¨
â€“ readonly structã¯æ›¸ãæ›ã‚ã‚‰ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ãŸã‚é˜²å¾¡çš„ã‚³ãƒ”ãƒ¼ãŒèµ°ã‚‰ãªã„
public readonly struct MyVector3
{
public readonly float x;
public readonly float y;
public readonly float z;
public MyVector3(float x, float y, float z)
{
this.x = x; this.y = y; this.z = z;
}
readonly structã®æ¡ä»¶ã¯å…¨ã¦ã®ãƒ•ã‚£
ãƒ¼ãƒ«ãƒ‰ãŒreadonlyã§ã‚ã‚‹ã“ã¨
ref readonly structã‚‚OK
åŸå‰‡inã®å¼•æ•°ã¯readonly struct
ä¸­ã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã—ã‹çµ¶å¯¾è§¦ã‚‰ãªã„ã¨åŠ›
å¼·ãè¨€ãˆã‚‹ãªã‚‰ãƒŠã‚·ã§ã¯ãªã„
ã‚ˆãã‚ã‹ã‚‰ãªã„ãªã‚‰åŸºæœ¬ä½¿ã‚ãªã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-53-638.jpg?cb=1569478193" title="readonly field(struct)ã®ç½ 
54
â€” readonlyãªfieldã®structã«mutable..." target="_blank">
        53.
      </a>
    readonly field(struct)ã®ç½ 
54
â€” readonlyãªfieldã®structã«mutableãªæ“ä½œã‚’è¡Œã£ã¦ã‚‚å¤‰æ›´ã•ã‚Œãªã„
â€” ã‚ˆã£ã¦ã€ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªæ“ä½œã‚’è¡Œã†ã‚‚ã®ã¯readonly fieldã«ã™ã¹ãã§ã¯ãªã„
â€” åŸå‰‡çš„ã«ã¯ã€Œå¯èƒ½ãªã‚‚ã®ã¯ã€ã¨è¨€ã„ãŸã„ã¨ã“ã‚ã ã‘ã©
Unityã®å ´åˆã€å¯èƒ½ãªã‚‚ã®ãŒå¤šã„ã®ã§â€¦â€¦
public class NantokaBehaviour : MonoBehaviour
{
public readonly Vector3 NanikanoVector3;
public void Incr()
{
NanikanoVector3.Set(
NanikanoVector3.x + 1f,
NanikanoVector3.y + 1f,
NanikanoVector3.z + 1f);
}
}
ä½•å›Incrå‘¼ã‚“ã§ã‚‚0, 0, 0ã®ã¾ã¾
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-54-638.jpg?cb=1569478193" title="55
Manipulate Memory
 " target="_blank">
        54.
      </a>
    55
Manipulate Memory
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-55-638.jpg?cb=1569478193" title="æ”¹ã‚ã¦Structã¨ã¯
56
â€” ãƒ¡ãƒ¢ãƒªã‚’å˜ç´”ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸæ§‹é€ 
â€“ ãã®ã“ã¨ã ã‘æ„è­˜ã™ã‚Œã°ã€ã‚ã¨ã¯ã‚„ã‚ŠãŸã„æ”¾é¡Œã§ã..." target="_blank">
        55.
      </a>
    æ”¹ã‚ã¦Structã¨ã¯
56
â€” ãƒ¡ãƒ¢ãƒªã‚’å˜ç´”ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸæ§‹é€ 
â€“ ãã®ã“ã¨ã ã‘æ„è­˜ã™ã‚Œã°ã€ã‚ã¨ã¯ã‚„ã‚ŠãŸã„æ”¾é¡Œã§ãã‚‹
[StructLayout(LayoutKind.Sequential, Size = 16)]
public struct Empty16
{
}
public struct LongLong
{
public long X;
public long Y;
}
ã©ã¡ã‚‰ã‚‚é€£ç¶šã—ã¦16ãƒã‚¤ãƒˆã®
é ˜åŸŸã‚’ç¢ºä¿ã—ã¦ã„ã‚‹ã ã‘ã€ã¨ã„
ã†æ„å‘³ï¼ˆã«èª­ã‚ã‚‹ï¼‰
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹0ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
8ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ãã—ã¦ã„ã‚‹
ã ã‘ï¼ˆã¨ã„ã†é¢¨ã«èª­ã‚ã‚‹ï¼‰
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-56-638.jpg?cb=1569478193" title="57
// å…ˆé ­6ãƒã‚¤ãƒˆãŒTimestamp, å¾Œã‚10ãƒã‚¤ãƒˆãŒãƒ©ãƒ³ãƒ€ãƒ ã¨ã„ã†Ulidã¨ã„ã†ä»•æ§˜(ã‚½ãƒ¼ãƒˆå¯èƒ½ãªGuid..." target="_blank">
        56.
      </a>
    57
// å…ˆé ­6ãƒã‚¤ãƒˆãŒTimestamp, å¾Œã‚10ãƒã‚¤ãƒˆãŒãƒ©ãƒ³ãƒ€ãƒ ã¨ã„ã†Ulidã¨ã„ã†ä»•æ§˜(ã‚½ãƒ¼ãƒˆå¯èƒ½ãªGuidã®ä»£æ›¿)
[StructLayout(LayoutKind.Explicit, Size = 16)]
public struct Ulid
{
// Timestampã¨Randomnessã®ã¯ã˜ã¾ã‚Šã®éƒ¨åˆ†ã ã‘æŒã£ã¦ãŠã(æœ€æ‚ªãªãã¦ã‚‚åˆ¥ã«ã„ã„)
[FieldOffset(0)] byte timestamp0;
[FieldOffset(6)] byte randomness0;
public static Ulid NewUlid()
{
var memory = default(Ulid); // 16ãƒã‚¤ãƒˆç¢ºä¿
var timestampMilliseconds = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();
ref var fisrtByte = ref Unsafe.As&lt;long, byte&gt;(ref timestampMilliseconds);
Unsafe.Add(ref memory.timestamp0, 0) = Unsafe.Add(ref fisrtByte, 5);
Unsafe.Add(ref memory.timestamp0, 1) = Unsafe.Add(ref fisrtByte, 4);
Unsafe.Add(ref memory.timestamp0, 2) = Unsafe.Add(ref fisrtByte, 3);
Unsafe.Add(ref memory.timestamp0, 3) = Unsafe.Add(ref fisrtByte, 2);
Unsafe.Add(ref memory.timestamp0, 4) = Unsafe.Add(ref fisrtByte, 1);
Unsafe.Add(ref memory.timestamp0, 5) = Unsafe.Add(ref fisrtByte, 0);
Unsafe.WriteUnaligned(ref memory.randomness0, xorshift.NextULong());
Unsafe.WriteUnaligned(ref Unsafe.Add(ref memory.randomness0, 2), xorshift.NextULong());
return memory;
}
Ulid:
[Timestamp(6),
Randomness(10)]
ã®å®Ÿè£…
(System.Runtime
.CompilerService
s.Unsafeã‚’åˆ©ç”¨ã€
Unityã§ã‚‚å‹•ãã¾
ã™ãŒåˆ¥é€”å‚ç…§ã¯å¿…
è¦ã€ãƒã‚¤ãƒ³ã‚¿ã§ã‚„
ã£ã¦ã‚‚ã„ã„ã§ã™)
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-57-638.jpg?cb=1569478193" title="58
// å…ˆé ­6ãƒã‚¤ãƒˆãŒTimestamp, å¾Œã‚10ãƒã‚¤ãƒˆãŒãƒ©ãƒ³ãƒ€ãƒ ã¨ã„ã†Ulidã¨ã„ã†ä»•æ§˜(ã‚½ãƒ¼ãƒˆå¯èƒ½ãªGuid..." target="_blank">
        57.
      </a>
    58
// å…ˆé ­6ãƒã‚¤ãƒˆãŒTimestamp, å¾Œã‚10ãƒã‚¤ãƒˆãŒãƒ©ãƒ³ãƒ€ãƒ ã¨ã„ã†Ulidã¨ã„ã†ä»•æ§˜(ã‚½ãƒ¼ãƒˆå¯èƒ½ãªGuidã®ä»£æ›¿)
[StructLayout(LayoutKind.Explicit, Size = 16)]
public struct Ulid
{
// Timestampã¨Randomnessã®ã¯ã˜ã¾ã‚Šã®éƒ¨åˆ†ã ã‘æŒã£ã¦ãŠã(æœ€æ‚ªãªãã¦ã‚‚åˆ¥ã«ã„ã„)
[FieldOffset(0)] byte timestamp0;
[FieldOffset(6)] byte randomness0;
public static Ulid NewUlid()
{
var memory = default(Ulid); // 16ãƒã‚¤ãƒˆç¢ºä¿
var timestampMilliseconds = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();
ref var fisrtByte = ref Unsafe.As&lt;long, byte&gt;(ref timestampMilliseconds);
Unsafe.Add(ref memory.timestamp0, 0) = Unsafe.Add(ref fisrtByte, 5);
Unsafe.Add(ref memory.timestamp0, 1) = Unsafe.Add(ref fisrtByte, 4);
Unsafe.Add(ref memory.timestamp0, 2) = Unsafe.Add(ref fisrtByte, 3);
Unsafe.Add(ref memory.timestamp0, 3) = Unsafe.Add(ref fisrtByte, 2);
Unsafe.Add(ref memory.timestamp0, 4) = Unsafe.Add(ref fisrtByte, 1);
Unsafe.Add(ref memory.timestamp0, 5) = Unsafe.Add(ref fisrtByte, 0);
Unsafe.WriteUnaligned(ref memory.randomness0, xorshift.NextULong());
Unsafe.WriteUnaligned(ref Unsafe.Add(ref memory.randomness0, 2), xorshift.NextULong());
return memory;
}
// ãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’ã‚³ãƒ”ãƒ¼ã™ã‚Œã°ãŠï½‹ã€‚
// æ–‡å­—åˆ—è¡¨ç¾ã¨ã—ã¦Base32ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰(ToString)ã‚‚åŒæ§˜ã«è‡ªåˆ†ã®ãƒ¡ãƒ¢ãƒªç²‹ã‹ã‚‰ç®—å‡º
public bool TryWriteBytes(Span&lt;byte&gt; destination)
{
if (destination.Length &lt; 16)
{
return false;
}
Unsafe.WriteUnaligned(ref MemoryMarshal.GetReference(destination), this)
return true;
}
å‡ºåŠ›å…ˆã¨ã—ã¦byte[]ã¨stringãŒã‚ã‚Œã°ãã‚Œã§ã„ã„
ãã‚Œã‚‰ã¯ã»ã¨ã‚“ã©ãƒ¡ãƒ¢ãƒªã‚³ãƒ”ãƒ¼ã§å®Ÿç¾ã™ã‚‹
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-58-638.jpg?cb=1569478193" title="Union
59
[StructLayout(LayoutKind.Explicit, Pack = 1)]
inte..." target="_blank">
        58.
      </a>
    Union
59
[StructLayout(LayoutKind.Explicit, Pack = 1)]
internal struct GuidBits
{
[FieldOffset(0)]
public readonly Guid Value;
[FieldOffset(0)]
public readonly byte Byte0;
[FieldOffset(1)]
public readonly byte Byte1;
[FieldOffset(2)]
public readonly byte Byte2;
[FieldOffset(3)]
public readonly byte Byte3;
/* ä¸­ç•¥(Byte4~Byte11) */
[FieldOffset(12)]
public readonly byte Byte12;
[FieldOffset(13)]
public readonly byte Byte13;
[FieldOffset(14)]
public readonly byte Byte14;
[FieldOffset(15)]
public readonly byte Byte15;
Guidã¨byte0~16ã®é‡ã­åˆã‚ã›
(åŒä¸€FieldOffset)
é€šå¸¸Stringã‹byte[]ã‹ã‚‰ã—ã‹ç”Ÿæˆã§ã
ãªã„Guidã‚’ã€byte0~16ã‚’åŸ‹ã‚ã‚‹ã ã‘
ã§è‡ªç”±ã«ç”Ÿæˆã™ã‚‹(æœ¬æ¥å¼„ã‚Œãªã„Guid
ã¨ã—ã¦ã®ãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’é‡ã­åˆã‚ã›ã¦
å®‰å…¨ã«(not unsafe)å¼„ã‚‹)
MessagePack for C#ã§Utf8 Bytesã®ã‚¹
ãƒ©ã‚¤ã‚¹ã‹ã‚‰æ–‡å­—åˆ—ã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¿
ã‘ã¦ç›´æ¥Guidã«å¤‰æ›ã™ã‚‹ã®ã«åˆ©ç”¨
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-59-638.jpg?cb=1569478193" title="æ”¹ã‚ã¦StructãŒè¦ç´ ã®é…åˆ—ã¨ã¯
60
â€” ãƒ¡ãƒ¢ãƒªã«StructãŒå˜ç´”ã«ä¸¦ã‚“ã§ã„ã‚‹
X Y Z X Y Z X Y ..." target="_blank">
        59.
      </a>
    æ”¹ã‚ã¦StructãŒè¦ç´ ã®é…åˆ—ã¨ã¯
60
â€” ãƒ¡ãƒ¢ãƒªã«StructãŒå˜ç´”ã«ä¸¦ã‚“ã§ã„ã‚‹
X Y Z X Y Z X Y Z X Y ZVector3[]
ãƒ¡ãƒ¢ãƒªã‚’ã¾ã‚‹ã”ã¨ã‚³ãƒ”ãƒ¼ã™ã‚‹ã ã‘ã§
æœ€é€Ÿã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã ã‚ˆã­èª¬
ï¼ˆã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³ã¯æƒãˆã‚‹ï¼‰
å®Ÿéš›MagicOnionã§æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒå¯
èƒ½(ã‚µãƒ¼ãƒãƒ¼ã‚‚C#ãªã®ã§ç›´æ¥ãƒ¡ãƒ¢ãƒªã‚’ã¶
ã‚“æŠ•ã’ã¦å—ã‘å–ã‚‹ã®ãŒç°¡å˜)
ãŸã ã—Structã®ä¸­ã«ã¯å‚ç…§å‹(Stringå«
ã‚€)ã¯å«ã‚ãªã„ã“ã¨ã€‚ãƒã‚¤ãƒ³ ã‚¿ã‚’ã‚³ãƒ”ãƒ¼
ã—ã¦ã‚‚æ„å‘³ãŒãªã„
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-60-638.jpg?cb=1569478193" title="61
public class UnsafeDirectBlitArrayFormatter<T> : IMessag..." target="_blank">
        60.
      </a>
    61
public class UnsafeDirectBlitArrayFormatter&lt;T&gt; : IMessagePackFormatter&lt;T[]&gt; where T : struct
{
public unsafe int Serialize(ref byte[] bytes, int offset, T[] value)
{
var startOffset = offset;
var byteLen = value.Length * UnsafeUtility.SizeOf&lt;T&gt;();
/* ä¸­ç•¥(MsgPackã§ã®Extãƒ˜ãƒƒãƒ€ãƒ¼æ›¸ãè¾¼ã¿) */
ulong handle2;
var srcPointer = UnsafeUtility
.PinGCArrayAndGetDataAddress(value, out handle2);
try
{
fixed (void* dstPointer = &amp;bytes[offset])
{
UnsafeUtility.MemCpy(dstPointer, srcPointer, byteLen);
}
}
finally
{
UnsafeUtility.ReleaseGCObject(handle2);
}
// ...
}
T[]ã‚’bytesã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
memcpyã™ã‚‹ã ã‘
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-61-638.jpg?cb=1569478193" title="62
Span and NativeArray
 " target="_blank">
        61.
      </a>
    62
Span and NativeArray
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-62-638.jpg?cb=1569478193" title="Span vs NativeArray
63
â€” Span<T>
â€” System.Memory
â€” .NET Sta..." target="_blank">
        62.
      </a>
    Span vs NativeArray
63
â€” Span&lt;T&gt;
â€” System.Memory
â€” .NET Standard 2.1ã§ã¯æ¨™æº–(ç¾åœ¨ã¯å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¿…è¦)
â€” C# 7.2ã¨çµ±åˆã•ã‚Œã¦ã„ã‚‹
â€” ã‚ã‚‰ã‚†ã‚‹é€£ç¶šã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã®ãƒ“ãƒ¥ãƒ¼
â€” é…åˆ—ã€stackallocã€ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¡ãƒ¢ãƒª(ãƒã‚¤ãƒ³ã‚¿)ã€æ–‡å­—åˆ—(String)
â€” NativeArray
â€” Unityå›ºæœ‰, ç‰¹ã«DOTSã®ã‚­ãƒ¼ãƒ‘ãƒ¼ãƒ„
â€” UnsafeUtility.Malloc ã§ç²å¾—ã™ã‚‹Unmanaged Memoryã®ãƒ“ãƒ¥ãƒ¼
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-63-638.jpg?cb=1569478193" title="ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¯¾å¿œãŒãªã„ã¨æ„å‘³ãŒãªã„
64
â€” Span<T>
â€” ä»Šã¾ã§ã®APIãŒT[]ã—ã‹å—ã‘å…¥ã‚Œãªã‹ã£ãŸã‚Šã™ã‚‹ã¨..." target="_blank">
        63.
      </a>
    ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¯¾å¿œãŒãªã„ã¨æ„å‘³ãŒãªã„
64
â€” Span&lt;T&gt;
â€” ä»Šã¾ã§ã®APIãŒT[]ã—ã‹å—ã‘å…¥ã‚Œãªã‹ã£ãŸã‚Šã™ã‚‹ã¨ã€çµå±€T[]ã¸ã®å¤‰æ›ãŒå¿…è¦ã«ãªã‚‹
â€” ç„¡é§„ã‚¢ãƒ­ã‚±ãƒ¼ãƒˆ
â€” .NET Core 2.1ã§å¯¾å¿œå……å®Ÿã•ã›ä¸­
â€” ä¾‹ãˆã°Convert.ToBase64StringãŒbyte[]ã®ã»ã‹ReadOnlySpan&lt;byte&gt;ã‚’å—ã‘ã¨ã‚‹
â€” ã¤ã¾ã‚ŠUnityã§ã¯APIå´ã®å¯¾å¿œãŒã»ã¨ã‚“ã©ãªã„ã®ã§Spanã ã‘å…¥ã‚Œã¦ã‚‚æ„å‘³ã¯é™å®šçš„
â€” NativeArray
â€” DOTSå‘¨è¾ºã§ä½¿ãˆã‚‹ã‘ã‚Œã©ã€ã‚„ã¯ã‚Šä¸€éƒ¨ã®APIã¯å¯¾å¿œãŒå¿…è¦
â€” ä¾‹ãˆã°Mesh.SetVertexBufferDataã¨ã—ã¦List&lt;T&gt;ã‚„T[]ä»¥å¤–ã«NativeArray&lt;T&gt;ã‚’å—ã‘
å–ã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯ 2019.3ã‹ã‚‰
â€” ã¨ã„ã†ã‚ˆã†ã«ã€ã‚¹ãƒ ãƒ¼ã‚ºã«å…¨ä½“çš„ã«çµ±åˆã•ã‚Œã¦ã„ãã®ã¯ã‚‚ã†ã¡ã‚‡ã£ã¨ã‹ãªï¼Ÿ
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-64-638.jpg?cb=1569478193" title="65
Conclusion
 " target="_blank">
        64.
      </a>
    65
Conclusion
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-65-638.jpg?cb=1569478193" title="ã®å‰ã«ã€‚
66
â€” æ§‹é€ ä½“ã®è‰²ã‚’ã‚¯ãƒ©ã‚¹ã¨ã¯åˆ¥ã®è‰²ã«å¤‰æ›´ã—ã¦ãŠã“ã†ï¼
â€“ æ€§èƒ½ç‰¹æ€§ãŒç•°ãªã‚‹ã‚‚ã®ã®ãŸã‚ã€è¦‹åˆ†ã‘ãŒã¤ãã¨ã€ã¨..." target="_blank">
        65.
      </a>
    ã®å‰ã«ã€‚
66
â€” æ§‹é€ ä½“ã®è‰²ã‚’ã‚¯ãƒ©ã‚¹ã¨ã¯åˆ¥ã®è‰²ã«å¤‰æ›´ã—ã¦ãŠã“ã†ï¼
â€“ æ€§èƒ½ç‰¹æ€§ãŒç•°ãªã‚‹ã‚‚ã®ã®ãŸã‚ã€è¦‹åˆ†ã‘ãŒã¤ãã¨ã€ã¨ã¦ã‚‚æ¥½ã«ãªã‚‹
 
  </li>
  <li>
      <a href="https://image.slidesharecdn.com/09261330roomayoshihumikawai-190926055210/95/unite-tokyo-2019understanding-c-struct-all-things-66-638.jpg?cb=1569478193" title="Structã‚’æã‚Œãªã„
67
â€” Structã®ä½¿ã„ã“ãªã—è‡ªä½“ã¯ã€ã‚‚ã¯ã‚„å¿…é ˆ
â€“ Classã‚’å„ªå…ˆã™ã‚‹ç‰§æ­Œçš„æ™‚ä»£ã¯çµ‚ã‚..." target="_blank">
        66.
      </a>
    Structã‚’æã‚Œãªã„
67
â€” Structã®ä½¿ã„ã“ãªã—è‡ªä½“ã¯ã€ã‚‚ã¯ã‚„å¿…é ˆ
â€“ Classã‚’å„ªå…ˆã™ã‚‹ç‰§æ­Œçš„æ™‚ä»£ã¯çµ‚ã‚ã£ãŸ
â€“ ç¢ºã‹ã«ç½ ã¯ï¼ˆã„ã£ã±ã„ï¼‰ã‚ã‚‹ãŒã€é›£ã—ã„è©±ã§ã¯ãªã„
â€“ è¦šãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒï¼ˆã¡ã‚‡ã£ã¨ï¼‰å¤šã„ã ã‘ã§
â€” ãã—ã¦ã“ã®æµã‚Œã¯æˆ»ã‚‰ãªã„
â€“ è¨€èªå¼·åŒ–ã‹ã‚‰ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æŠœæœ¬çš„å¤‰æ›´ã¾ã§ã€æ™‚ä»£ã¯æ—¢ã«æ¥ã¦ã‚‹
â€“ â€¦â€¦ã¨ã¯ã„ãˆã€ã˜ã‚ƒã‚ã„ããªã‚Šã‚ã£ã¡ã‚ƒä½¿ã†ã‹ã¨è¨€ã†ã¨ã€ãã‚Œã¯ã¾ãŸåˆ¥ã®è©±
â€“ ä½¿ã†ã¹ãæ™‚ã«ä½¿ã„ã€èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã†ã€å½“ãŸã‚Šå‰ã‚’å¤§äº‹ã«ã—ã‚ˆã†
 
  </li>

              </ol>
            </div>
      </div>
    </div>

    
  </div>
</div>










      

      

        
    </div></div></div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function () {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>