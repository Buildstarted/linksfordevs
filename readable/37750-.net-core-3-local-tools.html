<!DOCTYPE html>
<html lang="en">
<head>
    <title>
.NET Core 3 Local Tools -
linksfor.dev(s)
    </title>
	<link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <h1>.NET Core 3 Local Tools</h1>
    <div class="post-content"> <p>.NET Tools are great, and we&apos;ve known them for a while in .NET Core as &quot;.NET Core Global Tools&quot;, but often we don&apos;t want these tools not to be shared globally across our machine. This is where &quot;Local Tools&quot; come in handy, introduced in .NET Core SDK 3.0.</p><p>As an example, let&apos;s look at the Cake (<a href="https://github.com/cake-build/cake">Cake build</a>) tool, however this applies to any .NET Tool.</p><p>We could install <code>Cake.Tool</code> globally like this:</p><div class="vscode"><div><span>dotnet&#xA0;tool&#xA0;install&#xA0;--global&#xA0;Cake.Tool</span></div></div><p>This will work just fine, but if we have multiple projects, we are going to want to have different versions of the Cake tool installer per project.</p><h2 id="the-old-way">The Old Way</h2><p>Previously we could do this by running the following command:</p><div class="vscode"><div><span>dotnet&#xA0;tool&#xA0;install&#xA0;--tool-path&#xA0;.tools&#xA0;Cake.Tool</span></div></div><p>Where <code>.tools</code> is the path you&apos;d like to install the tool to. With this we could run cake like this (on macOS, it works similarly on Windows):</p><div class="vscode"><div><span>./.tools/dotnet-cake&#xA0;--help</span></div></div><p>That was fine, however there are a few ways the overall approach lacked:</p><ul><li>You didn&apos;t have a file with a discoverable list of tools used for the project, you&apos;d typically have the above commands in a script file, and you&apos;d need to think about should it be <code>pwsh</code>, &#xA0;<code>bash</code> or other. </li><li>If you had the same version of a tool in x different folders, you&apos;d have x copies of the tool on your disk (packages here would be restored to <code>.tools/.store/</code>).</li><li>Launching the tool was platform dependant due to the tools file suffix.</li><li>The initial command was hard to remember, I always needed to look up <code>--tool-path</code>.</li></ul><h2 id="the-new-way-">The New Way &#x2728;</h2><p>With the .NET Core 3 CLI, you we can now use Local Tools.</p><p>First you need a tools manifest file, this will eventually contain the list of installed tools. We can create it using this command:</p><p>Now we have a file created at <code>.config/dotnet-tools.json</code> with the following contents:</p><div class="vscode"></div><p>Now we can start installing tools, now with an easier to remember command:</p><div class="vscode"><div><span>dotnet&#xA0;tool&#xA0;install&#xA0;Cake.Tool</span></div></div><p>I don&apos;t know about you, but I&apos;ve ran this command many times before they made this &quot;a thing&quot; expecting it to work.</p><p>Now if we look at our <code>dotnet-tools.json</code> file it looks like this:</p><div class="vscode"></div><p>Now we can run our command with <code>dotnet cake --help</code> or alternatively <code>dotnet dotnet-cake --help</code> or even <code>dotnet tool run dotnet-cake --help</code>.</p><p>Now we can check in our <code>.config</code> and other users of our project can discover the tools we have added. The tool is installed to the global nuget package cache, like a typical nuget package, if the user does not have the package present they will get the following message when trying to first run the tool:</p><div class="vscode"><div><span>Run&#xA0;</span><span>&quot;dotnet&#xA0;tool&#xA0;restore&quot;</span><span>&#xA0;to&#xA0;make&#xA0;the&#xA0;</span><span>&quot;dotnet-cake&quot;</span><span>&#xA0;command&#xA0;available.</span></div></div><p>So they are just one simple command away from restoring the tool and being able to use it.</p> </div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2019 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
    </footer>
    
    <script>
        (function() {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function() {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) {}
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>