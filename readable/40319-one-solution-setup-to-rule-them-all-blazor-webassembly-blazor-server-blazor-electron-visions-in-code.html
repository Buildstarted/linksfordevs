<!DOCTYPE html>
<html lang="en">
<head>
    <title>
One solution (setup) to rule them all &#x2013; Blazor Webassembly, Blazor Server, Blazor Electron &#x2013; Visions In Code -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>One solution (setup) to rule them all ‚Äì Blazor Webassembly, Blazor Server, Blazor Electron ‚Äì Visions In Code</h1><div><div class="entry-content"><p><a href="https://visionsincode.files.wordpress.com/2019/10/doit.png"><img data-attachment-id="4232" data-permalink="https://visionsincode.wordpress.com/2019/11/01/one-solution-setup-to-rule-them-all-blazor-webassembly-blazor-server-blazor-electron/doit/" data-orig-file="https://visionsincode.files.wordpress.com/2019/10/doit.png" data-orig-size="748,421" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="DOIT" data-image-description="" data-medium-file="https://visionsincode.files.wordpress.com/2019/10/doit.png?w=300" data-large-file="https://visionsincode.files.wordpress.com/2019/10/doit.png?w=748" src="https://visionsincode.files.wordpress.com/2019/10/doit.png?w=748&amp;h=421" alt="" width="748" height="421" class="aligncenter size-full wp-image-4232" srcset="https://visionsincode.files.wordpress.com/2019/10/doit.png 748w, https://visionsincode.files.wordpress.com/2019/10/doit.png?w=150&amp;h=84 150w, https://visionsincode.files.wordpress.com/2019/10/doit.png?w=300&amp;h=169 300w" sizes="(max-width: 748px) 100vw, 748px"></a><br>Hello my dear friends and Blazorians üôÇ This post will be a follow up on the previous post ‚Äì <a href="https://visionsincode.wordpress.com/2019/09/27/make-it-all-dynamic-in-blazor-routing-pages-and-components/" rel="noopener" target="_blank">Make it all dynamic in BLAZOR ‚Äì Routing, Pages and Components</a></p><p>But before we start, I want to give a shout out to some of the great contributors in our BLAZOR community:</p><p><a href="https://twitter.com/edcharbeneau" rel="noopener" target="_blank">Ed Charbeneau</a>, aka mr Powerglove<br>You will find his great stuff at github: <a href="https://github.com/EdCharbeneau" rel="nofollow">https://github.com/EdCharbeneau</a><br>You will learn tons of blazor stuff, functional programming and CSS magic ‚Äì You must check out his great streams at twitch: <a href="https://www.twitch.tv/edcharbeneau" rel="nofollow">https://www.twitch.tv/edcharbeneau</a></p><p><a href="https://twitter.com/csharpfritz" rel="noopener" target="_blank">csharpfritz (Jeff Fritz)</a> ‚Äì the guy who got horses to love javascript<br>You will find his great stuff at github: <a href="https://github.com/csharpfritz" rel="nofollow">https://github.com/csharpfritz</a><br>A true artist when it comes to educate, inspire and share his knowledge. You need to check out his great twitch stream: <a href="https://www.twitch.tv/csharpfritz" rel="nofollow">https://www.twitch.tv/csharpfritz</a></p><p><a href="https://twitter.com/chris_sainty" rel="noopener" target="_blank">Chris Sainty</a> ‚Äì the blog post generator<br>Check out all his great posts at <a href="https://chrissainty.com" rel="nofollow">https://chrissainty.com</a></p><p><a href="https://twitter.com/adefwebserver" rel="noopener" target="_blank">Michael Washington</a> ‚Äì who has mastered the art of ‚Äúblog post telling‚Äù with screen capturing<br>Check out all his great posts at <a href="http://blazorhelpwebsite.com" rel="nofollow">http://blazorhelpwebsite.com</a></p><p><a href="https://twitter.com/mistermag00" rel="noopener" target="_blank">‚Ñ≥ister‚Ñ≥aghoul / SQL-MisterMagoo</a> ‚Äì He has tried it all when it comes to BLAZOR.<br>Check out his great blazor stuff at github: <a href="https://github.com/SQL-MisterMagoo/" rel="nofollow">https://github.com/SQL-MisterMagoo/</a></p><p>And there are so many more‚Ä¶</p><p>Ok, back to business good people üôÇ</p><p>My previous post described how to make Blazor apps with dynamic routes and pages. The secret is to decouple App.razor, layouts and components.<br>The cool thing with this approach is that it will be quite easy to run all Blazor variants(Webassembly, Server-side and Electron) in one solution setup.</p><p>So how is it done? Well‚Ä¶ let me explain.<br>Here is the whole solution:<br><a href="https://visionsincode.files.wordpress.com/2019/11/solution.png"><img data-attachment-id="4295" data-permalink="https://visionsincode.wordpress.com/2019/11/01/one-solution-setup-to-rule-them-all-blazor-webassembly-blazor-server-blazor-electron/solution/" data-orig-file="https://visionsincode.files.wordpress.com/2019/11/solution.png" data-orig-size="530,712" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Solution" data-image-description="" data-medium-file="https://visionsincode.files.wordpress.com/2019/11/solution.png?w=223" data-large-file="https://visionsincode.files.wordpress.com/2019/11/solution.png?w=530" src="https://visionsincode.files.wordpress.com/2019/11/solution.png?w=748" alt="" class="aligncenter size-full wp-image-4295" srcset="https://visionsincode.files.wordpress.com/2019/11/solution.png 530w, https://visionsincode.files.wordpress.com/2019/11/solution.png?w=112 112w, https://visionsincode.files.wordpress.com/2019/11/solution.png?w=223 223w" sizes="(max-width: 530px) 100vw, 530px"></a><br>Right now we have three Blazor types/variants:</p><li>SitecoreBlazorHosted.Client ‚Äì Blazor Webassembly</li><li>SitecoreBlazorHosted.Server ‚Äì Blazor Server</li><li>SitecoreBlazorHosted.Electron ‚Äì Blazor Electron</li><p>They have one thing in common. They are all referencing the Project.BlazorSite project, which contains App.razor and the layout/s. Project.BlazorSite is referencing the component libraries(Foundation and Feature layers).</p><p>Let me walk you through each one of the Blazor types/variants.</p><p><strong>First out is Blazor Webassembly:</strong><br><a href="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png"><img data-attachment-id="4248" data-permalink="https://visionsincode.wordpress.com/2019/11/01/one-solution-setup-to-rule-them-all-blazor-webassembly-blazor-server-blazor-electron/webassembly-2/" data-orig-file="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png" data-orig-size="362,462" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="WebAssembly" data-image-description="" data-medium-file="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png?w=235" data-large-file="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png?w=362" src="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png?w=748" alt="" class="aligncenter size-full wp-image-4248" srcset="https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png 362w, https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png?w=118 118w, https://visionsincode.files.wordpress.com/2019/11/webassembly-1.png?w=235 235w" sizes="(max-width: 362px) 100vw, 362px"></a><br><a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/SitecoreBlazorHosted.Client" rel="noopener" target="_blank">SitecoreBlazorHosted.Client</a> ‚Äì this is a Blazor-Webassembly project. This means it will be running locally on the client but the data needs to be fetched/requested<br>But most importantly, it will reference the <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/Project/BlazorSite" rel="noopener" target="_blank">Project.BlazorSite</a>(where the layouts and the App.razor are located).</p><p>Lets have a look at the Startup.cs. Notice how it uses the Project.BlazorSite.App.razor, that‚Äôs the beauty of a decoupled App.razor, layouts and components from the host project üòâ</p><pre class="brush: csharp; title: ; notranslate" title=""> 
using Feature.Navigation.Extensions;
using Foundation.BlazorExtensions.Extensions;
using Foundation.BlazorExtensions.Services;
using Microsoft.AspNetCore.Components.Builder;
using Microsoft.Extensions.DependencyInjection;

namespace SitecoreBlazorHosted.Client
{

    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddScoped&lt;IRestService, RestService&gt;();
            services.AddForFoundationBlazorExtensions();
            services.AddForFeatureNavigation();
        }

        public void Configure(IComponentsApplicationBuilder app)
        {
            app.AddComponent&lt;Project.BlazorSite.App&gt;("app");
        }
    }
}
</pre><p>Here is also the Restservice instatiated, which will be used for fetching/request data. The Restservice is located in component library ‚Äì <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/Foundation/BlazorExtensions" rel="noopener" target="_blank">Foundation.BlazorExtensions</a></p><pre class="brush: csharp; title: ; notranslate" title=""> 
using System.Net.Http;
using System.Text.Json;
using System.Threading.Tasks;

namespace Foundation.BlazorExtensions.Services
{
    public class RestService : IRestService
    {
        private readonly HttpClient _httpClient;
        private readonly JsonSerializerOptions _jsonSerializerOptions;

        public RestService(HttpClient httpClient)
        {
            _httpClient = httpClient;
            _jsonSerializerOptions = new JsonSerializerOptions()
            {
                IgnoreNullValues = true,
                AllowTrailingCommas = true,
                PropertyNameCaseInsensitive = true
            };
        }

        public async Task&lt;T&gt; ExecuteRestMethod&lt;T&gt;(string url) where T : class
        {
            return await ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(url, _jsonSerializerOptions);
        }

        public async Task&lt;string&gt; ExecuteRestMethod(string url)
        {
            return await _httpClient.GetStringAsync(url);
        }

        public async Task&lt;T&gt; ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(string url, JsonSerializerOptions? options)
        {
            string rawResultData = await ExecuteRestMethod(url);

            return JsonSerializer.Deserialize&lt;T&gt;(rawResultData, options ?? _jsonSerializerOptions);
        }

    }
}
</pre><p>In order to run, set SitecoreBlazorHosted.Client as StartUp project and select BlazorClient in Solution Configurations.<br>*And don‚Äôt select IIS Express, why not try Kestrel instead(just select SitecoreBlazorHosted.Client). Now you will have a nice console window showing all the good stuff while the site is running.</p><p>Easy peasy üòÑ</p><p><strong>Next is Blazor Server</strong>:<br><a href="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png"><img data-attachment-id="4262" data-permalink="https://visionsincode.wordpress.com/2019/11/01/one-solution-setup-to-rule-them-all-blazor-webassembly-blazor-server-blazor-electron/blazorserver/" data-orig-file="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png" data-orig-size="365,719" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="BlazorServer" data-image-description="" data-medium-file="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png?w=152" data-large-file="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png?w=365" src="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png?w=748" alt="" class="aligncenter size-full wp-image-4262" srcset="https://visionsincode.files.wordpress.com/2019/11/blazorserver.png 365w, https://visionsincode.files.wordpress.com/2019/11/blazorserver.png?w=76 76w, https://visionsincode.files.wordpress.com/2019/11/blazorserver.png?w=152 152w" sizes="(max-width: 365px) 100vw, 365px"></a><br><a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/SitecoreBlazorHosted.Server" rel="noopener" target="_blank">SitecoreBlazorHosted.Server</a> is a Blazor-Server project which means it runs on the client‚Ä¶ Just kidding, on the server of course üòâ<br>It will use <a href="https://dotnet.microsoft.com/apps/aspnet/signalr" rel="noopener" target="_blank">SignalR</a> for transporting DOM changes between server and client.<br>If we look at the SitecoreBlazorHosted.Server.proj file you will see it‚Äôs a pure ASP.NET Core 3.0 app(TargetFramework is set to netcoreapp3.0). This means we can debug the solution in VisualStudio (or vscode).</p><pre class="brush: xml; title: ; notranslate" title=""> 
&lt;Project Sdk="Microsoft.NET.Sdk.Web"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
    &lt;LangVersion&gt;8&lt;/LangVersion&gt;
    &lt;AddRazorSupportForMvc&gt;true&lt;/AddRazorSupportForMvc&gt;
    &lt;Configurations&gt;Debug;Release&lt;/Configurations&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="BuildWebCompiler" Version="1.12.405" /&gt;
    &lt;PackageReference Include="BuildBundlerMinifier" Version="3.0.415" /&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Components" Version="$(AspNetCoreVersion)" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup&gt;
    &lt;ProjectReference Include="..\Project\BlazorSite\Project.BlazorSite.csproj" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</pre><p>And most importantly, it will reference the <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/Project/BlazorSite" rel="noopener" target="_blank">Project.BlazorSite</a>(where the layouts and the App.razor are located).<br>Lets have a look at _Host.cshtml, this is the page that will host the Blazor pages.</p><pre class="brush: xml; title: ; notranslate" title=""> 
@page "/"

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
    &lt;title&gt;BlazorSite server-side&lt;/title&gt;
    &lt;base href="~/" /&gt;
    &lt;environment include="Development"&gt;
        &lt;link href="css/site.min.css" rel="stylesheet" /&gt;
    &lt;/environment&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;app&gt;@(await Html.RenderComponentAsync&lt;Project.BlazorSite.App&gt;(RenderMode.Server))&lt;/app&gt;

    &lt;script src="_framework/blazor.server.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="scripts/interop.min.js"&gt;&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre><p>Notice the Html.RenderComponentAsync‚Ä¶ Again see the power of having the App.razor, layouts and components decoupled üòâ</p><p><strong>Now to a very cool and interesting part, this app is running on the server. That means we can take advantage of fetching data directly on the server</strong>.<br>Let‚Äôs have a look at the Startup.cs and try to locate IRestService:</p><pre class="brush: csharp; title: ; notranslate" title=""> 
using Feature.Navigation.Extensions;
using Foundation.BlazorExtensions.Extensions;
using Foundation.BlazorExtensions.Services;
using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;
using SitecoreBlazorHosted.Shared;
using System.Net.Http;
using SitecoreBlazorHosted.Server.Providers;
using SitecoreBlazorHosted.Server.Services;

namespace SitecoreBlazorHosted.Server
{
    public class Startup
    {
        // This method gets called by the runtime. Use this method to add services to the container.
        // For more information on how to configure your application, visit https://go.microsoft.com/fwlink/?LinkID=398940
        public void ConfigureServices(IServiceCollection services)
        {
            // HttpContextAccessor
            services.AddHttpContextAccessor();
            services.AddScoped&lt;HttpContextAccessor&gt;();
          
            services.AddRazorPages();
            services.AddServerSideBlazor();

            services.AddSingleton&lt;HttpClient&gt;((s) =&gt; new HttpClient());
            services.AddSingleton&lt;IPathProvider, PathProvider&gt;();


            services.AddScoped&lt;IRestService, FilesIOService&gt;();
            services.AddForFoundationBlazorExtensions();
            services.AddForFeatureNavigation();

        }

        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }
            else
            {
                // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
                app.UseHsts();
            }

     

            app.UseHttpsRedirection();

            app.UseStaticFiles();

            app.UseRouting();

            app.UseEndpoints(endpoints =&gt;
            {
                endpoints.MapBlazorHub();
                endpoints.MapFallbackToPage("/_Host");
            });
        }
    }
}

</pre><p>We are not using RestService here, instead we will use FilesIOService.</p><p>FilesIOService will not make any rest call‚Äôs. It will get the data directly from the file system(on the server).</p><pre class="brush: csharp; title: ; notranslate" title=""> 
using Foundation.BlazorExtensions.Services;
using SitecoreBlazorHosted.Server.Providers;
using System;
using System.IO;
using System.Text.Json;
using System.Threading.Tasks;

namespace SitecoreBlazorHosted.Server.Services
{
    public class FilesIOService : IRestService
    {
        private readonly IPathProvider _pathProvider;

        private readonly JsonSerializerOptions _jsonSerializerOptions;

        public FilesIOService(IPathProvider pathProvider)
        {
            _pathProvider = pathProvider;

            _jsonSerializerOptions = new JsonSerializerOptions()
            {
                IgnoreNullValues = true,
                AllowTrailingCommas = true,
                PropertyNameCaseInsensitive = true
            };
        }

        public async Task&lt;string&gt; ExecuteRestMethod(string url)
        {
            Uri uri = new Uri(url);

            string physicalFilePath = _pathProvider.MapPath(uri.AbsolutePath.TrimStart(new char[] { '/' }));

            if (!System.IO.File.Exists(physicalFilePath))
                return string.Empty;    
                
            using StreamReader sr = new StreamReader(physicalFilePath);
            return await sr.ReadToEndAsync();

        }

        public Task&lt;T&gt; ExecuteRestMethod&lt;T&gt;(string url) where T : class
        {
            return ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(url);
        }

        public async Task&lt;T&gt; ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(string url, JsonSerializerOptions options = null)
        {
            string rawResultData = await ExecuteRestMethod(url);

            return JsonSerializer.Deserialize&lt;T&gt;(rawResultData, options ?? _jsonSerializerOptions);
        }
    }
}

</pre><p><strong>This is indeed very powerful!</strong></p><p>This could be a direct call/connection to a database or to Sitecore.<br>Let‚Äôs hope Sitecore will move to Asp.Net Core in a very near feature üòâ</p><p>To run server-side:<br>Set SitecoreBlazorHosted.Server as StartUp project.<br>Select BlazorServer in Solution Configurations.<br>And run‚Ä¶</p><p>And don‚Äôt forget, you can also debug it üôÇ</p><p><strong>Next up is Blazor-Electron</strong>.<br><a href="https://visionsincode.files.wordpress.com/2019/11/electron-1.png"><img data-attachment-id="4281" data-permalink="https://visionsincode.wordpress.com/2019/11/01/one-solution-setup-to-rule-them-all-blazor-webassembly-blazor-server-blazor-electron/electron-2/" data-orig-file="https://visionsincode.files.wordpress.com/2019/11/electron-1.png" data-orig-size="672,694" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Electron" data-image-description="" data-medium-file="https://visionsincode.files.wordpress.com/2019/11/electron-1.png?w=290" data-large-file="https://visionsincode.files.wordpress.com/2019/11/electron-1.png?w=672" src="https://visionsincode.files.wordpress.com/2019/11/electron-1.png?w=748" alt="" class="aligncenter size-full wp-image-4281" srcset="https://visionsincode.files.wordpress.com/2019/11/electron-1.png 672w, https://visionsincode.files.wordpress.com/2019/11/electron-1.png?w=145 145w, https://visionsincode.files.wordpress.com/2019/11/electron-1.png?w=290 290w" sizes="(max-width: 672px) 100vw, 672px"></a><br>Project <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/SitecoreBlazorHosted.Electron" rel="noopener" target="_blank">SitecoreBlazorHosted.Electron</a> will allow us to run the Blazor solution as a desktop app.</p><p>To make it work we need to host the Blazor app inside an Electron shell. There is this wonderful little gem at github, called <a href="https://github.com/aspnet/AspLabs" rel="noopener" target="_blank">AspLabs</a>. This is where the Asp.Net Core team try out cool new things. Here we will find <a href="https://github.com/aspnet/AspLabs/tree/master/src/ComponentsElectron" rel="noopener" target="_blank">Components.Electron</a> üôÇ</p><p>So we need to create a local nuget package(following instructions from <a href="https://github.com/aspnet/AspLabs/tree/master/src/ComponentsElectron" rel="noopener" target="_blank">Components.Electron</a>)<br>by making a copy of the project, run it and produce the nuget package.<br>The local nuget package, <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/packages" rel="noopener" target="_blank">Microsoft.AspNetCore.Components.Electron.0.1.0-dev.nupkg</a>, is located in the root of the solution.</p><p>Lets take a quick look at the SitecoreBlazorHosted.Electron.proj file. We are referencing the local nuget package, notice also that it‚Äôs a pure ASP.NET Core 3.0 app(TargetFramework is set to netcoreapp3.0).</p><pre class="brush: xml; title: ; notranslate" title=""> 
&lt;Project Sdk="Microsoft.NET.Sdk.Razor"&gt;

  &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;
    &lt;OutputType&gt;WinExe&lt;/OutputType&gt;
    &lt;LangVersion&gt;8&lt;/LangVersion&gt;
    &lt;SignAssembly&gt;false&lt;/SignAssembly&gt;
    &lt;RazorLangVersion&gt;3.0&lt;/RazorLangVersion&gt;
    &lt;ComponentsElectronVersion&gt;0.1.0-dev&lt;/ComponentsElectronVersion&gt;
    &lt;DefaultItemExcludes&gt;${DefaultItemExcludes};node_modules\**;package-lock.json&lt;/DefaultItemExcludes&gt;
    &lt;RestoreAdditionalProjectSources&gt;
      ..\packages;
    &lt;/RestoreAdditionalProjectSources&gt;
    &lt;Configurations&gt;Debug;Release;BlazorElektron&lt;/Configurations&gt;

  &lt;/PropertyGroup&gt;

 
  &lt;ItemGroup&gt;
    &lt;PackageReference Include="BuildWebCompiler" Version="1.12.405" /&gt;
    &lt;PackageReference Include="BuildBundlerMinifier" Version="3.0.415" /&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Blazor" Version="$(BlazorVersion)" /&gt;
    &lt;PackageReference Include="Microsoft.AspNetCore.Components.Electron" Version="$(ComponentsElectronVersion)" /&gt;
  &lt;/ItemGroup&gt;

  &lt;ItemGroup&gt;
    &lt;ProjectReference Include="..\Project\BlazorSite\Project.BlazorSite.csproj" /&gt;
  &lt;/ItemGroup&gt;

  &lt;Target Name="EnsureNpmRestored" BeforeTargets="CoreBuild" Condition="!Exists('node_modules')"&gt;
    &lt;Message Importance="high" Text="Restoring dependencies using 'npm'. This may take several minutes..." /&gt;
    &lt;Exec Command="npm install" /&gt;
  &lt;/Target&gt;

&lt;/Project&gt;
</pre><p>And again‚Ä¶ Most importantly, it will reference the <a href="https://github.com/GoranHalvarsson/SitecoreBlazor/tree/master/Project/BlazorSite" rel="noopener" target="_blank">Project.BlazorSite</a>(where the layouts and the App.razor are located).</p><p>Lets look at Startup.cs. </p><pre class="brush: csharp; title: ; notranslate" title=""> 
using Feature.Navigation.Extensions;
using Foundation.BlazorExtensions.Extensions;
using Foundation.BlazorExtensions.Services;
using Microsoft.AspNetCore.Components.Builder;
using Microsoft.Extensions.DependencyInjection;
using SitecoreBlazorHosted.Electron.Services;

namespace SitecoreBlazorHosted.Electron
{
    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddScoped&lt;IRestService, FilesService&gt;();
            services.AddForFoundationBlazorExtensions();
            services.AddForFeatureNavigation();
            

        }

        public void Configure(IComponentsApplicationBuilder app)
        {
            app.AddComponent&lt;Project.BlazorSite.App&gt;("app");
        }
    }
}

</pre><p>And‚Ä¶ We are calling the good old Project.BlazorSite.App.razor. The beauty of having App.razor, layouts and components decoupled‚Ä¶ üòâ</p><p>Because this is a desktop app we can access the local files similar like we did in the Blazor-Server project.<br>This is FileService, which is located in SitecoreBlazorHosted.Electron:</p><pre class="brush: csharp; title: ; notranslate" title=""> 
using System.IO;
using System.Text.Json;
using System.Threading.Tasks;
using Foundation.BlazorExtensions.Extensions;
using Foundation.BlazorExtensions.Services;

namespace SitecoreBlazorHosted.Electron.Services
{
    public class FilesService : IRestService
    {
        private readonly JsonSerializerOptions _jsonSerializerOptions;
        
        public FilesService()
        {
            _jsonSerializerOptions = new JsonSerializerOptions()
            {
                IgnoreNullValues = true,
                AllowTrailingCommas = true,
                PropertyNameCaseInsensitive = true
            };
        }

        public async Task&lt;string&gt; ExecuteRestMethod(string url)
        {


            url = url.RemoveFilePrefix();

            if (!System.IO.File.Exists(url))
                return string.Empty;

            using StreamReader sr = new StreamReader(url);
            return await sr.ReadToEndAsync();
        }

        public Task&lt;T&gt; ExecuteRestMethod&lt;T&gt;(string url) where T : class
        {
            return ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(url);
        }

        public async Task&lt;T&gt; ExecuteRestMethodWithJsonSerializerOptions&lt;T&gt;(string url, JsonSerializerOptions options = null)
        {
            string rawResultData = await ExecuteRestMethod(url);

            return JsonSerializer.Deserialize&lt;T&gt;(rawResultData, options ?? _jsonSerializerOptions);
        }

    }
}
</pre><p>To run Electron App:<br>Set SitecoreBlazorHosted.Electron as StartUp project.<br>Select BlazorElectron in Solution Configurations.<br>And run‚Ä¶</p><p>And like the Blazor-Server project, we can also debug the Blazor-Electron project üòâ</p><p>Ok guys, that was the three Blazor variants. But I have a feeling we will have a bunch of Blazor variants in a VERY near future. How about Steve Sandersson‚Äôs lates blog post: <a href="http://blog.stevensanderson.com/2019/11/01/exploring-lighter-alternatives-to-electron-for-hosting-a-blazor-desktop-app/" rel="noopener" target="_blank">Exploring lighter alternatives to Electron for hosting a Blazor desktop app</a>. Where Steve is looking into a smaller rendering stack, without any bundled Chromium or Node.js. If you guys are wondering who Steve is, he is the creator of Blazor‚Ä¶ So expect nothing but great things from this miracle worker üòâ</p><p>And don‚Äôt forget‚Ä¶</p><blockquote><p>Goodbye Javascript libraries/frameworks Hello Blazor</p></blockquote><p>The ongoing work happens in the Github project ‚Äì <a href="https://github.com/GoranHalvarsson/SitecoreBlazor" rel="noopener" target="_blank">SitecoreBlazor</a></p><p>That‚Äôs all for now folks üôÇ</p><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><h3 class="jp-relatedposts-headline"><em>Related</em></h3></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>