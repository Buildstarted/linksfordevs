<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Add Apple Silicon support by lambdageek &#xB7; Pull Request #20014 &#xB7; mono/mono - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Add Apple Silicon support by lambdageek &#xB7; Pull Request #20014 &#xB7; mono/mono - linksfor.dev(s)"/>
    <meta property="article:author" content="lambdageek"/>
    <meta property="og:description" content="Contributed by Apple&#xA;The original contributed patch was against a relatively old version of Mono.&#xA;In particular, mono_arch_get_enter_icall_trampoline was renamed to mono_arch_get_interp_to_native_t..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/mono/mono/pull/20014"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Add Apple Silicon support by lambdageek &#xB7; Pull Request #20014 &#xB7; mono/mono</title>
<div class="readable">
        <h1>Add Apple Silicon support by lambdageek &#xB7; Pull Request #20014 &#xB7; mono/mono</h1>
            <div>by lambdageek</div>
            <div>Reading time: 12-15 minutes</div>
        <div>Posted here: 24 Jun 2020</div>
        <p><a href="https://github.com/mono/mono/pull/20014">https://github.com/mono/mono/pull/20014</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
    
  <div id="partial-discussion-header" data-channel="pull_request:438827944" data-url="/mono/mono/pull/20014/show_partial?partial=pull_requests%2Ftitle&amp;sticky=true" data-pull-is-open="true" data-gid="MDExOlB1bGxSZXF1ZXN0NDM4ODI3OTQ0">
  <div>
    
      <div>


          
<details>
  <summary data-ga-click="Issues, create new issue, view:issue_show location:issue_header style:button logged_in:false" role="button">
    
    New issue
  </summary>
  <details-dialog aria-label="Sign up for GitHub" role="dialog" aria-modal="true">
      
    <div>
            

<div>
  <p>
  <strong>Have a question about this project?</strong> Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
  </p>

  <!-- '"` --><!-- </textarea></xmp> -->
  <p>By clicking “Sign up for GitHub”, you agree to our <a href="https://help.github.com/terms" target="_blank">terms of service</a> and
  <a href="https://help.github.com/privacy" target="_blank">privacy statement</a>. We’ll occasionally send you account related emails.</p>

  <p>
    Already on GitHub?
    <a data-ga-click="(Logged out) New issue modal, clicked Sign in, text:sign-in" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;new issue modal&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/mono/mono/pull/20014&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="2fd2b8534695fa1547b1377bf9bde3cb4765d1736011f6bae5ac12dbf04268fa" href="https://github.com/login?return_to=%2Fmono%2Fmono%2Fissues%2Fnew">Sign in</a>
    to your account
  </p>
</div>

</div>
  </details-dialog>
</details>
      </div>

    
    
  </div>

  


    
    
</div>


      




    <h2>Conversation</h2>
    <div id="discussion_bucket" data-channel="pull_request:438827944:timeline">
      
<div>

  <div>
        <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">
      <div>

        
<div data-gid="MDExOlB1bGxSZXF1ZXN0NDM4ODI3OTQ0" data-url="/_render_node/MDExOlB1bGxSZXF1ZXN0NDM4ODI3OTQ0/pull_requests/body" data-channel="pull_request:438827944">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>

  <div id="issue-438827944">
    <div data-body-version="1f4f82f2d1ebb1e687034cd0873ce155" data-unfurl-hide-url="/content_reference_attachments/hide">
      


      <div>

        
<task-lists disabled="" sortable="">
<div>
          <p>Contributed by Apple</p>
<p>The original contributed patch was against a relatively old version of Mono.</p>
<p>In particular, mono_arch_get_enter_icall_trampoline was renamed to mono_arch_get_interp_to_native_trampoline in<br>
<a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/60b180d24f32b0879d729bc47a3cf92d5a0ba25e/hovercard" href="https://github.com/mono/mono/commit/60b180d24f32b0879d729bc47a3cf92d5a0ba25e"><tt>60b180d</tt></a></p>
<p>Also the original patch contained subsets of <a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/bc787a8a0105e96630597dda72fbbe4df4a3c71c/hovercard" href="https://github.com/mono/mono/commit/bc787a8a0105e96630597dda72fbbe4df4a3c71c"><tt>bc787a8</tt></a> and <a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/812357ec51f771c69f54694e9fa88ee49180eb62/hovercard" href="https://github.com/mono/mono/commit/812357ec51f771c69f54694e9fa88ee49180eb62"><tt>812357e</tt></a> which are already in mono master.</p>
<hr>
<p>I haven't tried compiling or running this code yet.  Need to get Xcode 12 set up for the latter, and get some hardware for the former.  But we can at least start discussing the design.</p>
<hr>
<p>TODO:</p>
<ul>
<li>
  <span>
    
  </span> Audit all uses of <code>mono_global_codeman_reserve</code> to make sure that <code>MONO_SCOPE_ENABLE_JIT_WRITE();</code> is called</li>
<li>
  <span>
    
  </span> fix the ios and Android SDK builds</li>
</ul>
      </div>
</task-lists>


          


      </div>

    </div>
</div>

</div>


        

  


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODQzNDY2Mw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODQzNDY2Mw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDY0ODQzNDY2Mw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


  


</div>


</div>


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODQzODM0MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODQzODM0MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDY0ODQzODM0MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


  


</div>


</div>


  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0MDk1">
  
      

<div>
  
<div id="pullrequestreview-436174095" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0MDk1" data-channel="pull_request_review:436174095" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0MDk1/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444521189" data-paste-markdown-skip="">
    


    <tbody><tr>

        <td></td>

        <td id="discussion-diff-444521189R3049" data-line-number="3049"></td>

      <td>
        <span>#<span>define</span> <span>MONO_SCOPE_ENABLE_JIT_WRITE</span>()					</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521189R3050" data-line-number="3050"></td>

      <td>
        <span>	<span>__attribute__</span>((unused, cleanup(mono_arm_restore_jit_protect_mode))) </span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521189R3051" data-line-number="3051"></td>

      <td>
        <span>	jit_protect_mode scope_restrict_mode = arm_current_jit_protect_mode; </span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521189R3052" data-line-number="3052"></td>

      <td>
        <span>        <span>mono_arm_jit_write_protect_disable</span>();					</span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
    <div>
        <p>
      Comment on lines

    <span>
      +3049
    </span> to <span>
      +3052
    </span>

  </p>

    </div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444521189" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTE4OQ==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTE4OQ==/comments/review_comment">
    <div>
      

  

<details data-body-version="4c6df292cff173e585afa9fac8785f58">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="4c6df292cff173e585afa9fac8785f58" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444521189">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444521189-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="28" width="28" alt="@lambdageek" src="https://avatars2.githubusercontent.com/u/480437?s=60&amp;v=4"></a>
      </span></p><div data-thread-side="right">
        <h4>
          <strong>
              

  <a show_full_name="false" data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek">lambdageek</a>
  

          </strong>
          <span>

              <a href="#discussion_r444521189" id="discussion_r444521189-permalink">
                <relative-time datetime="2020-06-23T21:33:02Z" title="Jun 23, 2020, 2:33 PM PDT">19 hours ago</relative-time>
              </a>

          </span>
        </h4>

        <p><span aria-label="This user is the author of this pull request.">
  Author
</span>

        
    <span aria-label="This user is a member of the Mono Project organization.">
      Member
    </span></p><task-lists disabled="" sortable="">
          <p>We don't really use <code>__attribute__((cleanup(...)))</code> in Mono, so hiding it in this macro is unexpected and may lead to surprises when reasoning about the thread state.  But on the other hand it makes the patch quite compact.</p>
        </task-lists>


          


      </div>
    </div>

  </div>
</div>

        

<div id="discussion_r444586802" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU4NjgwMg==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU4NjgwMg==/comments/review_comment">
    <div>
      

  

<details data-body-version="9696b31f221dc0bb8292bedb4b702316">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="9696b31f221dc0bb8292bedb4b702316" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444586802">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444586802-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/jaykrell/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jaykrell"><img height="28" width="28" alt="@jaykrell" src="https://avatars2.githubusercontent.com/u/1635728?s=60&amp;v=4"></a>
      </span></p>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0NjU4">
  
      

<div>
  
<div id="pullrequestreview-436174658" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0NjU4" data-channel="pull_request_review:436174658" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc0NjU4/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444521610" data-paste-markdown-skip="">
    


    <tbody><tr>

        <td></td>

        <td id="discussion-diff-444521610R3026" data-line-number="3026"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521610R3027" data-line-number="3027"></td>

      <td>
        <span><span>extern</span> __thread jit_protect_mode arm_current_jit_protect_mode;</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521610R3028" data-line-number="3028"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521610R3029" data-line-number="3029"></td>

      <td>
        <span><span>static</span> <span>void</span> <span>mono_arm_jit_write_protect_enable</span>()</span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444521610" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTYxMA==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTYxMA==/comments/review_comment">
    <div>
      

  

<details data-body-version="ee536eb362caae1d5fba497bb3e09bfd">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="ee536eb362caae1d5fba497bb3e09bfd" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444521610">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444521610-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="28" width="28" alt="@lambdageek" src="https://avatars2.githubusercontent.com/u/480437?s=60&amp;v=4"></a>
      </span></p><div data-thread-side="right">
        <h4>
          <strong>
              

  <a show_full_name="false" data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek">lambdageek</a>
  

          </strong>
          <span>

              <a href="#discussion_r444521610" id="discussion_r444521610-permalink">
                <relative-time datetime="2020-06-23T21:34:00Z" title="Jun 23, 2020, 2:34 PM PDT">18 hours ago</relative-time>
              </a>

              
  <span>•</span>

  <details>
    <summary aria-haspopup="menu" role="button">
      
    </summary>
    <details-menu src="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTYxMA==/comments/comment_edit_history_log" preload="" role="menu">
      <include-fragment aria-label="Loading"></include-fragment>
    </details-menu>
  </details>

          </span>
        </h4>

        <p><span aria-label="This user is the author of this pull request.">
  Author
</span>

        
    <span aria-label="This user is a member of the Mono Project organization.">
      Member
    </span></p><task-lists disabled="" sortable="">
          <div>
            <p>nit - indentation.  more substantially we like <code>static inline</code> in headers</p>
  <div>
    
    <div itemprop="text">
      <table data-paste-markdown-skip="">
          <tbody><tr>
            <td data-line-number="3029"></td>
            <td><span>static</span> <span>void</span><span> </span><span>mono_arm_jit_write_protect_enable</span><span>()</span></td>
          </tr>
          <tr>
            <td data-line-number="3029"></td>
            <td><span>static</span> <span>inline</span><span> </span><span>void</span></td>
          </tr>
          <tr>
            <td data-line-number="3030"></td>
            <td><span>mono_arm_jit_write_protect_enable</span> ()</td>
          </tr>
      </tbody></table>
    </div>
    
  </div>

<p>also, arguably, should be <code>mono_arm64_jit_write_protect_enable</code></p>
          </div>
        </task-lists>


          


      </div>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc1MDIz">
  
      

<div>
  
<div id="pullrequestreview-436175023" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc1MDIz" data-channel="pull_request_review:436175023" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc1MDIz/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444521901" data-paste-markdown-skip="">
    


    <tbody><tr>

        <td></td>

        <td id="discussion-diff-444521901R3036" data-line-number="3036"></td>

      <td>
        <span>	}</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521901R3037" data-line-number="3037"></td>

      <td>
        <span>}</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521901R3038" data-line-number="3038"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444521901R3039" data-line-number="3039"></td>

      <td>
        <span><span>static</span> <span>void</span> <span>mono_arm_jit_write_protect_disable</span>()</span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444521901" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTkwMQ==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyMTkwMQ==/comments/review_comment">
    <div>
      

  

<details data-body-version="667b650172c477e7cad863e4074f28eb">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="667b650172c477e7cad863e4074f28eb" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444521901">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444521901-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="28" width="28" alt="@lambdageek" src="https://avatars2.githubusercontent.com/u/480437?s=60&amp;v=4"></a>
      </span></p><div data-thread-side="right">
        <h4>
          <strong>
              

  <a show_full_name="false" data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek">lambdageek</a>
  

          </strong>
          <span>

              <a href="#discussion_r444521901" id="discussion_r444521901-permalink">
                <relative-time datetime="2020-06-23T21:34:35Z" title="Jun 23, 2020, 2:34 PM PDT">18 hours ago</relative-time>
              </a>

          </span>
        </h4>

        <p><span aria-label="This user is the author of this pull request.">
  Author
</span>

        
    <span aria-label="This user is a member of the Mono Project organization.">
      Member
    </span></p><task-lists disabled="" sortable="">
          <div>
              <div>
    
    <div itemprop="text">
      <table data-paste-markdown-skip="">
          <tbody><tr>
            <td data-line-number="3039"></td>
            <td><span>static</span> <span>void</span><span> </span><span>mono_arm_jit_write_protect_disable</span><span>()</span></td>
          </tr>
          <tr>
            <td data-line-number="3039"></td>
            <td><span>static</span> <span>inline</span><span> </span><span>void</span></td>
          </tr>
          <tr>
            <td data-line-number="3040"></td>
            <td><span>mono_arm_jit_write_protect_disable</span> ()</td>
          </tr>
      </tbody></table>
    </div>
    
  </div>

          </div>
        </task-lists>


          


      </div>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTk3ODI4">
  
      

<div>
  
<div id="pullrequestreview-436197828" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTk3ODI4" data-channel="pull_request_review:436197828" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTk3ODI4/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/alexischr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/alexischr"><img height="40" width="40" alt="@alexischr" src="https://avatars3.githubusercontent.com/u/1048813?s=88&amp;u=1a8249f8b467bc34d4a3acd35605b3a4ff19a7c8&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444538925" data-paste-markdown-skip="">
    


    <tbody><tr data-position="0">
      <td id="discussion-diff-444538925HL3015" data-line-number="..."></td>
      <td id="discussion-diff-444538925HR3015" data-line-number="..."></td>
      <td colspan="2">@@ -3016,4 +3016,69 @@ mono_arch_load_function (MonoJitICallId jit_icall_id);</td>
    </tr>
    <tr>

        <td id="discussion-diff-444538925L3016" data-line-number="3016"></td>

        <td id="discussion-diff-444538925R3016" data-line-number="3016"></td>

      <td>
        <span>MonoGenericContext</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444538925L3017" data-line-number="3017"></td>

        <td id="discussion-diff-444538925R3017" data-line-number="3017"></td>

      <td>
        <span><span>mono_get_generic_context_from_stack_frame</span> (MonoJitInfo *ji, gpointer generic_info);</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444538925L3018" data-line-number="3018"></td>

        <td id="discussion-diff-444538925R3018" data-line-number="3018"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444538925R3019" data-line-number="3019"></td>

      <td>
        <span>#<span>if</span> defined(__APPLE__) &amp;&amp; defined(__arm64__)</span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444538925" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzODkyNQ==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzODkyNQ==/comments/review_comment">
    <div>
      

  

<details data-body-version="a06c992040a26e7f6263871708cd875b">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="a06c992040a26e7f6263871708cd875b" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444538925">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444538925-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/alexischr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/alexischr"><img height="28" width="28" alt="@alexischr" src="https://avatars0.githubusercontent.com/u/1048813?s=60&amp;u=1a8249f8b467bc34d4a3acd35605b3a4ff19a7c8&amp;v=4"></a>
      </span></p><div data-thread-side="right">
        <h4>
          <strong>
              

  <a show_full_name="false" data-hovercard-type="user" data-hovercard-url="/users/alexischr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/alexischr">alexischr</a>
  

          </strong>
          <span>

              <a href="#discussion_r444538925" id="discussion_r444538925-permalink">
                <relative-time datetime="2020-06-23T22:21:04Z" title="Jun 23, 2020, 3:21 PM PDT">18 hours ago</relative-time>
              </a>

          </span>
        </h4>

        
        
    <p><span aria-label="This user is a member of the Mono Project organization.">
      Member
    </span></p><task-lists disabled="" sortable="">
          <p>Won't this enable all this for existing iOS devices too? Looks like <code>__builtin_available</code> guards against much actually happening, but this will still add some superfluous code or maybe not compile on non-Silicon iOS</p>
        </task-lists>


          


      </div>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4NzY4">
  
      

<div>
  
<div id="pullrequestreview-436238768" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4NzY4" data-channel="pull_request_review:436238768" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4NzY4/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="40" width="40" alt="@vargaz" src="https://avatars3.githubusercontent.com/u/186301?s=88&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444572629" data-paste-markdown-skip="">
    


    <tbody><tr data-position="0">
      <td id="discussion-diff-444572629HL55" data-line-number="..."></td>
      <td id="discussion-diff-444572629HR55" data-line-number="..."></td>
      <td colspan="2">@@ -56,6 +56,10 @@ static gpointer bp_trampoline;</td>
    </tr>
    <tr>

        <td id="discussion-diff-444572629L56" data-line-number="56"></td>

        <td id="discussion-diff-444572629R56" data-line-number="56"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444572629L57" data-line-number="57"></td>

        <td id="discussion-diff-444572629R57" data-line-number="57"></td>

      <td>
        <span><span>static</span> gboolean ios_abi;</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444572629L58" data-line-number="58"></td>

        <td id="discussion-diff-444572629R58" data-line-number="58"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444572629R59" data-line-number="59"></td>

      <td>
        <span>#<span>if</span> defined(__APPLE__)</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444572629R60" data-line-number="60"></td>

      <td>
        <span>__thread jit_protect_mode arm_current_jit_protect_mode = JPM_NONE;</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444572629R61" data-line-number="61"></td>

      <td>
        <span>#<span>endif</span></span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444572629" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MjYyOQ==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MjYyOQ==/comments/review_comment">
    <div>
      

  

<details data-body-version="e5e7b984562aecb3094b3b1783751900">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="e5e7b984562aecb3094b3b1783751900" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444572629">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444572629-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="28" width="28" alt="@vargaz" src="https://avatars0.githubusercontent.com/u/186301?s=60&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>
      </span></p>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4OTY1">
  
      

<div>
  
<div id="pullrequestreview-436238965" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4OTY1" data-channel="pull_request_review:436238965" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM4OTY1/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="40" width="40" alt="@vargaz" src="https://avatars3.githubusercontent.com/u/186301?s=88&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444572810" data-paste-markdown-skip="">
    


    <tbody><tr data-position="0">
      <td id="discussion-diff-444572810HL113" data-line-number="..."></td>
      <td id="discussion-diff-444572810HR117" data-line-number="..."></td>
      <td colspan="2">@@ -114,6 +118,8 @@ get_delegate_invoke_impl (gboolean has_target, gboolean param_count, guint32 *co</td>
    </tr>
    <tr>

        <td id="discussion-diff-444572810L114" data-line-number="114"></td>

        <td id="discussion-diff-444572810R118" data-line-number="118"></td>

      <td>
        <span>{</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444572810L115" data-line-number="115"></td>

        <td id="discussion-diff-444572810R119" data-line-number="119"></td>

      <td>
        <span>	guint8 *code, *start;</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444572810L116" data-line-number="116"></td>

        <td id="discussion-diff-444572810R120" data-line-number="120"></td>

      <td>
        <span><br></span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444572810R121" data-line-number="121"></td>

      <td>
        <span>	<span>MONO_SCOPE_ENABLE_JIT_WRITE</span>();</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444572810R122" data-line-number="122"></td>

      <td>
        <span><br></span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444572810" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MjgxMA==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MjgxMA==/comments/review_comment">
    <div>
      

  

<details data-body-version="20d785cb577723683a2ab671eeef1403">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="20d785cb577723683a2ab671eeef1403" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444572810">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444572810-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="28" width="28" alt="@vargaz" src="https://avatars0.githubusercontent.com/u/186301?s=60&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>
      </span></p>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM5MjA3">
  
      

<div>
  
<div id="pullrequestreview-436239207" data-gid="MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM5MjA3" data-channel="pull_request_review:436239207" data-url="/_render_node/MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjM5MjA3/pull_request_reviews/body">

  <div>
    
<p><a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="40" width="40" alt="@vargaz" src="https://avatars3.githubusercontent.com/u/186301?s=88&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>

</p>


    


    


  </div>
</div>

  
        
<div>
  <div>
        



<div>
  
      
  
<div>
  <table id="discussion-diff-444573001" data-paste-markdown-skip="">
    


    <tbody><tr data-position="0">
      <td id="discussion-diff-444573001HL550" data-line-number="..."></td>
      <td id="discussion-diff-444573001HR550" data-line-number="..."></td>
      <td colspan="2">@@ -551,6 +551,8 @@ mono_unwind_frame (guint8 *unwind_info, guint32 unwind_info_len,</td>
    </tr>
    <tr>

        <td id="discussion-diff-444573001L551" data-line-number="551"></td>

        <td id="discussion-diff-444573001R551" data-line-number="551"></td>

      <td>
        <span>				   <span>host_mgreg_t</span> **save_locations, <span>int</span> save_locations_len,</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444573001L552" data-line-number="552"></td>

        <td id="discussion-diff-444573001R552" data-line-number="552"></td>

      <td>
        <span>				   guint8 **out_cfa)</span>

      </td>
    </tr>
    <tr>

        <td id="discussion-diff-444573001L553" data-line-number="553"></td>

        <td id="discussion-diff-444573001R553" data-line-number="553"></td>

      <td>
        <span>{</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444573001R554" data-line-number="554"></td>

      <td>
        <span>	<span>MONO_SCOPE_ENABLE_JIT_WRITE</span>();</span>

      </td>
    </tr>
    <tr>

        <td></td>

        <td id="discussion-diff-444573001R555" data-line-number="555"></td>

      <td>
        <span><br></span>

      </td>
    </tr>

  </tbody></table>
</div>

<div>
  <div data-quote-markdown=".js-comment-body">
    <div>
        

<div id="discussion_r444573001" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MzAwMQ==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU3MzAwMQ==/comments/review_comment">
    <div>
      

  

<details data-body-version="76446a5bfa1dee4c68cd756209a36048">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="76446a5bfa1dee4c68cd756209a36048" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444573001">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444573001-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/vargaz/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vargaz"><img height="28" width="28" alt="@vargaz" src="https://avatars0.githubusercontent.com/u/186301?s=60&amp;u=7cd4b581841ac9f62636ff06fd2e35a93fc10942&amp;v=4"></a>
      </span></p>
    </div>

  </div>
</div>

        

<div id="discussion_r444848762" data-gid="MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg0ODc2Mg==" data-url="/_render_node/MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg0ODc2Mg==/comments/review_comment">
    <div>
      

  

<details data-body-version="98d356ec02fe771a12759d837c1f798e">
    <summary>
      <div>
        <h3>
          
          <p>
                This comment has been minimized.

          </p>
        </h3>
        
      </div>
    </summary>
</details>


    </div>

  <div data-body-version="98d356ec02fe771a12759d837c1f798e" data-thread-side="right">
    <div>
      <p>
        <details id="details-discussion_r444848762">
          <summary aria-label="Show more options" aria-haspopup="menu" role="button">
            
          </summary>

          <details-menu role="menu">

            <clipboard-copy for="discussion_r444848762-permalink" role="menuitem" tabindex="0">
              Copy link
            </clipboard-copy>

            









          </details-menu>
        </details>
      </p>

      <p><span>
        <a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="28" width="28" alt="@lambdageek" src="https://avatars2.githubusercontent.com/u/480437?s=60&amp;v=4"></a>
      </span></p>
    </div>

  </div>
</div>



    </div>

  </div>


</div>




</div>




  </div>
</div>


</div>

</div>

  
  
<div data-gid="MDE3OlB1bGxSZXF1ZXN0Q29tbWl0NDM4ODI3OTQ0OjE0Mjc2NmIxMTBlYTMwNmNmODFhNzhkZDI1NzlhNjNhM2I2Zjc3ZGU=">
  
      <div>
  <div>
      <div>
        
        <div>
          

<div data-channel="repo:791611:commit:142766b110ea306cf81a78dd2579a63a3b6f77de" data-url="/mono/mono/pull/20014/commits/142766b110ea306cf81a78dd2579a63a3b6f77de/_render_node/commit/pull_condensed">
  <div>
      
<div>
  <p><a data-skip-pjax="true" data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek">
          <img height="20" width="20" alt="@lambdageek" src="https://avatars2.githubusercontent.com/u/480437?s=60&amp;v=4">
</a>  </p>
</div>


    

    

    

    
  </div>
    <div>
      <pre>Contributed by Apple

The original contributed patch was against a relatively old version of Mono.

In particular, mono_arch_get_enter_icall_trampoline was renamed to
mono_arch_get_interp_to_native_trampoline in
<a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/60b180d24f32b0879d729bc47a3cf92d5a0ba25e/hovercard" href="https://github.com/mono/mono/commit/60b180d24f32b0879d729bc47a3cf92d5a0ba25e"><tt>60b180d</tt></a>

Also the original patch contained subsets of
<a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/bc787a8a0105e96630597dda72fbbe4df4a3c71c/hovercard" href="https://github.com/mono/mono/commit/bc787a8a0105e96630597dda72fbbe4df4a3c71c"><tt>bc787a8</tt></a> and
<a data-hovercard-type="commit" data-hovercard-url="https://github.com/mono/mono/commit/812357ec51f771c69f54694e9fa88ee49180eb62/hovercard" href="https://github.com/mono/mono/commit/812357ec51f771c69f54694e9fa88ee49180eb62"><tt>812357e</tt></a> which are already in mono
master.</pre>
    </div>
</div>


        </div>
      </div>
  </div>
</div>


</div>

  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODg2NDY3MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDY0ODg2NDY3MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDY0ODg2NDY3MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/lambdageek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lambdageek"><img height="40" width="40" alt="@lambdageek" src="https://avatars3.githubusercontent.com/u/480437?s=88&amp;v=4"></a>

</p>


  <div id="issuecomment-648864670">
    <div data-body-version="fb3cd02b81abae5798d94648e27a09e5" data-unfurl-hide-url="/content_reference_attachments/hide">
      


      <div>

        
<task-lists disabled="" sortable="">
<div>
          <p>With the Xcode 12 beta for Universal Apps (not the normal Xcode 12 beta), this at least compiles:</p>
<div><pre>$ <span>./autogen.sh --disable-boehm --host=aarch64-apple-darwinmacos12.2.0 CFLAGS=<span><span>'</span>-mmacosx-version-min=11.0 -isysroot /Applications/Xcode_12.0-beta-universal.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.0.sdk<span>'</span></span> CC=<span><span>'</span>/Applications/Xcode_12.0-beta-universal.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64<span>'</span></span> CXX=<span><span>'</span>/Applications/Xcode_12.0-beta-universal.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64<span>'</span></span> CPPFLAGS=<span><span>'</span>-mmacosx-version-min=11.0 -isysroot /Applications/Xcode_12.0-beta-universal.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.0.sdk<span>'</span></span> CXXFLAGS=<span><span>'</span>-mmacosx-version-min=11.0 -isysroot /Applications/Xcode_12.0-beta-universal.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX11.0.sdk<span>'</span></span></span>
$ <span>make</span></pre></div>
<div><pre>$ <span>lipo -info mono/mini/mono-sgen</span>
<span>Non-fat file: mono/mini/mono-sgen is architecture: arm64</span></pre></div>
      </div>
</task-lists>


          


      </div>

    </div>
</div>


</div>


</div>







<!-- Rendered timeline since 2020-06-24 07:43:31 -->



      </div>

      
    </div>

</div>

    
</div>



    </div>
  </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>