<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Special Delivery - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Special Delivery - linksfor.dev(s)"/>
    <meta property="article:author" content="http://thedailywtf.com/authors/alex-papadimoulis"/>
    <meta property="og:description" content="Brad&#x2019;s phone rang with the telltale tone of an inner-office call. &#x201C;Yeah,&#x201D; he briskly blurted out as he picked up the phone, &#x201C;what&#x2019;cha ya need?&#x201D; That was actually his nice way of answering the phone. As the senior trader at &#xC6;xecor, one of the world&#x2019;s largest energy trading companies, Brad didn&#x2019;t need to impress anyone and, in his mind, displaying anything less than vicious hubris would be a sign of weakness.&#xA;&#x201C;Err,&#x201D; the receptionist nervously answered, &#x201C;there&#x2019;s a&#x2026; err, delivery for you, sir. They&#x2014;&#x201D;&#xA;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://thedailywtf.com/articles/Special-Delivery"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Special Delivery</title>
<div class="readable">
        <h1>Special Delivery</h1>
            <div>by http://thedailywtf.com/authors/alex-papadimoulis</div>
            <div>Reading time: 10-13 minutes</div>
        <div>Posted here: 21 Apr 2020</div>
        <p><a href="https://thedailywtf.com/articles/Special-Delivery">https://thedailywtf.com/articles/Special-Delivery</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
            <p>Brad’s phone rang with the telltale tone of an inner-office call. “Yeah,” he briskly blurted out as he picked up the phone, “what’cha ya need?” That was actually his nice way of answering the phone. As <i>the</i> senior trader at Æxecor, one of the world’s largest energy trading companies, Brad didn’t need to impress anyone and, in his mind, displaying anything less than vicious hubris would be a sign of weakness.</p>
<p>“Err,” the receptionist nervously answered, “there’s a… err, delivery for you, sir. They—”</p>
<p>“Hmphf,” Brad’s scoff cut her off. “So just <i>sign</i> for it, then! Is that really that hard to do? You can do that, can’t you?”</p>
<p>“Well sir,” the receptionist winced, “they’re asking for mooring instructions? And we need to pay wharfage charges? They said you’d know. I’m at a loss.”</p>
<p>“Fine,” Brad scowled, “I guess I have to do <i>everything </i>around here!” He slammed down the phone and marched out of his corner office. Despite Æxecor’s location – the “old docks” district – their office was one of the most posh in the city. On one end of the expansive, former warehouse sat the executive suites, which had a tremendous view of the city skyline. The other end – where Brad was headed towards – was the reception which overlooked its own, private bay on the river.</p>
<p>“Okay, I’m here!” he angrily announced once he stepped foot in the lobby. “So let’s do this! What do I need to—”</p>
<p>Brad stopped mid-sentence. His eyes were immediately drawn through the floor-to-ceiling windows and onto the river bay that Æxecor’s building overlooked. There was an absolutely gigantic barge – nay, an <i>armada</i> of tightly-connected barges – overfilled with enormous piles of coal that was attempting to dock in front of the building. “What… the… fuuu—”</p>
<blockquote>
<p><img itemprop="image" alt="Photo credit: Kordite@Flickr" src="https://thedailywtf.com/images/200911/2962883468_32efb95441.jpg"></p>
</blockquote>
<p>“You mus’ be Brad,” a cheerful voice jumped in. Brad’s eye’s shifted towards the scruffy fellow wearing some sort of workman’s uniform who was sitting in one of the reception chairs. “Now first and foremost, how in the Sam Hill are we ‘sposed to moor this boat? I count two cleats, but we sure as heck can’t hitch these. And, shoot, do you even <i>have</i> a bulk berth?”</p>
<p>For once, Brad was speechless. He had absolutely no idea who that man was and he could hardly understand a word he said. Plus, there was that gargantuan vessel that was slowly moving towards the building. “Uhh,” he stuttered, “wait. Are you delivering… coal? To… uhh, us?”</p>
<p>“Well, yeah! Twenty-eight thousand tons of the good ol’ black gold!” The workman sarcastically furrowed his brow adding, “I mean, we did get the right address, har har. This is Æxecor? And this is Pier 53? And you <i>are</i> Brad, the fella who ordered it, right?”</p>
<p>It was that moment that Brad’s palm almost immediately made contact with his forehead. He realized that something must have <i>really</i> gone awry: instead of <i>virtually</i> trading 28,000 tons of coal, Brad had somehow ended up with 28,000 tons of real coal.</p>
<h3>Commodity Futures Trading 101</h3>
<p>If you’ve ever watched <a href="http://www.amazon.com/gp/product/B001LMU1JQ?ie=UTF8&amp;tag=tdw-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B001LMU1JQ">Trading Places</a>, the 1983 classic starring Eddie Murphy and Dan Aykroyd, then you’re probably at least <em>familiar</em> with commodities markets. At a basic level, commodities such as gold, wool, and soy beans are sold by producers and, eventually, delivered to buyers. But Billy Ray Valentine didn’t strike it rich and bankrupt the Duke Brothers by hauling around Frozen Concentrated Orange Juice (FCOJ); instead, they worked the commodities market by buying and selling FCOJ <em>futures contracts</em>. Actually, that’s really the only way to trade in commodities.</p>
<p>A futures contract is pretty straight forward: you agree to buy X units of commodity Y at $N per unit at some fixed future date. While it might seem a bit strange for an individual to agree to buy twenty tons of pork bellies in April for $34,420 (even if he <em>really</em> loves bacon), the idea is to sell the to-be-delivered pork bellies long before April, and to sell them for more than $34,420. Just about every conceivable commodity is bought and sold in this manner long before the commodity is even produced. The whole point of all this trading is to shift the risk (and rewards) of fluctuating commodity prices from the producers (farmers, miners, etc) to the traders.</p>
<p>Of course, because commodity traders don’t <em>actually</em> want to be stuck with tons and tons of pork bellies, a whole series of middlemen — from the brokers to the exchanges to the clearing houses — work hard to ensure that, when you say "I’ll buy 300 tons of pork bellies for $518,000 in May," you don’t actually buy 300 tons of pork bellies for $518,000 in May.</p>
<p>Brokers, for example, will set up round-turn trades so that, for each futures contract purchased, an offsetting contract can be sold to whoever actually wants to buy the goods. The exchange’s automated trading systems have all sorts of rules-engines to make sure that obvious errors (like delivering truckloads of commodities to a commercial office park) don’t slip through. And finally, processors at the clearing house will double-check transactions to make sure they weren’t sent over in error.</p>
<p>All that said, it’s almost impossible for traders to <em>actually</em> buy the commodities they are buying. Well, <em>almost</em> impossible.</p>
<h3>A Perfect Storm</h3>
<p>Æxecor traded coal on only one exchange (the WTFSE), and they didn’t trade coal very often. As such, when WTFSE upgraded its public-facing, WebService-based API, Æxecor’s internal trading system could no longer communicate with it. With a couple pending coal trades, this presented a bit of a problem.</p>
<p>Fortunately, Æxecor had a staff of crack programmers, and they were able to hack together a solution that worked with the WTFSE’s new API. Essentially, the coder added a bit of XML to their trading requests, including this following snippet.</p>
<blockquote>
<pre>&lt;AdditionalProperties&gt;
   &lt;PhysicallyDeliver&gt;
      &lt;value&gt;False&lt;/value&gt;
   &lt;/PhysicallyDeliver&gt;
&lt;/AdditionalProperties&gt;

</pre>
</blockquote>
<p>Notice anything off about that XML? If you said, “value should be 0 instead of False”, then give yourself a pat on the back. As it turned out, WTFSE only recognized 1’s and 0’s to represent True and False and, if the value was nether 1 nor 0, it simply defaulted to 1. Whoops!</p>
<p>Now, this normally wouldn’t have been that big of a deal; to ensure accurate transactions, the WTFSE (and just about all other exchanges) sends back a trade confirmation with all of the original information encoded in their XML. That way, both parties have to understand each other’s data. On Æxecor's end, everything looked hunky dory, especially as a result of the following line of code.</p>
<blockquote>
<pre>bool physicallyDeliver = 
    (getNodeVal("PhysicallyDeliver").toLower() == "true");</pre>
</blockquote>
<p>Kudos to the developer for verifying the correct case... but, a string can be infinitely more things than simply "true" or "false". Such as "1" or "0". Whoops.</p>
<p>Even a mistakenly confirmed incorrect trade shouldn’t have been <em>that</em> big of a deal, since the clearing house would notice some pretty big problems with the trade. You can’t just call up FedEx and request delivery of thousands upon thousands of tons of raw material to some office complex downtown. Commodities can only be delivered to a fixed number of delivery points, such as warehouses adjacent to train yards or ports. Of course, since Æxecor’s offices were in located on Pier 53, a recently redeveloped warehouse district off the river, it would have seemed like the logical place to accept delivery of a whole bunch of coal, especially to a rules engine. Whoops.</p>
<p>Fortunately, the commodity futures trading market doesn’t rely entirely on software. There are back-office personnel on both sides of the transaction (and several places in the middle) to make sure that a trader doesn’t do something silly like accidently click the “physically deliver” checkbox, enter into round-turn trades that creates an instant net loss, and so on.</p>
<p>So with everyone looking over transactions, you’d think that <em>someone</em> along the way would have noticed that trading giant Æxecor asked for physical delivery of a million-and-a-half dollars worth of coal. Actually, someone probably did, but because the trade came from Brad, there was just no way it could be made in err.</p>
<p>As <i>the</i> senior trader at Æxecor, Brad made it <em>very</em> clear that no one — “not even His Holiness, the Pope” — shall question his trades. After all, Brad makes complex trading decisions that no one else could possibly comprehend. Sometimes he buys high and sells low. Sometimes he holds in a decline. Sometimes he refuses to sell at any price. Brad works in mysterious ways, and if he said “do it”, then it better get done.</p>
<h3>An Early Christmas</h3>
<p>“Now don’t go telling me that this coal ain’t yours,” the workman said defensively, sensing something was awry. “I mean, if you don’t want it, that’s your business. But this here is your coal, mister Brad.”</p>
<p>As much as Brad wanted to deny it, he knew it was his. And not only that, but he had haughtily confirmed, re-confirmed, and re-re-confirmed with Æxecor’s own back-office processing team. He had just assumed, like he always did, that the mouth-breathing paper-pushers couldn’t read English. As he played back the last thing he told one of the processors about the coal order – “what part of ‘execute my f*ing trade’ don’t you understand!?” – he wondered what he could possibly do with 56,000,000 pounds of <em>real</em> coal.</p>
<p>Try to imagine for a moment how <em>you</em> would unload a mountain of coal worth million-and-a-half dollars. Craigslist does have its limits, after all.</p>
<p>As it turned out, it was more difficult than Brad could have <em>ever</em> imagined to sell real coal. The commodities market really only deals in futures, and everyone who actually needs 28,000 tons of coal has bought it long in advance. And besides, who wants to buy coal from some guy named Brad? Eventually, after paying exorbitant wharfing, shipping, environmental, docking, unloading, loading, and multiple-fee fees, Brad was finally able to unload it for twenty cents on the dollar.</p>
<p>Ever since “The Big Purchase”, Brad has never been able to live down his mountain of coal. Every time he passed others in the hallway, he knew that they knew about the coal, and they knew that he knew that they knew. No one really poked fun or laughed at him, but it didn’t matter. Brad was no longer thought of <i>the</i> senior trader at Æxecor; instead, he was the guy who accidently bought all that coal.</p><p><img src="https://thedailywtf.com/images/inedo/buildmaster-icon.png"> [Advertisement] 
	<a href="https://inedo.com/BuildMaster?utm_source=tdwtf&amp;utm_medium=footerad&amp;utm_term=2018&amp;utm_content=Self_Service&amp;utm_campaign=Buildmaster_Footer">BuildMaster</a> allows you to create a self-service release management platform that allows different teams to manage their applications. <a href="https://inedo.com/BuildMaster/download?utm_source=tdwtf&amp;utm_medium=footerad&amp;utm_term=2018&amp;utm_content=Self_Service&amp;utm_campaign=Buildmaster_Footer">Explore how!</a> 
</p>


        </div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>