<!DOCTYPE html>
<html lang="en">
<head>
    <title>
Idea:  Extension/derivation of sealed classes &#xB7; Issue #13345 &#xB7; dotnet/runtime - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="Idea:  Extension/derivation of sealed classes &#xB7; Issue #13345 &#xB7; dotnet/runtime - linksfor.dev(s)"/>
    <meta property="article:author" content="verelpode"/>
    <meta property="og:description" content="I believe this proposal idea -- if implemented -- would require changes in both CoreCLR and the C# compiler, thus I&amp;#39;m posting it in this repo. Various usage cases exist where it is desirable to..."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://github.com/dotnet/coreclr/issues/26465"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - Idea:  Extension/derivation of sealed classes &#xB7; Issue #13345 &#xB7; dotnet/runtime</title>
<div class="readable">
        <h1>Idea:  Extension/derivation of sealed classes &#xB7; Issue #13345 &#xB7; dotnet/runtime</h1>
            <div>by verelpode</div>
            <div>Reading time: 55-70 minutes</div>
        <div>Posted here: 12 Sep 2019</div>
        <p><a href="https://github.com/dotnet/coreclr/issues/26465">https://github.com/dotnet/coreclr/issues/26465</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div>
              <div data-quote-markdown=".js-comment-body" data-issue-and-pr-hovercards-enabled="" data-team-hovercards-enabled="">

            <div data-channel="marked-as-read:issue:557970221">

              
<div data-gid="MDU6SXNzdWU1NTc5NzAyMjE=" data-url="/_render_node/MDU6SXNzdWU1NTc5NzAyMjE=/issues/body" data-channel="issue:557970221">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issue-557970221">
  <div data-body-version="233d9240ea825e32e730ad0387c0034b" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>I believe this <del>proposal</del> idea -- if implemented -- would require changes in both CoreCLR and the C# compiler, thus I'm posting it in this repo.</p>
<p>Various usage cases exist where it is desirable to extend sealed classes.  This is already partially supported by the preexisting "extension methods" feature in C#, but it is rather limited.  <del>I propose to further reduce these limits as follows.</del>  These limits could be further reduced.  I would like to share the following idea with the community, for discussion purposes.</p>
<p>Allow a class/type to derived from a sealed class/type, but with the following limitations and abilities:</p>
<ul>
<li>The subclass cannot override any <code>virtual</code> methods in the sealed base class.</li>
<li>The subclass cannot re-implement any interface that is already implemented in the sealed base class.</li>
<li>The subclass can implement any new interfaces that are NOT implemented in the sealed base class.</li>
<li>Any new interfaces implemented by the subclass are only available/visible via the subclass (see following example).</li>
<li>The subclass can define new members (fields, properties, events, methods, constructors).</li>
<li>The subclass can access <code>protected</code> members in the sealed base class.  Alternatively, if this causes a problem for some reason, it would also be acceptable to deny access to <code>protected</code> members.</li>
</ul>
<p>The following limitation is likely necessary and is acceptable:<br>
Any new interface implemented by the subclass is only available/visible via the subclass, or if the object/instance is specifically typecasted to that interface.  For example:</p>
<pre><code>sealed class MyBaseClass
{
}

class MySubClass : MyBaseClass, ITest1
{
}

interface ITest1
{
}

MySubClass instance = new MySubClass();
ITest1 testInterface = instance;  // OK, as normal.
MyBaseClass baseInstance = instance;
testInterface = baseInstance as ITest1; // may produce NULL.
</code></pre>
<h4>EDIT:</h4>
<p>To clarify, this message is intended to be only an idea for discussion purposes, not a feature request nor demand.  It's not even a suggestion anymore.  Apparently I made a mistake when I named this issue with "Proposal:", thus I've now renamed it to "Idea:" in order to be friendlier.  To my surprise, I didn't know that non-staff participants of .NET Foundation repos interpret "Proposal:" negatively, approximately as if it means "Feature demand:".  It was not my intention to represent this issue or previous issues as feature requests or demands.  I hope that the intent is now clear:  Only an idea for discussion purposes.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>

</div>


              

  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjgzMjQ3Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjgzMjQ3Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjgzMjQ3Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/svick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/svick"><img height="40" width="40" alt="@svick" src="https://avatars2.githubusercontent.com/u/287848?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526832472">
    <div>
      

  

<details data-body-version="e1b59959da4a891e44b6b89dbce80b05">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e1b59959da4a891e44b6b89dbce80b05" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Various usage cases exist where it is desirable to extend sealed classes.</p>
</blockquote>
<p>What are those?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjgzNzc1OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjgzNzc1OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjgzNzc1OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526837758">
    <div>
      

  

<details data-body-version="2957a89a790cfa2a35875a0028a85a49">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="2957a89a790cfa2a35875a0028a85a49" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/svick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/svick">@svick</a><br>
For example, the following demonstrates the standard technique of making a new class that wraps an instance of a sealed class.  Although this succeeds, it is an awkward workaround, especially when the sealed base class contains a large number of members that the new class must manually duplicate and forward to the sealed base class.  The following example is not especially bad because the sealed base class contains only 3 members to forward, but a real class can contain a much larger quantity of members and then the wrapping/forwarding solution is a tedious awkward workaround.</p>
<pre><code>sealed class MyBaseClass
{
    public int Method1(int a, int b, int c, int d) {...}
    public int Method2(int a, int b, int c, int d) {...}
    public int Method3(int a, int b, int c, int d) {...}
}

class MySubClass_Workaround : ITest1
{
    private readonly MyBaseClass _InternalObject = new MyBaseClass();

    public int Method1(int a, int b, int c, int d)
    {
        return _InternalObject.Method1(a, b, c, d);
    }

    public int Method2(int a, int b, int c, int d)
    {
        return _InternalObject.Method2(a, b, c, d);
    }

    public int Method3(int a, int b, int c, int d)
    {
        return _InternalObject.Method3(a, b, c, d);
    }

    ... and so forth, for each and every member of the sealed base class ...
}
</code></pre>
<p>Another disadvantage of the wrapping/forwarding workaround is that it causes a doubling of the number of objects at runtime.  This becomes significant when a program needs to create many instances of <code>MySubClass_Workaround</code>.  In contrast, if the base class was not sealed by Microsoft or whoever made it, then the normal manner of making a derived class results in no change to the quantity of objects at runtime.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjg0ODMxOQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjg0ODMxOQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjg0ODMxOQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526848319">
    <div>
      

  

<details data-body-version="8de78e8ceb35c3ef37db981144d37428">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="8de78e8ceb35c3ef37db981144d37428" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>In <a data-error-text="Failed to load issue title" data-id="450424242" data-permission-text="Issue title is private" data-url="https://github.com/microsoft/microsoft-ui-xaml/issues/780" data-hovercard-type="issue" data-hovercard-url="/microsoft/microsoft-ui-xaml/issues/780/hovercard" href="https://github.com/microsoft/microsoft-ui-xaml/issues/780">microsoft/microsoft-ui-xaml#780</a> unsealing is described as a <strong>"longstanding request from our community"</strong>, thus the community does view it as a significant problem when they're prevented from making derived classes.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjg3NTM0OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjg3NTM0OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjg3NTM0OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2"><img height="40" width="40" alt="@Wraith2" src="https://avatars3.githubusercontent.com/u/13322696?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526875348">
    <div>
      

  

<details data-body-version="6902366e76fc73b0ec61d4c994d620e3">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6902366e76fc73b0ec61d4c994d620e3" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>If you want to derive from something sealed you need to talk to the sealing party and get them unseal it for you. Simply deciding that the api provided is not sufficient does not give you the insight needed to know why that decision was made and second guess it. Allowing override of the sealing decision makes sealing useless and potentially exposes previously safe implementation details to misuse which I'd consider a massive breaking change.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjkxMzYwNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjkxMzYwNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjkxMzYwNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526913607">
    <div>
      

  

<details data-body-version="7ca07e1e67aedb17828260b89b54afb7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="7ca07e1e67aedb17828260b89b54afb7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2">@Wraith2</a> wrote:</p>
<blockquote>
<p>Allowing override of the sealing decision makes sealing useless and potentially exposes previously safe implementation details to misuse which I'd consider a massive breaking change.</p>
</blockquote>
<p>I agree, but I didn't propose to allow override of the sealing decision.  The points you raised are good points but they're not applicable to my proposal.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjkxNDczMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNjkxNDczMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNjkxNDczMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2"><img height="40" width="40" alt="@Wraith2" src="https://avatars3.githubusercontent.com/u/13322696?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-526914733">
    <div>
      

  

<details data-body-version="d5ba0488f26ecee0b1809bc90133dace">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d5ba0488f26ecee0b1809bc90133dace" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>The action of sealing prevents you from constructing an is-a relationship using the sealed class. allowing even limited derivation breaks that decision.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzExNTMxMA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzExNTMxMA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzExNTMxMA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527115310">
    <div>
      

  

<details data-body-version="cff400b12213caeaced6bb51ab5e150a">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="cff400b12213caeaced6bb51ab5e150a" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2">@Wraith2</a></p>
<blockquote>
<p>The action of sealing prevents you from constructing an is-a relationship using the sealed class.</p>
</blockquote>
<p>That's not an immutable fact.  That's your opinion of what <code>sealed class</code> should mean.  I disagree with it.</p>
<blockquote>
<p>allowing even limited derivation breaks that decision.</p>
</blockquote>
<p>The proposal doesn't break a decision, rather it corrects a mistake.  Being open to correction of mistakes is a very important and essential part of professional software engineering.</p>
<p>You mentioned "massive breaking change" but you've reversed it.  The "massive breaking change" would occur in the <strong>reverse direction</strong> of what you said.  If derivation was originally allowed then later disallowed, then it would be a massive breaking change, but you said the opposite.</p>
<blockquote>
<p>exposes previously safe implementation details to misuse</p>
</blockquote>
<p>That's incorrect.  My proposal stated:</p>
<ul>
<li>"The subclass cannot override any virtual methods in the sealed base class."</li>
<li>"The subclass cannot re-implement any interface that is already implemented in the sealed base class."</li>
<li>"it would also be acceptable to deny access to protected members."</li>
</ul>
<p>I appreciate constructive criticism -- I really do -- but did you read the entire proposal before criticizing it?  It was only a short proposal, but unfortunately your reply sounded like you read only the first paragraph and then quickly posted a knee-jerk rejection.</p>
<p>I would completely understand if you don't have time to read all pages of a 50-page specification.  I wouldn't have time to read such a long document.  But in this case, my proposal was only half a page.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzExNzkxMQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzExNzkxMQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzExNzkxMQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527117911">
    <div>
      

  

<details data-body-version="d6e2f5377891796372b77bcb7f35197f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d6e2f5377891796372b77bcb7f35197f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/svick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/svick">@svick</a> -- I admire your patience.  I don't know how you do it, but somehow you do.  That's a strength of yours.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEyMTA5Nw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEyMTA5Nw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzEyMTA5Nw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2"><img height="40" width="40" alt="@Wraith2" src="https://avatars3.githubusercontent.com/u/13322696?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527121097">
    <div>
      

  

<details data-body-version="7d3108b84645ccb52857231dc1d7f42b">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="7d3108b84645ccb52857231dc1d7f42b" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>That's not an immutable fact. That's your opinion of what sealed class should mean. I disagree with it.</p>
</blockquote>
<p><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/sealed" rel="nofollow">sealed (C# Reference)</a><br>
"When applied to a class, the sealed modifier prevents other classes from inheriting from it."</p>
<p>the sealed langauge feature is implemented using the sealed CLI feature.</p>
<p><a href="https://www.ecma-international.org/publications/standards/Ecma-335.htm" rel="nofollow">Standard ECMA-335 - Common Language Infrastructure (CLI)</a><br>
II.10.1.4 Inheritance attributes,<br>
"sealed specifies that a type shall not have derived classes.  All value types shall be sealed."</p>
<p>You'll need to convince people that the runtime spec, runtime implementation(s), language(s), compiler(s) and core libraries should change. This would need the benefits to doing so to be high and very clear and for the compatiblity cost of doing so to either be negligible or the benefits to breaking any existing code to be immense. I feel your proposal will not meet these tests.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEyMzA5Mg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEyMzA5Mg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzEyMzA5Mg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527123092">
    <div>
      

  

<details data-body-version="38c5092f97b89b8718f22b7543cc852d">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="38c5092f97b89b8718f22b7543cc852d" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/Wraith2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Wraith2">@Wraith2</a> -- That's not an immutable fact.  That's your opinion of what <code>sealed class</code> should mean.<br>
You've linked to the 6th edition (2012) of ECMA-335.  That's 7 years old.  That document is out-of-date.  When the 7th edition is eventually published, it will correct the mistakes in the 6th edition.  Standards are not intended to be treated like a bible.  Every standard contains defects/deficiences/mistakes.</p>
<blockquote>
<p>the benefits to breaking any existing code</p>
</blockquote>
<p>My proposal doesn't break existing code.  As I said in my previous message, you reversed it.</p>
<blockquote>
<p>You'll need to convince people that the runtime spec, runtime implementation(s), language(s), compiler(s) and core libraries should change.</p>
</blockquote>
<p>No, no, and no.  That's not how it works.  It's not my job nor my responsibility to convince anyone.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEzMDkxMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEzMDkxMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzEzMDkxMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/HaraGabi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/HaraGabi"><img height="40" width="40" alt="@HaraGabi" src="https://avatars3.githubusercontent.com/u/18262532?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527130913">
    <div>
      

  

<details data-body-version="12b29ff30326920cfa01f7c8b3a3f0fd">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="12b29ff30326920cfa01f7c8b3a3f0fd" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p><a data-hovercard-type="user" data-hovercard-url="/users/svick/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/svick">@svick</a><br>
For example, the following demonstrates the standard technique of making a new class that wraps an instance of a sealed class. Although this succeeds, it is an awkward workaround, especially when the sealed base class contains a large number of members that the new class must manually duplicate and forward to the sealed base class. The following example is not especially bad because the sealed base class contains only 3 members to forward, but a real class can contain a much larger quantity of members and then the wrapping/forwarding solution is a tedious awkward workaround.</p>
<pre><code>sealed class MyBaseClass
{
    public int Method1(int a, int b, int c, int d) {...}
    public int Method2(int a, int b, int c, int d) {...}
    public int Method3(int a, int b, int c, int d) {...}
}

class MySubClass_Workaround : ITest1
{
    private readonly MyBaseClass _InternalObject = new MyBaseClass();

    public int Method1(int a, int b, int c, int d)
    {
        return _InternalObject.Method1(a, b, c, d);
    }

    public int Method2(int a, int b, int c, int d)
    {
        return _InternalObject.Method2(a, b, c, d);
    }

    public int Method3(int a, int b, int c, int d)
    {
        return _InternalObject.Method3(a, b, c, d);
    }

    ... and so forth, for each and every member of the sealed base class ...
}
</code></pre>
<p>Another disadvantage of the wrapping/forwarding workaround is that it causes a doubling of the number of objects at runtime. This becomes significant when a program needs to create many instances of <code>MySubClass_Workaround</code>. In contrast, if the base class was not sealed by Microsoft or whoever made it, then the normal manner of making a derived class results in no change to the quantity of objects at runtime.</p>
</blockquote>
<p>I believe this use case will be supported with the C# proposal "Extension everything" <a href="https://github.com/dotnet/csharplang/issues/164" data-hovercard-type="issue" data-hovercard-url="/dotnet/csharplang/issues/164/hovercard">A discussion about it in the C# language repo</a></p>
<p>Although to be fair I kind of lost track if it's still happening in the future or not.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEzNTI0OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzEzNTI0OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzEzNTI0OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/YairHalberstadt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/YairHalberstadt"><img height="40" width="40" alt="@YairHalberstadt" src="https://avatars1.githubusercontent.com/u/29174528?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527135248">
    <div>
      

  

<details data-body-version="266664213d2c3c80fb83bb14d130be5a">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="266664213d2c3c80fb83bb14d130be5a" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<blockquote>
<p>You'll need to convince people that the runtime spec, runtime implementation(s), language(s), compiler(s) and core libraries should change.</p>
</blockquote>
</blockquote>
<blockquote>
<p>No, no, and no. That's not how it works. It's not my job nor my responsibility to convince anyone.</p>
</blockquote>
<p>I'm afraid that is how it works. You want this feature. If other people aren't convinced it's valuable, they won't do it. So whether or not it's your job, this feature will simply not happen unless you can pursuade the relevant parties it's worthwhile.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzE1MDE2OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzE1MDE2OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzE1MDE2OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/GSPP/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/GSPP"><img height="40" width="40" alt="@GSPP" src="https://avatars1.githubusercontent.com/u/12032350?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527150168">
    <div>
      

  

<details data-body-version="c461fbd0ea55952d73694d29c1ea1731">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c461fbd0ea55952d73694d29c1ea1731" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Inheritance must be designed for by the author of the parent type. Otherwise, it's rather easy to break assumptions in the parent type. Now maybe this proposal mitigates that by disallowing everything that could break invariants.</p>
<p>To provide a counterpoint in this discussion: I think everything should be sealed by default. The C# language made a mistake here, and the .NET Framework authors sometimes perpetuate that mistake by enabling misuses of inheritance.</p>
<p>Substitution inheritance is awesome (<code>IEnumerable</code>, <code>Stream</code>, ...). Inheriting just to stick another field onto some object is dirty. It's better to wrap/compose. Or, to use something like the WinForms <code>object Control.Tag { get; set; }</code> feature which is useful and architecturally sound.</p>
<p>Sometimes, inheritance can be a valuable performance win. For example, I understand that <code>await</code> can stick the state machine on an internal <code>Task</code> derived type... This is a very nasty hack in my book, but it's worth it. But this "performance hack" form of inheritance should be internal to a library.</p>
<p>As an example, I think all public forms of inheritance on <code>Task</code> are a design mistake in the framework. Derived classes can do nothing but to stick another field onto this type. There is nothing useful to override.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjYwMTMzMTUwMw==">
  
        <div data-team-hovercards-enabled="" id="event-2601331503">
  
  <div>

    

        <p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="20" width="20" alt="@verelpode" src="https://avatars2.githubusercontent.com/u/32857007?s=60&amp;v=4"></a>
  <a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode">verelpode</a>
  


      
changed the title
<del>Proposal:  Extension/derivation of sealed classes</del>

<ins>Idea:  Extension/derivation of sealed classes</ins></p><a href="#event-2601331503"><relative-time datetime="2019-09-02T14:50:43Z" title="Sep 2, 2019, 7:50 AM PDT">on Sep 2, 2019</relative-time></a>

  </div>
</div>




</div>

  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzE3NjQ4MQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzE3NjQ4MQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzE3NjQ4MQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527176481">
    <div>
      

  

<details data-body-version="c9f5a9fbdd91bde706c2779e8462dac7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c9f5a9fbdd91bde706c2779e8462dac7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/YairHalberstadt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/YairHalberstadt">@YairHalberstadt</a> wrote:</p>
<blockquote>
<p>You want this feature.</p>
</blockquote>
<p>No, I don't.   Apparently I made a mistake when I named this issue.  I've now corrected my mistake by renaming this issue, and by modifying the original message to use a friendlier choice of wording.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxMTcyNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxMTcyNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzIxMTcyNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527211726">
    <div>
      

  

<details data-body-version="6a1ffa4e452689664dc1282fedf0bab7">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6a1ffa4e452689664dc1282fedf0bab7" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Here is a fictional description of a scenario that sometimes occurs in real life by accident.  Imagine a scenario where a random innocent person -- let's call him "John" -- posts a feature proposal to a .NET Foundation repo/forum.  Two or three other participants (let's call them "Richard" and "Harry") are very big fans of that particular .NET repo/project.  They are not staff members, but nevertheless they are very vocal and frequently post replies to everyone, and they reply to "John" with such a strong tone of authority that "John" unwittingly starts to respond to them as if they are official spokespeople of the .NET Foundation, despite the fact they are only random members of the public with no higher status than John.  Richard and Harry strongly insist that because John wants the new feature, John must make a very big effort to convince and persuade the relevant people to implement the new feature.</p>
<p>After a while, John accepts the authoritative advice as if it came direct from an official spokesperson or employee of the .NET Foundation or Microsoft, because he was persuaded by the strong tone of authority that Richard and Harry habitually use in their favorite .NET Foundation repo/forum.  Thus John begins to make a very big effort to persuade "Sally" to implement the new feature that he wants.  Sally is the relevant person for that area.  Sally carefully considers John's proposal, and after a couple of weeks, she decides to decline it.  John doesn't accept Sally's final decision.  John tries again and again and again over the course of months to persuade Sally.  Sally feels harassed and stressed.</p>
<p>John does not even realize that he is harassing Sally.  John thinks he is merely doing what must be done, according to what Richard and Harry insisted he must do.  The .NET Foundation's Code of Conduct includes <em>"a harassment-free experience for everyone"</em>, but nevertheless Richard and Harry strongly insist on convincing participants to use a process of persuasion that carries the risk of triggering unintentional harassment.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxMzUxMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxMzUxMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzIxMzUxMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/YairHalberstadt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/YairHalberstadt"><img height="40" width="40" alt="@YairHalberstadt" src="https://avatars1.githubusercontent.com/u/29174528?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527213512">
    <div>
      

  

<details data-body-version="88a6ef454c369689878161d05d07d7c9">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="88a6ef454c369689878161d05d07d7c9" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode">@verelpode</a></p>
<p>By pursuade, I mean the following:</p>
<p>Present enough evidence and arguments in comments on this issue to pursuade the relevant parties of the benefits and plausibility of your suggested proposal.</p>
<p>It may be acceptable to tag the relevant parties once or twice to indicate your idea and the evidence you've collected. Certainly it not acceptable to troll them.</p>
<p>In no way do I, or as far as I know anyone else here advocate any form of harassment, or even any form of pushing a feature request other than by civil communication on the relevant issue.</p>
<p>All I meant by saying that you will have to pursuade the relevant parties, is stating the fact that no-one else is likely to do the leg work to bring sufficient evidence the feature is worthwhile other than you. If you don't do that leg work than as a matter of fact your feature will be unlikely to be implemented.</p>
<p>Till now noone has ever indicated that they understood me any way other than the way I described. I will try to express my point more clearly in the future.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxOTY4MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzIxOTY4MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzIxOTY4MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527219680">
    <div>
      

  

<details data-body-version="35f24d0c19ec7a323eea16a1ff200ec5">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="35f24d0c19ec7a323eea16a1ff200ec5" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/YairHalberstadt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/YairHalberstadt">@YairHalberstadt</a> -- Thank you for sharing your opinion regarding the best proposal process, both now and in the past.  My opinion is this:  I disagree with your process, but you're free to use your process, and I'm free to use my process.  My final decision remains the same as it was the previous time:  For myself, I have decided not to adopt your process.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzMwNDYyMw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzMwNDYyMw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzMwNDYyMw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/benaadams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/benaadams"><img height="40" width="40" alt="@benaadams" src="https://avatars0.githubusercontent.com/u/1142958?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527304623">
    <div>
      

  

<details data-body-version="014c2569e433a76584b03012f8668073">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="014c2569e433a76584b03012f8668073" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<blockquote>
<p>Various usage cases exist where it is desirable to extend sealed classes.</p>
</blockquote>
</blockquote>
<blockquote>
<p>What are those?</p>
</blockquote>
<p>Side car-ing data through an api that makes a callback to user code; but only takes the sealed type is probably the main one. Though most BCL libs take unsealed parent classes, even if there is a sealed version, so it doesn't occur that much.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzQ5NDg1Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzQ5NDg1Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzQ5NDg1Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Joe4evr/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Joe4evr"><img height="40" width="40" alt="@Joe4evr" src="https://avatars1.githubusercontent.com/u/1058562?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527494856">
    <div>
      

  

<details data-body-version="ac58f0356d3af4363b23f68a5106794f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="ac58f0356d3af4363b23f68a5106794f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>Side car-ing data through an api that makes a callback to user code; but only takes the sealed type is probably the main one.</p>
</blockquote>
<p>And even this particular scenario can be solved today with a <code>ConditionalWeakTable&lt;K, V&gt;</code>.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzU1MjI0NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzU1MjI0NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzU1MjI0NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory"><img height="40" width="40" alt="@scalablecory" src="https://avatars1.githubusercontent.com/u/4665835?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527552244">
    <div>
      

  

<details data-body-version="cc1cbd6fc89e695aad6035f786b1371d">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="cc1cbd6fc89e695aad6035f786b1371d" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<ul>
<li>The subclass can implement any new interfaces that are NOT implemented in the sealed base class.</li>
<li>Any new interfaces implemented by the subclass are only available/visible via the subclass (see following example).</li>
<li>The subclass can define new members (fields, properties, events, methods, constructors).</li>
</ul>
</blockquote>
<p>This will subtly break certain code that uses marshaling, serialization, or reflection. Presumably we could update them to be backward-compatible, but it seems like an error-prone update and I'm not confident we could solve every case in a way that is consistent for the user. This would also require new CLR features which would break backward compatibility with older .NET and Mono versions. These kinds of updates aren't out of question, but we'd want a strong justification for doing so.</p>
<blockquote>
<ul>
<li>The subclass can access protected members in the sealed base class. Alternatively, if this causes a problem for some reason, it would also be acceptable to deny access to protected members.</li>
</ul>
</blockquote>
<p>This is one of the key reasons for a class to be marked as <code>sealed</code>, so we won't want this.</p>
<blockquote>
<p>Various usage cases exist where it is desirable to extend sealed classes.</p>
</blockquote>
<p>Can you provide a killer example where this feature would enable something previously not possible, or where it would significantly reduce effort to implement something?</p>
<p>Also, have you seen <a href="https://github.com/dotnet/roslyn/issues/11159" data-hovercard-type="issue" data-hovercard-url="/dotnet/roslyn/issues/11159/hovercard">Extension Everywhere</a>? This would allow the safe aspects of your idea.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzkxMzQ2OA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzkxMzQ2OA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzkxMzQ2OA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527913468">
    <div>
      

  

<details data-body-version="3d96184c75b82718fe5f5899390f3512">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="3d96184c75b82718fe5f5899390f3512" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory">@scalablecory</a></p>
<blockquote>
<p>This is one of the key reasons for a class to be marked as sealed, so we won't want this.</p>
</blockquote>
<p>OK.  I accept your viewpoint on this subpoint, so let's modify the proposal accordingly:</p>
<p><del>The subclass can access protected members in the sealed base class. Alternatively, if this causes a problem for some reason, it would also be acceptable to deny access to protected members.</del><br>
The subclass cannot access <code>protected</code> members in the sealed base class.</p>
<p>By the way, re "acceptable" in the above quote, that's probably a contributing factor to the strange negative knee-jerk reactions from some forum participants (not you):  Those people might have misunderstood my use of the word "acceptable".  They might not have understood that I meant "acceptable" as jargon/terminology.  Likewise many standards use jargon such as "shall" and "shall not" and it sounds terribly impolite but it's not impolite because "shall" is special jargon in those standards.</p>
<p>I can understand and sympathize when negative emotions are triggered by impolite wording, but in this case "Proposal:", "acceptable", "shall not", etc aren't impolite words, and also aren't demands or orders.  Just speaking in general (not about anyone in particular), some people in society have suffered unfair and awful mistreatment in school in the past, and this can trigger hypersensitive reactions later in life (including inability to accept suggestions for corrections to mistakes), but my use of jargon was intended to be <strong>respectful, polite, and direct</strong>, from one professional to another professional.  It was certainly never intended to mean <em>"I want this feature and you must make it, and only XYZ is acceptable."</em></p>
<p>I do NOT want this feature.  I want to discuss it.  I'm also happy to modify the proposal in response to feedback.</p>
<blockquote>
<p>Also, have you seen Extension Everywhere? This would allow the safe aspects of your idea.</p>
</blockquote>
<p>Thanks for your helpful link to <a data-error-text="Failed to load issue title" data-id="153598385" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/roslyn/issues/11159" data-hovercard-type="issue" data-hovercard-url="/dotnet/roslyn/issues/11159/hovercard" href="https://github.com/dotnet/roslyn/issues/11159">dotnet/roslyn#11159</a> and thanks also to <a data-hovercard-type="user" data-hovercard-url="/users/HaraGabi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/HaraGabi">@HaraGabi</a> for linking to <a data-error-text="Failed to load issue title" data-id="209323681" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/csharplang/issues/164" data-hovercard-type="issue" data-hovercard-url="/dotnet/csharplang/issues/164/hovercard" href="https://github.com/dotnet/csharplang/issues/164">dotnet/csharplang#164</a></p>
<blockquote>
<p>Can you provide a killer example</p>
</blockquote>
<ol>
<li>In <a data-error-text="Failed to load issue title" data-id="450424242" data-permission-text="Issue title is private" data-url="https://github.com/microsoft/microsoft-ui-xaml/issues/780" data-hovercard-type="issue" data-hovercard-url="/microsoft/microsoft-ui-xaml/issues/780/hovercard" href="https://github.com/microsoft/microsoft-ui-xaml/issues/780">microsoft/microsoft-ui-xaml#780</a> unsealing is described as a <strong>"longstanding request from our community"</strong>, thus the community does view it as a significant problem when they're prevented from making derived classes.</li>
<li><a data-error-text="Failed to load issue title" data-id="209323681" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/csharplang/issues/164" data-hovercard-type="issue" data-hovercard-url="/dotnet/csharplang/issues/164/hovercard" href="https://github.com/dotnet/csharplang/issues/164">dotnet/csharplang#164</a> and <a data-error-text="Failed to load issue title" data-id="153598385" data-permission-text="Issue title is private" data-url="https://github.com/dotnet/roslyn/issues/11159" data-hovercard-type="issue" data-hovercard-url="/dotnet/roslyn/issues/11159/hovercard" href="https://github.com/dotnet/roslyn/issues/11159">dotnet/roslyn#11159</a> are virtually equivalent to saying that the original definition of <code>sealed class</code> is good but contains one mistake.  That one mistake is that <code>sealed class</code> is excessively restrictive.</li>
<li>Some other example.  It's not my responsibility to identify all examples.</li>
</ol>
<blockquote>
<p>These kinds of updates aren't out of question,</p>
</blockquote>
<p>These kinds of updates have already been performed multiple times in the past in order to fix mistakes, or to implement improvements or new features.  But I'm not going to try to pressure you or anyone else into implementing this feature.  As always:  If you like the idea, then you're welcome to use it or a modified version of it or whatever you want.  If you don't like the idea, then you're also welcome to discard it.  <strong>Whatever you want; it's your choice.</strong>  That's how it works.  This applies to all proposals from all participants.  If you like it, use it.  If you don't like it, don't use it.</p>
<blockquote>
<p>we'd want a strong justification for doing so.</p>
</blockquote>
<p>That's understandable, but other forum participants seem to misunderstand this point.  Thus for their benefit not yours, I'll say this:  The justification is primarily your responsibility/job, not mine.  I understand that if I want something, then <em>obviously</em> the chances are better if I help staff members to do their jobs, such as by researching and providing justifications for proposals.  Thus it's helpful if I provide justifications, and I'd like to do this where possible (if time permits), but it's not my job and not my responsibility to do so.</p>
<p>The way you've said "strong justification" is reasonable, but the problem is that some non-staff forum participants frequently copy your wording and misuse or abuse it in many messages in the CoreCLR repo.  Your extreme fans want to be you so strongly that they start pretending that they <em>are</em> you.  (Indirectly pretending, not outright, and not deliberately.)  They start copying your wording, tone of authority, etc.  A typical extreme fan tends to unconsciously mislead other forum participants into believing that he (the fan) has a very high status or that he is an official spokesperson of the .NET Foundation or Microsoft, when in reality he is merely just another random participant of the forum with equal status as the other participants.</p>
<p>Extreme fans tend to drive away "normal" (non-extreme) participants of forums/repos.  The demographic of the repo changes to mainly a group of co-dependent extreme fans, and many or most of the "normal" participants are driven away.  "Normal" participants typically don't have the very large amount of patience necessary to deal with extreme fans.</p>
<p>Extreme fans aren't bad people.  They're actually good people who do bad things without knowing it.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzk1NDEwNg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzk1NDEwNg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzk1NDEwNg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527954106">
    <div>
      

  

<details data-body-version="d41a4fe52a2d3af5c33ddaf3b9933c13">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="d41a4fe52a2d3af5c33ddaf3b9933c13" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Many .NET Foundation forum participants are fans of <a data-hovercard-type="user" data-hovercard-url="/users/MadsTorgersen/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/MadsTorgersen">@MadsTorgersen</a>; he's their idol; so let's learn something wise from Mads.  Normally Mads does not give "Thumbs Down" <g-emoji alias="-1" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44e.png"></g-emoji> to any message without posting an explanation of his reasons.  Why?  Three reasons:</p>
<ol>
<li>He doesn't do it because it is <strong>impolite</strong>.</li>
<li>He is a mature adult in terms of his mind, regardless of his physical age. (Mental maturity and physical maturity are independent of each other.)</li>
<li>He wishes to behave in a professional manner.</li>
</ol>
<p>At the time of writing this message, approx 10 people have given "Thumbs Down" <g-emoji alias="-1" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44e.png"></g-emoji> in this issue, without posting anything to explain their opinion or reasons.  Not even one single sentence; just a "Thumbs Down" alone!  This usage of "Thumbs Down" is actually impolite and fits poorly with the <strong>Code of Conduct</strong>.  A very good reason exists to explain why it is impolite.  It is impolite because it is approximately equivalent to saying something along the lines of:</p>
<blockquote>
<p>"I'm so important and my status is so extremely high that I don't need to bother explaining anything.  Simply my disapproval alone is sufficient.  My opinion has large weight regardless of whether I state my reasons or not.  I'm like a king and kings don't have to explain their reasons."</p>
</blockquote>
<p>Although it's quite bad to behave similar to the above, people who use "Thumbs Down" impolitely are still good people -- their bad behavior is unintentional.  It's all an accidental misunderstanding.  It's not their fault.  It's the fault of the schools and universities:  Many schools and universities fail to teach the essential topics of life and work.  Many assign extraordinarily high priority to low-priority topics and ignore the essentials, and they unethically force students against their will to learn these low-priority topics instead of the essentials.   Thus I don't blame people for using "Thumbs Down" in an impolite manner.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzk3MzQ5NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyNzk3MzQ5NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyNzk3MzQ5NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/Clockwork-Muse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Clockwork-Muse"><img height="40" width="40" alt="@Clockwork-Muse" src="https://avatars1.githubusercontent.com/u/5569508?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-527973494">
    <div>
      

  

<details data-body-version="c76fbfa7c95633d222d9d1e82df977b0">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c76fbfa7c95633d222d9d1e82df977b0" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<ol>
<li>In <a data-error-text="Failed to load issue title" data-id="450424242" data-permission-text="Issue title is private" data-url="https://github.com/microsoft/microsoft-ui-xaml/issues/780" data-hovercard-type="issue" data-hovercard-url="/microsoft/microsoft-ui-xaml/issues/780/hovercard" href="https://github.com/microsoft/microsoft-ui-xaml/issues/780">microsoft/microsoft-ui-xaml#780</a> unsealing is described as a "longstanding request from our community", thus the community does view it as a significant problem when they're prevented from making derived classes.</li>
</ol>
</blockquote>
<p>Unfortunately, I don't think that issue really helps sell your point.  That's focused on one library/framework, where it was believed that the general design of the library was too restrictive.  As that issue points out, it's not just a matter of removing <code>sealed</code> - you want to do some other work to make things behave properly (this is the justification for the rule "design for inheritance, or prohibit it").  Even then, the issue points out they may not want to unseal everything.  The general advice of "you need to tweak your design" isn't invalidated here.<br>
However, from what I've read of your proposal so far, <em>none of the things you've proposed would actually help users of that library</em>.  You can't override existing methods, or otherwise change any existing behavior - the library would have to behave exactly the same (ExtensionEverything is also in the same boat - it doesn't provide new behavior to existing libraries).</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAwMzczMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAwMzczMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyODAwMzczMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-528003732">
    <div>
      

  

<details data-body-version="e26c3351d9490dfad217ad4966989078">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e26c3351d9490dfad217ad4966989078" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/GSPP/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/GSPP">@GSPP</a> wrote:</p>
<blockquote>
<p>It's better to wrap/compose.</p>
</blockquote>
<p>Thanks for your legitimate critique.  I have to disagree but I still appreciated your critique anyway.  The reason I disagree is because of the awkwardness and ongoing maintenance difficulty of manually forwarding a large quantity of members.  For more info, see the <a href="https://github.com/dotnet/coreclr/issues/26465#issuecomment-526837758">example code in my earlier reply to @svick</a>.</p>
<p><a data-hovercard-type="user" data-hovercard-url="/users/Clockwork-Muse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Clockwork-Muse">@Clockwork-Muse</a> wrote:</p>
<blockquote>
<p>from what I've read of your proposal so far, none of the things you've proposed would actually help users of that library. You can't override existing methods,</p>
</blockquote>
<p>Thank you too for your legitimate critique.  I think you're raising an important point, and this could mean that the current version of my idea/proposal is still excessively restrictive.  I mentioned that <code>sealed class</code> is excessively restrictive.  This means, if my idea/proposal is still too restrictive, then the proposal fails to adequately solve the problem of <code>sealed class</code> being excessively restrictive.  Therefore maybe the proposal should be modified to further reduce the restrictions of <code>sealed class</code>, or otherwise brainstorm about potential solutions.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAyODAwOA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAyODAwOA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyODAyODAwOA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-528028008">
    <div>
      

  

<details data-body-version="8806a7923c55b2831d6901bbbdd948a6">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="8806a7923c55b2831d6901bbbdd948a6" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/Clockwork-Muse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Clockwork-Muse">@Clockwork-Muse</a> -- I just thought of a reason why your good point may have to be modified as follows:</p>
<p><del>none of the things you've proposed would actually help users of that library.  You can't override existing methods</del><br>
<em>The things you've proposed would not help ALL users of that library, but it would help a certain percentage of them.  You can't override existing methods, but you can subscribe to events, and implement new interfaces, and add useful new properties, etc.</em></p>
<p>The following example demonstrates how the problem would indeed be solved for X% of the library users, but not all users, depending on their particular needs.  The following class doesn't override any <code>virtual</code> members, but nevertheless succeeds in achieving the goal of making a derived class of <code>TextBlock</code> (sealed) that auto-shrinks the font size when the <code>TextBlock</code> is resized to a smaller size.  Furthermore, it also succeeds in its goal of adding support for a fictional interface <code>IConvertibleToRichText</code> that allows objects or UI elements to be converted to <code>RichEditTextDocument</code>.</p>
<pre><code>class MyExtendedTextBlock : Windows.UI.Xaml.Controls.TextBlock, IConvertibleToRichText
{
    public MyTextBlock()
    {
        // Subscribe to public event "SizeChanged" defined in a base class:
        base.SizeChanged += this.OnSizeChanged;
    }

    private void OnSizeChanged(object sender, SizeChangedEventArgs e)
    {
        if (this.IsAutoShrink)
            base.FontSize = XXXXX;
    }

    public bool IsAutoShrink { get { ... } set { ... } }

    RichEditTextDocument IConvertibleToRichText.ConvertToRichText()
    {
        return XXXXX;
    }
}
</code></pre>
<p>Even with this new knowledge, my previous reply is still valid:  I still think <a data-hovercard-type="user" data-hovercard-url="/users/Clockwork-Muse/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Clockwork-Muse">@Clockwork-Muse</a> raised an important point (even if not 100% accurate), and it's still worthwhile to consider further reducing the restrictions, further than the current version of my proposal.  Currently the proposal does solve the problem for X% of the library users, but if the restrictions are even further reduced (if possible), then this X% can be further increased.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAzODQzNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODAzODQzNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyODAzODQzNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-528038437">
    <div>
      

  

<details data-body-version="9b5483a44d8f2fdf1b44c83db5b87f02">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="9b5483a44d8f2fdf1b44c83db5b87f02" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/scalablecory/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/scalablecory">@scalablecory</a> wrote:</p>
<blockquote>
<p>Presumably we could update them to be backward-compatible, but it seems like an error-prone update and I'm not confident we could solve every case ...</p>
</blockquote>
<p>You're in a better position than I to estimate the amount of work required to implement the fix for <code>sealed class</code>, but here is an idea that could reduce the difficulty of the work, and improve the reliability.  When a sealed class such as the following is encountered...</p>
<pre><code>class MyBaseClass
{
    public virtual void Method1() { }
    public virtual void Method2() { }
    public virtual void Method3() { }
}

sealed class MySealedDerivedClass : MyBaseClass
{
    public override void Method1() { }
    public override void Method2() { }
    public override void Method3() { }
}
</code></pre>
<p>...treat it / interpret it as a shortcut that means exactly the same as:</p>
<pre><code>class MySealedDerivedClass : MyBaseClass
{
    public sealed override void Method1() { }
    public sealed override void Method2() { }
    public sealed override void Method3() { }
}
</code></pre>
<p>Thus <code>sealed class</code> would be interpreted as a shortcut way of specifying that every member of the class is sealed.  Either way, whether <code>sealed</code> is specified at the class/type level or at the member level, it would behave the same.</p>
<p>I suspect that this technique would eliminate the "error-prone update" problem that you mentioned, BUT my guess could easily be wrong -- the internal details of CoreCLR is not my area of expertise.  So I'll defer to your opinion regarding whether or not this technique makes the work easier.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODA0MDk0Ng==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODA0MDk0Ng==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyODA0MDk0Ng==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst"><img height="40" width="40" alt="@terrajobst" src="https://avatars0.githubusercontent.com/u/5169960?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-528040946">
    <div>
      

  

<details data-body-version="530e424c61c61f44cff1ab62298838e9">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="530e424c61c61f44cff1ab62298838e9" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode">@verelpode</a></p>
<p>Thank for your suggestion.</p>
<blockquote>
<p>Various usage cases exist where it is desirable to extend sealed classes. This is already partially supported by the preexisting "extension methods" feature in C#, but it is rather limited.</p>
</blockquote>
<p>I think you're onto something here; in the past we have proposed "extension everything" which we recently discussed in the C# language design and concluded that this isn't the direction we feel worth pursuing because even in that world, expressiveness and composability would still be limited and the cost for the feature would be quite high.</p>
<p>Instead, if we're doing something, we're likely going to do something more useful (e.g. protocols, traits...).</p>
<p>Quite frankly, I feel like your suggestion here is also somewhat fighting the symptoms more than actually advancing expressiveness/extensibility.</p>
<p>Subclassing, while certainly useful, doesn't always work because you don't always control the instantiation. Extension methods don't suffer from that but it also means you can't override existing members and modifying behavior.</p>
<p>Futhermore, even if we were to relax <code>sealed</code> types in the way you propose you very often still wouldn't be able to derive because in many cases the type doesn't expose the right public constructors or even any constructors.</p>
<p>A few reason why the relaxation wouldn't work for us:</p>
<p>Today, sealed means the runtime can safely assume that throughout the lifetime of the process this type cannot have any derived types. This allows for optimizations that otherwise would be hard/impossible to do. This also means relaxing the rules will likely have a bug tail through the ecosystem of tools (compilers, runtime, JIT, GC, profilers etc). The cost is likely higher than you think.</p>
<blockquote>
<p>The subclass can implement any new interfaces that are NOT implemented in the sealed base class.</p>
</blockquote>
<p>This particular property cannot be safely enforced over time. Consider if V1 of the platform ships as follows:</p>
<div><pre><span>public</span> <span>sealed</span> <span>class</span> <span>Foo</span> : <span>IFoo</span>
{
	...
}</pre></div>
<p>You'd now be able to derive as follows:</p>
<div><pre><span>class</span> <span>MyBar</span> : <span>Foo</span>, <span>ISomethingElse</span>
{
	...
}</pre></div>
<p>Now assume in V2 the platform starts implementing <code>ISomethingElse</code> on <code>Foo</code>. Your invariant no longer holds.</p>
<p>The reason why we seal types is precisely to <em>limit</em> extension points so that we have more degrees of freedom to evolve the platform without breaking upstream consumers.</p>
<p>And lastly, your example is about WinRT. In that case, <code>sealed</code> isn't  a .NET type system constraint, it's a WinRT/COM constraint. The WinRT team has mentioned before that they could make their system less rigid and allow more classes to be unsealed, but this would be an unrelated work item. However, this might be your best angle to address your immediate needs.</p>
<p>Because of all of this, I'm afraid I don't see a future where we'd follow your suggestion, which is why I'm closing this.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


  
  


  
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODA1MjIyNQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUyODA1MjIyNQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUyODA1MjIyNQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-528052225">
    <div>
      

  

<details data-body-version="c90213633986350c53f4bb05591efa86">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="c90213633986350c53f4bb05591efa86" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst">@terrajobst</a></p>
<blockquote>
<p>Because of all of this, I'm afraid I don't see a future where we'd follow your suggestion, which is why I'm closing this.</p>
</blockquote>
<p>Alright.  Thanks for considering the idea, and especially thanks for your detailed answer -- I found several of your points quite interesting from a software engineering perspective.  I plan to re-read your message again tomorrow, for my own interest in the topic.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>




    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDYwNzAwNw==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDYwNzAwNw==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMDYwNzAwNw==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris"><img height="40" width="40" alt="@zmorris" src="https://avatars0.githubusercontent.com/u/1406101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-530607007">
    <div>
      

  

<details data-body-version="7b60f490bf24fdb4e442fd8345223a2d">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="7b60f490bf24fdb4e442fd8345223a2d" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>Please reopen this issue. Currently it's impossible to implement the <a href="https://en.wikipedia.org/wiki/Observer_pattern" rel="nofollow">Observer Pattern</a> on sealed objects. Which means that it's impossible to implement <a href="https://en.wikipedia.org/wiki/Reactive_programming" rel="nofollow">Reactive Programming</a> on sealed objects. This excludes a large swath of modern programming practices in C# because the <code>sealed</code> keyword is overused, sometimes due to valid concerns, but often due to rumors of "best practices" or other cargo culting, especially by inexperienced developers.</p>
<p>We either need an <code>unseal</code> keyword or to deprecate the <code>sealed</code> keyword.</p>
<p>I'm interested in furthering this cause in other ways, perhaps via petition or contributing to the C# runtime, if anyone has any suggestions.</p>
<hr>
<p>This is more of a formal proof than an issue. Here is some background:</p>
<p>I'm learning Unity 3D and just hit a blocker due to the C# <code>sealed</code> keyword. Many of its classes like <code>Mesh</code> are sealed:</p>
<p><a href="https://github.com/Unity-Technologies/UnityCsReference/blob/master/Runtime/Export/Graphics/Mesh.cs#L19">https://github.com/Unity-Technologies/UnityCsReference/blob/master/Runtime/Export/Graphics/Mesh.cs#L19</a></p>
<p>I was writing a plugin as a script that could be attached to a game object that would override the way that Meshes are drawn. In order to do that, I need to run a function that updates metadata if a mesh's vertices change. This is in order to avoid the use of geometry shaders on old or mobile hardware. I was going to inherit from the <code>Mesh</code> class and override the setters so that they trigger an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.inotifypropertychanged" rel="nofollow">INotifyPropertyChanged</a> callback if any of the vertices, triangles or other arrays change within the mesh.</p>
<p>That way during the object's <code>Start()</code> phase, I could set the object's <a href="https://github.com/Unity-Technologies/UnityCsReference/blob/f50ab75c509cab05254e0ff2f06eb74f5ecd30da/Runtime/Export/Graphics/GraphicsComponents.bindings.cs#L127">MeshFilter.mesh</a> to be my child class and detect if any changes are made to the object's mesh. That way my plugin script could update its metadata automatically, rather than relying on the developer to manually alert me anytime that mesh data is changed (which isn't future-proof, because it's inevitable that some developer down the road will forget to do it).</p>
<p>On top of that, the <code>sealed</code> keyword is merely security theater, because internally the runtime still maintains the v table for the object's methods (I'm borrowing from C++ terminology here, apologies if it's not an exact description). It's possible to swap out the method's function pointer at runtime, but that requires the <code>unsafe</code> keyword:</p>
<p><a rel="nofollow" href="https://stackoverflow.com/questions/7299097/dynamically-replace-the-contents-of-a-c-sharp-method">https://stackoverflow.com/questions/7299097/dynamically-replace-the-contents-of-a-c-sharp-method</a></p>
<p>I've investigated every way to possibly to do this on loaded code at runtime and have come up short. Some keywords: <a href="http://www.castleproject.org/projects/dynamicproxy/" rel="nofollow">Castle Dynamic Proxy</a>, <a href="https://github.com/pardeike/Harmony">Harmony</a>, <a href="https://www.mono-project.com/docs/tools+libraries/libraries/Mono.Cecil/" rel="nofollow">Cecil</a>, <a href="https://www.postsharp.net/" rel="nofollow">PostSharp</a>.</p>
<p>I think that the <code>sealed</code> keyword is an anti-pattern because it breaks object-oriented inheritance. Microsoft probably used it as a way to avoid the troubles with name mangling on libraries when class implementations or versions change (as encountered in C++). In other words, the concept of preventing inheritance as a way of enforcing <code>has-a</code> rather than <code>is-a</code> design patterns in developer teams was conflated with the concept of freezing an interface (something like the <code>final</code> keyword in Java).</p>
<p>I've lost (conservatively) two weeks to this. I think the friction caused by the <code>sealed</code> keyword far outweighs any perceived benefit. I tend to use abstractions derived from first principles rather than patterns, but for those in the latter camp who disagree with me, Martin Fowler has this to say about it:</p>
<p><a rel="nofollow" href="https://martinfowler.com/bliki/Seal.html">https://martinfowler.com/bliki/Seal.html</a></p>
<p>I think that the "directing attitude" he mentions has created a culture where developers feel stymied by decisions outside their control. This causes inordinate hand waving and spinning to over-engineer unnecessary solutions in order to satisfy someone else's definition of what programming should be. Being opinionated like this should be frowned upon in a programming language IMHO.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDYxMTgwNA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDYxMTgwNA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMDYxMTgwNA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst"><img height="40" width="40" alt="@terrajobst" src="https://avatars0.githubusercontent.com/u/5169960?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-530611804">
    <div>
      

  

<details data-body-version="a33c21843699bab79c3f1816ba833b9f">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="a33c21843699bab79c3f1816ba833b9f" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>With all due respect, but I don't think you understand why we're sealing types and why unsealing them won't help you. A few things:</p>
<ol>
<li>Some types are sealed because the actual layout of the type is exposed to native code and must not change. Declaring a field in a derived type would cause the system to fall apart. A good example is System.String.</li>
<li>Some types are sealed because the types are serialized through non-extensible mechanism. Declaring a field in a derived type would lose fidelity in serialization. This would break the type in some scenarios that might be intrinsic to the framework's use of said type.</li>
</ol>
<blockquote>
<p>I was writing a plugin as a script that could be attached to a game object that would override the way that Meshes are drawn. In order to do that, I need to run a function that updates metadata if a mesh's vertices change.</p>
</blockquote>
<p>Even if C#/runtime would allow you to derive from <code>Mesh</code>, you wouldn't be able to override any setters as no members on the type you referenced are virtual. You could hide them by introducing new properties but that means any code compiled against the base type would bypass your getters/setters, thus breaking your code.</p>
<blockquote>
<p>On top of that, the <code>sealed</code> keyword is merely security theater</p>
</blockquote>
<p>Sealing has nothing to do with security<sup>1</sup>. We seal to ensure consumers don't accidentally break invariants. Also, we seal in order to be able to evolve the platform without breaking people. Every extension point reduces the ability for the platform to evolve.</p>
<blockquote>
<p>Martin Fowler has this to say about it:</p>
<p><a href="https://martinfowler.com/bliki/Seal.html" rel="nofollow">https://martinfowler.com/bliki/Seal.html</a></p>
<p>I think that the "directing attitude" he mentions has created a culture where developers feel stymied by decisions outside their control.</p>
</blockquote>
<p>As someone who works on a platform that is used by millions of people and has billions of lines of code written against it: this doesn't work. If we were to make every type unsealed and and every method virtual, we wouldn't be able to evolve the platform any longer without breaking at least one popular library. Extensibility has to be designed, if anybody can tweak anything, the resulting code is very fragile.</p>
<hr>
<p><sup>1</sup>It used to when we did sandboxing on .NET Framework. We're no longer supporting code access security (CAS) or attempts to sandbox within the process using the .NET runtime.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDg1NjY5NQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDg1NjY5NQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMDg1NjY5NQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-530856695">
    <div>
      

  

<details data-body-version="308f0a7c8930228eb53629e3c1eb1534">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="308f0a7c8930228eb53629e3c1eb1534" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris">@zmorris</a> wrote:</p>
<blockquote>
<p>I'm interested in furthering this cause in other ways, perhaps via petition or contributing to the C# runtime, if anyone has any suggestions.</p>
</blockquote>
<p>Even though I opened this issue and think that the current behavior of <code>sealed class</code> isn't 100% correct, personally I still wouldn't participate in any "cause" nor petition against <code>sealed class</code>, because I feel that the .NET Foundation already suffers too much from various "causes" in one form or another, and I don't want the Foundation to suffer, therefore I wouldn't want to start or encourage yet another cause.  In general, human nature has the tendency to begin with a cause and then eventually end with something bad such as borderline harassment or even outright extremism or fanaticism.  That's why I don't participate in causes.</p>
<p>See, this is another example of the problem that I mentioned.  Battles and causes etc are more likely to be triggered (from one side or another) when extreme fans and extreme theorists run amok.  The out-of-control extremity in one faction triggers extremity in another faction that was previously non-extreme, and so forth, and the situation deteriorates more and more over time.  When extreme fans copy the tone of authority and wording of staff members, and when nobody stops them from doing that, or when silence from staff members gives them credibility, then it tends to eventually lead to derailment of a project, forum, or repo.</p>
<p>Nevertheless thanks <a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris">@zmorris</a> for the interesting link to Martin Fowler (I found his descriptions of "DirectingAttitude" and "EnablingAttitude" to be insightful and observant).  However I don't request that this issue be re-opened, and I don't think a petition is the best way in this case.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDk2ODg2MQ==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMDk2ODg2MQ==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMDk2ODg2MQ==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst"><img height="40" width="40" alt="@terrajobst" src="https://avatars0.githubusercontent.com/u/5169960?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-530968861">
    <div>
      

  

<details data-body-version="738c6d9de099aa445404530a8a1646d4">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="738c6d9de099aa445404530a8a1646d4" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode">@verelpode</a></p>
<p>Thanks for the thoughtful response. I agree that sealing everything isn't the right answer. FWIW, the FDG state that one shouldn't seal classes unless there is a reason to and while I tend to disagree with that guidance the result is that most types aren't sealed today.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMTg5MDU0MA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMTg5MDU0MA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMTg5MDU0MA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris"><img height="40" width="40" alt="@zmorris" src="https://avatars0.githubusercontent.com/u/1406101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-531890540">
    <div>
      

  

<details data-body-version="e200d5e39094eba7c9bb71ea09c808dc">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="e200d5e39094eba7c9bb71ea09c808dc" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst">@terrajobst</a> wrote:</p>
<blockquote>
<blockquote>
<p>I was writing a plugin as a script that could be attached to a game object that would override the way that Meshes are drawn. In order to do that, I need to run a function that updates metadata if a mesh's vertices change.</p>
</blockquote>
<p>Even if C#/runtime would allow you to derive from <code>Mesh</code>, you wouldn't be able to override any setters as no members on the type you referenced are virtual. You could hide them by introducing new properties but that means any code compiled against the base type would bypass your getters/setters, thus breaking your code.</p>
</blockquote>
<p>Thanks for pointing that out. With all my consternation over the <code>sealed</code> keyword, I overlooked that the <code>Mesh</code> class methods aren't <em>virtual</em> anyway. Which means (as you pointed out) that any compiled library code would use the base class methods instead of ones I might have overloaded to implement <code>INotifyPropertyChanged</code>. Which defeats the whole purpose of what I was trying to do, regardless of the <code>sealed</code> keyword.</p>
<hr>
<p>I tend to agree with your points as they stand now within the C# ecosystem. However, for posterity I wish to clarify where I was coming from, with some background from other languages:</p>
<ul>
<li>
<p>Conceptual correctness should take priority over implementation details. That's the primary reason that I think that the <code>sealed</code> keyword was a copout to mask some of the polymorphism complexities encountered by languages like C++ (such as the lack of a library name mangling convention). More work could have been done originally to ensure extensibility, even when serializing classes. Probably some kind of hash of the classes would need to be maintained, a bit like how Java gives every class implementation what basically amounts to a unique UUID, I think I'm thinking of <code>serialVersionUID</code>: <a href="https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it" rel="nofollow">https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it</a> this may very well be an open problem, but I'd like to see the big tech companies put more research dollars towards solving these puzzles rather than having thousands of developers each reinvent the wheel.</p>
</li>
<li>
<p>I'm also personally against the <code>virtual</code> keyword because I think that all class methods should be virtual by default. I wrote up a draft response to this thread comparing C# and C++ method overriding but realized that C++ also hides non-virtual base class methods if a child class overrides them. I had never noticed, because I so rarely used the <code>virtual</code> keyword in C++ that for some reason I thought that <code>virtual</code> was the default! This becomes an issue where you said it does: when compiled libraries are included with a project. If <code>virtual</code> was the default, then we could override class method behaviors globally in our applications and the libraries would know to automagically run the overridden child class methods by way of polymorphism. Instead, we tend to get stuck with canned library code that misses out on emergent behavior and use cases. Scripting languages like PHP often lean more towards the enabling attitude in this regard:</p>
<p><a href="https://stackoverflow.com/questions/1349637/correct-implementation-of-virtual-functions-in-php" rel="nofollow">https://stackoverflow.com/questions/1349637/correct-implementation-of-virtual-functions-in-php</a></p>
<p><a href="https://www.php.net/manual/en/language.oop5.final.php" rel="nofollow">https://www.php.net/manual/en/language.oop5.final.php</a></p>
<p>So in PHP, class methods are <code>virtual</code> by default but can be marked <code>final</code> similarly to in C# or Java. It probably dodges compiled code interoperability issues at runtime by way of its JIT compiling. Personally, I would have voted against the <code>final</code> keyword in PHP as well, and I have never used it.</p>
</li>
<li>
<p>Regardless of all of this, the <code>sealed</code> keyword breaks OO inheritance. <strong>Full stop.</strong> Now, we can argue about whether a designer or a user has more clout to decide what will be done with the designer's library. And you bring up valid points about being able to evolve the C# platform by ensuring that certain foundation interfaces never change. But arbitrarily saying that a class can't be inherited from another class just doesn't make sense to me, I'm sorry. If there is:</p>
<ol>
<li>
<p>No formal proof that <code>sealed</code> is the only way to maintain compiled code interoperability (serialization, invariants, etc).</p>
</li>
<li>
<p><code>Sealed</code> is not done for security reasons.</p>
</li>
<li>
<p><code>Sealed</code> can (and does) cause unintended consequences when conceptual correctness in a project is damaged by being forced to use the <code>has-a</code> instead of <code>is-a</code> architecture.</p>
</li>
</ol>
</li>
</ul>
<p>Then I'm not seeing a strong argument for keeping the <code>sealed</code> keyword. And I'm especially not seeing a strong argument for denying us an <code>unsealed</code> keyword within our own application spaces (which may break versioning, serialization, etc and require additional complexity in the C# runtime I realize).</p>
<p>The gist of my argument is that <code>sealed</code> saved Microsoft some thousands of dollars originally. It's probably saved a few million dollars by simplifying the rollout of the foundation code used by millions of people and simplifying evolving the platform as you said. But there is also an opportunity cost of untold millions of dollars in preventing the emergent behavior I mentioned, because we'll never know what might have been if people could have extended certain classes (in Unity 3D alone, as just one example) or if C# was more <code>virtual</code> so users could easily extend compiled library functionality.</p>
<p>I learned functional and reactive programming relatively late in my career, but I much prefer it to the kind of "bare hands" boilerplate-oriented imperative programming popularized by Java and largely copied by C#. Here's why that matters:</p>
<p>Since I'm denied the straightforward ability to inherit <code>Mesh</code> and implement <code>INotifyPropertyChanged</code> around the base class methods so that my renderer can observe <code>Mesh</code> array buffers changing, now I have to manually:</p>
<ul>
<li>
<p>Wrap <code>Mesh</code> in something like a <code>MyMesh</code> dynamic proxy containing a <code>MyMesh.mesh</code> protected member variable.</p>
</li>
<li>
<p>Reimplement all the setters and any methods that update <code>Mesh</code> array buffers.</p>
</li>
<li>
<p>Hand roll <code>INotifyPropertyChanged</code> (it would be better if there was a way to attach it to an allocated class instance in order to observe its changes).</p>
</li>
<li>
<p>Implement <a href="https://stackoverflow.com/questions/4769379/automatic-type-conversion-in-c-sharp" rel="nofollow">implicit cast</a> to convert <code>MyMesh</code> to <code>Mesh</code> when I need to pass it to third-party <code>Mesh</code> handling code.</p>
</li>
<li>
<p>Maybe implement the <a href="https://docs.unity3d.com/ScriptReference/Transform-hasChanged.html" rel="nofollow">Transform.hasChanged</a> pattern on <code>Mesh</code>, and remember to set the <code>Mesh.hasChanged</code> flag EVERY time I pass my <code>MyMesh</code> class to a library that may change it (which is self-evidently not future-proof). <a href="https://stackoverflow.com/a/34976295/539149" rel="nofollow">Adding setters via extension methods is not supported</a> but I might be able to <a href="https://www.codeproject.com/Articles/386911/Csharp-Easy-Extension-Properties" rel="nofollow">add a meta- property at runtime</a> of <code>Mesh.hasChanged</code>.</p>
</li>
<li>
<p>Probably implement a DEBUG phase utility function to watch for changes to <code>MyMesh.mesh</code> buffers between rendering passes and tell me "you should have set Mesh.hasChanged()" if they differ unexpectedly from the <code>Mesh.hasChanged</code> state.</p>
</li>
<li>
<p>Probably implement unit tests for sanity checking all of this (arguably needed anyway).</p>
</li>
</ul>
<p>This is all so very Java-esque. It runs the danger of making C# a toy language and almost certainly guarantees code bloat and over-engineering because no matter how hard I try here, it's <strong>impossible</strong> to make this future-proof. A single missed <code>Mesh.hasChanged = true</code> and I could have a difficult-to-reproduce bug in a deployed application. To me, this is as serious as lacking atomic intrinsics for implementing <a href="https://en.wikipedia.org/wiki/Compare-and-swap" rel="nofollow">compare-and-swap (CAS)</a>. There simply is no viable workaround to do what I need to do, and that really bothers me, especially in a compiled language.</p>
<p>Maybe I should take this up with Unity 3D and ask that any <code>sealed</code> class at the very least provide an interface and a way to cast classes implementing that interface to the original. Maybe I should write a blog post discouraging direct use of all <code>sealed</code> classes, and encourage thin wrappers over them instead. Maybe I could even write tools to audit code and detect these direct usages. The rabbit hole goes deep indeed.</p>
<p>Maybe I'm just looking at this wrong. I'm open to suggestions!</p>
<p>I'll lay off of any petitions or further belligerence at this time. Thanks everyone for your help.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMTg5NDY5NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMTg5NDY5NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMTg5NDY5NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/YairHalberstadt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/YairHalberstadt"><img height="40" width="40" alt="@YairHalberstadt" src="https://avatars1.githubusercontent.com/u/29174528?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-531894694">
    <div>
      

  

<details data-body-version="6ae4f3b63fb2619ce2200d495208bde0">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="6ae4f3b63fb2619ce2200d495208bde0" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p>The Unity developers aren't stupid, and the <code>sealed</code> keyword is not the default. If unity chose to mark <code>Mesh</code> as sealed, and not to provide an interface, I am absolutely certain that that is because of a very good reason.</p>
<p>I think the first thing to do for the purposes of this discussion is simply to find out why. That would greatly inform what a better solution to that problem would be.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMzEyNzgwMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMzEyNzgwMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMzEyNzgwMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/verelpode/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/verelpode"><img height="40" width="40" alt="@verelpode" src="https://avatars3.githubusercontent.com/u/32857007?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-533127802">
    <div>
      

  

<details data-body-version="eb962626f4a1000b3b9fb3608b817754">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="eb962626f4a1000b3b9fb3608b817754" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <p><a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris">@zmorris</a></p>
<blockquote>
<p>I think that all class methods should be virtual by default.</p>
</blockquote>
<p>When I opened this issue, I was trying to find a reasonably balanced solution, without springing to any extreme.  Isn't an <em>"Everything virtual by default"</em> proposal an extreme or radical proposal?  How difficult would it be to convince at least 3/4 of C# software developers to support an "Everything Virtual" proposal?  Isn't that almost as difficult as sending a man to the moon?</p>
<p>Imagine you had enough money to hire 50 staff members to work full-time exclusively on the "Everything Virtual" proposal for 3 years.   At the end of those 3 years, would the team of 50 be successful in convincing at least 3/4 of C# software developers to support the proposal?  I suspect you'd need to double it to 100 staff members and even then success would be very uncertain.  Thus it's an extreme proposal, isn't it?</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMzMzMTA4NA==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDUzMzMzMTA4NA==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDUzMzMzMTA4NA==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/terrajobst/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/terrajobst"><img height="40" width="40" alt="@terrajobst" src="https://avatars0.githubusercontent.com/u/5169960?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-533331084">
    <div>
      

  

<details data-body-version="af858b05a192592825338d7cec922c61">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  <div data-body-version="af858b05a192592825338d7cec922c61" data-unfurl-hide-url="/content_reference_attachments/hide">
    


    <div>

      
<task-lists disabled="" sortable="">
<div>
          <blockquote>
<p>When I opened this issue, I was trying to find a reasonably balanced solution, without springing to any extreme. Isn't an <em>"Everything virtual by default"</em> proposal an extreme or radical proposal? How difficult would it be to convince at least 3/4 of C# software developers to support an "Everything Virtual" proposal? Isn't that almost as difficult as sending a man to the moon?</p>
</blockquote>
<p>It doesn't matter IMHO. It would be a massive breaking change. For a platform with millions of developers and billions of lines of code discussions about "refactoring" core design pivots isn't useful because we won't ever be able to get the ecosystem to absorb such changes.</p>
      </div>
</task-lists>


        



    </div>

  </div>
</div>


</div>


</div>


    
  
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0MTE5ODExMg==">
  
    
<div data-gid="MDEyOklzc3VlQ29tbWVudDU0MTE5ODExMg==" data-url="/_render_node/MDEyOklzc3VlQ29tbWVudDU0MTE5ODExMg==/timeline/issue_comment">

  
<p><a data-hovercard-type="user" data-hovercard-url="/users/zmorris/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmorris"><img height="40" width="40" alt="@zmorris" src="https://avatars0.githubusercontent.com/u/1406101?s=88&amp;v=4"></a>

</p>


  
<div id="issuecomment-541198112">
    <div>
      

  

<details data-body-version="cb0843bd663d992b4b44b42d06286478">
    <summary>
      <div>
        <h3>
              This comment has been minimized.

        </h3>
        
      </div>
    </summary>
</details>


    </div>
  
</div>


</div>


</div>


    
  





<!-- Rendered timeline since 2020-01-30 23:49:00 -->



            </div>


            
          </div>

</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>