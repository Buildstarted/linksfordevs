<!DOCTYPE html>
<html lang="en">
<head>
    <title>
bulletproofs::notes::range_proof - Rust - linksfor.dev(s)    </title>
    <meta charset="utf-8">
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.min.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta property="og:title" content="bulletproofs::notes::range_proof - Rust - linksfor.dev(s)"/>
    <meta property="og:description" content="API documentation for the Rust `range_proof` mod in crate `bulletproofs`."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#combining-inner-products"/>

<meta property="og:site_name" content="linksfor.dev(s)" />
</head>
<body>
    <div class="devring" style="background: #222">
        <div style="text-align:center">Explore other dev related sites in this ring. If you would like to join this ring <a href="https://devring.club">click here</a>.</div>
        <div class="grid">
            <div style="display: grid; grid-template-columns: .5fr 1fr 1fr 1fr; text-align: center;">
                <span class="devring-title"><a href="https://devring.club/">devring.club</a></span>
                <a href="https://devring.club/sites/1/prev" class="devring-previous">Previous</a>
                <a href="https://devring.club/random" class="devring-random">Random</a>
                <a href="https://devring.club/sites/1/next" class="devring-next">Next</a>
            </div>
        </div>
    </div>
    <div class="grid">
        <h1 style="margin: unset">
<a href="/" style="color:inherit">linksfor.dev(s)</a>
        </h1>
        <title>linksfor.dev(s) - bulletproofs::notes::range_proof - Rust</title>
<div class="readable">
        <h1>bulletproofs::notes::range_proof - Rust</h1>
            <div>Reading time: 34-43 minutes</div>
        <div>Posted here: 09 Aug 2020</div>
        <p><a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#combining-inner-products">https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#combining-inner-products</a></p>
        <hr/>
<div id="readability-page-1" class="page"><div><p>This module contains notes on how and why range proofs work.</p>

<p>The goal of a <em>range proof</em> is for a prover to convince a verifier
that a particular value <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span> lies within a valid range, without revealing
any additional information about the value <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span>.</p>
<p>The prover begins with a secret value <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span> and commitment
<span><span><span><math><semantics><mrow><mi>V</mi><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V = \operatorname{Com}(v)</annotation></semantics></math></span></span></span>, which it sends to the verifier. The prover
wishes to convince the verifier that
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>v</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>∈</mo><mo>[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
v &amp;\in [0, 2^{n}) 
\end{aligned}
</annotation></semantics></math></span></span></span></span>
without revealing <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span>.</p>
<p>Since the prover will eventually use an inner product proof to do this,
we want to work towards expressing this condition
in terms of a single inner product. In this section, we construct
successive statements which imply <span><span><span><math><semantics><mrow><mi>v</mi><mo>∈</mo><mo>[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">v \in [0,2^{n})</annotation></semantics></math></span></span></span>
until we arrive at the ones the prover will use to convince
the verifier.</p>

<p>Let <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}</annotation></semantics></math></span></span></span> be the vector of bits of <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span>.
Then <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span> can be represented as an inner product of bits <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}</annotation></semantics></math></span></span></span>
and powers of two <span><span><span><math><semantics><mrow><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>=</mo><mo>(</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{2}}^{n} = (1,2,4,\ldots,2^{n-1})</annotation></semantics></math></span></span></span>:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>v</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⋅</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
v &amp;= {\langle {\mathbf{a}}, {\mathbf{2}}^{n} \rangle}  \\
&amp;= a_{0}\cdot 2^0 + \dots + a_{n-1}\cdot 2^{n-1}.
\end{aligned}
</annotation></semantics></math></span></span></span></span>
We need <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}</annotation></semantics></math></span></span></span> to be a vector of integers <span><span><span><math><semantics><mrow><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">\{0,1\}</annotation></semantics></math></span></span></span>.
This can be expressed with an additional condition
<span><span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>∘</mo><mo>(</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">
{\mathbf{a}} \circ ({\mathbf{a}} - {\mathbf{1}}) = {\mathbf{0}},
</annotation></semantics></math></span></span></span></span>
where <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">x</mi></mrow></mrow><mo>∘</mo><mrow><mrow><mi mathvariant="bold">y</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{x}} \circ {\mathbf{y}}</annotation></semantics></math></span></span></span> denotes the entry-wise multiplication of two vectors.
The result of multiplication can be all-zero if and only if every bit is actually <span><span><span><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span></span></span> or<sup id="fnref1"><a href="#fn1">1</a></sup> <span><span><span><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span></span></span>.</p>
<p>As a result of representing value in binary, the range condition <span><span><span><math><semantics><mrow><mi>v</mi><mo>∈</mo><mo>[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">v \in [0, 2^{n})</annotation></semantics></math></span></span></span>
is equivalent to the pair of conditions
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>v</mi><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>∘</mo><mo>(</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{a}}, {\mathbf{2}}^{n} \rangle} &amp;= v,  \\
{\mathbf{a}} \circ ({\mathbf{a}} - {\mathbf{1}}) &amp;= {\mathbf{0}}.
\end{aligned}
</annotation></semantics></math></span></span></span></span>
We will
eventually need to make separate commitments to the vectors
<span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}} - {\mathbf{1}}</annotation></semantics></math></span></span></span>, so we set
<span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>=</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L} = {\mathbf{a}}</annotation></semantics></math></span></span></span>,
<span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>=</mo><mrow><mrow><mi mathvariant="bold">a</mi></mrow></mrow><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R} = {\mathbf{a}} - {\mathbf{1}}</annotation></semantics></math></span></span></span> to obtain
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>v</mi><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{a}}_{L}, {\mathbf{2}}^{n} \rangle} &amp;= v, \\
{\mathbf{a}}_{L} \circ {\mathbf{a}}_{R} &amp;= {\mathbf{0}}, \\
({\mathbf{a}}_{L} - {\mathbf{1}}) - {\mathbf{a}}_{R} &amp;= {\mathbf{0}}.
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>The statements above are statements about vectors, or equivalently, a
vector of statements about each entry. We want to combine all of these
into a single statement.</p>
<p>First, we will combine each of the two vector-statements into a single statement.
Since <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">b</mi></mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{b}} = {\mathbf{0}}</annotation></semantics></math></span></span></span> if and only
if<sup id="fnref2"><a href="#fn2">2</a></sup> <span><span><span><math><semantics><mrow><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">b</mi></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">{\langle {\mathbf{b}}, {\mathbf{y}}^{n} \rangle} = 0</annotation></semantics></math></span></span></span> for every <span><span><span><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span></span></span>,
the statements above are implied by
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>v</mi><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0</mn><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{a}}_{L}, {\mathbf{2}}^{n} \rangle} &amp;= v, \\
{\langle {\mathbf{a}}_{L} - {\mathbf{1}} - {\mathbf{a}}_{R}, {\mathbf{y}}^{n} \rangle} &amp;= 0, \\
{\langle {\mathbf{a}}_{L}, {\mathbf{a}}_{R} \circ {\mathbf{y}}^{n} \rangle} &amp;= 0
\end{aligned}
</annotation></semantics></math></span></span></span></span>
for the verifier’s choice of a challenge value <span><span><span><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span></span></span>.</p>
<p>The three resulting statements can then be combined in the same way,
using the verifier’s choice of <span><span><span><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span></span></span>:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
z^{2} v 
&amp;= 
z^{2} {\langle {\mathbf{a}}_{L}, {\mathbf{2}}^{n} \rangle} 
+ z {\langle {\mathbf{a}}_{L} - {\mathbf{1}} - {\mathbf{a}}_{R}, {\mathbf{y}}^{n} \rangle} 
+   {\langle {\mathbf{a}}_{L}, {\mathbf{a}}_{R} \circ {\mathbf{y}}^{n} \rangle} 
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>Finally, we want to combine these terms into a single inner product. Our
goal is to rearrange the inner product above so that terms
involving <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L}</annotation></semantics></math></span></span></span> appear only on the left-hand side, terms
involving <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R}</annotation></semantics></math></span></span></span> appear only on the right-hand side, and
non-secret terms (which the verifier can compute on its own) are
factored out into a new term <span><span><span><math><semantics><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\delta(y, z) </annotation></semantics></math></span></span></span>.</p>
<p>First, break the statement into simpler terms, then rearrange:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
z^2 v
&amp;= 
z^2 {\langle {\mathbf{a}}_{L}, {\mathbf{2}}^n \rangle}
+ z {\langle {\mathbf{a}}_{L}, {\mathbf{y}}^n \rangle}
- z {\langle {\mathbf{a}}_{R}, {\mathbf{y}}^n \rangle}
- z {\langle {\mathbf{1}}, {\mathbf{y}}^n \rangle}
+ {\langle {\mathbf{a}}_{L}, {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
\\
z^{2} v 
+ z {\langle {\mathbf{1}}, {\mathbf{y}}^{n} \rangle}
&amp;= 
z^2 {\langle {\mathbf{a}}_{L}, {\mathbf{2}}^n \rangle}
+ z {\langle {\mathbf{a}}_{L}, {\mathbf{y}}^n \rangle}
- z {\langle {\mathbf{1}} , {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
+ {\langle {\mathbf{a}}_{L}, {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
\\
z^{2} v 
+ z {\langle {\mathbf{1}}, {\mathbf{y}}^{n} \rangle}
&amp;= 
{\langle {\mathbf{a}}_{L}, z^{2} {\mathbf{2}}^n \rangle}
+ {\langle {\mathbf{a}}_{L}, z {\mathbf{y}}^n \rangle}
+ {\langle -z {\mathbf{1}} , {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
+ {\langle {\mathbf{a}}_{L}, {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
\\
z^{2} v 
+ z {\langle {\mathbf{1}}, {\mathbf{y}}^{n} \rangle}
&amp;= 
{\langle {\mathbf{a}}_{L}, z^{2} {\mathbf{2}}^n + z {\mathbf{y}}^{n} + {\mathbf{a}}_{R} \circ {\mathbf{y}}^{n} \rangle}
+ {\langle -z {\mathbf{1}} , {\mathbf{a}}_{R} \circ {\mathbf{y}}^n \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span>
To combine the terms on the right-hand side, add
<span><span><span><math><semantics><mrow><mrow><mo>⟨</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">{\langle -z {\mathbf{1}}, z^2 {\mathbf{2}}^n + z {\mathbf{y}}^n \rangle}</annotation></semantics></math></span></span></span>
to each side, then simplify:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><mrow><mo>⟨</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mrow><mo>⟨</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>+</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>∘</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
z^{2} v 
+ z {\langle {\mathbf{1}}, {\mathbf{y}}^{n} \rangle}
- {\langle z {\mathbf{1}}, z^2 {\mathbf{2}}^n + z {\mathbf{y}}^n \rangle}
&amp;= 
{\langle {\mathbf{a}}_{L}, z^{2} {\mathbf{2}}^n + z {\mathbf{y}}^{n} + {\mathbf{a}}_{R} \circ {\mathbf{y}}^{n} \rangle} 
\\
&amp;+ {\langle -z {\mathbf{1}} , z^2 {\mathbf{2}}^n + z {\mathbf{y}}^n + {\mathbf{a}}_{R} \circ {\mathbf{y}}^n  \rangle}
\\
z^2 v 
+ (z - z^2) {\langle {\mathbf{1}}, {\mathbf{y}}^n \rangle} 
- z^3 {\langle {\mathbf{1}}, {\mathbf{2}}^n \rangle}
&amp;= 
{\langle {\mathbf{a}}_{L} - z{\mathbf{1}}, z^{2} {\mathbf{2}}^n + z {\mathbf{y}}^{n} + {\mathbf{a}}_{R} \circ {\mathbf{y}}^{n} \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span>
Combining all non-secret terms outside the inner product
<span><span><span><span><math><semantics><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">
\delta(y,z) = (z - z^{2}) {\langle {\mathbf{1}}, {\mathbf{y}}^{n} \rangle} - z^{3} {\langle {\mathbf{1}}, {\mathbf{2}}^{n} \rangle},
</annotation></semantics></math></span></span></span></span>
we finally obtain
<span><span><span><span><math><semantics><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">
z^{2}v + \delta(y,z) = {\langle {\mathbf{a}}_{L} - z {\mathbf{1}}, {\mathbf{y}}^{n} \circ ({\mathbf{a}}_{R} + z {\mathbf{1}}) + z^{2} {\mathbf{2}}^{n} \rangle}. 
</annotation></semantics></math></span></span></span></span>
This is equivalent to the original inner-product equation, but has a single
inner product with <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L}</annotation></semantics></math></span></span></span> on the left, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R}</annotation></semantics></math></span></span></span> on
the right, and non-secret terms factored out. Let's call the left-hand side of the single inner product equation "unblinded" <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{l}(x)}</annotation></semantics></math></span></span></span> and the right-hand side "unblinded" <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{r}(x)}</annotation></semantics></math></span></span></span>, such that 
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>unblinded&nbsp;</mtext><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>unblinded&nbsp;</mtext><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><mtext>unblinded&nbsp;</mtext><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mtext>unblinded&nbsp;</mtext><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{unblinded } \mathbf{l}(x) &amp;= {\mathbf{a}}_{L} - z {\mathbf{1}} \\
\text{unblinded } \mathbf{r}(x) &amp;= {\mathbf{y}}^{n} \circ ({\mathbf{a}}_{R} + z {\mathbf{1}}) + z^{2} {\mathbf{2}}^{n} \\
z^{2}v + \delta(y,z) &amp;= {\langle \text{unblinded } \mathbf{l}(x), \text{unblinded } \mathbf{r}(x) \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>The prover cannot send the left and right vectors in
the single inner-product equation (unblinded <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{l}(x)}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{r}(x)}</annotation></semantics></math></span></span></span>) to the verifier without revealing information
about the value <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span>, and since the inner-product argument is not
zero-knowledge, they cannot be used there either.</p>
<p>Instead, the prover chooses vectors of blinding factors
<span><span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mspace width="0.277778em"></mspace><mrow><mover><mo stretchy="true">←</mo><mrow><mi mathvariant="normal">$</mi></mrow></mover></mrow><mspace width="0.277778em"></mspace><msup><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub><mi>n</mi></msup><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">
{\mathbf{s}}_{L}, {\mathbf{s}}_{R} \;{\xleftarrow{\$}}\; {\mathbb Z_p}^{n},
</annotation></semantics></math></span></span></span></span>
and uses them to construct blinded vector polynomials from the unblinded vector polynomials <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{l}(x)}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{r}(x)}</annotation></semantics></math></span></span></span>:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>1</mn></msub><mi>x</mi><mo>=</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub><mi>x</mi><mo>)</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∈</mo><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><mo>[</mo><mi>x</mi><msup><mo>]</mo><mi>n</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>1</mn></msub><mi>x</mi><mo>=</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><mrow><mo fence="true">(</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mi>x</mi><mo fence="true">)</mo></mrow><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∈</mo><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><mo>[</mo><mi>x</mi><msup><mo>]</mo><mi>n</mi></msup></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\mathbf{l}}(x) &amp;= {\mathbf{l}}_{0} + {\mathbf{l}}_{1} x = ({\mathbf{a}}_{L} + {\mathbf{s}}_{L} x) - z {\mathbf{1}} &amp; \in {\mathbb Z_p}[x]^{n}  \\
{\mathbf{r}}(x) &amp;= {\mathbf{r}}_{0} + {\mathbf{r}}_{1} x = {\mathbf{y}}^{n} \circ \left( ({\mathbf{a}}_{R} + {\mathbf{s}}_{R} x\right)  + z {\mathbf{1}}) + z^{2} {\mathbf{2}}^{n} &amp;\in {\mathbb Z_p}[x]^{n} 
\end{aligned}
</annotation></semantics></math></span></span></span></span>
The "blinded" <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> have <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L}</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R}</annotation></semantics></math></span></span></span> replaced by blinded terms <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub><mi>x</mi></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L} + {\mathbf{s}}_{L} x</annotation></semantics></math></span></span></span>,
<span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mi>x</mi></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R} + {\mathbf{s}}_{R} x</annotation></semantics></math></span></span></span>. The <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{0}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{0}</annotation></semantics></math></span></span></span> terms represent the degree-zero terms of the polynomial with respect to <span><span><span><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span></span></span>, and the <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{1}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{1}</annotation></semantics></math></span></span></span> terms represent the degree-one terms. Notice that since only the
blinding factors <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{s}}_{L}</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{s}}_{R}</annotation></semantics></math></span></span></span> are multiplied
by <span><span><span><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span></span></span>, the vectors <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{0}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{0}</annotation></semantics></math></span></span></span> are
exactly the left and right sides of the unblinded single inner-product:
<span><span><span><span><math><semantics><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub><mo>⟩</mo></mrow><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">
{\langle {\mathbf{l}}_{0}, {\mathbf{r}}_{0} \rangle} = z^{2}v + \delta(y,z)
</annotation></semantics></math></span></span></span></span></p>
<p>Setting
<span><span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow><mo>=</mo><msub><mi>t</mi><mn>0</mn></msub><mo>+</mo><msub><mi>t</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>t</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">
t(x) = {\langle {\mathbf{l}}(x), {\mathbf{r}}(x) \rangle} = t_{0} + t_{1} x + t_{2} x^{2}, 
</annotation></semantics></math></span></span></span></span>
we can express the coefficients of <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> using Karatsuba’s method:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub><mo>⟩</mo></mrow><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>t</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>1</mn></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>1</mn></msub><mo>⟩</mo></mrow><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>t</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mn>1</mn></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mn>1</mn></msub><mo>⟩</mo></mrow><mo>−</mo><msub><mi>t</mi><mn>0</mn></msub><mo>−</mo><msub><mi>t</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t_{0} &amp;= {\langle {\mathbf{l}}_{0}, {\mathbf{r}}_{0} \rangle},  \\
t_{2} &amp;= {\langle {\mathbf{l}}_{1}, {\mathbf{r}}_{1} \rangle},  \\
t_{1} &amp;= {\langle {\mathbf{l}}_{0} + {\mathbf{l}}_{1}, {\mathbf{r}}_{0} + {\mathbf{r}}_{1} \rangle} - t_{0} - t_{2} 
\end{aligned}
</annotation></semantics></math></span></span></span></span>
Since <span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mn>2</mn><mi>n</mi></msup><mo>⟩</mo></mrow><mo separator="true">,</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t_{0} &amp;= {\langle {\mathbf{a}}_{L} - z {\mathbf{1}}, {\mathbf{y}}^{n} \circ ({\mathbf{a}}_{R} + z {\mathbf{1}}) + z^{2} 2^{n} \rangle},\end{aligned}
</annotation></semantics></math></span></span></span></span>
for the prover to convince the verifier that the unblinded single inner-product equation
holds, it’s enough to prove that the constant term <span><span><span><math><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_{0}</annotation></semantics></math></span></span></span> of <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> is
<span><span><span><math><semantics><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">z^{2} v + \delta(y,z)</annotation></semantics></math></span></span></span>, and that
this <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> is the correct polynomial.
Proving that <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> is correct means proving that
<span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> are correctly formed, and that
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">t(x) = {\langle {\mathbf{l}}(x), {\mathbf{r}}(x) \rangle}</annotation></semantics></math></span></span></span>.</p>

<p>In order to prove that the constant term of <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> is
<span><span><span><math><semantics><mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">z^{2} v + \delta(y,z)</annotation></semantics></math></span></span></span>, the prover first forms a commitment to the
coefficients of <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span>, then convinces the verifier that these commit to
the correct <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> by evaluating the polynomial at a challenge point
<span><span><span><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span></span></span>.</p>
<p>The prover has already used <span><span><span><math><semantics><mrow><mi>V</mi><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V = \operatorname{Com}(v)</annotation></semantics></math></span></span></span> to commit to <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span>
(and hence to <span><span><span><math><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_{0}</annotation></semantics></math></span></span></span>), so the prover forms commitments
<span><span><span><math><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">T_{1} = \operatorname{Com}(t_{1})</annotation></semantics></math></span></span></span> and
<span><span><span><math><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mi>t</mi><mn>2</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">T_{2} = \operatorname{Com}(t_{2})</annotation></semantics></math></span></span></span>, then sends these to the verifier.
The commitments <span><span><span><math><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">T_{1}</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">T_{2}</annotation></semantics></math></span></span></span> are related to each other and to
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> by the following diagram:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mi>B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>x</mi><msub><mi>t</mi><mn>1</mn></msub><mi>B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>x</mi><mn>2</mn></msup><msub><mi>t</mi><mn>2</mn></msub><mi>B</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>z</mi><mn>2</mn></msup><mrow><mover accent="true"><mrow><mi>v</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>0</mn><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>x</mi><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mn>1</mn></msub><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>x</mi><mn>2</mn></msup><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mn>2</mn></msub><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∥</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>z</mi><mn>2</mn></msup><mi>V</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>x</mi><msub><mi>T</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>x</mi><mn>2</mn></msup><msub><mi>T</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) B                     &amp;\quad &amp;= \quad &amp; z^{2}vB                     &amp; \quad &amp;+ \quad &amp; \delta(y,z) B  &amp; \quad &amp;+ \quad&amp; x t_{1} B                     &amp;\quad &amp;+\quad &amp; x^2 t_{2} B \\
+                        &amp;\quad &amp;  \quad &amp;  +                          &amp; \quad &amp;  \quad &amp;  +             &amp; \quad &amp;  \quad&amp; +                             &amp;\quad &amp; \quad &amp; +   \\
{\tilde{t}}(x) {\widetilde{B}} &amp;\quad &amp;= \quad &amp; z^2 {\widetilde{v}} {\widetilde{B}} &amp; \quad &amp;+ \quad &amp; 0 {\widetilde{B}}  &amp; \quad &amp;+ \quad&amp; x {\tilde{t}}_{1} {\widetilde{B}} &amp;\quad &amp;+\quad &amp; x^{2} {\tilde{t}}_{2} {\widetilde{B}} \\
\shortparallel           &amp;\quad &amp;  \quad &amp; \shortparallel              &amp; \quad &amp;  \quad &amp; \shortparallel &amp; \quad &amp;  \quad&amp; \shortparallel                &amp;\quad &amp; \quad &amp; \shortparallel   \\
&amp;\quad &amp;= \quad &amp; z^2 V                         &amp; \quad &amp;+ \quad &amp; \delta(y,z) B  &amp; \quad &amp;+ \quad&amp; x T_{1}                       &amp;\quad &amp;+\quad &amp; x^{2} T_{2}
\end{aligned}
</annotation></semantics></math></span></span></span></span>
Notice that the sum of each column is a commitment to the variable in the top
row using the blinding factor in the second row.
The sum of all of the columns is
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow><annotation encoding="application/x-tex">t(x) B + {\tilde{t}}(x) {\widetilde{B}}</annotation></semantics></math></span></span></span>, a commitment to the value
of <span><span><span><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span></span></span> at the point <span><span><span><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span></span></span>, using the synthetic blinding factor<sup id="fnref3"><a href="#fn3">3</a></sup>
<span><span><span><span><math><semantics><mrow><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mrow><mover accent="true"><mrow><mi>v</mi></mrow><mo>~</mo></mover></mrow><mo>+</mo><mi>x</mi><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mn>1</mn></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mn>2</mn></msub><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">
{\tilde{t}}(x) = z^{2} {\tilde{v}} + x {\tilde{t}}_{1} + x^{2} {\tilde{t}}_{2}.
</annotation></semantics></math></span></span></span></span>
To convince the verifier that
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><mi>v</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>+</mo><msub><mi>t</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>t</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">t(x) = z^2v + \delta(y,z) + t_{1} x + t_{2} x^{2}</annotation></semantics></math></span></span></span>, the prover sends
the opening <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x), {\tilde{t}}(x)</annotation></semantics></math></span></span></span> to the verifier, who uses the
bottom row of the diagram to check consistency:
<span><span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><msup><mi>z</mi><mn>2</mn></msup><mi>V</mi><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi><mo>+</mo><mi>x</mi><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mi>T</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">
t(x) B + {\tilde{t}}(x) {\widetilde{B}} \stackrel{?}{=} z^2 V + \delta(y,z) B + x T_{1} + x^{2} T_{2}.
</annotation></semantics></math></span></span></span></span></p>

<p>We want to relate <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> to commitments
to <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{L}</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{a}}_{R}</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{s}}_{L}</annotation></semantics></math></span></span></span>, and
<span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{s}}_{R}</annotation></semantics></math></span></span></span>. However, since <span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><mrow><mo fence="true">(</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mi>x</mi><mo fence="true">)</mo></mrow><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\mathbf{r}}(x) &amp;= {\mathbf{y}}^{n} \circ \left( ({\mathbf{a}}_{R} + {\mathbf{s}}_{R} x\right)  + z {\mathbf{1}}) + z^{2} {\mathbf{2}}^{n},\end{aligned}
</annotation></semantics></math></span></span></span></span>
we need commitments to <span><span><span><math><semantics><mrow><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{y}}^{n} \circ {\mathbf{a}}_{R}</annotation></semantics></math></span></span></span> and
<span><span><span><math><semantics><mrow><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{y}}^{n} \circ {\mathbf{s}}_{R}</annotation></semantics></math></span></span></span>. However, since the prover
must form commitments before receiving the verifier’s challenge <span><span><span><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span></span></span>, the
prover can only commit to <span><span><span><math><semantics><mrow><msub><mi>a</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">a_{R}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mi>s</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">s_{R}</annotation></semantics></math></span></span></span>. Since the prover’s
commitments are to <span><span><span><math><semantics><mrow><msub><mi>a</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">a_{R}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mi>s</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">s_{R}</annotation></semantics></math></span></span></span>, the verifier needs to transmute
the prover’s commitment
<span><span><span><math><semantics><mrow><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">
\operatorname{Com}({\mathbf{a}}_{L},{\mathbf{a}}_{R}, {\widetilde{a}})
</annotation></semantics></math></span></span></span>
into a commitment
<span><span><span><math><semantics><mrow><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">
\operatorname{Com}({\mathbf{a}}_{L}, {\mathbf{y}}^{n} \circ {\mathbf{a}}_{R}, {\widetilde{a}})
</annotation></semantics></math></span></span></span>
(and similarly for <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{\mathbf{s}}_{R}</annotation></semantics></math></span></span></span>).
To do this, notice that
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo>∘</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo separator="true">,</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\operatorname{Com}({\mathbf{a}}_{L}, {\mathbf{a}}_{R}, {\widetilde{a}})
&amp;=
{\langle {\mathbf{a}}_{L}, {\mathbf{G}} \rangle} + {\langle {\mathbf{a}}_{R}, {\mathbf{H}} \rangle} + {\widetilde{a}} {\widetilde{B}} \\
&amp;=
{\langle {\mathbf{a}}_{L}, {\mathbf{G}} \rangle} + {\langle {\mathbf{y}}^{n} \circ {\mathbf{a}}_{R}, {\mathbf{y}}^{-n} \circ {\mathbf{H}} \rangle} + {\widetilde{a}} {\widetilde{B}},
\end{aligned}
</annotation></semantics></math></span></span></span></span>
so that by changing generators to
<span><span><span><math><semantics><mrow><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>=</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo>∘</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{H}}' = {\mathbf{y}}^{-n} \circ {\mathbf{H}}</annotation></semantics></math></span></span></span>, the point which
is a commitment to
<span><span><span><math><semantics><mrow><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">({\mathbf{a}}_{L}, {\mathbf{a}}_{R}, {\widetilde{a}})</annotation></semantics></math></span></span></span> with respect to
<span><span><span><math><semantics><mrow><mo>(</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">({\mathbf{G}}, {\mathbf{H}}, {\widetilde{a}})</annotation></semantics></math></span></span></span> is transmuted into a
commitment to
<span><span><span><math><semantics><mrow><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">({\mathbf{a}}_{L}, {\mathbf{y}}^{n} \circ {\mathbf{a}}_{R}, {\widetilde{a}})</annotation></semantics></math></span></span></span>
with respect to <span><span><span><math><semantics><mrow><mo>(</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo separator="true">,</mo><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>)</mo></mrow><annotation encoding="application/x-tex">({\mathbf{G}}, {\mathbf{H}}', {\widetilde{a}})</annotation></semantics></math></span></span></span>.</p>
<p>To relate the prover’s commitments
<span><span><span><math><semantics><mrow><mi>A</mi><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">A = \operatorname{Com}({\mathbf{a}}_{L}, {\mathbf{a}}_{R})</annotation></semantics></math></span></span></span> and
<span><span><span><math><semantics><mrow><mi>S</mi><mo>=</mo><mi mathvariant="normal">Com</mi><mo>⁡</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">S = \operatorname{Com}({\mathbf{s}}_{L}, {\mathbf{s}}_{R})</annotation></semantics></math></span></span></span> to
<span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span>, we use the following diagram:
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>L</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo>⟨</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mi>R</mi></msub><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo>⟨</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mover accent="true"><mrow><mi>a</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mrow><mover accent="true"><mrow><mi>s</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∥</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>∥</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>=</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>A</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mi>S</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>+</mo><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo>⟨</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{l}}(x), {\mathbf{G}} \rangle}    &amp;\quad &amp;= \quad &amp; {\langle {\mathbf{a}}_L, {\mathbf{G}} \rangle}   &amp; \quad &amp;+ \quad &amp; x {\langle {\mathbf{s}}_L, {\mathbf{G}} \rangle} &amp;\quad &amp;+\quad &amp; {\langle -z{\mathbf{1}}, {\mathbf{G}} \rangle} \\
+                        &amp;\quad &amp;  \quad &amp;  +                      &amp; \quad &amp;  \quad &amp; +                       &amp;\quad &amp; \quad &amp; +   \\
{\langle {\mathbf{r}}(x), {\mathbf{H}}' \rangle}   &amp;\quad &amp;= \quad &amp; {\langle {\mathbf{a}}_R, {\mathbf{H}} \rangle}   &amp; \quad &amp;+ \quad &amp; x {\langle {\mathbf{s}}_R, {\mathbf{H}} \rangle} &amp;\quad &amp;+\quad &amp; {\langle z {\mathbf{y}}^n + z^2 {\mathbf{2}}^n, {\mathbf{H}}' \rangle} \\
+                        &amp;\quad &amp;  \quad &amp;  +                      &amp; \quad &amp;  \quad &amp; +                       &amp;\quad &amp; \quad &amp;     \\
{\widetilde{e}} {\widetilde{B}}    &amp;\quad &amp;= \quad &amp; {\widetilde{a}} {\widetilde{B}} &amp; \quad &amp;+ \quad &amp; x {\widetilde{s}} {\widetilde{B}} &amp;\quad &amp; \quad &amp;               \\
\shortparallel           &amp;\quad &amp;  \quad &amp; \shortparallel          &amp; \quad &amp;  \quad &amp; \shortparallel          &amp;\quad &amp; \quad &amp; \shortparallel   \\
&amp;\quad &amp;= \quad &amp; A                       &amp; \quad &amp;+ \quad &amp; x S                     &amp;\quad &amp;+\quad &amp; {\langle z {\mathbf{y}}^n + z^2 {\mathbf{2}}^n, {\mathbf{H}}' \rangle} - z{\langle {\mathbf{1}}, {\mathbf{G}} \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span>
We can interpret the rows and columns similarly to the previous diagram:
the sum of each column is a vector Pedersen commitment with left and right halves from the first and second rows respectively
and blinding factor from the third row.
The sum of all of the columns is a vector
Pedersen commitment to <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> with
synthetic blinding factor <span><span><span><math><semantics><mrow><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow><annotation encoding="application/x-tex">{\widetilde{e}}</annotation></semantics></math></span></span></span>.</p>
<p>To convince the verifier that
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">t(x) = {\langle {\mathbf{l}}(x), {\mathbf{r}}(x) \rangle}</annotation></semantics></math></span></span></span>, the prover
sends <span><span><span><math><semantics><mrow><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow><annotation encoding="application/x-tex">{\widetilde{e}}</annotation></semantics></math></span></span></span> to the verifier, who uses the bottom row
to compute
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>P</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>+</mo><mi>A</mi><mo>+</mo><mi>x</mi><mi>S</mi><mo>+</mo><mrow><mo>⟨</mo><mi>z</mi><msup><mrow><mi mathvariant="bold">y</mi></mrow><mi>n</mi></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>+</mo><mi>A</mi><mo>+</mo><mi>x</mi><mi>S</mi><mo>+</mo><mrow><mo>⟨</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><mrow><msup><mi mathvariant="bold">y</mi><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><mo>∘</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">H</mi></mrow></mrow><mo>⟩</mo></mrow><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo separator="true">;</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
P &amp;= -{\widetilde{e}} {\widetilde{B}} + A + x S + {\langle z {\mathbf{y}}^n + z^2 {\mathbf{2}}^n, {\mathbf{H}}' \rangle} - z{\langle {\mathbf{1}}, {\mathbf{G}} \rangle}\\
&amp;= -{\widetilde{e}} {\widetilde{B}} + A + x S + {\langle z {\mathbf{1}} + z^2 {\mathbf{y}^{-n}} \circ {\mathbf{2}}^n, {\mathbf{H}} \rangle} - z{\langle {\mathbf{1}}, {\mathbf{G}} \rangle};
\end{aligned}
</annotation></semantics></math></span></span></span></span>
if the prover is honest, this is
<span><span><span><math><semantics><mrow><mi>P</mi><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">H</mi></mrow><mo mathvariant="normal">′</mo></msup><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">P = {\langle {\mathbf{l}}(x), {\mathbf{G}} \rangle} + {\langle {\mathbf{r}}(x), {\mathbf{H}}' \rangle}</annotation></semantics></math></span></span></span>,
so the verifier uses <span><span><span><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> as inputs to the inner-product protocol
to prove that
<span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">t(x) = {\langle {\mathbf{l}}(x), {\mathbf{r}}(x) \rangle}</annotation></semantics></math></span></span></span>.</p>

<p>The goal of an <em>aggregated range proof</em> is to enable a group of parties to produce proofs of their individual statements
(individual range proofs for the corresponding value commitments), that can be aggregated in a more compact proof.
This is made efficient due to a logarithmic size of the inner-product protocol: an aggregated range proof for <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span>
values is smaller than <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> individual range proofs.</p>
<p>The aggregation protocol is a multi-party computation protocol, involving <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> parties (one party per value) and one dealer, where the parties don't reveal their secrets to each other. The parties share their commitments with the dealer, and the dealer generates and returns challenge variables. The parties then share their proof shares with the dealer, and the dealer combines their shares to create an aggregated proof. </p>
<p>The Bulletproofs paper outlines two versions of multi-party computation aggregation. In the first approach, the inner-product proof is performed by the dealer, which requires sending the vectors used for the inner-product to the dealer. In the second approach, the inner-product proof is performed using multi-party computation, which sends less data but requires one round for each iteration of the inner-product protocol. We chose to implement the first approach because it requires fewer round trips between parties, which outweighed the slight message size savings of the second approach. </p>
<p>For more information on how the aggregation protocol works and is implemented, see the <a href="https://doc-internal.dalek.rs/bulletproofs/range_proof/index.html">protocol notes</a>. </p>
<p>The aggregated range proof has the same form as the individual range proof, in that the provers (the parties) still perform the same calculations to prove that <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mo>⟨</mo><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow><annotation encoding="application/x-tex">t(x) = \langle \mathbf{l}(x), \mathbf{r}(x) \rangle </annotation></semantics></math></span></span></span> and that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mi mathvariant="bold">r</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_0, \mathbf{l}(x), \mathbf{r}(x)</annotation></semantics></math></span></span></span> are correct. The difference is that the challenge values are obtained from the dealer, which generates them by combining commitments from all the parties, and that the calculations of different parties are separated by different powers of the challenge scalars <span><span><span><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span></span></span>.</p>
<p>We will explain how one piece of the aggregated proof is generated for party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>, and then will show how all of the pieces for all of the <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> parties can be combined into one aggregated proof.</p>

<p>The subscript <span><span><span><math><semantics><mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">{(j)}</annotation></semantics></math></span></span></span> denotes the <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>th party's share. For instance, <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">v_{(j)}</annotation></semantics></math></span></span></span> is the <span><span><span><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span></span></span> value of the <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>th party; <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">a</mi><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex"> \mathbf{a}_{L, (j)}</annotation></semantics></math></span></span></span> is the <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">a</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex"> \mathbf{a}_L </annotation></semantics></math></span></span></span> vector of the <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>th party; <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">l</mi><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbf{l}_{(0)}(x)</annotation></semantics></math></span></span></span> is the <span><span><span><math><semantics><mrow><mrow><mi mathvariant="bold">l</mi></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbf{l}(x)</annotation></semantics></math></span></span></span> polynomial of party <span><span><span><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span></span></span>. </p>
<p>We use pythonic notation to denote slices of vectors, such that <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>[</mo><mi>a</mi><mo>:</mo><mi>b</mi><mo>]</mo></mrow></msub><mo>=</mo><mo>[</mo><msub><mi mathvariant="bold">G</mi><mi>a</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="bold">G</mi><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi mathvariant="bold">G</mi><mrow><mi>b</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbf{G}_{[a:b]} = [\mathbf{G}_{a}, \mathbf{G}_{a+1}, \dots, \mathbf{G}_{b-1} ]</annotation></semantics></math></span></span></span>.</p>
<p><span><span><span><math><semantics><mrow><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{G}_{(j)}}</annotation></semantics></math></span></span></span> is party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>'s share of the generators <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{G}}</annotation></semantics></math></span></span></span>, or <span><span><span><math><semantics><mrow><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mi>n</mi><mo>]</mo></mrow></msub></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{G}_{[j\cdot n : (j+1)n]}}</annotation></semantics></math></span></span></span>, and <span><span><span><math><semantics><mrow><mrow><msubsup><mi mathvariant="bold">H</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mo mathvariant="normal">′</mo></msubsup></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{H}'_{(j)}}</annotation></semantics></math></span></span></span> is party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>'s share of the generators <span><span><span><math><semantics><mrow><mrow><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{H}'}</annotation></semantics></math></span></span></span>, or <span><span><span><math><semantics><mrow><mrow><msubsup><mi mathvariant="bold">H</mi><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mi>n</mi><mo>]</mo></mrow><mo mathvariant="normal">′</mo></msubsup></mrow></mrow><annotation encoding="application/x-tex">{\mathbf{H}'_{[j\cdot n : (j+1)n]}}</annotation></semantics></math></span></span></span>.</p>
<p><span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">z_{(j)}</annotation></semantics></math></span></span></span> is a scalar offset that is unique to each party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>, and is defined by <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>=</mo><msup><mi>z</mi><mi>j</mi></msup></mrow><annotation encoding="application/x-tex">z_{(j)} = z^j</annotation></semantics></math></span></span></span>. <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)}</annotation></semantics></math></span></span></span> is a length <span><span><span><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span></span></span> vector offset that is unique to each party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>. It is a slice into vector <span><span><span><math><semantics><mrow><msup><mi mathvariant="bold">y</mi><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\mathbf{y}^{n \cdot m}</annotation></semantics></math></span></span></span>, and is defined by <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>=</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)} = \mathbf{y}^{n \cdot m}_{[j \cdot n : (j+1) \cdot n]} </annotation></semantics></math></span></span></span></p>

<p>Party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span> begins with a secret value <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">v_{(j)}</annotation></semantics></math></span></span></span>, and wishes to convince the verifier that <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>∈</mo><mo>[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mi>n</mi></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">v_{(j)} \in [0, 2^n)</annotation></semantics></math></span></span></span> without revealing <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">v_{(j)}</annotation></semantics></math></span></span></span>. </p>
<p>We want to make statements about <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">v_{(j)}</annotation></semantics></math></span></span></span> using its bit vector representation, where the statements will be true if and only if <span><span><span><math><semantics><mrow><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">v_{(j)}</annotation></semantics></math></span></span></span> is actually in the expected range. We will not reproduce the steps or explanation here since it is the same as in the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#proving-range-statements-with-bit-vectors">proving range statements with bit vectors</a> step of the single-value range proof. Here are the final statements for party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>∘</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mrow><mn mathvariant="bold">0</mn></mrow></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{a}}_{L, (j)}, {\mathbf{2}}^{n} \rangle} &amp;= v_{(j)} \\
{\mathbf{a}}_{L, (j)} \circ {\mathbf{a}}_{R, (j)} &amp;= {\mathbf{0}} \\
({\mathbf{a}}_{L, (j)} - {\mathbf{1}}) - {\mathbf{a}}_{R, (j)} &amp;= {\mathbf{0}}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>We want to combine the above three statements into a single statement for party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>, as in the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#proving-vectors-of-statements-with-a-single-statement">proving vectors of statements</a> step of the single-value range proof. We will additionally use offsets <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">z_{(j)}</annotation></semantics></math></span></span></span> that are unique to each party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>. Since these challenge values are independent for each party, we can later merge the per-party combined statements into one statement for all <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> parties.</p>
<p>First, we will combine each of the two vector-statements into a single statement using the verifier's choice of challenge value <span><span><span><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span></span></span> that is shared across all parties, and offset by vector <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)}</annotation></semantics></math></span></span></span>:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>∘</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{a}}_{L, (j)}, {\mathbf{2}}^{n} \rangle} &amp;= v_{(j)} \\
{\langle {\mathbf{a}}_{L, (j)} - {\mathbf{1}} - {\mathbf{a}}_{R, (j)}, {\mathbf{y}}^{n}_{(j)} \rangle} &amp;= 0 \\
{\langle {\mathbf{a}}_{L, (j)}, {\mathbf{a}}_{R, (j)} \circ {\mathbf{y}}^{n}_{(j)} \rangle} &amp;= 0
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>The three resulting statements can then be combined in the same way,
using the verifier’s choice of challenge value <span><span><span><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span></span></span> that is shared across all parties, and offset by scalar <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">z_{(j)} </annotation></semantics></math></span></span></span> :
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mi>z</mi><mo>⋅</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>−</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>∘</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
z^{2} z_{(j)}  \cdot v_{(j)} 
&amp;= 
z^{2} z_{(j)}  \cdot {\langle {\mathbf{a}}_{L, (j)}, {\mathbf{2}}^{n} \rangle} \\
&amp;+ z \cdot {\langle {\mathbf{a}}_{L, (j)} - {\mathbf{1}} - {\mathbf{a}}_{R, (j)}, {\mathbf{y}}^{n}_{(j)}  \rangle} \\
&amp;+   {\langle {\mathbf{a}}_{L, (j)}, {\mathbf{a}}_{R, (j)} \circ {\mathbf{y}}^{n}_{(j)} \rangle} 
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>We combine the terms in the preceding statement into a single inner product, using the same technique as in the single-value range proof. We will not reproduce the math here since it is the same as in the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#combining-inner-products">combining inner products</a> step of the single-value proof. Here is the end result:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><msub><mi>v</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>∘</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\delta_{(j)}(y,z) &amp;= (z - z^{2}) \cdot {\langle {\mathbf{1}}, {\mathbf{y}}^{n}_{(j)} \rangle} - z^{3} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n} \rangle}\\
z^{2}z_{(j)} \cdot v_{(j)} + \delta_{(j)}(y,z) &amp;= {\langle {\mathbf{a}}_{L, (j)} - z {\mathbf{1}}, {\mathbf{y}}^{n}_{(j)} \circ ({\mathbf{a}}_{R, (j)} + z {\mathbf{1}}) + z^{2} z_{(j)} \cdot {\mathbf{2}}^{n} \rangle}
\end{aligned} 
</annotation></semantics></math></span></span></span></span></p>

<p>The prover chooses vectors of blinding factors <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">s</mi><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex"> \mathbf{s}_{L, (j)}, {\mathbf{s}}_{R, (j)} </annotation></semantics></math></span></span></span>, and uses them to construct the blinded vector polynomials <span><span><span><math><semantics><mrow><msub><mi mathvariant="bold">l</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mi mathvariant="bold">r</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbf{l}_{(j)}(x), \mathbf{r}_{(j)}(x)</annotation></semantics></math></span></span></span>. We will not reproduce the steps or the explanation here since it is the same as in the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#blinding-the-inner-product">blinding the inner product</a> step of the single-value proof. Here are the final equations for the vector polynomials:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mrow><mi>L</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mi>x</mi><mo>)</mo><mo>−</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∈</mo><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><mo>[</mo><mi>x</mi><msup><mo>]</mo><mi>n</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>∘</mo><mrow><mo fence="true">(</mo><mo>(</mo><msub><mrow><mi mathvariant="bold">a</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msub><mrow><mi mathvariant="bold">s</mi></mrow><mrow><mi>R</mi><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mi>x</mi><mo fence="true">)</mo></mrow><mo>+</mo><mi>z</mi><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo>)</mo><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>∈</mo><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><mo>[</mo><mi>x</mi><msup><mo>]</mo><mi>n</mi></msup></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\mathbf{l}}_{(j)}(x) &amp;= ({\mathbf{a}}_{L, (j)} + {\mathbf{s}}_{L, (j)} x) - z {\mathbf{1}} &amp; \in {\mathbb Z_p}[x]^{n}  \\
{\mathbf{r}}_{(j)}(x) &amp;= {\mathbf{y}}^{n}_{(j)} \circ \left( ({\mathbf{a}}_{R, (j)} + {\mathbf{s}}_{R, (j)} x\right)  + z {\mathbf{1}}) + z^{2} z_{(j)} {\mathbf{2}}^{n} &amp;\in {\mathbb Z_p}[x]^{n} 
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>Proving that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span> is correct means proving that
<span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{(j)}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{(j)}(x)</annotation></semantics></math></span></span></span> are correctly formed, and that
<span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow><annotation encoding="application/x-tex">t_{(j)}(x) = {\langle {\mathbf{l}}_{(j)}(x), {\mathbf{r}}_{(j)}(x) \rangle}</annotation></semantics></math></span></span></span>.</p>
<p>We can combine the statements about <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{(j)}(x)</annotation></semantics></math></span></span></span>, and <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{(j)}(x)</annotation></semantics></math></span></span></span> from all <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> parties in the following manner:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) &amp;= \sum_{j=0}^{m-1} t_{(j)}(x)\\
{\mathbf{l}}(x) &amp;= {\mathbf{l}}_{(0)}(x) || {\mathbf{l}}_{(1)}(x) || \dots || {\mathbf{l}}_{(m-1)}(x) \\
{\mathbf{r}}(x) &amp;= {\mathbf{r}}_{(0)}(x) || {\mathbf{r}}_{(1)}(x) || \dots || {\mathbf{r}}_{(m-1)}(x) \\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can add the <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span> values together to create <span><span><span><math><semantics><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t(x)</annotation></semantics></math></span></span></span> instead of taking a random linear combination of <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span> values, because each <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span> is calculated with the <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">z_{(j)}</annotation></semantics></math></span></span></span> challenge variables that are unique to that party <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span>, so all of the <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span> values will be offset from one another.</p>
<p>Now instead of having to do <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> individual checks to prove that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">t_{(j)}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{(j)}(x)</annotation></semantics></math></span></span></span>, and <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{(j)}(x)</annotation></semantics></math></span></span></span> for all parties <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span> are correct, we can do the verification with one check:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) \stackrel{?}{=} {\langle {\mathbf{l}}(x), {\mathbf{r}}(x) \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can do this check using the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#inner-product-proof">inner product proof</a>, in the same way the single-value range proof uses the inner product proof.</p>

<p>Proving that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mn>0</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">t_{0, (j)}</annotation></semantics></math></span></span></span> is correct requires first creating commitments to the variables, and then proving a relation over the commitments. For an explanation of how the commitments are created and how the relation is derived, see the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#proving-that-t_0-is-correct">proving that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">t_0</annotation></semantics></math></span></span></span> is correct</a> step of the single-value range proof. The statement each party wants to prove is:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msub><mi>V</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi><mo>+</mo><mi>x</mi><msub><mi>T</mi><mrow><mn>1</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mi>T</mi><mrow><mn>2</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t_{(j)}(x) B + {\tilde{t}}_{(j)}(x) {\widetilde{B}} \stackrel{?}{=} z^2 z_{(j)} V_{(j)} + \delta_{(j)}(y,z) B + x T_{1, (j)} + x^{2} T_{2, (j)}\\
\delta_{(j)}(y,z) = (z - z^{2}) \cdot {\langle {\mathbf{1}}, {\mathbf{y}}^{n}_{(j)} \rangle} - z^{3} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n} \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>If we combine all of the statements about <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mn>0</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">t_{0, (j)}</annotation></semantics></math></span></span></span> from all of the <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span> parties by adding them together, then we get:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><msup><mi>z</mi><mn>2</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msub><mi>V</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi><mo>+</mo><mi>x</mi><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>T</mi><mrow><mn>1</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>T</mi><mrow><mn>2</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\sum_{j=0}^{m-1}t_{(j)}(x) B + \sum_{j=0}^{m-1}{\tilde{t}}_{(j)}(x) {\widetilde{B}} \stackrel{?}{=} z^2 \sum_{j=0}^{m-1} z_{(j)} V_{(j)} + \sum_{j=0}^{m-1} \delta_{(j)}(y,z) B + x \sum_{j=0}^{m-1} T_{1, (j)} + x^{2} \sum_{j=0}^{m-1} T_{2, (j)}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can combine the values and commitments by summing them directly. We can do this instead of having to take a random linear combination, because each party's values and commitments are already offset by the values <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)}</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">z_{(j)}</annotation></semantics></math></span></span></span> that are unique to that party.</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>t</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>T</mi><mrow><mn>1</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>T</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>T</mi><mrow><mn>2</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) &amp;= \sum_{j=0}^{m-1} t_{(j)}(x)\\
{\tilde{t}}(x) &amp;= \sum_{j=0}^{m-1}{\tilde{t}}_{(j)}(x)\\
T_1 &amp;= \sum_{j=0}^{m-1} T_{1, (j)}\\
T_2 &amp;= \sum_{j=0}^{m-1} T_{2, (j)}\\
\delta(y,z) &amp;= \sum_{j=0}^{m-1} \delta_{(j)}(y,z)\\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can plug the equation for <span><span><span><math><semantics><mrow><msub><mi>δ</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\delta_{(j)}(y,z)</annotation></semantics></math></span></span></span> into the calculation for <span><span><span><math><semantics><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\delta(y,z)</annotation></semantics></math></span></span></span>:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\delta(y, z) &amp;= (z - z^{2}) \cdot \sum_{j=0}^{m-1} {\langle {\mathbf{1}}, {\mathbf{y}}^{n}_{(j)} \rangle} - z^{3} \sum_{j=0}^{m-1} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n \cdot m} \rangle}\\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>Since we know that <span><span><span><math><semantics><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>=</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{y}^n_{(j)} = \mathbf{y}^{n \cdot m}_{[j \cdot n : (j+1) \cdot n]} </annotation></semantics></math></span></span></span>, we can simplify <span><span><span><math><semantics><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\delta(y, z)</annotation></semantics></math></span></span></span>:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mo>(</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mn>0</mn><mo>:</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup><mo>⟩</mo><mo>+</mo><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mi>n</mi><mo>:</mo><mn>2</mn><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup><mo>⟩</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>⋅</mo><mi>n</mi><mo>:</mo><mi>m</mi><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup><mo>⟩</mo></mrow><mo>)</mo><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mi mathvariant="bold">y</mi><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\delta(y, z) &amp;= (z - z^{2}) \cdot (
{\langle {\mathbf{1}}, \mathbf{y}^{n \cdot m}_{[0 : n]} \rangle + 
\langle {\mathbf{1}}, \mathbf{y}^{n \cdot m}_{[n : 2 \cdot n]} \rangle + 
\dots +
\langle {\mathbf{1}}, \mathbf{y}^{n \cdot m}_{[(m-1) \cdot n : m \cdot n]} \rangle}) -
z^{3} \sum_{j=0}^{m-1} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n \cdot m} \rangle} \\
&amp;= (z - z^{2}) \cdot {\langle {\mathbf{1}}, \mathbf{y}^{n \cdot m} \rangle} - z^{3} \sum_{j=0}^{m-1} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n \cdot m} \rangle} \\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>Now instead of having to do <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> individual checks to prove that <span><span><span><math><semantics><mrow><msub><mi>t</mi><mrow><mn>0</mn><mo separator="true">,</mo><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">t_{0, (j)}</annotation></semantics></math></span></span></span> for all parties <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span> are correct, we can do the verification with one check using the combined values:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><msup><mi>z</mi><mn>2</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msub><mi>V</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi><mo>+</mo><mi>x</mi><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mi>T</mi><mn>2</mn></msub><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow><mo>−</mo><msup><mi>z</mi><mn>3</mn></msup><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) B + {\tilde{t}}(x) {\widetilde{B}} \stackrel{?}{=} z^2 \sum_{j=0}^{m-1} z_{(j)} V_{(j)} + \delta(y,z) B + x T_{1} + x^{2} T_{2},\\
\delta(y,z) = (z - z^{2}) \cdot {\langle {\mathbf{1}}, {\mathbf{y}}^{n \cdot m} \rangle} - z^{3} \sum_{j=0}^{m-1} z_{(j)} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n \cdot m} \rangle}\\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>Since we know that <span><span><span><math><semantics><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>=</mo><msup><mi>z</mi><mi>j</mi></msup></mrow><annotation encoding="application/x-tex">z_{(j)} = z^j</annotation></semantics></math></span></span></span>, we can rewrite the equation as follows:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>B</mi><mo>+</mo><mrow><mover accent="true"><mrow><mi>t</mi></mrow><mo>~</mo></mover></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msup><mi>z</mi><mrow><mi>j</mi><mo>+</mo><mn>2</mn></mrow></msup><msub><mi>V</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mi>B</mi><mo>+</mo><mi>x</mi><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mi>T</mi><mn>2</mn></msub><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>)</mo><mo>=</mo><mo>(</mo><mi>z</mi><mo>−</mo><msup><mi>z</mi><mn>2</mn></msup><mo>)</mo><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mi mathvariant="bold">y</mi></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msup><mi>z</mi><mrow><mi>j</mi><mo>+</mo><mn>3</mn></mrow></msup><mo>⋅</mo><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
t(x) B + {\tilde{t}}(x) {\widetilde{B}} \stackrel{?}{=} \sum_{j=0}^{m-1} z^{j+2} V_{(j)} + \delta(y,z) B + x T_{1} + x^{2} T_{2},\\
\delta(y,z) = (z - z^{2}) \cdot {\langle {\mathbf{1}}, {\mathbf{y}}^{n \cdot m} \rangle} - \sum_{j=0}^{m-1} z^{j+3} \cdot {\langle {\mathbf{1}}, {\mathbf{2}}^{n \cdot m} \rangle}\\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>

<p>Proving that <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}_{(j)}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}_{(j)}(x)</annotation></semantics></math></span></span></span> are correct requires first creating commitments to the variables, and then proving a relation over the commitments. For an explanation of how the commitments are created and how the relation is derived, see the <a href="https://doc-internal.dalek.rs/bulletproofs/notes/range_proof/index.html#proving-that-mathbflx-mathbfrx-are-correct">proving that <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> are correct</a> step of the single-value range proof. The statement that each party wants to prove is:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><mo>−</mo><mrow><msub><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>+</mo><msub><mi>A</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><mi>x</mi><msub><mi>S</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><mi>z</mi><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{l}}_{(j)}(x), {\mathbf{G}_{(j)}} \rangle} + {\langle {\mathbf{r}}_{(j)}(x), {\mathbf{H}'}_{(j)} \rangle} \stackrel{?}{=} -{\widetilde{e}_{(j)}} {\widetilde{B}} + A_{(j)} + x S_{(j)} - z{\langle {\mathbf{1}}, {\mathbf{G}_{(j)}} \rangle} + {\langle z \mathbf{y}^{n}_{(j)}  + z^2 z_{(j)} {\mathbf{2}}^n, {\mathbf{H}'}_{(j)} \rangle} 
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>If we combine all of the statements about <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span>, <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> from all the <span><span><span><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span></span></span> parties by adding them together, then we get:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mo>⟩</mo></mrow><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><msub><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>A</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>+</mo><mi>x</mi><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>S</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>−</mo><mi>z</mi><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mo>⟩</mo></mrow><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><mi>z</mi><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><mrow><msubsup><mi mathvariant="bold">H</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mo mathvariant="normal">′</mo></msubsup></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\sum_{j=0}^{m-1}{\langle {\mathbf{l}}_{(j)}(x), {\mathbf{G}_{(j)}} \rangle} + 
\sum_{j=0}^{m-1}{\langle {\mathbf{r}}_{(j)}(x), {\mathbf{H}'}_{(j)} \rangle} \stackrel{?}{=} 
-\sum_{j=0}^{m-1}{\widetilde{e}_{(j)}} {\widetilde{B}} + 
\sum_{j=0}^{m-1}A_{(j)} + x \sum_{j=0}^{m-1}S_{(j)} - 
z \sum_{j=0}^{m-1}{\langle {\mathbf{1}}, {\mathbf{G}_{(j)}} \rangle} + 
\sum_{j=0}^{m-1}{\langle z {\mathbf{y}^n_{(j)}} + z^2 z_{(j)} {\mathbf{2}}^n, {\mathbf{H}'_{(j)}} \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can simplify this expression by making a few observations. We know that:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>…</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>…</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>…</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>…</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
&amp;{\mathbf{l}}(x)     &amp;{}&amp;=&amp;{}&amp; {\mathbf{l}}_{(0)}(x) &amp; {} &amp;||&amp; {} &amp; {\mathbf{l}}_{(1)}(x) &amp; {} &amp;||&amp; {} &amp; \dots &amp; {} &amp;||&amp; {} &amp; {\mathbf{l}}_{(m-1)}(x) \\
&amp;{\mathbf{r}}(x)     &amp;{}&amp;=&amp;{}&amp; {\mathbf{r}}_{(0)}(x) &amp; {} &amp;||&amp; {} &amp; {\mathbf{r}}_{(1)}(x) &amp; {} &amp;||&amp; {} &amp; \dots &amp; {} &amp;||&amp; {} &amp; {\mathbf{r}}_{(m-1)}(x) \\
&amp;{\mathbf{G}}        &amp;{}&amp;=&amp;{}&amp; {\mathbf{G}}_{(0)}    &amp; {} &amp;||&amp; {} &amp; {\mathbf{G}}_{(1)}    &amp; {} &amp;||&amp; {} &amp; \dots &amp; {} &amp;||&amp; {} &amp; {\mathbf{G}}_{(m-1)} \\
&amp;{\mathbf{H}'}       &amp;{}&amp;=&amp;{}&amp; {\mathbf{H}'}_{(0)}   &amp; {} &amp;||&amp; {} &amp; {\mathbf{H}'}_{(1)}   &amp; {} &amp;||&amp; {} &amp; \dots &amp; {} &amp;||&amp; {} &amp; {\mathbf{H}'}_{(m-1)} 
\end{aligned}
</annotation></semantics></math></span></span></span></span>
<span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msubsup><mi mathvariant="bold">y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow><mi>n</mi></msubsup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mi mathvariant="bold">y</mi><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>z</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>z</mi><mi>j</mi></msup></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\mathbf{y}^n_{(j)} &amp;= \mathbf{y}^{n \cdot m}_{[j \cdot n : (j+1) \cdot n]} \\
z_{(j)}             &amp;= z^j
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>Therefore, we can simplify the following statements:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><msub><mi mathvariant="bold">G</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mo>+</mo><mo>⋯</mo><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">l</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">G</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow><mo>+</mo><mo>⋯</mo><mo>+</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mrow><mi mathvariant="bold">r</mi></mrow><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>0</mn><mo>)</mo></mrow></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mn>1</mn><mo>)</mo></mrow></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>…</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup></mrow><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\sum_{j=0}^{m-1}{\langle {\mathbf{l}}_{(j)}(x), {\mathbf{G}_{(j)}} \rangle} &amp;= {\langle {\mathbf{l}}_{(0)}(x), {\mathbf{G}}_{(0)} \rangle} + 
{\langle {\mathbf{l}}_{(1)}(x), {\mathbf{G}}_{(1)} \rangle} + 
\dots + 
{\langle {\mathbf{l}}_{(m-1)}(x), {\mathbf{G}}_{(m-1)} \rangle}\\
&amp;= {\langle {\mathbf{l}}_{(0)}(x) || {\mathbf{l}}_{(1)}(x) || \dots || {\mathbf{l}}_{(m-1)}(x), {\mathbf{G}}_{(0)} || {\mathbf{G}}_{(1)} || \dots || {\mathbf{G}}_{(m-1)} \rangle} \\
&amp;= {\langle {\mathbf{l}}(x), {\mathbf{G}} \rangle} \\
\sum_{j=0}^{m-1}{\langle {\mathbf{r}}_{(j)}(x), {\mathbf{H}'}_{(j)} \rangle} 
&amp;= {\langle {\mathbf{r}}_{(0)}(x), {\mathbf{H}'}_{(0)} \rangle} + 
{\langle {\mathbf{r}}_{(1)}(x), {\mathbf{H}'}_{(1)} \rangle} + 
\dots + 
{\langle {\mathbf{r}}_{(m-1)}(x), {\mathbf{H}'}_{(m-1)} \rangle} \\
&amp;= {\langle {\mathbf{r}}_{(0)}(x) || {\mathbf{r}}_{(1)}(x) || \dots || {\mathbf{r}}_{(m-1)}(x), {\mathbf{H}'}_{(0)} || {\mathbf{H}'}_{(1)} || \dots || {\mathbf{H}'}_{(m-1)}  \rangle}\\
&amp;= {\langle  {\mathbf{r}}(x), {\mathbf{H}'} \rangle}
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>We can combine the values and commitments from all the <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span> parties by summing them directly:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><msub><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>A</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>A</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>S</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>S</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\widetilde{e}} &amp;= \sum_{j=0}^{m-1} {\widetilde{e}_{(j)}} \\
A &amp;= \sum_{j=0}^{m-1} A_{(j)} \\
S &amp;= \sum_{j=0}^{m-1} S_{(j)} \\
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
<p>With these observations, we can simplify the combined <span><span><span><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span></span></span>-party statement about <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{l}}(x)</annotation></semantics></math></span></span></span> and <span><span><span><math><semantics><mrow><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">{\mathbf{r}}(x)</annotation></semantics></math></span></span></span> into:</p>
<p><span><span><span><span><math><semantics><mrow><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">l</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mrow><mo>⟨</mo><mrow><mrow><mi mathvariant="bold">r</mi></mrow></mrow><mo>(</mo><mi>x</mi><mo>)</mo><mo separator="true">,</mo><mrow><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup></mrow><mo>⟩</mo></mrow><mstyle><mover><mo><mo>=</mo></mo><mo>?</mo></mover></mstyle><mo>−</mo><mrow><mover accent="true"><mrow><mi>e</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mrow><mover accent="true"><mrow><mi>B</mi></mrow><mo stretchy="true">~</mo></mover></mrow><mo>+</mo><mi>A</mi><mo>+</mo><mi>x</mi><mi>S</mi><mo>−</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><mrow><mn mathvariant="bold">1</mn></mrow></mrow><mo separator="true">,</mo><mrow><mrow><mi mathvariant="bold">G</mi></mrow></mrow><mo>⟩</mo></mrow><mo>+</mo><mi>z</mi><mrow><mo>⟨</mo><mrow><msup><mi mathvariant="bold">y</mi><mrow><mi>n</mi><mo>⋅</mo><mi>m</mi></mrow></msup></mrow><mo separator="true">,</mo><mrow><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup></mrow><mo>⟩</mo></mrow><mo>+</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mo>⟨</mo><msup><mi>z</mi><mrow><mi>j</mi><mo>+</mo><mn>2</mn></mrow></msup><mo>⋅</mo><msup><mrow><mn mathvariant="bold">2</mn></mrow><mi>n</mi></msup><mo separator="true">,</mo><msub><msup><mi mathvariant="bold">H</mi><mo mathvariant="normal">′</mo></msup><mrow><mo>[</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mo>:</mo><mo>(</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>⋅</mo><mi>n</mi><mo>]</mo></mrow></msub><mo>⟩</mo></mrow></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">
\begin{aligned}
{\langle {\mathbf{l}}(x), {\mathbf{G}} \rangle} + {\langle {\mathbf{r}}(x), {\mathbf{H}'} \rangle} \stackrel{?}{=} -{\widetilde{e}} {\widetilde{B}} + A + x S - z{\langle {\mathbf{1}}, {\mathbf{G}} \rangle} + z{\langle {\mathbf{y}^{n \cdot m}}, {\mathbf{H}'} \rangle} + \sum_{j=0}^{m-1} {\langle z^{j+2} \cdot {\mathbf{2}}^n, {\mathbf{H}'}_{[j \cdot n : (j+1) \cdot n]} \rangle} 
\end{aligned}
</annotation></semantics></math></span></span></span></span></p>
</div></div></div>
    </div>
    <footer>
        <div>created by <a href="https://buildstarted.com">buildstarted</a> &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
        <div>Customer satisfaction guaranteed to be optional.</div>
    </footer>
    
    <script async defer>
        _dna = window._dna || {};
        _dna.siteId = "linksfor.devs";
        _dna.outlink = true;

        (function() {
            let dna = document.createElement('script');
            dna.type = 'text/javascript';
            dna.async = true;
            dna.src = '//dna.buildstarted.com/t.js';
            let s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(dna, s);
        })();
    </script>
    <noscript><img src="//dna.buildstarted.com/g?siteId=linksfor.devs"/></noscript>
</body>
</html>