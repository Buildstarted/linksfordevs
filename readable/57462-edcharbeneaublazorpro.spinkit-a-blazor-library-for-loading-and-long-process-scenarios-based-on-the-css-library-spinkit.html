<!DOCTYPE html>
<html lang="en">
<head>
    <title>
EdCharbeneau/BlazorPro.Spinkit: A Blazor library for loading and long process scenarios based on the CSS library Spinkit -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>EdCharbeneau/BlazorPro.Spinkit: A Blazor library for loading and long process scenarios based on the CSS library Spinkit</h1><div><div id="" class="markdown-body entry-content p-5"><p>A collection of loading indicators animated with CSS for Blazor. Spinkit also includes the SpinLoader component with templates for handling null values during async operations. Spinkit includes CSS from the Spinkit project by <a href="https://tobiasahlin.com/spinkit/" rel="nofollow">Tobias Ahlin</a></p><p><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/EdCharbeneau/BlazorPro.Spinkit/master/src/BlazorPro.Spinkit/_resources/demo.gif"><img src="https://raw.githubusercontent.com/EdCharbeneau/BlazorPro.Spinkit/master/src/BlazorPro.Spinkit/_resources/demo.gif" alt="Screenshot of the component in action"></a></p><h2><a id="user-content-getting-setup" class="anchor" aria-hidden="true" href="#getting-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Setup</h2><p>You can install the package via the nuget package manager just search for <em>BlazorPro.Spinkit</em>. You can also install via powershell using the following command.</p><div class="highlight highlight-source-powershell"><pre><span class="pl-c1">Install-Package</span> BlazorPro.Spinkit</pre></div><p>Or via the dotnet CLI.</p><div class="highlight highlight-source-shell"><pre>dotnet add package BlazorPro.Spinkit</pre></div><h3><a id="user-content-1-add-imports" class="anchor" aria-hidden="true" href="#1-add-imports"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Add Imports</h3><p>Add the following to your <em>_Imports.razor</em></p><h3><a id="user-content-2-add-a-spinner-component" class="anchor" aria-hidden="true" href="#2-add-a-spinner-component"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Add a spinner component</h3><p>Add one of the following components to your index page.</p><pre><code>&lt;Chase /&gt;
&lt;Circle /&gt;
&lt;CircleFade /&gt;
&lt;Flow /&gt;
&lt;Grid /&gt;
&lt;Plane /&gt;
&lt;Pulse /&gt;
&lt;Swing /&gt;
&lt;Wander /&gt;
&lt;Wave /&gt;
&lt;Bounce /&gt;
</code></pre><h3><a id="user-content-3-add-reference-to-style-sheet" class="anchor" aria-hidden="true" href="#3-add-reference-to-style-sheet"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Add reference to style sheet</h3><p>Add the following line to the <code>head</code> tag of your <code>_Host.cshtml</code> (Blazor Server) or <code>index.html</code> (Blazor WebAssembly).</p><div class="highlight highlight-text-html-basic"><pre>    &lt;<span class="pl-ent">link</span><span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>_content/BlazorPro.Spinkit/spinkit.min.css<span class="pl-pds">"</span></span><span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> /&gt;</pre></div><h2><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2><h3><a id="user-content-displaying-a-conditional-spinner" class="anchor" aria-hidden="true" href="#displaying-a-conditional-spinner"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Displaying a conditional spinner</h3><p>Spinners are best used with some long running task. Simply create a flag to indicate the process is running and display a spinner with an <code>if</code> statement.</p><div class="highlight highlight-text-html-basic"><pre>@page "/"

if (IsLoading) {
	&lt;<span class="pl-ent">Pulse</span> /&gt;
}
</pre></div><h3><a id="user-content-displaying-an-integrated-loading-experience-with-the-spinloader-component" class="anchor" aria-hidden="true" href="#displaying-an-integrated-loading-experience-with-the-spinloader-component"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Displaying an integrated loading experience with the SpinLoader Component</h3><p>Instead of writing common boilerplate code with if statements you may use the SpinLoader Component. With SpinLoader there is no need to write <code>if</code> statements and check the data source for null values.</p><p><strong>Before SpinLoader</strong></p><p>In the following example we can remove the statement <code>@if (forecasts == null)</code> and replace it with the SpinLoader Component.</p><pre><code>@page "/fetchdata"
@inject HttpClient Http

&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;

@if (forecasts == null)
{
    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;
}
else
{
    &lt;table class="table"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Date&lt;/th&gt;
                &lt;th&gt;Temp. (C)&lt;/th&gt;
                &lt;th&gt;Temp. (F)&lt;/th&gt;
                &lt;th&gt;Summary&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            @foreach (var forecast in forecasts)
            {
                &lt;tr&gt;
                    &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                    &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                    &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                    &lt;td&gt;@forecast.Summary&lt;/td&gt;
                &lt;/tr&gt;
            }
        &lt;/tbody&gt;
    &lt;/table&gt;
}

@code {
    private WeatherForecast[] forecasts;

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre><p><strong>After SpinLoader</strong></p><p>In the following example the loading predicate <code>forecast == null</code> is moved to the IsLoading property of the SpinLoader Component. This eliminates the need for an <code>if</code> statement. A default loading indicator (aka spinner) will be shown or one can be chosen by setting the <code>Spinner</code> property, Ex: <code>Spinner="SpinnerType.Plane"</code>.</p><pre><code>@page "/fetchdata"
&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;
&lt;p&gt;An artificial delay of 3000ms is used to show a &amp;lt;SpinLoader&amp;gt; component.&lt;/p&gt;

&lt;SpinLoader IsLoading="@(forecasts == null)"&gt;
    &lt;ContentTemplate&gt;
        &lt;table class="table"&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;Date&lt;/th&gt;
                    &lt;th&gt;Temp. (C)&lt;/th&gt;
                    &lt;th&gt;Temp. (F)&lt;/th&gt;
                    &lt;th&gt;Summary&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                @foreach (var forecast in forecasts)
                {
                    &lt;tr&gt;
                        &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                        &lt;td&gt;@forecast.Summary&lt;/td&gt;
                    &lt;/tr&gt;
                }
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/ContentTemplate&gt;
&lt;/SpinLoader&gt;

@code {

    private WeatherForecast[] forecasts;

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre><h2><a id="user-content-customiztion" class="anchor" aria-hidden="true" href="#customiztion"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customiztion</h2><h3><a id="user-content-spinner-customization" class="anchor" aria-hidden="true" href="#spinner-customization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spinner Customization</h3><p>Spinners have three parameters that are used to control their properties: Color (string), Size (string), and Center (bool).</p><p><strong>Color:</strong> Any valid CSS color value.</p><pre><code>All Black
&lt;Circle Color="#000000" /&gt;

Green with Opacity
&lt;Circle Color="rgba(0,255,0,0.3)"/&gt;
</code></pre><p><strong>Size:</strong> Any valid CSS size value. <code>[ px | em | rem | % ]</code></p><pre><code>Pixels
&lt;Circle Size="100px" /&gt;
</code></pre><p><strong>Center:</strong> When set to true the spinner renders with <code>margin: auto</code></p><h3><a id="user-content-spinloader-customization" class="anchor" aria-hidden="true" href="#spinloader-customization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SpinLoader Customization</h3><p>The SpinLoader Component has the same properties as a Spinner: Color (string), Size (string), and Cetner (bool). These values will be passed to the SpinLoader's internal spinner if <strong>no LoadingTemplate</strong> is specified.</p><p>
    The &lt;SpinLoader&gt; component supports three template regions:
    </p><ul><li>LoadingTemplate (optional) - content to display while the IsLoading property is <b>true</b>.</li><li>ContentTemplate - content to display when the IsLoading is <b>false</b></li><li>FaultedTemplate - content to display when IsFaulted is <b>true</b> and IsLoading is <b>false</b></li></ul><hr><h3><a id="user-content-advanced-customization" class="anchor" aria-hidden="true" href="#advanced-customization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced Customization</h3><p>Spinners can be globally styled using CSS through the <code>--sk-color</code> and <code>--sk-size</code> CSS variables.</p><pre><code>:root {
    --sk-size: 40px;
    --sk-color: #333;
}
</code></pre><p>A more targeted approach is to use a CSS selector with a greater specificity.</p><pre><code>site.css
.my-spinner {
    --sk-size: 48px;
    --sk-color: #003366;
}

Component.razor
&lt;Circle css="my-spinner" /&gt;
</code></pre><h3><a id="user-content-advanced-app-loader" class="anchor" aria-hidden="true" href="#advanced-app-loader"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced: App Loader</h3><p>Even though we don't have access to Razor Components in our index.html, we can still make use of the component's HTML/CSS because it is based on the popular CSS library Spinkit by <a href="https://tobiasahlin.com/spinkit/" rel="nofollow">Tobias Ahlin</a>.</p><p>Note: This feature is not useful for Blazor Server apps since they are pre-rendered.</p><ol><li>Inside the index.html replace the <code>&lt;app&gt;</code> element with the following snippet.</li></ol><pre><code>&lt;app&gt;
    &lt;div class="modal-overlay"&gt;
        &lt;div class="sk-wave"&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
            &lt;div class="sk-wave-rect"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/app&gt;
</code></pre><ol start="2"><li>Add the <code>modal-overlay</code> style to your site.css.</li></ol><pre><code>.modal-overlay {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(0,0,0,0.5);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    --sk-color: white;
}
</code></pre><p>To choose the spinner type refer to the <a href="https://github.com/tobiasahlin/SpinKit">HTML/CSS project's documentation</a>.</p><h2><a id="user-content-full-featured-example" class="anchor" aria-hidden="true" href="#full-featured-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Full Featured Example</h2><p>The following example shows the full extent of what SpinLoader can do. This example includes all possible templates and pattern for handling exceptions.</p><pre><code>@page "/fetchdata"
@inject HttpClient Http

&lt;h1&gt;Weather forecast&lt;/h1&gt;

&lt;p&gt;This component demonstrates fetching data from the server.&lt;/p&gt;
&lt;p&gt;
    The &amp;lt;SpinLoader&amp;gt; component supports three template regions:
    &lt;ul&gt;
        &lt;li&gt;LoadingTemplate (optional) - content to display while the IsLoading property is &lt;b&gt;true&lt;/b&gt;.&lt;/li&gt;
        &lt;li&gt;ContentTemplate - content to display when the IsLoading is &lt;b&gt;false&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;FaultedTemplate - content to display when IsFaulted is &lt;b&gt;true&lt;/b&gt; and IsLoading is &lt;b&gt;false&lt;/b&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/p&gt;
&lt;div class="form-row align-items-center"&gt;
    &lt;div class="col-auto"&gt;
        &lt;div class="form-check mb-2"&gt;
            &lt;input id="forceException" type="checkbox" @bind="forceException" class="form-check-input" /&gt;
            &lt;label class="form-check-label" for="forceException"&gt;Force exception&lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-auto"&gt;
        &lt;button class="btn btn-primary mb-2" @onclick="LoadData"&gt;Retry&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;table class="table"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Date&lt;/th&gt;
            &lt;th&gt;Temp. (C)&lt;/th&gt;
            &lt;th&gt;Temp. (F)&lt;/th&gt;
            &lt;th&gt;Summary&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;SpinLoader IsLoading="isLoading" IsFaulted="isFaulted"&gt;
            &lt;LoadingTemplate&gt;
                &lt;tr&gt;
                    &lt;td colspan="4" style="vertical-align: middle;background-color: rgb(0, 0, 0, .2); height:300px;"&gt;
                        &lt;Circle Color="#e67e22" Size="60px" Center="true" /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/LoadingTemplate&gt;
            &lt;ContentTemplate&gt;
                @foreach (var forecast in forecasts)
                {
                    &lt;tr&gt;
                        &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                        &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;
                        &lt;td&gt;@forecast.Summary&lt;/td&gt;
                    &lt;/tr&gt;
                }
            &lt;/ContentTemplate&gt;
            &lt;FaultedContentTemplate&gt;
                &lt;tr&gt;
                    &lt;td colspan="4"&gt;
                        &lt;div class="alert alert-danger"&gt;Fail&lt;/div&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/FaultedContentTemplate&gt;
        &lt;/SpinLoader&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

@code {

    WeatherForecast[] forecasts;
    bool isFaulted = false;
    bool isLoading = true;
    int delay = 2000;
    bool forceException = false;

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
    }

    async Task LoadData()
    {
        await TryLoadingData(
            onSuccess: SuccessPath,
            onFaulted: FaultedPath
            );
    }

    void SuccessPath(WeatherForecast[] data)
    {
        // do work
        forecasts = data;
    }

    void FaultedPath(Exception e)
    {
        // log message, don't share it with the user
        var fakeLog = e.Message;
    }

    async Task TryLoadingData(Action&lt;WeatherForecast[]&gt; onSuccess, Action&lt;Exception&gt; onFaulted)
    {
        isLoading = true;
        await Task.Delay(delay);
        try
        {
            if (forceException)
            {
                throw new NotSupportedException();
            }
            var data = await Http.GetJsonAsync&lt;WeatherForecast[]&gt;("sample-data/weather.json");
            isFaulted = false;
            onSuccess(data);
        }
        catch (Exception e)
        {
            isFaulted = true;
            onFaulted(e);
        }
        finally
        {
            isLoading = false;
        }
    }

    public class WeatherForecast
    {
        public DateTime Date { get; set; }

        public int TemperatureC { get; set; }

        public string Summary { get; set; }

        public int TemperatureF =&gt; 32 + (int)(TemperatureC / 0.5556);
    }
}
</code></pre><h2><a id="user-content-server-operation" class="anchor" aria-hidden="true" href="#server-operation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server Operation</h2><p>Because Blazor Server apps use pre-rendering to show the spinner the long operation must be done in OnAfterRunder.</p><div class="highlight highlight-source-cs"><pre><span class="pl-c"><span class="pl-c">//</span> Don't do this</span><span class="pl-c"><span class="pl-c">//</span>protected override async Task OnInitializedAsync()</span><span class="pl-c"><span class="pl-c">//</span>{</span><span class="pl-c"><span class="pl-c">//</span>    await LongOperation();</span><span class="pl-c"><span class="pl-c">//</span>}</span><span class="pl-k">protected</span><span class="pl-k">override</span><span class="pl-k">async</span><span class="pl-en">Task</span><span class="pl-en">OnAfterRenderAsync</span>(<span class="pl-k">bool</span><span class="pl-smi">firstRender</span>)
    {
        <span class="pl-k">if</span> (<span class="pl-smi">firstRender</span>)
        {
            <span class="pl-k">await</span><span class="pl-en">LongOperation</span>();
            <span class="pl-en">StateHasChanged</span>();
        }
    }</pre></div><p>Synchronous long operations may need to be wrapped in Task.Run to invoke the operation from an async context.</p><div class="highlight highlight-source-cs"><pre><span class="pl-c"><span class="pl-c">//</span> Invoked from button or AfterRenderAsync etc.</span><span class="pl-k">async</span><span class="pl-en">Task</span><span class="pl-en">LoadData</span>() {
    <span class="pl-k">await</span><span class="pl-smi">Task</span>.<span class="pl-en">Run</span>(() <span class="pl-k">=&gt;</span><span class="pl-en">LongRunningSync</span>());
}</pre></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>