<!DOCTYPE html>
<html lang="en">
<head>
    <title>
CssBuilder/Readme.md at master &#xB7; EdCharbeneau/CssBuilder &#xB7; GitHub -
linksfor.dev(s)
    </title>
    <link rel="alternate" type="application/rss+xml" title="Linksfor.dev(s) feed" href="https://linksfor.dev/feed.rss" />
    <meta charset="utf-8">
    <meta name="Description" content="A curated source of links that devs might find interesting. Updated around the clock." />
    <meta name="google" value="notranslate">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="grid">
        
<div class="readable">
    <div id="readOverlay" class="style-ebook"><div id="readInner" class="margin-medium size-medium"><h1>CssBuilder/Readme.md at master · EdCharbeneau/CssBuilder · GitHub</h1><div><div id="" class="markdown-body entry-content p-3 p-md-6"><p><strong><a href="https://github.com/EdCharbeneau/CssBuilder/wiki/Getting-started#getting-setup">Read the full API docs in the Wiki section</a></strong></p><p>When building complex components for ASP.NET Razor Components there are often CSS classes generated by multiple factors.
Styles can often be added by system &amp; component state, public parameters, and static base CSS classes.
Combining many CSS classes together doesn't scale well, and when components get large it can be tough to reason about.
The CSS builder pattern fixes this problem by offering a easy to repeat, easy to read pattern to use across components in a project.
A clean code approach to conditional CSS in Razor Components.</p><h2><a id="user-content-the-problem" class="anchor" aria-hidden="true" href="#the-problem"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The problem</h2><p>Given the component below, the Tab's CSS class is set by multiple sources.
The component has paramater <code>UserCss</code> which can be set at externally.
A base CSS class <code>bl-nav-link</code> which does not change.
Two state based CSS classes <code>bl-active</code> and <code>bl-disabled</code> which are dependent on if the Tab is active or disabled.
Rendering for the CSS class is spread across multiple concerns and is hard to maintain.</p><p><strong>Component</strong></p><div class="highlight highlight-text-html-basic"><pre><span class="pl-kos">&lt;</span><span class="pl-ent">Tab</span><span class="pl-c1">UserCss</span>="<span class="pl-s">my-class</span>" <span class="pl-c1">Disabled</span>=<span class="pl-s">true</span><span class="pl-kos">&gt;</span>...<span class="pl-kos">&lt;/</span><span class="pl-ent">Tab</span><span class="pl-kos">&gt;</span></pre></div><p><strong>Component Source Markup</strong></p><div class="highlight highlight-text-html-basic"><pre><span class="pl-kos">&lt;</span><span class="pl-ent">li</span><span class="pl-c1">class</span>="<span class="pl-s">bl-nav-item</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">a</span><span class="pl-c1">onclick</span>=<span class="pl-s">@Activate</span><span class="pl-c1">class</span>="<span class="pl-s">bl-nav-link @ActiveCssClass @DisabledCssClass</span>" <span class="pl-c1">role</span>="<span class="pl-s">button</span>"<span class="pl-kos">&gt;</span>
        @Title
    <span class="pl-kos">&lt;/</span><span class="pl-ent">a</span><span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">li</span><span class="pl-kos">&gt;</span></pre></div><p><strong>Component Source Logic</strong></p><div class="highlight highlight-source-cs"><pre>[<span class="pl-en">Parameter</span>] <span class="pl-k">string</span><span class="pl-smi">UserCss</span><span class="pl-k">=</span><span class="pl-smi">String</span>.<span class="pl-smi">Empty</span>;
<span class="pl-k">protected</span><span class="pl-k">string</span><span class="pl-smi">ActiveCssClass</span> =&gt; <span class="pl-smi">IsActive</span> ? "<span class="pl-smi">bl</span>-<span class="pl-smi">active</span>" : <span class="pl-smi">String</span>.<span class="pl-smi">Empty</span>;
<span class="pl-k">protected</span><span class="pl-k">string</span><span class="pl-smi">DisabledCssClass</span> =&gt; <span class="pl-smi">Disabled</span> ? "<span class="pl-smi">bl</span>-<span class="pl-smi">disabled</span>" : <span class="pl-smi">String</span>.<span class="pl-smi">Empty</span>;</pre></div><h2><a id="user-content-the-solution" class="anchor" aria-hidden="true" href="#the-solution"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Solution</h2><p>Using the CSS Builder pattern we can clean up the code and move everything to a single concern.
Refactoring the component, we move all of the CSS code to the components logic.
In the <code>OnParameterSet</code> lifecycle method, we condense all of the CSS responsibilities into a single variable <code>ClassToRender</code> (this name variable is optional).
Next, using the <code>CssBuilder</code> we define what classes should be added to the builder and when they should be rendered.
The pattern is as follows <code>AddClass</code> the CSS class and the condition when it should appear <code>AddClass(value, when: bool)</code>.
If the value is static, we can discard the <code>when</code> parameter.
Finally, Build is called. All CSS classes are then combined into a single string, properly spaced and trimmed.</p><p>The refactored code becomes:</p><p><strong>Component Source Markup (refactor)</strong></p><div class="highlight highlight-text-html-basic"><pre><span class="pl-kos">&lt;</span><span class="pl-ent">li</span><span class="pl-c1">class</span>="<span class="pl-s">bl-nav-item</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">a</span><span class="pl-c1">onclick</span>=<span class="pl-s">@Activate</span><span class="pl-c1">class</span>="<span class="pl-s">@ClassToRender</span>" <span class="pl-c1">role</span>="<span class="pl-s">button</span>"<span class="pl-kos">&gt;</span>
        @Title
    <span class="pl-kos">&lt;/</span><span class="pl-ent">a</span><span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">li</span><span class="pl-kos">&gt;</span></pre></div><p><strong>Component Source Logic (refactor)</strong></p><div class="highlight highlight-source-cs"><pre><span class="pl-k">protected</span><span class="pl-k">override</span><span class="pl-k">void</span><span class="pl-en">OnParametersSet</span>()
{
    <span class="pl-smi">ClassToRender</span><span class="pl-k">=</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>(<span class="pl-smi">UserCss</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-nav-link<span class="pl-pds">"</span></span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-active<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">IsActive</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-disabled<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">Disabled</span>)
                        .<span class="pl-en">Build</span>();
}</pre></div><h2><a id="user-content-dynamic-values" class="anchor" aria-hidden="true" href="#dynamic-values"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamic values</h2><p>If you encounter a dynamic value where some string is added to a CSS class name, we can easily handle this as well.
Consider the CSS namespace <code>bl-</code> must be prefixed to a value <code>SomeValue</code> supplied by the component state or user input.
This is easily handled with string interpolation <code>${var}</code>.</p><div class="highlight highlight-source-cs"><pre><span class="pl-k">protected</span><span class="pl-k">override</span><span class="pl-k">void</span><span class="pl-en">OnParametersSet</span>()
{
    <span class="pl-smi">ClassToRender</span><span class="pl-k">=</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>(<span class="pl-smi">UserCss</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-nav-link<span class="pl-pds">"</span></span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-active<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">IsActive</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-disabled<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">Disabled</span>)
			.<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-${SomeValue}<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">IsConditionMet</span>)
                        .<span class="pl-en">Build</span>();
}</pre></div><h2><a id="user-content-attribute-splatting" class="anchor" aria-hidden="true" href="#attribute-splatting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribute Splatting</h2><p>If you encounter dynamic values due to <a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/components?view=aspnetcore-3.1#attribute-splatting-and-arbitrary-parameters" rel="nofollow">attribute splatting</a>, we can easily handle this as well.
Consider the senario where we need to merge a splatted CSS attribute while preserving default values.</p><div class="highlight highlight-text-html-basic"><pre><span class="pl-c">&lt;!-- API --&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">MyComponent</span><span class="pl-c1">class</span>="<span class="pl-s">custom-value</span>"<span class="pl-kos">&gt;</span><span class="pl-c">&lt;!-- Output --&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">div</span><span class="pl-c1">class</span>="<span class="pl-s">my-base custom-value</span>"<span class="pl-kos">&gt;</span></pre></div><div class="highlight highlight-source-cs"><pre><span class="pl-k">&lt;</span><span class="pl-en">div</span><span class="pl-smi">@attributes</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>AdditionalAttributes<span class="pl-pds">"</span></span><span class="pl-smi">class</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>@CssClass<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span><span class="pl-smi">@code</span> {

    [<span class="pl-en">Parameter</span>(<span class="pl-smi">CaptureUnmatchedValues</span><span class="pl-k">=</span><span class="pl-c1">true</span>)]
    <span class="pl-smi">public</span><span class="pl-smi">IReadOnlyDictionary</span><span class="pl-k">&lt;</span><span class="pl-smi">string</span>, <span class="pl-smi">object</span><span class="pl-k">&gt;</span><span class="pl-smi">AdditionalAttributes</span> { <span class="pl-smi">get</span>; <span class="pl-smi">set</span>; } <span class="pl-k">=</span><span class="pl-k">new</span><span class="pl-en">Dictionary</span>&lt;<span class="pl-k">string</span>, <span class="pl-en">Object</span>&gt;();

    <span class="pl-smi">CssBuilder</span><span class="pl-smi">CssClass</span><span class="pl-k">=&gt;</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>(<span class="pl-s"><span class="pl-pds">"</span>my-base<span class="pl-pds">"</span></span>).<span class="pl-en">AddClassFromAttributes</span>(<span class="pl-smi">attributes</span>);
}</pre></div><h2><a id="user-content-func-when" class="anchor" aria-hidden="true" href="#func-when"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Func When</h2><p>Func is also accepted as an arguement for the <code>when</code> parameter. This allows either inline functions or named functions to be called directly.</p><div class="highlight highlight-source-cs"><pre><span class="pl-k">protected</span><span class="pl-k">override</span><span class="pl-k">void</span><span class="pl-en">OnParametersSet</span>()
{
    <span class="pl-smi">ClassToRender</span><span class="pl-k">=</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>(<span class="pl-smi">UserCss</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-nav-link<span class="pl-pds">"</span></span>)
			.<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-foo<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: ()<span class="pl-k">=&gt;</span><span class="pl-k">!</span><span class="pl-smi">string</span>.<span class="pl-en">IsNullOrEmpty</span>(<span class="pl-smi">Foo</span>) <span class="pl-k">||</span><span class="pl-k">!</span><span class="pl-smi">Disabled</span><span class="pl-k">||</span><span class="pl-smi">IsActive</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-active<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">IsActive</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-disabled<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">Disabled</span>)
                        .<span class="pl-en">Build</span>();
}</pre></div><p>Named function, example.</p><div class="highlight highlight-source-cs"><pre><span class="pl-k">bool</span><span class="pl-en">HasMeaningfulName</span>() <span class="pl-k">=&gt;</span><span class="pl-k">!</span><span class="pl-smi">string</span>.<span class="pl-en">IsNullOrEmpty</span>(<span class="pl-smi">Foo</span>) <span class="pl-k">||</span><span class="pl-k">!</span><span class="pl-smi">Disabled</span><span class="pl-k">||</span><span class="pl-smi">IsActive</span>);

<span class="pl-k">protected</span><span class="pl-k">override</span><span class="pl-k">void</span><span class="pl-en">OnParametersSet</span>()
{
    <span class="pl-smi">ClassToRender</span><span class="pl-k">=</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>(<span class="pl-smi">UserCss</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-nav-link<span class="pl-pds">"</span></span>)
			.<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-foo<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">HasMeaningfulName</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-active<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">IsActive</span>)
                        .<span class="pl-en">AddClass</span>(<span class="pl-s"><span class="pl-pds">"</span>bl-disabled<span class="pl-pds">"</span></span>, <span class="pl-smi">when</span>: <span class="pl-smi">Disabled</span>)
                        .<span class="pl-en">Build</span>();
}</pre></div><h2><a id="user-content-removing-unused-attributes" class="anchor" aria-hidden="true" href="#removing-unused-attributes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Removing Unused Attributes</h2><p>When using dynamic attributes may result in empty attribute. When Blazor renders an attribute that has an empty string value, it will result in an empty attribute tag.
However, if the value is null the attribute will be excluded. When an empty attribute is expected, the extension method NullIfEmpty can be used to clean up the resulting markup.
Note: This method is only necessary when no default value is supplied. Ex: new CssBuilder() or CssBuilder().Empty(). Forgetting to call NullIfEmpty should not have any impact on the UI.</p><div class="highlight highlight-text-html-basic"><pre><span class="pl-c">&lt;!-- Output with Empty String --&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">div</span><span class="pl-c1">class</span>=""<span class="pl-kos">&gt;</span><span class="pl-c">&lt;!-- Output with null --&gt;</span><span class="pl-kos">&lt;</span><span class="pl-ent">div</span><span class="pl-kos">&gt;</span></pre></div><div class="highlight highlight-source-cs"><pre><span class="pl-k">&lt;</span><span class="pl-en">div</span><span class="pl-smi">class</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>@CssClass<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span><span class="pl-smi">@code</span> {

    <span class="pl-c"><span class="pl-c">//</span>string CssClass =&gt; new CssBuilder().AddClassFromAttributes(attributes).Build();</span><span class="pl-smi">string</span><span class="pl-smi">CssClass</span><span class="pl-k">=&gt;</span><span class="pl-k">new</span><span class="pl-en">CssBuilder</span>().<span class="pl-en">AddClassFromAttributes</span>(<span class="pl-smi">attributes</span>).<span class="pl-en">NullIfEmpty</span>();
}</pre></div></div></div></div></div>
</div>
    </div>
    <footer>
        <div>created by buildstarted &copy; 2020 <a href="/about">about</a></div>
        <div>Share this page on social media: copy and paste this url https://linksfor.dev/</div>
        <div>If you prefer RSS: <a href="https://linksfor.dev/feed.xml">https://linksfor.dev/feed.xml</a></div>
    </footer>
    
    <script>
        (function () {
            var COLLECT_URL = "https://dna.buildstarted.com/t";
            var SITE_ID = "linksfor.devs";
            var GLOBAL_VAR_NAME = "__DNA__";

            window[GLOBAL_VAR_NAME] = {};

            window[GLOBAL_VAR_NAME].sendPageView = function () {
                var path = location.pathname;
                var referrer = document.referrer;

                var url = COLLECT_URL + "?siteid=" + SITE_ID + "&p=" + encodeURIComponent(path) + "&r=" + encodeURIComponent(referrer);

                try { fetch(url, { method: "GET" }); } catch (e) { }
            };

            window[GLOBAL_VAR_NAME].sendPageView();
        })();
    </script>
</body>
</html>